!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular"),require("lodash"),require("immutable"),require("ol"),require("moment"),require("THREE"),require("d3"),require("Plotly"),require("cw"),require("turf")):"function"==typeof define&&define.amd?define("stBundle",["angular","lodash","immutable","ol","moment","THREE","d3","Plotly","cw","turf"],e):"object"==typeof exports?exports.stBundle=e(require("angular"),require("lodash"),require("immutable"),require("ol"),require("moment"),require("THREE"),require("d3"),require("Plotly"),require("cw"),require("turf")):t.stBundle=e(t.angular,t._,t.Immutable,t.ol,t.moment,t.THREE,t.d3,t.Plotly,t.cw,t.turf)}(window,function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__5__,__WEBPACK_EXTERNAL_MODULE__6__,__WEBPACK_EXTERNAL_MODULE__21__,__WEBPACK_EXTERNAL_MODULE__26__,__WEBPACK_EXTERNAL_MODULE__261__,__WEBPACK_EXTERNAL_MODULE__995__,__WEBPACK_EXTERNAL_MODULE__1911__,__WEBPACK_EXTERNAL_MODULE__1969__){return function(t){function e(e){for(var r,a,s=e[0],l=e[1],c=e[2],d=0,f=[];d<s.length;d++)a=s[d],i[a]&&f.push(i[a][0]),i[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);for(u&&u(e);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={0:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window.webpackJsonpstBundle=window.webpackJsonpstBundle||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;return o.push([1232,1,2]),n()}([function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__0__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(t,e,n){var r=n(306);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return l}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return u}),n.d(e,"__generator",function(){return d}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return h}),n.d(e,"__spread",function(){return g}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return v}),n.d(e,"__asyncDelegator",function(){return y}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return _}),n.d(e,"__importDefault",function(){return x});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}l((r=r.apply(t,e||[])).next())})}function d(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{!function(t){t.value instanceof m?Promise.resolve(t.value.v).then(l,c):u(o[0][2],t)}(i[t](e))}catch(t){u(o[0][3],t)}}function l(t){s("next",t)}function c(t){s("throw",t)}function u(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){t[r]&&(e[r]=function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):p(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var r=n(103),i=n(43),o=n(789),a=n(17);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__5__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__6__},function(t,e,n){"use strict";e.name="matrix",e.factory=function(t,e,n,r){var i=r("matrix",{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});return i.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},i;function o(e,n,r){return new(t.Matrix.storage(n||"default"))(e,r)}}},,function(t,e,n){"use strict";t.exports=function t(e,n,r){return e&&"function"==typeof e.map?e.map(function(e){return t(e,n,r)}):n(e)}},,function(t,e,n){"use strict";var r=n(13),i=n(45),o=(n(28),n(383),n(65)),a=n(311);e.size=function(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e},e.validate=function(t,e){if(0==e.length){if(Array.isArray(t))throw new o(t.length,0)}else!function t(e,n,r){var i,a=e.length;if(a!=n[r])throw new o(a,n[r]);if(r<n.length-1){var s=r+1;for(i=0;i<a;i++){var l=e[i];if(!Array.isArray(l))throw new o(n.length-1,n.length,"<");t(e[i],n,s)}}else for(i=0;i<a;i++)if(Array.isArray(e[i]))throw new o(n.length+1,n.length,">")}(t,e,0)},e.validateIndex=function(t,e){if(!r.isNumber(t)||!r.isInteger(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new a(t,e)},e.UNINITIALIZED={},e.resize=function(t,n,o){if(!Array.isArray(t)||!Array.isArray(n))throw new TypeError("Array expected");if(0===n.length)throw new Error("Resizing to scalar is not supported");return n.forEach(function(t){if(!r.isNumber(t)||!r.isInteger(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+i.format(n)+")")}),function t(n,r,i,o){var a;var s;var l=n.length;var c=r[i];var u=Math.min(l,c);n.length=c;if(i<r.length-1){var d=i+1;for(a=0;a<u;a++)s=n[a],Array.isArray(s)||(s=[s],n[a]=s),t(s,r,d,o);for(a=u;a<c;a++)s=[],n[a]=s,t(s,r,d,o)}else{for(a=0;a<u;a++)for(;Array.isArray(n[a]);)n[a]=n[a][0];if(o!==e.UNINITIALIZED)for(a=u;a<c;a++)n[a]=o}}(t,n,0,void 0!==o?o:0),t},e.reshape=function(t,n){var r,i=e.flatten(t),a=function(t){return t.reduce(function(t,e){return t*e})};if(!Array.isArray(t)||!Array.isArray(n))throw new TypeError("Array expected");if(0===n.length)throw new o(0,a(e.size(t)),"!=");try{r=function t(e,n){var r=[];var i;if(0===n.length){if(0===e.length)throw new o(null,null,"!=");return e.shift()}for(i=0;i<n[0];i+=1)r.push(t(e,n.slice(1)));return r}(i,n)}catch(r){if(r instanceof o)throw new o(a(n),a(e.size(t)),"!=");throw r}if(i.length>0)throw new o(a(n),a(e.size(t)),"!=");return r},e.squeeze=function(t,n){for(var r=n||e.size(t);Array.isArray(t)&&1===t.length;)t=t[0],r.shift();for(var i=r.length;1===r[i-1];)i--;return i<r.length&&(t=function t(e,n,r){var i,o;if(r<n){var a=r+1;for(i=0,o=e.length;i<o;i++)e[i]=t(e[i],n,a)}else for(;Array.isArray(e);)e=e[0];return e}(t,i,0),r.length=i),t},e.unsqueeze=function(t,n,r,i){var o=i||e.size(t);if(r)for(var a=0;a<r;a++)t=[t],o.unshift(1);for(t=function t(e,n,r){var i,o;if(Array.isArray(e)){var a=r+1;for(i=0,o=e.length;i<o;i++)e[i]=t(e[i],n,a)}else for(var s=r;s<n;s++)e=[e];return e}(t,n,0);o.length<n;)o.push(1);return t},e.flatten=function(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function t(n){Array.isArray(n)?n.forEach(t):e.push(n)}),e},e.map=function(t,e){return Array.prototype.map.call(t,e)},e.forEach=function(t,e){Array.prototype.forEach.call(t,e)},e.filter=function(t,n){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n)},e.filterRegExp=function(t,n){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,function(t){return n.test(t)})},e.join=function(t,e){return Array.prototype.join.call(t,e)},e.identify=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e},e.generalize=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e},e.isArray=Array.isArray},,function(t,e,n){"use strict";function r(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}e.isNumber=function(t){return"number"==typeof t},e.isInteger=function(t){return!!isFinite(t)&&t==Math.round(t)},e.sign=Math.sign||function(t){return t>0?1:t<0?-1:0},e.format=function(t,n){if("function"==typeof n)return n(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",i=void 0;switch(n&&(n.notation&&(r=n.notation),e.isNumber(n)?i=n:n.precision&&(i=n.precision)),r){case"fixed":return e.toFixed(t,i);case"exponential":return e.toExponential(t,i);case"engineering":return e.toEngineering(t,i);case"auto":return e.toPrecision(t,i,n&&n.exponential).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}},e.splitNumber=function(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var a=r.replace(".","").replace(/^0*/,function(t){return i-=t.length,""}).replace(/0*$/,"").split("").map(function(t){return parseInt(t)});return 0===a.length&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}},e.toEngineering=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var i=e.roundDigits(e.splitNumber(t),n),o=i.exponent,a=i.coefficients,s=o%3==0?o:o<0?o-3-o%3:o-o%3,l=o>=0?o:Math.abs(s);a.length-1<l&&(a=a.concat(r(l-(a.length-1))));for(var c=Math.abs(o-s),u=1;--c>=0;)u++;var d=a.slice(u).join(""),f=d.match(/[1-9]/)?"."+d:"",p=a.slice(0,u).join("")+f+"e"+(o>=0?"+":"")+s.toString();return i.sign+p},e.toFixed=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var i=e.splitNumber(t),o=e.roundDigits(i,i.exponent+1+(n||0)),a=o.coefficients,s=o.exponent+1,l=s+(n||0);return a.length<l&&(a=a.concat(r(l-a.length))),s<0&&(a=r(1-s).concat(a),s=1),n&&a.splice(s,0,0===s?"0.":"."),o.sign+a.join("")},e.toExponential=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var i=e.splitNumber(t),o=n?e.roundDigits(i,n):i,a=o.coefficients,s=o.exponent;a.length<n&&(a=a.concat(r(n-a.length)));var l=a.shift();return o.sign+l+(a.length>0?"."+a.join(""):"")+"e"+(s>=0?"+":"")+s},e.toPrecision=function(t,n,i){if(isNaN(t)||!isFinite(t))return String(t);var o=i&&void 0!==i.lower?i.lower:.001,a=i&&void 0!==i.upper?i.upper:1e5,s=e.splitNumber(t),l=Math.abs(Math.pow(10,s.exponent));if(l<o||l>=a)return e.toExponential(t,n);var c=n?e.roundDigits(s,n):s,u=c.coefficients,d=c.exponent;u.length<n&&(u=u.concat(r(n-u.length))),u=u.concat(r(d-u.length+1+(u.length<n?n-u.length:0))),u=r(-d).concat(u);var f=d>0?d:0;return f<u.length-1&&u.splice(f+1,0,"."),c.sign+u.join("")},e.roundDigits=function(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e&&r.splice(e,r.length-e)[0]>=5){var i=e-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n},e.digits=function(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},e.DBL_EPSILON=Number.EPSILON||2.220446049250313e-16,e.nearlyEqual=function(t,n,r){if(null==r)return t==n;if(t==n)return!0;if(isNaN(t)||isNaN(n))return!1;if(isFinite(t)&&isFinite(n)){var i=Math.abs(t-n);return i<e.DBL_EPSILON||i<=Math.max(Math.abs(t),Math.abs(n))*r}return!1}},function(t,e){t.exports=function(t){return void 0===t}},,,function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(380),i=n(181),o=n(305),a=n(17),s=n(121),l=n(249),c=n(309),u=n(308),d="[object Map]",f="[object Set]",p=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||u(t)||o(t)))return!t.length;var e=i(t);if(e==d||e==f)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(p.call(t,n))return!1;return!0}},,function(t,e,n){"use strict";e.a=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__21__},function(t,e,n){t.exports=n(42)},function(t,e,n){var r=n(702)(n(129));t.exports=r},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(886)),r(n(888)),r(n(890)),r(n(564));var i=n(84);e.StoreManager=i.StoreManager},,function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__26__},function(t,e,n){"use strict";var r=n(723);e.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},e.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},e.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var i={deg:"^\\circ"};e.escape=function(t){return r(t,{preserveFormatting:!0})},e.toSymbol=function(t,n){return(n=void 0!==n&&n)?i.hasOwnProperty(t)?i[t]:"\\mathrm{"+e.escape(t)+"}":e.symbols.hasOwnProperty(t)?e.symbols[t]:e.escape(t)}},function(t,e,n){"use strict";var r=n(515);e.clone=function t(n){var i=typeof n;if("number"===i||"string"===i||"boolean"===i||null===n||void 0===n)return n;if("function"==typeof n.clone)return n.clone();if(Array.isArray(n))return n.map(function(e){return t(e)});if(n instanceof Number)return new Number(n.valueOf());if(n instanceof String)return new String(n.valueOf());if(n instanceof Boolean)return new Boolean(n.valueOf());if(n instanceof Date)return new Date(n.valueOf());if(r(n))return n;if(n instanceof RegExp)throw new TypeError("Cannot clone "+n);return e.map(n,t)},e.map=function(t,n){var r={};for(var i in t)e.hasOwnProperty(t,i)&&(r[i]=n(t[i]));return r},e.extend=function(t,n){for(var r in n)e.hasOwnProperty(n,r)&&(t[r]=n[r]);return t},e.deepExtend=function t(n,r){if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(e.hasOwnProperty(r,i))if(r[i]&&r[i].constructor===Object)void 0===n[i]&&(n[i]={}),n[i].constructor===Object?t(n[i],r[i]):n[i]=r[i];else{if(Array.isArray(r[i]))throw new TypeError("Arrays are not supported by deepExtend");n[i]=r[i]}return n},e.deepEqual=function(t,n){var r,i,o;if(Array.isArray(t)){if(!Array.isArray(n))return!1;if(t.length!=n.length)return!1;for(i=0,o=t.length;i<o;i++)if(!e.deepEqual(t[i],n[i]))return!1;return!0}if(t instanceof Object){if(Array.isArray(n)||!(n instanceof Object))return!1;for(r in t)if(!e.deepEqual(t[r],n[r]))return!1;for(r in n)if(!e.deepEqual(t[r],n[r]))return!1;return!0}return typeof t==typeof n&&t==n},e.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(t){}return!1},e.lazy=function(t,n,r){if(e.canDefineProperty()){var i,o=!0;Object.defineProperty(t,n,{get:function(){return o&&(i=r(),o=!1),i},set:function(t){i=t,o=!1},configurable:!0,enumerable:!0})}else t[n]=r()},e.traverse=function(t,e){var n=t;if(e)for(var r=e.split("."),i=0;i<r.length;i++){var o=r[i];o in n||(n[o]={}),n=n[o]}return n},e.hasOwnProperty=function(t,e){return t&&Object.hasOwnProperty.call(t,e)},e.isFactory=function(t){return t&&"function"==typeof t.factory}},function(t,e,n){var r=n(307),i=n(795),o=n(43),a=n(17);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(546),i=n(260)(function(t,e,n){r(t,e,n)});t.exports=i},function(t,e,n){"use strict";var r=n(495),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},,,function(t,e,n){var r=n(128),i=n(71),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==a||e==s||e==o||e==l}},function(t,e,n){"use strict";var r=n(28).clone;e.name="algorithm14",e.factory=function(t,e,n,i){var o=t.DenseMatrix,a=function(t,e,n,r,i,o,s){var l=[];if(e===n.length-1)for(var c=0;c<r;c++)l[c]=s?t(o,i[c]):t(i[c],o);else for(var u=0;u<r;u++)l[u]=a(t,e+1,n,n[e+1],i[u],o,s);return l};return function(t,e,n,s){var l,c=t._data,u=t._size,d=t._datatype,f=n;"string"==typeof d&&(l=d,e=i.convert(e,l),f=i.find(n,[l,l]));var p=u.length>0?a(f,0,u,u[0],c,e,s):[];return new o({data:p,size:r(u),datatype:l})}}},function(t,e,n){"use strict";n.r(e);var r=n(38),i=n(20),o="[object Symbol]";var a=function(t){return"symbol"==typeof t||Object(i.a)(t)&&Object(r.a)(t)==o},s=NaN;var l=function(t){return"number"==typeof t?t:a(t)?s:+t},c=n(49);var u=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},d=Array.isArray,f=1/0,p=c.a?c.a.prototype:void 0,h=p?p.toString:void 0;var g=function t(e){if("string"==typeof e)return e;if(d(e))return u(e,t)+"";if(a(e))return h?h.call(e):"";var n=e+"";return"0"==n&&1/e==-f?"-0":n};var m=function(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=g(n),r=g(r)):(n=l(n),r=l(r)),i=t(n,r)}return i}},v=m(function(t,e){return t+e},0);var y=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},b=NaN,w=/^\s+|\s+$/g,_=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,S=/^0o[0-7]+$/i,C=parseInt;var E=function(t){if("number"==typeof t)return t;if(a(t))return b;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(w,"");var n=x.test(t);return n||S.test(t)?C(t.slice(2),n?2:8):_.test(t)?b:+t},T=1/0,M=1.7976931348623157e308;var k=function(t){return t?(t=E(t))===T||t===-T?(t<0?-1:1)*M:t==t?t:0:0===t?t:0};var A=function(t){var e=k(t),n=e%1;return e==e?n?e-n:e:0},I="Expected a function";var O=function(t,e){if("function"!=typeof e)throw new TypeError(I);return t=A(t),function(){if(--t<1)return e.apply(this,arguments)}};var P=function(t){return t},L="[object AsyncFunction]",D="[object Function]",N="[object GeneratorFunction]",R="[object Proxy]";var F=function(t){if(!y(t))return!1;var e=Object(r.a)(t);return e==D||e==N||e==L||e==R},B=n(31),j=B.a["__core-js_shared__"],q=function(){var t=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var z=function(t){return!!q&&q in t},U=Function.prototype.toString;var $=function(t){if(null!=t){try{return U.call(t)}catch(t){}try{return t+""}catch(t){}}return""},V=/^\[object .+?Constructor\]$/,H=Function.prototype,W=Object.prototype,G=H.toString,Y=W.hasOwnProperty,K=RegExp("^"+G.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var X=function(t){return!(!y(t)||z(t))&&(F(t)?K:V).test($(t))};var Q=function(t,e){return null==t?void 0:t[e]};var Z=function(t,e){var n=Q(t,e);return X(n)?n:void 0},J=Z(B.a,"WeakMap"),tt=J&&new J,et=tt?function(t,e){return tt.set(t,e),t}:P,nt=Object.create,rt=function(){function t(){}return function(e){if(!y(e))return{};if(nt)return nt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var it=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=rt(t.prototype),r=t.apply(n,e);return y(r)?r:n}},ot=1;var at=function(t,e,n){var r=e&ot,i=it(t);return function e(){return(this&&this!==B.a&&this instanceof e?i:t).apply(r?n:this,arguments)}};var st=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},lt=Math.max;var ct=function(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,l=e.length,c=lt(o-a,0),u=Array(l+c),d=!r;++s<l;)u[s]=e[s];for(;++i<a;)(d||i<o)&&(u[n[i]]=t[i]);for(;c--;)u[s++]=t[i++];return u},ut=Math.max;var dt=function(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,l=-1,c=e.length,u=ut(o-s,0),d=Array(u+c),f=!r;++i<u;)d[i]=t[i];for(var p=i;++l<c;)d[p+l]=e[l];for(;++a<s;)(f||i<o)&&(d[p+n[a]]=t[i++]);return d};var ft=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r};var pt=function(){},ht=4294967295;function gt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ht,this.__views__=[]}gt.prototype=rt(pt.prototype),gt.prototype.constructor=gt;var mt=gt;var vt=function(){},yt=tt?function(t){return tt.get(t)}:vt,bt={},wt=Object.prototype.hasOwnProperty;var _t=function(t){for(var e=t.name+"",n=bt[e],r=wt.call(bt,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e};function xt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}xt.prototype=rt(pt.prototype),xt.prototype.constructor=xt;var St=xt;var Ct=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var Et=function(t){if(t instanceof mt)return t.clone();var e=new St(t.__wrapped__,t.__chain__);return e.__actions__=Ct(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},Tt=Object.prototype.hasOwnProperty;function Mt(t){if(Object(i.a)(t)&&!d(t)&&!(t instanceof mt)){if(t instanceof St)return t;if(Tt.call(t,"__wrapped__"))return Et(t)}return new St(t)}Mt.prototype=pt.prototype,Mt.prototype.constructor=Mt;var kt=Mt;var At=function(t){var e=_t(t),n=kt[e];if("function"!=typeof n||!(e in mt.prototype))return!1;if(t===n)return!0;var r=yt(n);return!!r&&t===r[0]},It=800,Ot=16,Pt=Date.now;var Lt=function(t){var e=0,n=0;return function(){var r=Pt(),i=Ot-(r-n);if(n=r,i>0){if(++e>=It)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},Dt=Lt(et),Nt=/\{\n\/\* \[wrapped with (.+)\] \*/,Rt=/,? & /;var Ft=function(t){var e=t.match(Nt);return e?e[1].split(Rt):[]},Bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var jt=function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Bt,"{\n/* [wrapped with "+e+"] */\n")};var qt=function(t){return function(){return t}},zt=function(){try{var t=Z(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ut=Lt(zt?function(t,e){return zt(t,"toString",{configurable:!0,enumerable:!1,value:qt(e),writable:!0})}:P);var $t=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};var Vt=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var Ht=function(t){return t!=t};var Wt=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var Gt=function(t,e,n){return e==e?Wt(t,e,n):Vt(t,Ht,n)};var Yt=function(t,e){return!(null==t||!t.length)&&Gt(t,e,0)>-1},Kt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var Xt=function(t,e){return $t(Kt,function(n){var r="_."+n[0];e&n[1]&&!Yt(t,r)&&t.push(r)}),t.sort()};var Qt=function(t,e,n){var r=e+"";return Ut(t,jt(r,Xt(Ft(r),n)))},Zt=1,Jt=2,te=4,ee=8,ne=32,re=64;var ie=function(t,e,n,r,i,o,a,s,l,c){var u=e&ee;e|=u?ne:re,(e&=~(u?re:ne))&te||(e&=~(Zt|Jt));var d=[t,e,i,u?o:void 0,u?a:void 0,u?void 0:o,u?void 0:a,s,l,c],f=n.apply(void 0,d);return At(t)&&Dt(f,d),f.placeholder=r,Qt(f,t,e)};var oe=function(t){return t.placeholder},ae=9007199254740991,se=/^(?:0|[1-9]\d*)$/;var le=function(t,e){var n=typeof t;return!!(e=null==e?ae:e)&&("number"==n||"symbol"!=n&&se.test(t))&&t>-1&&t%1==0&&t<e},ce=Math.min;var ue=function(t,e){for(var n=t.length,r=ce(e.length,n),i=Ct(t);r--;){var o=e[r];t[r]=le(o,n)?i[o]:void 0}return t},de="__lodash_placeholder__";var fe=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==de||(t[n]=de,o[i++]=n)}return o},pe=1,he=2,ge=8,me=16,ve=128,ye=512;var be=function t(e,n,r,i,o,a,s,l,c,u){var d=n&ve,f=n&pe,p=n&he,h=n&(ge|me),g=n&ye,m=p?void 0:it(e);return function v(){for(var y=arguments.length,b=Array(y),w=y;w--;)b[w]=arguments[w];if(h)var _=oe(v),x=ft(b,_);if(i&&(b=ct(b,i,o,h)),a&&(b=dt(b,a,s,h)),y-=x,h&&y<u){var S=fe(b,_);return ie(e,n,t,v.placeholder,r,b,S,l,c,u-y)}var C=f?r:this,E=p?C[e]:e;return y=b.length,l?b=ue(b,l):g&&y>1&&b.reverse(),d&&c<y&&(b.length=c),this&&this!==B.a&&this instanceof v&&(E=m||it(E)),E.apply(C,b)}};var we=function(t,e,n){var r=it(t);return function i(){for(var o=arguments.length,a=Array(o),s=o,l=oe(i);s--;)a[s]=arguments[s];var c=o<3&&a[0]!==l&&a[o-1]!==l?[]:fe(a,l);if((o-=c.length)<n)return ie(t,e,be,i.placeholder,void 0,a,c,void 0,void 0,n-o);var u=this&&this!==B.a&&this instanceof i?r:t;return st(u,this,a)}},_e=1;var xe=function(t,e,n,r){var i=e&_e,o=it(t);return function e(){for(var a=-1,s=arguments.length,l=-1,c=r.length,u=Array(c+s),d=this&&this!==B.a&&this instanceof e?o:t;++l<c;)u[l]=r[l];for(;s--;)u[l++]=arguments[++a];return st(d,i?n:this,u)}},Se="__lodash_placeholder__",Ce=1,Ee=2,Te=4,Me=8,ke=128,Ae=256,Ie=Math.min;var Oe=function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(Ce|Ee|ke),a=r==ke&&n==Me||r==ke&&n==Ae&&t[7].length<=e[8]||r==(ke|Ae)&&e[7].length<=e[8]&&n==Me;if(!o&&!a)return t;r&Ce&&(t[2]=e[2],i|=n&Ce?0:Te);var s=e[3];if(s){var l=t[3];t[3]=l?ct(l,s,e[4]):s,t[4]=l?fe(t[3],Se):e[4]}return(s=e[5])&&(l=t[5],t[5]=l?dt(l,s,e[6]):s,t[6]=l?fe(t[5],Se):e[6]),(s=e[7])&&(t[7]=s),r&ke&&(t[8]=null==t[8]?e[8]:Ie(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},Pe="Expected a function",Le=1,De=2,Ne=8,Re=16,Fe=32,Be=64,je=Math.max;var qe=function(t,e,n,r,i,o,a,s){var l=e&De;if(!l&&"function"!=typeof t)throw new TypeError(Pe);var c=r?r.length:0;if(c||(e&=~(Fe|Be),r=i=void 0),a=void 0===a?a:je(A(a),0),s=void 0===s?s:A(s),c-=i?i.length:0,e&Be){var u=r,d=i;r=i=void 0}var f=l?void 0:yt(t),p=[t,e,n,r,i,u,d,o,a,s];if(f&&Oe(p,f),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],!(s=p[9]=void 0===p[9]?l?0:t.length:je(p[9]-c,0))&&e&(Ne|Re)&&(e&=~(Ne|Re)),e&&e!=Le)h=e==Ne||e==Re?we(t,e,s):e!=Fe&&e!=(Le|Fe)||i.length?be.apply(void 0,p):xe(t,e,n,r);else var h=at(t,e,n);return Qt((f?et:Dt)(h,p),t,e)},ze=128;var Ue=function(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,qe(t,ze,void 0,void 0,void 0,void 0,e)};var $e=function(t,e,n){"__proto__"==e&&zt?zt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Ve=function(t,e){return t===e||t!=t&&e!=e},He=Object.prototype.hasOwnProperty;var We=function(t,e,n){var r=t[e];He.call(t,e)&&Ve(r,n)&&(void 0!==n||e in t)||$e(t,e,n)};var Ge=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?$e(n,s,l):We(n,s,l)}return n},Ye=Math.max;var Ke=function(t,e,n){return e=Ye(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Ye(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),st(t,this,s)}};var Xe=function(t,e){return Ut(Ke(t,e,P),t+"")},Qe=9007199254740991;var Ze=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Qe};var Je=function(t){return null!=t&&Ze(t.length)&&!F(t)};var tn=function(t,e,n){if(!y(n))return!1;var r=typeof e;return!!("number"==r?Je(n)&&le(e,n.length):"string"==r&&e in n)&&Ve(n[e],t)};var en=function(t){return Xe(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&tn(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})},nn=Object.prototype;var rn=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||nn)};var on=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},an="[object Arguments]";var sn=function(t){return Object(i.a)(t)&&Object(r.a)(t)==an},ln=Object.prototype,cn=ln.hasOwnProperty,un=ln.propertyIsEnumerable,dn=sn(function(){return arguments}())?sn:function(t){return Object(i.a)(t)&&cn.call(t,"callee")&&!un.call(t,"callee")},fn=n(77),pn={};pn["[object Float32Array]"]=pn["[object Float64Array]"]=pn["[object Int8Array]"]=pn["[object Int16Array]"]=pn["[object Int32Array]"]=pn["[object Uint8Array]"]=pn["[object Uint8ClampedArray]"]=pn["[object Uint16Array]"]=pn["[object Uint32Array]"]=!0,pn["[object Arguments]"]=pn["[object Array]"]=pn["[object ArrayBuffer]"]=pn["[object Boolean]"]=pn["[object DataView]"]=pn["[object Date]"]=pn["[object Error]"]=pn["[object Function]"]=pn["[object Map]"]=pn["[object Number]"]=pn["[object Object]"]=pn["[object RegExp]"]=pn["[object Set]"]=pn["[object String]"]=pn["[object WeakMap]"]=!1;var hn=function(t){return Object(i.a)(t)&&Ze(t.length)&&!!pn[Object(r.a)(t)]};var gn=function(t){return function(e){return t(e)}},mn=n(70),vn=mn.a&&mn.a.isTypedArray,yn=vn?gn(vn):hn,bn=Object.prototype.hasOwnProperty;var wn=function(t,e){var n=d(t),r=!n&&dn(t),i=!n&&!r&&Object(fn.a)(t),o=!n&&!r&&!i&&yn(t),a=n||r||i||o,s=a?on(t.length,String):[],l=s.length;for(var c in t)!e&&!bn.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||le(c,l))||s.push(c);return s},_n=n(496),xn=Object(_n.a)(Object.keys,Object),Sn=Object.prototype.hasOwnProperty;var Cn=function(t){if(!rn(t))return xn(t);var e=[];for(var n in Object(t))Sn.call(t,n)&&"constructor"!=n&&e.push(n);return e};var En=function(t){return Je(t)?wn(t):Cn(t)},Tn=Object.prototype.hasOwnProperty,Mn=en(function(t,e){if(rn(e)||Je(e))Ge(e,En(e),t);else for(var n in e)Tn.call(e,n)&&We(t,n,e[n])});var kn=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},An=Object.prototype.hasOwnProperty;var In=function(t){if(!y(t))return kn(t);var e=rn(t),n=[];for(var r in t)("constructor"!=r||!e&&An.call(t,r))&&n.push(r);return n};var On=function(t){return Je(t)?wn(t,!0):In(t)},Pn=en(function(t,e){Ge(e,On(e),t)}),Ln=en(function(t,e,n,r){Ge(e,On(e),t,r)}),Dn=en(function(t,e,n,r){Ge(e,En(e),t,r)}),Nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rn=/^\w*$/;var Fn=function(t,e){if(d(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!a(t))||Rn.test(t)||!Nn.test(t)||null!=e&&t in Object(e)},Bn=Z(Object,"create");var jn=function(){this.__data__=Bn?Bn(null):{},this.size=0};var qn=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},zn="__lodash_hash_undefined__",Un=Object.prototype.hasOwnProperty;var $n=function(t){var e=this.__data__;if(Bn){var n=e[t];return n===zn?void 0:n}return Un.call(e,t)?e[t]:void 0},Vn=Object.prototype.hasOwnProperty;var Hn=function(t){var e=this.__data__;return Bn?void 0!==e[t]:Vn.call(e,t)},Wn="__lodash_hash_undefined__";var Gn=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Bn&&void 0===e?Wn:e,this};function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yn.prototype.clear=jn,Yn.prototype.delete=qn,Yn.prototype.get=$n,Yn.prototype.has=Hn,Yn.prototype.set=Gn;var Kn=Yn;var Xn=function(){this.__data__=[],this.size=0};var Qn=function(t,e){for(var n=t.length;n--;)if(Ve(t[n][0],e))return n;return-1},Zn=Array.prototype.splice;var Jn=function(t){var e=this.__data__,n=Qn(e,t);return!(n<0||(n==e.length-1?e.pop():Zn.call(e,n,1),--this.size,0))};var tr=function(t){var e=this.__data__,n=Qn(e,t);return n<0?void 0:e[n][1]};var er=function(t){return Qn(this.__data__,t)>-1};var nr=function(t,e){var n=this.__data__,r=Qn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function rr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rr.prototype.clear=Xn,rr.prototype.delete=Jn,rr.prototype.get=tr,rr.prototype.has=er,rr.prototype.set=nr;var ir=rr,or=Z(B.a,"Map");var ar=function(){this.size=0,this.__data__={hash:new Kn,map:new(or||ir),string:new Kn}};var sr=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var lr=function(t,e){var n=t.__data__;return sr(e)?n["string"==typeof e?"string":"hash"]:n.map};var cr=function(t){var e=lr(this,t).delete(t);return this.size-=e?1:0,e};var ur=function(t){return lr(this,t).get(t)};var dr=function(t){return lr(this,t).has(t)};var fr=function(t,e){var n=lr(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function pr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pr.prototype.clear=ar,pr.prototype.delete=cr,pr.prototype.get=ur,pr.prototype.has=dr,pr.prototype.set=fr;var hr=pr,gr="Expected a function";function mr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(gr);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(mr.Cache||hr),n}mr.Cache=hr;var vr=mr,yr=500;var br=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wr=/\\(\\)?/g,_r=function(t){var e=vr(t,function(t){return n.size===yr&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(br,function(t,n,r,i){e.push(r?i.replace(wr,"$1"):n||t)}),e});var xr=function(t){return null==t?"":g(t)};var Sr=function(t,e){return d(t)?t:Fn(t,e)?[t]:_r(xr(t))},Cr=1/0;var Er=function(t){if("string"==typeof t||a(t))return t;var e=t+"";return"0"==e&&1/t==-Cr?"-0":e};var Tr=function(t,e){for(var n=0,r=(e=Sr(e,t)).length;null!=t&&n<r;)t=t[Er(e[n++])];return n&&n==r?t:void 0};var Mr=function(t,e,n){var r=null==t?void 0:Tr(t,e);return void 0===r?n:r};var kr=function(t,e){for(var n=-1,r=e.length,i=Array(r),o=null==t;++n<r;)i[n]=o?void 0:Mr(t,e[n]);return i};var Ar=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Ir=c.a?c.a.isConcatSpreadable:void 0;var Or=function(t){return d(t)||dn(t)||!!(Ir&&t&&t[Ir])};var Pr=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=Or),o||(o=[]);++a<s;){var l=e[a];n>0&&r(l)?n>1?t(l,n-1,r,i,o):Ar(o,l):i||(o[o.length]=l)}return o};var Lr=function(t){return null!=t&&t.length?Pr(t,1):[]};var Dr=function(t){return Ut(Ke(t,void 0,Lr),t+"")},Nr=Dr(kr),Rr=n(89),Fr="[object DOMException]",Br="[object Error]";var jr=function(t){if(!Object(i.a)(t))return!1;var e=Object(r.a)(t);return e==Br||e==Fr||"string"==typeof t.message&&"string"==typeof t.name&&!Object(Rr.a)(t)},qr=Xe(function(t,e){try{return st(t,void 0,e)}catch(t){return jr(t)?t:new Error(t)}}),zr="Expected a function";var Ur=function(t,e){var n;if("function"!=typeof e)throw new TypeError(zr);return t=A(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}},$r=Xe(function(t,e,n){var r=1;if(n.length){var i=fe(n,oe($r));r|=32}return qe(t,r,e,n,i)});$r.placeholder={};var Vr=$r,Hr=Dr(function(t,e){return $t(e,function(e){e=Er(e),$e(t,e,Vr(t[e],t))}),t}),Wr=Xe(function(t,e,n){var r=3;if(n.length){var i=fe(n,oe(Wr));r|=32}return qe(e,r,t,n,i)});Wr.placeholder={};var Gr=Wr;var Yr=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o};var Kr=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Yr(t,e,n)},Xr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Qr=function(t){return Xr.test(t)};var Zr=function(t){return t.split("")},Jr="[\\ud800-\\udfff]",ti="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ei="\\ud83c[\\udffb-\\udfff]",ni="[^\\ud800-\\udfff]",ri="(?:\\ud83c[\\udde6-\\uddff]){2}",ii="[\\ud800-\\udbff][\\udc00-\\udfff]",oi="(?:"+ti+"|"+ei+")"+"?",ai="[\\ufe0e\\ufe0f]?"+oi+("(?:\\u200d(?:"+[ni,ri,ii].join("|")+")[\\ufe0e\\ufe0f]?"+oi+")*"),si="(?:"+[ni+ti+"?",ti,ri,ii,Jr].join("|")+")",li=RegExp(ei+"(?="+ei+")|"+si+ai,"g");var ci=function(t){return t.match(li)||[]};var ui=function(t){return Qr(t)?ci(t):Zr(t)};var di=function(t){return function(e){e=xr(e);var n=Qr(e)?ui(e):void 0,r=n?n[0]:e.charAt(0),i=n?Kr(n,1).join(""):e.slice(1);return r[t]()+i}},fi=di("toUpperCase");var pi=function(t){return fi(xr(t).toLowerCase())};var hi=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};var gi=function(t){return function(e){return null==t?void 0:t[e]}},mi=gi({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),vi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yi=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var bi=function(t){return(t=xr(t))&&t.replace(vi,mi).replace(yi,"")},wi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var _i=function(t){return t.match(wi)||[]},xi=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Si=function(t){return xi.test(t)},Ci="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ei="["+Ci+"]",Ti="\\d+",Mi="[\\u2700-\\u27bf]",ki="[a-z\\xdf-\\xf6\\xf8-\\xff]",Ai="[^\\ud800-\\udfff"+Ci+Ti+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Ii="(?:\\ud83c[\\udde6-\\uddff]){2}",Oi="[\\ud800-\\udbff][\\udc00-\\udfff]",Pi="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Li="(?:"+ki+"|"+Ai+")",Di="(?:"+Pi+"|"+Ai+")",Ni="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Ri="[\\ufe0e\\ufe0f]?"+Ni+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Ii,Oi].join("|")+")[\\ufe0e\\ufe0f]?"+Ni+")*"),Fi="(?:"+[Mi,Ii,Oi].join("|")+")"+Ri,Bi=RegExp([Pi+"?"+ki+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Ei,Pi,"$"].join("|")+")",Di+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Ei,Pi+Li,"$"].join("|")+")",Pi+"?"+Li+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Pi+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ti,Fi].join("|"),"g");var ji=function(t){return t.match(Bi)||[]};var qi=function(t,e,n){return t=xr(t),void 0===(e=n?void 0:e)?Si(t)?ji(t):_i(t):t.match(e)||[]},zi=RegExp("['’]","g");var Ui=function(t){return function(e){return hi(qi(bi(e).replace(zi,"")),t,"")}},$i=Ui(function(t,e,n){return e=e.toLowerCase(),t+(n?pi(e):e)});var Vi=function(){if(!arguments.length)return[];var t=arguments[0];return d(t)?t:[t]},Hi=Math.min;var Wi=function(t){var e=Math[t];return function(t,n){if(t=E(t),n=null==n?0:Hi(A(n),292)){var r=(xr(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return+((r=(xr(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}},Gi=Wi("ceil");var Yi=function(t){var e=kt(t);return e.__chain__=!0,e},Ki=Math.ceil,Xi=Math.max;var Qi=function(t,e,n){e=(n?tn(t,e,n):void 0===e)?1:Xi(A(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Array(Ki(r/e));i<r;)a[o++]=Yr(t,i,i+=e);return a};var Zi=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t};var Ji=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=E(n))==n?n:0),void 0!==e&&(e=(e=E(e))==e?e:0),Zi(E(t),e,n)};var to=function(){this.__data__=new ir,this.size=0};var eo=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var no=function(t){return this.__data__.get(t)};var ro=function(t){return this.__data__.has(t)},io=200;var oo=function(t,e){var n=this.__data__;if(n instanceof ir){var r=n.__data__;if(!or||r.length<io-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new hr(r)}return n.set(t,e),this.size=n.size,this};function ao(t){var e=this.__data__=new ir(t);this.size=e.size}ao.prototype.clear=to,ao.prototype.delete=eo,ao.prototype.get=no,ao.prototype.has=ro,ao.prototype.set=oo;var so=ao;var lo=function(t,e){return t&&Ge(e,En(e),t)};var co=function(t,e){return t&&Ge(e,On(e),t)},uo=n(497);var fo=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var po=function(){return[]},ho=Object.prototype.propertyIsEnumerable,go=Object.getOwnPropertySymbols,mo=go?function(t){return null==t?[]:(t=Object(t),fo(go(t),function(e){return ho.call(t,e)}))}:po;var vo=function(t,e){return Ge(t,mo(t),e)},yo=n(210),bo=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ar(e,mo(t)),t=Object(yo.a)(t);return e}:po;var wo=function(t,e){return Ge(t,bo(t),e)};var _o=function(t,e,n){var r=e(t);return d(t)?r:Ar(r,n(t))};var xo=function(t){return _o(t,En,mo)};var So=function(t){return _o(t,On,bo)},Co=Z(B.a,"DataView"),Eo=Z(B.a,"Promise"),To=Z(B.a,"Set"),Mo=$(Co),ko=$(or),Ao=$(Eo),Io=$(To),Oo=$(J),Po=r.a;(Co&&"[object DataView]"!=Po(new Co(new ArrayBuffer(1)))||or&&"[object Map]"!=Po(new or)||Eo&&"[object Promise]"!=Po(Eo.resolve())||To&&"[object Set]"!=Po(new To)||J&&"[object WeakMap]"!=Po(new J))&&(Po=function(t){var e=Object(r.a)(t),n="[object Object]"==e?t.constructor:void 0,i=n?$(n):"";if(i)switch(i){case Mo:return"[object DataView]";case ko:return"[object Map]";case Ao:return"[object Promise]";case Io:return"[object Set]";case Oo:return"[object WeakMap]"}return e});var Lo=Po,Do=Object.prototype.hasOwnProperty;var No=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Do.call(t,"index")&&(n.index=t.index,n.input=t.input),n},Ro=B.a.Uint8Array;var Fo=function(t){var e=new t.constructor(t.byteLength);return new Ro(e).set(new Ro(t)),e};var Bo=function(t,e){var n=e?Fo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},jo=/\w*$/;var qo=function(t){var e=new t.constructor(t.source,jo.exec(t));return e.lastIndex=t.lastIndex,e},zo=c.a?c.a.prototype:void 0,Uo=zo?zo.valueOf:void 0;var $o=function(t){return Uo?Object(Uo.call(t)):{}};var Vo=function(t,e){var n=e?Fo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Ho="[object Boolean]",Wo="[object Date]",Go="[object Map]",Yo="[object Number]",Ko="[object RegExp]",Xo="[object Set]",Qo="[object String]",Zo="[object Symbol]",Jo="[object ArrayBuffer]",ta="[object DataView]",ea="[object Float32Array]",na="[object Float64Array]",ra="[object Int8Array]",ia="[object Int16Array]",oa="[object Int32Array]",aa="[object Uint8Array]",sa="[object Uint8ClampedArray]",la="[object Uint16Array]",ca="[object Uint32Array]";var ua=function(t,e,n){var r=t.constructor;switch(e){case Jo:return Fo(t);case Ho:case Wo:return new r(+t);case ta:return Bo(t,n);case ea:case na:case ra:case ia:case oa:case aa:case sa:case la:case ca:return Vo(t,n);case Go:return new r;case Yo:case Qo:return new r(t);case Ko:return qo(t);case Xo:return new r;case Zo:return $o(t)}};var da=function(t){return"function"!=typeof t.constructor||rn(t)?{}:rt(Object(yo.a)(t))},fa="[object Map]";var pa=function(t){return Object(i.a)(t)&&Lo(t)==fa},ha=mn.a&&mn.a.isMap,ga=ha?gn(ha):pa,ma="[object Set]";var va=function(t){return Object(i.a)(t)&&Lo(t)==ma},ya=mn.a&&mn.a.isSet,ba=ya?gn(ya):va,wa=1,_a=2,xa=4,Sa="[object Arguments]",Ca="[object Function]",Ea="[object GeneratorFunction]",Ta="[object Object]",Ma={};Ma[Sa]=Ma["[object Array]"]=Ma["[object ArrayBuffer]"]=Ma["[object DataView]"]=Ma["[object Boolean]"]=Ma["[object Date]"]=Ma["[object Float32Array]"]=Ma["[object Float64Array]"]=Ma["[object Int8Array]"]=Ma["[object Int16Array]"]=Ma["[object Int32Array]"]=Ma["[object Map]"]=Ma["[object Number]"]=Ma[Ta]=Ma["[object RegExp]"]=Ma["[object Set]"]=Ma["[object String]"]=Ma["[object Symbol]"]=Ma["[object Uint8Array]"]=Ma["[object Uint8ClampedArray]"]=Ma["[object Uint16Array]"]=Ma["[object Uint32Array]"]=!0,Ma["[object Error]"]=Ma[Ca]=Ma["[object WeakMap]"]=!1;var ka=function t(e,n,r,i,o,a){var s,l=n&wa,c=n&_a,u=n&xa;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!y(e))return e;var f=d(e);if(f){if(s=No(e),!l)return Ct(e,s)}else{var p=Lo(e),h=p==Ca||p==Ea;if(Object(fn.a)(e))return Object(uo.a)(e,l);if(p==Ta||p==Sa||h&&!o){if(s=c||h?{}:da(e),!l)return c?wo(e,co(s,e)):vo(e,lo(s,e))}else{if(!Ma[p])return o?e:{};s=ua(e,p,l)}}a||(a=new so);var g=a.get(e);if(g)return g;if(a.set(e,s),ba(e))return e.forEach(function(i){s.add(t(i,n,r,i,e,a))}),s;if(ga(e))return e.forEach(function(i,o){s.set(o,t(i,n,r,o,e,a))}),s;var m=u?c?So:xo:c?keysIn:En,v=f?void 0:m(e);return $t(v||e,function(i,o){v&&(i=e[o=i]),We(s,o,t(i,n,r,o,e,a))}),s},Aa=4;var Ia=function(t){return ka(t,Aa)},Oa=1,Pa=4;var La=function(t){return ka(t,Oa|Pa)},Da=1,Na=4;var Ra=function(t,e){return ka(t,Da|Na,e="function"==typeof e?e:void 0)},Fa=4;var Ba=function(t,e){return ka(t,Fa,e="function"==typeof e?e:void 0)};var ja=function(){return new St(this.value(),this.__chain__)};var qa=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i};var za=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ar(d(n)?Ct(n):[n],Pr(e,1))},Ua="__lodash_hash_undefined__";var $a=function(t){return this.__data__.set(t,Ua),this};var Va=function(t){return this.__data__.has(t)};function Ha(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new hr;++e<n;)this.add(t[e])}Ha.prototype.add=Ha.prototype.push=$a,Ha.prototype.has=Va;var Wa=Ha;var Ga=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var Ya=function(t,e){return t.has(e)},Ka=1,Xa=2;var Qa=function(t,e,n,r,i,o){var a=n&Ka,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var u=-1,d=!0,f=n&Xa?new Wa:void 0;for(o.set(t,e),o.set(e,t);++u<s;){var p=t[u],h=e[u];if(r)var g=a?r(h,p,u,e,t,o):r(p,h,u,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!Ga(e,function(t,e){if(!Ya(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)})){d=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d};var Za=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var Ja=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},ts=1,es=2,ns="[object Boolean]",rs="[object Date]",is="[object Error]",os="[object Map]",as="[object Number]",ss="[object RegExp]",ls="[object Set]",cs="[object String]",us="[object Symbol]",ds="[object ArrayBuffer]",fs="[object DataView]",ps=c.a?c.a.prototype:void 0,hs=ps?ps.valueOf:void 0;var gs=function(t,e,n,r,i,o,a){switch(n){case fs:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ds:return!(t.byteLength!=e.byteLength||!o(new Ro(t),new Ro(e)));case ns:case rs:case as:return Ve(+t,+e);case is:return t.name==e.name&&t.message==e.message;case ss:case cs:return t==e+"";case os:var s=Za;case ls:var l=r&ts;if(s||(s=Ja),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=es,a.set(t,e);var u=Qa(s(t),s(e),r,i,o,a);return a.delete(t),u;case us:if(hs)return hs.call(t)==hs.call(e)}return!1},ms=1,vs=Object.prototype.hasOwnProperty;var ys=function(t,e,n,r,i,o){var a=n&ms,s=xo(t),l=s.length;if(l!=xo(e).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in e:vs.call(e,u)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++c<l;){var h=t[u=s[c]],g=e[u];if(r)var m=a?r(g,h,u,e,t,o):r(h,g,u,t,e,o);if(!(void 0===m?h===g||i(h,g,n,r,o):m)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f},bs=1,ws="[object Arguments]",_s="[object Array]",xs="[object Object]",Ss=Object.prototype.hasOwnProperty;var Cs=function(t,e,n,r,i,o){var a=d(t),s=d(e),l=a?_s:Lo(t),c=s?_s:Lo(e),u=(l=l==ws?xs:l)==xs,f=(c=c==ws?xs:c)==xs,p=l==c;if(p&&Object(fn.a)(t)){if(!Object(fn.a)(e))return!1;a=!0,u=!1}if(p&&!u)return o||(o=new so),a||yn(t)?Qa(t,e,n,r,i,o):gs(t,e,l,n,r,i,o);if(!(n&bs)){var h=u&&Ss.call(t,"__wrapped__"),g=f&&Ss.call(e,"__wrapped__");if(h||g){var m=h?t.value():t,v=g?e.value():e;return o||(o=new so),i(m,v,n,r,o)}}return!!p&&(o||(o=new so),ys(t,e,n,r,i,o))};var Es=function t(e,n,r,o,a){return e===n||(null==e||null==n||!Object(i.a)(e)&&!Object(i.a)(n)?e!=e&&n!=n:Cs(e,n,r,o,t,a))},Ts=1,Ms=2;var ks=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var l=(s=n[i])[0],c=t[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in t))return!1}else{var d=new so;if(r)var f=r(c,u,l,t,e,d);if(!(void 0===f?Es(u,c,Ts|Ms,r,d):f))return!1}}return!0};var As=function(t){return t==t&&!y(t)};var Is=function(t){for(var e=En(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,As(i)]}return e};var Os=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}};var Ps=function(t){var e=Is(t);return 1==e.length&&e[0][2]?Os(e[0][0],e[0][1]):function(n){return n===t||ks(n,t,e)}};var Ls=function(t,e){return null!=t&&e in Object(t)};var Ds=function(t,e,n){for(var r=-1,i=(e=Sr(e,t)).length,o=!1;++r<i;){var a=Er(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ze(i)&&le(a,i)&&(d(t)||dn(t))};var Ns=function(t,e){return null!=t&&Ds(t,e,Ls)},Rs=1,Fs=2;var Bs=function(t,e){return Fn(t)&&As(e)?Os(Er(t),e):function(n){var r=Mr(n,t);return void 0===r&&r===e?Ns(n,t):Es(e,r,Rs|Fs)}};var js=function(t){return function(e){return null==e?void 0:e[t]}};var qs=function(t){return function(e){return Tr(e,t)}};var zs=function(t){return Fn(t)?js(Er(t)):qs(t)};var Us=function(t){return"function"==typeof t?t:null==t?P:"object"==typeof t?d(t)?Bs(t[0],t[1]):Ps(t):zs(t)},$s="Expected a function";var Vs=function(t){var e=null==t?0:t.length,n=Us;return t=e?u(t,function(t){if("function"!=typeof t[1])throw new TypeError($s);return[n(t[0]),t[1]]}):[],Xe(function(n){for(var r=-1;++r<e;){var i=t[r];if(st(i[0],this,n))return st(i[1],this,n)}})};var Hs=function(t,e,n){var r=n.length;if(null==t)return!r;for(t=Object(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0};var Ws=function(t){var e=En(t);return function(n){return Hs(n,t,e)}},Gs=1;var Ys=function(t){return Ws(ka(t,Gs))};var Ks=function(t,e){return null==e||Hs(t,e,En(e))};var Xs=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r};var Qs=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}},Zs=Qs();var Js=function(t,e){return t&&Zs(t,e,En)};var tl=function(t,e){return function(n,r){if(null==n)return n;if(!Je(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}},el=tl(Js);var nl=function(t,e,n,r){return el(t,function(t,i,o){e(r,t,n(t),o)}),r};var rl=function(t,e){return function(n,r){var i=d(n)?Xs:nl,o=e?e():{};return i(n,t,Us(r,2),o)}},il=Object.prototype.hasOwnProperty,ol=rl(function(t,e,n){il.call(t,n)?++t[n]:$e(t,n,1)});var al=function(t,e){var n=rt(t);return null==e?n:lo(n,e)},sl=8;function ll(t,e,n){var r=qe(t,sl,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=ll.placeholder,r}ll.placeholder={};var cl=ll,ul=16;function dl(t,e,n){var r=qe(t,ul,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=dl.placeholder,r}dl.placeholder={};var fl=dl,pl=function(){return B.a.Date.now()},hl="Expected a function",gl=Math.max,ml=Math.min;var vl=function(t,e,n){var r,i,o,a,s,l,c=0,u=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError(hl);function p(e){var n=r,o=i;return r=i=void 0,c=e,a=t.apply(o,n)}function h(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-c>=o}function g(){var t=pl();if(h(t))return m(t);s=setTimeout(g,function(t){var n=e-(t-l);return d?ml(n,o-(t-c)):n}(t))}function m(t){return s=void 0,f&&r?p(t):(r=i=void 0,a)}function v(){var t=pl(),n=h(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return function(t){return c=t,s=setTimeout(g,e),u?p(t):a}(l);if(d)return s=setTimeout(g,e),p(l)}return void 0===s&&(s=setTimeout(g,e)),a}return e=E(e)||0,y(n)&&(u=!!n.leading,o=(d="maxWait"in n)?gl(E(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},v.flush=function(){return void 0===s?a:m(pl())},v};var yl=function(t,e){return null==t||t!=t?e:t},bl=Object.prototype,wl=bl.hasOwnProperty,_l=Xe(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&tn(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=On(o),s=-1,l=a.length;++s<l;){var c=a[s],u=t[c];(void 0===u||Ve(u,bl[c])&&!wl.call(t,c))&&(t[c]=o[c])}return t});var xl=function(t,e,n){(void 0===n||Ve(t[e],n))&&(void 0!==n||e in t)||$e(t,e,n)};var Sl=function(t){return Object(i.a)(t)&&Je(t)};var Cl=function(t,e){return"__proto__"==e?void 0:t[e]};var El=function(t){return Ge(t,On(t))};var Tl=function(t,e,n,r,i,o,a){var s=Cl(t,n),l=Cl(e,n),c=a.get(l);if(c)xl(t,n,c);else{var u=o?o(s,l,n+"",t,e,a):void 0,f=void 0===u;if(f){var p=d(l),h=!p&&Object(fn.a)(l),g=!p&&!h&&yn(l);u=l,p||h||g?d(s)?u=s:Sl(s)?u=Ct(s):h?(f=!1,u=Object(uo.a)(l,!0)):g?(f=!1,u=Vo(l,!0)):u=[]:Object(Rr.a)(l)||dn(l)?(u=s,dn(s)?u=El(s):(!y(s)||r&&F(s))&&(u=da(l))):f=!1}f&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),xl(t,n,u)}};var Ml=function t(e,n,r,i,o){e!==n&&Zs(n,function(a,s){if(y(a))o||(o=new so),Tl(e,n,s,r,t,i,o);else{var l=i?i(Cl(e,s),a,s+"",e,n,o):void 0;void 0===l&&(l=a),xl(e,s,l)}},On)};var kl=function t(e,n,r,i,o,a){return y(e)&&y(n)&&(a.set(n,e),Ml(e,n,void 0,t,a),a.delete(n)),e},Al=en(function(t,e,n,r){Ml(t,e,n,r)}),Il=Xe(function(t){return t.push(void 0,kl),st(Al,void 0,t)}),Ol="Expected a function";var Pl=function(t,e,n){if("function"!=typeof t)throw new TypeError(Ol);return setTimeout(function(){t.apply(void 0,n)},e)},Ll=Xe(function(t,e){return Pl(t,1,e)}),Dl=Xe(function(t,e,n){return Pl(t,E(e)||0,n)});var Nl=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},Rl=200;var Fl=function(t,e,n,r){var i=-1,o=Yt,a=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=u(e,gn(n))),r?(o=Nl,a=!1):e.length>=Rl&&(o=Ya,a=!1,e=new Wa(e));t:for(;++i<s;){var d=t[i],f=null==n?d:n(d);if(d=r||0!==d?d:0,a&&f==f){for(var p=c;p--;)if(e[p]===f)continue t;l.push(d)}else o(e,f,r)||l.push(d)}return l},Bl=Xe(function(t,e){return Sl(t)?Fl(t,Pr(e,1,Sl,!0)):[]});var jl=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},ql=Xe(function(t,e){var n=jl(e);return Sl(n)&&(n=void 0),Sl(t)?Fl(t,Pr(e,1,Sl,!0),Us(n,2)):[]}),zl=Xe(function(t,e){var n=jl(e);return Sl(n)&&(n=void 0),Sl(t)?Fl(t,Pr(e,1,Sl,!0),void 0,n):[]}),Ul=m(function(t,e){return t/e},1);var $l=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:A(e),Yr(t,e<0?0:e,r)):[]};var Vl=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:A(e),Yr(t,0,(e=r-e)<0?0:e)):[]};var Hl=function(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Yr(t,r?0:o,r?o+1:i):Yr(t,r?o+1:0,r?i:o)};var Wl=function(t,e){return t&&t.length?Hl(t,Us(e,3),!0,!0):[]};var Gl=function(t,e){return t&&t.length?Hl(t,Us(e,3),!0):[]};var Yl=function(t){return"function"==typeof t?t:P};var Kl=function(t,e){return(d(t)?$t:el)(t,Yl(e))};var Xl=function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t},Ql=Qs(!0);var Zl=function(t,e){return t&&Ql(t,e,En)},Jl=tl(Zl,!0);var tc=function(t,e){return(d(t)?Xl:Jl)(t,Yl(e))};var ec=function(t,e,n){t=xr(t),e=g(e);var r=t.length,i=n=void 0===n?r:Zi(A(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e};var nc=function(t,e){return u(e,function(e){return[e,t[e]]})};var rc=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n},ic="[object Map]",oc="[object Set]";var ac=function(t){return function(e){var n=Lo(e);return n==ic?Za(e):n==oc?rc(e):nc(e,t(e))}},sc=ac(En),lc=ac(On),cc=gi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),uc=/[&<>"']/g,dc=RegExp(uc.source);var fc=function(t){return(t=xr(t))&&dc.test(t)?t.replace(uc,cc):t},pc=/[\\^$.*+?()[\]{}|]/g,hc=RegExp(pc.source);var gc=function(t){return(t=xr(t))&&hc.test(t)?t.replace(pc,"\\$&"):t};var mc=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0};var vc=function(t,e){var n=!0;return el(t,function(t,r,i){return n=!!e(t,r,i)}),n};var yc=function(t,e,n){var r=d(t)?mc:vc;return n&&tn(t,e,n)&&(e=void 0),r(t,Us(e,3))},bc=4294967295;var wc=function(t){return t?Zi(A(t),0,bc):0};var _c=function(t,e,n,r){var i=t.length;for((n=A(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:A(r))<0&&(r+=i),r=n>r?0:wc(r);n<r;)t[n++]=e;return t};var xc=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&tn(t,e,n)&&(n=0,r=i),_c(t,e,n,r)):[]};var Sc=function(t,e){var n=[];return el(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n};var Cc=function(t,e){return(d(t)?fo:Sc)(t,Us(e,3))};var Ec=function(t){return function(e,n,r){var i=Object(e);if(!Je(e)){var o=Us(n,3);e=En(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}},Tc=Math.max;var Mc=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:A(n);return i<0&&(i=Tc(r+i,0)),Vt(t,Us(e,3),i)},kc=Ec(Mc);var Ac=function(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r};var Ic=function(t,e){return Ac(t,Us(e,3),Js)},Oc=Math.max,Pc=Math.min;var Lc=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=A(n),i=n<0?Oc(r+i,0):Pc(i,r-1)),Vt(t,Us(e,3),i,!0)},Dc=Ec(Lc);var Nc=function(t,e){return Ac(t,Us(e,3),Zl)};var Rc=function(t){return t&&t.length?t[0]:void 0};var Fc=function(t,e){var n=-1,r=Je(t)?Array(t.length):[];return el(t,function(t,i,o){r[++n]=e(t,i,o)}),r};var Bc=function(t,e){return(d(t)?u:Fc)(t,Us(e,3))};var jc=function(t,e){return Pr(Bc(t,e),1)},qc=1/0;var zc=function(t,e){return Pr(Bc(t,e),qc)};var Uc=function(t,e,n){return n=void 0===n?1:A(n),Pr(Bc(t,e),n)},$c=1/0;var Vc=function(t){return null!=t&&t.length?Pr(t,$c):[]};var Hc=function(t,e){return null!=t&&t.length?(e=void 0===e?1:A(e),Pr(t,e)):[]},Wc=512;var Gc=function(t){return qe(t,Wc)},Yc=Wi("floor"),Kc="Expected a function",Xc=8,Qc=32,Zc=128,Jc=256;var tu=function(t){return Dr(function(e){var n=e.length,r=n,i=St.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError(Kc);if(i&&!a&&"wrapper"==_t(o))var a=new St([],!0)}for(r=a?r:n;++r<n;){o=e[r];var s=_t(o),l="wrapper"==s?yt(o):void 0;a=l&&At(l[0])&&l[1]==(Zc|Xc|Qc|Jc)&&!l[4].length&&1==l[9]?a[_t(l[0])].apply(a,l[3]):1==o.length&&At(o)?a[s]():a.thru(o)}return function(){var t=arguments,r=t[0];if(a&&1==t.length&&d(r))return a.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})},eu=tu(),nu=tu(!0);var ru=function(t,e){return null==t?t:Zs(t,Yl(e),On)};var iu=function(t,e){return null==t?t:Ql(t,Yl(e),On)};var ou=function(t,e){return t&&Js(t,Yl(e))};var au=function(t,e){return t&&Zl(t,Yl(e))};var su=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r};var lu=function(t,e){return fo(e,function(e){return F(t[e])})};var cu=function(t){return null==t?[]:lu(t,En(t))};var uu=function(t){return null==t?[]:lu(t,On(t))},du=Object.prototype.hasOwnProperty,fu=rl(function(t,e,n){du.call(t,n)?t[n].push(e):$e(t,n,[e])});var pu=function(t,e){return t>e};var hu=function(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=E(e),n=E(n)),t(e,n)}},gu=hu(pu),mu=hu(function(t,e){return t>=e}),vu=Object.prototype.hasOwnProperty;var yu=function(t,e){return null!=t&&vu.call(t,e)};var bu=function(t,e){return null!=t&&Ds(t,e,yu)},wu=Math.max,_u=Math.min;var xu=function(t,e,n){return t>=_u(e,n)&&t<wu(e,n)};var Su=function(t,e,n){return e=k(e),void 0===n?(n=e,e=0):n=k(n),t=E(t),xu(t,e,n)},Cu="[object String]";var Eu=function(t){return"string"==typeof t||!d(t)&&Object(i.a)(t)&&Object(r.a)(t)==Cu};var Tu=function(t,e){return u(e,function(e){return t[e]})};var Mu=function(t){return null==t?[]:Tu(t,En(t))},ku=Math.max;var Au=function(t,e,n,r){t=Je(t)?t:Mu(t),n=n&&!r?A(n):0;var i=t.length;return n<0&&(n=ku(i+n,0)),Eu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Gt(t,e,n)>-1},Iu=Math.max;var Ou=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:A(n);return i<0&&(i=Iu(r+i,0)),Gt(t,e,i)};var Pu=function(t){return null!=t&&t.length?Yr(t,0,-1):[]},Lu=Math.min;var Du=function(t,e,n){for(var r=n?Nl:Yt,i=t[0].length,o=t.length,a=o,s=Array(o),l=1/0,c=[];a--;){var d=t[a];a&&e&&(d=u(d,gn(e))),l=Lu(d.length,l),s[a]=!n&&(e||i>=120&&d.length>=120)?new Wa(a&&d):void 0}d=t[0];var f=-1,p=s[0];t:for(;++f<i&&c.length<l;){var h=d[f],g=e?e(h):h;if(h=n||0!==h?h:0,!(p?Ya(p,g):r(c,g,n))){for(a=o;--a;){var m=s[a];if(!(m?Ya(m,g):r(t[a],g,n)))continue t}p&&p.push(g),c.push(h)}}return c};var Nu=function(t){return Sl(t)?t:[]},Ru=Xe(function(t){var e=u(t,Nu);return e.length&&e[0]===t[0]?Du(e):[]}),Fu=Xe(function(t){var e=jl(t),n=u(t,Nu);return e===jl(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?Du(n,Us(e,2)):[]}),Bu=Xe(function(t){var e=jl(t),n=u(t,Nu);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?Du(n,void 0,e):[]});var ju=function(t,e,n,r){return Js(t,function(t,i,o){e(r,n(t),i,o)}),r};var qu=function(t,e){return function(n,r){return ju(n,t,e(r),{})}},zu=Object.prototype.toString,Uu=qu(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zu.call(e)),t[e]=n},qt(P)),$u=Object.prototype,Vu=$u.hasOwnProperty,Hu=$u.toString,Wu=qu(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Hu.call(e)),Vu.call(t,e)?t[e].push(n):t[e]=[n]},Us);var Gu=function(t,e){return e.length<2?t:Tr(t,Yr(e,0,-1))};var Yu=function(t,e,n){e=Sr(e,t);var r=null==(t=Gu(t,e))?t:t[Er(jl(e))];return null==r?void 0:st(r,t,n)},Ku=Xe(Yu),Xu=Xe(function(t,e,n){var r=-1,i="function"==typeof e,o=Je(t)?Array(t.length):[];return el(t,function(t){o[++r]=i?st(e,t,n):Yu(t,e,n)}),o}),Qu="[object ArrayBuffer]";var Zu=function(t){return Object(i.a)(t)&&Object(r.a)(t)==Qu},Ju=mn.a&&mn.a.isArrayBuffer,td=Ju?gn(Ju):Zu,ed="[object Boolean]";var nd=function(t){return!0===t||!1===t||Object(i.a)(t)&&Object(r.a)(t)==ed},rd="[object Date]";var id=function(t){return Object(i.a)(t)&&Object(r.a)(t)==rd},od=mn.a&&mn.a.isDate,ad=od?gn(od):id;var sd=function(t){return Object(i.a)(t)&&1===t.nodeType&&!Object(Rr.a)(t)},ld="[object Map]",cd="[object Set]",ud=Object.prototype.hasOwnProperty;var dd=function(t){if(null==t)return!0;if(Je(t)&&(d(t)||"string"==typeof t||"function"==typeof t.splice||Object(fn.a)(t)||yn(t)||dn(t)))return!t.length;var e=Lo(t);if(e==ld||e==cd)return!t.size;if(rn(t))return!Cn(t).length;for(var n in t)if(ud.call(t,n))return!1;return!0};var fd=function(t,e){return Es(t,e)};var pd=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?Es(t,e,void 0,n):!!r},hd=B.a.isFinite;var gd=function(t){return"number"==typeof t&&hd(t)};var md=function(t){return"number"==typeof t&&t==A(t)};var vd=function(t,e){return t===e||ks(t,e,Is(e))};var yd=function(t,e,n){return n="function"==typeof n?n:void 0,ks(t,e,Is(e),n)},bd="[object Number]";var wd=function(t){return"number"==typeof t||Object(i.a)(t)&&Object(r.a)(t)==bd};var _d=function(t){return wd(t)&&t!=+t},xd=n(208),Sd=j?F:xd.a,Cd="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";var Ed=function(t){if(Sd(t))throw new Error(Cd);return X(t)};var Td=function(t){return null==t};var Md=function(t){return null===t},kd="[object RegExp]";var Ad=function(t){return Object(i.a)(t)&&Object(r.a)(t)==kd},Id=mn.a&&mn.a.isRegExp,Od=Id?gn(Id):Ad,Pd=9007199254740991;var Ld=function(t){return md(t)&&t>=-Pd&&t<=Pd};var Dd=function(t){return void 0===t},Nd="[object WeakMap]";var Rd=function(t){return Object(i.a)(t)&&Lo(t)==Nd},Fd="[object WeakSet]";var Bd=function(t){return Object(i.a)(t)&&Object(r.a)(t)==Fd},jd=1;var qd=function(t){return Us("function"==typeof t?t:ka(t,jd))},zd=Array.prototype.join;var Ud=function(t,e){return null==t?"":zd.call(t,e)},$d=Ui(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Vd=rl(function(t,e,n){$e(t,n,e)});var Hd=function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r},Wd=Math.max,Gd=Math.min;var Yd=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=A(n))<0?Wd(r+i,0):Gd(i,r-1)),e==e?Hd(t,e,i):Vt(t,Ht,i,!0)},Kd=Ui(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Xd=di("toLowerCase");var Qd=function(t,e){return t<e},Zd=hu(Qd),Jd=hu(function(t,e){return t<=e});var tf=function(t,e){var n={};return e=Us(e,3),Js(t,function(t,r,i){$e(n,e(t,r,i),t)}),n};var ef=function(t,e){var n={};return e=Us(e,3),Js(t,function(t,r,i){$e(n,r,e(t,r,i))}),n},nf=1;var rf=function(t){return Ps(ka(t,nf))},of=1;var af=function(t,e){return Bs(t,ka(e,of))};var sf=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(void 0===l?s==s&&!a(s):n(s,l)))var l=s,c=o}return c};var lf=function(t){return t&&t.length?sf(t,P,pu):void 0};var cf=function(t,e){return t&&t.length?sf(t,Us(e,2),pu):void 0};var uf=function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n},df=NaN;var ff=function(t,e){var n=null==t?0:t.length;return n?uf(t,e)/n:df};var pf=function(t){return ff(t,P)};var hf=function(t,e){return ff(t,Us(e,2))},gf=en(function(t,e,n){Ml(t,e,n)}),mf=Xe(function(t,e){return function(n){return Yu(n,t,e)}}),vf=Xe(function(t,e){return function(n){return Yu(t,n,e)}});var yf=function(t){return t&&t.length?sf(t,P,Qd):void 0};var bf=function(t,e){return t&&t.length?sf(t,Us(e,2),Qd):void 0};var wf=function(t,e,n){var r=En(e),i=lu(e,r),o=!(y(n)&&"chain"in n&&!n.chain),a=F(t);return $t(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ct(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ar([this.value()],arguments))})}),t},_f=m(function(t,e){return t*e},1),xf="Expected a function";var Sf=function(t){if("function"!=typeof t)throw new TypeError(xf);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}};var Cf=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n},Ef="[object Map]",Tf="[object Set]",Mf=c.a?c.a.iterator:void 0;var kf=function(t){if(!t)return[];if(Je(t))return Eu(t)?ui(t):Ct(t);if(Mf&&t[Mf])return Cf(t[Mf]());var e=Lo(t);return(e==Ef?Za:e==Tf?Ja:Mu)(t)};var Af=function(){void 0===this.__values__&&(this.__values__=kf(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}};var If=function(t,e){var n=t.length;if(n)return le(e+=e<0?n:0,n)?t[e]:void 0};var Of=function(t,e){return t&&t.length?If(t,A(e)):void 0};var Pf=function(t){return t=A(t),Xe(function(e){return If(e,t)})};var Lf=function(t,e){return e=Sr(e,t),null==(t=Gu(t,e))||delete t[Er(jl(e))]};var Df=function(t){return Object(Rr.a)(t)?void 0:t},Nf=Dr(function(t,e){var n={};if(null==t)return n;var r=!1;e=u(e,function(e){return e=Sr(e,t),r||(r=e.length>1),e}),Ge(t,So(t),n),r&&(n=ka(n,7,Df));for(var i=e.length;i--;)Lf(n,e[i]);return n});var Rf=function(t,e,n,r){if(!y(t))return t;for(var i=-1,o=(e=Sr(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var l=Er(e[i]),c=n;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=y(u)?u:le(e[i+1])?[]:{})}We(s,l,c),s=s[l]}return t};var Ff=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Tr(t,a);n(s,a)&&Rf(o,Sr(a,t),s)}return o};var Bf=function(t,e){if(null==t)return{};var n=u(So(t),function(t){return[t]});return e=Us(e),Ff(t,n,function(t,n){return e(t,n[0])})};var jf=function(t,e){return Bf(t,Sf(Us(e)))};var qf=function(t){return Ur(2,t)};var zf=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var Uf=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=a(t),s=void 0!==e,l=null===e,c=e==e,u=a(e);if(!l&&!u&&!o&&t>e||o&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||l&&n&&i||!s&&i||!c)return-1}return 0};var $f=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=Uf(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index};var Vf=function(t,e,n){var r=-1;e=u(e.length?e:[P],gn(Us));var i=Fc(t,function(t,n,i){return{criteria:u(e,function(e){return e(t)}),index:++r,value:t}});return zf(i,function(t,e){return $f(t,e,n)})};var Hf=function(t,e,n,r){return null==t?[]:(d(e)||(e=null==e?[]:[e]),d(n=r?void 0:n)||(n=null==n?[]:[n]),Vf(t,e,n))};var Wf=function(t){return Dr(function(e){return e=u(e,gn(Us)),Xe(function(n){var r=this;return t(e,function(t){return st(t,r,n)})})})},Gf=Wf(u),Yf=Xe,Kf=Math.min,Xf=Yf(function(t,e){var n=(e=1==e.length&&d(e[0])?u(e[0],gn(Us)):u(Pr(e,1),gn(Us))).length;return Xe(function(r){for(var i=-1,o=Kf(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return st(t,this,r)})}),Qf=Wf(mc),Zf=Wf(Ga),Jf=9007199254740991,tp=Math.floor;var ep=function(t,e){var n="";if(!t||e<1||e>Jf)return n;do{e%2&&(n+=t),(e=tp(e/2))&&(t+=t)}while(e);return n},np=js("length"),rp="[\\ud800-\\udfff]",ip="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",op="[^\\ud800-\\udfff]",ap="(?:\\ud83c[\\udde6-\\uddff]){2}",sp="[\\ud800-\\udbff][\\udc00-\\udfff]",lp="(?:"+ip+"|\\ud83c[\\udffb-\\udfff])"+"?",cp="[\\ufe0e\\ufe0f]?"+lp+("(?:\\u200d(?:"+[op,ap,sp].join("|")+")[\\ufe0e\\ufe0f]?"+lp+")*"),up="(?:"+[op+ip+"?",ip,ap,sp,rp].join("|")+")",dp=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+up+cp,"g");var fp=function(t){for(var e=dp.lastIndex=0;dp.test(t);)++e;return e};var pp=function(t){return Qr(t)?fp(t):np(t)},hp=Math.ceil;var gp=function(t,e){var n=(e=void 0===e?" ":g(e)).length;if(n<2)return n?ep(e,t):e;var r=ep(e,hp(t/pp(e)));return Qr(e)?Kr(ui(r),0,t).join(""):r.slice(0,t)},mp=Math.ceil,vp=Math.floor;var yp=function(t,e,n){t=xr(t);var r=(e=A(e))?pp(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return gp(vp(i),n)+t+gp(mp(i),n)};var bp=function(t,e,n){t=xr(t);var r=(e=A(e))?pp(t):0;return e&&r<e?t+gp(e-r,n):t};var wp=function(t,e,n){t=xr(t);var r=(e=A(e))?pp(t):0;return e&&r<e?gp(e-r,n)+t:t},_p=/^\s+/,xp=B.a.parseInt;var Sp=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xp(xr(t).replace(_p,""),e||0)},Cp=Xe(function(t,e){var n=fe(e,oe(Cp));return qe(t,32,void 0,e,n)});Cp.placeholder={};var Ep=Cp,Tp=Xe(function(t,e){var n=fe(e,oe(Tp));return qe(t,64,void 0,e,n)});Tp.placeholder={};var Mp=Tp,kp=rl(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Ap=function(t,e){return Ff(t,e,function(e,n){return Ns(t,n)})},Ip=Dr(function(t,e){return null==t?{}:Ap(t,e)});var Op=function(t){for(var e,n=this;n instanceof pt;){var r=Et(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e};var Pp=function(t){return function(e){return null==t?void 0:Tr(t,e)}};var Lp=function(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1},Dp=Array.prototype.splice;var Np=function(t,e,n,r){var i=r?Lp:Gt,o=-1,a=e.length,s=t;for(t===e&&(e=Ct(e)),n&&(s=u(t,gn(n)));++o<a;)for(var l=0,c=e[o],d=n?n(c):c;(l=i(s,d,l,r))>-1;)s!==t&&Dp.call(s,l,1),Dp.call(t,l,1);return t};var Rp=function(t,e){return t&&t.length&&e&&e.length?Np(t,e):t},Fp=Xe(Rp);var Bp=function(t,e,n){return t&&t.length&&e&&e.length?Np(t,e,Us(n,2)):t};var jp=function(t,e,n){return t&&t.length&&e&&e.length?Np(t,e,void 0,n):t},qp=Array.prototype.splice;var zp=function(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;le(i)?qp.call(t,i,1):Lf(t,i)}}return t},Up=Dr(function(t,e){var n=null==t?0:t.length,r=kr(t,e);return zp(t,u(e,function(t){return le(t,n)?+t:t}).sort(Uf)),r}),$p=Math.floor,Vp=Math.random;var Hp=function(t,e){return t+$p(Vp()*(e-t+1))},Wp=parseFloat,Gp=Math.min,Yp=Math.random;var Kp=function(t,e,n){if(n&&"boolean"!=typeof n&&tn(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=k(t),void 0===e?(e=t,t=0):e=k(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Yp();return Gp(t+i*(e-t+Wp("1e-"+((i+"").length-1))),e)}return Hp(t,e)},Xp=Math.ceil,Qp=Math.max;var Zp=function(t,e,n,r){for(var i=-1,o=Qp(Xp((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a};var Jp=function(t){return function(e,n,r){return r&&"number"!=typeof r&&tn(e,n,r)&&(n=r=void 0),e=k(e),void 0===n?(n=e,e=0):n=k(n),r=void 0===r?e<n?1:-1:k(r),Zp(e,n,r,t)}},th=Jp(),eh=Jp(!0),nh=Dr(function(t,e){return qe(t,256,void 0,void 0,void 0,e)});var rh=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n};var ih=function(t,e,n){var r=d(t)?hi:rh,i=arguments.length<3;return r(t,Us(e,4),n,i,el)};var oh=function(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n};var ah=function(t,e,n){var r=d(t)?oh:rh,i=arguments.length<3;return r(t,Us(e,4),n,i,Jl)};var sh=function(t,e){return(d(t)?fo:Sc)(t,Sf(Us(e,3)))};var lh=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Us(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return zp(t,i),n};var ch=function(t,e,n){return e=(n?tn(t,e,n):void 0===e)?1:A(e),ep(xr(t),e)};var uh=function(){var t=arguments,e=xr(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dh="Expected a function";var fh=function(t,e){if("function"!=typeof t)throw new TypeError(dh);return e=void 0===e?e:A(e),Xe(t,e)};var ph=function(t,e,n){var r=-1,i=(e=Sr(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[Er(e[r])];void 0===o&&(r=i,o=n),t=F(o)?o.call(t):o}return t},hh=Array.prototype.reverse;var gh=function(t){return null==t?t:hh.call(t)},mh=Wi("round");var vh=function(t){var e=t.length;return e?t[Hp(0,e-1)]:void 0};var yh=function(t){return vh(Mu(t))};var bh=function(t){return(d(t)?vh:yh)(t)};var wh=function(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=Hp(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t};var _h=function(t,e){return wh(Ct(t),Zi(e,0,t.length))};var xh=function(t,e){var n=Mu(t);return wh(n,Zi(e,0,n.length))};var Sh=function(t,e,n){return e=(n?tn(t,e,n):void 0===e)?1:A(e),(d(t)?_h:xh)(t,e)};var Ch=function(t,e,n){return null==t?t:Rf(t,e,n)};var Eh=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Rf(t,e,n,r)};var Th=function(t){return wh(Ct(t))};var Mh=function(t){return wh(Mu(t))};var kh=function(t){return(d(t)?Th:Mh)(t)},Ah="[object Map]",Ih="[object Set]";var Oh=function(t){if(null==t)return 0;if(Je(t))return Eu(t)?pp(t):t.length;var e=Lo(t);return e==Ah||e==Ih?t.size:Cn(t).length};var Ph=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&tn(t,e,n)?(e=0,n=r):(e=null==e?0:A(e),n=void 0===n?r:A(n)),Yr(t,e,n)):[]},Lh=Ui(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var Dh=function(t,e){var n;return el(t,function(t,r,i){return!(n=e(t,r,i))}),!!n};var Nh=function(t,e,n){var r=d(t)?Ga:Dh;return n&&tn(t,e,n)&&(e=void 0),r(t,Us(e,3))},Rh=Xe(function(t,e){if(null==t)return[];var n=e.length;return n>1&&tn(t,e[0],e[1])?e=[]:n>2&&tn(e[0],e[1],e[2])&&(e=[e[0]]),Vf(t,Pr(e,1),[])}),Fh=4294967294,Bh=Math.floor,jh=Math.min;var qh=function(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,s=e!=e,l=null===e,c=a(e),u=void 0===e;i<o;){var d=Bh((i+o)/2),f=n(t[d]),p=void 0!==f,h=null===f,g=f==f,m=a(f);if(s)var v=r||g;else v=u?g&&(r||p):l?g&&p&&(r||!h):c?g&&p&&!h&&(r||!m):!h&&!m&&(r?f<=e:f<e);v?i=d+1:o=d}return jh(o,Fh)},zh=2147483647;var Uh=function(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=zh){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!a(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return qh(t,e,P,n)};var $h=function(t,e){return Uh(t,e)};var Vh=function(t,e,n){return qh(t,e,Us(n,2))};var Hh=function(t,e){var n=null==t?0:t.length;if(n){var r=Uh(t,e);if(r<n&&Ve(t[r],e))return r}return-1};var Wh=function(t,e){return Uh(t,e,!0)};var Gh=function(t,e,n){return qh(t,e,Us(n,2),!0)};var Yh=function(t,e){if(null!=t&&t.length){var n=Uh(t,e,!0)-1;if(Ve(t[n],e))return n}return-1};var Kh=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ve(s,l)){var l=s;o[i++]=0===a?0:a}}return o};var Xh=function(t){return t&&t.length?Kh(t):[]};var Qh=function(t,e){return t&&t.length?Kh(t,Us(e,2)):[]},Zh=4294967295;var Jh=function(t,e,n){return n&&"number"!=typeof n&&tn(t,e,n)&&(e=n=void 0),(n=void 0===n?Zh:n>>>0)?(t=xr(t))&&("string"==typeof e||null!=e&&!Od(e))&&!(e=g(e))&&Qr(t)?Kr(ui(t),0,n):t.split(e,n):[]},tg="Expected a function",eg=Math.max;var ng=function(t,e){if("function"!=typeof t)throw new TypeError(tg);return e=null==e?0:eg(A(e),0),Xe(function(n){var r=n[e],i=Kr(n,0,e);return r&&Ar(i,r),st(t,this,i)})},rg=Ui(function(t,e,n){return t+(n?" ":"")+fi(e)});var ig=function(t,e,n){return t=xr(t),n=null==n?0:Zi(A(n),0,t.length),e=g(e),t.slice(n,n+e.length)==e};var og=function(){return{}};var ag=function(){return""};var sg=function(){return!0},lg=m(function(t,e){return t-e},0);var cg=function(t){return t&&t.length?uf(t,P):0};var ug=function(t,e){return t&&t.length?uf(t,Us(e,2)):0};var dg=function(t){var e=null==t?0:t.length;return e?Yr(t,1,e):[]};var fg=function(t,e,n){return t&&t.length?(e=n||void 0===e?1:A(e),Yr(t,0,e<0?0:e)):[]};var pg=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:A(e),Yr(t,(e=r-e)<0?0:e,r)):[]};var hg=function(t,e){return t&&t.length?Hl(t,Us(e,3),!1,!0):[]};var gg=function(t,e){return t&&t.length?Hl(t,Us(e,3)):[]};var mg=function(t,e){return e(t),t},vg=Object.prototype,yg=vg.hasOwnProperty;var bg=function(t,e,n,r){return void 0===t||Ve(t,vg[n])&&!yg.call(r,n)?e:t},wg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var _g=function(t){return"\\"+wg[t]},xg=/<%=([\s\S]+?)%>/g,Sg={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:xg,variable:"",imports:{_:{escape:fc}}},Cg=/\b__p \+= '';/g,Eg=/\b(__p \+=) '' \+/g,Tg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kg=/($^)/,Ag=/['\n\r\u2028\u2029\\]/g;var Ig=function(t,e,n){var r=Sg.imports._.templateSettings||Sg;n&&tn(t,e,n)&&(e=void 0),t=xr(t),e=Ln({},e,r,bg);var i,o,a=Ln({},e.imports,r.imports,bg),s=En(a),l=Tu(a,s),c=0,u=e.interpolate||kg,d="__p += '",f=RegExp((e.escape||kg).source+"|"+u.source+"|"+(u===xg?Mg:kg).source+"|"+(e.evaluate||kg).source+"|$","g"),p="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(f,function(e,n,r,a,s,l){return r||(r=a),d+=t.slice(c,l).replace(Ag,_g),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),d+="';\n";var h=e.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(Cg,""):d).replace(Eg,"$1").replace(Tg,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=qr(function(){return Function(s,p+"return "+d).apply(void 0,l)});if(g.source=d,jr(g))throw g;return g},Og="Expected a function";var Pg=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(Og);return y(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),vl(t,e,{leading:r,maxWait:e,trailing:i})};var Lg=function(t,e){return e(t)},Dg=9007199254740991,Ng=4294967295,Rg=Math.min;var Fg=function(t,e){if((t=A(t))<1||t>Dg)return[];var n=Ng,r=Rg(t,Ng);e=Yl(e),t-=Ng;for(var i=on(r,e);++n<t;)e(n);return i};var Bg=function(){return this};var jg=function(t,e){var n=t;return n instanceof mt&&(n=n.value()),hi(e,function(t,e){return e.func.apply(e.thisArg,Ar([t],e.args))},n)};var qg=function(){return jg(this.__wrapped__,this.__actions__)};var zg=function(t){return xr(t).toLowerCase()};var Ug=function(t){return d(t)?u(t,Er):a(t)?[t]:Ct(_r(xr(t)))},$g=9007199254740991;var Vg=function(t){return t?Zi(A(t),-$g,$g):0===t?t:0};var Hg=function(t){return xr(t).toUpperCase()};var Wg=function(t,e,n){var r=d(t),i=r||Object(fn.a)(t)||yn(t);if(e=Us(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:y(t)&&F(o)?rt(Object(yo.a)(t)):{}}return(i?$t:Js)(t,function(t,r,i){return e(n,t,r,i)}),n};var Gg=function(t,e){for(var n=t.length;n--&&Gt(e,t[n],0)>-1;);return n};var Yg=function(t,e){for(var n=-1,r=t.length;++n<r&&Gt(e,t[n],0)>-1;);return n},Kg=/^\s+|\s+$/g;var Xg=function(t,e,n){if((t=xr(t))&&(n||void 0===e))return t.replace(Kg,"");if(!t||!(e=g(e)))return t;var r=ui(t),i=ui(e),o=Yg(r,i),a=Gg(r,i)+1;return Kr(r,o,a).join("")},Qg=/\s+$/;var Zg=function(t,e,n){if((t=xr(t))&&(n||void 0===e))return t.replace(Qg,"");if(!t||!(e=g(e)))return t;var r=ui(t),i=Gg(r,ui(e))+1;return Kr(r,0,i).join("")},Jg=/^\s+/;var tm=function(t,e,n){if((t=xr(t))&&(n||void 0===e))return t.replace(Jg,"");if(!t||!(e=g(e)))return t;var r=ui(t),i=Yg(r,ui(e));return Kr(r,i).join("")},em=30,nm="...",rm=/\w*$/;var im=function(t,e){var n=em,r=nm;if(y(e)){var i="separator"in e?e.separator:i;n="length"in e?A(e.length):n,r="omission"in e?g(e.omission):r}var o=(t=xr(t)).length;if(Qr(t)){var a=ui(t);o=a.length}if(n>=o)return t;var s=n-pp(r);if(s<1)return r;var l=a?Kr(a,0,s).join(""):t.slice(0,s);if(void 0===i)return l+r;if(a&&(s+=l.length-s),Od(i)){if(t.slice(s).search(i)){var c,u=l;for(i.global||(i=RegExp(i.source,xr(rm.exec(i))+"g")),i.lastIndex=0;c=i.exec(u);)var d=c.index;l=l.slice(0,void 0===d?s:d)}}else if(t.indexOf(g(i),s)!=s){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+r};var om=function(t){return Ue(t,1)},am=gi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),sm=/&(?:amp|lt|gt|quot|#39);/g,lm=RegExp(sm.source);var cm=function(t){return(t=xr(t))&&lm.test(t)?t.replace(sm,am):t},um=To&&1/Ja(new To([,-0]))[1]==1/0?function(t){return new To(t)}:vt,dm=200;var fm=function(t,e,n){var r=-1,i=Yt,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=Nl;else if(o>=dm){var c=e?null:um(t);if(c)return Ja(c);a=!1,i=Ya,l=new Wa}else l=e?[]:s;t:for(;++r<o;){var u=t[r],d=e?e(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue t;e&&l.push(d),s.push(u)}else i(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s},pm=Xe(function(t){return fm(Pr(t,1,Sl,!0))}),hm=Xe(function(t){var e=jl(t);return Sl(e)&&(e=void 0),fm(Pr(t,1,Sl,!0),Us(e,2))}),gm=Xe(function(t){var e=jl(t);return e="function"==typeof e?e:void 0,fm(Pr(t,1,Sl,!0),void 0,e)});var mm=function(t){return t&&t.length?fm(t):[]};var vm=function(t,e){return t&&t.length?fm(t,Us(e,2)):[]};var ym=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?fm(t,void 0,e):[]},bm=0;var wm=function(t){var e=++bm;return xr(t)+e};var _m=function(t,e){return null==t||Lf(t,e)},xm=Math.max;var Sm=function(t){if(!t||!t.length)return[];var e=0;return t=fo(t,function(t){if(Sl(t))return e=xm(t.length,e),!0}),on(e,function(e){return u(t,js(e))})};var Cm=function(t,e){if(!t||!t.length)return[];var n=Sm(t);return null==e?n:u(n,function(t){return st(e,void 0,t)})};var Em=function(t,e,n,r){return Rf(t,e,n(Tr(t,e)),r)};var Tm=function(t,e,n){return null==t?t:Em(t,e,Yl(n))};var Mm=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Em(t,e,Yl(n),r)},km=Ui(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()});var Am=function(t){return null==t?[]:Tu(t,On(t))},Im=Xe(function(t,e){return Sl(t)?Fl(t,e):[]});var Om=function(t,e){return Ep(Yl(e),t)},Pm=Dr(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return kr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof mt&&le(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Lg,args:[i],thisArg:void 0}),new St(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(void 0),t})):this.thru(i)});var Lm=function(){return Yi(this)};var Dm=function(){var t=this.__wrapped__;if(t instanceof mt){var e=t;return this.__actions__.length&&(e=new mt(this)),(e=e.reverse()).__actions__.push({func:Lg,args:[gh],thisArg:void 0}),new St(e,this.__chain__)}return this.thru(gh)};var Nm=function(t,e,n){var r=t.length;if(r<2)return r?fm(t[0]):[];for(var i=-1,o=Array(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Fl(o[i]||a,t[s],e,n));return fm(Pr(o,1),e,n)},Rm=Xe(function(t){return Nm(fo(t,Sl))}),Fm=Xe(function(t){var e=jl(t);return Sl(e)&&(e=void 0),Nm(fo(t,Sl),Us(e,2))}),Bm=Xe(function(t){var e=jl(t);return e="function"==typeof e?e:void 0,Nm(fo(t,Sl),void 0,e)}),jm=Xe(Sm);var qm=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a};var zm=function(t,e){return qm(t||[],e||[],We)};var Um=function(t,e){return qm(t||[],e||[],Rf)},$m=Xe(function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Cm(t,n)}),Vm={chunk:Qi,compact:qa,concat:za,difference:Bl,differenceBy:ql,differenceWith:zl,drop:$l,dropRight:Vl,dropRightWhile:Wl,dropWhile:Gl,fill:xc,findIndex:Mc,findLastIndex:Lc,first:Rc,flatten:Lr,flattenDeep:Vc,flattenDepth:Hc,fromPairs:su,head:Rc,indexOf:Ou,initial:Pu,intersection:Ru,intersectionBy:Fu,intersectionWith:Bu,join:Ud,last:jl,lastIndexOf:Yd,nth:Of,pull:Fp,pullAll:Rp,pullAllBy:Bp,pullAllWith:jp,pullAt:Up,remove:lh,reverse:gh,slice:Ph,sortedIndex:$h,sortedIndexBy:Vh,sortedIndexOf:Hh,sortedLastIndex:Wh,sortedLastIndexBy:Gh,sortedLastIndexOf:Yh,sortedUniq:Xh,sortedUniqBy:Qh,tail:dg,take:fg,takeRight:pg,takeRightWhile:hg,takeWhile:gg,union:pm,unionBy:hm,unionWith:gm,uniq:mm,uniqBy:vm,uniqWith:ym,unzip:Sm,unzipWith:Cm,without:Im,xor:Rm,xorBy:Fm,xorWith:Bm,zip:jm,zipObject:zm,zipObjectDeep:Um,zipWith:$m},Hm={countBy:ol,each:Kl,eachRight:tc,every:yc,filter:Cc,find:kc,findLast:Dc,flatMap:jc,flatMapDeep:zc,flatMapDepth:Uc,forEach:Kl,forEachRight:tc,groupBy:fu,includes:Au,invokeMap:Xu,keyBy:Vd,map:Bc,orderBy:Hf,partition:kp,reduce:ih,reduceRight:ah,reject:sh,sample:bh,sampleSize:Sh,shuffle:kh,size:Oh,some:Nh,sortBy:Rh},Wm={now:pl},Gm={after:O,ary:Ue,before:Ur,bind:Vr,bindKey:Gr,curry:cl,curryRight:fl,debounce:vl,defer:Ll,delay:Dl,flip:Gc,memoize:vr,negate:Sf,once:qf,overArgs:Xf,partial:Ep,partialRight:Mp,rearg:nh,rest:fh,spread:ng,throttle:Pg,unary:om,wrap:Om},Ym={castArray:Vi,clone:Ia,cloneDeep:La,cloneDeepWith:Ra,cloneWith:Ba,conformsTo:Ks,eq:Ve,gt:gu,gte:mu,isArguments:dn,isArray:d,isArrayBuffer:td,isArrayLike:Je,isArrayLikeObject:Sl,isBoolean:nd,isBuffer:fn.a,isDate:ad,isElement:sd,isEmpty:dd,isEqual:fd,isEqualWith:pd,isError:jr,isFinite:gd,isFunction:F,isInteger:md,isLength:Ze,isMap:ga,isMatch:vd,isMatchWith:yd,isNaN:_d,isNative:Ed,isNil:Td,isNull:Md,isNumber:wd,isObject:y,isObjectLike:i.a,isPlainObject:Rr.a,isRegExp:Od,isSafeInteger:Ld,isSet:ba,isString:Eu,isSymbol:a,isTypedArray:yn,isUndefined:Dd,isWeakMap:Rd,isWeakSet:Bd,lt:Zd,lte:Jd,toArray:kf,toFinite:k,toInteger:A,toLength:wc,toNumber:E,toPlainObject:El,toSafeInteger:Vg,toString:xr},Km={add:v,ceil:Gi,divide:Ul,floor:Yc,max:lf,maxBy:cf,mean:pf,meanBy:hf,min:yf,minBy:bf,multiply:_f,round:mh,subtract:lg,sum:cg,sumBy:ug},Xm={clamp:Ji,inRange:Su,random:Kp},Qm={assign:Mn,assignIn:Pn,assignInWith:Ln,assignWith:Dn,at:Nr,create:al,defaults:_l,defaultsDeep:Il,entries:sc,entriesIn:lc,extend:Pn,extendWith:Ln,findKey:Ic,findLastKey:Nc,forIn:ru,forInRight:iu,forOwn:ou,forOwnRight:au,functions:cu,functionsIn:uu,get:Mr,has:bu,hasIn:Ns,invert:Uu,invertBy:Wu,invoke:Ku,keys:En,keysIn:On,mapKeys:tf,mapValues:ef,merge:gf,mergeWith:Al,omit:Nf,omitBy:jf,pick:Ip,pickBy:Bf,result:ph,set:Ch,setWith:Eh,toPairs:sc,toPairsIn:lc,transform:Wg,unset:_m,update:Tm,updateWith:Mm,values:Mu,valuesIn:Am},Zm={at:Pm,chain:Yi,commit:ja,lodash:kt,next:Af,plant:Op,reverse:Dm,tap:mg,thru:Lg,toIterator:Bg,toJSON:qg,value:qg,valueOf:qg,wrapperChain:Lm},Jm={camelCase:$i,capitalize:pi,deburr:bi,endsWith:ec,escape:fc,escapeRegExp:gc,kebabCase:$d,lowerCase:Kd,lowerFirst:Xd,pad:yp,padEnd:bp,padStart:wp,parseInt:Sp,repeat:ch,replace:uh,snakeCase:Lh,split:Jh,startCase:rg,startsWith:ig,template:Ig,templateSettings:Sg,toLower:zg,toUpper:Hg,trim:Xg,trimEnd:Zg,trimStart:tm,truncate:im,unescape:cm,upperCase:km,upperFirst:fi,words:qi},tv={attempt:qr,bindAll:Hr,cond:Vs,conforms:Ys,constant:qt,defaultTo:yl,flow:eu,flowRight:nu,identity:P,iteratee:qd,matches:rf,matchesProperty:af,method:mf,methodOf:vf,mixin:wf,noop:vt,nthArg:Pf,over:Gf,overEvery:Qf,overSome:Zf,property:zs,propertyOf:Pp,range:th,rangeRight:eh,stubArray:po,stubFalse:xd.a,stubObject:og,stubString:ag,stubTrue:sg,times:Fg,toPath:Ug,uniqueId:wm};var ev=function(){var t=new mt(this.__wrapped__);return t.__actions__=Ct(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ct(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ct(this.__views__),t};var nv=function(){if(this.__filtered__){var t=new mt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},rv=Math.max,iv=Math.min;var ov=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=iv(e,t+a);break;case"takeRight":t=rv(t,e-a)}}return{start:t,end:e}},av=1,sv=2,lv=Math.min;var cv=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=d(t),r=e<0,i=n?t.length:0,o=ov(0,i,this.__views__),a=o.start,s=o.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,f=u.length,p=0,h=lv(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return jg(t,this.__actions__);var g=[];t:for(;l--&&p<h;){for(var m=-1,v=t[c+=e];++m<f;){var y=u[m],b=y.iteratee,w=y.type,_=b(v);if(w==sv)v=_;else if(!_){if(w==av)continue t;break t}}g[p++]=v}return g},uv=Array.prototype,dv=Object.prototype.hasOwnProperty,fv=c.a?c.a.iterator:void 0,pv=Math.max,hv=Math.min,gv=function(t){return function(e,n,r){if(null==r){var i=y(n),o=i&&En(n),a=o&&o.length&&lu(n,o);(a?a.length:i)||(r=n,n=e,e=this)}return t(e,n,r)}}(wf);
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */kt.after=Gm.after,kt.ary=Gm.ary,kt.assign=Qm.assign,kt.assignIn=Qm.assignIn,kt.assignInWith=Qm.assignInWith,kt.assignWith=Qm.assignWith,kt.at=Qm.at,kt.before=Gm.before,kt.bind=Gm.bind,kt.bindAll=tv.bindAll,kt.bindKey=Gm.bindKey,kt.castArray=Ym.castArray,kt.chain=Zm.chain,kt.chunk=Vm.chunk,kt.compact=Vm.compact,kt.concat=Vm.concat,kt.cond=tv.cond,kt.conforms=tv.conforms,kt.constant=tv.constant,kt.countBy=Hm.countBy,kt.create=Qm.create,kt.curry=Gm.curry,kt.curryRight=Gm.curryRight,kt.debounce=Gm.debounce,kt.defaults=Qm.defaults,kt.defaultsDeep=Qm.defaultsDeep,kt.defer=Gm.defer,kt.delay=Gm.delay,kt.difference=Vm.difference,kt.differenceBy=Vm.differenceBy,kt.differenceWith=Vm.differenceWith,kt.drop=Vm.drop,kt.dropRight=Vm.dropRight,kt.dropRightWhile=Vm.dropRightWhile,kt.dropWhile=Vm.dropWhile,kt.fill=Vm.fill,kt.filter=Hm.filter,kt.flatMap=Hm.flatMap,kt.flatMapDeep=Hm.flatMapDeep,kt.flatMapDepth=Hm.flatMapDepth,kt.flatten=Vm.flatten,kt.flattenDeep=Vm.flattenDeep,kt.flattenDepth=Vm.flattenDepth,kt.flip=Gm.flip,kt.flow=tv.flow,kt.flowRight=tv.flowRight,kt.fromPairs=Vm.fromPairs,kt.functions=Qm.functions,kt.functionsIn=Qm.functionsIn,kt.groupBy=Hm.groupBy,kt.initial=Vm.initial,kt.intersection=Vm.intersection,kt.intersectionBy=Vm.intersectionBy,kt.intersectionWith=Vm.intersectionWith,kt.invert=Qm.invert,kt.invertBy=Qm.invertBy,kt.invokeMap=Hm.invokeMap,kt.iteratee=tv.iteratee,kt.keyBy=Hm.keyBy,kt.keys=En,kt.keysIn=Qm.keysIn,kt.map=Hm.map,kt.mapKeys=Qm.mapKeys,kt.mapValues=Qm.mapValues,kt.matches=tv.matches,kt.matchesProperty=tv.matchesProperty,kt.memoize=Gm.memoize,kt.merge=Qm.merge,kt.mergeWith=Qm.mergeWith,kt.method=tv.method,kt.methodOf=tv.methodOf,kt.mixin=gv,kt.negate=Sf,kt.nthArg=tv.nthArg,kt.omit=Qm.omit,kt.omitBy=Qm.omitBy,kt.once=Gm.once,kt.orderBy=Hm.orderBy,kt.over=tv.over,kt.overArgs=Gm.overArgs,kt.overEvery=tv.overEvery,kt.overSome=tv.overSome,kt.partial=Gm.partial,kt.partialRight=Gm.partialRight,kt.partition=Hm.partition,kt.pick=Qm.pick,kt.pickBy=Qm.pickBy,kt.property=tv.property,kt.propertyOf=tv.propertyOf,kt.pull=Vm.pull,kt.pullAll=Vm.pullAll,kt.pullAllBy=Vm.pullAllBy,kt.pullAllWith=Vm.pullAllWith,kt.pullAt=Vm.pullAt,kt.range=tv.range,kt.rangeRight=tv.rangeRight,kt.rearg=Gm.rearg,kt.reject=Hm.reject,kt.remove=Vm.remove,kt.rest=Gm.rest,kt.reverse=Vm.reverse,kt.sampleSize=Hm.sampleSize,kt.set=Qm.set,kt.setWith=Qm.setWith,kt.shuffle=Hm.shuffle,kt.slice=Vm.slice,kt.sortBy=Hm.sortBy,kt.sortedUniq=Vm.sortedUniq,kt.sortedUniqBy=Vm.sortedUniqBy,kt.split=Jm.split,kt.spread=Gm.spread,kt.tail=Vm.tail,kt.take=Vm.take,kt.takeRight=Vm.takeRight,kt.takeRightWhile=Vm.takeRightWhile,kt.takeWhile=Vm.takeWhile,kt.tap=Zm.tap,kt.throttle=Gm.throttle,kt.thru=Lg,kt.toArray=Ym.toArray,kt.toPairs=Qm.toPairs,kt.toPairsIn=Qm.toPairsIn,kt.toPath=tv.toPath,kt.toPlainObject=Ym.toPlainObject,kt.transform=Qm.transform,kt.unary=Gm.unary,kt.union=Vm.union,kt.unionBy=Vm.unionBy,kt.unionWith=Vm.unionWith,kt.uniq=Vm.uniq,kt.uniqBy=Vm.uniqBy,kt.uniqWith=Vm.uniqWith,kt.unset=Qm.unset,kt.unzip=Vm.unzip,kt.unzipWith=Vm.unzipWith,kt.update=Qm.update,kt.updateWith=Qm.updateWith,kt.values=Qm.values,kt.valuesIn=Qm.valuesIn,kt.without=Vm.without,kt.words=Jm.words,kt.wrap=Gm.wrap,kt.xor=Vm.xor,kt.xorBy=Vm.xorBy,kt.xorWith=Vm.xorWith,kt.zip=Vm.zip,kt.zipObject=Vm.zipObject,kt.zipObjectDeep=Vm.zipObjectDeep,kt.zipWith=Vm.zipWith,kt.entries=Qm.toPairs,kt.entriesIn=Qm.toPairsIn,kt.extend=Qm.assignIn,kt.extendWith=Qm.assignInWith,gv(kt,kt),kt.add=Km.add,kt.attempt=tv.attempt,kt.camelCase=Jm.camelCase,kt.capitalize=Jm.capitalize,kt.ceil=Km.ceil,kt.clamp=Xm.clamp,kt.clone=Ym.clone,kt.cloneDeep=Ym.cloneDeep,kt.cloneDeepWith=Ym.cloneDeepWith,kt.cloneWith=Ym.cloneWith,kt.conformsTo=Ym.conformsTo,kt.deburr=Jm.deburr,kt.defaultTo=tv.defaultTo,kt.divide=Km.divide,kt.endsWith=Jm.endsWith,kt.eq=Ym.eq,kt.escape=Jm.escape,kt.escapeRegExp=Jm.escapeRegExp,kt.every=Hm.every,kt.find=Hm.find,kt.findIndex=Vm.findIndex,kt.findKey=Qm.findKey,kt.findLast=Hm.findLast,kt.findLastIndex=Vm.findLastIndex,kt.findLastKey=Qm.findLastKey,kt.floor=Km.floor,kt.forEach=Hm.forEach,kt.forEachRight=Hm.forEachRight,kt.forIn=Qm.forIn,kt.forInRight=Qm.forInRight,kt.forOwn=Qm.forOwn,kt.forOwnRight=Qm.forOwnRight,kt.get=Qm.get,kt.gt=Ym.gt,kt.gte=Ym.gte,kt.has=Qm.has,kt.hasIn=Qm.hasIn,kt.head=Vm.head,kt.identity=P,kt.includes=Hm.includes,kt.indexOf=Vm.indexOf,kt.inRange=Xm.inRange,kt.invoke=Qm.invoke,kt.isArguments=Ym.isArguments,kt.isArray=d,kt.isArrayBuffer=Ym.isArrayBuffer,kt.isArrayLike=Ym.isArrayLike,kt.isArrayLikeObject=Ym.isArrayLikeObject,kt.isBoolean=Ym.isBoolean,kt.isBuffer=Ym.isBuffer,kt.isDate=Ym.isDate,kt.isElement=Ym.isElement,kt.isEmpty=Ym.isEmpty,kt.isEqual=Ym.isEqual,kt.isEqualWith=Ym.isEqualWith,kt.isError=Ym.isError,kt.isFinite=Ym.isFinite,kt.isFunction=Ym.isFunction,kt.isInteger=Ym.isInteger,kt.isLength=Ym.isLength,kt.isMap=Ym.isMap,kt.isMatch=Ym.isMatch,kt.isMatchWith=Ym.isMatchWith,kt.isNaN=Ym.isNaN,kt.isNative=Ym.isNative,kt.isNil=Ym.isNil,kt.isNull=Ym.isNull,kt.isNumber=Ym.isNumber,kt.isObject=y,kt.isObjectLike=Ym.isObjectLike,kt.isPlainObject=Ym.isPlainObject,kt.isRegExp=Ym.isRegExp,kt.isSafeInteger=Ym.isSafeInteger,kt.isSet=Ym.isSet,kt.isString=Ym.isString,kt.isSymbol=Ym.isSymbol,kt.isTypedArray=Ym.isTypedArray,kt.isUndefined=Ym.isUndefined,kt.isWeakMap=Ym.isWeakMap,kt.isWeakSet=Ym.isWeakSet,kt.join=Vm.join,kt.kebabCase=Jm.kebabCase,kt.last=jl,kt.lastIndexOf=Vm.lastIndexOf,kt.lowerCase=Jm.lowerCase,kt.lowerFirst=Jm.lowerFirst,kt.lt=Ym.lt,kt.lte=Ym.lte,kt.max=Km.max,kt.maxBy=Km.maxBy,kt.mean=Km.mean,kt.meanBy=Km.meanBy,kt.min=Km.min,kt.minBy=Km.minBy,kt.stubArray=tv.stubArray,kt.stubFalse=tv.stubFalse,kt.stubObject=tv.stubObject,kt.stubString=tv.stubString,kt.stubTrue=tv.stubTrue,kt.multiply=Km.multiply,kt.nth=Vm.nth,kt.noop=tv.noop,kt.now=Wm.now,kt.pad=Jm.pad,kt.padEnd=Jm.padEnd,kt.padStart=Jm.padStart,kt.parseInt=Jm.parseInt,kt.random=Xm.random,kt.reduce=Hm.reduce,kt.reduceRight=Hm.reduceRight,kt.repeat=Jm.repeat,kt.replace=Jm.replace,kt.result=Qm.result,kt.round=Km.round,kt.sample=Hm.sample,kt.size=Hm.size,kt.snakeCase=Jm.snakeCase,kt.some=Hm.some,kt.sortedIndex=Vm.sortedIndex,kt.sortedIndexBy=Vm.sortedIndexBy,kt.sortedIndexOf=Vm.sortedIndexOf,kt.sortedLastIndex=Vm.sortedLastIndex,kt.sortedLastIndexBy=Vm.sortedLastIndexBy,kt.sortedLastIndexOf=Vm.sortedLastIndexOf,kt.startCase=Jm.startCase,kt.startsWith=Jm.startsWith,kt.subtract=Km.subtract,kt.sum=Km.sum,kt.sumBy=Km.sumBy,kt.template=Jm.template,kt.times=tv.times,kt.toFinite=Ym.toFinite,kt.toInteger=A,kt.toLength=Ym.toLength,kt.toLower=Jm.toLower,kt.toNumber=Ym.toNumber,kt.toSafeInteger=Ym.toSafeInteger,kt.toString=Ym.toString,kt.toUpper=Jm.toUpper,kt.trim=Jm.trim,kt.trimEnd=Jm.trimEnd,kt.trimStart=Jm.trimStart,kt.truncate=Jm.truncate,kt.unescape=Jm.unescape,kt.uniqueId=tv.uniqueId,kt.upperCase=Jm.upperCase,kt.upperFirst=Jm.upperFirst,kt.each=Hm.forEach,kt.eachRight=Hm.forEachRight,kt.first=Vm.head,gv(kt,function(){var t={};return Js(kt,function(e,n){dv.call(kt.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),kt.VERSION="4.17.10",(kt.templateSettings=Jm.templateSettings).imports._=kt,$t(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){kt[t].placeholder=kt}),$t(["drop","take"],function(t,e){mt.prototype[t]=function(n){n=void 0===n?1:pv(A(n),0);var r=this.__filtered__&&!e?new mt(this):this.clone();return r.__filtered__?r.__takeCount__=hv(n,r.__takeCount__):r.__views__.push({size:hv(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},mt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),$t(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;mt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Us(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),$t(["head","last"],function(t,e){var n="take"+(e?"Right":"");mt.prototype[t]=function(){return this[n](1).value()[0]}}),$t(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");mt.prototype[t]=function(){return this.__filtered__?new mt(this):this[n](1)}}),mt.prototype.compact=function(){return this.filter(P)},mt.prototype.find=function(t){return this.filter(t).head()},mt.prototype.findLast=function(t){return this.reverse().find(t)},mt.prototype.invokeMap=Xe(function(t,e){return"function"==typeof t?new mt(this):this.map(function(n){return Yu(n,t,e)})}),mt.prototype.reject=function(t){return this.filter(Sf(Us(t)))},mt.prototype.slice=function(t,e){t=A(t);var n=this;return n.__filtered__&&(t>0||e<0)?new mt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=A(e))<0?n.dropRight(-e):n.take(e-t)),n)},mt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},mt.prototype.toArray=function(){return this.take(4294967295)},Js(mt.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=kt[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(kt.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof mt,l=a[0],c=s||d(e),u=function(t){var e=i.apply(kt,Ar([t],a));return r&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var f=this.__chain__,p=!!this.__actions__.length,h=o&&!f,g=s&&!p;if(!o&&c){e=g?e:new mt(this);var m=t.apply(e,a);return m.__actions__.push({func:Lg,args:[u],thisArg:void 0}),new St(m,f)}return h&&g?t.apply(this,a):(m=this.thru(u),h?r?m.value()[0]:m.value():m)})}),$t(["pop","push","shift","sort","splice","unshift"],function(t){var e=uv[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);kt.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(d(i)?i:[],t)}return this[n](function(n){return e.apply(d(n)?n:[],t)})}}),Js(mt.prototype,function(t,e){var n=kt[e];if(n){var r=n.name+"";(bt[r]||(bt[r]=[])).push({name:e,func:n})}}),bt[be(void 0,2).name]=[{name:"wrapper",func:void 0}],mt.prototype.clone=ev,mt.prototype.reverse=nv,mt.prototype.value=cv,kt.prototype.at=Zm.at,kt.prototype.chain=Zm.wrapperChain,kt.prototype.commit=Zm.commit,kt.prototype.next=Zm.next,kt.prototype.plant=Zm.plant,kt.prototype.reverse=Zm.reverse,kt.prototype.toJSON=kt.prototype.valueOf=kt.prototype.value=Zm.value,kt.prototype.first=kt.prototype.head,fv&&(kt.prototype[fv]=Zm.toIterator);var mv=kt;n.d(e,"add",function(){return v}),n.d(e,"after",function(){return O}),n.d(e,"ary",function(){return Ue}),n.d(e,"assign",function(){return Mn}),n.d(e,"assignIn",function(){return Pn}),n.d(e,"assignInWith",function(){return Ln}),n.d(e,"assignWith",function(){return Dn}),n.d(e,"at",function(){return Nr}),n.d(e,"attempt",function(){return qr}),n.d(e,"before",function(){return Ur}),n.d(e,"bind",function(){return Vr}),n.d(e,"bindAll",function(){return Hr}),n.d(e,"bindKey",function(){return Gr}),n.d(e,"camelCase",function(){return $i}),n.d(e,"capitalize",function(){return pi}),n.d(e,"castArray",function(){return Vi}),n.d(e,"ceil",function(){return Gi}),n.d(e,"chain",function(){return Yi}),n.d(e,"chunk",function(){return Qi}),n.d(e,"clamp",function(){return Ji}),n.d(e,"clone",function(){return Ia}),n.d(e,"cloneDeep",function(){return La}),n.d(e,"cloneDeepWith",function(){return Ra}),n.d(e,"cloneWith",function(){return Ba}),n.d(e,"commit",function(){return ja}),n.d(e,"compact",function(){return qa}),n.d(e,"concat",function(){return za}),n.d(e,"cond",function(){return Vs}),n.d(e,"conforms",function(){return Ys}),n.d(e,"conformsTo",function(){return Ks}),n.d(e,"constant",function(){return qt}),n.d(e,"countBy",function(){return ol}),n.d(e,"create",function(){return al}),n.d(e,"curry",function(){return cl}),n.d(e,"curryRight",function(){return fl}),n.d(e,"debounce",function(){return vl}),n.d(e,"deburr",function(){return bi}),n.d(e,"defaultTo",function(){return yl}),n.d(e,"defaults",function(){return _l}),n.d(e,"defaultsDeep",function(){return Il}),n.d(e,"defer",function(){return Ll}),n.d(e,"delay",function(){return Dl}),n.d(e,"difference",function(){return Bl}),n.d(e,"differenceBy",function(){return ql}),n.d(e,"differenceWith",function(){return zl}),n.d(e,"divide",function(){return Ul}),n.d(e,"drop",function(){return $l}),n.d(e,"dropRight",function(){return Vl}),n.d(e,"dropRightWhile",function(){return Wl}),n.d(e,"dropWhile",function(){return Gl}),n.d(e,"each",function(){return Kl}),n.d(e,"eachRight",function(){return tc}),n.d(e,"endsWith",function(){return ec}),n.d(e,"entries",function(){return sc}),n.d(e,"entriesIn",function(){return lc}),n.d(e,"eq",function(){return Ve}),n.d(e,"escape",function(){return fc}),n.d(e,"escapeRegExp",function(){return gc}),n.d(e,"every",function(){return yc}),n.d(e,"extend",function(){return Pn}),n.d(e,"extendWith",function(){return Ln}),n.d(e,"fill",function(){return xc}),n.d(e,"filter",function(){return Cc}),n.d(e,"find",function(){return kc}),n.d(e,"findIndex",function(){return Mc}),n.d(e,"findKey",function(){return Ic}),n.d(e,"findLast",function(){return Dc}),n.d(e,"findLastIndex",function(){return Lc}),n.d(e,"findLastKey",function(){return Nc}),n.d(e,"first",function(){return Rc}),n.d(e,"flatMap",function(){return jc}),n.d(e,"flatMapDeep",function(){return zc}),n.d(e,"flatMapDepth",function(){return Uc}),n.d(e,"flatten",function(){return Lr}),n.d(e,"flattenDeep",function(){return Vc}),n.d(e,"flattenDepth",function(){return Hc}),n.d(e,"flip",function(){return Gc}),n.d(e,"floor",function(){return Yc}),n.d(e,"flow",function(){return eu}),n.d(e,"flowRight",function(){return nu}),n.d(e,"forEach",function(){return Kl}),n.d(e,"forEachRight",function(){return tc}),n.d(e,"forIn",function(){return ru}),n.d(e,"forInRight",function(){return iu}),n.d(e,"forOwn",function(){return ou}),n.d(e,"forOwnRight",function(){return au}),n.d(e,"fromPairs",function(){return su}),n.d(e,"functions",function(){return cu}),n.d(e,"functionsIn",function(){return uu}),n.d(e,"get",function(){return Mr}),n.d(e,"groupBy",function(){return fu}),n.d(e,"gt",function(){return gu}),n.d(e,"gte",function(){return mu}),n.d(e,"has",function(){return bu}),n.d(e,"hasIn",function(){return Ns}),n.d(e,"head",function(){return Rc}),n.d(e,"identity",function(){return P}),n.d(e,"inRange",function(){return Su}),n.d(e,"includes",function(){return Au}),n.d(e,"indexOf",function(){return Ou}),n.d(e,"initial",function(){return Pu}),n.d(e,"intersection",function(){return Ru}),n.d(e,"intersectionBy",function(){return Fu}),n.d(e,"intersectionWith",function(){return Bu}),n.d(e,"invert",function(){return Uu}),n.d(e,"invertBy",function(){return Wu}),n.d(e,"invoke",function(){return Ku}),n.d(e,"invokeMap",function(){return Xu}),n.d(e,"isArguments",function(){return dn}),n.d(e,"isArray",function(){return d}),n.d(e,"isArrayBuffer",function(){return td}),n.d(e,"isArrayLike",function(){return Je}),n.d(e,"isArrayLikeObject",function(){return Sl}),n.d(e,"isBoolean",function(){return nd}),n.d(e,"isBuffer",function(){return fn.a}),n.d(e,"isDate",function(){return ad}),n.d(e,"isElement",function(){return sd}),n.d(e,"isEmpty",function(){return dd}),n.d(e,"isEqual",function(){return fd}),n.d(e,"isEqualWith",function(){return pd}),n.d(e,"isError",function(){return jr}),n.d(e,"isFinite",function(){return gd}),n.d(e,"isFunction",function(){return F}),n.d(e,"isInteger",function(){return md}),n.d(e,"isLength",function(){return Ze}),n.d(e,"isMap",function(){return ga}),n.d(e,"isMatch",function(){return vd}),n.d(e,"isMatchWith",function(){return yd}),n.d(e,"isNaN",function(){return _d}),n.d(e,"isNative",function(){return Ed}),n.d(e,"isNil",function(){return Td}),n.d(e,"isNull",function(){return Md}),n.d(e,"isNumber",function(){return wd}),n.d(e,"isObject",function(){return y}),n.d(e,"isObjectLike",function(){return i.a}),n.d(e,"isPlainObject",function(){return Rr.a}),n.d(e,"isRegExp",function(){return Od}),n.d(e,"isSafeInteger",function(){return Ld}),n.d(e,"isSet",function(){return ba}),n.d(e,"isString",function(){return Eu}),n.d(e,"isSymbol",function(){return a}),n.d(e,"isTypedArray",function(){return yn}),n.d(e,"isUndefined",function(){return Dd}),n.d(e,"isWeakMap",function(){return Rd}),n.d(e,"isWeakSet",function(){return Bd}),n.d(e,"iteratee",function(){return qd}),n.d(e,"join",function(){return Ud}),n.d(e,"kebabCase",function(){return $d}),n.d(e,"keyBy",function(){return Vd}),n.d(e,"keys",function(){return En}),n.d(e,"keysIn",function(){return On}),n.d(e,"last",function(){return jl}),n.d(e,"lastIndexOf",function(){return Yd}),n.d(e,"lodash",function(){return kt}),n.d(e,"lowerCase",function(){return Kd}),n.d(e,"lowerFirst",function(){return Xd}),n.d(e,"lt",function(){return Zd}),n.d(e,"lte",function(){return Jd}),n.d(e,"map",function(){return Bc}),n.d(e,"mapKeys",function(){return tf}),n.d(e,"mapValues",function(){return ef}),n.d(e,"matches",function(){return rf}),n.d(e,"matchesProperty",function(){return af}),n.d(e,"max",function(){return lf}),n.d(e,"maxBy",function(){return cf}),n.d(e,"mean",function(){return pf}),n.d(e,"meanBy",function(){return hf}),n.d(e,"memoize",function(){return vr}),n.d(e,"merge",function(){return gf}),n.d(e,"mergeWith",function(){return Al}),n.d(e,"method",function(){return mf}),n.d(e,"methodOf",function(){return vf}),n.d(e,"min",function(){return yf}),n.d(e,"minBy",function(){return bf}),n.d(e,"mixin",function(){return wf}),n.d(e,"multiply",function(){return _f}),n.d(e,"negate",function(){return Sf}),n.d(e,"next",function(){return Af}),n.d(e,"noop",function(){return vt}),n.d(e,"now",function(){return pl}),n.d(e,"nth",function(){return Of}),n.d(e,"nthArg",function(){return Pf}),n.d(e,"omit",function(){return Nf}),n.d(e,"omitBy",function(){return jf}),n.d(e,"once",function(){return qf}),n.d(e,"orderBy",function(){return Hf}),n.d(e,"over",function(){return Gf}),n.d(e,"overArgs",function(){return Xf}),n.d(e,"overEvery",function(){return Qf}),n.d(e,"overSome",function(){return Zf}),n.d(e,"pad",function(){return yp}),n.d(e,"padEnd",function(){return bp}),n.d(e,"padStart",function(){return wp}),n.d(e,"parseInt",function(){return Sp}),n.d(e,"partial",function(){return Ep}),n.d(e,"partialRight",function(){return Mp}),n.d(e,"partition",function(){return kp}),n.d(e,"pick",function(){return Ip}),n.d(e,"pickBy",function(){return Bf}),n.d(e,"plant",function(){return Op}),n.d(e,"property",function(){return zs}),n.d(e,"propertyOf",function(){return Pp}),n.d(e,"pull",function(){return Fp}),n.d(e,"pullAll",function(){return Rp}),n.d(e,"pullAllBy",function(){return Bp}),n.d(e,"pullAllWith",function(){return jp}),n.d(e,"pullAt",function(){return Up}),n.d(e,"random",function(){return Kp}),n.d(e,"range",function(){return th}),n.d(e,"rangeRight",function(){return eh}),n.d(e,"rearg",function(){return nh}),n.d(e,"reduce",function(){return ih}),n.d(e,"reduceRight",function(){return ah}),n.d(e,"reject",function(){return sh}),n.d(e,"remove",function(){return lh}),n.d(e,"repeat",function(){return ch}),n.d(e,"replace",function(){return uh}),n.d(e,"rest",function(){return fh}),n.d(e,"result",function(){return ph}),n.d(e,"reverse",function(){return gh}),n.d(e,"round",function(){return mh}),n.d(e,"sample",function(){return bh}),n.d(e,"sampleSize",function(){return Sh}),n.d(e,"set",function(){return Ch}),n.d(e,"setWith",function(){return Eh}),n.d(e,"shuffle",function(){return kh}),n.d(e,"size",function(){return Oh}),n.d(e,"slice",function(){return Ph}),n.d(e,"snakeCase",function(){return Lh}),n.d(e,"some",function(){return Nh}),n.d(e,"sortBy",function(){return Rh}),n.d(e,"sortedIndex",function(){return $h}),n.d(e,"sortedIndexBy",function(){return Vh}),n.d(e,"sortedIndexOf",function(){return Hh}),n.d(e,"sortedLastIndex",function(){return Wh}),n.d(e,"sortedLastIndexBy",function(){return Gh}),n.d(e,"sortedLastIndexOf",function(){return Yh}),n.d(e,"sortedUniq",function(){return Xh}),n.d(e,"sortedUniqBy",function(){return Qh}),n.d(e,"split",function(){return Jh}),n.d(e,"spread",function(){return ng}),n.d(e,"startCase",function(){return rg}),n.d(e,"startsWith",function(){return ig}),n.d(e,"stubArray",function(){return po}),n.d(e,"stubFalse",function(){return xd.a}),n.d(e,"stubObject",function(){return og}),n.d(e,"stubString",function(){return ag}),n.d(e,"stubTrue",function(){return sg}),n.d(e,"subtract",function(){return lg}),n.d(e,"sum",function(){return cg}),n.d(e,"sumBy",function(){return ug}),n.d(e,"tail",function(){return dg}),n.d(e,"take",function(){return fg}),n.d(e,"takeRight",function(){return pg}),n.d(e,"takeRightWhile",function(){return hg}),n.d(e,"takeWhile",function(){return gg}),n.d(e,"tap",function(){return mg}),n.d(e,"template",function(){return Ig}),n.d(e,"templateSettings",function(){return Sg}),n.d(e,"throttle",function(){return Pg}),n.d(e,"thru",function(){return Lg}),n.d(e,"times",function(){return Fg}),n.d(e,"toArray",function(){return kf}),n.d(e,"toFinite",function(){return k}),n.d(e,"toInteger",function(){return A}),n.d(e,"toIterator",function(){return Bg}),n.d(e,"toJSON",function(){return qg}),n.d(e,"toLength",function(){return wc}),n.d(e,"toLower",function(){return zg}),n.d(e,"toNumber",function(){return E}),n.d(e,"toPairs",function(){return sc}),n.d(e,"toPairsIn",function(){return lc}),n.d(e,"toPath",function(){return Ug}),n.d(e,"toPlainObject",function(){return El}),n.d(e,"toSafeInteger",function(){return Vg}),n.d(e,"toString",function(){return xr}),n.d(e,"toUpper",function(){return Hg}),n.d(e,"transform",function(){return Wg}),n.d(e,"trim",function(){return Xg}),n.d(e,"trimEnd",function(){return Zg}),n.d(e,"trimStart",function(){return tm}),n.d(e,"truncate",function(){return im}),n.d(e,"unary",function(){return om}),n.d(e,"unescape",function(){return cm}),n.d(e,"union",function(){return pm}),n.d(e,"unionBy",function(){return hm}),n.d(e,"unionWith",function(){return gm}),n.d(e,"uniq",function(){return mm}),n.d(e,"uniqBy",function(){return vm}),n.d(e,"uniqWith",function(){return ym}),n.d(e,"uniqueId",function(){return wm}),n.d(e,"unset",function(){return _m}),n.d(e,"unzip",function(){return Sm}),n.d(e,"unzipWith",function(){return Cm}),n.d(e,"update",function(){return Tm}),n.d(e,"updateWith",function(){return Mm}),n.d(e,"upperCase",function(){return km}),n.d(e,"upperFirst",function(){return fi}),n.d(e,"value",function(){return qg}),n.d(e,"valueOf",function(){return qg}),n.d(e,"values",function(){return Mu}),n.d(e,"valuesIn",function(){return Am}),n.d(e,"without",function(){return Im}),n.d(e,"words",function(){return qi}),n.d(e,"wrap",function(){return Om}),n.d(e,"wrapperAt",function(){return Pm}),n.d(e,"wrapperChain",function(){return Lm}),n.d(e,"wrapperCommit",function(){return ja}),n.d(e,"wrapperLodash",function(){return kt}),n.d(e,"wrapperNext",function(){return Af}),n.d(e,"wrapperPlant",function(){return Op}),n.d(e,"wrapperReverse",function(){return Dm}),n.d(e,"wrapperToIterator",function(){return Bg}),n.d(e,"wrapperValue",function(){return qg}),n.d(e,"xor",function(){return Rm}),n.d(e,"xorBy",function(){return Fm}),n.d(e,"xorWith",function(){return Bm}),n.d(e,"zip",function(){return jm}),n.d(e,"zipObject",function(){return zm}),n.d(e,"zipObjectDeep",function(){return Um}),n.d(e,"zipWith",function(){return $m}),n.d(e,"default",function(){return mv})},function(t,e,n){var r=n(28).hasOwnProperty;e.factory=function(){var t={};return{register:function(e,n){if(void 0!==t[e])throw new Error('Cannot register type "'+e+'": already exists');t[e]=n},compile:function(e,n,i){if(r(t,e.type))return(0,t[e.type])(e,n,i);if("function"!=typeof e._compile||r(e,"_compile"))throw new Error('Cannot compile node: unknown type "'+e.type+'"');return e._compile(n,i)}}}},function(t,e,n){"use strict";var r=n(49),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.a?r.a.toStringTag:void 0;var l=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i},c=Object.prototype.toString;var u=function(t){return c.call(t)},d="[object Null]",f="[object Undefined]",p=r.a?r.a.toStringTag:void 0;e.a=function(t){return null==t?void 0===t?f:d:p&&p in Object(t)?l(t):u(t)}},,,function(t,e,n){"use strict";var r=n(142),i=n(65);r.string.isString;e.name="algorithm13",e.factory=function(t,e,n,r){var o=t.DenseMatrix,a=function(t,e,n,r,i,o){var s=[];if(e===n.length-1)for(var l=0;l<r;l++)s[l]=t(i[l],o[l]);else for(var c=0;c<r;c++)s[c]=a(t,e+1,n,n[e+1],i[c],o[c]);return s};return function(t,e,n){var s,l=t._data,c=t._size,u=t._datatype,d=e._data,f=e._size,p=e._datatype,h=[];if(c.length!==f.length)throw new i(c.length,f.length);for(var g=0;g<c.length;g++){if(c[g]!==f[g])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+f+")");h[g]=c[g]}var m=n;"string"==typeof u&&u===p&&(s=u,e=r.convert(e,s),m=r.find(n,[s,s]));var v=h.length>0?a(m,0,h,h[0],l,d):[];return new o({data:v,size:h,datatype:s})}}},function(t,e,n){var r=n(317),i=n(187),o=n(162),a=n(17);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},function(t,e,n){var r=n(1312),i=n(1331),o=n(104),a=n(17),s=n(1333);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(710),i=n(380),o=n(121);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){"use strict";var r=n(13).format,i=n(1366).format,o=n(515);e.isString=function(t){return"string"==typeof t},e.endsWith=function(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e},e.format=function(t,n){if("number"==typeof t)return r(t,n);if(o(t))return i(t,n);if(function(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t))return n&&"decimal"===n.fraction?t.toString():t.s*t.n+"/"+t.d;if(Array.isArray(t))return function t(n,r){if(Array.isArray(n)){for(var i="[",o=n.length,a=0;a<o;a++)0!=a&&(i+=", "),i+=t(n[a],r);return i+="]"}return e.format(n,r)}(t,n);if(e.isString(t))return'"'+t+'"';if("function"==typeof t)return t.syntax?String(t.syntax):"function";if(t&&"object"==typeof t){if("function"==typeof t.format)return t.format(n);if(t&&t.toString()!=={}.toString())return t.toString();var a=[];for(var s in t)t.hasOwnProperty(s)&&a.push('"'+s+'": '+e.format(t[s],n));return"{"+a.join(", ")+"}"}return String(t)},e.stringify=function(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);"\\"===i?(n+=i,r++,""!==(i=e.charAt(r))&&-1!=='"\\/bfnrtu'.indexOf(i)||(n+="\\"),n+=i):n+='"'===i?'\\"':i,r++}return'"'+n+'"'},e.escape=function(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(t,e,n){var r=n(128),i=n(17),o=n(80),a="[object String]";t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&r(t)==a}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(270)),r(n(194)),r(n(580)),r(n(135)),r(n(2218))},function(t,e,n){var r;try{r=n(1)}catch(t){}r||(r=window._),t.exports=r},function(t,e,n){"use strict";var r=n(31).a.Symbol;e.a=r},function(t,e,n){var r=n(128),i=n(80),o="[object Number]";t.exports=function(t){return"number"==typeof t||i(t)&&r(t)==o}},function(t,e,n){var r=n(104),i=n(790),o=n(537);t.exports=function(t,e){return o(i(t,e,r),t+"")}},,function(t,e,n){var r=n(1281),i=n(698);t.exports=function(t,e){return null!=t&&i(t,e,r)}},,,,,,,function(t,e,n){var r=n(717);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){"use strict";var r=n(13).nearlyEqual,i=n(215);e.factory=function(t,e,n,o){var a=o("equalScalar",{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,n){return t===n||r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.eq(n)||i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return t.equals(e)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return a(t.value,e.value)},"string, string":function(t,e){return t===e}});return a}},function(t,e,n){var r;
/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */
/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,i){var o=[],a=n.document,s=o.slice,l=o.concat,c=o.push,u=o.indexOf,d={},f=d.toString,p=d.hasOwnProperty,h={},g=function(t,e){return new g.fn.init(t,e)},m=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,y=/-([\da-z])/gi,b=function(t,e){return e.toUpperCase()};function w(t){var e=!!t&&"length"in t&&t.length,n=g.type(t);return"function"!==n&&!g.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}g.fn=g.prototype={jquery:"2.2.4",constructor:g,selector:"",length:0,toArray:function(){return s.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:s.call(this)},pushStack:function(t){var e=g.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return g.each(this,t)},map:function(t){return this.pushStack(g.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},g.extend=g.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||g.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(r=t[e])&&(c&&r&&(g.isPlainObject(r)||(i=g.isArray(r)))?(i?(i=!1,o=n&&g.isArray(n)?n:[]):o=n&&g.isPlainObject(n)?n:{},a[e]=g.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},g.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===g.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!g.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==g.type(t)||t.nodeType||g.isWindow(t))return!1;if(t.constructor&&!p.call(t,"constructor")&&!p.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||p.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[f.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;(t=g.trim(t))&&(1===t.indexOf("use strict")?((e=a.createElement("script")).text=t,a.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(v,"ms-").replace(y,b)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(w(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(m,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?g.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(w(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return l.apply([],a)},guid:1,proxy:function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),g.isFunction(t))return r=s.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(s.call(arguments)))}).guid=t.guid=t.guid||g.guid++,i},now:Date.now,support:h}),"function"==typeof Symbol&&(g.fn[Symbol.iterator]=o[Symbol.iterator]),g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});var _=
/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){var e,n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,y,b,w="sizzle"+1*new Date,_=t.document,x=0,S=0,C=ot(),E=ot(),T=ot(),M=function(t,e){return t===e&&(d=!0),0},k=1<<31,A={}.hasOwnProperty,I=[],O=I.pop,P=I.push,L=I.push,D=I.slice,N=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+F+"*\\]",q=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",z=new RegExp(F+"+","g"),U=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),$=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),H=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),W=new RegExp(q),G=new RegExp("^"+B+"$"),Y={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,tt=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),nt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},rt=function(){f()};try{L.apply(I=D.call(_.childNodes),_.childNodes),I[_.childNodes.length].nodeType}catch(t){L={apply:I.length?function(t,e){P.apply(t,D.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function it(t,e,r,i){var o,s,c,u,d,h,v,y,x=e&&e.ownerDocument,S=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==S&&9!==S&&11!==S)return r;if(!i&&((e?e.ownerDocument||e:_)!==p&&f(e),e=e||p,g)){if(11!==S&&(h=Z.exec(t)))if(o=h[1]){if(9===S){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(x&&(c=x.getElementById(o))&&b(e,c)&&c.id===o)return r.push(c),r}else{if(h[2])return L.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return L.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!T[t+" "]&&(!m||!m.test(t))){if(1!==S)x=e,y=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(tt,"\\$&"):e.setAttribute("id",u=w),s=(v=a(t)).length,d=G.test(u)?"#"+u:"[id='"+u+"']";s--;)v[s]=d+" "+gt(v[s]);y=v.join(","),x=J.test(t)&&pt(e.parentNode)||e}if(y)try{return L.apply(r,x.querySelectorAll(y)),r}catch(t){}finally{u===w&&e.removeAttribute("id")}}}return l(t.replace(U,"$1"),e,r,i)}function ot(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function at(t){return t[w]=!0,t}function st(t){var e=p.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function ct(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||k)-(~t.sourceIndex||k);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ut(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ft(t){return at(function(e){return e=+e,at(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function pt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=it.support={},o=it.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=it.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:_;return a!==p&&9===a.nodeType&&a.documentElement?(h=(p=a).documentElement,g=!o(p),(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=st(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=st(function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=st(function(t){return h.appendChild(t).id=w,!p.getElementsByName||!p.getElementsByName(w).length}),n.getById?(r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}},r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}}):(delete r.find.ID,r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=Q.test(p.querySelectorAll))&&(st(function(t){h.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+R+")"),t.querySelectorAll("[id~="+w+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),st(function(t){var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Q.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&st(function(t){n.disconnectedMatch=y.call(t,"div"),y.call(t,"[s!='']:x"),v.push("!=",q)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=Q.test(h.compareDocumentPosition),b=e||Q.test(h.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},M=e?function(t,e){if(t===e)return d=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===p||t.ownerDocument===_&&b(_,t)?-1:e===p||e.ownerDocument===_&&b(_,e)?1:u?N(u,t)-N(u,e):0:4&r?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===p?-1:e===p?1:i?-1:o?1:u?N(u,t)-N(u,e):0;if(i===o)return ct(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ct(a[r],s[r]):a[r]===_?-1:s[r]===_?1:0},p):p},it.matches=function(t,e){return it(t,null,null,e)},it.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&f(t),e=e.replace(H,"='$1']"),n.matchesSelector&&g&&!T[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return it(e,p,null,[t]).length>0},it.contains=function(t,e){return(t.ownerDocument||t)!==p&&f(t),b(t,e)},it.attr=function(t,e){(t.ownerDocument||t)!==p&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&A.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},it.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},it.uniqueSort=function(t){var e,r=[],i=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(M),d){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return u=null,t},i=it.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=it.selectors={cacheLength:50,createPseudo:at,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||it.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&it.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&C(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=it.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(z," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,f,p,h,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(m){if(o){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===t&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&y){for(b=(p=(c=(u=(d=(f=m)[w]||(f[w]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===x&&c[1])&&c[2],f=p&&m.childNodes[p];f=++p&&f&&f[g]||(b=p=0)||h.pop();)if(1===f.nodeType&&++b&&f===e){u[t]=[x,p,b];break}}else if(y&&(b=p=(c=(u=(d=(f=e)[w]||(f[w]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===x&&c[1]),!1===b)for(;(f=++p&&f&&f[g]||(b=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&((u=(d=f[w]||(f[w]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]=[x,b]),f!==e)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||it.error("unsupported pseudo: "+t);return i[w]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=N(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:at(function(t){var e=[],n=[],r=s(t.replace(U,"$1"));return r[w]?at(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:at(function(t){return function(e){return it(t,e).length>0}}),contains:at(function(t){return t=t.replace(et,nt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:at(function(t){return G.test(t||"")||it.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===h},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return X.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,n){return[n<0?n+e:n]}),even:ft(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ft(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ft(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:ft(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ut(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=dt(e);function ht(){}function gt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function mt(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=S++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,l,c,u=[x,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if((s=(l=(c=e[w]||(e[w]={}))[e.uniqueID]||(c[e.uniqueID]={}))[r])&&s[0]===x&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=t(e,n,a))return!0}}}function vt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function yt(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function bt(t,e,n,r,i,o){return r&&!r[w]&&(r=bt(r)),i&&!i[w]&&(i=bt(i,o)),at(function(o,a,s,l){var c,u,d,f=[],p=[],h=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)it(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?g:yt(g,f,t,s,l),v=n?i||(o?t:h||r)?[]:a:m;if(n&&n(m,v,s,l),r)for(c=yt(v,p),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[p[u]]=!(m[p[u]]=d));if(o){if(i||t){if(i){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(m[u]=d);i(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=i?N(o,d):f[u])>-1&&(o[c]=!(a[c]=d))}}else v=yt(v===a?v.splice(h,v.length):v),i?i(null,a,v,l):L.apply(a,v)})}function wt(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],l=a?1:0,u=mt(function(t){return t===e},s,!0),d=mt(function(t){return N(e,t)>-1},s,!0),f=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?u(t,n,r):d(t,n,r));return e=null,i}];l<o;l++)if(n=r.relative[t[l].type])f=[mt(vt(f),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[w]){for(i=++l;i<o&&!r.relative[t[i].type];i++);return bt(l>1&&vt(f),l>1&&gt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(U,"$1"),n,l<i&&wt(t.slice(l,i)),i<o&&wt(t=t.slice(i)),i<o&&gt(t))}f.push(n)}return vt(f)}return ht.prototype=r.filters=r.pseudos,r.setFilters=new ht,a=it.tokenize=function(t,e){var n,i,o,a,s,l,c,u=E[t+" "];if(u)return e?0:u.slice(0);for(s=t,l=[],c=r.preFilter;s;){for(a in n&&!(i=$.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=V.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(i=Y[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?it.error(t):E(t,l).slice(0)},s=it.compile=function(t,e){var n,i=[],o=[],s=T[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=wt(e[n]))[w]?i.push(s):o.push(s);(s=T(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,l,u){var d,h,m,v=0,y="0",b=o&&[],w=[],_=c,S=o||i&&r.find.TAG("*",u),C=x+=null==_?1:Math.random()||.1,E=S.length;for(u&&(c=a===p||a||u);y!==E&&null!=(d=S[y]);y++){if(i&&d){for(h=0,a||d.ownerDocument===p||(f(d),s=!g);m=t[h++];)if(m(d,a||p,s)){l.push(d);break}u&&(x=C)}n&&((d=!m&&d)&&v--,o&&b.push(d))}if(v+=y,n&&y!==v){for(h=0;m=e[h++];)m(b,w,a,s);if(o){if(v>0)for(;y--;)b[y]||w[y]||(w[y]=O.call(l));w=yt(w)}L.apply(l,w),u&&!o&&w.length>0&&v+e.length>1&&it.uniqueSort(l)}return u&&(x=C,c=_),b};return n?at(o):o}(o,i))).selector=t}return s},l=it.select=function(t,e,i,o){var l,c,u,d,f,p="function"==typeof t&&t,h=!o&&a(t=p.selector||t);if(i=i||[],1===h.length){if((c=h[0]=h[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&n.getById&&9===e.nodeType&&g&&r.relative[c[1].type]){if(!(e=(r.find.ID(u.matches[0].replace(et,nt),e)||[])[0]))return i;p&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(l=Y.needsContext.test(t)?0:c.length;l--&&(u=c[l],!r.relative[d=u.type]);)if((f=r.find[d])&&(o=f(u.matches[0].replace(et,nt),J.test(c[0].type)&&pt(e.parentNode)||e))){if(c.splice(l,1),!(t=o.length&&gt(c)))return L.apply(i,o),i;break}}return(p||s(t,h))(o,e,!g,i,!e||J.test(t)&&pt(e.parentNode)||e),i},n.sortStable=w.split("").sort(M).join("")===w,n.detectDuplicates=!!d,f(),n.sortDetached=st(function(t){return 1&t.compareDocumentPosition(p.createElement("div"))}),st(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||lt("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&st(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||lt("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),st(function(t){return null==t.getAttribute("disabled")})||lt(R,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),it}(n);g.find=_,g.expr=_.selectors,g.expr[":"]=g.expr.pseudos,g.uniqueSort=g.unique=_.uniqueSort,g.text=_.getText,g.isXMLDoc=_.isXML,g.contains=_.contains;var x=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&g(t).is(n))break;r.push(t)}return r},S=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},C=g.expr.match.needsContext,E=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,T=/^.[^:#\[\.,]*$/;function M(t,e,n){if(g.isFunction(e))return g.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return g.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(T.test(e))return g.filter(e,t,n);e=g.filter(e,t)}return g.grep(t,function(t){return u.call(e,t)>-1!==n})}g.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?g.find.matchesSelector(r,t)?[r]:[]:g.find.matches(t,g.grep(e,function(t){return 1===t.nodeType}))},g.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(g(t).filter(function(){for(e=0;e<n;e++)if(g.contains(i[e],this))return!0}));for(e=0;e<n;e++)g.find(t,i[e],r);return(r=this.pushStack(n>1?g.unique(r):r)).selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&C.test(t)?g(t):t||[],!1).length}});var k,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(g.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||k,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:A.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof g?e[0]:e,g.merge(this,g.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),E.test(r[1])&&g.isPlainObject(e))for(r in e)g.isFunction(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=a.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=a,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):g.isFunction(t)?void 0!==n.ready?n.ready(t):t(g):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),g.makeArray(t,this))}).prototype=g.fn,k=g(a);var I=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}g.fn.extend({has:function(t){var e=g(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(g.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=C.test(t)||"string"!=typeof t?g(t,e||this.context):0;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&g.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?g.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?u.call(g(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),g.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return x(t,"parentNode")},parentsUntil:function(t,e,n){return x(t,"parentNode",n)},next:function(t){return P(t,"nextSibling")},prev:function(t){return P(t,"previousSibling")},nextAll:function(t){return x(t,"nextSibling")},prevAll:function(t){return x(t,"previousSibling")},nextUntil:function(t,e,n){return x(t,"nextSibling",n)},prevUntil:function(t,e,n){return x(t,"previousSibling",n)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return t.contentDocument||g.merge([],t.childNodes)}},function(t,e){g.fn[t]=function(n,r){var i=g.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=g.filter(r,i)),this.length>1&&(O[t]||g.uniqueSort(i),I.test(t)&&i.reverse()),this.pushStack(i)}});var L,D=/\S+/g;function N(){a.removeEventListener("DOMContentLoaded",N),n.removeEventListener("load",N),g.ready()}g.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return g.each(t.match(D)||[],function(t,n){e[n]=!0}),e}(t):g.extend({},t);var e,n,r,i,o=[],a=[],s=-1,l=function(){for(i=t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){g.each(n,function(n,r){g.isFunction(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==g.type(r)&&e(r)})}(arguments),n&&!e&&l()),this},remove:function(){return g.each(arguments,function(t,e){for(var n;(n=g.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?g.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},g.extend({Deferred:function(t){var e=[["resolve","done",g.Callbacks("once memory"),"resolved"],["reject","fail",g.Callbacks("once memory"),"rejected"],["notify","progress",g.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return g.Deferred(function(n){g.each(e,function(e,o){var a=g.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&g.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?g.extend(t,r):r}},i={};return r.pipe=r.then,g.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=s.call(arguments),a=o.length,l=1!==a||t&&g.isFunction(t.promise)?a:0,c=1===l?t:g.Deferred(),u=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?s.call(arguments):i,r===e?c.notifyWith(n,r):--l||c.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&g.isFunction(o[i].promise)?o[i].promise().progress(u(i,n,e)).done(u(i,r,o)).fail(c.reject):--l;return l||c.resolveWith(r,o),c.promise()}}),g.fn.ready=function(t){return g.ready.promise().done(t),this},g.extend({isReady:!1,readyWait:1,holdReady:function(t){t?g.readyWait++:g.ready(!0)},ready:function(t){(!0===t?--g.readyWait:g.isReady)||(g.isReady=!0,!0!==t&&--g.readyWait>0||(L.resolveWith(a,[g]),g.fn.triggerHandler&&(g(a).triggerHandler("ready"),g(a).off("ready"))))}}),g.ready.promise=function(t){return L||(L=g.Deferred(),"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(g.ready):(a.addEventListener("DOMContentLoaded",N),n.addEventListener("load",N))),L.promise(t)},g.ready.promise();var R=function(t,e,n,r,i,o,a){var s=0,l=t.length,c=null==n;if("object"===g.type(n))for(s in i=!0,n)R(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g.isFunction(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(g(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):l?e(t[0],n):o},F=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function B(){this.expando=g.expando+B.uid++}B.uid=1,B.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!F(t))return{};var e=t[this.expando];return e||(e={},F(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[e]=n;else for(r in e)i[r]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?void 0!==(r=this.get(t,e))?r:this.get(t,g.camelCase(e)):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{g.isArray(e)?r=e.concat(e.map(g.camelCase)):(i=g.camelCase(e),r=e in o?[e,i]:(r=i)in o?[r]:r.match(D)||[]),n=r.length;for(;n--;)delete o[r[n]]}(void 0===e||g.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!g.isEmptyObject(e)}};var j=new B,q=new B,z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/[A-Z]/g;function $(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(U,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:z.test(n)?g.parseJSON(n):n)}catch(t){}q.set(t,e,n)}else n=void 0;return n}g.extend({hasData:function(t){return q.hasData(t)||j.hasData(t)},data:function(t,e,n){return q.access(t,e,n)},removeData:function(t,e){q.remove(t,e)},_data:function(t,e,n){return j.access(t,e,n)},_removeData:function(t,e){j.remove(t,e)}}),g.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=q.get(o),1===o.nodeType&&!j.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=g.camelCase(r.slice(5)),$(o,r,i[r]));j.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){q.set(this,t)}):R(this,function(e){var n,r;if(o&&void 0===e)return void 0!==(n=q.get(o,t)||q.get(o,t.replace(U,"-$&").toLowerCase()))?n:(r=g.camelCase(t),void 0!==(n=q.get(o,r))?n:void 0!==(n=$(o,r,void 0))?n:void 0);r=g.camelCase(t),this.each(function(){var n=q.get(this,r);q.set(this,r,e),t.indexOf("-")>-1&&void 0!==n&&q.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){q.remove(this,t)})}}),g.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=j.get(t,e),n&&(!r||g.isArray(n)?r=j.access(t,e,g.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=g.queue(t,e),r=n.length,i=n.shift(),o=g._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){g.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return j.get(t,n)||j.access(t,n,{empty:g.Callbacks("once memory").add(function(){j.remove(t,[e+"queue",n])})})}}),g.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?g.queue(this[0],t):void 0===e?this:this.each(function(){var n=g.queue(this,t,e);g._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&g.dequeue(this,t)})},dequeue:function(t){return this.each(function(){g.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=g.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=j.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),W=["Top","Right","Bottom","Left"],G=function(t,e){return t=e||t,"none"===g.css(t,"display")||!g.contains(t.ownerDocument,t)};function Y(t,e,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return g.css(t,e,"")},l=s(),c=n&&n[3]||(g.cssNumber[e]?"":"px"),u=(g.cssNumber[e]||"px"!==c&&+l)&&H.exec(g.css(t,e));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do{u/=o=o||".5",g.style(t,e,u+c)}while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var K=/^(?:checkbox|radio)$/i,X=/<([\w:-]+)/,Q=/^$|\/(?:java|ecma)script/i,Z={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function J(t,e){var n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&g.nodeName(t,e)?g.merge([t],n):n}function tt(t,e){for(var n=0,r=t.length;n<r;n++)j.set(t[n],"globalEval",!e||j.get(e[n],"globalEval"))}Z.optgroup=Z.option,Z.tbody=Z.tfoot=Z.colgroup=Z.caption=Z.thead,Z.th=Z.td;var et=/<|&#?\w+;/;function nt(t,e,n,r,i){for(var o,a,s,l,c,u,d=e.createDocumentFragment(),f=[],p=0,h=t.length;p<h;p++)if((o=t[p])||0===o)if("object"===g.type(o))g.merge(f,o.nodeType?[o]:o);else if(et.test(o)){for(a=a||d.appendChild(e.createElement("div")),s=(X.exec(o)||["",""])[1].toLowerCase(),l=Z[s]||Z._default,a.innerHTML=l[1]+g.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;g.merge(f,a.childNodes),(a=d.firstChild).textContent=""}else f.push(e.createTextNode(o));for(d.textContent="",p=0;o=f[p++];)if(r&&g.inArray(o,r)>-1)i&&i.push(o);else if(c=g.contains(o.ownerDocument,o),a=J(d.appendChild(o),"script"),c&&tt(a),n)for(u=0;o=a[u++];)Q.test(o.type||"")&&n.push(o);return d}!function(){var t=a.createDocumentFragment().appendChild(a.createElement("div")),e=a.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),h.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var rt=/^key/,it=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ot=/^([^.]*)(?:\.(.+)|)/;function at(){return!0}function st(){return!1}function lt(){try{return a.activeElement}catch(t){}}function ct(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)ct(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=st;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return g().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=g.guid++)),t.each(function(){g.event.add(this,e,i,r,n)})}g.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,c,u,d,f,p,h,m,v=j.get(t);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=g.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(e){return void 0!==g&&g.event.triggered!==e.type?g.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(D)||[""]).length;c--;)p=m=(s=ot.exec(e[c])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=g.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=g.event.special[p]||{},u=g.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&g.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=l[p])||((f=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(p,a)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,u):f.push(u),g.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,c,u,d,f,p,h,m,v=j.hasData(t)&&j.get(t);if(v&&(l=v.events)){for(c=(e=(e||"").match(D)||[""]).length;c--;)if(p=m=(s=ot.exec(e[c])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=g.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)u=f[o],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(f.splice(o,1),u.selector&&f.delegateCount--,d.remove&&d.remove.call(t,u));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(t,h,v.handle)||g.removeEvent(t,p,v.handle),delete l[p])}else for(p in l)g.event.remove(t,p+e[c],n,r,!0);g.isEmptyObject(l)&&j.remove(t,"handle events")}},dispatch:function(t){t=g.event.fix(t);var e,n,r,i,o,a,l=s.call(arguments),c=(j.get(this,"events")||{})[t.type]||[],u=g.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=g.event.handlers.call(this,t,c),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0!==(r=((g.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(t.result=r)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(r=[],n=0;n<s;n++)void 0===r[i=(o=e[n]).selector+" "]&&(r[i]=o.needsContext?g(i,this).index(l)>-1:g.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(r=(n=t.target.ownerDocument||a).documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[g.expando])return t;var e,n,r,i=t.type,o=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=it.test(i)?this.mouseHooks:rt.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,t=new g.Event(o),e=r.length;e--;)t[n=r[e]]=o[n];return t.target||(t.target=a),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==lt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===lt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g.nodeName(this,"input"))return this.click(),!1},_default:function(t){return g.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},g.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},g.Event=function(t,e){if(!(this instanceof g.Event))return new g.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?at:st):this.type=t,e&&g.extend(this,e),this.timeStamp=t&&t.timeStamp||g.now(),this[g.expando]=!0},g.Event.prototype={constructor:g.Event,isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=at,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=at,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=at,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){g.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||g.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),g.fn.extend({on:function(t,e,n,r){return ct(this,t,e,n,r)},one:function(t,e,n,r){return ct(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,g(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=st),this.each(function(){g.event.remove(this,t,n,e)})}});var ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,dt=/<script|<style|<link/i,ft=/checked\s*(?:[^=]|=\s*.checked.)/i,pt=/^true\/(.*)/,ht=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function gt(t,e){return g.nodeName(t,"table")&&g.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function mt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function vt(t){var e=pt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function yt(t,e){var n,r,i,o,a,s,l,c;if(1===e.nodeType){if(j.hasData(t)&&(o=j.access(t),a=j.set(e,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)g.event.add(e,i,c[i][n]);q.hasData(t)&&(s=q.access(t),l=g.extend({},s),q.set(e,l))}}function bt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&K.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function wt(t,e,n,r){e=l.apply([],e);var i,o,a,s,c,u,d=0,f=t.length,p=f-1,m=e[0],v=g.isFunction(m);if(v||f>1&&"string"==typeof m&&!h.checkClone&&ft.test(m))return t.each(function(i){var o=t.eq(i);v&&(e[0]=m.call(this,i,o.html())),wt(o,e,n,r)});if(f&&(o=(i=nt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=g.map(J(i,"script"),mt)).length;d<f;d++)c=i,d!==p&&(c=g.clone(c,!0,!0),s&&g.merge(a,J(c,"script"))),n.call(t[d],c,d);if(s)for(u=a[a.length-1].ownerDocument,g.map(a,vt),d=0;d<s;d++)c=a[d],Q.test(c.type||"")&&!j.access(c,"globalEval")&&g.contains(u,c)&&(c.src?g._evalUrl&&g._evalUrl(c.src):g.globalEval(c.textContent.replace(ht,"")))}return t}function _t(t,e,n){for(var r,i=e?g.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||g.cleanData(J(r)),r.parentNode&&(n&&g.contains(r.ownerDocument,r)&&tt(J(r,"script")),r.parentNode.removeChild(r));return t}g.extend({htmlPrefilter:function(t){return t.replace(ut,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),l=g.contains(t.ownerDocument,t);if(!(h.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||g.isXMLDoc(t)))for(a=J(s),r=0,i=(o=J(t)).length;r<i;r++)bt(o[r],a[r]);if(e)if(n)for(o=o||J(t),a=a||J(s),r=0,i=o.length;r<i;r++)yt(o[r],a[r]);else yt(t,s);return(a=J(s,"script")).length>0&&tt(a,!l&&J(t,"script")),s},cleanData:function(t){for(var e,n,r,i=g.event.special,o=0;void 0!==(n=t[o]);o++)if(F(n)){if(e=n[j.expando]){if(e.events)for(r in e.events)i[r]?g.event.remove(n,r):g.removeEvent(n,r,e.handle);n[j.expando]=void 0}n[q.expando]&&(n[q.expando]=void 0)}}}),g.fn.extend({domManip:wt,detach:function(t){return _t(this,t,!0)},remove:function(t){return _t(this,t)},text:function(t){return R(this,function(t){return void 0===t?g.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return wt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||gt(this,t).appendChild(t)})},prepend:function(){return wt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=gt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return wt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return wt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(g.cleanData(J(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return g.clone(this,t,e)})},html:function(t){return R(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!dt.test(t)&&!Z[(X.exec(t)||["",""])[1].toLowerCase()]){t=g.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(g.cleanData(J(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return wt(this,arguments,function(e){var n=this.parentNode;g.inArray(this,t)<0&&(g.cleanData(J(this)),n&&n.replaceChild(e,this))},t)}}),g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){g.fn[t]=function(t){for(var n,r=[],i=g(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),g(i[a])[e](n),c.apply(r,n.get());return this.pushStack(r)}});var xt,St={HTML:"block",BODY:"block"};function Ct(t,e){var n=g(e.createElement(t)).appendTo(e.body),r=g.css(n[0],"display");return n.detach(),r}function Et(t){var e=a,n=St[t];return n||("none"!==(n=Ct(t,e))&&n||((e=(xt=(xt||g("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),n=Ct(t,e),xt.detach()),St[t]=n),n}var Tt=/^margin/,Mt=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),kt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},At=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i},It=a.documentElement;function Ot(t,e,n){var r,i,o,a,s=t.style;return""!==(a=(n=n||kt(t))?n.getPropertyValue(e)||n[e]:void 0)&&void 0!==a||g.contains(t.ownerDocument,t)||(a=g.style(t,e)),n&&!h.pixelMarginRight()&&Mt.test(a)&&Tt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0!==a?a+"":a}function Pt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){var t,e,r,i,o=a.createElement("div"),s=a.createElement("div");function l(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",It.appendChild(o);var a=n.getComputedStyle(s);t="1%"!==a.top,i="2px"===a.marginLeft,e="4px"===a.width,s.style.marginRight="50%",r="4px"===a.marginRight,It.removeChild(o)}s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(s),g.extend(h,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==e&&l(),e},pixelMarginRight:function(){return null==e&&l(),r},reliableMarginLeft:function(){return null==e&&l(),i},reliableMarginRight:function(){var t,e=s.appendChild(a.createElement("div"));return e.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",s.style.width="1px",It.appendChild(o),t=!parseFloat(n.getComputedStyle(e).marginRight),It.removeChild(o),s.removeChild(e),t}}))}();var Lt=/^(none|table(?!-c[ea]).+)/,Dt={position:"absolute",visibility:"hidden",display:"block"},Nt={letterSpacing:"0",fontWeight:"400"},Rt=["Webkit","O","Moz","ms"],Ft=a.createElement("div").style;function Bt(t){if(t in Ft)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Rt.length;n--;)if((t=Rt[n]+e)in Ft)return t}function jt(t,e,n){var r=H.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function qt(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=g.css(t,n+W[o],!0,i)),r?("content"===n&&(a-=g.css(t,"padding"+W[o],!0,i)),"margin"!==n&&(a-=g.css(t,"border"+W[o]+"Width",!0,i))):(a+=g.css(t,"padding"+W[o],!0,i),"padding"!==n&&(a+=g.css(t,"border"+W[o]+"Width",!0,i)));return a}function zt(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=kt(t),a="border-box"===g.css(t,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Ot(t,e,o))<0||null==i)&&(i=t.style[e]),Mt.test(i))return i;r=a&&(h.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+qt(t,e,n||(a?"border":"content"),r,o)+"px"}function Ut(t,e){for(var n,r,i,o=[],a=0,s=t.length;a<s;a++)(r=t[a]).style&&(o[a]=j.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&G(r)&&(o[a]=j.access(r,"olddisplay",Et(r.nodeName)))):(i=G(r),"none"===n&&i||j.set(r,"olddisplay",i?n:g.css(r,"display"))));for(a=0;a<s;a++)(r=t[a]).style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function $t(t,e,n,r,i){return new $t.prototype.init(t,e,n,r,i)}g.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ot(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=g.camelCase(e),l=t.style;if(e=g.cssProps[s]||(g.cssProps[s]=Bt(s)||s),a=g.cssHooks[e]||g.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e];"string"===(o=typeof n)&&(i=H.exec(n))&&i[1]&&(n=Y(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(g.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l[e]=n))}},css:function(t,e,n,r){var i,o,a,s=g.camelCase(e);return e=g.cssProps[s]||(g.cssProps[s]=Bt(s)||s),(a=g.cssHooks[e]||g.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Ot(t,e,r)),"normal"===i&&e in Nt&&(i=Nt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),g.each(["height","width"],function(t,e){g.cssHooks[e]={get:function(t,n,r){if(n)return Lt.test(g.css(t,"display"))&&0===t.offsetWidth?At(t,Dt,function(){return zt(t,e,r)}):zt(t,e,r)},set:function(t,n,r){var i,o=r&&kt(t),a=r&&qt(t,e,r,"border-box"===g.css(t,"boxSizing",!1,o),o);return a&&(i=H.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=g.css(t,e)),jt(0,n,a)}}}),g.cssHooks.marginLeft=Pt(h.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Ot(t,"marginLeft"))||t.getBoundingClientRect().left-At(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),g.cssHooks.marginRight=Pt(h.reliableMarginRight,function(t,e){if(e)return At(t,{display:"inline-block"},Ot,[t,"marginRight"])}),g.each({margin:"",padding:"",border:"Width"},function(t,e){g.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+W[r]+e]=o[r]||o[r-2]||o[0];return i}},Tt.test(t)||(g.cssHooks[t+e].set=jt)}),g.fn.extend({css:function(t,e){return R(this,function(t,e,n){var r,i,o={},a=0;if(g.isArray(e)){for(r=kt(t),i=e.length;a<i;a++)o[e[a]]=g.css(t,e[a],!1,r);return o}return void 0!==n?g.style(t,e,n):g.css(t,e)},t,e,arguments.length>1)},show:function(){return Ut(this,!0)},hide:function(){return Ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){G(this)?g(this).show():g(this).hide()})}}),g.Tween=$t,$t.prototype={constructor:$t,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||g.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(g.cssNumber[n]?"":"px")},cur:function(){var t=$t.propHooks[this.prop];return t&&t.get?t.get(this):$t.propHooks._default.get(this)},run:function(t){var e,n=$t.propHooks[this.prop];return this.options.duration?this.pos=e=g.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):$t.propHooks._default.set(this),this}},$t.prototype.init.prototype=$t.prototype,$t.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=g.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){g.fx.step[t.prop]?g.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[g.cssProps[t.prop]]&&!g.cssHooks[t.prop]?t.elem[t.prop]=t.now:g.style(t.elem,t.prop,t.now+t.unit)}}},$t.propHooks.scrollTop=$t.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},g.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},g.fx=$t.prototype.init,g.fx.step={};var Vt,Ht,Wt=/^(?:toggle|show|hide)$/,Gt=/queueHooks$/;function Yt(){return n.setTimeout(function(){Vt=void 0}),Vt=g.now()}function Kt(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=W[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function Xt(t,e,n){for(var r,i=(Qt.tweeners[e]||[]).concat(Qt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function Qt(t,e,n){var r,i,o=0,a=Qt.prefilters.length,s=g.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=Vt||Yt(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(t,[c,r,n]),r<1&&a?n:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:g.extend({},e),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},n),originalProperties:e,originalOptions:n,startTime:Vt||Yt(),duration:n.duration,tweens:[],createTween:function(e,n){var r=g.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),u=c.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=g.camelCase(n)],o=t[n],g.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=g.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(u,c.opts.specialEasing);o<a;o++)if(r=Qt.prefilters[o].call(c,t,u,c.opts))return g.isFunction(r.stop)&&(g._queueHooks(c.elem,c.opts.queue).stop=g.proxy(r.stop,r)),r;return g.map(u,Xt,c),g.isFunction(c.opts.start)&&c.opts.start.call(t,c),g.fx.timer(g.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}g.Animation=g.extend(Qt,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return Y(n.elem,t,H.exec(e),n),n}]},tweener:function(t,e){g.isFunction(t)?(e=t,t=["*"]):t=t.match(D);for(var n,r=0,i=t.length;r<i;r++)n=t[r],Qt.tweeners[n]=Qt.tweeners[n]||[],Qt.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,l,c,u=this,d={},f=t.style,p=t.nodeType&&G(t),h=j.get(t,"fxshow");for(r in n.queue||(null==(s=g._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,g.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(c=g.css(t,"display"))?j.get(t,"olddisplay")||Et(t.nodeName):c)&&"none"===g.css(t,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",u.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),e)if(i=e[r],Wt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!h||void 0===h[r])continue;p=!0}d[r]=h&&h[r]||g.style(t,r)}else c=void 0;if(g.isEmptyObject(d))"inline"===("none"===c?Et(t.nodeName):c)&&(f.display=c);else for(r in h?"hidden"in h&&(p=h.hidden):h=j.access(t,"fxshow",{}),o&&(h.hidden=!p),p?g(t).show():u.done(function(){g(t).hide()}),u.done(function(){var e;for(e in j.remove(t,"fxshow"),d)g.style(t,e,d[e])}),d)a=Xt(p?h[r]:0,r,u),r in h||(h[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],prefilter:function(t,e){e?Qt.prefilters.unshift(t):Qt.prefilters.push(t)}}),g.speed=function(t,e,n){var r=t&&"object"==typeof t?g.extend({},t):{complete:n||!n&&e||g.isFunction(t)&&t,duration:t,easing:n&&e||e&&!g.isFunction(e)&&e};return r.duration=g.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in g.fx.speeds?g.fx.speeds[r.duration]:g.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g.isFunction(r.old)&&r.old.call(this),r.queue&&g.dequeue(this,r.queue)},r},g.fn.extend({fadeTo:function(t,e,n,r){return this.filter(G).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=g.isEmptyObject(t),o=g.speed(e,n,r),a=function(){var e=Qt(this,g.extend({},t),o);(i||j.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=g.timers,a=j.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Gt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||g.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=j.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=g.timers,a=r?r.length:0;for(n.finish=!0,g.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),g.each(["toggle","show","hide"],function(t,e){var n=g.fn[e];g.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(Kt(e,!0),t,r,i)}}),g.each({slideDown:Kt("show"),slideUp:Kt("hide"),slideToggle:Kt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){g.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),g.timers=[],g.fx.tick=function(){var t,e=0,n=g.timers;for(Vt=g.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||g.fx.stop(),Vt=void 0},g.fx.timer=function(t){g.timers.push(t),t()?g.fx.start():g.timers.pop()},g.fx.interval=13,g.fx.start=function(){Ht||(Ht=n.setInterval(g.fx.tick,g.fx.interval))},g.fx.stop=function(){n.clearInterval(Ht),Ht=null},g.fx.speeds={slow:600,fast:200,_default:400},g.fn.delay=function(t,e){return t=g.fx&&g.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,r){var i=n.setTimeout(e,t);r.stop=function(){n.clearTimeout(i)}})},function(){var t=a.createElement("input"),e=a.createElement("select"),n=e.appendChild(a.createElement("option"));t.type="checkbox",h.checkOn=""!==t.value,h.optSelected=n.selected,e.disabled=!0,h.optDisabled=!n.disabled,(t=a.createElement("input")).value="t",t.type="radio",h.radioValue="t"===t.value}();var Zt,Jt=g.expr.attrHandle;g.fn.extend({attr:function(t,e){return R(this,g.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){g.removeAttr(this,t)})}}),g.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?g.prop(t,e,n):(1===o&&g.isXMLDoc(t)||(e=e.toLowerCase(),i=g.attrHooks[e]||(g.expr.match.bool.test(e)?Zt:void 0)),void 0!==n?null===n?void g.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=g.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!h.radioValue&&"radio"===e&&g.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(D);if(o&&1===t.nodeType)for(;n=o[i++];)r=g.propFix[n]||n,g.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)}}),Zt={set:function(t,e,n){return!1===e?g.removeAttr(t,n):t.setAttribute(n,n),n}},g.each(g.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Jt[e]||g.find.attr;Jt[e]=function(t,e,r){var i,o;return r||(o=Jt[e],Jt[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,Jt[e]=o),i}});var te=/^(?:input|select|textarea|button)$/i,ee=/^(?:a|area)$/i;g.fn.extend({prop:function(t,e){return R(this,g.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[g.propFix[t]||t]})}}),g.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&g.isXMLDoc(t)||(e=g.propFix[e]||e,i=g.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=g.find.attr(t,"tabindex");return e?parseInt(e,10):te.test(t.nodeName)||ee.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(g.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});var ne=/[\t\r\n\f]/g;function re(t){return t.getAttribute&&t.getAttribute("class")||""}g.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,l=0;if(g.isFunction(t))return this.each(function(e){g(this).addClass(t.call(this,e,re(this)))});if("string"==typeof t&&t)for(e=t.match(D)||[];n=this[l++];)if(i=re(n),r=1===n.nodeType&&(" "+i+" ").replace(ne," ")){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=g.trim(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,l=0;if(g.isFunction(t))return this.each(function(e){g(this).removeClass(t.call(this,e,re(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(D)||[];n=this[l++];)if(i=re(n),r=1===n.nodeType&&(" "+i+" ").replace(ne," ")){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=g.trim(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):g.isFunction(t)?this.each(function(n){g(this).toggleClass(t.call(this,n,re(this),e),e)}):this.each(function(){var e,r,i,o;if("string"===n)for(r=0,i=g(this),o=t.match(D)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||((e=re(this))&&j.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":j.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+re(n)+" ").replace(ne," ").indexOf(e)>-1)return!0;return!1}});var ie=/\r/g,oe=/[\x20\t\r\n\f]+/g;g.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=g.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,g(this).val()):t)?i="":"number"==typeof i?i+="":g.isArray(i)&&(i=g.map(i,function(t){return null==t?"":t+""})),(e=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=g.valHooks[i.type]||g.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ie,""):null==n?"":n:void 0}}),g.extend({valHooks:{option:{get:function(t){var e=g.find.attr(t,"value");return null!=e?e:g.trim(g.text(t)).replace(oe," ")}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(h.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!g.nodeName(n.parentNode,"optgroup"))){if(e=g(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=g.makeArray(e),a=i.length;a--;)((r=i[a]).selected=g.inArray(g.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(t,e){if(g.isArray(e))return t.checked=g.inArray(g(t).val(),e)>-1}},h.checkOn||(g.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ae=/^(?:focusinfocus|focusoutblur)$/;g.extend(g.event,{trigger:function(t,e,r,i){var o,s,l,c,u,d,f,h=[r||a],m=p.call(t,"type")?t.type:t,v=p.call(t,"namespace")?t.namespace.split("."):[];if(s=l=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!ae.test(m+g.event.triggered)&&(m.indexOf(".")>-1&&(m=(v=m.split(".")).shift(),v.sort()),u=m.indexOf(":")<0&&"on"+m,(t=t[g.expando]?t:new g.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:g.makeArray(e,[t]),f=g.event.special[m]||{},i||!f.trigger||!1!==f.trigger.apply(r,e))){if(!i&&!f.noBubble&&!g.isWindow(r)){for(c=f.delegateType||m,ae.test(c+m)||(s=s.parentNode);s;s=s.parentNode)h.push(s),l=s;l===(r.ownerDocument||a)&&h.push(l.defaultView||l.parentWindow||n)}for(o=0;(s=h[o++])&&!t.isPropagationStopped();)t.type=o>1?c:f.bindType||m,(d=(j.get(s,"events")||{})[t.type]&&j.get(s,"handle"))&&d.apply(s,e),(d=u&&s[u])&&d.apply&&F(s)&&(t.result=d.apply(s,e),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(h.pop(),e)||!F(r)||u&&g.isFunction(r[m])&&!g.isWindow(r)&&((l=r[u])&&(r[u]=null),g.event.triggered=m,r[m](),g.event.triggered=void 0,l&&(r[u]=l)),t.result}},simulate:function(t,e,n){var r=g.extend(new g.Event,n,{type:t,isSimulated:!0});g.event.trigger(r,null,e)}}),g.fn.extend({trigger:function(t,e){return this.each(function(){g.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return g.event.trigger(t,e,n,!0)}}),g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){g.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),g.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),h.focusin="onfocusin"in n,h.focusin||g.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){g.event.simulate(e,t.target,g.event.fix(t))};g.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=j.access(r,e);i||r.addEventListener(t,n,!0),j.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=j.access(r,e)-1;i?j.access(r,e,i):(r.removeEventListener(t,n,!0),j.remove(r,e))}}});var se=n.location,le=g.now(),ce=/\?/;g.parseJSON=function(t){return JSON.parse(t+"")},g.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||g.error("Invalid XML: "+t),e};var ue=/#.*$/,de=/([?&])_=[^&]*/,fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,pe=/^(?:GET|HEAD)$/,he=/^\/\//,ge={},me={},ve="*/".concat("*"),ye=a.createElement("a");function be(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(D)||[];if(g.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function we(t,e,n,r){var i={},o=t===me;function a(s){var l;return i[s]=!0,g.each(t[s]||[],function(t,s){var c=s(e,n,r);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),l}return a(e.dataTypes[0])||!i["*"]&&a("*")}function _e(t,e){var n,r,i=g.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&g.extend(!0,t,r),t}ye.href=se.href,g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:se.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":g.parseJSON,"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?_e(_e(t,g.ajaxSettings),e):_e(g.ajaxSettings,t)},ajaxPrefilter:be(ge),ajaxTransport:be(me),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,s,l,c,u,d,f=g.ajaxSetup({},e),p=f.context||f,h=f.context&&(p.nodeType||p.jquery)?g(p):g.event,m=g.Deferred(),v=g.Callbacks("once memory"),y=f.statusCode||{},b={},w={},_=0,x="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!s)for(s={};e=fe.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=w[n]=w[n]||t,b[t]=e),this},overrideMimeType:function(t){return _||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(_<2)for(e in t)y[e]=[y[e],t[e]];else S.always(t[S.status]);return this},abort:function(t){var e=t||x;return r&&r.abort(e),C(0,e),this}};if(m.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,f.url=((t||f.url||se.href)+"").replace(ue,"").replace(he,se.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=g.trim(f.dataType||"*").toLowerCase().match(D)||[""],null==f.crossDomain){c=a.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=ye.protocol+"//"+ye.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=g.param(f.data,f.traditional)),we(ge,f,e,S),2===_)return S;for(d in(u=g.event&&f.global)&&0==g.active++&&g.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!pe.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ce.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=de.test(i)?i.replace(de,"$1_="+le++):i+(ce.test(i)?"&":"?")+"_="+le++)),f.ifModified&&(g.lastModified[i]&&S.setRequestHeader("If-Modified-Since",g.lastModified[i]),g.etag[i]&&S.setRequestHeader("If-None-Match",g.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+ve+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(p,S,f)||2===_))return S.abort();for(d in x="abort",{success:1,error:1,complete:1})S[d](f[d]);if(r=we(me,f,e,S)){if(S.readyState=1,u&&h.trigger("ajaxSend",[S,f]),2===_)return S;f.async&&f.timeout>0&&(l=n.setTimeout(function(){S.abort("timeout")},f.timeout));try{_=1,r.send(b,C)}catch(t){if(!(_<2))throw t;C(-1,t)}}else C(-1,"No Transport");function C(t,e,a,s){var c,d,b,w,x,C=e;2!==_&&(_=2,l&&n.clearTimeout(l),r=void 0,o=s||"",S.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(w=function(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,S,a)),w=function(t,e,n,r){var i,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(f,w,S,c),c?(f.ifModified&&((x=S.getResponseHeader("Last-Modified"))&&(g.lastModified[i]=x),(x=S.getResponseHeader("etag"))&&(g.etag[i]=x)),204===t||"HEAD"===f.type?C="nocontent":304===t?C="notmodified":(C=w.state,d=w.data,c=!(b=w.error))):(b=C,!t&&C||(C="error",t<0&&(t=0))),S.status=t,S.statusText=(e||C)+"",c?m.resolveWith(p,[d,C,S]):m.rejectWith(p,[S,C,b]),S.statusCode(y),y=void 0,u&&h.trigger(c?"ajaxSuccess":"ajaxError",[S,f,c?d:b]),v.fireWith(p,[S,C]),u&&(h.trigger("ajaxComplete",[S,f]),--g.active||g.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return g.get(t,e,n,"json")},getScript:function(t,e){return g.get(t,void 0,e,"script")}}),g.each(["get","post"],function(t,e){g[e]=function(t,n,r,i){return g.isFunction(n)&&(i=i||r,r=n,n=void 0),g.ajax(g.extend({url:t,type:e,dataType:i,data:n,success:r},g.isPlainObject(t)&&t))}}),g._evalUrl=function(t){return g.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},g.fn.extend({wrapAll:function(t){var e;return g.isFunction(t)?this.each(function(e){g(this).wrapAll(t.call(this,e))}):(this[0]&&(e=g(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return g.isFunction(t)?this.each(function(e){g(this).wrapInner(t.call(this,e))}):this.each(function(){var e=g(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=g.isFunction(t);return this.each(function(n){g(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)}).end()}}),g.expr.filters.hidden=function(t){return!g.expr.filters.visible(t)},g.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var xe=/%20/g,Se=/\[\]$/,Ce=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;function Me(t,e,n,r){var i;if(g.isArray(e))g.each(e,function(e,i){n||Se.test(t)?r(t,i):Me(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==g.type(e))r(t,e);else for(i in e)Me(t+"["+i+"]",e[i],n,r)}g.param=function(t,e){var n,r=[],i=function(t,e){e=g.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=g.ajaxSettings&&g.ajaxSettings.traditional),g.isArray(t)||t.jquery&&!g.isPlainObject(t))g.each(t,function(){i(this.name,this.value)});else for(n in t)Me(n,t[n],e,i);return r.join("&").replace(xe,"+")},g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=g.prop(this,"elements");return t?g.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!g(this).is(":disabled")&&Te.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!K.test(t))}).map(function(t,e){var n=g(this).val();return null==n?null:g.isArray(n)?g.map(n,function(t){return{name:e.name,value:t.replace(Ce,"\r\n")}}):{name:e.name,value:n.replace(Ce,"\r\n")}}).get()}}),g.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var ke={0:200,1223:204},Ae=g.ajaxSettings.xhr();h.cors=!!Ae&&"withCredentials"in Ae,h.ajax=Ae=!!Ae,g.ajaxTransport(function(t){var e,r;if(h.cors||Ae&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(ke[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),r=s.onerror=e("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){e&&r()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return g.globalEval(t),t}}}),g.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),g.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(r,i){e=g("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}});var Ie=[],Oe=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ie.pop()||g.expando+"_"+le++;return this[t]=!0,t}}),g.ajaxPrefilter("json jsonp",function(t,e,r){var i,o,a,s=!1!==t.jsonp&&(Oe.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oe.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Oe,"$1"+i):!1!==t.jsonp&&(t.url+=(ce.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||g.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?g(n).removeProp(i):n[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ie.push(i)),a&&g.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),g.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||a;var r=E.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=nt([t],e,i),i&&i.length&&g(i).remove(),g.merge([],r.childNodes))};var Pe=g.fn.load;function Le(t){return g.isWindow(t)?t:9===t.nodeType&&t.defaultView}g.fn.load=function(t,e,n){if("string"!=typeof t&&Pe)return Pe.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=g.trim(t.slice(s)),t=t.slice(0,s)),g.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&g.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?g("<div>").append(g.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){g.fn[e]=function(t){return this.on(e,t)}}),g.expr.filters.animated=function(t){return g.grep(g.timers,function(e){return t===e.elem}).length},g.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,c=g.css(t,"position"),u=g(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),o=g.css(t,"top"),l=g.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(r=u.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),g.isFunction(e)&&(e=e.call(t,n,g.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):u.css(d)}},g.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){g.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(e=o.documentElement,g.contains(e,r)?(i=r.getBoundingClientRect(),n=Le(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===g.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),g.nodeName(t[0],"html")||(r=t.offset()),r.top+=g.css(t[0],"borderTopWidth",!0),r.left+=g.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-g.css(n,"marginTop",!0),left:e.left-r.left-g.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===g.css(t,"position");)t=t.offsetParent;return t||It})}}),g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;g.fn[t]=function(r){return R(this,function(t,r,i){var o=Le(t);if(void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),g.each(["top","left"],function(t,e){g.cssHooks[e]=Pt(h.pixelPosition,function(t,n){if(n)return n=Ot(t,e),Mt.test(n)?g(t).position()[e]+"px":n})}),g.each({Height:"height",Width:"width"},function(t,e){g.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){g.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return R(this,function(e,n,r){var i;return g.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?g.css(e,n,a):g.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),g.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),g.fn.andSelf=g.fn.addBack,void 0===(r=function(){return g}.apply(e,[]))||(t.exports=r);var De=n.jQuery,Ne=n.$;return g.noConflict=function(t){return n.$===g&&(n.$=Ne),t&&n.jQuery===g&&(n.jQuery=De),g},i||(n.jQuery=n.$=g),g})},,function(t,e,n){var r=n(250),i=n(121),o=n(46),a=n(60),s=n(159),l=Math.max;t.exports=function(t,e,n,c){t=i(t)?t:s(t),n=n&&!c?a(n):0;var u=t.length;return n<0&&(n=l(u+n,0)),o(t)?n<=u&&t.indexOf(e,n)>-1:!!u&&r(t,e,n)>-1}},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="DimensionError",r.prototype.isDimensionError=!0,t.exports=r},function(t,e,n){"use strict";var r=n(28).extend,i=n(11);e.name="multiply",e.factory=function(t,e,o,a){var s=n(27),l=o(n(7)),c=o(n(91)),u=o(n(107)),d=o(n(61)),f=o(n(94)),p=o(n(35)),h=t.DenseMatrix,g=t.SparseMatrix,m=a("multiply",r({"Array, Array":function(e,n){v(i.size(e),i.size(n));var r=m(l(e),l(n));return t.isMatrix(r)?r.valueOf():r},"Matrix, Matrix":function(t,e){var n=t.size(),r=e.size();return v(n,r),1===n.length?1===r.length?y(t,e,n[0]):b(t,e):1===r.length?_(t,e):x(t,e)},"Matrix, Array":function(t,e){return m(t,l(e))},"Array, Matrix":function(t,e){return m(l(t,e.storage()),e)},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=f(t,e,u,!1);break;case"dense":n=p(t,e,u,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=f(e,t,u,!0);break;case"dense":n=p(e,t,u,!0)}return n},"Array, any":function(t,e){return p(l(t),e,u,!1).valueOf()},"any, Array":function(t,e){return p(l(e),t,u,!0).valueOf()},"any, any":u,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,n){for(var r=m(t,e),i=0;i<n.length;i++)r=m(r,n[i]);return r}},u.signatures)),v=function(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}},y=function(t,e,n){if(0===n)throw new Error("Cannot multiply two empty vectors");var r,i=t._data,o=t._datatype,s=e._data,l=e._datatype,d=c,f=u;o&&l&&o===l&&"string"==typeof o&&(r=o,d=a.find(c,[r,r]),f=a.find(u,[r,r]));for(var p=f(i[0],s[0]),h=1;h<n;h++)p=d(p,f(i[h],s[h]));return p},b=function(t,e){switch(e.storage()){case"dense":return w(t,e)}throw new Error("Not implemented")},w=function(t,e){var n,r=t._data,i=t._size,o=t._datatype,s=e._data,l=e._size,d=e._datatype,f=i[0],p=l[1],g=c,m=u;o&&d&&o===d&&"string"==typeof o&&(n=o,g=a.find(c,[n,n]),m=a.find(u,[n,n]));for(var v=[],y=0;y<p;y++){for(var b=m(r[0],s[0][y]),w=1;w<f;w++)b=g(b,m(r[w],s[w][y]));v[y]=b}return new h({data:v,size:[p],datatype:n})},_=function(t,e){switch(t.storage()){case"dense":return S(t,e);case"sparse":return T(t,e)}},x=function(t,e){switch(t.storage()){case"dense":switch(e.storage()){case"dense":return C(t,e);case"sparse":return E(t,e)}break;case"sparse":switch(e.storage()){case"dense":return M(t,e);case"sparse":return k(t,e)}}},S=function(t,e){var n,r=t._data,i=t._size,o=t._datatype,s=e._data,l=e._datatype,d=i[0],f=i[1],p=c,g=u;o&&l&&o===l&&"string"==typeof o&&(n=o,p=a.find(c,[n,n]),g=a.find(u,[n,n]));for(var m=[],v=0;v<d;v++){for(var y=r[v],b=g(y[0],s[0]),w=1;w<f;w++)b=p(b,g(y[w],s[w]));m[v]=b}return new h({data:m,size:[d],datatype:n})},C=function(t,e){var n,r=t._data,i=t._size,o=t._datatype,s=e._data,l=e._size,d=e._datatype,f=i[0],p=i[1],g=l[1],m=c,v=u;o&&d&&o===d&&"string"==typeof o&&(n=o,m=a.find(c,[n,n]),v=a.find(u,[n,n]));for(var y=[],b=0;b<f;b++){var w=r[b];y[b]=[];for(var _=0;_<g;_++){for(var x=v(w[0],s[0][_]),S=1;S<p;S++)x=m(x,v(w[S],s[S][_]));y[b][_]=x}}return new h({data:y,size:[f,g],datatype:n})},E=function(t,e){var n=t._data,r=t._size,i=t._datatype,o=e._values,s=e._index,l=e._ptr,f=e._size,p=e._datatype;if(!o)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var h,m=r[0],v=f[1],y=c,b=u,w=d,_=0;i&&p&&i===p&&"string"==typeof i&&(h=i,y=a.find(c,[h,h]),b=a.find(u,[h,h]),w=a.find(d,[h,h]),_=a.convert(0,h));for(var x=[],S=[],C=[],E=new g({values:x,index:S,ptr:C,size:[m,v],datatype:h}),T=0;T<v;T++){C[T]=S.length;var M=l[T],k=l[T+1];if(k>M)for(var A=0,I=0;I<m;I++){for(var O,P=I+1,L=M;L<k;L++){var D=s[L];A!==P?(O=b(n[I][D],o[L]),A=P):O=y(O,b(n[I][D],o[L]))}A!==P||w(O,_)||(S.push(I),x.push(O))}}return C[v]=S.length,E},T=function(t,e){var n=t._values,r=t._index,i=t._ptr,o=t._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,f=e._datatype,p=t._size[0],h=e._size[0],m=[],v=[],y=[],b=c,w=u,_=d,x=0;o&&f&&o===f&&"string"==typeof o&&(s=o,b=a.find(c,[s,s]),w=a.find(u,[s,s]),_=a.find(d,[s,s]),x=a.convert(0,s));var S=[],C=[];y[0]=0;for(var E=0;E<h;E++){var T=l[E];if(!_(T,x))for(var M=i[E],k=i[E+1],A=M;A<k;A++){var I=r[A];C[I]?S[I]=b(S[I],w(T,n[A])):(C[I]=!0,v.push(I),S[I]=w(T,n[A]))}}for(var O=v.length,P=0;P<O;P++){var L=v[P];m[P]=S[L]}return y[1]=v.length,new g({values:m,index:v,ptr:y,size:[p,1],datatype:s})},M=function(t,e){var n=t._values,r=t._index,i=t._ptr,o=t._datatype;if(!n)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,f=e._datatype,p=t._size[0],h=e._size[0],m=e._size[1],v=c,y=u,b=d,w=0;o&&f&&o===f&&"string"==typeof o&&(s=o,v=a.find(c,[s,s]),y=a.find(u,[s,s]),b=a.find(d,[s,s]),w=a.convert(0,s));for(var _=[],x=[],S=[],C=new g({values:_,index:x,ptr:S,size:[p,m],datatype:s}),E=[],T=[],M=0;M<m;M++){S[M]=x.length;for(var k=M+1,A=0;A<h;A++){var I=l[A][M];if(!b(I,w))for(var O=i[A],P=i[A+1],L=O;L<P;L++){var D=r[L];T[D]!==k?(T[D]=k,x.push(D),E[D]=y(I,n[L])):E[D]=v(E[D],y(I,n[L]))}}for(var N=S[M],R=x.length,F=N;F<R;F++){var B=x[F];_[F]=E[B]}}return S[m]=x.length,C},k=function(t,e){var n,r=t._values,i=t._index,o=t._ptr,s=t._datatype,l=e._values,d=e._index,f=e._ptr,p=e._datatype,h=t._size[0],m=e._size[1],v=r&&l,y=c,b=u;s&&p&&s===p&&"string"==typeof s&&(n=s,y=a.find(c,[n,n]),b=a.find(u,[n,n]));for(var w,_,x,S,C,E,T,M,k=v?[]:void 0,A=[],I=[],O=new g({values:k,index:A,ptr:I,size:[h,m],datatype:n}),P=v?[]:void 0,L=[],D=0;D<m;D++){I[D]=A.length;var N=D+1;for(C=f[D],E=f[D+1],S=C;S<E;S++)if(M=d[S],v)for(_=o[M],x=o[M+1],w=_;w<x;w++)L[T=i[w]]!==N?(L[T]=N,A.push(T),P[T]=b(l[S],r[w])):P[T]=y(P[T],b(l[S],r[w]));else for(_=o[M],x=o[M+1],w=_;w<x;w++)L[T=i[w]]!==N&&(L[T]=N,A.push(T));if(v)for(var R=I[D],F=A.length,B=R;B<F;B++){var j=A[B];k[B]=P[j]}}return I[m]=A.length,O};return m.toTex={2:"\\left(${args[0]}"+s.operators.multiply+"${args[1]}\\right)"},m}},,,function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";(function(t){var r=n(495),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.a.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();e.a=s}).call(this,n(394)(t))},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(329),o=n(920),a=n(572),s=n(411),l=n(412);e.Long=a.flatbuffers.Long,e.ArrowType=i.org.apache.arrow.flatbuf.Type,e.DateUnit=i.org.apache.arrow.flatbuf.DateUnit,e.TimeUnit=i.org.apache.arrow.flatbuf.TimeUnit,e.Precision=i.org.apache.arrow.flatbuf.Precision,e.UnionMode=i.org.apache.arrow.flatbuf.UnionMode,e.VectorType=i.org.apache.arrow.flatbuf.VectorType,e.IntervalUnit=i.org.apache.arrow.flatbuf.IntervalUnit,e.MessageHeader=o.org.apache.arrow.flatbuf.MessageHeader,e.MetadataVersion=i.org.apache.arrow.flatbuf.MetadataVersion;var c=function(){function t(t,n,r,i){void 0===r&&(r=e.MetadataVersion.V4),void 0===i&&(i=new Map),this.fields=t,this.version=r,this.metadata=n,this.dictionaries=i}return t.from=function(e){return new t(e.map(function(t,e){return new d(""+e,t.type)}))},Object.defineProperty(t.prototype,"bodyLength",{get:function(){return this._bodyLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerType",{get:function(){return this._headerType},enumerable:!0,configurable:!0}),t.prototype.select=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.reduce(function(t,e){return(t[e]=!0)&&t},Object.create(null)),i=new Map,o=this.fields.filter(function(t){return r[t.name]});return this.dictionaries.forEach(function(t,e){return r[t.name]&&i.set(e,t)}),new t(o,this.metadata,this.version,i)},t[Symbol.toStringTag]=function(t){return t._bodyLength=0,t._headerType=e.MessageHeader.Schema,"Schema"}(t.prototype),t}();e.Schema=c;var u,d=function(){function t(t,e,n,r){void 0===n&&(n=!1),this.name=t,this.type=e,this.nullable=n,this.metadata=r}return t.prototype.toString=function(){return this.name+": "+this.type},Object.defineProperty(t.prototype,"typeId",{get:function(){return this.type.TType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"Field"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indices",{get:function(){return f.isDictionary(this.type)?this.type.indices:this.type},enumerable:!0,configurable:!0}),t}();e.Field=d,function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t.Dictionary="Dictionary",t.DenseUnion="DenseUnion",t.SparseUnion="SparseUnion"}(u=e.Type||(e.Type={}));var f=function(){function t(t,e){this.TType=t,this.children=e}return t.isNull=function(t){return t&&t.TType===u.Null},t.isInt=function(t){return t&&t.TType===u.Int},t.isFloat=function(t){return t&&t.TType===u.Float},t.isBinary=function(t){return t&&t.TType===u.Binary},t.isUtf8=function(t){return t&&t.TType===u.Utf8},t.isBool=function(t){return t&&t.TType===u.Bool},t.isDecimal=function(t){return t&&t.TType===u.Decimal},t.isDate=function(t){return t&&t.TType===u.Date},t.isTime=function(t){return t&&t.TType===u.Time},t.isTimestamp=function(t){return t&&t.TType===u.Timestamp},t.isInterval=function(t){return t&&t.TType===u.Interval},t.isList=function(t){return t&&t.TType===u.List},t.isStruct=function(t){return t&&t.TType===u.Struct},t.isUnion=function(t){return t&&t.TType===u.Union},t.isDenseUnion=function(t){return t&&t.TType===u.DenseUnion},t.isSparseUnion=function(t){return t&&t.TType===u.SparseUnion},t.isFixedSizeBinary=function(t){return t&&t.TType===u.FixedSizeBinary},t.isFixedSizeList=function(t){return t&&t.TType===u.FixedSizeList},t.isMap=function(t){return t&&t.TType===u.Map},t.isDictionary=function(t){return t&&t.TType===u.Dictionary},t.prototype.acceptTypeVisitor=function(t){return l.TypeVisitor.visitTypeInline(t,this)},t[Symbol.toStringTag]=function(t){return t.ArrayType=Array,t[Symbol.toStringTag]="DataType"}(t.prototype),t}();e.DataType=f;var p=function(t){function e(){return t.call(this,u.Null)||this}return r.__extends(e,t),e.prototype.toString=function(){return"Null"},e[Symbol.toStringTag]=e.prototype[Symbol.toStringTag]="Null",e}(f);e.Null=p;var h=function(t){function e(e,n){var r=t.call(this,u.Int)||this;return r.isSigned=e,r.bitWidth=n,r}return r.__extends(e,t),Object.defineProperty(e.prototype,"ArrayType",{get:function(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw new Error("Unrecognized "+this[Symbol.toStringTag]+" type")},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return(this.isSigned?"I":"Ui")+"nt"+this.bitWidth},e[Symbol.toStringTag]=e.prototype[Symbol.toStringTag]="Int",e}(f);e.Int=h;var g=function(t){function e(){return t.call(this,!0,8)||this}return r.__extends(e,t),e}(h);e.Int8=g;var m=function(t){function e(){return t.call(this,!0,16)||this}return r.__extends(e,t),e}(h);e.Int16=m;var v=function(t){function e(){return t.call(this,!0,32)||this}return r.__extends(e,t),e}(h);e.Int32=v;var y=function(t){function e(){return t.call(this,!0,64)||this}return r.__extends(e,t),e}(h);e.Int64=y;var b=function(t){function e(){return t.call(this,!1,8)||this}return r.__extends(e,t),e}(h);e.Uint8=b;var w=function(t){function e(){return t.call(this,!1,16)||this}return r.__extends(e,t),e}(h);e.Uint16=w;var _=function(t){function e(){return t.call(this,!1,32)||this}return r.__extends(e,t),e}(h);e.Uint32=_;var x=function(t){function e(){return t.call(this,!1,64)||this}return r.__extends(e,t),e}(h);e.Uint64=x;var S=function(t){function n(e){var n=t.call(this,u.Float)||this;return n.precision=e,n}return r.__extends(n,t),Object.defineProperty(n.prototype,"ArrayType",{get:function(){switch(this.precision){case e.Precision.HALF:return Uint16Array;case e.Precision.SINGLE:return Float32Array;case e.Precision.DOUBLE:return Float64Array}throw new Error("Unrecognized "+this[Symbol.toStringTag]+" type")},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return"Float"+(this.precision<<5||16)},n[Symbol.toStringTag]=n.prototype[Symbol.toStringTag]="Float",n}(f);e.Float=S;var C=function(t){function n(){return t.call(this,e.Precision.HALF)||this}return r.__extends(n,t),n}(S);e.Float16=C;var E=function(t){function n(){return t.call(this,e.Precision.SINGLE)||this}return r.__extends(n,t),n}(S);e.Float32=E;var T=function(t){function n(){return t.call(this,e.Precision.DOUBLE)||this}return r.__extends(n,t),n}(S);e.Float64=T;var M=function(t){function e(){return t.call(this,u.Binary)||this}return r.__extends(e,t),e.prototype.toString=function(){return"Binary"},e[Symbol.toStringTag]=function(t){return t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"}(e.prototype),e}(f);e.Binary=M;var k=function(t){function e(){return t.call(this,u.Utf8)||this}return r.__extends(e,t),e.prototype.toString=function(){return"Utf8"},e[Symbol.toStringTag]=function(t){return t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"}(e.prototype),e}(f);e.Utf8=k;var A=function(t){function e(){return t.call(this,u.Bool)||this}return r.__extends(e,t),e.prototype.toString=function(){return"Bool"},e[Symbol.toStringTag]=function(t){return t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"}(e.prototype),e}(f);e.Bool=A;var I=function(t){function e(e,n){var r=t.call(this,u.Decimal)||this;return r.scale=e,r.precision=n,r}return r.__extends(e,t),e.prototype.toString=function(){return"Decimal["+this.precision+"e"+(this.scale>0?"+":"")+this.scale+"]"},e[Symbol.toStringTag]=function(t){return t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"}(e.prototype),e}(f);e.Decimal=I;var O=function(t){function n(e){var n=t.call(this,u.Date)||this;return n.unit=e,n}return r.__extends(n,t),n.prototype.toString=function(){return"Date"+32*(this.unit+1)+"<"+e.DateUnit[this.unit]+">"},n[Symbol.toStringTag]=function(t){return t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"}(n.prototype),n}(f);e.Date_=O;var P=function(t){function n(e,n){var r=t.call(this,u.Time)||this;return r.unit=e,r.bitWidth=n,r}return r.__extends(n,t),n.prototype.toString=function(){return"Time"+this.bitWidth+"<"+e.TimeUnit[this.unit]+">"},n[Symbol.toStringTag]=function(t){return t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Time"}(n.prototype),n}(f);e.Time=P;var L=function(t){function n(e,n){var r=t.call(this,u.Timestamp)||this;return r.unit=e,r.timezone=n,r}return r.__extends(n,t),n.prototype.toString=function(){return"Timestamp<"+e.TimeUnit[this.unit]+(this.timezone?", "+this.timezone:"")+">"},n[Symbol.toStringTag]=function(t){return t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"}(n.prototype),n}(f);e.Timestamp=L;var D=function(t){function n(e){var n=t.call(this,u.Interval)||this;return n.unit=e,n}return r.__extends(n,t),n.prototype.toString=function(){return"Interval<"+e.IntervalUnit[this.unit]+">"},n[Symbol.toStringTag]=function(t){return t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"}(n.prototype),n}(f);e.Interval=D;var N=function(t){function e(e){var n=t.call(this,u.List,e)||this;return n.children=e,n}return r.__extends(e,t),e.prototype.toString=function(){return"List<"+this.valueType+">"},Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this.valueType.ArrayType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueType",{get:function(){return this.children[0].type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueField",{get:function(){return this.children[0]},enumerable:!0,configurable:!0}),e[Symbol.toStringTag]=e.prototype[Symbol.toStringTag]="List",e}(f);e.List=N;var R=function(t){function e(e){var n=t.call(this,u.Struct,e)||this;return n.children=e,n}return r.__extends(e,t),e.prototype.toString=function(){return"Struct<"+this.children.map(function(t){return t.type}).join(", ")+">"},e[Symbol.toStringTag]=e.prototype[Symbol.toStringTag]="Struct",e}(f);e.Struct=R;var F=function(t){function n(n,r,i){var o=t.call(this,n===e.UnionMode.Sparse?u.SparseUnion:u.DenseUnion,i)||this;return o.mode=n,o.typeIds=r,o.children=i,o}return r.__extends(n,t),n.prototype.toString=function(){return this[Symbol.toStringTag]+"<"+this.typeIds.map(function(t){return u[t]}).join(" | ")+">"},n[Symbol.toStringTag]=function(t){return t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"}(n.prototype),n}(f);e.Union=F;var B=function(t){function n(n,r){return t.call(this,e.UnionMode.Dense,n,r)||this}return r.__extends(n,t),n[Symbol.toStringTag]=n.prototype[Symbol.toStringTag]="DenseUnion",n}(F);e.DenseUnion=B;var j=function(t){function n(n,r){return t.call(this,e.UnionMode.Sparse,n,r)||this}return r.__extends(n,t),n[Symbol.toStringTag]=n.prototype[Symbol.toStringTag]="SparseUnion",n}(F);e.SparseUnion=j;var q=function(t){function e(e){var n=t.call(this,u.FixedSizeBinary)||this;return n.byteWidth=e,n}return r.__extends(e,t),e.prototype.toString=function(){return"FixedSizeBinary["+this.byteWidth+"]"},e[Symbol.toStringTag]=function(t){return t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"}(e.prototype),e}(f);e.FixedSizeBinary=q;var z=function(t){function e(e,n){var r=t.call(this,u.FixedSizeList,n)||this;return r.listSize=e,r.children=n,r}return r.__extends(e,t),Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this.valueType.ArrayType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueType",{get:function(){return this.children[0].type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueField",{get:function(){return this.children[0]},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"FixedSizeList["+this.listSize+"]<"+this.valueType+">"},e[Symbol.toStringTag]=e.prototype[Symbol.toStringTag]="FixedSizeList",e}(f);e.FixedSizeList=z;var U=function(t){function e(e,n){var r=t.call(this,u.Map,n)||this;return r.keysSorted=e,r.children=n,r}return r.__extends(e,t),e.prototype.toString=function(){return"Map<"+this.children.join(", ")+">"},e[Symbol.toStringTag]=e.prototype[Symbol.toStringTag]="Map_",e}(f);e.Map_=U;var $=function(t){function e(e,n,r,i){var o=t.call(this,u.Dictionary)||this;return o.indices=n,o.dictionary=e,o.isOrdered=i||!1,o.id=null==r?s.DictionaryBatch.getId():"number"==typeof r?r:r.low,o}return r.__extends(e,t),Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this.dictionary.ArrayType},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Dictionary<"+this.indices+", "+this.dictionary+">"},e[Symbol.toStringTag]=e.prototype[Symbol.toStringTag]="Dictionary",e}(f);e.Dictionary=$},,,,function(t,e,n){"use strict";(function(t){var r=n(31),i=n(208),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.a.Buffer:void 0,l=(s?s.isBuffer:void 0)||i.a;e.a=l}).call(this,n(394)(t))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(694),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";var r=n(28).hasOwnProperty;function i(t,e){return!(!t||"object"!=typeof t)&&(!!r(s,e)||!(e in Object.prototype)&&!(e in Function.prototype))}function o(t,e){return!(!t||"function"!=typeof t[e])&&(!(r(t,e)&&t.__proto__&&e in t.__proto__)&&(!!r(l,e)||!(e in Object.prototype)&&!(e in Function.prototype)))}function a(t){return"object"==typeof t&&t&&t.constructor===Object}var s={length:!0,name:!0},l={toString:!0,valueOf:!0,toLocaleString:!0};e.getSafeProperty=function(t,e){if(a(t)&&i(t,e))return t[e];if("function"==typeof t[e]&&o(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')},e.setSafeProperty=function(t,e,n){if(a(t)&&i(t,e))return t[e]=n;throw new Error('No access to property "'+e+'"')},e.isSafeProperty=i,e.validateSafeMethod=function(t,e){if(!o(t,e))throw new Error('No access to method "'+e+'"')},e.isSafeMethod=o,e.isPlainObject=a},function(t,e,n){"use strict";e.factory=function(t,e,r,i){var o=r(n(107)),a=i("divide",{"number, number":function(t,e){return t/e},"Complex, Complex":function(t,e){return t.div(e)},"BigNumber, BigNumber":function(t,e){return t.div(e)},"Fraction, Fraction":function(t,e){return t.div(e)},"Unit, number | Fraction | BigNumber":function(t,e){var n=t.clone();return n.value=a(null===n.value?n._normalize(1):n.value,e),n},"number | Fraction | BigNumber, Unit":function(t,e){var n=e.pow(-1);return n.value=o(null===n.value?n._normalize(1):n.value,t),n},"Unit, Unit":function(t,e){return t.divide(e)}});return a}},function(t,e,n){"use strict";var r=n(521),i=n(28).deepEqual,o=n(28).hasOwnProperty;e.name="Node",e.path="expression.node",e.math=!0,e.factory=function(t,e,a,s,l){var c=a(n(37)).compile;function u(){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator")}function d(t){for(var e in t)if(o(t,e)&&e in r)throw new Error('Scope contains an illegal symbol, "'+e+'" is a reserved keyword')}return u.prototype.eval=function(t){return this.compile().eval(t)},u.prototype.type="Node",u.prototype.isNode=!0,u.prototype.comment="",u.prototype.compile=function(){if(arguments.length>0)throw new Error("Calling compile(math) is deprecated. Call the function as compile() instead.");var t={math:l.expression.mathWithTransform,args:{},_validateScope:d},e=c(this,t,{}),n=Object.keys(t).map(function(t){return"    var "+t+' = defs["'+t+'"];'}).join(" ")+'return {  "eval": function (scope) {    if (scope) _validateScope(scope);    scope = scope || {};    return '+e+";  }};";return new Function("defs",n)(t)},u.prototype.forEach=function(t){throw new Error("Cannot run forEach on a Node interface")},u.prototype.map=function(t){throw new Error("Cannot run map on a Node interface")},u.prototype._ifNode=function(e){if(!t.isNode(e))throw new TypeError("Callback function must return a Node");return e},u.prototype.traverse=function(t){t(this,null,null),function t(e,n){e.forEach(function(e,r,i){n(e,r,i),t(e,n)})}(this,t)},u.prototype.transform=function(t){return function t(e,n){return e.map(function(e,r,i){return t(n(e,r,i),n)})}(t(this,null,null),t)},u.prototype.filter=function(t){var e=[];return this.traverse(function(n,r,i){t(n,r,i)&&e.push(n)}),e},u.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")},u.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")},u.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},u.prototype.cloneDeep=function(){return this.map(function(t){return t.cloneDeep()})},u.prototype.equals=function(t){return!!t&&i(this,t)},u.prototype.toString=function(t){var e;if(t&&"object"==typeof t)switch(typeof t.handler){case"object":case"undefined":break;case"function":e=t.handler(this,t);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==e?e:this._toString(t)},u.prototype.toHTML=function(t){var e;if(t&&"object"==typeof t)switch(typeof t.handler){case"object":case"undefined":break;case"function":e=t.handler(this,t);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==e?e:this.toHTML(t)},u.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},u.prototype.toTex=function(t){var e;if(t&&"object"==typeof t)switch(typeof t.handler){case"object":case"undefined":break;case"function":e=t.handler(this,t);break;default:throw new TypeError("Object or function expected as callback")}return void 0!==e?e:this._toTex(t)},u.prototype._toTex=function(t){throw new Error("_toTex not implemented for "+this.type)},u.prototype.getIdentifier=function(){return this.type},u.prototype.getContent=function(){return this},u}},,function(t,e,n){var r=n(696),i=n(187),o=n(43),a=n(883),s=n(17);t.exports=function(t,e,n){var l=s(t)?r:a,c=arguments.length<3;return l(t,o(e,4),n,c,i)}},,,,function(t,e,n){"use strict";var r=n(38),i=n(210),o=n(20),a="[object Object]",s=Function.prototype,l=Object.prototype,c=s.toString,u=l.hasOwnProperty,d=c.call(Object);e.a=function(t){if(!Object(o.a)(t)||Object(r.a)(t)!=a)return!1;var e=Object(i.a)(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}},,function(t,e,n){"use strict";e.factory=function(t,e,n,r){var i=r("add",{"number, number":function(t,e){return t+e},"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var n=t.clone();return n.value=i(n.value,e.value),n.fixPrefix=!1,n}});return i}},function(t,e,n){"use strict";var r=n(65);e.name="algorithm03",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,a){var s=t._data,l=t._size,c=t._datatype,u=e._values,d=e._index,f=e._ptr,p=e._size,h=e._datatype;if(l.length!==p.length)throw new r(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g,m=l[0],v=l[1],y=0,b=n;"string"==typeof c&&c===h&&(g=c,y=i.convert(0,g),b=i.find(n,[g,g]));for(var w=[],_=0;_<m;_++)w[_]=[];for(var x=[],S=[],C=0;C<v;C++){for(var E=C+1,T=f[C],M=f[C+1],k=T;k<M;k++){var A=d[k];x[A]=a?b(u[k],s[A][C]):b(s[A][C],u[k]),S[A]=E}for(var I=0;I<m;I++)S[I]===E?w[I][C]=x[I]:w[I][C]=a?b(y,s[I][C]):b(s[I][C],y)}return new o({data:w,size:[m,v],datatype:g})}}},function(t,e,n){"use strict";e.name="algorithm12",e.factory=function(t,e,n,r){var i=t.DenseMatrix;return function(t,e,n,o){var a=t._values,s=t._index,l=t._ptr,c=t._size,u=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=c[0],p=c[1],h=n;"string"==typeof u&&(d=u,e=r.convert(e,d),h=r.find(n,[d,d]));for(var g=[],m=new i({data:g,size:[f,p],datatype:d}),v=[],y=[],b=0;b<p;b++){for(var w=b+1,_=l[b],x=l[b+1],S=_;S<x;S++){var C=s[S];v[C]=a[S],y[C]=w}for(var E=0;E<f;E++)0===b&&(g[E]=[]),y[E]===w?g[E][b]=o?h(e,v[E]):h(v[E],e):g[E][b]=o?h(e,0):h(0,e)}return m}}},function(t,e,n){"use strict";e.name="algorithm11",e.factory=function(t,e,r,i){var o=r(n(61)),a=t.SparseMatrix;return function(t,e,n,r){var s=t._values,l=t._index,c=t._ptr,u=t._size,d=t._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,p=u[0],h=u[1],g=o,m=0,v=n;"string"==typeof d&&(f=d,g=i.find(o,[f,f]),m=i.convert(0,f),e=i.convert(e,f),v=i.find(n,[f,f]));for(var y=[],b=[],w=[],_=new a({values:y,index:b,ptr:w,size:[p,h],datatype:f}),x=0;x<h;x++){w[x]=b.length;for(var S=c[x],C=c[x+1],E=S;E<C;E++){var T=l[E],M=r?v(e,s[E]):v(s[E],e);g(M,m)||(b.push(T),y.push(M))}}return w[h]=b.length,_}}},,function(t,e,n){var r=n(51),i=n(213),o=n(147),a=n(108),s=Object.prototype,l=s.hasOwnProperty,c=r(function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(r=1);++n<r;)for(var u=e[n],d=a(u),f=-1,p=d.length;++f<p;){var h=d[f],g=t[h];(void 0===g||i(g,s[h])&&!l.call(t,h))&&(t[h]=u[h])}return t});t.exports=c},,,,,,function(t,e,n){var r=n(368);t.exports=function(t){return null==t?"":r(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";var r=n(28).extend;e.name="add",e.factory=function(t,e,i,o){var a=i(n(7)),s=i(n(91)),l=n(27),c=i(n(183)),u=i(n(517)),d=i(n(216)),f=i(n(41)),p=i(n(35)),h=o("add",r({"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,s);break;default:n=c(e,t,s,!0)}break;default:switch(e.storage()){case"sparse":n=c(t,e,s,!1);break;default:n=f(t,e,s)}}return n},"Array, Array":function(t,e){return h(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return h(a(t),e)},"Matrix, Array":function(t,e){return h(t,a(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=d(t,e,s,!1);break;default:n=p(t,e,s,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=d(e,t,s,!0);break;default:n=p(e,t,s,!0)}return n},"Array, any":function(t,e){return p(a(t),e,s,!1).valueOf()},"any, Array":function(t,e){return p(a(e),t,s,!0).valueOf()},"any, any":s,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,n){for(var r=h(t,e),i=0;i<n.length;i++)r=h(r,n[i]);return r}},s.signatures));return h.toTex={2:"\\left(${args[0]}"+l.operators.add+"${args[1]}\\right)"},h}},function(t,e,n){"use strict";var r=n(65);e.name="subtract",e.factory=function(t,e,i,o){var a=n(27),s=i(n(7)),l=i(n(91)),c=i(n(185)),u=i(n(183)),d=i(n(92)),f=i(n(384)),p=i(n(216)),h=i(n(41)),g=i(n(35)),m=o("subtract",{"number, number":function(t,e){return t-e},"Complex, Complex":function(t,e){return t.sub(e)},"BigNumber, BigNumber":function(t,e){return t.minus(e)},"Fraction, Fraction":function(t,e){return t.sub(e)},"Unit, Unit":function(t,e){if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var n=t.clone();return n.value=m(n.value,e.value),n.fixPrefix=!1,n},"Matrix, Matrix":function(t,e){var n,i=t.size(),o=e.size();if(i.length!==o.length)throw new r(i.length,o.length);switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=f(t,e,m);break;default:n=d(e,t,m,!0)}break;default:switch(e.storage()){case"sparse":n=u(t,e,m,!1);break;default:n=h(t,e,m)}}return n},"Array, Array":function(t,e){return m(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return m(s(t),e)},"Matrix, Array":function(t,e){return m(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=p(t,c(e),l);break;default:n=g(t,e,m)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=p(e,t,m,!0);break;default:n=g(e,t,m,!0)}return n},"Array, any":function(t,e){return g(s(t),e,m,!1).valueOf()},"any, Array":function(t,e){return g(s(e),t,m,!0).valueOf()}});return m.toTex={2:"\\left(${args[0]}"+a.operators.subtract+"${args[1]}\\right)"},m}},function(t,e,n){"use strict";e.factory=function(t,e,n,r){var i=r("multiplyScalar",{"number, number":function(t,e){return t*e},"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var n=e.clone();return n.value=null===n.value?n._normalize(t):i(n.value,t),n},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var n=t.clone();return n.value=null===n.value?n._normalize(e):i(n.value,e),n},"Unit, Unit":function(t,e){return t.multiply(e)}});return i}},function(t,e,n){var r=n(710),i=n(1781),o=n(121);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(398),i=1,o=4;t.exports=function(t){return r(t,i|o)}},,function(t,e,n){"use strict";var r=n(48),i=n(139).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function a(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,l=t.width/2,c=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*l>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(l=-l),n=l,r=l*s/a);return{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)}),e},normalizeRanks:function(t){var e=r.minBy(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)})},removeEmptyRanks:function(t){var e=r.minBy(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var i=0,o=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%o!=0?--i:i&&r.forEach(e,function(e){t.node(e).rank+=i})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return o(t,"border",i,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},function(t,e,n){"use strict";var r=n(28).clone,i=n(11).validateIndex,o=n(81).getSafeProperty,a=n(81).setSafeProperty,s=n(65);function l(t,e){if(1!==e.size().length)throw new s(e.size(),1);var n=e.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");return o(t,n)}function c(t,e,n){if(1!==e.size().length)throw new s(e.size(),1);var i=e.dimension(0);if("string"!=typeof i)throw new TypeError("String expected as index to retrieve an object property");var o=r(t);return a(o,i,n),o}e.name="subset",e.factory=function(t,e,o,a){var u=o(n(7)),d=a("subset",{"Array, Index":function(t,e){var n=u(t).subset(e);return e.isScalar()?n:n.valueOf()},"Matrix, Index":function(t,e){return t.subset(e)},"Object, Index":l,"string, Index":function(e,n){if(!t.isIndex(n))throw new TypeError("Index expected");if(1!=n.size().length)throw new s(n.size().length,1);var r=e.length;i(n.min()[0],r),i(n.max()[0],r);var o="";return n.dimension(0).forEach(function(t){o+=e.charAt(t)}),o},"Array, Index, any":function(t,e,n){return u(r(t)).subset(e,n,void 0).valueOf()},"Array, Index, any, any":function(t,e,n,i){return u(r(t)).subset(e,n,i).valueOf()},"Matrix, Index, any":function(t,e,n){return t.clone().subset(e,n)},"Matrix, Index, any, any":function(t,e,n,r){return t.clone().subset(e,n,r)},"string, Index, string":f,"string, Index, string, string":f,"Object, Index, any":c});return d.toTex=void 0,d;function f(t,e,n,r){if(!e||!0!==e.isIndex)throw new TypeError("Index expected");if(1!=e.size().length)throw new s(e.size().length,1);if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var o=e.dimension(0),a=o.size()[0];if(a!=n.length)throw new s(o.size()[0],n.length);var l=t.length;i(e.min()[0]),i(e.max()[0]);for(var c=[],u=0;u<l;u++)c[u]=t.charAt(u);if(o.forEach(function(t,e){c[t]=n.charAt(e[0])}),c.length>l)for(u=l-1,a=c.length;u<a;u++)c[u]||(c[u]=r);return c.join("")}}},,,,,,,function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(34),i=n(504);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(796),i=n(51)(function(t,e){return r(t,1,e)});t.exports=i},function(t,e,n){"use strict";var r=n(813),i=n(1851),o=Object.prototype.toString;function a(t){return"[object Array]"===o.call(t)}function s(t){return null!==t&&"object"==typeof t}function l(t){return"[object Function]"===o.call(t)}function c(t,e){if(null!==t&&void 0!==t)if("object"==typeof t||a(t)||(t=[t]),a(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:l,isStream:function(t){return s(t)&&l(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){var r=n(704),i=n(43),o=n(2191),a=n(17),s=n(147);t.exports=function(t,e,n){var l=a(t)?r:o;return n&&s(t,e,n)&&(e=void 0),l(t,i(e,3))}},,function(t,e,n){t.exports={countBy:n(2969),each:n(22),eachRight:n(626),every:n(409),filter:n(29),find:n(23),findLast:n(2970),flatMap:n(2972),flatMapDeep:n(2973),flatMapDepth:n(2974),forEach:n(42),forEachRight:n(1064),groupBy:n(328),includes:n(64),invokeMap:n(2975),keyBy:n(1082),map:n(4),orderBy:n(628),partition:n(2976),reduce:n(85),reduceRight:n(2977),reject:n(2979),sample:n(2980),sampleSize:n(2982),shuffle:n(2985),size:n(2988),some:n(124),sortBy:n(134)}},function(t,e,n){var r;try{r=n(1)}catch(t){}r||(r=window._),t.exports=r},function(t,e,n){var r=n(248),i=n(1268),o=n(1269),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:a:l&&l in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(511),i=n(43),o=n(60),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(t,i(e,3),l)}},function(t,e,n){var r=n(1346),i=n(1347);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[o+s]=a[s];return e||i(a)}},function(t,e,n){"use strict";var r=n(65);e.name="algorithm02",e.factory=function(t,e,i,o){var a=i(n(61)),s=t.SparseMatrix;return function(t,e,n,i){var l=t._data,c=t._size,u=t._datatype,d=e._values,f=e._index,p=e._ptr,h=e._size,g=e._datatype;if(c.length!==h.length)throw new r(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");if(!d)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m,v=c[0],y=c[1],b=a,w=0,_=n;"string"==typeof u&&u===g&&(m=u,b=o.find(a,[m,m]),w=o.convert(0,m),_=o.find(n,[m,m]));for(var x=[],S=[],C=[],E=0;E<y;E++){C[E]=S.length;for(var T=p[E],M=p[E+1],k=T;k<M;k++){var A=f[k],I=i?_(d[k],l[A][E]):_(l[A][E],d[k]);b(I,w)||(S.push(A),x.push(I))}}return C[y]=S.length,new s({values:x,index:S,ptr:C,size:[v,y],datatype:m})}}},function(t,e,n){"use strict";var r=n(266),i=n(554),o=n(556);function a(t){return t}function s(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}function l(t){var n=65536,r=[],i=t.length,a=e.getTypeOf(t),s=0,l=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,o(0))}}catch(t){l=!1}if(!l){for(var c="",u=0;u<t.length;u++)c+=String.fromCharCode(t[u]);return c}for(;s<i&&n>1;)try{"array"===a||"nodebuffer"===a?r.push(String.fromCharCode.apply(null,t.slice(s,Math.min(s+n,i)))):r.push(String.fromCharCode.apply(null,t.subarray(s,Math.min(s+n,i)))),s+=n}catch(t){n=Math.floor(n/2)}return r.join("")}function c(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}e.string2binary=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e},e.arrayBuffer2Blob=function(t,n){e.checkSupport("blob"),n=n||"application/zip";try{return new Blob([t],{type:n})}catch(e){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return r.append(t),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},e.applyFromCharCode=l;var u={};u.string={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return u.string.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:function(t){return s(t,o(t.length))}},u.array={string:l,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o(t)}},u.arraybuffer={string:function(t){return l(new Uint8Array(t))},array:function(t){return c(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o(new Uint8Array(t))}},u.uint8array={string:l,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return o(t)}},u.nodebuffer={string:l,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return u.nodebuffer.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:a},e.transformTo=function(t,n){if(n||(n=""),!t)return n;e.checkSupport(t);var r=e.getTypeOf(n);return u[r][t](n)},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":r.nodebuffer&&o.test(t)?"nodebuffer":r.uint8array&&t instanceof Uint8Array?"uint8array":r.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!r[t.toLowerCase()])throw new Error(t+" is not supported by this browser")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},e.findCompression=function(t){for(var e in i)if(i.hasOwnProperty(e)&&i[e].magic===t)return i[e];return null},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n}},function(t,e,n){var r=n(398),i=4;t.exports=function(t){return r(t,i)}},function(t,e,n){var r=n(166),i=n(919),o=n(51),a=n(147),s=o(function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])});t.exports=s},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(410)),r(n(931)),r(n(933)),r(n(579)),r(n(333))},,,,function(t,e,n){var r;try{r=n(3091)}catch(t){}r||(r=window.graphlib),t.exports=r},,function(t,e,n){var r=n(1163),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){"use strict";e.array=n(11),e.boolean=n(1375),e.function=n(182),e.number=n(13),e.object=n(28),e.string=n(45),e.types=n(383),e.emitter=n(720)},function(t,e,n){"use strict";var r=n(65);e.name="algorithm07",e.factory=function(t,e,n,i){var o=t.DenseMatrix,a=function(t,e,n,r,i){for(var o=t._values,a=t._index,s=t._ptr,l=s[e],c=s[e+1];l<c;l++){var u=a[l];n[u]=i,r[u]=o[l]}};return function(t,e,n){var s=t._size,l=t._datatype,c=e._size,u=e._datatype;if(s.length!==c.length)throw new r(s.length,c.length);if(s[0]!==c[0]||s[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");var d,f,p,h=s[0],g=s[1],m=0,v=n;"string"==typeof l&&l===u&&(d=l,m=i.convert(0,d),v=i.find(n,[d,d]));var y=[];for(f=0;f<h;f++)y[f]=[];var b=new o({data:y,size:[h,g],datatype:d}),w=[],_=[],x=[],S=[];for(p=0;p<g;p++){var C=p+1;for(a(t,p,x,w,C),a(e,p,S,_,C),f=0;f<h;f++){var E=x[f]===C?w[f]:m,T=S[f]===C?_[f]:m;y[f][p]=v(E,T)}}return b}}},function(t,e,n){"use strict";var r=n(28).clone,i=n(13).isInteger;e.name="Index",e.path="type",e.factory=function(t){function e(r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var i=0,o=arguments.length;i<o;i++){var a=arguments[i];if(t.isRange(a))this._dimensions.push(a),this._isScalar=!1;else if(Array.isArray(a)||t.isMatrix(a)){var s=n(a.valueOf());this._dimensions.push(s);var l=s.size();1===l.length&&1===l[0]||(this._isScalar=!1)}else if("number"==typeof a)this._dimensions.push(n([a]));else{if("string"!=typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(a)}}}function n(e){for(var n=0,r=e.length;n<r;n++)if("number"!=typeof e[n]||!i(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t.ImmutableDenseMatrix(e)}return e.prototype.type="Index",e.prototype.isIndex=!0,e.prototype.clone=function(){var t=new e;return t._dimensions=r(this._dimensions),t._isScalar=this._isScalar,t},e.create=function(t){var n=new e;return e.apply(n,t),n},e.prototype.size=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?1:r.size()[0]}return t},e.prototype.max=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?r:r.max()}return t},e.prototype.min=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t[e]="string"==typeof r?r:r.min()}return t},e.prototype.forEach=function(t){for(var e=0,n=this._dimensions.length;e<n;e++)t(this._dimensions[e],e,this)},e.prototype.dimension=function(t){return this._dimensions[t]||null},e.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},e.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},e.prototype.isScalar=function(){return this._isScalar},e.prototype.toArray=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];t.push("string"==typeof r?r:r.toArray())}return t},e.prototype.valueOf=e.prototype.toArray,e.prototype.toString=function(){for(var t=[],e=0,n=this._dimensions.length;e<n;e++){var r=this._dimensions[e];"string"==typeof r?t.push(JSON.stringify(r)):t.push(r.toString())}return"["+t.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},e.fromJSON=function(t){return e.create(t.dimensions)},e}},function(t,e,n){"use strict";var r=n(9);e.name="abs",e.factory=function(t,e,n,i){var o=i("abs",{number:Math.abs,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},Fraction:function(t){return t.abs()},"Array | Matrix":function(t){return r(t,o,!0)},Unit:function(t){return t.abs()}});return o.toTex={1:"\\left|${args[0]}\\right|"},o}},function(t,e,n){"use strict";var r=n(11);e.name="size",e.factory=function(t,e,i,o){var a=i(n(7)),s=o("size",{Matrix:function(t){return a(t.size())},Array:r.size,string:function(t){return"Array"===e.matrix?[t.length]:a([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return"Array"===e.matrix?[]:a([])}});return s.toTex=void 0,s}},function(t,e,n){var r=n(213),i=n(121),o=n(214),a=n(71);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(396),i=n(188);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var c=e[s],u=o?o(n[c],t[c],c,n,t):void 0;void 0===u&&(u=t[c]),a?i(n,c,u):r(n,c,u)}return n}},,function(t,e,n){var r=n(166);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var r=n(103),i=n(398),o=n(559),a=n(180),s=n(148),l=n(2207),c=n(267),u=n(540),d=c(function(t,e){var n={};if(null==t)return n;var c=!1;e=r(e,function(e){return e=a(e,t),c||(c=e.length>1),e}),s(t,u(t),n),c&&(n=i(n,7,l));for(var d=e.length;d--;)o(n,e[d]);return n});t.exports=d},,,,,function(t,e,n){var r=n(128),i=n(80),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==o}},function(t,e,n){var r=n(156),i=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(512),i=n(44);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){"use strict";e.name="equal",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(61)),s=r(n(92)),l=r(n(143)),c=r(n(93)),u=r(n(41)),d=r(n(35)),f=n(27),p=i("equal",{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:a(t,e)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=l(t,e,a);break;default:n=s(e,t,a,!0)}break;default:switch(e.storage()){case"sparse":n=s(t,e,a,!1);break;default:n=u(t,e,a)}}return n},"Array, Array":function(t,e){return p(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return p(o(t),e)},"Matrix, Array":function(t,e){return p(t,o(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,a,!1);break;default:n=d(t,e,a,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,a,!0);break;default:n=d(e,t,a,!0)}return n},"Array, any":function(t,e){return d(o(t),e,a,!1).valueOf()},"any, Array":function(t,e){return d(o(e),t,a,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+f.operators.equal+"${args[1]}\\right)"},p}},function(t,e,n){"use strict";var r=n(775);e.name="compareNatural",e.factory=function(t,e,i,o){var a=i(n(520)),s=(i(n(7)),i(n(259))),l=s.signatures["boolean,boolean"],c=o("compareNatural",{"any, any":function(e,n){var i,o=a(e),d=a(n);if(!("number"!==o&&"BigNumber"!==o&&"Fraction"!==o||"number"!==d&&"BigNumber"!==d&&"Fraction"!==d))return"0"!==(i=s(e,n)).toString()?i>0?1:-1:r(o,d);if("Array"===o||"Matrix"===o||"Array"===d||"Matrix"===d)return 0!==(i=function e(n,r){return t.isSparseMatrix(n)&&t.isSparseMatrix(r)?u(n.toJSON().values,r.toJSON().values):t.isSparseMatrix(n)?e(n.toArray(),r):t.isSparseMatrix(r)?e(n,r.toArray()):t.isDenseMatrix(n)?e(n.toJSON().data,r):t.isDenseMatrix(r)?e(n,r.toJSON().data):Array.isArray(n)?Array.isArray(r)?u(n,r):e(n,[r]):e([n],r)}(e,n))?i:r(o,d);if(o!==d)return r(o,d);if("Complex"===o)return function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}(e,n);if("Unit"===o)return e.equalBase(n)?c(e.value,n.value):u(e.formatUnits(),n.formatUnits());if("boolean"===o)return l(e,n);if("string"===o)return r(e,n);if("Object"===o)return function(t,e){var n=Object.keys(t),i=Object.keys(e);n.sort(r),i.sort(r);var o=u(n,i);if(0!==o)return o;for(var a=0;a<n.length;a++){var s=c(t[n[a]],e[i[a]]);if(0!==s)return s}return 0}(e,n);if("null"===o)return 0;if("undefined"===o)return 0;throw new TypeError('Unsupported type of value "'+o+'"')}});function u(t,e){for(var n=0,r=Math.min(t.length,e.length);n<r;n++){var i=c(t[n],e[n]);if(0!==i)return i}return t.length>e.length?1:t.length<e.length?-1:0}return c.toTex=void 0,c}},function(t,e,n){var r=n(104);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){t.exports=n(794)},function(t,e,n){var r=n(801),i=n(1829),o=n(1830),a=n(803),s=n(1839),l=n(544),c=n(1840),u=n(809),d=n(810),f=n(60),p="Expected a function",h=1,g=2,m=8,v=16,y=32,b=64,w=Math.max;t.exports=function(t,e,n,_,x,S,C,E){var T=e&g;if(!T&&"function"!=typeof t)throw new TypeError(p);var M=_?_.length:0;if(M||(e&=~(y|b),_=x=void 0),C=void 0===C?C:w(f(C),0),E=void 0===E?E:f(E),M-=x?x.length:0,e&b){var k=_,A=x;_=x=void 0}var I=T?void 0:l(t),O=[t,e,n,_,x,k,A,S,C,E];if(I&&c(O,I),t=O[0],e=O[1],n=O[2],_=O[3],x=O[4],!(E=O[9]=void 0===O[9]?T?0:t.length:w(O[9]-M,0))&&e&(m|v)&&(e&=~(m|v)),e&&e!=h)P=e==m||e==v?o(t,e,E):e!=y&&e!=(h|y)||x.length?a.apply(void 0,O):s(t,e,n,_);else var P=i(t,e,n);return d((I?r:u)(P,O),t,e)}},function(t,e,n){var r=n(378),i=n(1963);t.exports=function t(e,n,o,a,s){var l=-1,c=e.length;for(o||(o=i),s||(s=[]);++l<c;){var u=e[l];n>0&&o(u)?n>1?t(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(330),o=n(412),a=n(73),s=n(73),l=function(){function t(t,e){var n;this.data=t,this.type=t.type,this.length=t.length,t instanceof i.ChunkedData&&!(e instanceof g.ChunkedView)?this.view=new g.ChunkedView(t):!(e instanceof b.ValidityView)&&(n=t.nullBitmap)&&n.length>0&&t.nullCount>0?this.view=new b.ValidityView(t,e):this.view=e}return t.create=function(t){return e.createVector(t)},t.concat=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(t,e){return t?t.concat(e):e},t)},Object.defineProperty(t.prototype,"nullCount",{get:function(){return this.data.nullCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nullBitmap",{get:function(){return this.data.nullBitmap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return"Vector<"+this.type[Symbol.toStringTag]+">"},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return this.toArray()},t.prototype.clone=function(t,e){return void 0===e&&(e=this.view.clone(t)),new this.constructor(t,e)},t.prototype.isValid=function(t){return this.view.isValid(t)},t.prototype.get=function(t){return this.view.get(t)},t.prototype.set=function(t,e){return this.view.set(t,e)},t.prototype.toArray=function(){return this.view.toArray()},t.prototype.indexOf=function(t){return this.view.indexOf(t)},t.prototype[Symbol.iterator]=function(){return this.view[Symbol.iterator]()},t.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===(t=t.filter(Boolean)).length)return this;var n=this.view,o=n instanceof g.ChunkedView?r.__spread(n.chunkVectors,t):r.__spread([this],t),a=i.ChunkedData.computeOffsets(o),s=a[a.length-1],l=new i.ChunkedData(this.type,s,o,0,-1,a);return this.clone(l,new g.ChunkedView(l))},t.prototype.slice=function(t,e){var n=this.length,i=this.view.size||1,o=n,a=(t||0)*i,s=("number"==typeof e?e:o)*i;s<0&&(s=o- -1*s%o),a<0&&(a=o- -1*a%o),s<a&&(a=(l=r.__read([s,a],2))[0],s=l[1]),o=!isFinite(o=s-a)||o<0?0:o;var l,c=this.data.slice(a,Math.min(o,n));return this.clone(c,this.view.clone(c))},t.prototype.acceptTypeVisitor=function(t){return o.TypeVisitor.visitTypeInline(t,this.type)},t.prototype.acceptVectorVisitor=function(t){return o.VectorVisitor.visitTypeInline(t,this.type,this)},t}();e.Vector=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.data.values},enumerable:!0,configurable:!0}),e.prototype.lows=function(){return this.asInt32(0,2)},e.prototype.highs=function(){return this.asInt32(1,2)},e.prototype.asInt32=function(t,e){void 0===t&&(t=0),void 0===e&&(e=2);var n=this.data.clone(new p.Int32);t>0&&(n=n.slice(t,this.length-t));var r=new E(n,new b.PrimitiveView(n,e));return r.length=this.length/e|0,r},e}(l);e.FlatVector=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.data.values},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueOffsets",{get:function(){return this.data.valueOffsets},enumerable:!0,configurable:!0}),e.prototype.getValueOffset=function(t){return this.valueOffsets[t]},e.prototype.getValueLength=function(t){return this.valueOffsets[t+1]-this.valueOffsets[t]},e}(l);e.ListVectorBase=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.getChildAt=function(t){return this.view.getChildAt(t)},Object.defineProperty(e.prototype,"childData",{get:function(){var t;if(t=this._childData)return t;if(!((t=this.data)instanceof i.ChunkedData))return this._childData=t.childData;var e=t.chunkVectors;return this._childData=e.reduce(function(t,e){return e.childData.reduce(function(t,n,r){return(t[r]||(t[r]=[])).push(e.getChildAt(r))&&t||t},t)},[]).map(function(t){return l.concat.apply(l,r.__spread(t)).data})},enumerable:!0,configurable:!0}),e}(l);e.NestedVector=d;var f=n(73),p=n(73),h=n(73),g=n(573),m=n(921),v=n(922),y=n(924),b=n(229),w=n(229),_=n(229),x=n(273),S=function(t){function e(e,n){return void 0===n&&(n=new b.NullView(e)),t.call(this,e,n)||this}return r.__extends(e,t),e}(l);e.NullVector=S;var C=function(t){function e(e,n){return void 0===n&&(n=new b.BoolView(e)),t.call(this,e,n)||this}return r.__extends(e,t),e.from=function(t){return new e(new i.BoolData(new f.Bool,t.length,null,x.packBools(t)))},Object.defineProperty(e.prototype,"values",{get:function(){return this.data.values},enumerable:!0,configurable:!0}),e}(l);e.BoolVector=C;var E=function(t){function e(n,r){return void 0===r&&(r=e.defaultView(n)),t.call(this,n,r)||this}return r.__extends(e,t),e.from=function(t,n){if(!0===n)return t instanceof Int32Array?new e(new i.FlatData(new p.Int64,t.length,null,t)):new e(new i.FlatData(new p.Uint64,t.length,null,t));switch(t.constructor){case Int8Array:return new e(new i.FlatData(new p.Int8,t.length,null,t));case Int16Array:return new e(new i.FlatData(new p.Int16,t.length,null,t));case Int32Array:return new e(new i.FlatData(new p.Int32,t.length,null,t));case Uint8Array:return new e(new i.FlatData(new p.Uint8,t.length,null,t));case Uint16Array:return new e(new i.FlatData(new p.Uint16,t.length,null,t));case Uint32Array:return new e(new i.FlatData(new p.Uint32,t.length,null,t))}throw new TypeError("Unrecognized Int data")},e.defaultView=function(t){return t.type.bitWidth<=32?new b.FlatView(t):new b.FixedSizeView(t,t.type.bitWidth/32|0)},e}(c);e.IntVector=E;var T=function(t){function e(n,r){return void 0===r&&(r=e.defaultView(n)),t.call(this,n,r)||this}return r.__extends(e,t),e.from=function(t){switch(t.constructor){case Uint16Array:return new e(new i.FlatData(new p.Float16,t.length,null,t));case Float32Array:return new e(new i.FlatData(new p.Float32,t.length,null,t));case Float64Array:return new e(new i.FlatData(new p.Float64,t.length,null,t))}throw new TypeError("Unrecognized Float data")},e.defaultView=function(t){return t.type.precision!==s.Precision.HALF?new b.FlatView(t):new b.Float16View(t)},e}(c);e.FloatVector=T;var M=function(t){function e(n,r){return void 0===r&&(r=e.defaultView(n)),t.call(this,n,r)||this}return r.__extends(e,t),e.defaultView=function(t){return t.type.unit===s.DateUnit.DAY?new w.DateDayView(t):new w.DateMillisecondView(t,2)},e.prototype.lows=function(){return this.type.unit===s.DateUnit.DAY?this.asInt32(0,1):this.asInt32(0,2)},e.prototype.highs=function(){return this.type.unit===s.DateUnit.DAY?this.asInt32(0,1):this.asInt32(1,2)},e.prototype.asEpochMilliseconds=function(){var t=this.data.clone(new p.Int32);switch(this.type.unit){case s.DateUnit.DAY:return new E(t,new _.TimestampDayView(t,1));case s.DateUnit.MILLISECOND:return new E(t,new _.TimestampMillisecondView(t,2))}throw new TypeError('Unrecognized date unit "'+s.DateUnit[this.type.unit]+'"')},e}(c);e.DateVector=M;var k=function(t){function e(e,n){return void 0===n&&(n=new b.FixedSizeView(e,4)),t.call(this,e,n)||this}return r.__extends(e,t),e}(c);e.DecimalVector=k;var A=function(t){function e(n,r){return void 0===r&&(r=e.defaultView(n)),t.call(this,n,r)||this}return r.__extends(e,t),e.defaultView=function(t){return t.type.bitWidth<=32?new b.FlatView(t):new b.FixedSizeView(t,t.type.bitWidth/32|0)},e.prototype.lows=function(){return this.type.bitWidth<=32?this.asInt32(0,1):this.asInt32(0,2)},e.prototype.highs=function(){return this.type.bitWidth<=32?this.asInt32(0,1):this.asInt32(1,2)},e}(c);e.TimeVector=A;var I=function(t){function e(e,n){return void 0===n&&(n=new b.FixedSizeView(e,2)),t.call(this,e,n)||this}return r.__extends(e,t),e.prototype.asEpochMilliseconds=function(){var t=this.data.clone(new p.Int32);switch(this.type.unit){case a.TimeUnit.SECOND:return new E(t,new _.TimestampSecondView(t,1));case a.TimeUnit.MILLISECOND:return new E(t,new _.TimestampMillisecondView(t,2));case a.TimeUnit.MICROSECOND:return new E(t,new _.TimestampMicrosecondView(t,2));case a.TimeUnit.NANOSECOND:return new E(t,new _.TimestampNanosecondView(t,2))}throw new TypeError('Unrecognized time unit "'+a.TimeUnit[this.type.unit]+'"')},e}(c);e.TimestampVector=I;var O=function(t){function e(n,r){return void 0===r&&(r=e.defaultView(n)),t.call(this,n,r)||this}return r.__extends(e,t),e.defaultView=function(t){return t.type.unit===s.IntervalUnit.YEAR_MONTH?new w.IntervalYearMonthView(t):new b.FixedSizeView(t,2)},e.prototype.lows=function(){return this.type.unit===s.IntervalUnit.YEAR_MONTH?this.asInt32(0,1):this.asInt32(0,2)},e.prototype.highs=function(){return this.type.unit===s.IntervalUnit.YEAR_MONTH?this.asInt32(0,1):this.asInt32(1,2)},e}(c);e.IntervalVector=O;var P=function(t){function e(e,n){return void 0===n&&(n=new v.BinaryView(e)),t.call(this,e,n)||this}return r.__extends(e,t),e.prototype.asUtf8=function(){return new D(this.data.clone(new f.Utf8))},e}(u);e.BinaryVector=P;var L=function(t){function e(e,n){return void 0===n&&(n=new b.FixedSizeView(e,e.type.byteWidth)),t.call(this,e,n)||this}return r.__extends(e,t),e}(c);e.FixedSizeBinaryVector=L;var D=function(t){function e(e,n){return void 0===n&&(n=new v.Utf8View(e)),t.call(this,e,n)||this}return r.__extends(e,t),e.prototype.asBinary=function(){return new P(this.data.clone(new f.Binary))},e}(u);e.Utf8Vector=D;var N=function(t){function e(e,n){return void 0===n&&(n=new v.ListView(e)),t.call(this,e,n)||this}return r.__extends(e,t),e}(u);e.ListVector=N;var R=function(t){function e(e,n){return void 0===n&&(n=new v.FixedSizeListView(e)),t.call(this,e,n)||this}return r.__extends(e,t),e}(l);e.FixedSizeListVector=R;var F=function(t){function e(e,n){return void 0===n&&(n=new y.MapView(e)),t.call(this,e,n)||this}return r.__extends(e,t),e.prototype.asStruct=function(){return new B(this.data.clone(new h.Struct(this.type.children)))},e}(d);e.MapVector=F;var B=function(t){function e(e,n){return void 0===n&&(n=new y.StructView(e)),t.call(this,e,n)||this}return r.__extends(e,t),e.prototype.asMap=function(t){return void 0===t&&(t=!1),new F(this.data.clone(new h.Map_(t,this.type.children)))},e}(d);e.StructVector=B;var j=function(t){function e(e,n){return void 0===n&&(n=e.type.mode===s.UnionMode.Sparse?new y.UnionView(e):new y.DenseUnionView(e)),t.call(this,e,n)||this}return r.__extends(e,t),e}(d);e.UnionVector=j;var q=function(t){function e(e,n){void 0===n&&(n=new m.DictionaryView(e.dictionary,new E(e.indices)));var r=t.call(this,e,n)||this;if(n instanceof b.ValidityView&&(n=n.view),e instanceof i.DictionaryData&&n instanceof m.DictionaryView)r.indices=n.indices,r.dictionary=e.dictionary;else{if(!(e instanceof i.ChunkedData&&n instanceof g.ChunkedView))throw new TypeError("Unrecognized DictionaryVector view");var o=n.chunkVectors;r.dictionary=o[o.length-1].dictionary,r.indices=o.reduce(function(t,e){return t?t.concat(e.indices):e.indices},null)}return r}return r.__extends(e,t),e.prototype.getKey=function(t){return this.indices.get(t)},e.prototype.getValue=function(t){return this.dictionary.get(t)},e.prototype.reverseLookup=function(t){return this.dictionary.indexOf(t)},e}(l);e.DictionaryVector=q,e.createVector=function(t){return function(e){return o.TypeVisitor.visitTypeInline(new t(e),e.type)}}(function(t){function e(e){var n=t.call(this)||this;return n.data=e,n}return r.__extends(e,t),e.prototype.visitNull=function(t){return new S(this.data)},e.prototype.visitInt=function(t){return new E(this.data)},e.prototype.visitFloat=function(t){return new T(this.data)},e.prototype.visitBinary=function(t){return new P(this.data)},e.prototype.visitUtf8=function(t){return new D(this.data)},e.prototype.visitBool=function(t){return new C(this.data)},e.prototype.visitDecimal=function(t){return new k(this.data)},e.prototype.visitDate=function(t){return new M(this.data)},e.prototype.visitTime=function(t){return new A(this.data)},e.prototype.visitTimestamp=function(t){return new I(this.data)},e.prototype.visitInterval=function(t){return new O(this.data)},e.prototype.visitList=function(t){return new N(this.data)},e.prototype.visitStruct=function(t){return new B(this.data)},e.prototype.visitUnion=function(t){return new j(this.data)},e.prototype.visitFixedSizeBinary=function(t){return new L(this.data)},e.prototype.visitFixedSizeList=function(t){return new R(this.data)},e.prototype.visitMap=function(t){return new F(this.data)},e.prototype.visitDictionary=function(t){return new q(this.data)},e}(o.TypeVisitor))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(430);e.TimelapseActions=i;var o=n(2434),a=n(601);e.TimelapseStateRecord=a.TimelapseStateRecord,e.CanvasLayerRecord=a.CanvasLayerRecord,e.DisplayStatusRecord=a.DisplayStatusRecord;e.TIMELAPSE_PATH="Timelapse";var s=r.StateManager.getInstance(),l={};l.Timelapse=o.reducer,s.addReducers(l),s.addRecord(a.DisplayStatusRecord),s.addRecord(a.CanvasLayerRecord),s.addRecord(a.TimelapseStateRecord)},,function(t,e,n){t.exports={assign:n(349),assignIn:n(794),assignInWith:n(562),assignWith:n(2943),at:n(2944),create:n(2945),defaults:n(96),defaultsDeep:n(629),entries:n(2947),entriesIn:n(2950),extend:n(164),extendWith:n(2951),findKey:n(452),findLastKey:n(2952),forIn:n(827),forInRight:n(2953),forOwn:n(538),forOwnRight:n(2954),functions:n(2955),functionsIn:n(2956),get:n(2),has:n(53),hasIn:n(510),invert:n(2957),invertBy:n(2959),invoke:n(2960),keys:n(44),keysIn:n(108),mapKeys:n(918),mapValues:n(327),merge:n(30),mergeWith:n(1072),omit:n(151),omitBy:n(451),pick:n(285),pickBy:n(407),result:n(2961),set:n(324),setWith:n(2962),toPairs:n(1073),toPairsIn:n(1075),transform:n(1080),unset:n(2963),update:n(2964),updateWith:n(2965),values:n(159),valuesIn:n(2966)}},,,,,,,,function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r=n(17),i=n(501),o=n(699),a=n(102);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(1328),i=n(503),o=n(1329),a=n(712),s=n(713),l=n(128),c=n(701),u=c(r),d=c(i),f=c(o),p=c(a),h=c(s),g=l;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case u:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return e}),t.exports=g},function(t,e){e.memoize=function(t,e){return function n(){"object"!=typeof n.cache&&(n.cache={});for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e(r):JSON.stringify(r);return o in n.cache?n.cache[o]:n.cache[o]=t.apply(t,r)}},e.maxArgumentCount=function(t){return Object.keys(t.signatures||{}).reduce(function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)},e.callWithRightArgumentCount=function(t,e,n){return Object.keys(t.signatures||{}).reduce(function(t,e){var n=(e.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)}},function(t,e,n){"use strict";var r=n(65);e.name="algorithm01",e.factory=function(t,e,n,i){var o=t.DenseMatrix;return function(t,e,n,a){var s=t._data,l=t._size,c=t._datatype,u=e._values,d=e._index,f=e._ptr,p=e._size,h=e._datatype;if(l.length!==p.length)throw new r(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g,m,v=l[0],y=l[1],b="string"==typeof c&&c===h?c:void 0,w=b?i.find(n,[b,b]):n,_=[];for(g=0;g<v;g++)_[g]=[];var x=[],S=[];for(m=0;m<y;m++){for(var C=m+1,E=f[m],T=f[m+1],M=E;M<T;M++)x[g=d[M]]=a?w(u[M],s[g][m]):w(s[g][m],u[M]),S[g]=C;for(g=0;g<v;g++)S[g]===C?_[g][m]=x[g]:_[g][m]=s[g][m]}return new o({data:_,size:[v,y],datatype:b})}}},function(t,e,n){"use strict";var r=n(13).nearlyEqual,i=n(215);e.name="larger",e.factory=function(t,e,o,a){var s=o(n(7)),l=o(n(92)),c=o(n(143)),u=o(n(93)),d=o(n(41)),f=o(n(35)),p=n(27),h=a("larger",{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,n){return t>n&&!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.gt(n)&&!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return h(t.value,e.value)},"string, string":function(t,e){return t>e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,h);break;default:n=l(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,h,!1);break;default:n=d(t,e,h)}}return n},"Array, Array":function(t,e){return h(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return h(s(t),e)},"Matrix, Array":function(t,e){return h(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,h,!1);break;default:n=f(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=u(e,t,h,!0);break;default:n=f(e,t,h,!0)}return n},"Array, any":function(t,e){return f(s(t),e,h,!1).valueOf()},"any, Array":function(t,e){return f(s(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+p.operators.larger+"${args[1]}\\right)"},h}},function(t,e,n){"use strict";var r=n(9);e.name="unaryMinus",e.factory=function(t,e,i,o){var a=n(27),s=o("unaryMinus",{number:function(t){return-t},Complex:function(t){return t.neg()},BigNumber:function(t){return t.neg()},Fraction:function(t){return t.neg()},Unit:function(t){var e=t.clone();return e.value=s(t.value),e},"Array | Matrix":function(t){return r(t,s,!0)}});return s.toTex={1:a.operators.unaryMinus+"\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(27),i=n(45).stringify,o=n(45).escape,a=n(28).hasOwnProperty,s=n(81).getSafeProperty;e.name="SymbolNode",e.path="expression.node",e.math=!0,e.factory=function(t,e,l,c,u){var d=l(n(37)).register,f=(l(n(37)).compile,l(n(83)));function p(e){return!!t.Unit&&t.Unit.isValuelessUnit(e)}function h(t){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof t)throw new TypeError('String expected for parameter "name"');this.name=t}function g(t){throw new Error("Undefined symbol "+t)}return h.prototype=new f,h.prototype.type="SymbolNode",h.prototype.isSymbolNode=!0,d(h.prototype.type,function(e,n,r){if(!(e instanceof h))throw new TypeError("No valid SymbolNode");n.undef=g,n.Unit=t.Unit,n.getSafeProperty=s,n.hasOwnProperty=a;var o=i(e.name);return a(r,e.name)?r[e.name]:e.name in n.math?"("+o+" in scope ? getSafeProperty(scope, "+o+") : getSafeProperty(math, "+o+"))":"("+o+" in scope ? getSafeProperty(scope, "+o+") : "+(p(e.name)?"new Unit(null, "+o+")":"undef("+o+")")+")"}),h.prototype.forEach=function(t){},h.prototype.map=function(t){return this.clone()},h.prototype.clone=function(){return new h(this.name)},h.prototype._toString=function(t){return this.name},h.prototype.toHTML=function(t){var e=o(this.name);return"true"==e||"false"==e?'<span class="math-symbol math-boolean">'+e+"</span>":"i"==e?'<span class="math-symbol math-imaginary-symbol">'+e+"</span>":"Infinity"==e?'<span class="math-symbol math-infinity-symbol">'+e+"</span>":"NaN"==e?'<span class="math-symbol math-nan-symbol">'+e+"</span>":"null"==e?'<span class="math-symbol math-null-symbol">'+e+"</span>":"uninitialized"==e?'<span class="math-symbol math-uninitialized-symbol">'+e+"</span>":'<span class="math-symbol">'+e+"</span>"},h.prototype._toTex=function(t){var e=!1;void 0===u[this.name]&&p(this.name)&&(e=!0);var n=r.toSymbol(this.name,e);return"\\"===n[0]?n:" "+n},h}},function(t,e,n){var r=n(222),i=n(788)(r);t.exports=i},function(t,e,n){var r=n(792);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},,,function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(575)),r(n(928)),r(n(929)),r(n(577)),r(n(930))},,function(t,e,n){var r=n(71),i=n(2378),o=n(310),a="Expected a function",s=Math.max,l=Math.min;t.exports=function(t,e,n){var c,u,d,f,p,h,g=0,m=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError(a);function b(e){var n=c,r=u;return c=u=void 0,g=e,f=t.apply(r,n)}function w(t){var n=t-h;return void 0===h||n>=e||n<0||v&&t-g>=d}function _(){var t=i();if(w(t))return x(t);p=setTimeout(_,function(t){var n=e-(t-h);return v?l(n,d-(t-g)):n}(t))}function x(t){return p=void 0,y&&c?b(t):(c=u=void 0,f)}function S(){var t=i(),n=w(t);if(c=arguments,u=this,h=t,n){if(void 0===p)return function(t){return g=t,p=setTimeout(_,e),m?b(t):f}(h);if(v)return p=setTimeout(_,e),b(h)}return void 0===p&&(p=setTimeout(_,e)),f}return e=o(e)||0,r(n)&&(m=!!n.leading,d=(v="maxWait"in n)?s(o(n.maxWait)||0,e):d,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==p&&clearTimeout(p),g=0,c=h=u=p=void 0},S.flush=function(){return void 0===p?f:x(i())},S}},,,,,,,,,,function(t,e,n){var r=n(296),i=n(3425),o=n(3426),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:a:l&&l in Object(t)?i(t):o(t)}},function(t,e,n){var r=n(665),i=n(670);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){"use strict";n.r(e),n.d(e,"forward",function(){return d}),n.d(e,"inverse",function(){return f}),n.d(e,"toPoint",function(){return p});var r=6,i="AJSAJS",o="AFAFAF",a=65,s=73,l=79,c=86,u=90;function d(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,n){var r=v(n),d=Math.floor(t/1e5),f=Math.floor(e/1e5)%20;return function(t,e,n){var r=n-1,d=i.charCodeAt(r),f=o.charCodeAt(r),p=d+t-1,h=f+e,g=!1;p>u&&(p=p-u+a-1,g=!0);(p===s||d<s&&p>s||(p>s||d<s)&&g)&&p++;(p===l||d<l&&p>l||(p>l||d<l)&&g)&&++p===s&&p++;p>u&&(p=p-u+a-1);h>c?(h=h-c+a-1,g=!0):g=!1;(h===s||f<s&&h>s||(h>s||f<s)&&g)&&h++;(h===l||f<l&&h>l||(h>l||f<l)&&g)&&++h===s&&h++;h>c&&(h=h-c+a-1);return String.fromCharCode(p)+String.fromCharCode(h)}(d,f,r)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}(function(t){var e,n,r,i,o,a,s,l=t.lat,c=t.lon,u=6378137,d=h(l),f=h(c);s=Math.floor((c+180)/6)+1,180===c&&(s=60);l>=56&&l<64&&c>=3&&c<12&&(s=32);l>=72&&l<84&&(c>=0&&c<9?s=31:c>=9&&c<21?s=33:c>=21&&c<33?s=35:c>=33&&c<42&&(s=37));a=h(6*(s-1)-180+3),.006739496752268451,e=u/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),n=Math.tan(d)*Math.tan(d),r=.006739496752268451*Math.cos(d)*Math.cos(d),i=Math.cos(d)*(f-a),o=u*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-3.418046101696858e-9*Math.sin(6*d));var p=.9996*e*(i+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,g=.9996*(o+e*Math.tan(d)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));l<0&&(g+=1e7);return{northing:Math.round(g),easting:Math.round(p),zoneNumber:s,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(l)}}({lat:t[1],lon:t[0]}),e)}function f(t){var e=m(y(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function p(t){var e=m(y(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function h(t){return t*(Math.PI/180)}function g(t){return t/Math.PI*180}function m(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,c,u,d,f,p=6378137,h=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,y=e;r<"N"&&(y-=1e7),u=6*(i-1)-180+3,f=(d=y/.9996/6367449.145945056)+(3*h/2-27*h*h*h/32)*Math.sin(2*d)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*d)+151*h*h*h/96*Math.sin(6*d),o=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),l=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),c=v/(.9996*o);var b=f-o*Math.tan(f)/l*(c*c/2-(5+3*a+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);b=g(b);var w,_=(c-(1+2*a+s)*c*c*c/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*c*c*c*c*c/120)/Math.cos(f);if(_=u+g(_),t.accuracy){var x=m({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:x.lat,right:x.lon,bottom:b,left:_}}else w={lat:b,lon:_};return w}function v(t){var e=t%r;return 0===e&&(e=r),e}function y(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,d="",f=0;!/[A-Z]/.test(e=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;d+=e,f++}var p=parseInt(d,10);if(0===f||f+3>n)throw"MGRSPoint bad conversion from: "+t;var h=t.charAt(f++);if(h<="A"||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+t;r=t.substring(f,f+=2);for(var g=v(p),m=function(t,e){var n=i.charCodeAt(e-1),r=1e5,o=!1;for(;n!==t.charCodeAt(0);){if(++n===s&&n++,n===l&&n++,n>u){if(o)throw"Bad character: "+t;n=a,o=!0}r+=1e5}return r}(r.charAt(0),g),y=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=o.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===s&&n++,n===l&&n++,n>c){if(i)throw"Bad character: "+t;n=a,i=!0}r+=1e5}return r}(r.charAt(1),g);y<b(h);)y+=2e6;var w=n-f;if(w%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var _,x,S,C=w/2,E=0,T=0;return C>0&&(_=1e5/Math.pow(10,C),x=t.substring(f,f+C),E=parseFloat(x)*_,S=t.substring(f+C),T=parseFloat(S)*_),{easting:E+m,northing:T+y,zoneLetter:h,zoneNumber:p,accuracy:_}}function b(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}e.default={forward:d,inverse:f,toPoint:p}},function(t,e,n){"use strict";var r=n(496),i=Object(r.a)(Object.getPrototypeOf,Object);e.a=i},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},function(t,e,n){var r=n(1286),i=n(1289);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){"use strict";t.exports=function(t,e,n){if(null==n)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}},function(t,e,n){"use strict";e.name="algorithm10",e.factory=function(t,e,n,r){var i=t.DenseMatrix;return function(t,e,n,o){var a=t._values,s=t._index,l=t._ptr,c=t._size,u=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,f=c[0],p=c[1],h=n;"string"==typeof u&&(d=u,e=r.convert(e,d),h=r.find(n,[d,d]));for(var g=[],m=new i({data:g,size:[f,p],datatype:d}),v=[],y=[],b=0;b<p;b++){for(var w=b+1,_=l[b],x=l[b+1],S=_;S<x;S++){var C=s[S];v[C]=a[S],y[C]=w}for(var E=0;E<f;E++)0===b&&(g[E]=[]),y[E]===w?g[E][b]=o?h(e,v[E]):h(v[E],e):g[E][b]=e}return m}}},function(t,e,n){"use strict";var r=n(13).nearlyEqual,i=n(215);e.name="smaller",e.factory=function(t,e,o,a){var s=o(n(7)),l=o(n(92)),c=o(n(143)),u=o(n(93)),d=o(n(41)),f=o(n(35)),p=n(27),h=a("smaller",{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,n){return t<n&&!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.lt(n)&&!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return-1===t.compare(e)},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return h(t.value,e.value)},"string, string":function(t,e){return t<e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,h);break;default:n=l(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,h,!1);break;default:n=d(t,e,h)}}return n},"Array, Array":function(t,e){return h(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return h(s(t),e)},"Matrix, Array":function(t,e){return h(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,h,!1);break;default:n=f(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=u(e,t,h,!0);break;default:n=f(e,t,h,!0)}return n},"Array, any":function(t,e){return f(s(t),e,h,!1).valueOf()},"any, Array":function(t,e){return f(s(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+p.operators.smaller+"${args[1]}\\right)"},h}},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(11).resize;e.name="zeros",e.factory=function(t,e,o,a){var s=o(n(7)),l=a("zeros",{"":function(){return"Array"===e.matrix?c([]):c([],"default")},"...number | BigNumber | string":function(t){return"string"==typeof t[t.length-1]?c(t,t.pop()):"Array"===e.matrix?c(t):c(t,"default")},Array:c,Matrix:function(t){var e=t.storage();return c(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return c(t.valueOf(),e)}});return l.toTex=void 0,l;function c(e,n){var o=function(e){var n=!1;return e.forEach(function(e,r,i){t.isBigNumber(e)&&(n=!0,i[r]=e.toNumber())}),n}(e)?new t.BigNumber(0):0;if(function(t){t.forEach(function(t){if("number"!=typeof t||!r(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")})}(e),n){var a=s(n);return e.length>0?a.resize(e,o):a}var l=[];return e.length>0?i(l,e,o):l}}},function(t,e,n){"use strict";var r=n(251),i=n(9);e.name="parse",e.path="expression",e.factory=function(t,e,o,a){var s=o(n(734)),l=o(n(524)),c=o(n(736)),u=o(n(737)),d=o(n(738)),f=o(n(254)),p=o(n(739)),h=o(n(522)),g=o(n(741)),m=o(n(313)),v=o(n(386)),y=o(n(314)),b=o(n(523)),w=o(n(186));function _(e,n){if(1!=arguments.length&&2!=arguments.length)throw new r("parse",arguments.length,1,2);if(E=n&&n.nodes?n.nodes:{},"string"==typeof e)return T=e,z();if(Array.isArray(e)||e instanceof t.Matrix)return i(e,function(t){if("string"!=typeof t)throw new TypeError("String expected");return T=t,z()});throw new TypeError("String or matrix expected")}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},S={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"'":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},C={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={},T="",M="",k=0,A="",I="",O=x.NULL,P=0,L=null;function D(){k++,A=T.charAt(k)}function N(){return T.charAt(k-1)}function R(){return T.charAt(k+1)}function F(){for(O=x.NULL,I="",M="";_.isWhitespace(A,P);)D();if("#"==A)for(;"\n"!=A&&""!=A;)M+=A,D();if(""!=A){if("\n"==A&&!P)return O=x.DELIMITER,I=A,void D();var t=A+R(),e=t+T.charAt(k+2);if(3==e.length&&S[e])return O=x.DELIMITER,I=e,D(),D(),void D();if(2==t.length&&S[t])return O=x.DELIMITER,I=t,D(),void D();if(S[A])return O=x.DELIMITER,I=A,void D();if(_.isDigitDot(A)){if(O=x.NUMBER,"."==A)I+=A,D(),_.isDigit(A)||(O=x.DELIMITER);else{for(;_.isDigit(A);)I+=A,D();_.isDecimalMark(A,R())&&(I+=A,D())}for(;_.isDigit(A);)I+=A,D();if(t=R(),"E"==A||"e"==A)if(_.isDigit(t)||"-"==t||"+"==t){if(I+=A,D(),"+"!=A&&"-"!=A||(I+=A,D()),!_.isDigit(A))throw ot('Digit expected, got "'+A+'"');for(;_.isDigit(A);)I+=A,D();if(_.isDecimalMark(A,R()))throw ot('Digit expected, got "'+A+'"')}else if("."==t)throw D(),ot('Digit expected, got "'+A+'"')}else{if(!_.isAlpha(A,N(),R())){for(O=x.UNKNOWN;""!=A;)I+=A,D();throw ot('Syntax error in part "'+I+'"')}for(;_.isAlpha(A,N(),R())||_.isDigit(A);)I+=A,D();O=C.hasOwnProperty(I)?x.DELIMITER:x.SYMBOL}}else O=x.DELIMITER}function B(){do{F()}while("\n"==I)}function j(){P++}function q(){P--}function z(){k=0,A=T.charAt(0),P=0,L=null,F();var t=function(){var t,e,n=[];for(""!=I&&"\n"!=I&&";"!=I&&((t=U()).comment=M);"\n"==I||";"==I;)0==n.length&&t&&(e=";"!=I,n.push({node:t,visible:e})),F(),"\n"!=I&&";"!=I&&""!=I&&((t=U()).comment=M,e=";"!=I,n.push({node:t,visible:e}));return n.length>0?new u(n):(t||((t=new f("undefined","undefined")).comment=M),t)}();if(""!=I)throw O==x.DELIMITER?at("Unexpected operator "+I):ot('Unexpected part "'+I+'"');return t}function U(){var e,n,r,i,o=function(){for(var t=function(){for(var t=$();"or"==I;)B(),t=new m("or","or",[t,$()]);return t}();"?"==I;){var e=L;L=P,B();var n=t,r=U();if(":"!=I)throw ot("False part of conditional expression expected");L=null,B();var i=U();t=new d(n,r,i),L=e}return t}();if("="==I){if(t.isSymbolNode(o))return e=o.name,B(),r=U(),new c(new w(e),r);if(t.isAccessorNode(o))return B(),r=U(),new c(o.object,o.index,r);if(t.isFunctionNode(o)&&t.isSymbolNode(o.fn)&&(i=!0,n=[],e=o.name,o.args.forEach(function(e,r){t.isSymbolNode(e)?n[r]=e.name:i=!1}),i))return B(),r=U(),new p(e,n,r);throw ot("Invalid left hand side of assignment operator =")}return o}function $(){for(var t=V();"xor"==I;)B(),t=new m("xor","xor",[t,V()]);return t}function V(){for(var t=H();"and"==I;)B(),t=new m("and","and",[t,H()]);return t}function H(){for(var t=W();"|"==I;)B(),t=new m("|","bitOr",[t,W()]);return t}function W(){for(var t=G();"^|"==I;)B(),t=new m("^|","bitXor",[t,G()]);return t}function G(){for(var t=Y();"&"==I;)B(),t=new m("&","bitAnd",[t,Y()]);return t}function Y(){var t,e,n,r,i;for(t=K(),e={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};e.hasOwnProperty(I);)r=e[n=I],B(),i=[t,K()],t=new m(n,r,i);return t}function K(){var t,e,n,r,i;for(t=X(),e={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};e.hasOwnProperty(I);)r=e[n=I],B(),i=[t,X()],t=new m(n,r,i);return t}function X(){var t,e,n,r,i;for(t=Q(),e={to:"to",in:"to"};e.hasOwnProperty(I);)r=e[n=I],B(),"in"===n&&""===I?t=new m("*","multiply",[t,new w("in")],!0):(i=[t,Q()],t=new m(n,r,i));return t}function Q(){var t,e=[];if(t=":"==I?new f("1","number"):Z(),":"==I&&L!==P){for(e.push(t);":"==I&&e.length<3;)B(),")"==I||"]"==I||","==I||""==I?e.push(new w("end")):e.push(Z());t=3==e.length?new b(e[0],e[2],e[1]):new b(e[0],e[1])}return t}function Z(){var t,e,n,r,i;for(t=J(),e={"+":"add","-":"subtract"};e.hasOwnProperty(I);)r=e[n=I],B(),i=[t,J()],t=new m(n,r,i);return t}function J(){var e,n,r,i,o;for(n=e=tt(),r={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};;)if(r.hasOwnProperty(I))o=r[i=I],B(),n=tt(),e=new m(i,o,[e,n]);else{if(!(O===x.SYMBOL||"in"===I&&t.isConstantNode(e))&&(O!==x.NUMBER||t.isConstantNode(n)||t.isOperatorNode(n)&&"!"!==n.op)&&"("!==I)break;n=tt(),e=new m("*","multiply",[e,n],!0)}return e}function tt(){var t,e,n,r={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return r.hasOwnProperty(I)?(n=r[I],t=I,B(),e=[tt()],new m(t,n,e)):function(){var t,e,n,r;return t=function(){var t,e,n,r;for(t=function(){var t=[];if(O==x.SYMBOL&&E.hasOwnProperty(I)){var e=E[I];if(F(),"("==I){if(t=[],j(),F(),")"!=I)for(t.push(U());","==I;)F(),t.push(U());if(")"!=I)throw ot("Parenthesis ) expected");q(),F()}return new e(t)}return function(){var t;return O==x.SYMBOL||O==x.DELIMITER&&I in C?(t=I,F(),et(new w(t))):function(){var t;return'"'==I?(t=nt(),et(new f(t,"string"))):function(){var t,e,n,r;if("["==I){if(j(),F(),"]"!=I){var i=rt();if(";"==I){for(n=1,e=[i];";"==I;)F(),e[n]=rt(),n++;if("]"!=I)throw ot("End of matrix ] expected");q(),F(),r=e[0].items.length;for(var o=1;o<n;o++)if(e[o].items.length!=r)throw at("Column dimensions mismatch ("+e[o].items.length+" != "+r+")");t=new l(e)}else{if("]"!=I)throw ot("End of matrix ] expected");q(),F(),t=i}}else q(),F(),t=new l([]);return et(t)}return function(){if("{"==I){var t,e={};do{if(F(),"}"!=I){if('"'==I)t=nt();else{if(O!=x.SYMBOL)throw ot("Symbol or string expected as object key");t=I,F()}if(":"!=I)throw ot("Colon : expected after object key");F(),e[t]=U()}}while(","==I);if("}"!=I)throw ot("Comma , or bracket } expected after object value");F();var n=new g(e);return n=et(n)}return function(){var t;return O==x.NUMBER?(t=I,F(),new f(t,"number")):function(){var t;if("("==I){if(j(),F(),t=U(),")"!=I)throw ot("Parenthesis ) expected");return q(),F(),t=et(t=new v(t))}return function(){throw ot(""==I?"Unexpected end of expression":"'"===I?"Value expected. Note: strings must be enclosed by double quotes":"Value expected")}()}()}()}()}()}()}()}(),e={"!":"factorial","'":"transpose"};e.hasOwnProperty(I);)r=e[n=I],F(),t=et(t=new m(n,r,[t]));return t}(),("^"==I||".^"==I)&&(n="^"==(e=I)?"pow":"dotPow",B(),r=[t,tt()],t=new m(e,n,r)),t}()}function et(e,n){for(var r;!("("!==I&&"["!==I&&"."!==I||n&&-1===n.indexOf(I));)if(r=[],"("===I){if(!(t.isSymbolNode(e)||t.isAccessorNode(e)||t.isFunctionNode(e)))return e;if(j(),F(),")"!==I)for(r.push(U());","===I;)F(),r.push(U());if(")"!==I)throw ot("Parenthesis ) expected");q(),F(),e=new y(e,r)}else if("["===I){if(j(),F(),"]"!==I)for(r.push(U());","===I;)F(),r.push(U());if("]"!==I)throw ot("Parenthesis ] expected");q(),F(),e=new s(e,new h(r))}else{if(F(),O!==x.SYMBOL)throw ot("Property name expected after dot");r.push(new f(I)),F(),e=new s(e,new h(r,!0))}return e}function nt(){for(var t="";""!=A&&'"'!=A;)"\\"==A&&(t+=A,D()),t+=A,D();if(F(),'"'!=I)throw ot('End of string " expected');return F(),t}function rt(){for(var t=[U()],e=1;","==I;)F(),t[e]=U(),e++;return new l(t)}function it(){return k-I.length+1}function ot(t){var e=it(),n=new SyntaxError(t+" (char "+e+")");return n.char=e,n}function at(t){var e=it(),n=new SyntaxError(t+" (char "+e+")");return n.char=e,n}return _.isAlpha=function(t,e,n){return _.isValidLatinOrGreek(t)||_.isValidMathSymbol(t,n)||_.isValidMathSymbol(e,t)},_.isValidLatinOrGreek=function(t){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(t)},_.isValidMathSymbol=function(t,e){return/^[\uD835]$/.test(t)&&/^[\uDC00-\uDFFF]$/.test(e)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(e)},_.isWhitespace=function(t,e){return" "==t||"\t"==t||"\n"==t&&e>0},_.isDecimalMark=function(t,e){return"."==t&&"/"!==e&&"*"!==e&&"^"!==e},_.isDigitDot=function(t){return t>="0"&&t<="9"||"."==t},_.isDigit=function(t){return t>="0"&&t<="9"},_}},function(t,e,n){var r=n(311);e.transform=function(t){return t&&t.isIndexError?new r(t.index+1,t.min+1,void 0!==t.max?t.max+1:void 0):t}},function(t,e,n){"use strict";var r=n(382);t.exports=function t(e,n){r(e)&&(e=e.valueOf());for(var i=0,o=e.length;i<o;i++){var a=e[i];Array.isArray(a)?t(a,n):n(a)}}},function(t,e,n){var r=n(536),i=n(44);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e){var n="__lodash_placeholder__";t.exports=function(t,e){for(var r=-1,i=t.length,o=0,a=[];++r<i;){var s=t[r];s!==e&&s!==n||(t[r]=n,a[o++]=r)}return a}},function(t,e,n){var r=n(250),i=n(60),o=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var s=null==n?0:i(n);return s<0&&(s=o(a+s,0)),r(t,e,s)}},function(t,e,n){var r=n(507);t.exports=function(t,e){return r(t,e)}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new function(t,e,n){this.fn=t,this.context=e,this.once=n||!1}(n,r||t,o),s=i?i+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,o),!0;case 6:return u.fn.call(u.context,e,n,r,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;case 4:u[c].fn.call(u[c].context,e,n,r);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},l.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==e||r&&!a[l].once||n&&a[l].context!==n)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&s(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},,function(t,e,n){var r=n(51),i=n(165),o=n(263),a=n(223),s=r(function(t,e){var n=a(e,o(s));return i(t,32,void 0,e,n)});s.placeholder={},t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(273),o=function(){function t(t){this.length=t.length,this.values=t.values}return t.prototype.clone=function(t){return new this.constructor(t)},t.prototype.isValid=function(){return!0},t.prototype.get=function(t){return this.values[t]},t.prototype.set=function(t,e){return this.values[t]=e},t.prototype.toArray=function(){return this.values.subarray(0,this.length)},t.prototype.indexOf=function(t){var e,n,i=0;try{for(var o=r.__values(this),a=o.next();!a.done;a=o.next()){if(a.value===t)return i;++i}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return-1},t.prototype[Symbol.iterator]=function(){return this.values.subarray(0,this.length)[Symbol.iterator]()},t}();e.FlatView=o;var a=function(){function t(t){this.length=t.length}return t.prototype.clone=function(t){return new this.constructor(t)},t.prototype.isValid=function(){return!0},t.prototype.set=function(){},t.prototype.get=function(){return null},t.prototype.toArray=function(){return r.__spread(this)},t.prototype.indexOf=function(t){return null===t&&this.length>0?0:-1},t.prototype[Symbol.iterator]=function(){var t,e;return r.__generator(this,function(n){switch(n.label){case 0:t=-1,e=this.length,n.label=1;case 1:return++t<e?[4,null]:[3,4];case 2:n.sent(),n.label=3;case 3:return[3,1];case 4:return[2]}})},t}();e.NullView=a;var s=function(t){function e(e){var n=t.call(this,e)||this;return n.offset=e.offset,n}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.get=function(t){var e=this.offset+t;return i.getBool(null,t,this.values[e>>3],e%8)},e.prototype.set=function(t,e){i.setBool(this.values,this.offset+t,e)},e.prototype[Symbol.iterator]=function(){return i.iterateBits(this.values,this.offset,this.length,this.values,i.getBool)},e}(o);e.BoolView=s;var l=function(){function t(t,e){this.view=e,this.length=t.length,this.offset=t.offset,this.nullBitmap=t.nullBitmap}return t.prototype.clone=function(e){return new t(e,this.view.clone(e))},t.prototype.toArray=function(){return r.__spread(this)},t.prototype.indexOf=function(t){var e,n,i=0;try{for(var o=r.__values(this),a=o.next();!a.done;a=o.next()){if(a.value===t)return i;++i}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return-1},t.prototype.isValid=function(t){var e=this.offset+t;return i.getBool(null,t,this.nullBitmap[e>>3],e%8)},t.prototype.get=function(t){var e=this.offset+t;return this.getNullable(this.view,t,this.nullBitmap[e>>3],e%8)},t.prototype.set=function(t,e){i.setBool(this.nullBitmap,this.offset+t,null!=e)&&this.view.set(t,e)},t.prototype[Symbol.iterator]=function(){return i.iterateBits(this.nullBitmap,this.offset,this.length,this.view,this.getNullable)},t.prototype.getNullable=function(t,e,n,r){return i.getBool(t,e,n,r)?t.get(e):null},t}();e.ValidityView=l;var c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.size=n||1,r.ArrayType=e.type.ArrayType,r}return r.__extends(e,t),e.prototype.clone=function(t){return new this.constructor(t,this.size)},e.prototype.getValue=function(t,e,n){return t[e*n]},e.prototype.setValue=function(t,e,n,r){t[e*n]=r},e.prototype.get=function(t){return this.getValue(this.values,t,this.size)},e.prototype.set=function(t,e){return this.setValue(this.values,t,this.size,e)},e.prototype.toArray=function(){return this.size>1?new this.ArrayType(this):this.values.subarray(0,this.length)},e.prototype[Symbol.iterator]=function(){var t,e,n,i,o,a;return r.__generator(this,function(r){switch(r.label){case 0:t=this.getValue,n=(e=this).size,i=e.values,o=e.length,a=-1,r.label=1;case 1:return++a<o?[4,t(i,a,n)]:[3,4];case 2:r.sent(),r.label=3;case 3:return[3,1];case 4:return[2]}})},e}(o);e.PrimitiveView=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return this.values},e.prototype.indexOf=function(t){var e,n,i=0;try{for(var o=r.__values(this),a=o.next();!a.done;a=o.next()){if(a.value.every(function(e,n){return e===t[n]}))return i;++i}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return-1},e.prototype.getValue=function(t,e,n){return t.subarray(e*n,e*n+n)},e.prototype.setValue=function(t,e,n,r){t.set(r.subarray(0,n),e*n)},e}(c);e.FixedSizeView=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return new Float32Array(this)},e.prototype.getValue=function(t,e,n){return(t[e*n]-32767)/32767},e.prototype.setValue=function(t,e,n,r){t[e*n]=32767*r+32767},e}(c);e.Float16View=d;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return k(t,e*n)},e.prototype.setValue=function(t,e,n,r){t[e*n]=r.valueOf()/864e5},e}(c);e.DateDayView=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return A(t,e*n)},e.prototype.setValue=function(t,e,n,r){var i=r.valueOf();t[e*n]=i%4294967296|0,t[e*n+n]=i/4294967296|0},e}(u);e.DateMillisecondView=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return S(t,e*n)},e.prototype.setValue=function(t,e,n,r){t[e*n]=r/864e5|0},e}(c);e.TimestampDayView=h;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return x(t,e*n)},e.prototype.setValue=function(t,e,n,r){t[e*n]=r/1e3|0},e}(c);e.TimestampSecondView=g;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return C(t,e*n)},e.prototype.setValue=function(t,e,n,r){t[e*n]=r%4294967296|0,t[e*n+n]=r/4294967296|0},e}(c);e.TimestampMillisecondView=m;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return E(t,e*n)},e.prototype.setValue=function(t,e,n,r){t[e*n]=r/1e3%4294967296|0,t[e*n+n]=r/1e3/4294967296|0},e}(c);e.TimestampMicrosecondView=v;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return T(t,e*n)},e.prototype.setValue=function(t,e,n,r){t[e*n]=r/1e6%4294967296|0,t[e*n+n]=r/1e6/4294967296|0},e}(c);e.TimestampNanosecondView=y;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){var r=t[e*n];return new Int32Array([r/12,r%12])},e.prototype.setValue=function(t,e,n,r){t[e*n]=12*r[0]+r[1]%12},e}(c);e.IntervalYearMonthView=b;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return t[e*n]/12},e.prototype.setValue=function(t,e,n,r){t[e*n]=12*r+t[e*n]%12},e}(c);e.IntervalYearView=w;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toArray=function(){return r.__spread(this)},e.prototype.getValue=function(t,e,n){return t[e*n]%12},e.prototype.setValue=function(t,e,n,r){t[e*n]=12*t[e*n]+r%12},e}(c);function x(t,e){return 1e3*t[e]}function S(t,e){return 864e5*t[e]}function C(t,e){return 4294967296*t[e+1]+(t[e]>>>0)}function E(t,e){return t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3}function T(t,e){return t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6}function M(t){return new Date(t)}function k(t,e){return M(S(t,e))}function A(t,e){return M(C(t,e))}e.IntervalMonthView=_,e.epochSecondsToMs=x,e.epochDaysToMs=S,e.epochMillisecondsLongToMs=C,e.epochMicrosecondsLongToMs=E,e.epochNanosecondsLongToMs=T,e.epochMillisecondsToDate=M,e.epochDaysToDate=k,e.epochSecondsToDate=function(t,e){return M(x(t,e))},e.epochNanosecondsLongToDate=function(t,e){return M(T(t,e))},e.epochMillisecondsLongToDate=A},,,,,,,,,,,,,,,function(t,e,n){var r=n(3424),i=n(3429);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(1174),i=n(3456),o=n(207);t.exports=function(t){return o(t)?r(t):i(t)}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServerLabel={CQL:"TrackFilter_CQL",SEND:"TrackFilter_SEND",STOP:"TrackFilter_STOP"},e.DisplayLabel={CQL:"Basic",SEND:"Force Send",STOP:"Force Stop"},e.IconClass={CQL:"fa-filter",SEND:"fa-arrow-circle-o-right",STOP:"fa-ban"}},function(t,e,n){var r=n(79).Symbol;t.exports=r},function(t,e,n){(function(t){var r=n(79),i=n(1325),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;t.exports=l}).call(this,n(120)(t))},function(t,e,n){var r=n(511),i=n(1335),o=n(1336);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},function(t,e,n){"use strict";function r(t,e,n,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=i,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(void 0!=i?"-"+i:"")+" expected)",this.stack=(new Error).stack}r.prototype=new Error,r.prototype.constructor=Error,r.prototype.name="ArgumentsError",r.prototype.isArgumentsError=!0,t.exports=r},function(t,e,n){"use strict";var r=n(142),i=n(65),o=(n(81).getSafeProperty,n(81).setSafeProperty,r.string),a=r.array,s=r.object,l=r.number,c=Array.isArray,u=l.isNumber,d=l.isInteger,f=o.isString,p=a.validateIndex;e.name="DenseMatrix",e.path="type",e.factory=function(t,e,l,h){var g=l(n(516));function m(e,n){if(!(this instanceof m))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!f(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e))"DenseMatrix"===e.type?(this._data=s.clone(e._data),this._size=s.clone(e._size),this._datatype=n||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=n||e._datatype);else if(e&&c(e.data)&&c(e.size))this._data=e.data,this._size=e.size,this._datatype=n||e.datatype;else if(c(e))this._data=function t(e){for(var n=0,r=e.length;n<r;n++){var i=e[n];c(i)?e[n]=t(i):i&&!0===i.isMatrix&&(e[n]=t(i.valueOf()))}return e}(e),this._size=a.size(this._data),a.validate(this._data,this._size),this._datatype=n;else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._data=[],this._size=[0],this._datatype=n}}m.prototype=new g,m.prototype.type="DenseMatrix",m.prototype.isDenseMatrix=!0,m.prototype.storage=function(){return"dense"},m.prototype.datatype=function(){return this._datatype},m.prototype.create=function(t,e){return new m(t,e)},m.prototype.subset=function(e,n,r){switch(arguments.length){case 1:return function(e,n){if(!t.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r=n.size();if(r.length!=e._size.length)throw new i(r.length,e._size.length);for(var o=n.min(),a=n.max(),s=0,l=e._size.length;s<l;s++)p(o[s],e._size[s]),p(a[s],e._size[s]);return new m(function t(e,n,r,i){var o=i===r-1,a=n.dimension(i);return o?a.map(function(t){return p(t,e.length),e[t]}).valueOf():a.map(function(o){p(o,e.length);var a=e[o];return t(a,n,r,i+1)}).valueOf()}(e._data,n,r.length,0),e._datatype)}(this,e);case 2:case 3:return function(e,n,r,o){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var l,c=n.size(),u=n.isScalar();if(t.isMatrix(r)?(l=r.size(),r=r.valueOf()):l=a.size(r),u){if(0!==l.length)throw new TypeError("Scalar expected");e.set(n.min(),r,o)}else{if(c.length<e._size.length)throw new i(c.length,e._size.length,"<");if(l.length<c.length){for(var d=0,f=0;1===c[d]&&1===l[d];)d++;for(;1===c[d];)f++,d++;r=a.unsqueeze(r,c.length,f,l)}if(!s.deepEqual(c,l))throw new i(c,l,">");var h=n.max().map(function(t){return t+1});y(e,h,o);var g=c.length;!function t(e,n,r,i,o){var a=o===i-1,s=n.dimension(o);a?s.forEach(function(t,n){p(t),e[t]=r[n[0]]}):s.forEach(function(a,s){p(a),t(e[a],n,r[s[0]],i,o+1)})}(e._data,n,r,g,0)}return e}(this,e,n,r);default:throw new SyntaxError("Wrong number of arguments")}},m.prototype.get=function(t){if(!c(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);for(var e=0;e<t.length;e++)p(t[e],this._size[e]);for(var n=this._data,r=0,o=t.length;r<o;r++){var a=t[r];p(a,n.length),n=n[a]}return n},m.prototype.set=function(t,e,n){if(!c(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new i(t.length,this._size.length,"<");var r,o,a;y(this,t.map(function(t){return t+1}),n);var s=this._data;for(r=0,o=t.length-1;r<o;r++)a=t[r],p(a,s.length),s=s[a];return a=t[t.length-1],p(a,s.length),s[a]=e,this},m.prototype.resize=function(t,e,n){if(!c(t))throw new TypeError("Array expected");var r=n?this.clone():this;return v(r,t,e)};var v=function(t,e,n){if(0===e.length){for(var r=t._data;c(r);)r=r[0];return r}return t._size=e.slice(0),t._data=a.resize(t._data,t._size,n),t};function y(t,e,n){for(var r=t._size.slice(0),i=!1;r.length<e.length;)r.push(0),i=!0;for(var o=0,a=e.length;o<a;o++)e[o]>r[o]&&(r[o]=e[o],i=!0);i&&v(t,r,n)}return m.prototype.reshape=function(t,e){var n=e?this.clone():this;return n._data=a.reshape(n._data,t),n._size=t.slice(0),n},m.prototype.clone=function(){return new m({data:s.clone(this._data),size:s.clone(this._size),datatype:this._datatype})},m.prototype.size=function(){return this._size.slice(0)},m.prototype.map=function(t){var e=this,n=function(r,i){return c(r)?r.map(function(t,e){return n(t,i.concat(e))}):t(r,i,e)};return new m({data:n(this._data,[]),size:s.clone(this._size),datatype:this._datatype})},m.prototype.forEach=function(t){var e=this,n=function(r,i){c(r)?r.forEach(function(t,e){n(t,i.concat(e))}):t(r,i,e)};n(this._data,[])},m.prototype.toArray=function(){return s.clone(this._data)},m.prototype.valueOf=function(){return this._data},m.prototype.format=function(t){return o.format(this._data,t)},m.prototype.toString=function(){return o.format(this._data)},m.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},m.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!u(e)||!d(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var n=e>0?e:0,r=e<0?-e:0,i=this._size[0],o=this._size[1],a=Math.min(i-r,o-n),s=[],l=0;l<a;l++)s[l]=this._data[l+r][l+n];return new m({data:s,size:[a],datatype:this._datatype})},m.diagonal=function(e,n,r,i,o){if(!c(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!u(e)||!d(e)||e<1)throw new Error("Size values must be positive integers");return e}),r){if(t.isBigNumber(r)&&(r=r.toNumber()),!u(r)||!d(r))throw new TypeError("The parameter k must be an integer number")}else r=0;i&&f(o)&&(i=h.convert(i,o));var s,l=r>0?r:0,p=r<0?-r:0,g=e[0],v=e[1],y=Math.min(g-p,v-l);if(c(n)){if(n.length!==y)throw new Error("Invalid value array length");s=function(t){return n[t]}}else if(t.isMatrix(n)){var b=n.size();if(1!==b.length||b[0]!==y)throw new Error("Invalid matrix length");s=function(t){return n.get([t])}}else s=function(){return n};i||(i=t.isBigNumber(s(0))?new t.BigNumber(0):0);var w=[];if(e.length>0){w=a.resize(w,e,i);for(var _=0;_<y;_++)w[_+p][_+l]=s(_)}return new m({data:w,size:[g,v]})},m.fromJSON=function(t){return new m(t)},m.prototype.swapRows=function(t,e){if(!(u(t)&&d(t)&&u(e)&&d(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return p(t,this._size[0]),p(e,this._size[0]),m._swapRows(t,e,this._data),this},m._swapRows=function(t,e,n){var r=n[t];n[t]=n[e],n[e]=r},t.Matrix._storage.dense=m,t.Matrix._storage.default=m,m},e.lazy=!1},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(11).size;e.name="pow",e.factory=function(t,e,o,a){var s=n(27),l=o(n(385)),c=o(n(66)),u=o(n(7)),d=o(n(724)),f=o(n(518)),p=a("pow",{"number, number":h,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(n,r){return r.isInteger()||n>=0||e.predictable?n.pow(r):new t.Complex(n.toNumber(),0).pow(r.toNumber(),0)},"Fraction, Fraction":function(t,n){if(1!==n.d){if(e.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return h(t.valueOf(),n.valueOf())}return t.pow(n)},"Array, number":g,"Array, BigNumber":function(t,e){return g(t,e.toNumber())},"Matrix, number":m,"Matrix, BigNumber":function(t,e){return m(t,e.toNumber())},"Unit, number":function(t,e){return t.pow(e)}});function h(n,i){if(e.predictable&&!r(i)&&n<0)try{var o=d(i),a=f(o);if((i===a||Math.abs((i-a)/i)<1e-14)&&o.d%2==1)return(o.n%2==0?1:-1)*Math.pow(-n,i)}catch(t){}return n*n<1&&i===1/0||n*n>1&&i===-1/0?0:e.predictable&&(n<-1&&i===1/0||n>-1&&n<0&&i===-1/0)?NaN:r(i)||n>=0||e.predictable?Math.pow(n,i):new t.Complex(n,0).pow(i,0)}function g(t,e){if(!r(e)||e<0)throw new TypeError("For A^b, b must be a positive integer (value is "+e+")");var n=i(t);if(2!=n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!=n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");for(var o=l(n[0]).valueOf(),a=t;e>=1;)1==(1&e)&&(o=c(a,o)),e>>=1,a=c(a,a);return o}function m(t,e){return u(g(t.valueOf(),e))}return p.toTex={2:"\\left(${args[0]}\\right)"+s.operators.pow+"{${args[1]}}"},p}},function(t,e,n){"use strict";var r=n(383).type,i=n(45).stringify,o=n(45).escape,a=n(27).escape;e.name="ConstantNode",e.path="expression.node",e.factory=function(t,e,s,l){var c=s(n(37)).register,u=(s(n(37)).compile,s(n(83)));function d(t,e){if(!(this instanceof d))throw new SyntaxError("Constructor must be called with the new operator");if(e){if("string"!=typeof e)throw new TypeError('String expected for parameter "valueType"');if("string"!=typeof t)throw new TypeError('String expected for parameter "value"');this.value=t,this.valueType=e}else this.value=t+"",this.valueType=r(t);if(!f[this.valueType])throw new TypeError('Unsupported type of value "'+this.valueType+'"')}var f={number:!0,string:!0,boolean:!0,undefined:!0,null:!0};return d.prototype=new u,d.prototype.type="ConstantNode",d.prototype.isConstantNode=!0,c(d.prototype.type,function(t,n,r){if(!(t instanceof d))throw new TypeError("No valid ConstantNode");switch(t.valueType){case"number":return"BigNumber"===e.number?"math.bignumber("+i(t.value)+")":"Fraction"===e.number?"math.fraction("+i(t.value)+")":(function(t){if("string"!=typeof t||!/^[\-+]?((\d+\.?\d*)|(\d*\.?\d+))([eE][+\-]?\d+)?$/.test(t))throw new Error('Invalid numeric value "'+t+'"')}(t.value),t.value.replace(/^(0*)[0-9]/,function(t,e){return t.substring(e.length)}));case"string":return i(t.value);case"boolean":return"true"===String(t.value)?"true":"false";case"undefined":return"undefined";case"null":return"null";default:throw new TypeError('Unsupported type of constant "'+t.valueType+'"')}}),d.prototype.forEach=function(t){},d.prototype.map=function(t){return this.clone()},d.prototype.clone=function(){return new d(this.value,this.valueType)},d.prototype._toString=function(t){switch(this.valueType){case"string":return i(this.value);default:return this.value}},d.prototype.toHTML=function(t){var e=o(this.value);switch(this.valueType){case"number":return'<span class="math-number">'+e+"</span>";case"string":return'<span class="math-string">'+e+"</span>";case"boolean":return'<span class="math-boolean">'+e+"</span>";case"null":return'<span class="math-null-symbol">'+e+"</span>";case"undefined":return'<span class="math-undefined">'+e+"</span>";default:return'<span class="math-symbol">'+e+"</span>"}},d.prototype._toTex=function(t){var e,n=this.value;switch(this.valueType){case"string":return"\\mathtt{"+a(i(n))+"}";case"number":return-1!==(e=n.toLowerCase().indexOf("e"))?n.substring(0,e)+"\\cdot10^{"+n.substring(e+1)+"}":n;default:return n}},d}},function(t,e,n){"use strict";var r=n(382);t.exports=function(t){return Array.isArray(t)||r(t)}},function(t,e,n){"use strict";var r=n(28).extend;e.name="divide",e.factory=function(t,e,i,o){var a=i(n(82)),s=i(n(66)),l=i(n(747)),c=i(n(7)),u=i(n(94)),d=i(n(35)),f=o("divide",r({"Array | Matrix, Array | Matrix":function(t,e){return s(t,l(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,a,!1);break;case"dense":n=d(t,e,a,!1)}return n},"Array, any":function(t,e){return d(c(t),e,a,!1).valueOf()},"any, Array | Matrix":function(t,e){return s(t,l(e))}},a.signatures));return f.toTex={2:"\\frac{${args[0]}}{${args[1]}}"},f}},function(t,e,n){"use strict";var r=n(9);e.name="sqrt",e.factory=function(t,e,n,i){var o=i("sqrt",{number:a,Complex:function(t){return t.sqrt()},BigNumber:function(t){return!t.isNegative()||e.predictable?t.sqrt():a(t.toNumber())},"Array | Matrix":function(t){return r(t,o,!0)},Unit:function(t){return t.pow(.5)}});function a(n){return n>=0||e.predictable?Math.sqrt(n):new t.Complex(n,0).sqrt()}return o.toTex={1:"\\sqrt{${args[0]}}"},o}},function(t,e,n){"use strict";var r=n(9),i=n(13);e.name="isInteger",e.factory=function(t,e,n,o){var a=o("isInteger",{number:i.isInteger,BigNumber:function(t){return t.isInt()},Fraction:function(t){return 1===t.d&&isFinite(t.n)},"Array | Matrix":function(t){return r(t,a)}});return a}},function(t,e,n){"use strict";var r=n(13).nearlyEqual,i=n(215);e.name="compare",e.factory=function(t,e,o,a){var s=o(n(7)),l=o(n(92)),c=o(n(384)),u=o(n(93)),d=o(n(41)),f=o(n(35)),p=a("compare",{"boolean, boolean":function(t,e){return t===e?0:t>e?1:-1},"number, number":function(t,n){return t===n||r(t,n,e.epsilon)?0:t>n?1:-1},"BigNumber, BigNumber":function(n,r){return n.eq(r)||i(n,r,e.epsilon)?new t.BigNumber(0):new t.BigNumber(n.cmp(r))},"Fraction, Fraction":function(e,n){return new t.Fraction(e.compare(n))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t===e?0:t>e?1:-1},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,p);break;default:n=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,p,!1);break;default:n=d(t,e,p)}}return n},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,p,!1);break;default:n=f(t,e,p,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=u(e,t,p,!0);break;default:n=f(e,t,p,!0)}return n},"Array, any":function(t,e){return f(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return f(s(e),t,p,!0).valueOf()}});return p.toTex=void 0,p}},function(t,e,n){var r=n(51),i=n(147);t.exports=function(t){return r(function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var l=n[r];l&&t(e,l,r,a)}return e})}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__261__},function(t,e,n){var r=n(71),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e){t.exports=function(t){return t.placeholder}},function(t,e,n){var r=n(121),i=n(80);t.exports=function(t){return i(t)&&r(t)}},,function(t,e,n){"use strict";(function(t){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer=void 0!==t,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);r.append(n),e.blob=0===r.getBlob("application/zip").size}catch(t){e.blob=!1}}}}).call(this,n(321).Buffer)},function(t,e,n){var r=n(150),i=n(790),o=n(537);t.exports=function(t){return o(i(t,void 0,r),t+"")}},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(2186))},function(t,e,n){var r=n(570);t.exports=function(t){return t&&t.length?r(t):[]}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var type_=__webpack_require__(73),data_=__webpack_require__(330),vector_=__webpack_require__(168),util_int_=__webpack_require__(925),util_bit_=__webpack_require__(273),visitor_=__webpack_require__(412),view_=__webpack_require__(2197),predicate_=__webpack_require__(413),vector_1=__webpack_require__(168);exports.Vector=vector_1.Vector;var recordbatch_1=__webpack_require__(414);exports.RecordBatch=recordbatch_1.RecordBatch;var type_1=__webpack_require__(73);exports.Schema=type_1.Schema,exports.Field=type_1.Field,exports.Type=type_1.Type;var table_1=__webpack_require__(2198);exports.Table=table_1.Table,exports.CountByResult=table_1.CountByResult;var arrow_1=__webpack_require__(926),util,data,enum_,type,vector,visitor,view,predicate;exports.read=arrow_1.read,exports.readAsync=arrow_1.readAsync,function(t){t.Uint64=util_int_.Uint64,t.Int64=util_int_.Int64,t.Int128=util_int_.Int128,t.packBools=util_bit_.packBools}(util=exports.util||(exports.util={})),function(t){t.BaseData=data_.BaseData,t.FlatData=data_.FlatData,t.BoolData=data_.BoolData,t.FlatListData=data_.FlatListData,t.DictionaryData=data_.DictionaryData,t.NestedData=data_.NestedData,t.ListData=data_.ListData,t.UnionData=data_.UnionData,t.SparseUnionData=data_.SparseUnionData,t.DenseUnionData=data_.DenseUnionData,t.ChunkedData=data_.ChunkedData}(data=exports.data||(exports.data={})),function(t){t.Type=type_.ArrowType,t.DateUnit=type_.DateUnit,t.TimeUnit=type_.TimeUnit,t.Precision=type_.Precision,t.UnionMode=type_.UnionMode,t.VectorType=type_.VectorType,t.IntervalUnit=type_.IntervalUnit,t.MessageHeader=type_.MessageHeader,t.MetadataVersion=type_.MetadataVersion}(enum_=exports.enum_||(exports.enum_={})),function(t){t.Schema=type_.Schema,t.Field=type_.Field,t.Null=type_.Null,t.Int=type_.Int,t.Int8=type_.Int8,t.Int16=type_.Int16,t.Int32=type_.Int32,t.Int64=type_.Int64,t.Uint8=type_.Uint8,t.Uint16=type_.Uint16,t.Uint32=type_.Uint32,t.Uint64=type_.Uint64,t.Float=type_.Float,t.Float16=type_.Float16,t.Float32=type_.Float32,t.Float64=type_.Float64,t.Binary=type_.Binary,t.Utf8=type_.Utf8,t.Bool=type_.Bool,t.Decimal=type_.Decimal,t.Date_=type_.Date_,t.Time=type_.Time,t.Timestamp=type_.Timestamp,t.Interval=type_.Interval,t.List=type_.List,t.Struct=type_.Struct,t.Union=type_.Union,t.DenseUnion=type_.DenseUnion,t.SparseUnion=type_.SparseUnion,t.FixedSizeBinary=type_.FixedSizeBinary,t.FixedSizeList=type_.FixedSizeList,t.Map_=type_.Map_,t.Dictionary=type_.Dictionary}(type=exports.type||(exports.type={})),function(t){t.Vector=vector_.Vector,t.NullVector=vector_.NullVector,t.BoolVector=vector_.BoolVector,t.IntVector=vector_.IntVector,t.FloatVector=vector_.FloatVector,t.DateVector=vector_.DateVector,t.DecimalVector=vector_.DecimalVector,t.TimeVector=vector_.TimeVector,t.TimestampVector=vector_.TimestampVector,t.IntervalVector=vector_.IntervalVector,t.BinaryVector=vector_.BinaryVector,t.FixedSizeBinaryVector=vector_.FixedSizeBinaryVector,t.Utf8Vector=vector_.Utf8Vector,t.ListVector=vector_.ListVector,t.FixedSizeListVector=vector_.FixedSizeListVector,t.MapVector=vector_.MapVector,t.StructVector=vector_.StructVector,t.UnionVector=vector_.UnionVector,t.DictionaryVector=vector_.DictionaryVector}(vector=exports.vector||(exports.vector={})),function(t){t.TypeVisitor=visitor_.TypeVisitor,t.VectorVisitor=visitor_.VectorVisitor}(visitor=exports.visitor||(exports.visitor={})),function(t){t.ChunkedView=view_.ChunkedView,t.DictionaryView=view_.DictionaryView,t.ListView=view_.ListView,t.FixedSizeListView=view_.FixedSizeListView,t.BinaryView=view_.BinaryView,t.Utf8View=view_.Utf8View,t.UnionView=view_.UnionView,t.DenseUnionView=view_.DenseUnionView,t.NestedView=view_.NestedView,t.StructView=view_.StructView,t.MapView=view_.MapView,t.FlatView=view_.FlatView,t.NullView=view_.NullView,t.BoolView=view_.BoolView,t.ValidityView=view_.ValidityView,t.PrimitiveView=view_.PrimitiveView,t.FixedSizeView=view_.FixedSizeView,t.Float16View=view_.Float16View,t.DateDayView=view_.DateDayView,t.DateMillisecondView=view_.DateMillisecondView,t.TimestampDayView=view_.TimestampDayView,t.TimestampSecondView=view_.TimestampSecondView,t.TimestampMillisecondView=view_.TimestampMillisecondView,t.TimestampMicrosecondView=view_.TimestampMicrosecondView,t.TimestampNanosecondView=view_.TimestampNanosecondView,t.IntervalYearMonthView=view_.IntervalYearMonthView,t.IntervalYearView=view_.IntervalYearView,t.IntervalMonthView=view_.IntervalMonthView}(view=exports.view||(exports.view={})),function(t){t.col=predicate_.col,t.lit=predicate_.lit,t.custom=predicate_.custom,t.Or=predicate_.Or,t.Col=predicate_.Col,t.And=predicate_.And,t.Not=predicate_.Not,t.GTeq=predicate_.GTeq,t.LTeq=predicate_.LTeq,t.Value=predicate_.Value,t.Equals=predicate_.Equals,t.Literal=predicate_.Literal,t.Predicate=predicate_.Predicate}(predicate=exports.predicate||(exports.predicate={}));try{var Arrow=eval("exports");Arrow&&"object"==typeof Arrow&&(Arrow.data=data,Arrow.type=type,Arrow.util=util,Arrow.view=view,Arrow.enum_=enum_,Arrow.vector=vector,Arrow.visitor=visitor,Arrow.predicate=predicate,Arrow.read=arrow_1.read,Arrow.readAsync=arrow_1.readAsync,Arrow.Type=type_1.Type,Arrow.Field=type_1.Field,Arrow.Schema=type_1.Schema,Arrow.Vector=vector_1.Vector,Arrow.RecordBatch=recordbatch_1.RecordBatch,Arrow.Table=table_1.Table,Arrow.CountByResult=table_1.CountByResult)}catch(t){}type_1.Schema.from=type_1.Schema.from,table_1.Table.from=table_1.Table.from,table_1.Table.fromAsync=table_1.Table.fromAsync,table_1.Table.empty=table_1.Table.empty,vector_1.Vector.create=vector_1.Vector.create,recordbatch_1.RecordBatch.from=recordbatch_1.RecordBatch.from,util_int_.Uint64.add=util_int_.Uint64.add,util_int_.Uint64.multiply=util_int_.Uint64.multiply,util_int_.Int64.add=util_int_.Int64.add,util_int_.Int64.multiply=util_int_.Int64.multiply,util_int_.Int64.fromString=util_int_.Int64.fromString,util_int_.Int128.add=util_int_.Int128.add,util_int_.Int128.multiply=util_int_.Int128.multiply,util_int_.Int128.fromString=util_int_.Int128.fromString,data_.ChunkedData.computeOffsets=data_.ChunkedData.computeOffsets,type_.Type.NONE=type_.Type.NONE,type_.Type.Null=type_.Type.Null,type_.Type.Int=type_.Type.Int,type_.Type.Float=type_.Type.Float,type_.Type.Binary=type_.Type.Binary,type_.Type.Utf8=type_.Type.Utf8,type_.Type.Bool=type_.Type.Bool,type_.Type.Decimal=type_.Type.Decimal,type_.Type.Date=type_.Type.Date,type_.Type.Time=type_.Type.Time,type_.Type.Timestamp=type_.Type.Timestamp,type_.Type.Interval=type_.Type.Interval,type_.Type.List=type_.Type.List,type_.Type.Struct=type_.Type.Struct,type_.Type.Union=type_.Type.Union,type_.Type.FixedSizeBinary=type_.Type.FixedSizeBinary,type_.Type.FixedSizeList=type_.Type.FixedSizeList,type_.Type.Map=type_.Type.Map,type_.Type.Dictionary=type_.Type.Dictionary,type_.Type.DenseUnion=type_.Type.DenseUnion,type_.Type.SparseUnion=type_.Type.SparseUnion,type_.DataType.isNull=type_.DataType.isNull,type_.DataType.isInt=type_.DataType.isInt,type_.DataType.isFloat=type_.DataType.isFloat,type_.DataType.isBinary=type_.DataType.isBinary,type_.DataType.isUtf8=type_.DataType.isUtf8,type_.DataType.isBool=type_.DataType.isBool,type_.DataType.isDecimal=type_.DataType.isDecimal,type_.DataType.isDate=type_.DataType.isDate,type_.DataType.isTime=type_.DataType.isTime,type_.DataType.isTimestamp=type_.DataType.isTimestamp,type_.DataType.isInterval=type_.DataType.isInterval,type_.DataType.isList=type_.DataType.isList,type_.DataType.isStruct=type_.DataType.isStruct,type_.DataType.isUnion=type_.DataType.isUnion,type_.DataType.isDenseUnion=type_.DataType.isDenseUnion,type_.DataType.isSparseUnion=type_.DataType.isSparseUnion,type_.DataType.isFixedSizeBinary=type_.DataType.isFixedSizeBinary,type_.DataType.isFixedSizeList=type_.DataType.isFixedSizeList,type_.DataType.isMap=type_.DataType.isMap,type_.DataType.isDictionary=type_.DataType.isDictionary,vector_.BoolVector.from=vector_.BoolVector.from,vector_.IntVector.from=vector_.IntVector.from,vector_.FloatVector.from=vector_.FloatVector.from,visitor_.TypeVisitor.visitTypeInline=visitor_.TypeVisitor.visitTypeInline,visitor_.VectorVisitor.visitTypeInline=visitor_.VectorVisitor.visitTypeInline},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);function i(t,e){return t%e==0?0:e-t%e}function o(t,e,n,r){return(n&1<<r)>>r}function a(t,e,n,i,o){var a,s,l,c,u;return r.__generator(this,function(r){switch(r.label){case 0:a=e%8,s=e>>3,l=0,c=n,r.label=1;case 1:if(!(c>0))return[3,6];u=t[s++],r.label=2;case 2:return[4,o(i,l++,u,a)];case 3:r.sent(),r.label=4;case 4:if(--c>0&&++a<8)return[3,2];r.label=5;case 5:return a=0,[3,1];case 6:return[2]}})}function s(t,e,n){for(var r=0,i=0|e,o=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===n?t.byteLength:i+n;a-i>=4;)r+=l(o.getUint32(i)),i+=4;for(;a-i>=2;)r+=l(o.getUint16(i)),i+=2;for(;a-i>=1;)r+=l(o.getUint8(i)),i+=1;return r}function l(t){var e=0|t;return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}e.align=function(t,e){return t+i(t,e)},e.padding=i,e.getBool=function(t,e,n,r){return 0!=(n&1<<r)},e.getBit=o,e.setBool=function(t,e,n){return n?!!(t[e>>3]|=1<<e%8)||!0:!(t[e>>3]&=~(1<<e%8))&&!1},e.packBools=function(t){var e,n,i=0,o=0,a=[],s=0,l=0;try{for(var c=r.__values(t),u=c.next();!u.done;u=c.next())u.value&&(l|=1<<s),8==++s&&(a[o++]=l,l=s=0)}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if((0===o||s>0)&&(a[o++]=l),o%8&&(i=o+8-o%8))do{a[o]=0}while(++o<i);return new Uint8Array(a)},e.iterateBits=a,e.popcnt_bit_range=function t(e,n,i){if(i-n<=0)return 0;if(i-n<8){var l=0;try{for(var c=r.__values(a(e,n,i-n,e,o)),u=c.next();!u.done;u=c.next())l+=u.value}catch(t){d={error:t}}finally{try{u&&!u.done&&(f=c.return)&&f.call(c)}finally{if(d)throw d.error}}return l}var d,f,p=i>>3<<3,h=n+(n%8==0?0:8-n%8);return t(e,n,h)+t(e,p,i)+s(e,h>>3,p-h>>3)},e.popcnt_array=s,e.popcnt_uint32=l},,,function(t,e,n){var r=n(196),i=n(71),o="Expected a function";t.exports=function(t,e,n){var a=!0,s=!0;if("function"!=typeof t)throw new TypeError(o);return i(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:a,maxWait:e,trailing:s})}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(431)),r(n(992)),r(n(994)),r(n(993))},,,,,,,,function(t,e,n){var r=n(2897),i=n(267)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(171),i=n(126),o=function(){return function(){this.loadClass=function(t,e){var n,i=r.get(window,t);return i.prototype?(n=Object.create(i.prototype)).constructor.apply(n,e):n=i,n}}}();e.Loader=o;var a=function(){return function(t){var e=this;this.registerInjectibles=function(){var t=e;i.each(e,function(e,n){if(e instanceof s){if(!t.$injector.has(e.fullPath))throw new Error("Cannot find injectible: "+e.fullPath+"\nIs the injectible registered and spelled correctly?");t[n].instance=t.$injector.get(e.fullPath)}else"$"===n[0]&&t.$injector.has(n)&&(t[n]=t.$injector.get(n))})},this.$injector=t}}();e.InjectibleLoader=a;var s=function(){return function(t){this.fullPath=t}}();e.InjectibleCnt=s},,,,,,,,function(t,e){function n(t){var e="number"==typeof t?t:+new Date,n=function(){return(268435455&(e=4294967295&(3042594569^(e=(e=4294967295&((e=(e=4294967295&(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19))+374761393+(e<<5)&4294967295)+3550635116^e<<9))+4251993797+(e<<3)&4294967295)^e>>>16)))/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}t.exports={random:n,randomIterator:function(t,e){var r=e||n();if("function"!=typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var n,i,o;for(n=t.length-1;n>0;--n)i=r.next(n+1),o=t[i],t[i]=t[n],t[n]=o,e(o);t.length&&e(t[0])},shuffle:function(){var e,n,i;for(e=t.length-1;e>0;--e)n=r.next(e+1),i=t[n],t[n]=t[e],t[e]=i;return t}}}}},function(t,e,n){var r=n(3412),i=n(3463),o=n(364),a=n(69),s=n(3471);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(141).Symbol;t.exports=r},function(t,e,n){var r=n(69),i=n(672),o=n(3464),a=n(673);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(485),i=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,n){var r=n(363),i=n(295),o=n(3476),a=n(69);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(677),i=n(488);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var c=e[s],u=o?o(n[c],t[c],c,n,t):void 0;void 0===u&&(u=t[c]),a?i(n,c,u):r(n,c,u)}return n}},,,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16),a=n(3739),s=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({dataLayer:void 0,properties:void 0,workspace:void 0,namespace:void 0,additionalCql:void 0,requestType:a.QUERY_FEATURES_REQUEST_TYPE},"QueryFeaturesDataFilterRecord"));e.QueryFeaturesDataFilterRecord=s,o.StateManager.getInstance().addRecord(s)},function(t,e,n){var r=n(102),i=n(1270);t.exports=function(t){return i(r(t).toLowerCase())}},function(t,e,n){var r=n(1304),i=n(80),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e,n){var r=n(180),i=n(157);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(1326),i=n(158),o=n(379),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(71),i=n(156),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=l.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):s.test(t)?o:+t}},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="IndexError",r.prototype.isIndexError=!0,t.exports=r},function(t,e,n){"use strict";var r=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function i(t,e){var n=t;"keep"!==e&&(n=t.getContent());for(var i=n.getIdentifier(),o=0;o<r.length;o++)if(i in r[o])return o;return null}t.exports.properties=r,t.exports.getPrecedence=i,t.exports.getAssociativity=function(t,e){var n=t;"keep"!==e&&(n=t.getContent());var o=n.getIdentifier(),a=i(n,e);if(null===a)return null;var s=r[a][o];if(s.hasOwnProperty("associativity")){if("left"===s.associativity)return"left";if("right"===s.associativity)return"right";throw Error("'"+o+"' has the invalid associativity '"+s.associativity+"'.")}return null},t.exports.isAssociativeWith=function(t,e,n){var o=t,a=e;"keep"!==n&&(o=t.getContent(),a=e.getContent());var s=o.getIdentifier(),l=a.getIdentifier(),c=i(o,n);if(null===c)return null;var u=r[c][s];if(u.hasOwnProperty("associativeWith")&&u.associativeWith instanceof Array){for(var d=0;d<u.associativeWith.length;d++)if(u.associativeWith[d]===l)return!0;return!1}return null}},function(t,e,n){"use strict";var r=n(27),i=n(11).map,o=n(11).join,a=n(45).stringify,s=n(45).escape,l=n(81).isSafeMethod,c=n(312);e.name="OperatorNode",e.path="expression.node",e.factory=function(t,e,u,d){var f=u(n(37)).register,p=u(n(37)).compile,h=u(n(83));function g(e,n,r,i){if(!(this instanceof g))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof n)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(r)||!r.every(t.isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===i,this.op=e,this.fn=n,this.args=r||[]}function m(t,e,n,r,i){var o=c.getPrecedence(t,e),a=c.getAssociativity(t,e);if("all"===e||r.length>2&&"OperatorNode:add"!==t.getIdentifier()&&"OperatorNode:multiply"!==t.getIdentifier())return r.map(function(t){switch(t.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var s=void 0;switch(r.length){case 0:s=[];break;case 1:var l=c.getPrecedence(r[0],e);if(i&&null!==l){var u;if("keep"===e?(u=r[0].getIdentifier(),g=t.getIdentifier()):(u=r[0].getContent().getIdentifier(),g=t.getContent().getIdentifier()),!1===c.properties[o][g].latexLeftParens){s=[!1];break}if(!1===c.properties[l][u].latexParens){s=[!1];break}}if(null===l){s=[!1];break}if(l<=o){s=[!0];break}s=[!1];break;case 2:var d,f,p=c.getPrecedence(r[0],e),h=c.isAssociativeWith(t,r[0],e);d=null!==p&&(p===o&&"right"===a&&!h||p<o);var g,m,v,y=c.getPrecedence(r[1],e),b=c.isAssociativeWith(t,r[1],e);f=null!==y&&(y===o&&"left"===a&&!b||y<o),i&&("keep"===e?(g=t.getIdentifier(),m=t.args[0].getIdentifier(),v=t.args[1].getIdentifier()):(g=t.getContent().getIdentifier(),m=t.args[0].getContent().getIdentifier(),v=t.args[1].getContent().getIdentifier()),null!==p&&(!1===c.properties[o][g].latexLeftParens&&(d=!1),!1===c.properties[p][m].latexParens&&(d=!1)),null!==y&&(!1===c.properties[o][g].latexRightParens&&(f=!1),!1===c.properties[y][v].latexParens&&(f=!1))),s=[d,f];break;default:"OperatorNode:add"!==t.getIdentifier()&&"OperatorNode:multiply"!==t.getIdentifier()||(s=r.map(function(n){var r=c.getPrecedence(n,e),i=c.isAssociativeWith(t,n,e),s=c.getAssociativity(n,e);return null!==r&&(o===r&&a===s&&!i||r<o)}))}return r.length>=2&&"OperatorNode:multiply"===t.getIdentifier()&&t.implicit&&"auto"===e&&"hide"===n&&(s=r.map(function(t,e){var n="ParenthesisNode"===t.getIdentifier();return!(!s[e]&&!n)})),s}return u(n(254)),u(n(186)),u(n(314)),g.prototype=new h,g.prototype.type="OperatorNode",g.prototype.isOperatorNode=!0,f(g.prototype.type,function(t,e,n){if(!(t instanceof g))throw new TypeError("No valid OperatorNode");if("string"!=typeof t.fn||!l(e.math,t.fn))throw e.math[t.fn]?new Error('No access to function "'+t.fn+'"'):new Error("Function "+t.fn+' missing in provided namespace "math"');var r=i(t.args,function(t){return p(t,e,n)});return"math["+a(t.fn)+"]("+o(r,", ")+")"}),g.prototype.forEach=function(t){for(var e=0;e<this.args.length;e++)t(this.args[e],"args["+e+"]",this)},g.prototype.map=function(t){for(var e=[],n=0;n<this.args.length;n++)e[n]=this._ifNode(t(this.args[n],"args["+n+"]",this));return new g(this.op,this.fn,e,this.implicit)},g.prototype.clone=function(){return new g(this.op,this.fn,this.args.slice(0),this.implicit)},g.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=t&&t.implicit?t.implicit:"hide",r=this.args,i=m(this,e,n,r,!1);if(1===r.length){var o=c.getAssociativity(this,e),a=r[0].toString(t);return i[0]&&(a="("+a+")"),"right"===o?this.op+a:a+this.op}if(2==r.length){var s=r[0].toString(t),l=r[1].toString(t);return i[0]&&(s="("+s+")"),i[1]&&(l="("+l+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"==n?s+" "+l:s+" "+this.op+" "+l}if(r.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var u=r.map(function(e,n){return e=e.toString(t),i[n]&&(e="("+e+")"),e});return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?u.join(" "):u.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"},g.prototype.toHTML=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=t&&t.implicit?t.implicit:"hide",r=this.args,i=m(this,e,n,r,!1);if(1===r.length){var o=c.getAssociativity(this,e),a=r[0].toHTML(t);return i[0]&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===o?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+s(this.op)+"</span>"+a:'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+s(this.op)+"</span>"+a}if(2==r.length){var l=r[0].toHTML(t),u=r[1].toHTML(t);return i[0]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),i[1]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"==n?l+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+u:l+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+s(this.op)+"</span>"+u}if(r.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var d=r.map(function(e,n){return e=e.toHTML(t),i[n]&&(e='<span class="math-parenthesis math-round-parenthesis">(</span>'+e+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e});return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?d.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):d.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+s(this.op)+"</span>")}return'<span class="math-function">'+s(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+d.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'},g.prototype._toTex=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=t&&t.implicit?t.implicit:"hide",i=this.args,o=m(this,e,n,i,!0),a=r.operators[this.fn];if(a=void 0===a?this.op:a,1===i.length){var s=c.getAssociativity(this,e),l=i[0].toTex(t);return o[0]&&(l="\\left("+l+"\\right)"),"right"===s?a+l:l+a}if(2===i.length){var u=i[0],d=u.toTex(t);o[0]&&(d="\\left("+d+"\\right)");var f,p=i[1].toTex(t);switch(o[1]&&(p="\\left("+p+"\\right)"),f="keep"===e?u.getIdentifier():u.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return a+"{"+d+"}{"+p+"}";case"OperatorNode:pow":switch(d="{"+d+"}",p="{"+p+"}",f){case"ConditionalNode":case"OperatorNode:divide":d="\\left("+d+"\\right)"}case"OperatorNode:multiply":if(this.implicit&&"hide"===n)return d+"~"+p}return d+a+p}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var h=i.map(function(e,n){return e=e.toTex(t),o[n]&&(e="\\left("+e+"\\right)"),e});return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?h.join("~"):h.join(a)}return"\\mathrm{"+this.fn+"}\\left("+i.map(function(e){return e.toTex(t)}).join(",")+"\\right)"},g.prototype.getIdentifier=function(){return this.type+":"+this.fn},g}},function(t,e,n){"use strict";var r=n(27),i=n(45).stringify,o=n(45).escape,a=n(28).extend,s=n(28).hasOwnProperty,l=n(11).map,c=n(11).join,u=n(81).validateSafeMethod,d=n(740);e.name="FunctionNode",e.path="expression.node",e.math=!0,e.factory=function(t,e,f,p,h){var g=f(n(37)).register,m=f(n(37)).compile,v=f(n(83)),y=f(n(186));function b(e,n){if(!(this instanceof b))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof e&&(e=new y(e)),!t.isNode(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(n)||!n.every(t.isNode))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=n||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}});var r=function(){throw new Error("Property `FunctionNode.object` is deprecated, use `FunctionNode.fn` instead")};Object.defineProperty(this,"object",{get:r,set:r})}b.prototype=new v,b.prototype.type="FunctionNode",b.prototype.isFunctionNode=!0,g(b.prototype.type,function(e,n,r){if(!(e instanceof b))throw new TypeError("No valid FunctionNode");var o,f=m(e.fn,n,r),p=l(e.args,function(t){return m(t,n,r)}),h=function(t,e){var n=Object.keys(e);if(0===n.length)return"scope";t.extend=a;var r=l(n,function(t){return i(t)+": "+e[t]});return"extend(extend({}, scope), {"+c(r,", ")+"})"}(n,r);if(t.isSymbolNode(e.fn)){var g=e.fn.name,v=s(n.math,g)?n.math[g]:void 0;return"function"==typeof v&&1==v.rawArgs?(o=d(n),n[o]=e.args,f+"("+o+", math, "+h+")"):f+"("+c(p,", ")+")"}if(t.isAccessorNode(e.fn)&&t.isIndexNode(e.fn.index)&&e.fn.index.isObjectProperty()){o=d(n),n[o]=e.args,n.validateSafeMethod=u;var y=m(e.fn.object,n,r),w=i(e.fn.index.getObjectProperty());return"(function () {var object = "+y+";validateSafeMethod(object, "+w+");return (object["+w+"] && object["+w+"].rawArgs)  ? object["+w+"]("+o+", math, "+h+") : object["+w+"]("+c(p,", ")+")})()"}return o=d(n),n[o]=e.args,"(function () {var fn = "+f+";return (fn && fn.rawArgs)  ? fn("+o+", math, "+h+") : fn("+c(p,", ")+")})()"}),b.prototype.forEach=function(t){for(var e=0;e<this.args.length;e++)t(this.args[e],"args["+e+"]",this)},b.prototype.map=function(t){for(var e=this.fn.map(t),n=[],r=0;r<this.args.length;r++)n[r]=this._ifNode(t(this.args[r],"args["+r+"]",this));return new b(e,n)},b.prototype.clone=function(){return new b(this.fn,this.args.slice(0))};var w=b.prototype.toString;function _(e,n,r){for(var i,o="",a=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),s=0;null!==(i=a.exec(e));)if(o+=e.substring(s,i.index),s=i.index,"$$"===i[0])o+="$",s++;else{s+=i[0].length;var l=n[i[1]];if(!l)throw new ReferenceError("Template: Property "+i[1]+" does not exist.");if(void 0===i[2])switch(typeof l){case"string":o+=l;break;case"object":if(t.isNode(l))o+=l.toTex(r);else{if(!Array.isArray(l))throw new TypeError("Template: "+i[1]+" has to be a Node, String or array of Nodes");o+=l.map(function(e,n){if(t.isNode(e))return e.toTex(r);throw new TypeError("Template: "+i[1]+"["+n+"] is not a Node.")}).join(",")}break;default:throw new TypeError("Template: "+i[1]+" has to be a Node, String or array of Nodes")}else{if(!t.isNode(l[i[2]]&&l[i[2]]))throw new TypeError("Template: "+i[1]+"["+i[2]+"] is not a Node.");o+=l[i[2]].toTex(r)}}return o+=e.slice(s)}b.prototype.toString=function(t){var e,n=this.fn.toString(t);return t&&"object"==typeof t.handler&&s(t.handler,n)&&(e=t.handler[n](this,t)),void 0!==e?e:w.call(this,t)},b.prototype._toString=function(e){var n=this.args.map(function(t){return t.toString(e)});return(t.isFunctionAssignmentNode(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+n.join(", ")+")"},b.prototype.toHTML=function(t){var e=this.args.map(function(e){return e.toHTML(t)});return'<span class="math-function">'+o(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};var x=b.prototype.toTex;return b.prototype.toTex=function(t){var e;return t&&"object"==typeof t.handler&&s(t.handler,this.name)&&(e=t.handler[this.name](this,t)),void 0!==e?e:x.call(this,t)},b.prototype._toTex=function(t){var e,n,i=this.args.map(function(e){return e.toTex(t)});switch(!h[this.name]||"function"!=typeof h[this.name].toTex&&"object"!=typeof h[this.name].toTex&&"string"!=typeof h[this.name].toTex||(e=h[this.name].toTex),typeof e){case"function":n=e(this,t);break;case"string":n=_(e,this,t);break;case"object":switch(typeof e[i.length]){case"function":n=e[i.length](this,t);break;case"string":n=_(e[i.length],this,t)}}return void 0!==n?n:_(r.defaultTemplate,this,t)},b.prototype.getIdentifier=function(){return this.type+":"+this.name},b}},function(t,e,n){"use strict";var r=n(9);n(13);e.name="isPositive",e.factory=function(t,e,n,i){var o=i("isPositive",{number:function(t){return t>0},BigNumber:function(t){return!t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s>0&&t.n>0},Unit:function(t){return o(t.value)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(9);n(13);e.name="isNegative",e.factory=function(t,e,n,i){var o=i("isNegative",{number:function(t){return t<0},BigNumber:function(t){return t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s<0},Unit:function(t){return o(t.value)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(368),i=n(369),o=n(1768),a=n(1769),s=n(500),l=n(102),c=/^\s+|\s+$/g;t.exports=function(t,e,n){if((t=l(t))&&(n||void 0===e))return t.replace(c,"");if(!t||!(e=r(e)))return t;var u=s(t),d=s(e),f=a(u,d),p=o(u,d)+1;return i(u,f,p).join("")}},function(t,e,n){var r=n(51),i=n(165),o=n(263),a=n(223),s=r(function(t,e){var n=a(e,o(s));return i(t,64,void 0,e,n)});s.placeholder={},t.exports=s},,function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(1913),i=n(1914),o=n(1915);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(u(e),t=s(t,e<0?0:0|p(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function h(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return q(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var u=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var d=!0,f=0;f<l;f++)if(c(t,o+f)!==c(e,f)){d=!1;break}if(d)return o}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,r){return U(q(e,t.length-n),t,n,r)}function w(t,e,n,r){return U(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return w(t,e,n,r)}function x(t,e,n,r){return U(z(e),t,n,r)}function S(t,e,n,r){return U(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,l,c=t[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return u(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return d(null,t)},l.allocUnsafeSlow=function(t){return d(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=h,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return M(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),c=this.slice(r,i),u=t.slice(e,n),d=0;d<s;++d)if(c[d]!==u[d]){o=c[d],a=u[d];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function A(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=j(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,r,o){return o||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||P(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||P(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=l.isBuffer(t)?t:q(new l(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function q(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(78))},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},,function(t,e,n){var r=n(403);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t,e){var n=i?i+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,s=new Array(a);o<a;o++)s[o]=r[o].fn;return s},s.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,o),!0;case 6:return u.fn.call(u.context,e,n,r,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;case 4:u[c].fn.call(u[c].context,e,n,r);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(t,e,n){var r=new a(e,n||this),o=i?i+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.once=function(t,e,n){var r=new a(e,n||this,!0),o=i?i+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new o:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||r&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new o:delete this._events[a]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new o:delete this._events[e])):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=i,s.EventEmitter=s,t.exports=s},,function(t,e,n){var r=n(188),i=n(222),o=n(43);t.exports=function(t,e){var n={};return e=o(e,3),i(t,function(t,i,o){r(n,i,e(t,i,o))}),n}},function(t,e,n){var r=n(188),i=n(406),o=Object.prototype.hasOwnProperty,a=i(function(t,e,n){o.call(t,n)?t[n].push(e):r(t,n,[e])});t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){!function(t){!function(t){!function(t){!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4"}(t.MetadataVersion||(t.MetadataVersion={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(t.UnionMode||(t.UnionMode={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(t.Precision||(t.Precision={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(t.DateUnit||(t.DateUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(t.TimeUnit||(t.TimeUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME"}(t.IntervalUnit||(t.IntervalUnit={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map"}(t.Type||(t.Type={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(t.VectorType||(t.VectorType={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(t.Endianness||(t.Endianness={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsNull=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startNull=function(t){t.startObject(0)},t.endNull=function(t){return t.endObject()},t}();t.Null=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsStruct_=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startStruct_=function(t){t.startObject(0)},t.endStruct_=function(t){return t.endObject()},t}();t.Struct_=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsList=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startList=function(t){t.startObject(0)},t.endList=function(t){return t.endObject()},t}();t.List=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsFixedSizeList=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.listSize=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.startFixedSizeList=function(t){t.startObject(1)},t.addListSize=function(t,e){t.addFieldInt32(0,e,0)},t.endFixedSizeList=function(t){return t.endObject()},t}();t.FixedSizeList=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsMap=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.keysSorted=function(){var t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},t.startMap=function(t){t.startObject(1)},t.addKeysSorted=function(t,e){t.addFieldInt8(0,+e,0)},t.endMap=function(t){return t.endObject()},t}();t.Map=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsUnion=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.mode=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.UnionMode.Sparse},e.prototype.typeIds=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0},e.prototype.typeIdsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.typeIdsArray=function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.startUnion=function(t){t.startObject(2)},e.addMode=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.UnionMode.Sparse)},e.addTypeIds=function(t,e){t.addFieldOffset(1,e,0)},e.createTypeIdsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},e.startTypeIdsVector=function(t,e){t.startVector(4,e,4)},e.endUnion=function(t){return t.endObject()},e}();e.Union=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsInt=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.bitWidth=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.isSigned=function(){var t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},t.startInt=function(t){t.startObject(2)},t.addBitWidth=function(t,e){t.addFieldInt32(0,e,0)},t.addIsSigned=function(t,e){t.addFieldInt8(1,+e,0)},t.endInt=function(t){return t.endObject()},t}();t.Int=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsFloatingPoint=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.precision=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Precision.HALF},e.startFloatingPoint=function(t){t.startObject(1)},e.addPrecision=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.Precision.HALF)},e.endFloatingPoint=function(t){return t.endObject()},e}();e.FloatingPoint=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsUtf8=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startUtf8=function(t){t.startObject(0)},t.endUtf8=function(t){return t.endObject()},t}();t.Utf8=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsBinary=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startBinary=function(t){t.startObject(0)},t.endBinary=function(t){return t.endObject()},t}();t.Binary=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsFixedSizeBinary=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.byteWidth=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.startFixedSizeBinary=function(t){t.startObject(1)},t.addByteWidth=function(t,e){t.addFieldInt32(0,e,0)},t.endFixedSizeBinary=function(t){return t.endObject()},t}();t.FixedSizeBinary=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsBool=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.startBool=function(t){t.startObject(0)},t.endBool=function(t){return t.endObject()},t}();t.Bool=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsDecimal=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.precision=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0},t.prototype.scale=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0},t.startDecimal=function(t){t.startObject(2)},t.addPrecision=function(t,e){t.addFieldInt32(0,e,0)},t.addScale=function(t,e){t.addFieldInt32(1,e,0)},t.endDecimal=function(t){return t.endObject()},t}();t.Decimal=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDate=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.DateUnit.MILLISECOND},e.startDate=function(t){t.startObject(1)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.DateUnit.MILLISECOND)},e.endDate=function(t){return t.endObject()},e}();e.Date=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTime=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.MILLISECOND},e.prototype.bitWidth=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32},e.startTime=function(t){t.startObject(2)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.TimeUnit.MILLISECOND)},e.addBitWidth=function(t,e){t.addFieldInt32(1,e,32)},e.endTime=function(t){return t.endObject()},e}();e.Time=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTimestamp=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.TimeUnit.SECOND},e.prototype.timezone=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.startTimestamp=function(t){t.startObject(2)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.TimeUnit.SECOND)},e.addTimezone=function(t,e){t.addFieldOffset(1,e,0)},e.endTimestamp=function(t){return t.endObject()},e}();e.Timestamp=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsInterval=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.unit=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH},e.startInterval=function(t){t.startObject(1)},e.addUnit=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.IntervalUnit.YEAR_MONTH)},e.endInterval=function(t){return t.endObject()},e}();e.Interval=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsVectorLayout=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.bitWidth=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):0},e.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.VectorType.OFFSET},e.startVectorLayout=function(t){t.startObject(2)},e.addBitWidth=function(t,e){t.addFieldInt16(0,e,0)},e.addType=function(e,n){e.addFieldInt16(1,n,t.apache.arrow.flatbuf.VectorType.OFFSET)},e.endVectorLayout=function(t){return t.endObject()},e}();e.VectorLayout=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsKeyValue=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.key=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.value=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},t.startKeyValue=function(t){t.startObject(2)},t.addKey=function(t,e){t.addFieldOffset(0,e,0)},t.addValue=function(t,e){t.addFieldOffset(1,e,0)},t.endKeyValue=function(t){return t.endObject()},t}();t.KeyValue=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDictionaryEncoding=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.id=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.indexType=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.apache.arrow.flatbuf.Int).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.isOrdered=function(){var t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},e.startDictionaryEncoding=function(t){t.startObject(3)},e.addId=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addIndexType=function(t,e){t.addFieldOffset(1,e,0)},e.addIsOrdered=function(t,e){t.addFieldInt8(2,+e,0)},e.endDictionaryEncoding=function(t){return t.endObject()},e}();e.DictionaryEncoding=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsField=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.nullable=function(){var t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},e.prototype.typeType=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.Type.NONE},e.prototype.type=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null},e.prototype.dictionary=function(e){var n=this.bb.__offset(this.bb_pos,12);return n?(e||new t.apache.arrow.flatbuf.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.children=function(e,n){var r=this.bb.__offset(this.bb_pos,14);return r?(n||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.childrenLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.layout=function(e,n){var r=this.bb.__offset(this.bb_pos,16);return r?(n||new t.apache.arrow.flatbuf.VectorLayout).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.layoutLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.customMetadata=function(e,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.customMetadataLength=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startField=function(t){t.startObject(8)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addNullable=function(t,e){t.addFieldInt8(1,+e,0)},e.addTypeType=function(e,n){e.addFieldInt8(2,n,t.apache.arrow.flatbuf.Type.NONE)},e.addType=function(t,e){t.addFieldOffset(3,e,0)},e.addDictionary=function(t,e){t.addFieldOffset(4,e,0)},e.addChildren=function(t,e){t.addFieldOffset(5,e,0)},e.createChildrenVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startChildrenVector=function(t,e){t.startVector(4,e,4)},e.addLayout=function(t,e){t.addFieldOffset(6,e,0)},e.createLayoutVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startLayoutVector=function(t,e){t.startVector(4,e,4)},e.addCustomMetadata=function(t,e){t.addFieldOffset(7,e,0)},e.createCustomMetadataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startCustomMetadataVector=function(t,e){t.startVector(4,e,4)},e.endField=function(t){return t.endObject()},e}();e.Field=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.offset=function(){return this.bb.readInt64(this.bb_pos)},t.prototype.length=function(){return this.bb.readInt64(this.bb_pos+8)},t.createBuffer=function(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()},t}();t.Buffer=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSchema=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.endianness=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):t.apache.arrow.flatbuf.Endianness.Little},e.prototype.fields=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.apache.arrow.flatbuf.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.fieldsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.customMetadata=function(e,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.apache.arrow.flatbuf.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.customMetadataLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startSchema=function(t){t.startObject(3)},e.addEndianness=function(e,n){e.addFieldInt16(0,n,t.apache.arrow.flatbuf.Endianness.Little)},e.addFields=function(t,e){t.addFieldOffset(1,e,0)},e.createFieldsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startFieldsVector=function(t,e){t.startVector(4,e,4)},e.addCustomMetadata=function(t,e){t.addFieldOffset(2,e,0)},e.createCustomMetadataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startCustomMetadataVector=function(t,e){t.startVector(4,e,4)},e.endSchema=function(t){return t.endObject()},e.finishSchemaBuffer=function(t,e){t.finish(e)},e}();e.Schema=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(273),o=n(73);function a(t,e){return!t&&ArrayBuffer.isView(e)?e:e instanceof t?e:e&&ArrayBuffer.isView(e)?new t(e.buffer,e.byteOffset,e.byteLength/t.BYTES_PER_ELEMENT):t.from(e||[])}e.toTypedArray=a,e.kUnknownNullCount=-1;var s=function(){function t(t,e,n,r){this.type=t,this.length=Math.floor(Math.max(e||0,0)),this.offset=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1))}return Object.defineProperty(t.prototype,"typeId",{get:function(){return this.type.TType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nullBitmap",{get:function(){return this[o.VectorType.VALIDITY]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nullCount",{get:function(){var t,e=this._nullCount;return-1===e&&(t=this[o.VectorType.VALIDITY])&&(this._nullCount=e=this.length-i.popcnt_bit_range(t,this.offset,this.offset+this.length)),e},enumerable:!0,configurable:!0}),t.prototype.clone=function(e,n,r,i){return void 0===n&&(n=this.length),void 0===r&&(r=this.offset),void 0===i&&(i=this._nullCount),new t(e,n,r,i)},t.prototype.slice=function(t,e){return e<=0?this:this.sliceInternal(this.clone(this.type,e,this.offset+t,+(0===this._nullCount)-1),t,e)},t.prototype.sliceInternal=function(t,e,n){var r;return(r=this[o.VectorType.TYPE])&&(t[o.VectorType.TYPE]=this.sliceData(r,e,n)),(r=this[o.VectorType.OFFSET])&&(t[o.VectorType.OFFSET]=this.sliceOffsets(r,e,n))||(r=this[o.VectorType.DATA])&&(t[o.VectorType.DATA]=this.sliceData(r,e,n)),t},t.prototype.sliceData=function(t,e,n){return t.subarray(e,e+n)},t.prototype.sliceOffsets=function(t,e,n){return t.subarray(e,e+n+1)},t}();e.BaseData=s;var l=function(t){function e(e,n,r,i,s,l){var c=t.call(this,e,n,s,l)||this;return c[o.VectorType.DATA]=a(c.ArrayType,i),c[o.VectorType.VALIDITY]=a(Uint8Array,r),c}return r.__extends(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this[o.VectorType.DATA]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ArrayType",{get:function(){return this.type.ArrayType},enumerable:!0,configurable:!0}),e.prototype.clone=function(t,e,n,r){return void 0===e&&(e=this.length),void 0===n&&(n=this.offset),void 0===r&&(r=this._nullCount),new this.constructor(t,e,this[o.VectorType.VALIDITY],this[o.VectorType.DATA],n,r)},e}(s);e.FlatData=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.sliceData=function(t){return t},e}(l);e.BoolData=c;var u=function(t){function e(e,n,r,i,s,l,c){var u=t.call(this,e,n,r,s,l,c)||this;return u[o.VectorType.OFFSET]=a(Int32Array,i),u}return r.__extends(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this[o.VectorType.DATA]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueOffsets",{get:function(){return this[o.VectorType.OFFSET]},enumerable:!0,configurable:!0}),e.prototype.clone=function(t,n,r,i){return void 0===n&&(n=this.length),void 0===r&&(r=this.offset),void 0===i&&(i=this._nullCount),new e(t,n,this[o.VectorType.VALIDITY],this[o.VectorType.OFFSET],this[o.VectorType.DATA],r,i)},e}(l);e.FlatListData=u;var d=function(t){function e(e,n,r){var i=t.call(this,e,r.length,r.offset,r._nullCount)||this;return i._indices=r,i._dictionary=n,i}return r.__extends(e,t),Object.defineProperty(e.prototype,"indices",{get:function(){return this._indices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dictionary",{get:function(){return this._dictionary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullCount",{get:function(){return this._indices.nullCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullBitmap",{get:function(){return this._indices.nullBitmap},enumerable:!0,configurable:!0}),e.prototype.clone=function(t,n,r){void 0===n&&(n=this.length),void 0===r&&(r=this.offset);var i=this._dictionary.data.clone(t.dictionary);return new e(this.type,this._dictionary.clone(i),this._indices.slice(r-this.offset,n))},e.prototype.sliceInternal=function(t,e,n){return t.length=t._indices.length,t._nullCount=t._indices._nullCount,t},e}(s);e.DictionaryData=d;var f=function(t){function e(e,n,r,i,s,l){var c=t.call(this,e,n,s,l)||this;return c.childData=i,c[o.VectorType.VALIDITY]=a(Uint8Array,r),c}return r.__extends(e,t),e.prototype.clone=function(t,n,r,i){return void 0===n&&(n=this.length),void 0===r&&(r=this.offset),void 0===i&&(i=this._nullCount),new e(t,n,this[o.VectorType.VALIDITY],this.childData,r,i)},e.prototype.sliceInternal=function(e,n,r){return this[o.VectorType.OFFSET]||(e.childData=this.childData.map(function(t){return t.slice(n,r)})),t.prototype.sliceInternal.call(this,e,n,r)},e}(s);e.NestedData=f;var p=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,[i],o,a)||this;return s._valuesData=i,s}return r.__extends(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this._valuesData},enumerable:!0,configurable:!0}),e}(f);e.SingleNestedData=p;var h=function(t){function e(e,n,r,i,s,l,c){var u=t.call(this,e,n,r,s,l,c)||this;return u[o.VectorType.OFFSET]=a(Int32Array,i),u}return r.__extends(e,t),Object.defineProperty(e.prototype,"valueOffsets",{get:function(){return this[o.VectorType.OFFSET]},enumerable:!0,configurable:!0}),e.prototype.clone=function(t,n,r,i){return void 0===n&&(n=this.length),void 0===r&&(r=this.offset),void 0===i&&(i=this._nullCount),new e(t,n,this[o.VectorType.VALIDITY],this[o.VectorType.OFFSET],this._valuesData,r,i)},e}(p);e.ListData=h;var g=function(t){function e(e,n,r,i,s,l,c){var u=t.call(this,e,n,r,s,l,c)||this;return u[o.VectorType.TYPE]=a(Int8Array,i),u}return r.__extends(e,t),Object.defineProperty(e.prototype,"typeIds",{get:function(){return this[o.VectorType.TYPE]},enumerable:!0,configurable:!0}),e.prototype.clone=function(t,n,r,i){return void 0===n&&(n=this.length),void 0===r&&(r=this.offset),void 0===i&&(i=this._nullCount),new e(t,n,this[o.VectorType.VALIDITY],this[o.VectorType.TYPE],this.childData,r,i)},e}(f);e.UnionData=g;var m=function(t){function e(e,n,r,i,o,a,s){return t.call(this,e,n,r,i,o,a,s)||this}return r.__extends(e,t),e.prototype.clone=function(t,n,r,i){return void 0===n&&(n=this.length),void 0===r&&(r=this.offset),void 0===i&&(i=this._nullCount),new e(t,n,this[o.VectorType.VALIDITY],this[o.VectorType.TYPE],this.childData,r,i)},e}(g);e.SparseUnionData=m;var v=function(t){function e(e,n,r,i,s,l,c,u){var d=t.call(this,e,n,r,i,l,c,u)||this;return d[o.VectorType.OFFSET]=a(Int32Array,s),d}return r.__extends(e,t),Object.defineProperty(e.prototype,"valueOffsets",{get:function(){return this[o.VectorType.OFFSET]},enumerable:!0,configurable:!0}),e.prototype.clone=function(t,n,r,i){return void 0===n&&(n=this.length),void 0===r&&(r=this.offset),void 0===i&&(i=this._nullCount),new e(t,n,this[o.VectorType.VALIDITY],this[o.VectorType.TYPE],this[o.VectorType.OFFSET],this.childData,r,i)},e}(g);e.DenseUnionData=v;var y=function(t){function e(n,r,i,o,a,s){var l=t.call(this,n,r,o,a)||this;return l._chunkVectors=i,l._chunkOffsets=s||e.computeOffsets(i),l}return r.__extends(e,t),Object.defineProperty(e.prototype,"chunkVectors",{get:function(){return this._chunkVectors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chunkOffsets",{get:function(){return this._chunkOffsets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chunkData",{get:function(){return this._chunkData||(this._chunkData=this._chunkVectors.map(function(t){return t.data}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullCount",{get:function(){var t=this._nullCount;return-1===t&&(this._nullCount=t=this._chunkVectors.reduce(function(t,e){return t+e.nullCount},0)),t},enumerable:!0,configurable:!0}),e.prototype.clone=function(t,n,r,i){return void 0===n&&(n=this.length),void 0===r&&(r=this.offset),void 0===i&&(i=this._nullCount),new e(t,n,this._chunkVectors.map(function(e){return e.clone(e.data.clone(t))}),r,i,this._chunkOffsets)},e.prototype.sliceInternal=function(t,n,r){for(var i=this._chunkVectors,o=this._chunkOffsets,a=[],s=-1,l=i.length;++s<l;){var c=i[s],u=c.length,d=o[s];if(!(d>=n+r)&&!(n>=d+u))if(d>=n&&d+u<=n+r)a.push(c);else{var f=Math.max(0,n-d),p=f+Math.min(u-f,n+r-d);a.push(c.slice(f,p))}}return t._chunkVectors=a,t._chunkOffsets=e.computeOffsets(a),t},e.computeOffsets=function(t){for(var e=new Uint32Array(t.length+1),n=0,r=e.length,i=e[0]=0;++n<r;)e[n]=i+=t[n-1].length;return e},e}(s);e.ChunkedData=y},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(){function t(){}return t.requestBuilders=r.Map(),t.registerBuilder=function(e,n){t.requestBuilders=t.requestBuilders.set(e,n)},t.getBuilder=function(e){return t.requestBuilders.get(e)},t}();e.RequestBuilderManager=i},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(29),a=n(2),s=n(224),l=n(4),c=n(323),u=n(410);function d(t,e,n){var r=l(e,function(t){return t[n]});return o(t,function(t){return t[n]in r})}!function(t){t.Arrow="Arrow",t.Binary="Binary",t.JSON="JSON",t.CSV="CSV",t.GML2="GML2",t.GML3Point1="GML3.1",t.GML3Point2="GML3.2",t.KML="KML",t.ShapeFile="ShapeFile",t.KMZ="KMZ"}(i=e.StoreTypes||(e.StoreTypes={})),e.StoreConfigs=((r={})[i.Arrow]={name:i.Arrow,outputFormat:"application/vnd.arrow",responseType:"arraybuffer",fileExtension:"arrow",requiresGeomesaFormatOptions:!0,queryHint:"ARROW_ENCODE",queryFieldRegex:/ARROW_DICTIONARY_FIELDS=([^\s]*),\s/,getWpsXml:function(t,e){return c.ArrowConversion.compile({featuresXml:c.WpsManager.chainRequest(e),dictionaryFields:t.formatOptions.dictionaryFields.toArray(),sortField:t.formatOptions.sortField})},localIdFilter:d},r[i.Binary]={name:i.Binary,outputFormat:"application/vnd.binary-viewer",responseType:"arraybuffer",fileExtension:"bin",requiresGeomesaFormatOptions:!0,queryHint:"BIN_TRACK",queryFieldRegex:/BIN_TRACK(?:_KEY)?=([^,]*),/,getWpsXml:function(t,e){return c.BinConversion.compile({geomField:t.geomField,dtgField:t.dtgField,trackIdField:t.idField,axisOrder:"lonlat",featuresXml:c.WpsManager.chainRequest(e)})},localIdFilter:function(t,e,n){var r=l(e,function(t){return t.getProperties().id});return o(t,function(t){return s(r,u.StoreHelper.hashCode(a(t,["properties",n])))>-1})}},r[i.JSON]={name:i.JSON,outputFormat:"application/json",responseType:"json",fileExtension:"json",requiresGeomesaFormatOptions:!1,queryHint:"",queryFieldRegex:void 0,getWpsXml:function(t,e){return e},localIdFilter:d},r[i.CSV]={name:i.CSV,outputFormat:"csv",responseType:"blob",fileExtension:"csv",requiresGeomesaFormatOptions:!1,queryHint:"",queryFieldRegex:void 0,getWpsXml:function(t,e){return e},localIdFilter:d},r[i.GML2]={name:i.GML2,outputFormat:"GML2",responseType:"blob",fileExtension:"gml",requiresGeomesaFormatOptions:!1,queryHint:"",queryFieldRegex:void 0,getWpsXml:function(t,e){return e},localIdFilter:d},r[i.GML3Point1]={name:i.GML3Point1,outputFormat:"text/xml; subtype=gml/3.1.1",responseType:"blob",fileExtension:"gml",requiresGeomesaFormatOptions:!1,queryHint:"",queryFieldRegex:void 0,getWpsXml:function(t,e){return e},localIdFilter:d},r[i.GML3Point2]={name:i.GML3Point2,outputFormat:"application/gml+xml; version=3.2",responseType:"blob",fileExtension:"gml",requiresGeomesaFormatOptions:!1,queryHint:"",queryFieldRegex:void 0,getWpsXml:function(t,e){return e},localIdFilter:d},r[i.KML]={name:i.KML,outputFormat:"application/vnd.google-earth.kml+xml",responseType:"blob",fileExtension:"kml",requiresGeomesaFormatOptions:!1,queryHint:"",queryFieldRegex:void 0,getWpsXml:function(t,e){return e},localIdFilter:d},r[i.ShapeFile]={name:i.ShapeFile,outputFormat:"SHAPE-ZIP",responseType:"blob",fileExtension:"zip",requiresGeomesaFormatOptions:!1,queryHint:"",queryFieldRegex:void 0,getWpsXml:function(t,e){return e},localIdFilter:d},r[i.KMZ]={name:i.KMZ,outputFormat:"kmz",responseType:"blob",fileExtension:"kmz",requiresGeomesaFormatOptions:!1,queryHint:"",queryFieldRegex:void 0,getWpsXml:function(t,e){return e},localIdFilter:d},r)},function(t,e,n){var r=n(51)(n(2212));t.exports=r},,,,function(t,e,n){var r=n(165),i=8;function o(t,e,n){var a=r(t,i,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return a.placeholder=o.placeholder,a}o.placeholder={},t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(42),o=n(2),a=n(50),s=n(21),l=n(74),c=function(){function t(){}return t.convertCqlParamsToClauses=function(t,e){return r.Map().withMutations(function(n){var c=n;return t?(i(t.strings,function(t,e){c=c.set(e,new l.SearchTermClauseRecord({fields:r.List([e]),text:t}))}),i(t.numbers,function(t,e){c=c.set(e,new l.BetweenClauseRecord({field:e,start:t.min,end:t.max,toUnit:t.toUnit,fromUnit:t.fromUnit}))}),i(t.bools,function(t,e){c=c.set(e,new l.BooleanClauseRecord({field:e,value:" = true"===t||" = false"!==t&&null}))}),i(t.enums,function(t,e){c=c.set(e,new l.InClauseRecord({field:e,list:r.List(t.selected)}))}),i(t.datetimes,function(t,n){var r=o(e,n),i=a(t.min)?s.utc(t.min).format():null,u=a(t.max)?s.utc(t.max).format():null;c=c.set(n,new l.PointTimeClauseRecord({field:n,dtg:i,endDtg:u,dtgFieldIsString:!!r&&"string"===r.localType}))}),c):c})},t.convertSimpleClausesToCqlParams=function(t,e){var n={};return e&&(n.additionalCql=e.cql),t&&t.forEach(function(t,e){if(t instanceof l.SearchTermClauseRecord&&(n.strings||(n.strings={}),n.strings[e]=t.text),t instanceof l.BetweenClauseRecord&&(n.numbers||(n.numbers={}),n.numbers[e]={min:t.start,max:t.end,unitLabel:t.fromUnit,toUnit:t.toUnit,fromUnit:t.fromUnit}),t instanceof l.BooleanClauseRecord&&(n.bools||(n.bools={}),n.bools[e]=null==t.value?"both":t.value?" = true":" = false"),t instanceof l.InClauseRecord&&(n.enums||(n.enums={}),n.enums[e]={selected:t.list.toArray(),choices:void 0},t.list.forEach(function(t){n.enums[e][t]=!0})),t instanceof l.PointTimeClauseRecord){n.datetimes||(n.datetimes={});var r=s.utc(t.dtg),i=s.utc(t.endDtg);n.datetimes[e]={min:r.isValid()?r.valueOf():void 0,max:i.isValid()?i.valueOf():void 0}}}),n},t}();e.CqlParamsHelper=c},,,,,,,,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(39),o=n(348),a=n(2967),s=n(2968),l=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.titleWidget=new i.WidgetDef({tag:"stealth-search-default-title",scope:n.scope}),o.contentWidget=new i.WidgetDef({tag:"stealth-search-default-content",scope:n.scope}),o.collapsedWidget=null,o}return r(e,t),e}(o.ResultTypeWidgetCfg);e.DefaultResultTypeWidgetCfg=l,e.titleDirective=function(){return{restrict:"EA",template:a}},e.collapsedDirective=function(){return{restrict:"EA",template:""}},e.contentDirective=function(){return{restrict:"EA",template:s}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(171),i=n(171),o=n(171),a=function(){return function(t,e,n){this.getProperties=function(t){return r.get(t,t.dataSource.fieldPath,t)},i.set(e.scope,"sm",n),i.set(e.scope,"getProperties",this.getProperties),o.merge(this,t)}}();e.ResultTypeWidgetCfg=a},function(t,e,n){var r=n(396),i=n(148),o=n(260),a=n(121),s=n(309),l=n(44),c=Object.prototype.hasOwnProperty,u=o(function(t,e){if(s(e)||a(e))i(e,l(e),t);else for(var n in e)c.call(e,n)&&r(t,n,e[n])});t.exports=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(1093),o=n(635),a=n(636),s=n(351),l=n(458),c=n(1096),u=n(1097);function d(t){return void 0!==t.leaves||void 0!==t.groups}!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(r=e.EventType||(e.EventType={}));var f=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[r[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:r.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;this._links.length;for(this._descent.locks.clear(),e=0;e<n;++e)if((t=this._nodes[e]).fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var i=[t.px,t.py];this._descent.locks.add(e,i)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:r.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)(t=this._nodes[r]).x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),void 0!==t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return void 0===t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return void 0===t.parent}),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=i.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:r.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return o.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return o.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,i,c){var u=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===c&&(c=!0);var d,f=this.nodes().length,p=f+2*this._groups.length,h=(this._links.length,this._canvasSize[0]),g=this._canvasSize[1],m=new Array(p),v=new Array(p),y=null,b=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,void 0===t.x&&(t.x=h/2,t.y=g/2),m[e]=t.x,v[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?d=this._distanceMatrix:(d=new l.Calculator(p,this._links,t.getSourceIndex,t.getTargetIndex,function(t){return u.getLinkLength(t)}).DistanceMatrix(),y=a.Descent.createSquareMatrix(p,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=u._nodes[t.source]),"number"==typeof t.target&&(t.target=u._nodes[t.target])}),this._links.forEach(function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);y[n][r]=y[r][n]=e.weight||1}));var w=a.Descent.createSquareMatrix(p,function(t,e){return d[t][e]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var _=f;this._groups.forEach(function(t){!function(t,e,n,r){y[t][e]=y[e][t]=n,w[t][e]=w[e][t]=r}(_,_+1,u._groupCompactness,.1),m[_]=0,v[_++]=0,m[_]=0,v[_++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var x=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,x=x.concat(o.generateDirectedEdgeConstraints(f,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new a.Descent([m,v],w),this._descent.locks.clear();for(_=0;_<f;++_){var S=this._nodes[_];if(S.fixed){S.px=S.x,S.py=S.y;var C=[S.x,S.y];this._descent.locks.add(_,C)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,m,v),x.length>0&&(this._descent.project=new s.Projection(this._nodes,this._groups,this._rootGroup,x).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(h,g),this.avoidOverlaps(b),b&&(this._nodes.forEach(function(t,e){t.x=m[e],t.y=v[e]}),this._descent.project=new s.Projection(this._nodes,this._groups,this._rootGroup,x,!0).projectFunctions(),this._nodes.forEach(function(t,e){m[e]=t.x,v[e]=t.y})),this._descent.G=y,this._descent.run(r),i){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=f,this._descent.scaleSnapByMaxH=f!=p;var E=a.Descent.createSquareMatrix(p,function(t,e){return t>=f||e>=f?y[t][e]:0});this._descent.G=E,this._descent.run(i)}return this.updateNodePositions(),this.separateOverlappingComponents(h,g),c?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),a=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){a.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(e){return o.push({source:t.index,target:e.index})}),void 0!==t.groups&&t.groups.forEach(function(e){return o.push({source:t.index,target:e.index})})}),(new t).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=a[t.index].x,r[t.index]=a[t.index].y})}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e){var n=this;if(!this._distanceMatrix&&this._handleDisconnected){var r=this._descent.x[0],i=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=r[e],t.y=i[e]});var o=u.separateGraphs(this._nodes,this._links);u.applyPacking(o,t,e,this._defaultNodeSize),this._nodes.forEach(function(t,e){n._descent.x[0][e]=t.x,n._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new c.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},t.prototype.routeEdge=function(t,e,n){void 0===e&&(e=5);var r=[],i=new c.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},a={x:t.target.x,y:t.target.y},u=i.addPoint(o,t.source.index),d=i.addPoint(a,t.target.index);i.addEdgeIfVisible(o,a,t.source.index,t.target.index),void 0!==n&&n(i);var f=new l.Calculator(i.V.length,i.E,function(t){return t.source.id},function(t){return t.target.id},function(t){return t.length()}).PathFromNodeToNode(u.id,d.id);if(1===f.length||f.length===i.V.length){var p=s.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);r=[p.sourceIntersection,p.arrowStart]}else{for(var h=f.length-2,g=i.V[f[h]].p,m=i.V[f[0]].p,v=(r=[t.source.innerBounds.rayIntersection(g.x,g.y)],h);v>=0;--v)r.push(i.V[f[v]].p);r.push(s.makeEdgeTo(m,t.target.innerBounds,e))}return r},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){d(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.storeOffset(e,n)})},t.dragOrigin=function(t){return d(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){d(e)?(void 0!==e.leaves&&e.leaves.forEach(function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.drag(e,n)})):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){d(e)?(void 0!==e.leaves&&e.leaves.forEach(function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();e.Layout=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(637),o=n(1094);function a(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},s.empty()):s.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce(function(t,e){return a(e).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}e.computeGroupBounds=a;var s=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var l=t.lineIntersection(e,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==l&&a.push({x:l.x,y:l.y})}return a},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,n,r,i,o,a,s){var l=n-t,c=a-i,u=r-e,d=s-o,f=d*l-c*u;if(0==f)return null;var p=t-i,h=e-o,g=(c*h-d*p)/f,m=(l*h-u*p)/f;return g>=0&&g<=1&&m>=0&&m<=1?{x:t+g*l,y:e+g*u}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=s,e.makeEdgeBetween=function(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),l=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+l*o/s,y:r.y+l*a/s}}},e.makeEdgeTo=function(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}};var l=function(){return function(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=d(),this.next=d()}}(),c=function(){return function(t,e,n){this.isOpen=t,this.v=e,this.pos=n}}();function u(t,e){return t.pos>e.pos?1:t.pos<e.pos?-1:t.isOpen?-1:e.isOpen?1:0}function d(){return new o.RBTree(function(t,e){return t.pos-e.pos})}var f={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new s(n-r/2,n+r/2,t,e)},findNeighbours:function(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var a=i.r.overlapX(t.r);if((a<=0||a<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),a<=0)break}};n("next","prev"),n("prev","next")}},p={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new s(t,e,n-r/2,n+r/2)},findNeighbours:function(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}};function h(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,a=void 0!==t.leaves?t.leaves.length:0,s=o?t.groups.reduce(function(t,r){return t.concat(h(r,e,n,!0))},[]):[],l=(r?2:0)+a+o,c=new Array(l),u=new Array(l),d=0,f=function(t,e){u[d]=t,c[d++]=e};if(r){var p=t.bounds,m=e.getCentre(p),v=e.getSize(p)/2,y=e.getOpen(p),b=e.getClose(p),w=m-v+i/2,_=m+v-i/2;t.minVar.desiredPosition=w,f(e.makeRect(y,b,w,i),t.minVar),t.maxVar.desiredPosition=_,f(e.makeRect(y,b,_,i),t.maxVar)}a&&t.leaves.forEach(function(t){return f(t.bounds,t.variable)}),o&&t.groups.forEach(function(t){var n=t.bounds;f(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var x=g(u,c,e,n);return o&&(c.forEach(function(t){t.cOut=[],t.cIn=[]}),x.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),s.concat(x)}function g(t,e,n,r){var o,a=t.length,s=2*a;console.assert(e.length>=a);var f=new Array(s);for(o=0;o<a;++o){var p=t[o],h=new l(e[o],p,n.getCentre(p));f[o]=new c(!0,h,n.getOpen(p)),f[o+a]=new c(!1,h,n.getClose(p))}f.sort(u);var g=new Array,m=d();for(o=0;o<s;++o){var v=f[o];h=v.v;if(v.isOpen)m.insert(h),n.findNeighbours(h,m);else{m.remove(h);var y=function(t,e){var o=(n.getSize(t.r)+n.getSize(e.r))/2+r;g.push(new i.Constraint(t.v,e.v,o))},b=function(t,e,n){for(var r,i=h[t].iterator();null!==(r=i[t]());)n(r,h),r[e].remove(h)};b("prev","next",function(t,e){return y(t,e)}),b("next","prev",function(t,e){return y(e,t)})}}return console.assert(0===m.size),g}function m(t,e){return g(t,e,f,1e-6)}function v(t,e){return g(t,e,p,1e-6)}function y(t){return h(t,f,1e-6)}function b(t){return h(t,p,1e-6)}e.generateXConstraints=m,e.generateYConstraints=v,e.generateXGroupConstraints=y,e.generateYGroupConstraints=b,e.removeOverlaps=function(t){var e=t.map(function(t){return new i.Variable(t.cx())}),n=m(t,e),r=new i.Solver(e,n);r.solve(),e.forEach(function(e,n){return t[n].setXCentre(e.position())}),e=t.map(function(t){return new i.Variable(t.cy())}),n=v(t,e),(r=new i.Solver(e,n)).solve(),e.forEach(function(e,n){return t[n].setYCentre(e.position())})};var w=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return r(e,t),e}(i.Variable);e.IndexedVariable=w;var _=function(){function t(t,e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1);var o=this;if(this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=i,this.variables=t.map(function(t,e){return t.variable=new w(e,1)}),r&&this.createConstraints(r),i&&n&&void 0!==n.groups){t.forEach(function(t){if(t.width&&t.height){var e=t.width/2,n=t.height/2;t.bounds=new s(t.x-e,t.x+e,t.y-n,t.y+n)}else t.bounds=new s(t.x,t.x,t.y,t.y)}),a(n);var l=t.length;e.forEach(function(t){o.variables[l]=t.minVar=new w(l++,void 0!==t.stiffness?t.stiffness:.01),o.variables[l]=t.maxVar=new w(l++,void 0!==t.stiffness?t.stiffness:.01)})}}return t.prototype.createSeparation=function(t){return new i.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=null;t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}).forEach(function(t){if(i){var e=i[n]+i[r];e>t[n]&&(t[n]=e)}i=t})}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){var o=e.nodes[t.node].variable;r.push(new i.Constraint(n,o,t.offset,!0))})},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var a=(i.width||0)/2,l=(i.height||0)/2,c=t[o],u=e[o];i.bounds=new s(c-a,c+a,u-l,u+l)})},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,y,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,b,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,r,i,o,s,l,c){this.setupVariablesAndBounds(t,e,r,i),this.rootGroup&&this.avoidOverlaps&&(a(this.rootGroup),o=o.concat(s(this.rootGroup))),this.solve(this.variables,o,n,r),this.nodes.forEach(l),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(c),a(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var o=new i.Solver(t,e);o.setStartingPositions(n),o.setDesiredPositions(r),o.solve()},t}();e.Projection=_},,,,,,,,,,function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(484);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e){t.exports=function(t){return t}},,,function(t,e,n){"use strict";var r=this;Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(578),a=n(413);i.format.Arrow=function(t){i.format.Feature.call(r);var e=t||{};r._geometryName=e.geometryName?e.geometryName:"geom",r._geometryGetter=null,r._arrowGetters=[],r._arrowColumns=[],r._features=[],r._arrowTable=void 0},i.inherits(i.format.Arrow,i.format.Feature),i.format.Arrow.prototype.readFeature=function(t,e){return r.readFeatures(t,e)},i.format.Arrow.prototype.readFeatures=function(t,e){return r._arrowTable||(r._arrowTable=o.read(new Uint8Array(t))),r._features.length>0&&(r._features=[]),r._arrowColumns=r._arrowTable.schema.fields.map(function(t){return t.name}).filter(function(t){return t!==r._geometryName}),r._arrowTable.scan(function(t){var e=r._geometryGetter(t).values,n=new i.Feature({geometry:new i.geom.Point([e[1],e[0]])}),o={};r._arrowColumns.forEach(function(e,n){var i=r._arrowGetters[n](t);i.values&&(i=i.values),o[e]=i}),n.setProperties(o),r._features.push(n)},function(t){r._geometryGetter=a.col(r._geometryName).bind(t),r._arrowColumns.forEach(function(e){return r._arrowGetters.push(a.col(e).bind(t))})}),r._features},i.format.Arrow.prototype.readGeometry=function(t,e){var n=null;return r._arrowTable||(r._arrowTable=o.read(new Uint8Array(t))),r._arrowTable.scan(function(t){var e=r._geometryGetter(t).values;n=new i.geom.Point([e[1],e[0]])},function(t){r._geometryGetter=a.col(r._geometryName).bind(t)}),n}},function(t,e,n){var r=n(248),i=n(103),o=n(17),a=n(156),s=1/0,l=r?r.prototype:void 0,c=l?l.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},function(t,e,n){var r=n(211);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e,n){var r=n(212)(Object,"create");t.exports=r},function(t,e,n){var r=n(1294),i=n(1295),o=n(1296),a=n(1297),s=n(1298);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(213);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(1300);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(372),i=n(1314),o=n(1315),a=n(1316),s=n(1317),l=n(1318);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},function(t,e,n){var r=n(502),i=n(1320),o=n(1321);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){(function(t){var r=n(694),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(120)(t))},function(t,e,n){var r=n(309),i=n(1327),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},,function(t,e,n){"use strict";t.exports=function(t){return t&&t.constructor.prototype.isMatrix||!1}},function(t,e,n){"use strict";e.type=function(t){var e=typeof t;return"object"===e?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":"Object":"function"===e?"Function":e}},function(t,e,n){"use strict";var r=n(65);e.name="algorithm05",e.factory=function(t,e,i,o){var a=i(n(61)),s=t.SparseMatrix;return function(t,e,n){var i=t._values,l=t._index,c=t._ptr,u=t._size,d=t._datatype,f=e._values,p=e._index,h=e._ptr,g=e._size,m=e._datatype;if(u.length!==g.length)throw new r(u.length,g.length);if(u[0]!==g[0]||u[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+g+")");var v,y=u[0],b=u[1],w=a,_=0,x=n;"string"==typeof d&&d===m&&(v=d,w=o.find(a,[v,v]),_=o.convert(0,v),x=o.find(n,[v,v]));var S,C,E,T,M=i&&f?[]:void 0,k=[],A=[],I=new s({values:M,index:k,ptr:A,size:[y,b],datatype:v}),O=M?[]:void 0,P=M?[]:void 0,L=[],D=[];for(C=0;C<b;C++){A[C]=k.length;var N=C+1;for(E=c[C],T=c[C+1];E<T;E++)S=l[E],k.push(S),L[S]=N,O&&(O[S]=i[E]);for(E=h[C],T=h[C+1];E<T;E++)L[S=p[E]]!==N&&k.push(S),D[S]=N,P&&(P[S]=f[E]);if(M)for(E=A[C];E<k.length;){var R=L[S=k[E]],F=D[S];if(R===N||F===N){var B=x(R===N?O[S]:_,F===N?P[S]:_);w(B,_)?k.splice(E,1):(M.push(B),E++)}}}return A[b]=k.length,I}}},function(t,e,n){"use strict";var r=n(11),i=n(13).isInteger;e.name="eye",e.factory=function(t,e,o,a){var s=o(n(7)),l=a("eye",{"":function(){return"Matrix"===e.matrix?s([]):[]},string:function(t){return s(t)},"number | BigNumber":function(t){return u(t,t,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, string":function(t,e){return u(t,t,e)},"number | BigNumber, number | BigNumber":function(t,n){return u(t,n,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,n){return u(t,e,n)},Array:function(t){return c(t)},"Array, string":function(t,e){return c(t,e)},Matrix:function(t){return c(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return c(t.valueOf(),e)}});return l.toTex=void 0,l;function c(t,e){switch(t.length){case 0:return e?s(e):[];case 1:return u(t[0],t[0],e);case 2:return u(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function u(e,n,o){var a=t.isBigNumber(e)||t.isBigNumber(n)?t.BigNumber:null;if(t.isBigNumber(e)&&(e=e.toNumber()),t.isBigNumber(n)&&(n=n.toNumber()),!i(e)||e<1)throw new Error("Parameters in function eye must be positive integers");if(!i(n)||n<1)throw new Error("Parameters in function eye must be positive integers");var s=a?new t.BigNumber(1):1,l=a?new a(0):0,c=[e,n];if(o)return t.Matrix.storage(o).diagonal(c,s,0,l);for(var u=r.resize([],c,l),d=e<n?e:n,f=0;f<d;f++)u[f][f]=s;return u}}},function(t,e,n){"use strict";e.name="ParenthesisNode",e.path="expression.node",e.factory=function(t,e,r,i){var o=r(n(37)).register,a=r(n(37)).compile,s=r(n(83));function l(e){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");if(!t.isNode(e))throw new TypeError('Node expected for parameter "content"');this.content=e}return l.prototype=new s,l.prototype.type="ParenthesisNode",l.prototype.isParenthesisNode=!0,o(l.prototype.type,function(t,e,n){if(!(t instanceof l))throw new TypeError("No valid ParenthesisNode");return a(t.content,e,n)}),l.prototype.getContent=function(){return this.content.getContent()},l.prototype.forEach=function(t){t(this.content,"content",this)},l.prototype.map=function(t){return new l(t(this.content,"content",this))},l.prototype.clone=function(){return new l(this.content)},l.prototype._toString=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?"("+this.content.toString(t)+")":this.content.toString(t)},l.prototype.toHTML=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(t)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(t)},l.prototype._toTex=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?"\\left("+this.content.toTex(t)+"\\right)":this.content.toTex(t)},l}},function(t,e,n){"use strict";var r=n(28).clone,i=n(13).isInteger,o=n(11),a=n(311),s=n(65);function l(t,e,n,r){if(r<n){if(t.length!=e.length)throw new s(t.length,e.length);for(var i=[],o=0;o<t.length;o++)i[o]=l(t[o],e[o],n,r+1);return i}return t.concat(e)}e.name="concat",e.factory=function(t,e,c,u){var d=c(n(7)),f=u("concat",{"...Array | Matrix | number | BigNumber":function(e){var n,c,u=e.length,f=-1,p=!1,h=[];for(n=0;n<u;n++){var g=e[n];if(t.isMatrix(g)&&(p=!0),t.isNumber(g)||t.isBigNumber(g)){if(n!==u-1)throw new Error("Dimension must be specified as last argument");if(c=f,f=g.valueOf(),!i(f))throw new TypeError("Integer number expected for dimension");if(f<0||n>0&&f>c)throw new a(f,c+1)}else{var m=r(g).valueOf(),v=o.size(m);if(h[n]=m,c=f,f=v.length-1,n>0&&f!=c)throw new s(c+1,f+1)}}if(0==h.length)throw new SyntaxError("At least one matrix expected");for(var y=h.shift();h.length;)y=l(y,h.shift(),f,0);return p?d(y):y},"...string":function(t){return t.join("")}});return f.toTex=void 0,f}},function(t,e,n){"use strict";var r=n(11).size,i=n(382),o=n(311);function a(t,e,n){var r,i,o,s;if(e<=0){if(Array.isArray(t[0])){for(s=function(t){var e,n,r=t.length,i=t[0].length,o=[];for(n=0;n<i;n++){var a=[];for(e=0;e<r;e++)a.push(t[e][n]);o.push(a)}return o}(t),i=[],r=0;r<s.length;r++)i[r]=a(s[r],e-1,n);return i}for(o=t[0],r=1;r<t.length;r++)o=n(o,t[r]);return o}for(i=[],r=0;r<t.length;r++)i[r]=a(t[r],e-1,n);return i}t.exports=function(t,e,n){var s=Array.isArray(t)?r(t):t.size();if(e<0||e>=s.length)throw new o(e,s.length);return i(t)?t.create(a(t.valueOf(),e,n)):a(t,e,n)}},function(t,e,n){"use strict";var r=n(255);t.exports=function(t){for(var e=0;e<t.length;e++)if(r(t[e]))return!0;return!1}},function(t,e,n){"use strict";var r=n(28).clone,i=n(45).format;e.name="transpose",e.factory=function(t,e,o,a){var s=n(27),l=o(n(7)),c=t.DenseMatrix,u=t.SparseMatrix,d=a("transpose",{Array:function(t){return d(l(t)).valueOf()},Matrix:function(t){var e,n=t.size();switch(n.length){case 1:e=t.clone();break;case 2:var r=n[0],o=n[1];if(0===o)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+i(n)+")");switch(t.storage()){case"dense":e=f(t,r,o);break;case"sparse":e=p(t,r,o)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+i(this._size)+")")}return e},any:function(t){return r(t)}}),f=function(t,e,n){for(var i,o=t._data,a=[],s=0;s<n;s++){i=a[s]=[];for(var l=0;l<e;l++)i[l]=r(o[l][s])}return new c({data:a,size:[n,e],datatype:t._datatype})},p=function(t,e,n){for(var i,o,a,s=t._values,l=t._index,c=t._ptr,d=s?[]:void 0,f=[],p=[],h=[],g=0;g<e;g++)h[g]=0;for(i=0,o=l.length;i<o;i++)h[l[i]]++;for(var m=0,v=0;v<e;v++)p.push(m),m+=h[v],h[v]=p[v];for(p.push(m),a=0;a<n;a++)for(var y=c[a],b=c[a+1],w=y;w<b;w++){var _=h[l[w]]++;f[_]=a,s&&(d[_]=r(s[w]))}return new u({values:d,index:f,ptr:p,size:[n,e],datatype:t._datatype})};return d.toTex={1:"\\left(${args[0]}\\right)"+s.operators.transpose},d}},function(t,e,n){"use strict";var r=n(1636),i=n(65);e.name="algorithm06",e.factory=function(t,e,o,a){var s=o(n(61)),l=t.SparseMatrix;return function(t,e,n){var o=t._values,c=t._size,u=t._datatype,d=e._values,f=e._size,p=e._datatype;if(c.length!==f.length)throw new i(c.length,f.length);if(c[0]!==f[0]||c[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+f+")");var h,g=c[0],m=c[1],v=s,y=0,b=n;"string"==typeof u&&u===p&&(h=u,v=a.find(s,[h,h]),y=a.convert(0,h),b=a.find(n,[h,h]));for(var w=o&&d?[]:void 0,_=[],x=[],S=new l({values:w,index:_,ptr:x,size:[g,m],datatype:h}),C=w?[]:void 0,E=[],T=[],M=0;M<m;M++){x[M]=_.length;var k=M+1;if(r(t,M,E,C,T,k,S,b),r(e,M,E,C,T,k,S,b),C)for(var A=x[M];A<_.length;){var I=_[A];if(T[I]===k){var O=C[I];v(O,y)?_.splice(A,1):(w.push(O),A++)}else _.splice(A,1)}else for(var P=x[M];P<_.length;)T[_[P]]!==k?_.splice(P,1):P++}return x[m]=_.length,S}}},function(t,e,n){"use strict";var r=n(9);e.name="factorial",e.factory=function(t,e,i,o){var a=i(n(771)),s=n(27),l=o("factorial",{number:function(t){if(t<0)throw new Error("Value must be non-negative");return a(t+1)},BigNumber:function(t){if(t.isNegative())throw new Error("Value must be non-negative");return a(t.plus(1))},"Array | Matrix":function(t){return r(t,l)}});return l.toTex={1:"\\left(${args[0]}\\right)"+s.operators.factorial},l}},function(t,e,n){"use strict";var r=n(13).isInteger;function i(t){return t.isInteger()&&t.gte(0)}e.name="combinations",e.factory=function(t,e,n,o){var a=o("combinations",{"number, number":function(t,e){var n,i,o;if(!r(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!r(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(n=Math.max(e,t-e),i=1,o=1;o<=t-n;o++)i=i*(n+o)/o;return i},"BigNumber, BigNumber":function(e,n){var r,o,a,s,l=new t.BigNumber(1);if(!i(e)||!i(n))throw new TypeError("Positive integer value expected in function combinations");if(n.gt(e))throw new TypeError("k must be less than n in function combinations");for(r=e.minus(n),n.lt(r)&&(r=n),o=l,a=l,s=e.minus(r);a.lte(s);a=a.plus(1))o=o.times(r.plus(a)).dividedBy(a);return o}});return a.toTex={2:"\\binom{${args[0]}}{${args[1]}}"},a}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){var r=n(1761),i=n(535),o=n(60),a=n(102);t.exports=function(t,e,n){t=a(t);var s=(e=o(e))?i(t):0;return e&&s<e?r(e-s,n)+t:t}},function(t,e,n){var r=n(188),i=n(213),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){t.exports=function(t){return null===t}},function(t,e,n){var r=n(375),i=n(317),o=n(396),a=n(539),s=n(1812),l=n(797),c=n(189),u=n(1813),d=n(1814),f=n(707),p=n(540),h=n(181),g=n(1815),m=n(1816),v=n(800),y=n(17),b=n(249),w=n(1820),_=n(71),x=n(1822),S=n(44),C=1,E=2,T=4,M="[object Arguments]",k="[object Function]",A="[object GeneratorFunction]",I="[object Object]",O={};O[M]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[I]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[k]=O["[object WeakMap]"]=!1,t.exports=function t(e,n,P,L,D,N){var R,F=n&C,B=n&E,j=n&T;if(P&&(R=D?P(e,L,D,N):P(e)),void 0!==R)return R;if(!_(e))return e;var q=y(e);if(q){if(R=g(e),!F)return c(e,R)}else{var z=h(e),U=z==k||z==A;if(b(e))return l(e,F);if(z==I||z==M||U&&!D){if(R=B||U?{}:v(e),!F)return B?d(e,s(R,e)):u(e,a(R,e))}else{if(!O[z])return D?e:{};R=m(e,z,F)}}N||(N=new r);var $=N.get(e);if($)return $;if(N.set(e,R),x(e))return e.forEach(function(r){R.add(t(r,n,P,r,e,N))}),R;if(w(e))return e.forEach(function(r,i){R.set(i,t(r,n,P,i,e,N))}),R;var V=j?B?p:f:B?keysIn:S,H=q?void 0:V(e);return i(H||e,function(r,i){H&&(r=e[i=r]),o(R,i,t(r,n,P,i,e,N))}),R}},function(t,e,n){var r=n(711)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(262),i=n(71);t.exports=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=r(t.prototype),o=t.apply(n,e);return i(o)?o:n}}},function(t,e,n){var r=n(250);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,c=[],u=!1,d=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var t=s(f);u=!0;for(var e=c.length;e;){for(l=c,c=[];++d<e;)l&&l[d].run();d=-1,e=c.length}l=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(396),i=n(180),o=n(214),a=n(71),s=n(157);t.exports=function(t,e,n,l){if(!a(t))return t;for(var c=-1,u=(e=i(e,t)).length,d=u-1,f=t;null!=f&&++c<u;){var p=s(e[c]),h=n;if(c!=d){var g=f[p];void 0===(h=l?l(g,p,f):void 0)&&(h=a(g)?g:o(e[c+1])?[]:{})}r(f,p,h),f=f[p]}return t}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(896),o=n(897),a=n(898),s=n(2064),l=n(901),c=n(2065),u=n(2066),d=n(902),f=n(897);e.ListPopupCoordinator=f.ListPopupCoordinator;var p=n(2067);e.EntityListController=p.EntityListController;var h=n(2068),g=n(898);e.Panel=g.Panel,e.default=r.module("stealth.live.list",["ccri.angular-utils","ccri.list-view","stealth.core.geo.ol3.follow","stealth.core.geo.ol3.map","stealth.core.geo.ows","stealth.core.sidebar"]).namespace().service("ExtentFilterState",i.ExtentFilterState).factory("ListPopupCoordinator",o.factory).factory("Panel",a.factory).directive("list",[function(){return{restrict:"E",template:l,controller:p.EntityListController}}]).directive("toolbar",[function(){return{restrict:"E",template:s,scope:!1,controllerAs:"tb",controller:h.EntityListToolbarController}}]).directive("title",[function(){return{restrict:"E",scope:{record:"=",recordStates:"=",idField:"="},template:c}}]).directive("collapsed",[function(){return{restrict:"E",scope:{record:"="},template:u}}]).directive("contents",[function(){return{restrict:"E",scope:{record:"="},template:d}}])},function(t,e,n){var r=n(2124),i=n(2125),o=n(43),a=n(17);t.exports=function(t,e){return function(n,s){var l=a(n)?r:i,c=e?e():{};return l(n,t,o(s,2),c)}}},function(t,e,n){var r=n(103),i=n(43),o=n(913),a=n(540);t.exports=function(t,e){if(null==t)return{};var n=r(a(t),function(t){return[t]});return e=i(e),o(t,n,function(t,n){return e(t,n[0])})}},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}},function(t,e,n){var r=n(2187),i=n(2188),o=n(43),a=n(17),s=n(147);t.exports=function(t,e,n){var l=a(t)?r:i;return n&&s(t,e,n)&&(e=void 0),l(t,o(e,3))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(272),i=n(413),o=n(129),a=n(14),s=n(271),l=n(5),c=n(74),u=n(194),d=n(270),f=n(931),p=n(933),h=n(333),g=function(){function t(){}return t.buildBinFormatOptions=function(t,e,n,r){return new u.GeomesaBinaryFormatOptionsRecord({dtg:t,geom:e,trackId:n,label:r})},t.buildArrowFormatOptions=function(t,e,n){var r=d.KeywordHelper.getArrowFieldProperties(t).requiredFields;return n&&(r=r.concat(n)),r=s(r),new u.GeomesaArrowFormatOptionsRecord({sortField:e,dictionaryFields:l.List(r),useCachedDictionaries:!1,includeFids:!1,batchSize:1e4})},t.buildStore=function(t){return t.type===h.StoreTypes.Arrow?new f.ArrowStore(t.id,t.geomField,t.dtgField,t.idField):new p.BinaryStore(t.id,t.idField)},t.buildFormatOptions=function(t){return t.reduce(function(t,e,n){return null==e?t:l.List.isList(e)?t.push(n+":"+e.join()):t.push(n+":"+e)},l.List()).join(";")},t.buildCqlFromPredicate=function(e){if(e instanceof i.ComparisonPredicate){var n=t.convertPredicateValueToString(e.left),o=t.convertPredicateValueToString(e.right);return e instanceof r.predicate.Equals?null==o?n+" is null":n+" = '"+o+"'":e instanceof r.predicate.LTeq?n+" <= "+o:e instanceof r.predicate.GTeq?n+" >= "+o:""}if(e instanceof i.CombinationPredicate){n=t.buildCqlFromPredicate(e.left),o=t.buildCqlFromPredicate(e.right);return e instanceof r.predicate.And?c.CqlBuilder.combine(c.CqlOperator.AND,n,o):e instanceof r.predicate.Or?c.CqlBuilder.combine(c.CqlOperator.OR,n,o):""}return""},t.convertPredicateValueToString=function(t){return t instanceof r.predicate.Literal?t.v:t instanceof r.predicate.Col?t.name:""},t.buildIdPredicate=function(t,e,n){switch(t){case h.StoreTypes.Binary:return this.buildBinaryIdPredicate(n);case h.StoreTypes.Arrow:return this.buildArrowIdPredicate(e,n)}},t.buildBinaryIdPredicate=function(t){var e=t.toArray();return function(t){return t<=e[1]&&t>=e[0]}},t.buildArrowIdPredicate=function(t,e){var n,i=e.get(1),s=e.get(0);return r.predicate.custom(function(e,r){a(n)&&(n=o(r.schema.fields,function(e){return e.name===t}));var l=r.getChildAt(n).getKey(e);return l>=s&&l<=i},function(){})},t.hashCode=function(t){var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return e},t}();e.StoreHelper=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(273),o=n(73),a=function(){return function(t,e,n){this.dictionaryBatches=t,this.recordBatches=e,this.schema=n}}();e.Footer=a;var s=function(){return function(t,e,n){this.metaDataLength=t,this.bodyLength=e,this.offset=n}}();e.FileBlock=s;var l=function(){function t(t,e,n){this.version=t,this.headerType=n,this.bodyLength="number"==typeof e?e:e.low}return t.isSchema=function(t){return t.headerType===o.MessageHeader.Schema},t.isRecordBatch=function(t){return t.headerType===o.MessageHeader.RecordBatch},t.isDictionaryBatch=function(t){return t.headerType===o.MessageHeader.DictionaryBatch},t}();e.Message=l;var c=function(t){function e(e,n,r,a){var s=t.call(this,e,a.reduce(function(t,e){return i.align(t+e.length+(e.offset-t),8)},0),o.MessageHeader.RecordBatch)||this;return s.nodes=r,s.buffers=a,s.length="number"==typeof n?n:n.low,s}return r.__extends(e,t),e}(l);e.RecordBatchMetadata=c;var u=function(t){function e(e,n,r,i){void 0===i&&(i=!1);var a=t.call(this,e,n.bodyLength,o.MessageHeader.DictionaryBatch)||this;return a.isDelta=i,a.data=n,a.id="number"==typeof r?r:r.low,a}return r.__extends(e,t),e.getId=function(){return e.atomicDictionaryId++},Object.defineProperty(e.prototype,"nodes",{get:function(){return this.data.nodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffers",{get:function(){return this.data.buffers},enumerable:!0,configurable:!0}),e.atomicDictionaryId=0,e}(l);e.DictionaryBatch=u;var d=function(){return function(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}();e.BufferMetadata=d;var f=function(){return function(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}();e.FieldMetadata=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(73),i=function(){function t(){}return t.prototype.visit=function(t){return t.acceptTypeVisitor&&t.acceptTypeVisitor(this)||null},t.prototype.visitMany=function(t){var e=this;return t.map(function(t){return e.visit(t)})},t.visitTypeInline=function(t,e){switch(e.TType){case r.Type.Null:return t.visitNull&&t.visitNull(e);case r.Type.Int:return t.visitInt&&t.visitInt(e);case r.Type.Float:return t.visitFloat&&t.visitFloat(e);case r.Type.Binary:return t.visitBinary&&t.visitBinary(e);case r.Type.Utf8:return t.visitUtf8&&t.visitUtf8(e);case r.Type.Bool:return t.visitBool&&t.visitBool(e);case r.Type.Decimal:return t.visitDecimal&&t.visitDecimal(e);case r.Type.Date:return t.visitDate&&t.visitDate(e);case r.Type.Time:return t.visitTime&&t.visitTime(e);case r.Type.Timestamp:return t.visitTimestamp&&t.visitTimestamp(e);case r.Type.Interval:return t.visitInterval&&t.visitInterval(e);case r.Type.List:return t.visitList&&t.visitList(e);case r.Type.Struct:return t.visitStruct&&t.visitStruct(e);case r.Type.Union:return t.visitUnion&&t.visitUnion(e);case r.Type.FixedSizeBinary:return t.visitFixedSizeBinary&&t.visitFixedSizeBinary(e);case r.Type.FixedSizeList:return t.visitFixedSizeList&&t.visitFixedSizeList(e);case r.Type.Map:return t.visitMap&&t.visitMap(e);case r.Type.Dictionary:return t.visitDictionary&&t.visitDictionary(e);default:return null}},t}();e.TypeVisitor=i;var o=function(){function t(){}return t.prototype.visit=function(t){return t.acceptVectorVisitor&&t.acceptVectorVisitor(this)||null},t.prototype.visitMany=function(t){var e=this;return t.map(function(t){return e.visit(t)})},t.visitTypeInline=function(t,e,n){switch(e.TType){case r.Type.Null:return t.visitNull&&t.visitNull(n);case r.Type.Int:return t.visitInt&&t.visitInt(n);case r.Type.Float:return t.visitFloat&&t.visitFloat(n);case r.Type.Binary:return t.visitBinary&&t.visitBinary(n);case r.Type.Utf8:return t.visitUtf8&&t.visitUtf8(n);case r.Type.Bool:return t.visitBool&&t.visitBool(n);case r.Type.Decimal:return t.visitDecimal&&t.visitDecimal(n);case r.Type.Date:return t.visitDate&&t.visitDate(n);case r.Type.Time:return t.visitTime&&t.visitTime(n);case r.Type.Timestamp:return t.visitTimestamp&&t.visitTimestamp(n);case r.Type.Interval:return t.visitInterval&&t.visitInterval(n);case r.Type.List:return t.visitList&&t.visitList(n);case r.Type.Struct:return t.visitStruct&&t.visitStruct(n);case r.Type.Union:return t.visitUnion&&t.visitUnion(n);case r.Type.FixedSizeBinary:return t.visitFixedSizeBinary&&t.visitFixedSizeBinary(n);case r.Type.FixedSizeList:return t.visitFixedSizeList&&t.visitFixedSizeList(n);case r.Type.Map:return t.visitMap&&t.visitMap(n);case r.Type.Dictionary:return t.visitDictionary&&t.visitDictionary(n);default:return null}},t}();e.VectorVisitor=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(168),o=function(){function t(){}return t.prototype.eq=function(e){return e instanceof t||(e=new a(e)),new p(this,e)},t.prototype.le=function(e){return e instanceof t||(e=new a(e)),new h(this,e)},t.prototype.ge=function(e){return e instanceof t||(e=new a(e)),new g(this,e)},t.prototype.lt=function(t){return new m(this.ge(t))},t.prototype.gt=function(t){return new m(this.le(t))},t.prototype.ne=function(t){return new m(this.eq(t))},t}();e.Value=o;var a=function(t){function e(e){var n=t.call(this)||this;return n.v=e,n}return r.__extends(e,t),e}(o);e.Literal=a;var s=function(t){function e(e){var n=t.call(this)||this;return n.name=e,n}return r.__extends(e,t),e.prototype.bind=function(t){if(!this.colidx){this.colidx=-1;for(var e=t.schema.fields,n=-1;++n<e.length;)if(e[n].name===this.name){this.colidx=n;break}if(this.colidx<0)throw new Error('Failed to bind Col "'+this.name+'"')}return this.vector=t.getChildAt(this.colidx),this.vector.get.bind(this.vector)},e}(o);e.Col=s;var l=function(){function t(){}return t.prototype.and=function(t){return new d(this,t)},t.prototype.or=function(t){return new f(this,t)},t.prototype.not=function(){return new m(this)},t.prototype.ands=function(){return[this]},t}();e.Predicate=l;var c=function(t){function e(e,n){var r=t.call(this)||this;return r.left=e,r.right=n,r}return r.__extends(e,t),e.prototype.bind=function(t){return this.left instanceof a?this.right instanceof a?this._bindLitLit(t,this.left,this.right):this._bindLitCol(t,this.left,this.right):this.right instanceof a?this._bindColLit(t,this.left,this.right):this._bindColCol(t,this.left,this.right)},e}(l);e.ComparisonPredicate=c;var u=function(t){function e(e,n){var r=t.call(this)||this;return r.left=e,r.right=n,r}return r.__extends(e,t),e}(l);e.CombinationPredicate=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.bind=function(t){var e=this.left.bind(t),n=this.right.bind(t);return function(t,r){return e(t,r)&&n(t,r)}},e.prototype.ands=function(){return this.left.ands().concat(this.right.ands())},e}(u);e.And=d;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.bind=function(t){var e=this.left.bind(t),n=this.right.bind(t);return function(t,r){return e(t,r)||n(t,r)}},e}(u);e.Or=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype._bindLitLit=function(t,e,n){var r=e.v==n.v;return function(){return r}},e.prototype._bindColCol=function(t,e,n){var r=e.bind(t),i=n.bind(t);return function(t,e){return r(t,e)==i(t,e)}},e.prototype._bindColLit=function(t,e,n){var r=e.bind(t);if(e.vector instanceof i.DictionaryVector){var o,a=e.vector;return a.dictionary!==this.lastDictionary?(o=a.reverseLookup(n.v),this.lastDictionary=a.dictionary,this.lastKey=o):o=this.lastKey,-1===o?function(){return!1}:function(t){return a.getKey(t)===o}}return function(t,e){return r(t,e)==n.v}},e.prototype._bindLitCol=function(t,e,n){return this._bindColLit(t,n,e)},e}(c);e.Equals=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype._bindLitLit=function(t,e,n){var r=e.v<=n.v;return function(){return r}},e.prototype._bindColCol=function(t,e,n){var r=e.bind(t),i=n.bind(t);return function(t,e){return r(t,e)<=i(t,e)}},e.prototype._bindColLit=function(t,e,n){var r=e.bind(t);return function(t,e){return r(t,e)<=n.v}},e.prototype._bindLitCol=function(t,e,n){var r=n.bind(t);return function(t,n){return e.v<=r(t,n)}},e}(c);e.LTeq=h;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype._bindLitLit=function(t,e,n){var r=e.v>=n.v;return function(){return r}},e.prototype._bindColCol=function(t,e,n){var r=e.bind(t),i=n.bind(t);return function(t,e){return r(t,e)>=i(t,e)}},e.prototype._bindColLit=function(t,e,n){var r=e.bind(t);return function(t,e){return r(t,e)>=n.v}},e.prototype._bindLitCol=function(t,e,n){var r=n.bind(t);return function(t,n){return e.v>=r(t,n)}},e}(c);e.GTeq=g;var m=function(t){function e(e){var n=t.call(this)||this;return n.child=e,n}return r.__extends(e,t),e.prototype.bind=function(t){var e=this.child.bind(t);return function(t,n){return!e(t,n)}},e}(l);e.Not=m;var v=function(t){function e(e,n){var r=t.call(this)||this;return r.next=e,r.bind_=n,r}return r.__extends(e,t),e.prototype.bind=function(t){return this.bind_(t),this.next},e}(l);e.CustomPredicate=v,e.lit=function(t){return new a(t)},e.col=function(t){return new s(t)},e.custom=function(t,e){return new v(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(73),o=n(168),a=n(330),s=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var s=this;if("number"!=typeof e[1]){var l=e[1];(s=t.call(this,l,e[2])||this).schema=e[0],s.length=l.length}else{for(var c=r.__read(e,3),u=c[0],d=c[1],f=c[2],p=new Array(f.length),h=-1,g=f.length;++h<g;){var m=f[h];p[h]=m instanceof o.Vector?m.data:m}(s=t.call(this,new a.NestedData(new i.Struct(u.fields),d,null,p))||this).schema=u,s.length=d}return s.numCols=s.schema.fields.length,s}return r.__extends(e,t),e.from=function(t){return new e(i.Schema.from(t),Math.max.apply(Math,r.__spread(t.map(function(t){return t.length}))),t)},e.prototype.clone=function(t,n){return void 0===n&&(n=this.view.clone(t)),new e(this.schema,t,n)},e.prototype.getChildAt=function(e){return e<0||e>=this.numCols?null:t.prototype.getChildAt.call(this,e)},e.prototype.select=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,o=this.schema.fields,a=t.reduce(function(t,e){return(t[e]=!0)&&t},Object.create(null));return new e((i=this.schema).select.apply(i,r.__spread(t)),this.length,this.childData.filter(function(t,e){return a[o[e].name]}))},e}(o.StructVector);e.RecordBatch=s},,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.SET_IS_TIMELAPSE_ON="SET_IS_TIMELAPSE_ON",t.SET_CANVAS_LAYER_DRAW_ORDER="TIMELAPSE_SET_CANVAS_LAYER_DRAW_ORDER",t.ADD_CANVAS_LAYER_STATE="TIMELAPSE_ADD_CANVAS_LAYER_STATE",t.REMOVE_CANVAS_LAYER_STATE="TIMELAPSE_REMOVE_CANVAS_LAYER_STATE",t.UPDATE_CANVAS_LAYER_STATE="TIMELAPSE_UPDATE_CANVAS_LAYER_STATE",t.UPDATE_CANVAS_LAYER_DISPLAY="TIMELAPSE_UPDATE_CANVAS_LAYER_DISPLAY",t.OTHER_ACTION="OTHER_ACTION"}(e.TypeKeys||(e.TypeKeys={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.ONE_COLOR=0]="ONE_COLOR",t[t.COLOR_BY_ID=1]="COLOR_BY_ID",t[t.OPACITY_RAMP=2]="OPACITY_RAMP"}(e.ColorModes||(e.ColorModes={})),e.getColorModeStyle=function(t){return[t.fillColorHexString,"linear-gradient(to right, red, orange 16%, yellow 32%, green 48%, blue 60%, indigo 76%, violet)","linear-gradient(to left, "+t.fillColorHexString+", rgba(0,0,0,0))"][t.colorMode]}},function(t,e,n){var r=n(796),i=n(51),o=n(310),a=i(function(t,e,n){return r(t,o(e)||0,n)});t.exports=a},function(t,e,n){var r=n(156);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(void 0===l?s==s&&!r(s):n(s,l)))var l=s,c=a}return c}},,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(43),i=n(624),o=n(407);t.exports=function(t,e){return o(t,i(r(e)))}},function(t,e,n){var r=n(1076),i=n(222),o=n(43);t.exports=function(t,e){return r(t,o(e,3),i)}},function(t,e,n){var r=n(1084);t.exports=function(t,e){var n=-1,i=t.length,o=i-1;for(e=void 0===e?i:e;++n<e;){var a=r(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(39),o=n(348),a=n(2992),s=n(2993),l=n(2994),c=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.typeName="OSM",o.titleWidget=new i.WidgetDef({tag:"stealth-search-osm-title",scope:n.scope}),o.contentWidget=new i.WidgetDef({tag:"stealth-search-osm-content",scope:n.scope}),o.collapsedWidget=new i.WidgetDef({tag:"stealth-search-osm-collapsed",scope:n.scope}),o}return r(e,t),e}(o.ResultTypeWidgetCfg);e.OSMResultTypeWidgetCfg=c,e.titleDirective=function(){return{restrict:"EA",template:a}},e.collapsedDirective=function(){return{restrict:"EA",template:s}},e.contentDirective=function(){return{restrict:"EA",template:l}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(39),o=n(348),a=n(2995),s=n(2996),l=n(2997),c=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.titleWidget=new i.WidgetDef({tag:"stealth-search-twitter-title",scope:n.scope}),o.contentWidget=new i.WidgetDef({tag:"stealth-search-twitter-content",scope:n.scope}),o.collapsedWidget=new i.WidgetDef({tag:"stealth-search-twitter-collapsed",scope:n.scope}),o}return r(e,t),e}(o.ResultTypeWidgetCfg);e.TwitterResultTypeWidgetCfg=c,e.titleDirective=function(){return{restrict:"EA",template:a}},e.collapsedDirective=function(){return{restrict:"EA",template:s}},e.contentDirective=function(){return{restrict:"EA",template:l}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3012),i=n(3013),o=function(){return function(){var t=this;this.isAllSelected=!1,this.isAnySelected=!1,this.select=function(e,n){e.selected=n,n?t.isAnySelected=!0:t.isAllSelected=!1},this.selectAll=function(e,n){var r=t;e.read().then(function(t){t.forEach(function(t){t.selected=n}),r.isAllSelected=n,r.isAnySelected=n})}}}();e.SelectionManager=o,e.resultSelectionDirective=function(){return{restrict:"AE",scope:{ss:"=",record:"="},template:r}},e.selectionSelectAllDirective=function(){return{restrict:"AE",scope:{ss:"=",ds:"="},template:i}}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1095),i=function(){return function(t,e){this.id=t,this.distance=e}}(),o=function(){return function(t){this.id=t,this.neighbours=[]}}(),a=function(){return function(t,e,n){this.node=t,this.prev=e,this.d=n}}(),s=function(){function t(t,e,n,r,a){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new o(s);for(s=this.es.length;s--;){var l=this.es[s],c=n(l),u=r(l),d=a(l);this.neighbours[c].neighbours.push(new i(u,d)),this.neighbours[u].neighbours.push(new i(c,d))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue(function(t,e){return t.d<=e.d}),o=this.neighbours[t],s=new a(o,null,0),l={};for(i.push(s);!i.empty()&&(o=(s=i.pop()).node).id!==e;)for(var c=o.neighbours.length;c--;){var u=o.neighbours[c],d=this.neighbours[u.id];if(!s.prev||d.id!==s.prev.node.id){var f=d.id+","+o.id;if(!(f in l&&l[f]<=s.d)){var p=s.prev?n(s.prev.node.id,o.id,d.id):0,h=s.d+u.distance+p;l[f]=h,i.push(new a(d,s,h))}}}for(var g=[];s.prev;)s=s.prev,g.push(s.node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue(function(t,e){return t.d<=e.d}),i=this.neighbours.length,o=new Array(i);i--;){var a=this.neighbours[i];a.d=i===t?0:Number.POSITIVE_INFINITY,a.q=n.push(a)}for(;!n.empty();){var s=n.pop();if(o[s.id]=s.d,s.id===e){for(var l=[],c=s;void 0!==c.prev;)l.push(c.prev.id),c=c.prev;return l}for(i=s.neighbours.length;i--;){var u=s.neighbours[i],d=(c=this.neighbours[u.id],s.d+u.distance);s.d!==Number.MAX_VALUE&&c.d>d&&(c.d=d,c.prev=s,n.reduceKey(c.q,c,function(t,e){return t.q=e}))}}return o},t}();e.Calculator=s},function(t,e,n){"use strict";var r=n(48);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var a=r.minBy(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));a!==Number.POSITIVE_INFINITY&&void 0!==a&&null!==a||(a=0);return o.rank=a})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},,,,,,,,,,,,,,,,,function(t,e,n){var r=n(477),i=n(3419),o=n(3420),a=n(3421),s=n(3422),l=n(3423);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},function(t,e,n){var r=n(3414),i=n(3415),o=n(3416),a=n(3417),s=n(3418);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(361);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(244)(Object,"create");t.exports=r},function(t,e,n){var r=n(3438);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(3451),i=n(179),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e,n){(function(t){var r=n(141),i=n(3452),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;t.exports=l}).call(this,n(120)(t))},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(297),i=n(298);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(206),i=n(179),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==o}},function(t,e,n){var r=n(3477),i=n(3479)(r);t.exports=i},function(t,e,n){t.exports=n(674)},function(t,e,n){var r=n(1186);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(1174),i=n(3520),o=n(207);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t,e){var n=i?i+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,s=new Array(a);o<a;o++)s[o]=r[o].fn;return s},s.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,o),!0;case 6:return u.fn.call(u.context,e,n,r,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;case 4:u[c].fn.call(u[c].context,e,n,r);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(t,e,n){var r=new a(e,n||this),o=i?i+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.once=function(t,e,n){var r=new a(e,n||this,!0),o=i?i+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new o:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||r&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new o:delete this._events[a]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new o:delete this._events[e])):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=i,s.EventEmitter=s,t.exports=s},,,,function(t,e,n){var r=n(571),i=n(166),o=n(51),a=n(264),s=o(function(t,e){return a(t)?r(t,i(e,1,a,!0)):[]});t.exports=s},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(78))},function(t,e,n){"use strict";e.a=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){"use strict";(function(t){var r=n(31),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.a.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(394)(t))},function(t,e,n){"use strict";var r=n(1245)();t.exports=function(t){return t!==r&&null!==t}},,function(t,e,n){var r=n(1272),i=n(370),o=n(1273);t.exports=function(t){return i(t)?o(t):r(t)}},function(t,e,n){var r=n(17),i=n(156),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(1283),i=n(1299),o=n(1301),a=n(1302),s=n(1303);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(212)(n(79),"Map");t.exports=r},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e,n){var r=n(79),i=n(102),o=/^\s+/,a=r.parseInt;t.exports=function(t,e,n){return n||null==e?e=0:e&&(e=+e),a(i(t).replace(o,""),e||0)}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){var r=n(1319),i=n(80);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(307),i=n(709),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i;t.exports=s},function(t,e,n){var r=n(1332),i=n(698);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e,n){var r=n(103);t.exports=function(t,e){return r(e,function(e){return t[e]})}},,function(t,e,n){var r=n(1351);t.exports=function t(e){var i=r.create(e);return i.create=t,i.import(n(1357)),i}()},function(t,e){t.exports=function(t){return t&&t.constructor.prototype.isBigNumber||!1}},function(t,e,n){"use strict";var r=n(142).string.isString;e.name="Matrix",e.path="type",e.factory=function(t,e,n,i){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator")}return o.prototype.type="Matrix",o.prototype.isMatrix=!0,o.storage=function(t){if(!r(t))throw new TypeError("format must be a string value");var e=o._storage[t];if(!e)throw new SyntaxError("Unsupported matrix storage format: "+t);return e},o._storage={},o.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},o.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},o.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},o.prototype.subset=function(t,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},o.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},o.prototype.set=function(t,e,n){throw new Error("Cannot invoke set on a Matrix interface")},o.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},o.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},o.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},o.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},o.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},o.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},o.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},o.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},o.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},o.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},o}},function(t,e,n){"use strict";var r=n(65);e.name="algorithm04",e.factory=function(t,e,i,o){var a=i(n(61)),s=t.SparseMatrix;return function(t,e,n){var i=t._values,l=t._index,c=t._ptr,u=t._size,d=t._datatype,f=e._values,p=e._index,h=e._ptr,g=e._size,m=e._datatype;if(u.length!==g.length)throw new r(u.length,g.length);if(u[0]!==g[0]||u[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+g+")");var v,y=u[0],b=u[1],w=a,_=0,x=n;"string"==typeof d&&d===m&&(v=d,w=o.find(a,[v,v]),_=o.convert(0,v),x=o.find(n,[v,v]));var S,C,E,T,M,k=i&&f?[]:void 0,A=[],I=[],O=new s({values:k,index:A,ptr:I,size:[y,b],datatype:v}),P=i&&f?[]:void 0,L=i&&f?[]:void 0,D=[],N=[];for(C=0;C<b;C++){I[C]=A.length;var R=C+1;for(T=c[C],M=c[C+1],E=T;E<M;E++)S=l[E],A.push(S),D[S]=R,P&&(P[S]=i[E]);for(T=h[C],M=h[C+1],E=T;E<M;E++)if(D[S=p[E]]===R){if(P){var F=x(P[S],f[E]);w(F,_)?D[S]=null:P[S]=F}}else A.push(S),N[S]=R,L&&(L[S]=f[E]);if(P&&L)for(E=I[C];E<A.length;)D[S=A[E]]===R?(k[E]=P[S],E++):N[S]===R?(k[E]=L[S],E++):A.splice(E,1)}return I[b]=A.length,O}}},function(t,e,n){"use strict";var r=n(9);e.name="number",e.factory=function(t,e,n,i){var o=i("number",{"":function(){return 0},number:function(t){return t},string:function(t){var e=Number(t);if(isNaN(e))throw new SyntaxError('String "'+t+'" is no valid number');return e},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);n(13);e.name="isNumeric",e.factory=function(t,e,n,i){var o=i("isNumeric",{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string":function(){return!1},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(383);e.name="typeof",e.factory=function(t,e,n,i){var o=i("_typeof",{any:function(e){var n=r.type(e);if("Object"===n){if(t.isBigNumber(e))return"BigNumber";if(t.isComplex(e))return"Complex";if(t.isFraction(e))return"Fraction";if(t.isMatrix(e))return"Matrix";if(t.isUnit(e))return"Unit";if(t.isIndex(e))return"Index";if(t.isRange(e))return"Range";if(t.isChain(e))return"Chain";if(t.isHelp(e))return"Help"}return n}});return o.toTex=void 0,o}},function(t,e,n){"use strict";t.exports={end:!0}},function(t,e,n){"use strict";var r=n(11).map,i=n(11).join,o=n(45).escape;e.name="IndexNode",e.path="expression.node",e.factory=function(t,e,a,s){var l=a(n(37)).register,c=a(n(37)).compile,u=a(n(83)),d=(a(n(523)),a(n(186)),a(n(725))),f=Array.isArray;function p(e,n){if(!(this instanceof p))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=e,this.dotNotation=n||!1,!f(e)||!e.every(t.isNode))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties");var r=function(){throw new Error("Property `IndexNode.object` is deprecated, use `IndexNode.fn` instead")};Object.defineProperty(this,"object",{get:r,set:r})}return p.prototype=new u,p.prototype.type="IndexNode",p.prototype.isIndexNode=!0,l(p.prototype.type,function(e,n,o){if(!(e instanceof p))throw new TypeError("No valid IndexNode");var a=Object.create(o);n.range=function(e,n,r){return new d(t.isBigNumber(e)?e.toNumber():e,t.isBigNumber(n)?n.toNumber():n,t.isBigNumber(r)?r.toNumber():r)};var s=r(e.dimensions,function(e,r){return t.isRangeNode(e)?e.needsEnd()?(a.end="end","(function () {var end = size["+r+"]; return range("+c(e.start,n,a)+", "+c(e.end,n,a)+", "+(e.step?c(e.step,n,a):"1")+"); })()"):"range("+c(e.start,n,a)+", "+c(e.end,n,a)+", "+(e.step?c(e.step,n,a):"1")+")":t.isSymbolNode(e)&&"end"===e.name?(a.end="end","(function () {var end = size["+r+"]; return "+c(e,n,a)+"; })()"):c(e,n,a)});return"math.index("+i(s,", ")+")"}),p.prototype.forEach=function(t){for(var e=0;e<this.dimensions.length;e++)t(this.dimensions[e],"dimensions["+e+"]",this)},p.prototype.map=function(t){for(var e=[],n=0;n<this.dimensions.length;n++)e[n]=this._ifNode(t(this.dimensions[n],"dimensions["+n+"]",this));return new p(e)},p.prototype.clone=function(){return new p(this.dimensions.slice(0))},p.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&t.isConstantNode(this.dimensions[0])&&"string"===this.dimensions[0].valueType},p.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},p.prototype._toString=function(t){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},p.prototype.toHTML=function(t){for(var e=[],n=0;n<this.dimensions.length;n++)e[n]=this.dimensions[n].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+o(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},p.prototype._toTex=function(t){var e=this.dimensions.map(function(e){return e.toTex(t)});return this.dotNotation?"."+this.getObjectProperty():"_{"+e.join(",")+"}"},p.prototype.needsSize=function(){return this.dimensions.some(function(e){return t.isRangeNode(e)&&e.needsEnd()||t.isSymbolNode(e)&&"end"===e.name})},p}},function(t,e,n){"use strict";var r=n(312);e.name="RangeNode",e.path="expression.node",e.factory=function(t,e,i,o){var a=i(n(37)).register,s=i(n(37)).compile,l=i(n(83));function c(e,n,r){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(!t.isNode(e))throw new TypeError("Node expected");if(!t.isNode(n))throw new TypeError("Node expected");if(r&&!t.isNode(r))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=n,this.step=r||null}function u(t,e){var n=r.getPrecedence(t,e),i={},o=r.getPrecedence(t.start,e);if(i.start=null!==o&&o<=n||"all"===e,t.step){var a=r.getPrecedence(t.step,e);i.step=null!==a&&a<=n||"all"===e}var s=r.getPrecedence(t.end,e);return i.end=null!==s&&s<=n||"all"===e,i}return c.prototype=new l,c.prototype.type="RangeNode",c.prototype.isRangeNode=!0,c.prototype.needsEnd=function(){return this.filter(function(e){return t.isSymbolNode(e)&&"end"===e.name}).length>0},a(c.prototype.type,function(t,e,n){if(!(t instanceof c))throw new TypeError("No valid RangeNode");return"math.range("+s(t.start,e,n)+", "+s(t.end,e,n)+(t.step?", "+s(t.step,e,n):"")+")"}),c.prototype.forEach=function(t){t(this.start,"start",this),t(this.end,"end",this),this.step&&t(this.step,"step",this)},c.prototype.map=function(t){return new c(this._ifNode(t(this.start,"start",this)),this._ifNode(t(this.end,"end",this)),this.step&&this._ifNode(t(this.step,"step",this)))},c.prototype.clone=function(){return new c(this.start,this.end,this.step&&this.step)},c.prototype._toString=function(t){var e,n=u(this,t&&t.parenthesis?t.parenthesis:"keep"),r=this.start.toString(t);if(n.start&&(r="("+r+")"),e=r,this.step){var i=this.step.toString(t);n.step&&(i="("+i+")"),e+=":"+i}var o=this.end.toString(t);return n.end&&(o="("+o+")"),e+=":"+o},c.prototype.toHTML=function(t){var e,n=u(this,t&&t.parenthesis?t.parenthesis:"keep"),r=this.start.toHTML(t);if(n.start&&(r='<span class="math-parenthesis math-round-parenthesis">(</span>'+r+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e=r,this.step){var i=this.step.toHTML(t);n.step&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+='<span class="math-operator math-range-operator">:</span>'+i}var o=this.end.toHTML(t);return n.end&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+='<span class="math-operator math-range-operator">:</span>'+o},c.prototype._toTex=function(t){var e=u(this,t&&t.parenthesis?t.parenthesis:"keep"),n=this.start.toTex(t);if(e.start&&(n="\\left("+n+"\\right)"),this.step){var r=this.step.toTex(t);e.step&&(r="\\left("+r+"\\right)"),n+=":"+r}var i=this.end.toTex(t);return e.end&&(i="\\left("+i+"\\right)"),n+=":"+i},c}},function(t,e,n){"use strict";var r=n(11).map,i=n(11).join;e.name="ArrayNode",e.path="expression.node",e.factory=function(t,e,o,a){var s=o(n(37)).register,l=o(n(37)).compile,c=o(n(83));function u(e){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=e||[],!Array.isArray(this.items)||!this.items.every(t.isNode))throw new TypeError("Array containing Nodes expected");var n=function(){throw new Error("Property `ArrayNode.nodes` is deprecated, use `ArrayNode.items` instead")};Object.defineProperty(this,"nodes",{get:n,set:n})}return u.prototype=new c,u.prototype.type="ArrayNode",u.prototype.isArrayNode=!0,s(u.prototype.type,function(t,e,n){if(!(t instanceof u))throw new TypeError("No valid ArrayNode");var o="Array"!==e.math.config().matrix,a=r(t.items,function(t){return l(t,e,n)});return(o?"math.matrix([":"[")+i(a,",")+(o?"])":"]")}),u.prototype.forEach=function(t){for(var e=0;e<this.items.length;e++)t(this.items[e],"items["+e+"]",this)},u.prototype.map=function(t){for(var e=[],n=0;n<this.items.length;n++)e[n]=this._ifNode(t(this.items[n],"items["+n+"]",this));return new u(e)},u.prototype.clone=function(){return new u(this.items.slice(0))},u.prototype._toString=function(t){return"["+this.items.map(function(e){return e.toString(t)}).join(", ")+"]"},u.prototype.toHTML=function(t){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map(function(e){return e.toHTML(t)}).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},u.prototype._toTex=function(t){var e="\\begin{bmatrix}";return this.items.forEach(function(n){n.items?e+=n.items.map(function(e){return e.toTex(t)}).join("&"):e+=n.toTex(t),e+="\\\\"}),e+="\\end{bmatrix}"},u}},function(t,e){e.factory=function(t,e,n,r){return function(e,n,r){var i=e.filter(function(e){return t.isSymbolNode(e)&&!(e.name in n)&&!(e.name in r)})[0];if(!i)throw new Error('No undefined variable found in inline expression "'+e+'"');var o=i.name,a=Object.create(r),s=e.compile();return function(t){return a[o]=t,s.eval(a)}}}},function(t,e,n){"use strict";e.math=!0,e.name="simplify",e.factory=function(t,e,r,i,o){var a=r(n(219)),s=r(n(254)),l=r(n(314)),c=r(n(313)),u=r(n(386)),d=r(n(186)),f=(r(n(83)),r(n(751))),p=r(n(753)),h=r(n(1607)),g=r(n(752)),m=g.isCommutative,v=g.isAssociative,y=g.flatten,b=g.unflattenr,w=g.unflattenl,_=g.createMakeNodeFunction,x=i("simplify",{string:function(t){return x(a(t),x.rules,{})},"string, Object":function(t,e){return x(a(t),x.rules,e)},"string, Array":function(t,e){return x(a(t),e,{})},"string, Array, Object":function(t,e,n){return x(a(t),e,n)},"Node, Object":function(t,e){return x(t,x.rules,e)},Node:function(t){return x(t,x.rules,{})},"Node, Array":function(t,e){return x(t,e,{})},"Node, Array, Object":function(t,e,n){e=function(t){for(var e=[],n=0;n<t.length;n++){var r,i=t[n],o=typeof i;switch(o){case"string":var s=i.split("->");if(2!==s.length)throw SyntaxError("Could not parse rule: "+i);i={l:s[0],r:s[1]};case"object":if(r={l:S(a(i.l)),r:S(a(i.r))},i.context&&(r.evaluate=i.context),i.evaluate&&(r.evaluate=a(i.evaluate)),v(r.l)){var l=_(r.l),c=new d("_p"+E++);r.expanded={},r.expanded.l=l([r.l.clone(),c]),y(r.expanded.l),b(r.expanded.l),r.expanded.r=l([r.r,c])}break;case"function":r=i;break;default:throw TypeError("Unsupported type of rule: "+o)}e.push(r)}return e}(e);for(var r,i={},o=(r=S(r=h(t,n))).toString({parenthesis:"all"});!i[o];){i[o]=!0,E=0;for(var s=0;s<e.length;s++)"function"==typeof e[s]?r=e[s](r):(y(r),r=T(r,e[s])),w(r);o=r.toString({parenthesis:"all"})}return r}});function S(e){return e.transform(function(e,n,r){return t.isParenthesisNode(e)?e.content:e})}x.simplifyCore=p,x.resolve=h;var C={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};x.rules=[p,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},f,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"}];var E=0,T=i("applyRule",{"Node, Object":function(t,e){var n=t;if(n instanceof c||n instanceof l){if(n.args)for(var r=0;r<n.args.length;r++)n.args[r]=T(n.args[r],e)}else n instanceof u&&n.content&&(n.content=T(n.content,e));var i=e.r,o=A(e.l,n)[0];if(!o&&e.expanded&&(i=e.expanded.r,o=A(e.expanded.l,n)[0]),o){n=i.clone();var a=function(t){return t.isSymbolNode&&o.placeholders.hasOwnProperty(t.name)?o.placeholders[t.name].clone():t.map(a)};n=a(n)}return n}});function M(t,e){var n={placeholders:{}};if(!t.placeholders&&!e.placeholders)return n;if(!t.placeholders)return e;if(!e.placeholders)return t;for(var r in t.placeholders)if(n.placeholders[r]=t.placeholders[r],e.placeholders.hasOwnProperty(r)&&!I(t.placeholders[r],e.placeholders[r]))return null;for(var r in e.placeholders)n.placeholders[r]=e.placeholders[r];return n}function k(t,e){var n,r=[];if(0===t.length||0===e.length)return r;for(var i=0;i<t.length;i++)for(var o=0;o<e.length;o++)(n=M(t[i],e[o]))&&r.push(n);return r}function A(e,n,r){var i=[{placeholders:{}}];if(e instanceof c&&n instanceof c||e instanceof l&&n instanceof l){if(e instanceof c){if(e.op!==n.op||e.fn!==n.fn)return[]}else if(e instanceof l&&e.name!==n.name)return[];if((1!==n.args.length||1!==e.args.length)&&v(n)&&!r){if(n.args.length>=2&&2===e.args.length){var a=function(t,e){var n,r,i=[],o=_(t);if(m(t,e))for(var a=0;a<t.args.length;a++)(r=t.args.slice(0)).splice(a,1),n=1===r.length?r[0]:o(r),i.push(o([t.args[a],n]));else n=1===(r=t.args.slice(1)).length?r[0]:o(r),i.push(o([t.args[0],n]));return i}(n,e.context),u=[];for(h=0;h<a.length;h++){var f=A(e,a[h],!0);u=u.concat(f)}return u}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var p=[],h=0;h<e.args.length;h++){var g=A(e.args[h],n.args[h]);if(0===g.length)return[];p.push(g)}i=function(t){if(0===t.length)return t;for(var e=t.reduce(k),n=[],r={},i=0;i<e.length;i++){var o=JSON.stringify(e[i]);r[o]||(r[o]=!0,n.push(e[i]))}return n}(p)}else if(e instanceof d){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(o.hasOwnProperty(e.name)){if(!C[e.name])throw new Error("Built in constant: "+e.name+" is not supported by simplify.");if(e.name!==n.name)return[]}else if("n"===e.name[0]||"_p"===e.name.substring(0,2))i[0].placeholders[e.name]=n;else if("v"===e.name[0]){if(t.isConstantNode(n))return[];i[0].placeholders[e.name]=n}else{if("c"!==e.name[0])throw new Error("Invalid symbol in rule: "+e.name);if(!(n instanceof s))return[];i[0].placeholders[e.name]=n}}else{if(!(e instanceof s))return[];if(e.value!==n.value)return[]}return i}function I(t,e){if(t instanceof s&&e instanceof s){if(t.value!==e.value)return!1}else if(t instanceof d&&e instanceof d){if(t.name!==e.name)return!1}else{if(!(t instanceof c&&e instanceof c||t instanceof l&&e instanceof l))return!1;if(t instanceof c){if(t.op!==e.op||t.fn!==e.fn)return!1}else if(t instanceof l&&t.name!==e.name)return!1;if(t.args.length!==e.args.length)return!1;for(var n=0;n<t.args.length;n++)if(!I(t.args[n],e.args[n]))return!1}return!0}return x}},function(t,e,n){"use strict";var r=n(9);n(13);e.name="isZero",e.factory=function(t,e,n,i){var o=i("isZero",{number:function(t){return 0===t},BigNumber:function(t){return t.isZero()},Complex:function(t){return 0===t.re&&0===t.im},Fraction:function(t){return 1===t.d&&0===t.n},Unit:function(t){return o(t.value)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";e.name="cs_flip",e.path="sparse",e.factory=function(){return function(t){return-t-2}}},function(t,e,n){"use strict";var r=n(142),i=r.string,o=r.array,a=Array.isArray;e.factory=function(t){var e=t.DenseMatrix;return function(n,r,s){var l=n.size();if(2!==l.length)throw new RangeError("Matrix must be two dimensional (size: "+i.format(l)+")");var c,u,d,f=l[0];if(f!==l[1])throw new RangeError("Matrix must be square (size: "+i.format(l)+")");if(t.isMatrix(r)){var p=r.size();if(1===p.length){if(p[0]!==f)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(c=[],d=r._data,u=0;u<f;u++)c[u]=[d[u]];return new e({data:c,size:[f,1],datatype:r._datatype})}if(2===p.length){if(p[0]!==f||1!==p[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(t.isDenseMatrix(r)){if(s){for(c=[],d=r._data,u=0;u<f;u++)c[u]=[d[u][0]];return new e({data:c,size:[f,1],datatype:r._datatype})}return r}for(c=[],u=0;u<f;u++)c[u]=[0];for(var h=r._values,g=r._index,m=r._ptr,v=m[1],y=m[0];y<v;y++)c[u=g[y]][0]=h[y];return new e({data:c,size:[f,1],datatype:r._datatype})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}if(a(r)){var b=o.size(r);if(1===b.length){if(b[0]!==f)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(c=[],u=0;u<f;u++)c[u]=[r[u]];return new e({data:c,size:[f,1]})}if(2===b.length){if(b[0]!==f||1!==b[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(c=[],u=0;u<f;u++)c[u]=[r[u][0]];return new e({data:c,size:[f,1]})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}}}},function(t,e,n){var r=n(531);function i(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",o=7-i.length;o--;)i="0"+i;n+=i}for(d=n.length-1;"0"==n.charAt(d);--d);var a=t.e,s=n.slice(0,d+1||1),l=s.length;if(a>0)if(++a>l)for(a-=l;a--;s+="0");else a<l&&(s=s.slice(0,a)+"."+s.slice(a));var c=[0];for(r=0;r<s.length;){for(var u=c.length;u--;c[u]*=10);c[0]+=s.charAt(r++)<<0;for(var d=0;d<c.length;++d)c[d]>1&&(null==c[d+1]&&(c[d+1]=0),c[d+1]+=c[d]>>1,c[d]&=1)}return c.reverse()}t.exports=function(t,e,n){var o,a,s,l,c,u=t.constructor,d=+(t.s<0),f=+(e.s<0);if(d){o=i(r(t));for(var p=0;p<o.length;++p)o[p]^=1}else o=i(t);if(f){a=i(r(e));for(p=0;p<a.length;++p)a[p]^=1}else a=i(e);o.length<=a.length?(s=o,l=a,c=d):(s=a,l=o,c=f);var h=s.length,g=l.length,m=1^n(d,f),v=new u(1^m),y=new u(1),b=new u(2),w=u.precision;for(u.config({precision:1e9});h>0;)n(s[--h],l[--g])==m&&(v=v.plus(y)),y=y.times(b);for(;g>0;)n(c,l[--g])==m&&(v=v.plus(y)),y=y.times(b);return u.config({precision:w}),0==m&&(v.s=-v.s),v}},function(t,e){t.exports=function(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;return e.config({precision:1e9}),(t=t.plus(new e(1))).s=-t.s||null,e.config({precision:n}),t}},function(t,e,n){"use strict";var r=n(65);e.name="algorithm08",e.factory=function(t,e,i,o){var a=i(n(61)),s=t.SparseMatrix;return function(t,e,n){var i=t._values,l=t._index,c=t._ptr,u=t._size,d=t._datatype,f=e._values,p=e._index,h=e._ptr,g=e._size,m=e._datatype;if(u.length!==g.length)throw new r(u.length,g.length);if(u[0]!==g[0]||u[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+g+")");if(!i||!f)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var v,y=u[0],b=u[1],w=a,_=0,x=n;"string"==typeof d&&d===m&&(v=d,w=o.find(a,[v,v]),_=o.convert(0,v),x=o.find(n,[v,v]));for(var S,C,E,T,M=[],k=[],A=[],I=new s({values:M,index:k,ptr:A,size:[y,b],datatype:v}),O=[],P=[],L=0;L<b;L++){A[L]=k.length;var D=L+1;for(C=c[L],E=c[L+1],S=C;S<E;S++)P[T=l[S]]=D,O[T]=i[S],k.push(T);for(C=h[L],E=h[L+1],S=C;S<E;S++)P[T=p[S]]===D&&(O[T]=x(O[T],f[S]));for(S=A[L];S<k.length;){var N=O[T=k[S]];w(N,_)?k.splice(S,1):(M.push(N),S++)}}return A[b]=k.length,I}}},function(t,e,n){"use strict";var r=n(13).isInteger;e.name="partitionSelect",e.factory=function(t,e,i,o){var a=i(n(259));function s(t,e){return-a(t,e)}return o("partitionSelect",{"Array | Matrix, number":function(t,e){return l(t,e,a)},"Array | Matrix, number, string":function(t,e,n){if("asc"===n)return l(t,e,a);if("desc"===n)return l(t,e,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":l});function l(e,n,i){if(!r(n)||n<0)throw new Error("k must be a non-negative integer");if(t.isMatrix(e)){if(e.size().length>1)throw new Error("Only one dimensional matrices supported");return c(e.valueOf(),n,i)}if(Array.isArray(e))return c(e,n,i)}function c(t,e,n){if(e>=t.length)throw new Error("k out of bounds");for(var r=0,i=t.length-1;r<i;){for(var o=r,a=i,s=t[Math.floor(Math.random()*(i-r+1))+r];o<a;)if(n(t[o],s)>=0){var l=t[a];t[a]=t[o],t[o]=l,--a}else++o;n(t[o],s)>0&&--o,e<=o?i=o:r=o+1}return t[e]}}},function(t,e,n){"use strict";var r=n(251),i=n(255),o=n(13).isNumber;e.name="distribution",e.factory=function(t,e,a,s,l){var c=a(n(7)),u=n(11),d=a(n(1689));function f(e){if(!p.hasOwnProperty(e))throw new Error("Unknown distribution "+e);var n=Array.prototype.slice.call(arguments,1);return function(e){var n={random:function(e,n,a){var s,u,d;if(arguments.length>3)throw new r("random",arguments.length,0,3);if(1===arguments.length?i(e)?s=e:d=e:2===arguments.length?i(e)?(s=e,d=n):(u=e,d=n):(s=e,u=n,d=a),void 0!==u&&!o(u)||void 0!==d&&!o(d))throw new TypeError("Invalid argument in function random");if(void 0===d&&(d=1),void 0===u&&(u=0),void 0!==s){var f=p(s.valueOf(),u,d,l);return t.isMatrix(s)?c(f):f}return l(u,d)},randomInt:s({"number | Array":function(e){if(i(e)){var n=e,r=1,o=p(n.valueOf(),0,r,f);return t.isMatrix(n)?c(o):o}return f(0,r=e)},"number | Array, number":function(e,n){if(i(e)){var r=e,o=n,a=0,s=p(r.valueOf(),a,o,f);return t.isMatrix(r)?c(s):s}return f(a=e,o=n)},"Array, number, number":function(t,e,n){var r=p(t.valueOf(),e,n,f);return t&&!0===t.isMatrix?c(r):r}}),pickRandom:s({Array:function(t){return a(t)},"Array, number | Array":function(t,e){var n,r;if(Array.isArray(e))r=e;else{if(!o(e))throw new TypeError("Invalid argument in function pickRandom");n=e}return a(t,n,r)},"Array, number | Array, Array | number":function(t,e,n){var r,i;if(Array.isArray(e)?(i=e,r=n):(i=n,r=e),!Array.isArray(i)||!o(r))throw new TypeError("Invalid argument in function pickRandom");return a(t,r,i)}})},a=function(e,n,r){var i=void 0===n;if(i&&(n=1),t.isMatrix(e))e=e.valueOf();else if(!Array.isArray(e))throw new TypeError("Unsupported type of value in function pickRandom");if(u.size(e).length>1)throw new Error("Only one dimensional vectors supported");if(void 0!==r){if(r.length!=e.length)throw new Error("Weights must have the same length as possibles");for(var a=0,s=0,l=r.length;s<l;s++){if(!o(r[s])||r[s]<0)throw new Error("Weights must be an array of positive numbers");a+=r[s]}}var c=e.length;if(0==c)return[];if(n>=c)return n>1?e:e[0];for(var f,p=[];p.length<n;){if(void 0===r)f=e[Math.floor(d()*c)];else{var h=d()*a;for(s=0,l=e.length;s<l;s++)if((h-=r[s])<0){f=e[s];break}}-1==p.indexOf(f)&&p.push(f)}return i?p[0]:p},l=function(t,n){return t+e()*(n-t)},f=function(t,n){return Math.floor(t+e()*(n-t))},p=function(t,e,n,r){var i=[];if((t=t.slice(0)).length>1)for(var o=0,a=t.shift();o<a;o++)i.push(p(t,e,n,r));else for(o=0,a=t.shift();o<a;o++)i.push(r(e,n));return i};return n}(p[e].apply(this,n))}var p={uniform:function(){return d},normal:function(){return function(){for(var t,e,n=-1;n<0||n>1;)t=d(),e=d(),n=1/6*Math.pow(-2*Math.log(t),.5)*Math.cos(2*Math.PI*e)+.5;return n}}};return f.toTex=void 0,f}},function(t,e,n){var r=n(1762),i=n(370),o=n(1763);t.exports=function(t){return i(t)?o(t):r(t)}},function(t,e,n){var r=n(787)();t.exports=r},function(t,e,n){var r=n(1780),i=n(793)(r);t.exports=i},function(t,e,n){var r=n(222),i=n(162);t.exports=function(t,e){return t&&r(t,i(e))}},function(t,e,n){var r=n(148),i=n(44);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(708),i=n(798),o=n(108);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(705);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(262),i=n(543),o=4294967295;function a(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}a.prototype=r(i.prototype),a.prototype.constructor=a,t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(802),i=n(190),o=r?function(t){return r.get(t)}:i;t.exports=o},function(t,e,n){var r=n(262),i=n(543);function o(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,t.exports=o},function(t,e,n){var r=n(375),i=n(811),o=n(536),a=n(1846),s=n(71),l=n(108),c=n(812);t.exports=function t(e,n,u,d,f){e!==n&&o(n,function(o,l){if(s(o))f||(f=new r),a(e,n,l,u,t,d,f);else{var p=d?d(c(e,l),o,l+"",e,n,f):void 0;void 0===p&&(p=o),i(e,l,p)}},l)}},function(t,e,n){var r=n(128),i=n(399),o=n(80),a="[object Object]",s=Function.prototype,l=Object.prototype,c=s.toString,u=l.hasOwnProperty,d=c.call(Object);t.exports=function(t){if(!o(t)||r(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}},function(t,e,n){"use strict";(function(e){var r=n(123),i=n(1853),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(814):void 0!==e&&(t=n(814)),t}(),transformRequest:[function(t,e){return i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){s.headers[t]={}}),r.forEach(["post","put","patch"],function(t){s.headers[t]=r.merge(o)}),t.exports=s}).call(this,n(402))},,function(t,e,n){var r,i;n(506),r=[n(62)],void 0===(i=function(t){return function(){var e,n,r,i=0,o={error:"error",info:"info",success:"success",warning:"warning"},a={clear:function(n,r){var i=d();e||s(i),l(n,i,r)||function(n){for(var r=e.children(),i=r.length-1;i>=0;i--)l(t(r[i]),n)}(i)},remove:function(n){var r=d();e||s(r),n&&0===t(":focus",n).length?f(n):e.children().length&&e.remove()},error:function(t,e,n){return u({type:o.error,iconClass:d().iconClasses.error,message:t,optionsOverride:n,title:e})},getContainer:s,info:function(t,e,n){return u({type:o.info,iconClass:d().iconClasses.info,message:t,optionsOverride:n,title:e})},options:{},subscribe:function(t){n=t},success:function(t,e,n){return u({type:o.success,iconClass:d().iconClasses.success,message:t,optionsOverride:n,title:e})},version:"2.1.4",warning:function(t,e,n){return u({type:o.warning,iconClass:d().iconClasses.warning,message:t,optionsOverride:n,title:e})}};return a;function s(n,r){return n||(n=d()),(e=t("#"+n.containerId)).length?e:(r&&(e=function(n){return(e=t("<div/>").attr("id",n.containerId).addClass(n.positionClass)).appendTo(t(n.target)),e}(n)),e)}function l(e,n,r){var i=!(!r||!r.force)&&r.force;return!(!e||!i&&0!==t(":focus",e).length||(e[n.hideMethod]({duration:n.hideDuration,easing:n.hideEasing,complete:function(){f(e)}}),0))}function c(t){n&&n(t)}function u(n){var o=d(),a=n.iconClass||o.iconClass;if(void 0!==n.optionsOverride&&(o=t.extend(o,n.optionsOverride),a=n.optionsOverride.iconClass||a),!function(t,e){if(t.preventDuplicates){if(e.message===r)return!0;r=e.message}return!1}(o,n)){i++,e=s(o,!0);var l=null,u=t("<div/>"),p=t("<div/>"),h=t("<div/>"),g=t("<div/>"),m=t(o.closeHtml),v={intervalId:null,hideEta:null,maxHideTime:null},y={toastId:i,state:"visible",startTime:new Date,options:o,map:n};return n.iconClass&&u.addClass(o.toastClass).addClass(a),function(){if(n.title){var t=n.title;o.escapeHtml&&(t=b(n.title)),p.append(t).addClass(o.titleClass),u.append(p)}}(),function(){if(n.message){var t=n.message;o.escapeHtml&&(t=b(n.message)),h.append(t).addClass(o.messageClass),u.append(h)}}(),o.closeButton&&(m.addClass(o.closeClass).attr("role","button"),u.prepend(m)),o.progressBar&&(g.addClass(o.progressClass),u.prepend(g)),o.rtl&&u.addClass("rtl"),o.newestOnTop?e.prepend(u):e.append(u),function(){var t="";switch(n.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive"}u.attr("aria-live",t)}(),u.hide(),u[o.showMethod]({duration:o.showDuration,easing:o.showEasing,complete:o.onShown}),o.timeOut>0&&(l=setTimeout(w,o.timeOut),v.maxHideTime=parseFloat(o.timeOut),v.hideEta=(new Date).getTime()+v.maxHideTime,o.progressBar&&(v.intervalId=setInterval(S,10))),o.closeOnHover&&u.hover(x,_),!o.onclick&&o.tapToDismiss&&u.click(w),o.closeButton&&m&&m.click(function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&!0!==t.cancelBubble&&(t.cancelBubble=!0),o.onCloseClick&&o.onCloseClick(t),w(!0)}),o.onclick&&u.click(function(t){o.onclick(t),w()}),c(y),o.debug&&console&&console.log(y),u}function b(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(e){var n=e&&!1!==o.closeMethod?o.closeMethod:o.hideMethod,r=e&&!1!==o.closeDuration?o.closeDuration:o.hideDuration,i=e&&!1!==o.closeEasing?o.closeEasing:o.hideEasing;if(!t(":focus",u).length||e)return clearTimeout(v.intervalId),u[n]({duration:r,easing:i,complete:function(){f(u),clearTimeout(l),o.onHidden&&"hidden"!==y.state&&o.onHidden(),y.state="hidden",y.endTime=new Date,c(y)}})}function _(){(o.timeOut>0||o.extendedTimeOut>0)&&(l=setTimeout(w,o.extendedTimeOut),v.maxHideTime=parseFloat(o.extendedTimeOut),v.hideEta=(new Date).getTime()+v.maxHideTime)}function x(){clearTimeout(l),v.hideEta=0,u.stop(!0,!0)[o.showMethod]({duration:o.showDuration,easing:o.showEasing})}function S(){var t=(v.hideEta-(new Date).getTime())/v.maxHideTime*100;g.width(t+"%")}}function d(){return t.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},a.options)}function f(t){e||(e=s()),t.is(":visible")||(t.remove(),t=null,0===e.children().length&&(e.remove(),r=void 0))}}()}.apply(e,r))||(t.exports=i)},,function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t,e){for(var n,i,o,a,s,l,c,u="",d=0;d<t.length;)a=(n=t.charCodeAt(d++))>>2,s=(3&n)<<4|(i=t.charCodeAt(d++))>>4,l=(15&i)<<2|(o=t.charCodeAt(d++))>>6,c=63&o,isNaN(i)?l=c=64:isNaN(o)&&(c=64),u=u+r.charAt(a)+r.charAt(s)+r.charAt(l)+r.charAt(c);return u},e.decode=function(t,e){var n,i,o,a,s,l,c="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)n=r.indexOf(t.charAt(u++))<<2|(a=r.indexOf(t.charAt(u++)))>>4,i=(15&a)<<4|(s=r.indexOf(t.charAt(u++)))>>2,o=(3&s)<<6|(l=r.indexOf(t.charAt(u++))),c+=String.fromCharCode(n),64!=s&&(c+=String.fromCharCode(i)),64!=l&&(c+=String.fromCharCode(o));return c}},function(t,e,n){"use strict";var r=n(266),i=n(132),o=n(1928),a=n(834),s=n(835),l=n(552),c=n(554),u=n(836),d=n(556),f=n(837),p=n(1929),h=n(1930),g=function(t){if(t._data instanceof u&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===i.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},m=function(t){var e=g(t);return"string"===i.getTypeOf(e)?!t.options.binary&&r.nodebuffer?d(e,"utf-8"):t.asBinary():e},v=function(t){var e=g(this);return null===e||void 0===e?"":(this.options.base64&&(e=l.decode(e)),e=t&&this.options.binary?T.utf8decode(e):i.transformTo("string",e),t||this.options.binary||(e=i.transformTo("string",T.utf8encode(e))),e)},y=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this.options=n,this._initialMetadata={dir:n.dir,date:n.date}};y.prototype={asText:function(){return v.call(this,!0)},asBinary:function(){return v.call(this,!1)},asNodeBuffer:function(){var t=m(this);return i.transformTo("nodebuffer",t)},asUint8Array:function(){var t=m(this);return i.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},w=function(t,e,n){var r,o=i.getTypeOf(e);if("string"==typeof(n=function(t){return!0!==(t=t||{}).base64||null!==t.binary&&void 0!==t.binary||(t.binary=!0),(t=i.extend(t,s)).date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t}(n)).unixPermissions&&(n.unixPermissions=parseInt(n.unixPermissions,8)),n.unixPermissions&&16384&n.unixPermissions&&(n.dir=!0),n.dosPermissions&&16&n.dosPermissions&&(n.dir=!0),n.dir&&(t=x(t)),n.createFolders&&(r=_(t))&&S.call(this,r,!0),n.dir||null===e||void 0===e)n.base64=!1,n.binary=!1,e=null,o=null;else if("string"===o)n.binary&&!n.base64&&!0!==n.optimizedBinaryString&&(e=i.string2binary(e));else{if(n.base64=!1,n.binary=!0,!(o||e instanceof u))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===o&&(e=i.transformTo("uint8array",e))}var a=new y(t,e,n);return this.files[t]=a,a},_=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},x=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},S=function(t,e){return e=void 0!==e&&e,t=x(t),this.files[t]||w.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},C=function(t,e,n){var r,a=new u;return t._data instanceof u?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=c.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(r=t._data.getContent(),a.compressedContent=e.compress(i.transformTo(e.compressInputType,r),n))):((r=m(t))&&0!==r.length&&!t.dir||(e=c.STORE,r=""),a.uncompressedSize=r.length,a.crc32=o(r),a.compressedContent=e.compress(i.transformTo(e.compressInputType,r),n)),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},E=function(t,e,n,r,s,l){n.compressedContent;var c,u,d,p,h=l!==f.utf8encode,g=i.transformTo("string",l(e.name)),m=i.transformTo("string",f.utf8encode(e.name)),v=e.comment||"",y=i.transformTo("string",l(v)),w=i.transformTo("string",f.utf8encode(v)),_=m.length!==e.name.length,x=w.length!==v.length,S=e.options,C="",E="",T="";d=e._initialMetadata.dir!==e.dir?e.dir:S.dir,p=e._initialMetadata.date!==e.date?e.date:S.date;var M=0,k=0;d&&(M|=16),"UNIX"===s?(k=798,M|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(e.unixPermissions,d)):(k=20,M|=function(t,e){return 63&(t||0)}(e.dosPermissions)),c=p.getHours(),c<<=6,c|=p.getMinutes(),c<<=5,c|=p.getSeconds()/2,u=p.getFullYear()-1980,u<<=4,u|=p.getMonth()+1,u<<=5,u|=p.getDate(),_&&(E=b(1,1)+b(o(g),4)+m,C+="up"+b(E.length,2)+E),x&&(T=b(1,1)+b(this.crc32(y),4)+w,C+="uc"+b(T.length,2)+T);var A="";return A+="\n\0",A+=h||!_&&!x?"\0\0":"\0\b",A+=n.compressionMethod,A+=b(c,2),A+=b(u,2),A+=b(n.crc32,4),A+=b(n.compressedSize,4),A+=b(n.uncompressedSize,4),A+=b(g.length,2),A+=b(C.length,2),{fileRecord:a.LOCAL_FILE_HEADER+A+g+C,dirRecord:a.CENTRAL_FILE_HEADER+b(k,2)+A+b(y.length,2)+"\0\0\0\0"+b(M,4)+b(r,4)+g+C+y,compressedObject:n}},T={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,n,r,o,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],o=new y(r.name,r._data,i.extend(r.options)),n=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(n,o)&&a.push(o));return a},file:function(t,e,n){if(1===arguments.length){if(i.isRegExp(t)){var r=t;return this.filter(function(t,e){return!e.dir&&r.test(t)})}return this.filter(function(e,n){return!n.dir&&e===t})[0]||null}return t=this.root+t,w.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(i.isRegExp(t))return this.filter(function(e,n){return n.dir&&t.test(e)});var e=this.root+t,n=S.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter(function(e,n){return n.name.slice(0,t.length)===t}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){t=i.extend(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode}),i.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,n,r=[],o=0,s=0,u=i.transformTo("string",t.encodeFileName(t.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var g=this.files[d],m=g.options.compression||t.compression.toUpperCase(),v=c[m];if(!v)throw new Error(m+" is not a valid compression method !");var y=g.options.compressionOptions||t.compressionOptions||{},w=C.call(this,g,v,y),_=E.call(this,d,g,w,o,t.platform,t.encodeFileName);o+=_.fileRecord.length+w.compressedSize,s+=_.dirRecord.length,r.push(_)}var x;x=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+b(r.length,2)+b(r.length,2)+b(s,4)+b(o,4)+b(u.length,2)+u;var S=t.type.toLowerCase();for(e="uint8array"===S||"arraybuffer"===S||"blob"===S||"nodebuffer"===S?new h(o+s+x.length):new p(o+s+x.length),n=0;n<r.length;n++)e.append(r[n].fileRecord),e.append(r[n].compressedObject.compressedContent);for(n=0;n<r.length;n++)e.append(r[n].dirRecord);e.append(x);var T=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(t.type.toLowerCase(),T);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",T),t.mimeType);case"base64":return t.base64?l.encode(T):T;default:return T}},crc32:function(t,e){return o(t,e)},utf8encode:function(t){return i.transformTo("string",f.utf8encode(t))},utf8decode:function(t){return f.utf8decode(t)}};t.exports=T},function(t,e,n){"use strict";e.STORE={magic:"\0\0",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},e.DEFLATE=n(1918)},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";(function(e){t.exports=function(t,n){return new e(t,n)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,n(321).Buffer)},,,function(t,e,n){var r=n(180),i=n(322),o=n(849),a=n(157);t.exports=function(t,e){return e=r(e,t),null==(t=o(t,e))||delete t[a(i(e))]}},,function(t,e,n){var r=n(562),i=n(1972),o=n(512),a=n(1973),s=n(1974),l=n(563),c=n(147),u=n(44),d=n(857),f=n(1975),p=n(102),h=/\b__p \+= '';/g,g=/\b(__p \+=) '' \+/g,m=/(__e\(.*?\)|\b__t\)) \+\n'';/g,v=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,y=/($^)/,b=/['\n\r\u2028\u2029\\]/g;t.exports=function(t,e,n){var w=f.imports._.templateSettings||f;n&&c(t,e,n)&&(e=void 0),t=p(t),e=r({},e,w,a);var _,x,S=r({},e.imports,w.imports,a),C=u(S),E=o(S,C),T=0,M=e.interpolate||y,k="__p += '",A=RegExp((e.escape||y).source+"|"+M.source+"|"+(M===d?v:y).source+"|"+(e.evaluate||y).source+"|$","g"),I="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";t.replace(A,function(e,n,r,i,o,a){return r||(r=i),k+=t.slice(T,a).replace(b,s),n&&(_=!0,k+="' +\n__e("+n+") +\n'"),o&&(x=!0,k+="';\n"+o+";\n__p += '"),r&&(k+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),T=a+e.length,e}),k+="';\n";var O=e.variable;O||(k="with (obj) {\n"+k+"\n}\n"),k=(x?k.replace(h,""):k).replace(g,"$1").replace(m,"$1;"),k="function("+(O||"obj")+") {\n"+(O?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(_?", __e = _.escape":"")+(x?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+k+"return __p\n}";var P=i(function(){return Function(C,I+"return "+k).apply(void 0,E)});if(P.source=k,l(P))throw P;return P}},function(t,e,n){var r=n(148),i=n(260),o=n(108),a=i(function(t,e,n,i){r(e,o(e),t,i)});t.exports=a},function(t,e,n){var r=n(128),i=n(80),o=n(547),a="[object DOMException]",s="[object Error]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==s||e==a||"string"==typeof t.message&&"string"==typeof t.name&&!o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(5),o=n(22),a=n(29),s=n(2051),l=n(64),c=n(18),u=n(4),d=n(30),f=n(2),p=n(15),h=n(57),g=n(84),m=n(167),v=n(72),y=n(890),b=n(888),w=n(886),_=g.StoreManager.getInstance(),x="stealth.geo.DataSourceManager",S=!1,C=function(){function t(){}return t.addDataSources=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o(t,function(t){_.dispatch({type:b.DataSourceActions.TypeKeys.ADD_DATA_SOURCE,dataSource:N(t)})})},t.addKeywordExtender=function(t){var e=this;w.KeywordExtender.addKeywordExtender(t),_.getState(b.DATA_SOURCE_PATH).forEach(function(t){var n=w.KeywordExtender.extendKeywords(t.keywordConfig);n!==t.keywordConfig&&e.updateKeywordConfig(t.id,n)})},t.buildLegacyLayer=function(t,e){return{id:t.id,KeywordConfig:t.keywordConfig.toJS(),Name:t.name,Title:t.title,ogcId:t.ogcId,serverUrl:t.serverUrl,stealthWorkspace:e,wfsUrl:t.wfsUrl,wmsUrl:t.wmsUrl,wpsUrl:t.wpsUrl}},t.clearDataSources=function(){_.dispatch({type:b.DataSourceActions.TypeKeys.CLEAR_DATA_SOURCES})},t.getDataSources=function(){return _.getState(b.DATA_SOURCE_PATH)},t.getDataSourcesByKeyword=function(t){if(null!=t){var e=v.buildPath(t);return _.getState(b.DATA_SOURCE_PATH).filter(function(t){return t.keywordConfig.hasIn(e)})}return _.getState(b.DATA_SOURCE_PATH)},t.getDataSourcesById=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _.getState(b.DATA_SOURCE_PATH).filter(function(e){return-1!==t.indexOf(e.id)})},t.getDataSourceByLayerName=function(t){var e=this.getDataSources(),n=t.split(":");if(n.length>2){var r=n[0],i=n.slice(1).join(":");return e.find(function(t){return t.ogcId===r&&t.name===i})}return e.find(function(e){return e.name===t})},t.getObservable=function(){return _.getObservable(b.DATA_SOURCE_PATH)},t.getPrimaryOgcConfig=function(){return y.ogcConfigs.find(function(t){return t.primary})},t.getOgcConfigById=function(t){return y.ogcConfigs.find(function(e){return e.id===t})},t.loadDataSources=function(t){return void 0===t&&(t=y.ogcConfigs),S||(S=!0,r=s(F,R,D,P,k)(t)),r},t.removeDataSources=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o(t,function(t){_.dispatch({type:b.DataSourceActions.TypeKeys.REMOVE_DATA_SOURCE,dataSourceId:t})})},t.updateKeywordConfig=function(t,e){_.dispatch({type:b.DataSourceActions.TypeKeys.UPDATE_DATA_SOURCE,dataSourceId:t,dataSource:{keywordConfig:e}})},t}();function E(t){return v.uri.concatUri(t.url,f(t,"wfsEndpoint",p.config.get("ogc.defaultWfsEndpoint","/wfs")))}function T(t){return v.uri.concatUri(t.url,f(t,"wmsEndpoint",p.config.get("ogc.defaultWmsEndpoint","/wms")))}function M(t){return v.uri.concatUri(t.url,f(t,"wpsEndpoint",p.config.get("ogc.defaultWpsEndpoint","/wps")))}function k(t){return t.map(function(t){return[t,m.WmsManager.getCapabilities(T(t))]})}function A(t){return function(e){return!!c(t.layerNames)||l(t.layerNames,e.Name)}}function I(t){return function(e){return d({ogcId:t.id,ogcTitle:t.title,serverUrl:t.url,wfsUrl:E(t),wmsUrl:T(t),wpsUrl:M(t)},e)}}function O(t,e){var n=I(t),r=A(t);return function(i){return e.then(function(t){var e=u(a(t.Capability.Layer.Layer,r),n);return i.push.apply(i,e)}).catch(function(e){return h.log.warn(x+": GetCapabilities request failed for "+t.title+". Reason: "+e),i})}}function P(t){return t.reduce(function(t,e){return t.then(O(e[0],e[1]))},Promise.resolve(i.List()))}function L(t){return d({Title:t.Name,wfsUrl:f(t,"wfsUrl",t.serverUrl),wmsUrl:f(t,"wmsUrl",t.serverUrl),wpsUrl:f(t,"wpsUrl",t.serverUrl)},t)}function D(t){return t.then(function(t){return t.concat(i.List(p.config.get("map.extraLayers",[])).map(L))})}function N(t){var e=w.parseKeywordConfig(t.KeywordList);if(!e.errors.isEmpty()){var n="Layer configuration error(s) for "+t.ogcTitle+" - "+t.Name+":";h.log.error.apply(h.log,[n].concat(e.errors.toJS()))}return new b.DataSourceRecord({id:t.serverUrl+";"+t.Name+";"+t.Title,keywordConfig:w.KeywordExtender.extendKeywords(e.keywordConfig),maxZoom:t.maxZoom,minZoom:t.minZoom,name:t.Name,ogcId:t.ogcId,originalProjection:t.originalProjection,queryable:t.queryable,serverUrl:t.serverUrl,tileSize:t.tileSize,title:t.Title,wfsUrl:t.wfsUrl,wmsUrl:t.wmsUrl,wpsUrl:t.wpsUrl,wrapX:t.wrapX,xyz:t.xyz})}function R(t){return t.then(function(t){t.forEach(function(t){_.dispatch({type:b.DataSourceActions.TypeKeys.ADD_DATA_SOURCE,dataSource:N(t)})})})}function F(t){return t.then(function(){S=!1})}e.DataSourceManager=C,e.buildWfsUrl=E,e.buildWmsUrl=T,e.buildWpsUrl=M,e.requestCapabilities=k,e.layerAllowed=A,e.buildConfigLayer=I,e.pluckLayers=O,e.collectCapabilities=P,e.checkConfigLayerProperties=L,e.collectExtraLayers=D,e.buildDataSourceRecord=N,e.addDataSources=R,e.clearLoadPending=F},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(4),o=n(900),a=n(24),s=function(){function t(e,n,o){var s=this;this.VectorOverlay=e,this.wfs=n,this.GeoJson=o,this._colorDictionary={},this.VECTOR_OVERLAY_COLOR="#CC0033",this.VECTOR_OVERLAY_STROKE_WIDTH=2,this.VECTOR_OVERLAY_SUBSELECT_COLOR="#ffffff",this.VECTOR_OVERLAY_SUBSELECT_STROKE_WIDTH=2,this.VECTOR_OVERLAY_SUBSELECT_RADIUS=8,this.selectByIds=function(t,e,n,r){s._mapLayerId=t.id;var i=r.getViews().find(function(e){return e.mapLayerId===t.id});return s.updateSelection(n),s._layerIdField=e,s.selectMapLayer=s.buildSelectMapLayer(i,r),s.selectMapLayer},this.selectByIdsFromViewRecord=function(t,e,n,r,o,a,l,c){void 0===l&&(l=!1),void 0===c&&(c=!1),s.updateSelection(n),s._layerIdField=e,i(n,function(t){s._colorDictionary[t]=r[n.indexOf(t)]});var u=s;return s.buildSelectVectorOverlay(t,o,c).then(function(t){if(l){var e=t.getFeatures().getArray();1===e.length&&a.panTo(e[0].get("geometry").getCoordinates(),!1,800)}return u.selectMapLayer=t,t})},this.removeSelectLayer=function(e){t.removeSelectLayer(s.selectMapLayer,e),s.updateSelection([])},this.buildSelectMapLayer=function(e,n){var r=s.buildCqlFilter();return n.buildMapLayer(e,r,"highlight_point",t.SELECT_LAYER_ID)},this.buildCqlFilter=function(){var t=s._selection.map(function(t){return"'"+t+"'"}).join(",");return s._layerIdField+" IN("+t+")"},this.buildSelectVectorOverlay=function(t,e,n){var o,l=s;n&&(o=s.getStyle(s.VECTOR_OVERLAY_SUBSELECT_COLOR,s.VECTOR_OVERLAY_SUBSELECT_STROKE_WIDTH,s.VECTOR_OVERLAY_SUBSELECT_RADIUS));var c=new s.VectorOverlay({styleBuilder:function(){return o}}),u={CQL_FILTER:s.buildCqlFilter()},d=new s.GeoJson,f=a.DataSourceManager.getDataSourcesById(t.dataSourceId).first();return s.wfs.getFeature(f.wfsUrl,f.name,u,void 0,!0).then(function(t){i(t.data.features,function(t){var e=new r.Feature({geometry:d.readGeometry(t.geometry)});e.set(l._layerIdField,t.properties[l._layerIdField]),n||e.setStyle(s.getStyle(s._colorDictionary[t.properties[s._layerIdField]],s.VECTOR_OVERLAY_STROKE_WIDTH)),c.addFeature(e)});return c})},this.getStyle=function(t,e,n){return new r.style.Style({image:new r.style.Circle({radius:n||6,stroke:new r.style.Stroke({color:t,width:e})})})}}return t.prototype.updateSelection=function(t){this._selection=t,o.Service.emit(o.selectionUpdated,{selection:this._selection})},Object.defineProperty(t.prototype,"selection",{get:function(){return this._selection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapLayerId",{get:function(){return this._mapLayerId},enumerable:!0,configurable:!0}),t.$inject=["stealth.core.geo.ol3.overlays.Vector","wfs","stealth.core.geo.ol3.format.GeoJson"],t.SELECT_LAYER_ID="SELECT",t.SELECT_MODE={name:"Select",iconClassLarge:"large fa-square-o",iconClassMedium:"medium fa-square-o",active:!1},t.removeSelectLayer=function(t,e){if(t){var n=t.getMapLayer();if(n){e.removeLayerOverlay(n),t.onDestroy();var r=t.getSelectSourceLayer();r&&r.setSelectLayer(null)}}},t}();e.SelectService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(909);e.ContextActions=i;var o=n(2083),a=n(910);e.ContextState=a.ContextState,e.DisplayStatusRecord=a.DisplayStatusRecord,e.ViewRecord=a.ViewRecord,e.WorkspaceRecord=a.WorkspaceRecord;e.CONTEXT_PATH="Context";var s=r.StateManager.getInstance(),l={};l.Context=o.reducer,s.addReducers(l),s.addRecord(a.ContextState),s.addRecord(a.DisplayStatusRecord),s.addRecord(a.ViewRecord),s.addRecord(a.WorkspaceRecord)},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(2),a=n(224),s=n(109),l=n(4),c=n(23),u=n(327),d=n(53),f=n(228);!function(t){t.inline="inline",t.detailed="detailed"}(e.QueryEditMethods||(e.QueryEditMethods={}));var p=function(){function t(t){this.CONFIG=t,r=o(this.CONFIG,"query-edit"),i=l(o(r,"cqlParameters"),function(t){return t.parameters=u(t.parameters,function(t,e){return"numbers"===e&&(t=u(t,function(t){return d(t,"fromUnit")&&d(t,"toUnit")&&(t.convert=f(MathUtils.converter.convert,f.placeholder,t.toUnit,t.fromUnit)),t})),t}),t})}return t.prototype.getEnabledEditModes=function(t,e){return-1!==a(o(r,["enabled",t]),e)},t.prototype.getCustomParameters=function(t){return s(o(c(i,{layerName:t}),"parameters"))},t.$inject=["CONFIG"],t}();e.configuration=p},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(376),i=n(401),o=n(569),a=n(377),s=n(2194),l=n(508),c=200;t.exports=function(t,e,n){var u=-1,d=i,f=t.length,p=!0,h=[],g=h;if(n)p=!1,d=o;else if(f>=c){var m=e?null:s(t);if(m)return l(m);p=!1,d=a,g=new r}else g=e?[]:h;t:for(;++u<f;){var v=t[u],y=e?e(v):v;if(v=n||0!==v?v:0,p&&y==y){for(var b=g.length;b--;)if(g[b]===y)continue t;e&&g.push(y),h.push(v)}else d(g,y,n)||(g!==h&&g.push(y),h.push(v))}return h}},function(t,e,n){var r=n(376),i=n(401),o=n(569),a=n(103),s=n(158),l=n(377),c=200;t.exports=function(t,e,n,u){var d=-1,f=i,p=!0,h=t.length,g=[],m=e.length;if(!h)return g;n&&(e=a(e,s(n))),u?(f=o,p=!1):e.length>=c&&(f=l,p=!1,e=new r(e));t:for(;++d<h;){var v=t[d],y=null==n?v:n(v);if(v=u||0!==v?v:0,p&&y==y){for(var b=m;b--;)if(e[b]===y)continue t;g.push(v)}else f(e,y,u)||g.push(v)}return g}},function(t,e,n){"use strict";n.r(e),n.d(e,"flatbuffers",function(){return r});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],r.Long=function(t,e){this.low=0|t,this.high=0|e},r.Long.create=function(t,e){return 0==t&&0==e?r.Long.ZERO:new r.Long(t,e)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(t){if(t)e=t;else var e=1024;this.bb=r.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var i=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)},r.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},r.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},r.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},r.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},r.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},r.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},r.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},r.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},r.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},r.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},r.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},r.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},r.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},r.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},r.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},r.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},r.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},r.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},r.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},r.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},r.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,i=r.ByteBuffer.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i},r.Builder.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=(n+2)*r.SIZEOF_SHORT;this.addInt16(i);var o=0,a=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(s)){for(var l=r.SIZEOF_SHORT;l<i;l+=r.SIZEOF_SHORT)if(this.bb.readInt16(a+l)!=this.bb.readInt16(s+l))continue t;o=this.vtables[e];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},r.Builder.prototype.finish=function(t,e){if(e){var n=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH),n.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var i=r.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(n.charCodeAt(i))}this.prep(this.minalign,r.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},r.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(r+e)))throw new Error("FlatBuffers: field "+e+" must be set")},r.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var r,i=t.charCodeAt(n++);if(i<55296||i>=56320)r=i;else r=(i<<10)+t.charCodeAt(n++)+-56613888;r<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);n=0;for(var o=this.space,a=this.bb.bytes();n<e.length;n++)a[o++]=e[n];return this.endVector()},r.Builder.prototype.createLong=function(t,e){return r.Long.create(t,e)},r.ByteBuffer=function(t){this.bytes_=t,this.position_=0},r.ByteBuffer.allocate=function(t){return new r.ByteBuffer(new Uint8Array(t))},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(t){this.position_=t},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},r.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},r.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},r.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},r.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},r.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},r.ByteBuffer.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))},r.ByteBuffer.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))},r.ByteBuffer.prototype.readFloat32=function(t){return r.int32[0]=this.readInt32(t),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(t){return r.int32[r.isLittleEndian?0:1]=this.readInt32(t),r.int32[r.isLittleEndian?1:0]=this.readInt32(t+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},r.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},r.ByteBuffer.prototype.writeFloat32=function(t,e){r.float32[0]=e,this.writeInt32(t,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(t,e){r.float64[0]=e,this.writeInt32(t,r.int32[r.isLittleEndian?0:1]),this.writeInt32(t+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},r.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},r.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",o=0;if(t+=r.SIZEOF_INT,e===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;o<n;){var a,s=this.readUint8(t+o++);if(s<192)a=s;else{var l=this.readUint8(t+o++);if(s<224)a=(31&s)<<6|63&l;else{var c=this.readUint8(t+o++);if(s<240)a=(15&s)<<12|(63&l)<<6|63&c;else a=(7&s)<<18|(63&l)<<12|(63&c)<<6|63&this.readUint8(t+o++)}}a<65536?i+=String.fromCharCode(a):(a-=65536,i+=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return i},r.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},r.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},r.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+r.SIZEOF_INT+e))return!1;return!0},r.ByteBuffer.prototype.createLong=function(t,e){return r.Long.create(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(168),o=function(){function t(t){this.chunkVectors=t.chunkVectors,this.chunkOffsets=t.chunkOffsets}return t.prototype.clone=function(e){return new t(e)},t.prototype[Symbol.iterator]=function(){var t,e,n,i,o,a;return r.__generator(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,7]),t=r.__values(this.chunkVectors),e=t.next(),s.label=1;case 1:return e.done?[3,4]:(n=e.value,[5,r.__values(n)]);case 2:s.sent(),s.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return i=s.sent(),o={error:i},[3,7];case 6:try{e&&!e.done&&(a=t.return)&&a.call(t)}finally{if(o)throw o.error}return[7];case 7:return[2]}})},t.prototype.getChildAt=function(t){return t<0?null:(this._children||(this._children=[]))[t]||(this._children[t]=i.Vector.concat.apply(i.Vector,r.__spread(this.chunkVectors.map(function(e){return e.getChildAt(t)}))))},t.prototype.isValid=function(t){for(var e=this.chunkOffsets,n=0,r=0,i=0,o=e.length-1;t<e[o]&&t>=(n=e[r]);){if(r+1===o)return this.chunkVectors[r].isValid(t-n);t>=e[i=r+(o-r)/2|0]?r=i:o=i}return!1},t.prototype.get=function(t){for(var e=this.chunkOffsets,n=0,r=0,i=0,o=e.length-1;t<e[o]&&t>=(n=e[r]);){if(r+1===o)return this.chunkVectors[r].get(t-n);t>=e[i=r+(o-r)/2|0]?r=i:o=i}return null},t.prototype.set=function(t,e){for(var n=this.chunkOffsets,r=0,i=0,o=0,a=n.length-1;t<n[a]&&t>=(r=n[i]);){if(i+1===a)return this.chunkVectors[i].set(t-r,e);t>=n[o=i+(a-i)/2|0]?i=o:a=o}},t.prototype.toArray=function(){var t=this.chunkVectors,e=t.length;if(1===e)return t[0].toArray();for(var n=new Array(e),r=0,i=Array,o=-1;++o<e;){var l=t[o].toArray();r+=(n[o]=l).length,i!==l.constructor&&(i=l.constructor)}for(var c=new i(r),u=i===Array?s:a,d=(o=-1,0);++o<e;)d=u(n[o],c,d);return c},t.prototype.indexOf=function(t){var e,n,i,o=0;try{for(var a=r.__values(this.chunkVectors),s=a.next();!s.done;s=a.next()){var l=s.value;if(-1!==(e=l.indexOf(t)))return e+o;o+=l.length}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return-1},t}();function a(t,e,n){return e.set(t,n)||n+t.length}function s(t,e,n){for(var r=n-1,i=-1,o=t.length;++i<o;)e[++r]=t[i];return r}e.ChunkedView=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(168),o=n(414),a=n(412),s=n(411),l=n(330),c=n(73);function u(t,e,n){var a,l,c,u,d;return r.__generator(this,function(r){switch(r.label){case 0:return s.Message.isRecordBatch(e)?[4,new o.RecordBatch(t,e.length,n.visitFields(t.fields))]:[3,2];case 1:return r.sent(),[3,3];case 2:s.Message.isDictionaryBatch(e)&&(a=e.id,l=n.dictionaries,c=t.dictionaries.get(a),u=c.type.dictionary,d=i.Vector.create(n.visit(u)),e.isDelta&&l.has(a)&&(d=l.get(a).concat(d)),l.set(a,d)),r.label=3;case 3:return[2]}})}e.readRecordBatches=function(t){var e,n,i,o,a,s,l,c,d;return r.__generator(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,7]),e=r.__values(t),n=e.next(),f.label=1;case 1:return n.done?[3,4]:(i=n.value,o=i.schema,a=i.message,s=i.loader,[5,r.__values(u(o,a,s))]);case 2:f.sent(),f.label=3;case 3:return n=e.next(),[3,1];case 4:return[3,7];case 5:return l=f.sent(),c={error:l},[3,7];case 6:try{n&&!n.done&&(d=e.return)&&d.call(e)}finally{if(c)throw c.error}return[7];case 7:return[2]}})},e.readRecordBatchesAsync=function(t){return r.__asyncGenerator(this,arguments,function(){var e,n,i,o,a,s,l,c,d;return r.__generator(this,function(f){switch(f.label){case 0:f.trys.push([0,8,9,14]),e=r.__asyncValues(t),f.label=1;case 1:return[4,r.__await(e.next())];case 2:return(n=f.sent()).done?[3,7]:[4,r.__await(n.value)];case 3:return i=f.sent(),o=i.schema,a=i.message,s=i.loader,[5,r.__values(r.__asyncDelegator(r.__asyncValues(u(o,a,s))))];case 4:return[4,r.__await.apply(void 0,[f.sent()])];case 5:f.sent(),f.label=6;case 6:return[3,1];case 7:return[3,14];case 8:return l=f.sent(),c={error:l},[3,14];case 9:return f.trys.push([9,,12,13]),n&&!n.done&&(d=e.return)?[4,r.__await(d.call(e))]:[3,11];case 10:f.sent(),f.label=11;case 11:return[3,13];case 12:if(c)throw c.error;return[7];case 13:return[7];case 14:return[2]}})})},e.readRecordBatch=u;var d=function(t){function e(e,n,r){var i=t.call(this)||this;return i.nodes=e,i.buffers=n,i.dictionaries=r,i}return r.__extends(e,t),e.prototype.visitFields=function(t){var e=this;return t.map(function(t){return e.visit(t.type)})},e.prototype.visitNull=function(t){return this.visitNullType(t)},e.prototype.visitInt=function(t){return this.visitFlatType(t)},e.prototype.visitFloat=function(t){return this.visitFlatType(t)},e.prototype.visitBinary=function(t){return this.visitFlatList(t)},e.prototype.visitUtf8=function(t){return this.visitFlatList(t)},e.prototype.visitBool=function(t){return this.visitBoolType(t)},e.prototype.visitDecimal=function(t){return this.visitFlatType(t)},e.prototype.visitDate=function(t){return this.visitFlatType(t)},e.prototype.visitTime=function(t){return this.visitFlatType(t)},e.prototype.visitTimestamp=function(t){return this.visitFlatType(t)},e.prototype.visitInterval=function(t){return this.visitFlatType(t)},e.prototype.visitList=function(t){return this.visitListType(t)},e.prototype.visitStruct=function(t){return this.visitNestedType(t)},e.prototype.visitUnion=function(t){return this.visitUnionType(t)},e.prototype.visitFixedSizeBinary=function(t){return this.visitFlatType(t)},e.prototype.visitFixedSizeList=function(t){return this.visitFixedSizeListType(t)},e.prototype.visitMap=function(t){return this.visitNestedType(t)},e.prototype.visitDictionary=function(t){return new l.DictionaryData(t,this.dictionaries.get(t.id),this.visit(t.indices))},e.prototype.getFieldMetadata=function(){return this.nodes.next().value},e.prototype.getBufferMetadata=function(){return this.buffers.next().value},e.prototype.readNullBitmap=function(t,e,n){return void 0===n&&(n=this.getBufferMetadata()),e>0&&this.readData(t,n)||new Uint8Array(0)},e.prototype.visitNullType=function(t,e){var n=void 0===e?this.getFieldMetadata():e,r=n.length,i=n.nullCount;return new l.FlatData(t,r,this.readNullBitmap(t,i),new Uint8Array(0),0,i)},e.prototype.visitFlatType=function(t,e){var n=void 0===e?this.getFieldMetadata():e,r=n.length,i=n.nullCount;return new l.FlatData(t,r,this.readNullBitmap(t,i),this.readData(t),0,i)},e.prototype.visitBoolType=function(t,e,n){var r=void 0===e?this.getFieldMetadata():e,i=r.length,o=r.nullCount;return new l.BoolData(t,i,this.readNullBitmap(t,o),n||this.readData(t),0,o)},e.prototype.visitFlatList=function(t,e){var n=void 0===e?this.getFieldMetadata():e,r=n.length,i=n.nullCount;return new l.FlatListData(t,r,this.readNullBitmap(t,i),this.readOffsets(t),this.readData(t),0,i)},e.prototype.visitListType=function(t,e){var n=void 0===e?this.getFieldMetadata():e,r=n.length,i=n.nullCount;return new l.ListData(t,r,this.readNullBitmap(t,i),this.readOffsets(t),this.visit(t.children[0].type),0,i)},e.prototype.visitFixedSizeListType=function(t,e){var n=void 0===e?this.getFieldMetadata():e,r=n.length,i=n.nullCount;return new l.SingleNestedData(t,r,this.readNullBitmap(t,i),this.visit(t.children[0].type),0,i)},e.prototype.visitNestedType=function(t,e){var n=void 0===e?this.getFieldMetadata():e,r=n.length,i=n.nullCount;return new l.NestedData(t,r,this.readNullBitmap(t,i),this.visitFields(t.children),0,i)},e.prototype.visitUnionType=function(t,e){var n=void 0===e?this.getFieldMetadata():e,r=n.length,i=n.nullCount;return t.mode===c.UnionMode.Sparse?new l.SparseUnionData(t,r,this.readNullBitmap(t,i),this.readTypeIds(t),this.visitFields(t.children),0,i):new l.DenseUnionData(t,r,this.readNullBitmap(t,i),this.readOffsets(t),this.readTypeIds(t),this.visitFields(t.children),0,i)},e}(a.TypeVisitor);e.TypeDataLoader=d},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(2206)),r(n(2208))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),i=n(151),o=n(54),a=n(57),s=n(167),l=n(24),c=n(135);e.Z3_HINT_STRING="QUERY_HINT:z3;STRATEGY:z3";var u=function(){function t(){}return t.build=function(t){var e=l.DataSourceManager.getDataSourcesById(t.source.id).first(),n=c.StoreConfigs[t.store.type];if(e){var i=r({},s.WfsManager.getDefaultWfsParams("GetFeature",e.name),{outputFormat:n.outputFormat,srsName:"EPSG:4326",cql_filter:t.dataFilter.buildCql()});if(n.requiresGeomesaFormatOptions&&t.store.formatOptions&&(i.format_options=c.StoreHelper.buildFormatOptions(t.store.formatOptions)),t.store.type===c.StoreTypes.Arrow){var o=t.store.formatOptions.dictionaryFields;i.propertyName=t.store.dtgField+","+t.store.geomField+","+o.join()}var u={responseType:n.responseType};return s.WfsManager.buildRequest(e.wfsUrl,i,u)}a.log.error("Unable to build request. Failed to find data source: "+t.source.id)},t.submit=function(t){return o.http.request(t).then(s.WfsManager.validateResponse)},t.buildAndSubmit=function(e){return t.submit(t.build(e))},t.getExportFormats=function(){return i(c.StoreConfigs,[c.StoreTypes.KMZ])},t}();e.GetFeatureRequestBuilder=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16);!function(t){t.FILE="FILE",t.SERVER="SERVER"}(e.SourceType||(e.SourceType={}));var a=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({id:"",type:void 0},"SourceRecord"));e.SourceRecord=a,o.StateManager.getInstance().addRecord(a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(272),i=n(2211);e.read=function(t,e){var n=r.Table.from([t]);if(0===n.length)return n;if(e=e||n.schema.metadata.get("sort-field"),1==n.numCols&&n.getColumnAt(0)instanceof r.vector.StructVector){var o=n.getColumnAt(0);n=r.Table.fromStruct(o)}return e?new i.PrimaryKeyTable(n.batches,e):n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(129),i=n(46),o=n(4),a=n(334),s=n(74),l=function(){function t(t,e){this.id=t,this.type=e,this.fields=[],this.isFilterable=!0}return t.prototype.keyValFilter=function(t,e){return t+"="+(i(e)?"'"+e+"'":e)},t.prototype.buildSingleFilter=function(t,e){return this.keyValFilter(t,e)},t.prototype.buildMultipleFilter=function(t,e){var n=o(e,function(e){return this.keyValFilter(t,e)});return s.CqlBuilder.combine.apply(s.CqlBuilder,[s.CqlOperator.OR].concat(n))},t.prototype.getData=function(){return this.data},t.prototype.getFields=function(){return this.fields},t.prototype.getId=function(){return this.id},t.prototype.getMinTimeInMillis=function(){return this.minTimeMillis},t.prototype.getMaxTimeInMillis=function(){return this.maxTimeMillis},t.prototype.getNumRecords=function(){return this.numRecords},t.prototype.getType=function(){return this.type},t.prototype.boundStartMillis=function(t){return Math.max(this.minTimeMillis,t)-1e3},t.prototype.boundEndMillis=function(t){return Math.min(this.maxTimeMillis,t)+1e3},t.prototype.addPredicate=function(t){-1===r(this.predicates,function(e){return e===t})&&this.predicates.push(t)},t.prototype.removePredicate=function(t){r(this.predicates,function(e){return e===t})>-1&&a(this.predicates,t)},t.ErrorMessages={INVALID_FORMAT:"Invalid data format",NO_RESULTS:"No results",UNKNOWN_RECORD_SIZE:"Unknown record size",OTHER:"Unknown error"},t}();e.StoreObject=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(332))},,,,,,,,,,,,,,,,,function(t,e,n){var r,i;!function(o){var a={config:{},container:{},controls:{},errors:{},items:{},utils:{}};a.utils.F=function(){},a.utils.extend=function(t,e){t.prototype=a.utils.createObject(e.prototype),t.prototype.contructor=t},a.utils.createObject=function(t){return"function"==typeof Object.create?Object.create(t):(a.utils.F.prototype=t,new a.utils.F)},a.utils.objectKeys=function(t){var e,n;if("function"==typeof Object.keys)return Object.keys(t);for(n in e=[],t)e.push(n);return e},a.utils.getHashValue=function(t){var e=location.hash.match(new RegExp(t+"=([^&]*)"));return e?e[1]:null},a.utils.getQueryStringParam=function(t){if(window.location.hash)return a.utils.getHashValue(t);if(!window.location.search)return null;var e,n,r=window.location.search.substr(1).split("&"),i={};for(n=0;n<r.length;n++)i[(e=r[n].split("="))[0]]=e[1];return i[t]||null},a.utils.copy=function(t,e){for(var n in e)t[n]=e[n];return t},a.utils.animFrame=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})(function(){t()})},a.utils.indexOf=function(t,e){if(!(e instanceof Array))throw new Error("Haystack is not an Array");if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},"function"!=typeof/./&&"object"!=typeof Int8Array?a.utils.isFunction=function(t){return"function"==typeof t||!1}:a.utils.isFunction=function(t){return"[object Function]"===toString.call(t)},a.utils.fnBind=function(t,e,n){if(void 0!==Function.prototype.bind)return Function.prototype.bind.apply(t,[e].concat(n||[]));var r=function(){var i=(n||[]).concat(Array.prototype.slice.call(arguments,0));if(!(this instanceof r))return t.apply(e,i);t.apply(this,i)};return r.prototype=t.prototype,r},a.utils.removeFromArray=function(t,e){var n=a.utils.indexOf(t,e);if(-1===n)throw new Error("Can't remove item from array. Item is not in the array");e.splice(n,1)},a.utils.now=function(){return"function"==typeof Date.now?Date.now():(new Date).getTime()},a.utils.getUniqueId=function(){return(1e15*Math.random()).toString(36).replace(".","")},a.utils.filterXss=function(t,e){var n=t.replace(/javascript/gi,"j&#97;vascript").replace(/expression/gi,"expr&#101;ssion").replace(/onload/gi,"onlo&#97;d").replace(/script/gi,"&#115;cript").replace(/onerror/gi,"on&#101;rror");return!0===e?n:n.replace(/>/g,"&gt;").replace(/</g,"&lt;")},a.utils.stripTags=function(t){return o.trim(t.replace(/(<([^>]+)>)/gi,""))},a.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[a.utils.EventEmitter.ALL_EVENT]=[],this.on=function(t,e,n){if(!a.utils.isFunction(e))throw new Error("Tried to listen to event "+t+" with non-function callback "+e);this._mSubscriptions[t]||(this._mSubscriptions[t]=[]),this._mSubscriptions[t].push({fn:e,ctx:n})},this.emit=function(t){var e,n,r;r=Array.prototype.slice.call(arguments,1);var i=this._mSubscriptions[t];if(i)for(i=i.slice(),e=0;e<i.length;e++)n=i[e].ctx||{},i[e].fn.apply(n,r);r.unshift(t);var o=this._mSubscriptions[a.utils.EventEmitter.ALL_EVENT].slice();for(e=0;e<o.length;e++)n=o[e].ctx||{},o[e].fn.apply(n,r)},this.unbind=function(t,e,n){if(!this._mSubscriptions[t])throw new Error("No subscribtions to unsubscribe for event "+t);var r,i=!1;for(r=0;r<this._mSubscriptions[t].length;r++)e&&this._mSubscriptions[t][r].fn!==e||n&&n!==this._mSubscriptions[t][r].ctx||(this._mSubscriptions[t].splice(r,1),i=!0);if(!1===i)throw new Error("Nothing to unbind for "+t)},this.off=this.unbind,this.trigger=this.emit},a.utils.EventEmitter.ALL_EVENT="__all",a.utils.DragListener=function(t,e){a.utils.EventEmitter.call(this),this._eElement=o(t),this._oDocument=o(document),this._eBody=o(document.body),this._nButtonCode=e||0,this._nDelay=200,this._nDistance=10,this._nX=0,this._nY=0,this._nOriginalX=0,this._nOriginalY=0,this._bDragging=!1,this._fMove=a.utils.fnBind(this.onMouseMove,this),this._fUp=a.utils.fnBind(this.onMouseUp,this),this._fDown=a.utils.fnBind(this.onMouseDown,this),this._eElement.on("mousedown touchstart",this._fDown)},a.utils.DragListener.timeout=null,a.utils.copy(a.utils.DragListener.prototype,{destroy:function(){this._eElement.unbind("mousedown touchstart",this._fDown),this._oDocument.unbind("mouseup touchend",this._fUp),this._eElement=null,this._oDocument=null,this._eBody=null},onMouseDown:function(t){if(t.preventDefault(),0==t.button||"touchstart"===t.type){var e=this._getCoordinates(t);this._nOriginalX=e.x,this._nOriginalY=e.y,this._oDocument.on("mousemove touchmove",this._fMove),this._oDocument.one("mouseup touchend",this._fUp),this._timeout=setTimeout(a.utils.fnBind(this._startDrag,this),this._nDelay)}},onMouseMove:function(t){if(null!=this._timeout){t.preventDefault();var e=this._getCoordinates(t);this._nX=e.x-this._nOriginalX,this._nY=e.y-this._nOriginalY,!1===this._bDragging&&(Math.abs(this._nX)>this._nDistance||Math.abs(this._nY)>this._nDistance)&&(clearTimeout(this._timeout),this._startDrag()),this._bDragging&&this.emit("drag",this._nX,this._nY,t)}},onMouseUp:function(t){null!=this._timeout&&(clearTimeout(this._timeout),this._eBody.removeClass("lm_dragging"),this._eElement.removeClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events",""),this._oDocument.unbind("mousemove touchmove",this._fMove),this._oDocument.unbind("mouseup touchend",this._fUp),!0===this._bDragging&&(this._bDragging=!1,this.emit("dragStop",t,this._nOriginalX+this._nX)))},_startDrag:function(){this._bDragging=!0,this._eBody.addClass("lm_dragging"),this._eElement.addClass("lm_dragging"),this._oDocument.find("iframe").css("pointer-events","none"),this.emit("dragStart",this._nOriginalX,this._nOriginalY)},_getCoordinates:function(t){return{x:(t=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0]:t).pageX,y:t.pageY}}}),a.LayoutManager=function(t,e){if(!o||"function"!=typeof o.noConflict){var n="jQuery is missing as dependency for GoldenLayout. ";throw n+='Please either expose $ on GoldenLayout\'s scope (e.g. window) or add "jquery" to ',n+="your paths when using RequireJS/AMD",new Error(n)}a.utils.EventEmitter.call(this),this.isInitialised=!1,this._isFullPage=!1,this._resizeTimeoutId=null,this._components={"lm-react-component":a.utils.ReactComponentHandler},this._itemAreas=[],this._resizeFunction=a.utils.fnBind(this._onResize,this),this._unloadFunction=a.utils.fnBind(this._onUnload,this),this._maximisedItem=null,this._maximisePlaceholder=o('<div class="lm_maximise_place"></div>'),this._creationTimeoutPassed=!1,this._subWindowsCreated=!1,this._dragSources=[],this._updatingColumnsResponsive=!1,this._firstLoad=!0,this.width=null,this.height=null,this.root=null,this.openPopouts=[],this.selectedItem=null,this.isSubWindow=!1,this.eventHub=new a.utils.EventHub(this),this.config=this._createConfig(t),this.container=e,this.dropTargetIndicator=null,this.transitionIndicator=null,this.tabDropPlaceholder=o('<div class="lm_drop_tab_placeholder"></div>'),!0===this.isSubWindow&&o("body").css("visibility","hidden"),this._typeToItem={column:a.utils.fnBind(a.items.RowOrColumn,this,[!0]),row:a.utils.fnBind(a.items.RowOrColumn,this,[!1]),stack:a.items.Stack,component:a.items.Component}},a.LayoutManager.__lm=a,a.LayoutManager.minifyConfig=function(t){return(new a.utils.ConfigMinifier).minifyConfig(t)},a.LayoutManager.unminifyConfig=function(t){return(new a.utils.ConfigMinifier).unminifyConfig(t)},a.utils.copy(a.LayoutManager.prototype,{registerComponent:function(t,e){if("function"!=typeof e)throw new Error("Please register a constructor function");if(void 0!==this._components[t])throw new Error("Component "+t+" is already registered");this._components[t]=e},toConfig:function(t){var e,n,r;if(!1===this.isInitialised)throw new Error("Can't create config, layout not yet initialised");if(t&&!(t instanceof a.items.AbstractContentItem))throw new Error("Root must be a ContentItem");for((e={settings:a.utils.copy({},this.config.settings),dimensions:a.utils.copy({},this.config.dimensions),labels:a.utils.copy({},this.config.labels)}).content=[],(n=function(t,e){var r,i;for(r in e.config)"content"!==r&&(t[r]=e.config[r]);if(e.contentItems.length)for(t.content=[],i=0;i<e.contentItems.length;i++)t.content[i]={},n(t.content[i],e.contentItems[i])})(e,t?{contentItems:[t]}:this.root),this._$reconcilePopoutWindows(),e.openPopouts=[],r=0;r<this.openPopouts.length;r++)e.openPopouts.push(this.openPopouts[r].toConfig());return e.maximisedItemId=this._maximisedItem?"__glMaximised":null,e},getComponent:function(t){if(void 0===this._components[t])throw new a.errors.ConfigurationError('Unknown component "'+t+'"');return this._components[t]},init:function(){if(!1===this._subWindowsCreated&&(this._createSubWindows(),this._subWindowsCreated=!0),"loading"!==document.readyState&&null!==document.body){if(!0===this.isSubWindow&&!1===this._creationTimeoutPassed)return setTimeout(a.utils.fnBind(this.init,this),7),void(this._creationTimeoutPassed=!0);!0===this.isSubWindow&&this._adjustToWindowMode(),this._setContainer(),this.dropTargetIndicator=new a.controls.DropTargetIndicator(this.container),this.transitionIndicator=new a.controls.TransitionIndicator,this.updateSize(),this._create(this.config),this._bindEvents(),this.isInitialised=!0,this._adjustColumnsResponsive(),this.emit("initialised")}else o(document).ready(a.utils.fnBind(this.init,this))},updateSize:function(t,e){2===arguments.length?(this.width=t,this.height=e):(this.width=this.container.width(),this.height=this.container.height()),!0===this.isInitialised&&(this.root.callDownwards("setSize",[this.width,this.height]),this._maximisedItem&&(this._maximisedItem.element.width(this.container.width()),this._maximisedItem.element.height(this.container.height()),this._maximisedItem.callDownwards("setSize")),this._adjustColumnsResponsive())},destroy:function(){!1!==this.isInitialised&&(this._onUnload(),o(window).off("resize",this._resizeFunction),o(window).off("unload beforeunload",this._unloadFunction),this.root.callDownwards("_$destroy",[],!0),this.root.contentItems=[],this.tabDropPlaceholder.remove(),this.dropTargetIndicator.destroy(),this.transitionIndicator.destroy(),this.eventHub.destroy(),this._dragSources.forEach(function(t){t._dragListener.destroy(),t._element=null,t._itemConfig=null,t._dragListener=null}),this._dragSources=[])},createContentItem:function(t,e){var n;if("string"!=typeof t.type)throw new a.errors.ConfigurationError("Missing parameter 'type'",t);if("react-component"===t.type&&(t.type="component",t.componentName="lm-react-component"),!this._typeToItem[t.type])throw n="Unknown type '"+t.type+"'. Valid types are "+a.utils.objectKeys(this._typeToItem).join(","),new a.errors.ConfigurationError(n);return"component"!==t.type||e instanceof a.items.Stack||!e||!0===this.isSubWindow&&e instanceof a.items.Root||(t={type:"stack",width:t.width,height:t.height,content:[t]}),new this._typeToItem[t.type](this,t,e)},createPopout:function(t,e,n,r){var i,o,s,l,c,u,d=t,f=t instanceof a.items.AbstractContentItem,p=this;if(n=n||null,f){for(d=this.toConfig(t).content,n=a.utils.getUniqueId(),l=t.parent,c=t;1===l.contentItems.length&&!l.isRoot;)l=l.parent,c=c.parent;l.addId(n),isNaN(r)&&(r=a.utils.indexOf(c,l.contentItems))}else d instanceof Array||(d=[d]);return!e&&f&&(i=window.screenX||window.screenLeft,o=window.screenY||window.screenTop,e={left:i+(s=t.element.offset()).left,top:o+s.top,width:t.element.width(),height:t.element.height()}),e||f||(e={left:window.screenX||window.screenLeft+20,top:window.screenY||window.screenTop+20,width:500,height:309}),f&&t.remove(),(u=new a.controls.BrowserPopout(d,e,n,r,this)).on("initialised",function(){p.emit("windowOpened",u)}),u.on("closed",function(){p._$reconcilePopoutWindows()}),this.openPopouts.push(u),u},createDragSource:function(t,e){this.config.settings.constrainDragToContainer=!1;var n=new a.controls.DragSource(o(t),e,this);return this._dragSources.push(n),n},selectItem:function(t,e){if(!0!==this.config.settings.selectionEnabled)throw new Error("Please set selectionEnabled to true to use this feature");t!==this.selectedItem&&(null!==this.selectedItem&&this.selectedItem.deselect(),t&&!0!==e&&t.select(),this.selectedItem=t,this.emit("selectionChanged",t))},_$maximiseItem:function(t){null!==this._maximisedItem&&this._$minimiseItem(this._maximisedItem),this._maximisedItem=t,this._maximisedItem.addId("__glMaximised"),t.element.addClass("lm_maximised"),t.element.after(this._maximisePlaceholder),this.root.element.prepend(t.element),t.element.width(this.container.width()),t.element.height(this.container.height()),t.callDownwards("setSize"),this._maximisedItem.emit("maximised"),this.emit("stateChanged")},_$minimiseItem:function(t){t.element.removeClass("lm_maximised"),t.removeId("__glMaximised"),this._maximisePlaceholder.after(t.element),this._maximisePlaceholder.remove(),t.parent.callDownwards("setSize"),this._maximisedItem=null,t.emit("minimised"),this.emit("stateChanged")},_$closeWindow:function(){window.setTimeout(function(){window.close()},1)},_$getArea:function(t,e){var n,r,i=1/0,o=null;for(n=0;n<this._itemAreas.length;n++)t>(r=this._itemAreas[n]).x1&&t<r.x2&&e>r.y1&&e<r.y2&&i>r.surface&&(i=r.surface,o=r);return o},_$createRootItemAreas:function(){var t={y2:0,x2:0,y1:"y2",x1:"x2"};for(var e in t){var n=this.root._$getArea();n.side=e,n[e]=t[e]?n[t[e]]-50:50,n.surface=(n.x2-n.x1)*(n.y2-n.y1),this._itemAreas.push(n)}},_$calculateItemAreas:function(){var t,e,n=this._getAllContentItems();if(this._itemAreas=[],1!==n.length){for(this._$createRootItemAreas(),t=0;t<n.length;t++)if(n[t].isStack&&null!==(e=n[t]._$getArea()))if(e instanceof Array)this._itemAreas=this._itemAreas.concat(e);else{this._itemAreas.push(e);var r={};a.utils.copy(r,e),a.utils.copy(r,e.contentItem._contentAreaDimensions.header.highlightArea),r.surface=(r.x2-r.x1)*(r.y2-r.y1),this._itemAreas.push(r)}}else this._itemAreas.push(this.root._$getArea())},_$normalizeContentItem:function(t,e){if(!t)throw new Error("No content item defined");if(a.utils.isFunction(t)&&(t=t()),t instanceof a.items.AbstractContentItem)return t;if(o.isPlainObject(t)&&t.type){var n=this.createContentItem(t,e);return n.callDownwards("_$init"),n}throw new Error("Invalid contentItem")},_$reconcilePopoutWindows:function(){var t,e=[];for(t=0;t<this.openPopouts.length;t++)!1===this.openPopouts[t].getWindow().closed?e.push(this.openPopouts[t]):this.emit("windowClosed",this.openPopouts[t]);this.openPopouts.length!==e.length&&(this.emit("stateChanged"),this.openPopouts=e)},_getAllContentItems:function(){var t=[],e=function(n){if(t.push(n),n.contentItems instanceof Array)for(var r=0;r<n.contentItems.length;r++)e(n.contentItems[r])};return e(this.root),t},_bindEvents:function(){this._isFullPage&&o(window).resize(this._resizeFunction),o(window).on("unload beforeunload",this._unloadFunction)},_onResize:function(){clearTimeout(this._resizeTimeoutId),this._resizeTimeoutId=setTimeout(a.utils.fnBind(this.updateSize,this),100)},_createConfig:function(t){var e=a.utils.getQueryStringParam("gl-window");e&&(this.isSubWindow=!0,t=localStorage.getItem(e),t=JSON.parse(t),t=(new a.utils.ConfigMinifier).unminifyConfig(t),localStorage.removeItem(e)),t=o.extend(!0,{},a.config.defaultConfig,t);var n=function(t){for(var e in t)"props"!==e&&"object"==typeof t[e]?n(t[e]):"type"===e&&"react-component"===t[e]&&(t.type="component",t.componentName="lm-react-component")};return n(t),!1===t.settings.hasHeaders&&(t.dimensions.headerHeight=0),t},_adjustToWindowMode:function(){var t=o('<div class="lm_popin" title="'+this.config.labels.popin+'"><div class="lm_icon"></div><div class="lm_bg"></div></div>');t.click(a.utils.fnBind(function(){this.emit("popIn")},this)),document.title=a.utils.stripTags(this.config.content[0].title),o("head").append(o("body link, body style, template, .gl_keep")),this.container=o("body").html("").css("visibility","visible").append(t);document.body.offsetHeight;window.__glInstance=this},_createSubWindows:function(){var t,e;for(t=0;t<this.config.openPopouts.length;t++)e=this.config.openPopouts[t],this.createPopout(e.content,e.dimensions,e.parentId,e.indexInParent)},_setContainer:function(){var t=o(this.container||"body");if(0===t.length)throw new Error("GoldenLayout container not found");if(t.length>1)throw new Error("GoldenLayout more than one container element specified");t[0]===document.body&&(this._isFullPage=!0,o("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"})),this.container=t},_create:function(t){var e;if(!(t.content instanceof Array))throw e=void 0===t.content?"Missing setting 'content' on top level of configuration":"Configuration parameter 'content' must be an array",new a.errors.ConfigurationError(e,t);if(t.content.length>1)throw e="Top level content can't contain more then one element.",new a.errors.ConfigurationError(e,t);this.root=new a.items.Root(this,{content:t.content},this.container),this.root.callDownwards("_$init"),"__glMaximised"===t.maximisedItemId&&this.root.getItemsById(t.maximisedItemId)[0].toggleMaximise()},_onUnload:function(){if(!0===this.config.settings.closePopoutsOnUnload)for(var t=0;t<this.openPopouts.length;t++)this.openPopouts[t].close()},_adjustColumnsResponsive:function(){if(this._useResponsiveLayout()&&!this._updatingColumnsResponsive&&this.config.dimensions&&this.config.dimensions.minItemWidth&&0!==this.root.contentItems.length&&this.root.contentItems[0].isRow){this._firstLoad=!1;var t=this.root.contentItems[0].contentItems.length;if(!(t<=1)){var e=this.config.dimensions.minItemWidth;if(!(t*e<=this.width)){this._updatingColumnsResponsive=!0;for(var n=t-Math.max(Math.floor(this.width/e),1),r=this.root.contentItems[0],i=this._findAllStackContainers()[0],o=0;o<n;o++){var a=r.contentItems[r.contentItems.length-1];this._addChildContentItemsToContainer(i,a)}this._updatingColumnsResponsive=!1}}}else this._firstLoad=!1},_useResponsiveLayout:function(){return this.config.settings&&("always"==this.config.settings.responsiveMode||"onload"==this.config.settings.responsiveMode&&this._firstLoad)},_addChildContentItemsToContainer:function(t,e){"stack"===e.type?e.contentItems.forEach(function(n){t.addChild(n),e.removeChild(n,!0)}):e.contentItems.forEach(a.utils.fnBind(function(e){this._addChildContentItemsToContainer(t,e)},this))},_findAllStackContainers:function(){var t=[];return this._findAllStackContainersRecursive(t,this.root),t},_findAllStackContainersRecursive:function(t,e){e.contentItems.forEach(a.utils.fnBind(function(e){"stack"==e.type?t.push(e):e.isComponent||this._findAllStackContainersRecursive(t,e)},this))}}),r=[n(62)],void 0===(i=function(t){return o=t,a.LayoutManager}.apply(e,r))||(t.exports=i),a.config.itemDefaultConfig={isClosable:!0,reorderEnabled:!0,title:""},a.config.defaultConfig={openPopouts:[],settings:{hasHeaders:!0,constrainDragToContainer:!0,reorderEnabled:!0,selectionEnabled:!1,popoutWholeStack:!1,blockedPopoutsThrowError:!0,closePopoutsOnUnload:!0,showPopoutIcon:!0,showMaximiseIcon:!0,showCloseIcon:!0,responsiveMode:"onload",tabOverlapAllowance:0,reorderOnTabMenuClick:!0,tabControlOffset:10},dimensions:{borderWidth:5,borderGrabWidth:15,minItemHeight:10,minItemWidth:10,headerHeight:20,dragProxyWidth:300,dragProxyHeight:200},labels:{close:"close",maximise:"maximise",minimise:"minimise",popout:"open in new window",popin:"pop in",tabDropdown:"additional tabs"}},a.container.ItemContainer=function(t,e,n){a.utils.EventEmitter.call(this),this.width=null,this.height=null,this.title=t.componentName,this.parent=e,this.layoutManager=n,this.isHidden=!1,this._config=t,this._element=o(['<div class="lm_item_container">','<div class="lm_content"></div>',"</div>"].join("")),this._contentElement=this._element.find(".lm_content")},a.utils.copy(a.container.ItemContainer.prototype,{getElement:function(){return this._contentElement},hide:function(){this.emit("hide"),this.isHidden=!0,this._element.hide()},show:function(){this.emit("show"),this.isHidden=!1,this._element.show(),0==this.height&&0==this.width||this.emit("shown")},setSize:function(t,e){for(var n,r,i,o,a=this.parent,s=this;!a.isColumn&&!a.isRow;)if(s=a,(a=a.parent).isRoot)return!1;for(n=("height"===(r=a.isColumn?"height":"width")?e:t)/(this[r]*(1/(s.config[r]/100)))*100,i=(s.config[r]-n)/(a.contentItems.length-1),o=0;o<a.contentItems.length;o++)a.contentItems[o]===s?a.contentItems[o].config[r]=n:a.contentItems[o].config[r]+=i;return a.callDownwards("setSize"),!0},close:function(){this._config.isClosable&&(this.emit("close"),this.parent.close())},getState:function(){return this._config.componentState},extendState:function(t){this.setState(o.extend(!0,this.getState(),t))},setState:function(t){this._config.componentState=t,this.parent.emitBubblingEvent("stateChanged")},setTitle:function(t){this.parent.setTitle(t)},_$setSize:function(t,e){if(t!==this.width||e!==this.height){this.width=t,this.height=e;var n=this._contentElement[0],r=n.offsetWidth-n.clientWidth,i=n.offsetHeight-n.clientHeight;this._contentElement.width(this.width-r).height(this.height-i),this.emit("resize")}}}),a.controls.BrowserPopout=function(t,e,n,r,i){a.utils.EventEmitter.call(this),this.isInitialised=!1,this._config=t,this._dimensions=e,this._parentId=n,this._indexInParent=r,this._layoutManager=i,this._popoutWindow=null,this._id=null,this._createWindow()},a.utils.copy(a.controls.BrowserPopout.prototype,{toConfig:function(){if(!1===this.isInitialised)throw new Error("Can't create config, layout not yet initialised");return{dimensions:{width:this.getGlInstance().width,height:this.getGlInstance().height,left:this._popoutWindow.screenX||this._popoutWindow.screenLeft,top:this._popoutWindow.screenY||this._popoutWindow.screenTop},content:this.getGlInstance().toConfig().content,parentId:this._parentId,indexInParent:this._indexInParent}},getGlInstance:function(){return this._popoutWindow.__glInstance},getWindow:function(){return this._popoutWindow},close:function(){if(this.getGlInstance())this.getGlInstance()._$closeWindow();else try{this.getWindow().close()}catch(t){}},popIn:function(){var t,e;this._indexInParent;this._parentId&&(t=o.extend(!0,{},this.getGlInstance().toConfig()).content[0],(e=this._layoutManager.root.getItemsById(this._parentId)[0])||(e=this._layoutManager.root.contentItems.length>0?this._layoutManager.root.contentItems[0]:this._layoutManager.root)),e.addChild(t,this._indexInParent),this.close()},_createWindow:function(){var t,e=this._createUrl(),n=Math.floor(1e6*Math.random()).toString(36),r=this._serializeWindowOptions({width:this._dimensions.width,height:this._dimensions.height,innerWidth:this._dimensions.width,innerHeight:this._dimensions.height,menubar:"no",toolbar:"no",location:"no",personalbar:"no",resizable:"yes",scrollbars:"no",status:"no"});if(this._popoutWindow=window.open(e,n,r),this._popoutWindow)o(this._popoutWindow).on("load",a.utils.fnBind(this._positionWindow,this)).on("unload beforeunload",a.utils.fnBind(this._onClose,this)),t=setInterval(a.utils.fnBind(function(){this._popoutWindow.__glInstance&&this._popoutWindow.__glInstance.isInitialised&&(this._onInitialised(),clearInterval(t))},this),10);else if(!0===this._layoutManager.config.settings.blockedPopoutsThrowError){var i=new Error("Popout blocked");throw i.type="popoutBlocked",i}},_serializeWindowOptions:function(t){var e,n=[];for(e in t)n.push(e+"="+t[e]);return n.join(",")},_createUrl:function(){var t,e={content:this._config},n="gl-window-config-"+a.utils.getUniqueId();e=(new a.utils.ConfigMinifier).minifyConfig(e);try{localStorage.setItem(n,JSON.stringify(e))}catch(t){throw new Error("Error while writing to localStorage "+t.toString())}return 1===(t=document.location.href.split("?")).length?t[0]+"?gl-window="+n:document.location.href+"&gl-window="+n},_positionWindow:function(){this._popoutWindow.moveTo(this._dimensions.left,this._dimensions.top),this._popoutWindow.focus()},_onInitialised:function(){this.isInitialised=!0,this.getGlInstance().on("popIn",this.popIn,this),this.emit("initialised")},_onClose:function(){setTimeout(a.utils.fnBind(this.emit,this,["closed"]),50)}}),a.controls.DragProxy=function(t,e,n,r,i,s){a.utils.EventEmitter.call(this),this._dragListener=n,this._layoutManager=r,this._contentItem=i,this._originalParent=s,this._area=null,this._lastValidArea=null,this._dragListener.on("drag",this._onDrag,this),this._dragListener.on("dragStop",this._onDrop,this),this.element=o(a.controls.DragProxy._template),s&&s._side&&(this._sided=s._sided,this.element.addClass("lm_"+s._side),["right","bottom"].indexOf(s._side)>=0&&this.element.find(".lm_content").after(this.element.find(".lm_header"))),this.element.css({left:t,top:e}),this.element.find(".lm_tab").attr("title",a.utils.stripTags(this._contentItem.config.title)),this.element.find(".lm_title").html(this._contentItem.config.title),this.childElementContainer=this.element.find(".lm_content"),this.childElementContainer.append(i.element),this._updateTree(),this._layoutManager._$calculateItemAreas(),this._setDimensions(),o(document.body).append(this.element);var l=this._layoutManager.container.offset();this._minX=l.left,this._minY=l.top,this._maxX=this._layoutManager.container.width()+this._minX,this._maxY=this._layoutManager.container.height()+this._minY,this._width=this.element.width(),this._height=this.element.height(),this._setDropPosition(t,e)},a.controls.DragProxy._template='<div class="lm_dragProxy"><div class="lm_header"><ul class="lm_tabs"><li class="lm_tab lm_active"><i class="lm_left"></i><span class="lm_title"></span><i class="lm_right"></i></li></ul></div><div class="lm_content"></div></div>',a.utils.copy(a.controls.DragProxy.prototype,{_onDrag:function(t,e,n){var r=(n=n.originalEvent&&n.originalEvent.touches?n.originalEvent.touches[0]:n).pageX,i=n.pageY;(r>this._minX&&r<this._maxX&&i>this._minY&&i<this._maxY||!0!==this._layoutManager.config.settings.constrainDragToContainer)&&this._setDropPosition(r,i)},_setDropPosition:function(t,e){this.element.css({left:t,top:e}),this._area=this._layoutManager._$getArea(t,e),null!==this._area&&(this._lastValidArea=this._area,this._area.contentItem._$highlightDropZone(t,e,this._area))},_onDrop:function(){this._layoutManager.dropTargetIndicator.hide(),null!==this._area?this._area.contentItem._$onDrop(this._contentItem,this._area):null!==this._lastValidArea?this._lastValidArea.contentItem._$onDrop(this._contentItem,this._lastValidArea):this._originalParent?this._originalParent.addChild(this._contentItem):this._contentItem._$destroy(),this.element.remove(),this._layoutManager.emit("itemDropped",this._contentItem)},_updateTree:function(){this._contentItem.parent&&this._contentItem.parent.removeChild(this._contentItem,!0),this._contentItem._$setParent(this)},_setDimensions:function(){var t=this._layoutManager.config.dimensions,e=t.dragProxyWidth,n=t.dragProxyHeight;this.element.width(e),this.element.height(n),e-=this._sided?t.headerHeight:0,n-=this._sided?0:t.headerHeight,this.childElementContainer.width(e),this.childElementContainer.height(n),this._contentItem.element.width(e),this._contentItem.element.height(n),this._contentItem.callDownwards("_$show"),this._contentItem.callDownwards("setSize")}}),a.controls.DragSource=function(t,e,n){this._element=t,this._itemConfig=e,this._layoutManager=n,this._dragListener=null,this._createDragListener()},a.utils.copy(a.controls.DragSource.prototype,{_createDragListener:function(){null!==this._dragListener&&this._dragListener.destroy(),this._dragListener=new a.utils.DragListener(this._element),this._dragListener.on("dragStart",this._onDragStart,this),this._dragListener.on("dragStop",this._createDragListener,this)},_onDragStart:function(t,e){var n=this._itemConfig;a.utils.isFunction(n)&&(n=n());var r=this._layoutManager._$normalizeContentItem(o.extend(!0,{},n)),i=new a.controls.DragProxy(t,e,this._dragListener,this._layoutManager,r,null);this._layoutManager.transitionIndicator.transitionElements(this._element,i.element)}}),a.controls.DropTargetIndicator=function(){this.element=o(a.controls.DropTargetIndicator._template),o(document.body).append(this.element)},a.controls.DropTargetIndicator._template='<div class="lm_dropTargetIndicator"><div class="lm_inner"></div></div>',a.utils.copy(a.controls.DropTargetIndicator.prototype,{destroy:function(){this.element.remove()},highlight:function(t,e,n,r){this.highlightArea({x1:t,y1:e,x2:n,y2:r})},highlightArea:function(t){this.element.css({left:t.x1,top:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}).show()},hide:function(){this.element.hide()}}),a.controls.Header=function(t,e){a.utils.EventEmitter.call(this),this.layoutManager=t,this.element=o(a.controls.Header._template),!0===this.layoutManager.config.settings.selectionEnabled&&(this.element.addClass("lm_selectable"),this.element.on("click touchstart",a.utils.fnBind(this._onHeaderClick,this))),this.tabsContainer=this.element.find(".lm_tabs"),this.tabDropdownContainer=this.element.find(".lm_tabdropdown_list"),this.tabDropdownContainer.hide(),this.controlsContainer=this.element.find(".lm_controls"),this.parent=e,this.parent.on("resize",this._updateTabSizes,this),this.tabs=[],this.activeContentItem=null,this.closeButton=null,this.tabDropdownButton=null,this.hideAdditionalTabsDropdown=a.utils.fnBind(this._hideAdditionalTabsDropdown,this),o(document).mouseup(this.hideAdditionalTabsDropdown),this._lastVisibleTabIndex=-1,this._tabControlOffset=this.layoutManager.config.settings.tabControlOffset,this._createControls()},a.controls.Header._template=['<div class="lm_header">','<ul class="lm_tabs"></ul>','<ul class="lm_controls"></ul>','<ul class="lm_tabdropdown_list"></ul>',"</div>"].join(""),a.utils.copy(a.controls.Header.prototype,{createTab:function(t,e){var n,r;for(r=0;r<this.tabs.length;r++)if(this.tabs[r].contentItem===t)return;if(n=new a.controls.Tab(this,t),0===this.tabs.length)return this.tabs.push(n),void this.tabsContainer.append(n.element);void 0===e&&(e=this.tabs.length),e>0?this.tabs[e-1].element.after(n.element):this.tabs[0].element.before(n.element),this.tabs.splice(e,0,n),this._updateTabSizes()},removeTab:function(t){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].contentItem===t)return this.tabs[e]._$destroy(),void this.tabs.splice(e,1);throw new Error("contentItem is not controlled by this header")},setActiveContentItem:function(t){var e,n,r,i;for(e=0;e<this.tabs.length;e++)r=this.tabs[e].contentItem===t,this.tabs[e].setActive(r),!0===r&&(this.activeContentItem=t,this.parent.config.activeItemIndex=e);if(this.layoutManager.config.settings.reorderOnTabMenuClick&&-1!==this._lastVisibleTabIndex&&this.parent.config.activeItemIndex>this._lastVisibleTabIndex){for(i=this.tabs[this.parent.config.activeItemIndex],n=this.parent.config.activeItemIndex;n>0;n--)this.tabs[n]=this.tabs[n-1];this.tabs[0]=i,this.parent.config.activeItemIndex=0}this._updateTabSizes(),this.parent.emitBubblingEvent("stateChanged")},position:function(t){var e=this.parent._header.show;return e&&!this.parent._side&&(e="top"),void 0!==t&&this.parent._header.show!=t&&(this.parent._header.show=t,this.parent._setupHeaderPosition()),e},_$setClosable:function(t){return!(!this.closeButton||!this._isClosable())&&(this.closeButton.element[t?"show":"hide"](),!0)},_$destroy:function(){this.emit("destroy",this);for(var t=0;t<this.tabs.length;t++)this.tabs[t]._$destroy();o(document).off("mouseup",this.hideAdditionalTabsDropdown),this.element.remove()},_getHeaderSetting:function(t){if(t in this.parent._header)return this.parent._header[t]},_createControls:function(){var t,e,n,r,i,o,s,l,c;c=a.utils.fnBind(this._showAdditionalTabsDropdown,this),l=this.layoutManager.config.labels.tabDropdown,this.tabDropdownButton=new a.controls.HeaderButton(this,l,"lm_tabdropdown",c),this.tabDropdownButton.element.hide(),this._getHeaderSetting("popout")&&(e=a.utils.fnBind(this._onPopoutClick,this),n=this._getHeaderSetting("popout"),new a.controls.HeaderButton(this,n,"lm_popout",e)),this._getHeaderSetting("maximise")&&(o=a.utils.fnBind(this.parent.toggleMaximise,this.parent),r=this._getHeaderSetting("maximise"),i=this._getHeaderSetting("minimise"),s=new a.controls.HeaderButton(this,r,"lm_maximise",o),this.parent.on("maximised",function(){s.element.attr("title",i)}),this.parent.on("minimised",function(){s.element.attr("title",r)})),this._isClosable()&&(t=a.utils.fnBind(this.parent.remove,this.parent),n=this._getHeaderSetting("close"),this.closeButton=new a.controls.HeaderButton(this,n,"lm_close",t))},_showAdditionalTabsDropdown:function(){this.tabDropdownContainer.show()},_hideAdditionalTabsDropdown:function(t){this.tabDropdownContainer.hide()},_isClosable:function(){return this.parent.config.isClosable&&this.layoutManager.config.settings.showCloseIcon},_onPopoutClick:function(){!0===this.layoutManager.config.settings.popoutWholeStack?this.parent.popout():this.activeContentItem.popout()},_onHeaderClick:function(t){t.target===this.element[0]&&this.parent.select()},_updateTabSizes:function(t){if(0!==this.tabs.length){this.tabDropdownButton.element.toggle(!0===t);var e=function(t){return t?"width":"height"};this.element.css(e(!this.parent._sided),""),this.element[e(this.parent._sided)](this.layoutManager.config.dimensions.headerHeight);var n,r,i,o,a=this.element.outerWidth()-this.controlsContainer.outerWidth()-this._tabControlOffset,s=0,l=0,c=0,u=this.layoutManager.config.settings.tabOverlapAllowance,d=!1,f=this.activeContentItem?this.tabs.indexOf(this.activeContentItem.tab):0,p=this.tabs[f];for(this.parent._sided&&(a=this.element.outerHeight()-this.controlsContainer.outerHeight()-this._tabControlOffset),this._lastVisibleTabIndex=-1,r=0;r<this.tabs.length;r++)if(n=this.tabs[r].element,this.tabsContainer.append(n),s+=n.outerWidth()+parseInt(n.css("margin-right"),10),(l=f<=r?s:s+p.element.outerWidth()+parseInt(p.element.css("margin-right"),10))>a){if(d)r===f&&(n.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(n));else if((c=f>0&&f<=r?(l-a)/(r-1):(l-a)/r)<u){for(i=0;i<=r;i++)o=i!==f&&0!==i?"-"+c+"px":"",this.tabs[i].element.css({"z-index":r-i,"margin-left":o});this._lastVisibleTabIndex=r,this.tabsContainer.append(n)}else d=!0;if(d&&r!==f){if(!t)return void this._updateTabSizes(!0);n.css({"z-index":"auto","margin-left":""}),this.tabDropdownContainer.append(n)}}else this._lastVisibleTabIndex=r,n.css({"z-index":"auto","margin-left":""}),this.tabsContainer.append(n)}}}),a.controls.HeaderButton=function(t,e,n,r){this._header=t,this.element=o('<li class="'+n+'" title="'+e+'"></li>'),this._header.on("destroy",this._$destroy,this),this._action=r,this.element.on("click touchstart",this._action),this._header.controlsContainer.append(this.element)},a.utils.copy(a.controls.HeaderButton.prototype,{_$destroy:function(){this.element.off(),this.element.remove()}}),a.controls.Splitter=function(t,e,n){this._isVertical=t,this._size=e,this._grabSize=n<e?e:n,this.element=this._createElement(),this._dragListener=new a.utils.DragListener(this.element)},a.utils.copy(a.controls.Splitter.prototype,{on:function(t,e,n){this._dragListener.on(t,e,n)},_$destroy:function(){this.element.remove()},_createElement:function(){var t=o('<div class="lm_drag_handle"></div>'),e=o('<div class="lm_splitter"></div>');e.append(t);var n=this._grabSize-this._size,r=n/2;return this._isVertical?(t.css("top",-r),t.css("height",this._size+n),e.addClass("lm_vertical"),e.height(this._size)):(t.css("left",-r),t.css("width",this._size+n),e.addClass("lm_horizontal"),e.width(this._size)),e}}),a.controls.Tab=function(t,e){this.header=t,this.contentItem=e,this.element=o(a.controls.Tab._template),this.titleElement=this.element.find(".lm_title"),this.closeElement=this.element.find(".lm_close_tab"),this.closeElement[e.config.isClosable?"show":"hide"](),this.isActive=!1,this.setTitle(e.config.title),this.contentItem.on("titleChanged",this.setTitle,this),this._layoutManager=this.contentItem.layoutManager,!0===this._layoutManager.config.settings.reorderEnabled&&!0===e.config.reorderEnabled&&(this._dragListener=new a.utils.DragListener(this.element),this._dragListener.on("dragStart",this._onDragStart,this),this.contentItem.on("destroy",this._dragListener.destroy,this._dragListener)),this._onTabClickFn=a.utils.fnBind(this._onTabClick,this),this._onCloseClickFn=a.utils.fnBind(this._onCloseClick,this),this.element.on("mousedown touchstart",this._onTabClickFn),this.contentItem.config.isClosable?(this.closeElement.on("click touchstart",this._onCloseClickFn),this.closeElement.on("mousedown",this._onCloseMousedown)):this.closeElement.remove(),this.contentItem.tab=this,this.contentItem.emit("tab",this),this.contentItem.layoutManager.emit("tabCreated",this),this.contentItem.isComponent&&(this.contentItem.container.tab=this,this.contentItem.container.emit("tab",this))},a.controls.Tab._template='<li class="lm_tab"><i class="lm_left"></i><span class="lm_title"></span><div class="lm_close_tab"></div><i class="lm_right"></i></li>',a.utils.copy(a.controls.Tab.prototype,{setTitle:function(t){this.element.attr("title",a.utils.stripTags(t)),this.titleElement.html(t)},setActive:function(t){t!==this.isActive&&(this.isActive=t,t?this.element.addClass("lm_active"):this.element.removeClass("lm_active"))},_$destroy:function(){this.element.off("mousedown touchstart",this._onTabClickFn),this.closeElement.off("click touchstart",this._onCloseClickFn),this._dragListener&&(this.contentItem.off("destroy",this._dragListener.destroy,this._dragListener),this._dragListener.off("dragStart",this._onDragStart),this._dragListener=null),this.element.remove()},_onDragStart:function(t,e){!0===this.contentItem.parent.isMaximised&&this.contentItem.parent.toggleMaximise(),new a.controls.DragProxy(t,e,this._dragListener,this._layoutManager,this.contentItem,this.header.parent)},_onTabClick:function(t){if(0===t.button||"touchstart"===t.type){var e=this.header.parent.getActiveContentItem();this.contentItem!==e&&this.header.parent.setActiveContentItem(this.contentItem)}else 1===t.button&&this.contentItem.config.isClosable&&this._onCloseClick(t)},_onCloseClick:function(t){t.stopPropagation(),this.header.parent.removeChild(this.contentItem)},_onCloseMousedown:function(t){t.stopPropagation()}}),a.controls.TransitionIndicator=function(){this._element=o('<div class="lm_transition_indicator"></div>'),o(document.body).append(this._element),this._toElement=null,this._fromDimensions=null,this._totalAnimationDuration=200,this._animationStartTime=null},a.utils.copy(a.controls.TransitionIndicator.prototype,{destroy:function(){this._element.remove()},transitionElements:function(t,e){},_nextAnimationFrame:function(){var t,e=this._measure(this._toElement),n=(a.utils.now()-this._animationStartTime)/this._totalAnimationDuration,r={};if(n>=1)this._element.hide();else{for(t in e.opacity=0,this._fromDimensions)r[t]=this._fromDimensions[t]+(e[t]-this._fromDimensions[t])*n;this._element.css(r),a.utils.animFrame(a.utils.fnBind(this._nextAnimationFrame,this))}},_measure:function(t){var e=t.offset();return{left:e.left,top:e.top,width:t.outerWidth(),height:t.outerHeight()}}}),a.errors.ConfigurationError=function(t,e){Error.call(this),this.name="Configuration Error",this.message=t,this.node=e},a.errors.ConfigurationError.prototype=new Error,a.items.AbstractContentItem=function(t,e,n){a.utils.EventEmitter.call(this),this.config=this._extendItemNode(e),this.type=e.type,this.contentItems=[],this.parent=n,this.isInitialised=!1,this.isMaximised=!1,this.isRoot=!1,this.isRow=!1,this.isColumn=!1,this.isStack=!1,this.isComponent=!1,this.layoutManager=t,this._pendingEventPropagations={},this._throttledEvents=["stateChanged"],this.on(a.utils.EventEmitter.ALL_EVENT,this._propagateEvent,this),e.content&&this._createContentItems(e)},a.utils.copy(a.items.AbstractContentItem.prototype,{setSize:function(){throw new Error("Abstract Method")},callDownwards:function(t,e,n,r){var i;for(!0!==n&&!0!==r&&this[t].apply(this,e||[]),i=0;i<this.contentItems.length;i++)this.contentItems[i].callDownwards(t,e,n);!0===n&&!0!==r&&this[t].apply(this,e||[])},removeChild:function(t,e){var n=a.utils.indexOf(t,this.contentItems);if(-1===n)throw new Error("Can't remove child item. Unknown content item");!0!==e&&this.contentItems[n]._$destroy(),this.contentItems.splice(n,1),this.config.content.splice(n,1),this.contentItems.length>0?this.callDownwards("setSize"):this instanceof a.items.Root||!0!==this.config.isClosable||this.parent.removeChild(this)},addChild:function(t,e){void 0===e&&(e=this.contentItems.length),this.contentItems.splice(e,0,t),void 0===this.config.content&&(this.config.content=[]),this.config.content.splice(e,0,t.config),t.parent=this,!0===t.parent.isInitialised&&!1===t.isInitialised&&t._$init()},replaceChild:function(t,e,n){e=this.layoutManager._$normalizeContentItem(e);var r=a.utils.indexOf(t,this.contentItems),i=t.element[0].parentNode;if(-1===r)throw new Error("Can't replace child. oldChild is not child of this");i.replaceChild(e.element[0],t.element[0]),!0===n&&(t.parent=null,t._$destroy()),this.contentItems[r]=e,e.parent=this,this.isStack&&(this.header.tabs[r].contentItem=e),!0===e.parent.isInitialised&&!1===e.isInitialised&&e._$init(),this.callDownwards("setSize")},remove:function(){this.parent.removeChild(this)},popout:function(){var t=this.layoutManager.createPopout(this);return this.emitBubblingEvent("stateChanged"),t},toggleMaximise:function(t){t&&t.preventDefault(),!0===this.isMaximised?this.layoutManager._$minimiseItem(this):this.layoutManager._$maximiseItem(this),this.isMaximised=!this.isMaximised,this.emitBubblingEvent("stateChanged")},select:function(){this.layoutManager.selectedItem!==this&&(this.layoutManager.selectItem(this,!0),this.element.addClass("lm_selected"))},deselect:function(){this.layoutManager.selectedItem===this&&(this.layoutManager.selectedItem=null,this.element.removeClass("lm_selected"))},setTitle:function(t){this.config.title=t,this.emit("titleChanged",t),this.emit("stateChanged")},hasId:function(t){return!!this.config.id&&("string"==typeof this.config.id?this.config.id===t:this.config.id instanceof Array?-1!==a.utils.indexOf(t,this.config.id):void 0)},addId:function(t){this.hasId(t)||(this.config.id?"string"==typeof this.config.id?this.config.id=[this.config.id,t]:this.config.id instanceof Array&&this.config.id.push(t):this.config.id=t)},removeId:function(t){if(!this.hasId(t))throw new Error("Id not found");if("string"==typeof this.config.id)delete this.config.id;else if(this.config.id instanceof Array){var e=a.utils.indexOf(t,this.config.id);this.config.id.splice(e,1)}},getItemsByFilter:function(t){var e=[],n=function(r){for(var i=0;i<r.contentItems.length;i++)!0===t(r.contentItems[i])&&e.push(r.contentItems[i]),n(r.contentItems[i])};return n(this),e},getItemsById:function(t){return this.getItemsByFilter(function(e){return e.config.id instanceof Array?-1!==a.utils.indexOf(t,e.config.id):e.config.id===t})},getItemsByType:function(t){return this._$getItemsByProperty("type",t)},getComponentsByName:function(t){var e,n=this._$getItemsByProperty("componentName",t),r=[];for(e=0;e<n.length;e++)r.push(n[e].instance);return r},_$getItemsByProperty:function(t,e){return this.getItemsByFilter(function(n){return n[t]===e})},_$setParent:function(t){this.parent=t},_$highlightDropZone:function(t,e,n){this.layoutManager.dropTargetIndicator.highlightArea(n)},_$onDrop:function(t){this.addChild(t)},_$hide:function(){this._callOnActiveComponents("hide"),this.element.hide(),this.layoutManager.updateSize()},_$show:function(){this._callOnActiveComponents("show"),this.element.show(),this.layoutManager.updateSize()},_callOnActiveComponents:function(t){var e,n,r=this.getItemsByType("stack");for(n=0;n<r.length;n++)(e=r[n].getActiveContentItem())&&e.isComponent&&e.container[t]()},_$destroy:function(){this.emitBubblingEvent("beforeItemDestroyed"),this.callDownwards("_$destroy",[],!0,!0),this.element.remove(),this.emitBubblingEvent("itemDestroyed")},_$getArea:function(t){var e=(t=t||this.element).offset(),n=t.width(),r=t.height();return{x1:e.left,y1:e.top,x2:e.left+n,y2:e.top+r,surface:n*r,contentItem:this}},_$init:function(){var t;for(this.setSize(),t=0;t<this.contentItems.length;t++)this.childElementContainer.append(this.contentItems[t].element);this.isInitialised=!0,this.emitBubblingEvent("itemCreated"),this.emitBubblingEvent(this.type+"Created")},emitBubblingEvent:function(t){var e=new a.utils.BubblingEvent(t,this);this.emit(t,e)},_createContentItems:function(t){var e,n;if(!(t.content instanceof Array))throw new a.errors.ConfigurationError("content must be an Array",t);for(n=0;n<t.content.length;n++)e=this.layoutManager.createContentItem(t.content[n],this),this.contentItems.push(e)},_extendItemNode:function(t){for(var e in a.config.itemDefaultConfig)void 0===t[e]&&(t[e]=a.config.itemDefaultConfig[e]);return t},_propagateEvent:function(t,e){e instanceof a.utils.BubblingEvent&&!1===e.isPropagationStopped&&!0===this.isInitialised&&(!1===this.isRoot&&this.parent?this.parent.emit.apply(this.parent,Array.prototype.slice.call(arguments,0)):this._scheduleEventPropagationToLayoutManager(t,e))},_scheduleEventPropagationToLayoutManager:function(t,e){-1===a.utils.indexOf(t,this._throttledEvents)?this.layoutManager.emit(t,e.origin):!0!==this._pendingEventPropagations[t]&&(this._pendingEventPropagations[t]=!0,a.utils.animFrame(a.utils.fnBind(this._propagateEventToLayoutManager,this,[t,e])))},_propagateEventToLayoutManager:function(t,e){this._pendingEventPropagations[t]=!1,this.layoutManager.emit(t,e)}}),a.items.Component=function(t,e,n){a.items.AbstractContentItem.call(this,t,e,n);var r=t.getComponent(this.config.componentName),i=o.extend(!0,{},this.config.componentState||{});i.componentName=this.config.componentName,this.componentName=this.config.componentName,""===this.config.title&&(this.config.title=this.config.componentName),this.isComponent=!0,this.container=new a.container.ItemContainer(this.config,this,t),this.instance=new r(this.container,i),this.element=this.container._element},a.utils.extend(a.items.Component,a.items.AbstractContentItem),a.utils.copy(a.items.Component.prototype,{close:function(){this.parent.removeChild(this)},setSize:function(){this.element.is(":visible")&&this.container._$setSize(this.element.width(),this.element.height())},_$init:function(){a.items.AbstractContentItem.prototype._$init.call(this),this.container.emit("open")},_$hide:function(){this.container.hide(),a.items.AbstractContentItem.prototype._$hide.call(this)},_$show:function(){this.container.show(),a.items.AbstractContentItem.prototype._$show.call(this)},_$shown:function(){this.container.shown(),a.items.AbstractContentItem.prototype._$shown.call(this)},_$destroy:function(){this.container.emit("destroy",this),a.items.AbstractContentItem.prototype._$destroy.call(this)},_$getArea:function(){return null}}),a.items.Root=function(t,e,n){a.items.AbstractContentItem.call(this,t,e,null),this.isRoot=!0,this.type="root",this.element=o('<div class="lm_goldenlayout lm_item lm_root"></div>'),this.childElementContainer=this.element,this._containerElement=n,this._containerElement.append(this.element)},a.utils.extend(a.items.Root,a.items.AbstractContentItem),a.utils.copy(a.items.Root.prototype,{addChild:function(t){if(this.contentItems.length>0)throw new Error("Root node can only have a single child");t=this.layoutManager._$normalizeContentItem(t,this),this.childElementContainer.append(t.element),a.items.AbstractContentItem.prototype.addChild.call(this,t),this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(t,e){t=void 0===t?this._containerElement.width():t,e=void 0===e?this._containerElement.height():e,this.element.width(t),this.element.height(e),this.contentItems[0]&&(this.contentItems[0].element.width(t),this.contentItems[0].element.height(e))},_$highlightDropZone:function(t,e,n){this.layoutManager.tabDropPlaceholder.remove(),a.items.AbstractContentItem.prototype._$highlightDropZone.apply(this,arguments)},_$onDrop:function(t,e){var n;if(t.isComponent&&((n=this.layoutManager.createContentItem({type:"stack",header:t.config.header||{}},this))._$init(),n.addChild(t),t=n),this.contentItems.length){var r="x"==e.side[0]?"row":"column",i="x"==e.side[0]?"width":"height",o="2"==e.side[1],s=this.contentItems[0];if(!s instanceof a.items.RowOrColumn||s.type!=r){var l=this.layoutManager.createContentItem({type:r},this);this.replaceChild(s,l),l.addChild(t,o?0:void 0,!0),l.addChild(s,o?void 0:0,!0),s.config[i]=50,t.config[i]=50,l.callDownwards("setSize")}else{var c=s.contentItems[o?0:s.contentItems.length-1];s.addChild(t,o?0:void 0,!0),c.config[i]*=.5,t.config[i]=c.config[i],s.callDownwards("setSize")}}else this.addChild(t)}}),a.items.RowOrColumn=function(t,e,n,r){a.items.AbstractContentItem.call(this,e,n,r),this.isRow=!t,this.isColumn=t,this.element=o('<div class="lm_item lm_'+(t?"column":"row")+'"></div>'),this.childElementContainer=this.element,this._splitterSize=e.config.dimensions.borderWidth,this._splitterGrabSize=e.config.dimensions.borderGrabWidth,this._isColumn=t,this._dimension=t?"height":"width",this._splitter=[],this._splitterPosition=null,this._splitterMinPosition=null,this._splitterMaxPosition=null},a.utils.extend(a.items.RowOrColumn,a.items.AbstractContentItem),a.utils.copy(a.items.RowOrColumn.prototype,{addChild:function(t,e,n){var r,i,o,s;if(t=this.layoutManager._$normalizeContentItem(t,this),void 0===e&&(e=this.contentItems.length),this.contentItems.length>0?(s=this._createSplitter(Math.max(0,e-1)).element,e>0?(this.contentItems[e-1].element.after(s),s.after(t.element)):(this.contentItems[0].element.before(s),s.before(t.element))):this.childElementContainer.append(t.element),a.items.AbstractContentItem.prototype.addChild.call(this,t,e),r=1/this.contentItems.length*100,!0!==n){for(o=0;o<this.contentItems.length;o++)this.contentItems[o]===t?t.config[this._dimension]=r:(i=this.contentItems[o].config[this._dimension]*=(100-r)/100,this.contentItems[o].config[this._dimension]=i);this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")}else this.emitBubblingEvent("stateChanged")},removeChild:function(t,e){var n,r,i=t.config[this._dimension],o=a.utils.indexOf(t,this.contentItems),s=Math.max(o-1,0);if(-1===o)throw new Error("Can't remove child. ContentItem is not child of this Row or Column");for(this._splitter[s]&&(this._splitter[s]._$destroy(),this._splitter.splice(s,1)),n=0;n<this.contentItems.length;n++)this.contentItems[n]!==t&&(this.contentItems[n].config[this._dimension]+=i/(this.contentItems.length-1));a.items.AbstractContentItem.prototype.removeChild.call(this,t,e),1===this.contentItems.length&&!0===this.config.isClosable?(r=this.contentItems[0],this.contentItems=[],this.parent.replaceChild(this,r,!0)):(this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged"))},replaceChild:function(t,e){var n=t.config[this._dimension];a.items.AbstractContentItem.prototype.replaceChild.call(this,t,e),e.config[this._dimension]=n,this.callDownwards("setSize"),this.emitBubblingEvent("stateChanged")},setSize:function(){this.contentItems.length>0&&(this._calculateRelativeSizes(),this._setAbsoluteSizes()),this.emitBubblingEvent("stateChanged"),this.emit("resize")},_$init:function(){var t;if(!0!==this.isInitialised)for(a.items.AbstractContentItem.prototype._$init.call(this),t=0;t<this.contentItems.length-1;t++)this.contentItems[t].element.after(this._createSplitter(t).element)},_setAbsoluteSizes:function(){var t,e=this._calculateAbsoluteSizes();for(t=0;t<this.contentItems.length;t++)e.additionalPixel-t>0&&e.itemSizes[t]++,this._isColumn?(this.contentItems[t].element.width(e.totalWidth),this.contentItems[t].element.height(e.itemSizes[t])):(this.contentItems[t].element.width(e.itemSizes[t]),this.contentItems[t].element.height(e.totalHeight))},_calculateAbsoluteSizes:function(){var t,e,n=(this.contentItems.length-1)*this._splitterSize,r=this.element.width(),i=this.element.height(),o=0,a=[];for(this._isColumn?i-=n:r-=n,t=0;t<this.contentItems.length;t++)o+=e=this._isColumn?Math.floor(i*(this.contentItems[t].config.height/100)):Math.floor(r*(this.contentItems[t].config.width/100)),a.push(e);return{itemSizes:a,additionalPixel:Math.floor((this._isColumn?i:r)-o),totalWidth:r,totalHeight:i}},_calculateRelativeSizes:function(){var t,e=0,n=[],r=this._isColumn?"height":"width";for(t=0;t<this.contentItems.length;t++)void 0!==this.contentItems[t].config[r]?e+=this.contentItems[t].config[r]:n.push(this.contentItems[t]);if(100!==Math.round(e))if(Math.round(e)<100&&n.length>0){for(t=0;t<n.length;t++)n[t].config[r]=(100-e)/n.length;this._respectMinItemWidth()}else{if(Math.round(e)>100)for(t=0;t<n.length;t++)n[t].config[r]=50,e+=50;for(t=0;t<this.contentItems.length;t++)this.contentItems[t].config[r]=this.contentItems[t].config[r]/e*100;this._respectMinItemWidth()}else this._respectMinItemWidth()},_respectMinItemWidth:function(){var t,e,n,r,i=this.layoutManager.config.dimensions&&this.layoutManager.config.dimensions.minItemWidth||0,o=[],a=0,s=0,l=0,c=0,u=[];if(!(this._isColumn||!i||this.contentItems.length<=1)){t=this._calculateAbsoluteSizes();for(var d=0;d<this.contentItems.length;d++)this.contentItems[d],(c=t.itemSizes[d])<i?(s+=i-c,r={width:i}):(a+=c-i,r={width:c},o.push(r)),u.push(r);if(!(0===s||s>a)){for(e=s/a,l=s,d=0;d<o.length;d++)r=o[d],l-=n=Math.round((r.width-i)*e),r.width-=n;for(0!==l&&(u[u.length-1].width-=l),d=0;d<this.contentItems.length;d++)this.contentItems[d].config.width=u[d].width/t.totalWidth*100}}},_createSplitter:function(t){var e;return(e=new a.controls.Splitter(this._isColumn,this._splitterSize,this._splitterGrabSize)).on("drag",a.utils.fnBind(this._onSplitterDrag,this,[e]),this),e.on("dragStop",a.utils.fnBind(this._onSplitterDragStop,this,[e]),this),e.on("dragStart",a.utils.fnBind(this._onSplitterDragStart,this,[e]),this),this._splitter.splice(t,0,e),e},_getItemsForSplitter:function(t){var e=a.utils.indexOf(t,this._splitter);return{before:this.contentItems[e],after:this.contentItems[e+1]}},_getMinimumDimensions:function(t){for(var e=0,n=0,r=0;r<t.length;++r)e=Math.max(t[r].minWidth||0,e),n=Math.max(t[r].minHeight||0,n);return{horizontal:e,vertical:n}},_onSplitterDragStart:function(t){var e=this._getItemsForSplitter(t),n=this.layoutManager.config.dimensions[this._isColumn?"minItemHeight":"minItemWidth"],r=this._getMinimumDimensions(e.before.config.content),i=this._isColumn?r.vertical:r.horizontal,o=this._getMinimumDimensions(e.after.config.content),a=this._isColumn?o.vertical:o.horizontal;this._splitterPosition=0,this._splitterMinPosition=-1*(e.before.element[this._dimension]()-(i||n)),this._splitterMaxPosition=e.after.element[this._dimension]()-(a||n)},_onSplitterDrag:function(t,e,n){var r=this._isColumn?n:e;r>this._splitterMinPosition&&r<this._splitterMaxPosition&&(this._splitterPosition=r,t.element.css(this._isColumn?"top":"left",r))},_onSplitterDragStop:function(t){var e=this._getItemsForSplitter(t),n=e.before.element[this._dimension](),r=e.after.element[this._dimension](),i=(this._splitterPosition+n)/(n+r),o=e.before.config[this._dimension]+e.after.config[this._dimension];e.before.config[this._dimension]=i*o,e.after.config[this._dimension]=(1-i)*o,t.element.css({top:0,left:0}),a.utils.animFrame(a.utils.fnBind(this.callDownwards,this,["setSize"]))}}),a.items.Stack=function(t,e,n){a.items.AbstractContentItem.call(this,t,e,n),this.element=o('<div class="lm_item lm_stack"></div>'),this._activeContentItem=null;var r=t.config;this._header={show:!0===r.settings.hasHeaders&&!1!==e.hasHeaders,popout:r.settings.showPopoutIcon&&r.labels.popout,maximise:r.settings.showMaximiseIcon&&r.labels.maximise,close:r.settings.showCloseIcon&&r.labels.close,minimise:r.labels.minimise},r.header&&a.utils.copy(this._header,r.header),e.header&&a.utils.copy(this._header,e.header),e.content&&e.content[0]&&e.content[0].header&&a.utils.copy(this._header,e.content[0].header),this._dropZones={},this._dropSegment=null,this._contentAreaDimensions=null,this._dropIndex=null,this.isStack=!0,this.childElementContainer=o('<div class="lm_items"></div>'),this.header=new a.controls.Header(t,this),this.element.append(this.header.element),this.element.append(this.childElementContainer),this._setupHeaderPosition(),this._$validateClosability()},a.utils.extend(a.items.Stack,a.items.AbstractContentItem),a.utils.copy(a.items.Stack.prototype,{setSize:function(){var t,e=this._header.show?this.layoutManager.config.dimensions.headerHeight:0,n=this.element.width()-(this._sided?e:0),r=this.element.height()-(this._sided?0:e);for(this.childElementContainer.width(n),this.childElementContainer.height(r),t=0;t<this.contentItems.length;t++)this.contentItems[t].element.width(n).height(r);this.emit("resize"),this.emitBubblingEvent("stateChanged")},_$init:function(){var t,e;if(!0!==this.isInitialised){for(a.items.AbstractContentItem.prototype._$init.call(this),t=0;t<this.contentItems.length;t++)this.header.createTab(this.contentItems[t]),this.contentItems[t]._$hide();if(this.contentItems.length>0){if(!(e=this.contentItems[this.config.activeItemIndex||0]))throw new Error("Configured activeItemIndex out of bounds");this.setActiveContentItem(e)}}},setActiveContentItem:function(t){if(-1===a.utils.indexOf(t,this.contentItems))throw new Error("contentItem is not a child of this stack");null!==this._activeContentItem&&this._activeContentItem._$hide(),this._activeContentItem=t,this.header.setActiveContentItem(t),t._$show(),this.emit("activeContentItemChanged",t),this.layoutManager.emit("activeContentItemChanged",t),this.emitBubblingEvent("stateChanged")},getActiveContentItem:function(){return this.header.activeContentItem},addChild:function(t,e){t=this.layoutManager._$normalizeContentItem(t,this),a.items.AbstractContentItem.prototype.addChild.call(this,t,e),this.childElementContainer.append(t.element),this.header.createTab(t,e),this.setActiveContentItem(t),this.callDownwards("setSize"),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},removeChild:function(t,e){var n=a.utils.indexOf(t,this.contentItems);a.items.AbstractContentItem.prototype.removeChild.call(this,t,e),this.header.removeTab(t),this.header.activeContentItem===t&&(this.contentItems.length>0?this.setActiveContentItem(this.contentItems[Math.max(n-1,0)]):this._activeContentItem=null),this._$validateClosability(),this.emitBubblingEvent("stateChanged")},_$validateClosability:function(){var t,e,n;for(t=this.header._isClosable(),n=0,e=this.contentItems.length;n<e&&t;n++)t=this.contentItems[n].config.isClosable;this.header._$setClosable(t)},_$destroy:function(){a.items.AbstractContentItem.prototype._$destroy.call(this),this.header._$destroy()},_$onDrop:function(t){if("header"===this._dropSegment)return this._resetHeaderDropZone(),void this.addChild(t,this._dropIndex);if("body"!==this._dropSegment){var e,n,r,i="top"===this._dropSegment||"bottom"===this._dropSegment,o="left"===this._dropSegment||"right"===this._dropSegment,s="top"===this._dropSegment||"left"===this._dropSegment,l=i&&this.parent.isColumn||o&&this.parent.isRow,c=i?"column":"row",u=i?"height":"width";t.isComponent&&((n=this.layoutManager.createContentItem({type:"stack",header:t.config.header||{}},this))._$init(),n.addChild(t),t=n),l?(e=a.utils.indexOf(this,this.parent.contentItems),this.parent.addChild(t,s?e:e+1,!0),this.config[u]*=.5,t.config[u]=this.config[u],this.parent.callDownwards("setSize")):(c=i?"column":"row",r=this.layoutManager.createContentItem({type:c},this),this.parent.replaceChild(this,r),r.addChild(t,s?0:void 0,!0),r.addChild(this,s?void 0:0,!0),this.config[u]=50,t.config[u]=50,r.callDownwards("setSize"))}else this.addChild(t)},_$highlightDropZone:function(t,e){var n,r;for(n in this._contentAreaDimensions)if((r=this._contentAreaDimensions[n].hoverArea).x1<t&&r.x2>t&&r.y1<e&&r.y2>e)return void("header"===n?(this._dropSegment="header",this._highlightHeaderDropZone(this._sided?e:t)):(this._resetHeaderDropZone(),this._highlightBodyDropZone(n)))},_$getArea:function(){if(!1===this.element.is(":visible"))return null;var t=a.items.AbstractContentItem.prototype._$getArea,e=t.call(this,this.header.element),n=t.call(this,this.childElementContainer),r=n.x2-n.x1,i=n.y2-n.y1;return this._contentAreaDimensions={header:{hoverArea:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},highlightArea:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}},this._activeContentItem&&!1===this._activeContentItem.isComponent?e:0===this.contentItems.length?(this._contentAreaDimensions.body={hoverArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2}},t.call(this,this.element)):(this._contentAreaDimensions.left={hoverArea:{x1:n.x1,y1:n.y1,x2:n.x1+.25*r,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x1+.5*r,y2:n.y2}},this._contentAreaDimensions.top={hoverArea:{x1:n.x1+.25*r,y1:n.y1,x2:n.x1+.75*r,y2:n.y1+.5*i},highlightArea:{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y1+.5*i}},this._contentAreaDimensions.right={hoverArea:{x1:n.x1+.75*r,y1:n.y1,x2:n.x2,y2:n.y2},highlightArea:{x1:n.x1+.5*r,y1:n.y1,x2:n.x2,y2:n.y2}},this._contentAreaDimensions.bottom={hoverArea:{x1:n.x1+.25*r,y1:n.y1+.5*i,x2:n.x1+.75*r,y2:n.y2},highlightArea:{x1:n.x1,y1:n.y1+.5*i,x2:n.x2,y2:n.y2}},t.call(this,this.element))},_highlightHeaderDropZone:function(t){var e,n,r,i,o,a,s,l,c=this.header.tabs.length,u=!1;if(0===c)return s=this.header.element.offset(),void this.layoutManager.dropTargetIndicator.highlightArea({x1:s.left,x2:s.left+100,y1:s.top+this.header.element.height()-20,y2:s.top+this.header.element.height()});for(e=0;e<c;e++)if(o=(n=this.header.tabs[e].element).offset(),this._sided?(i=o.top,r=o.left,l=n.height()):(i=o.left,r=o.top,l=n.width()),t>i&&t<i+l){u=!0;break}if(!(!1===u&&t<i)){if(t<i+l/2?(this._dropIndex=e,n.before(this.layoutManager.tabDropPlaceholder)):(this._dropIndex=Math.min(e+1,c),n.after(this.layoutManager.tabDropPlaceholder)),this._sided)return placeHolderTop=this.layoutManager.tabDropPlaceholder.offset().top,void this.layoutManager.dropTargetIndicator.highlightArea({x1:r,x2:r+n.innerHeight(),y1:placeHolderTop,y2:placeHolderTop+this.layoutManager.tabDropPlaceholder.width()});a=this.layoutManager.tabDropPlaceholder.offset().left,this.layoutManager.dropTargetIndicator.highlightArea({x1:a,x2:a+this.layoutManager.tabDropPlaceholder.width(),y1:r,y2:r+n.innerHeight()})}},_resetHeaderDropZone:function(){this.layoutManager.tabDropPlaceholder.remove()},_setupHeaderPosition:function(){var t=["right","left","bottom"].indexOf(this._header.show)>=0&&this._header.show;if(this.header.element.toggle(!!this._header.show),this._side=t,this._sided=["right","left"].indexOf(this._side)>=0,this.element.removeClass("lm_left lm_right lm_bottom"),this._side&&this.element.addClass("lm_"+this._side),this.element.find(".lm_header").length&&this.childElementContainer){var e=["right","bottom"].indexOf(this._side)>=0?"before":"after";this.header.element[e](this.childElementContainer),this.callDownwards("setSize")}},_highlightBodyDropZone:function(t){var e=this._contentAreaDimensions[t].highlightArea;this.layoutManager.dropTargetIndicator.highlightArea(e),this._dropSegment=t}}),a.utils.BubblingEvent=function(t,e){this.name=t,this.origin=e,this.isPropagationStopped=!1},a.utils.BubblingEvent.prototype.stopPropagation=function(){this.isPropagationStopped=!0},a.utils.ConfigMinifier=function(){if(this._keys=["settings","hasHeaders","constrainDragToContainer","selectionEnabled","dimensions","borderWidth","minItemHeight","minItemWidth","headerHeight","dragProxyWidth","dragProxyHeight","labels","close","maximise","minimise","popout","content","componentName","componentState","id","width","type","height","isClosable","title","popoutWholeStack","openPopouts","parentId","activeItemIndex","reorderEnabled","borderGrabWidth"],this._keys.length>36)throw new Error("Too many keys in config minifier map");this._values=[!0,!1,"row","column","stack","component","close","maximise","minimise","open in new window"]},a.utils.copy(a.utils.ConfigMinifier.prototype,{minifyConfig:function(t){var e={};return this._nextLevel(t,e,"_min"),e},unminifyConfig:function(t){var e={};return this._nextLevel(t,e,"_max"),e},_nextLevel:function(t,e,n){var r,i;for(r in t)t instanceof Array&&(r=parseInt(r,10)),t.hasOwnProperty(r)&&(i=this[n](r,this._keys),"object"==typeof t[r]?(e[i]=t[r]instanceof Array?[]:{},this._nextLevel(t[r],e[i],n)):e[i]=this[n](t[r],this._values))},_min:function(t,e){if("string"==typeof t&&1===t.length)return"___"+t;var n=a.utils.indexOf(t,e);return-1===n?t:n.toString(36)},_max:function(t,e){return"string"==typeof t&&1===t.length?e[parseInt(t,36)]:"string"==typeof t&&"___"===t.substr(0,3)?t[3]:t}}),a.utils.EventHub=function(t){a.utils.EventEmitter.call(this),this._layoutManager=t,this._dontPropagateToParent=null,this._childEventSource=null,this.on(a.utils.EventEmitter.ALL_EVENT,a.utils.fnBind(this._onEventFromThis,this)),this._boundOnEventFromChild=a.utils.fnBind(this._onEventFromChild,this),o(window).on("gl_child_event",this._boundOnEventFromChild)},a.utils.EventHub.prototype._onEventFromThis=function(){var t=Array.prototype.slice.call(arguments);this._layoutManager.isSubWindow&&t[0]!==this._dontPropagateToParent&&this._propagateToParent(t),this._propagateToChildren(t),this._dontPropagateToParent=null,this._childEventSource=null},a.utils.EventHub.prototype._$onEventFromParent=function(t){this._dontPropagateToParent=t[0],this.emit.apply(this,t)},a.utils.EventHub.prototype._onEventFromChild=function(t){this._childEventSource=t.originalEvent.__gl,this.emit.apply(this,t.originalEvent.__glArgs)},a.utils.EventHub.prototype._propagateToParent=function(t){var e;document.createEvent?(e=window.opener.document.createEvent("HTMLEvents")).initEvent("gl_child_event",!0,!0):(e=window.opener.document.createEventObject()).eventType="gl_child_event",e.eventName="gl_child_event",e.__glArgs=t,e.__gl=this._layoutManager,document.createEvent?window.opener.dispatchEvent(e):window.opener.fireEvent("on"+e.eventType,e)},a.utils.EventHub.prototype._propagateToChildren=function(t){var e,n;for(n=0;n<this._layoutManager.openPopouts.length;n++)(e=this._layoutManager.openPopouts[n].getGlInstance())&&e!==this._childEventSource&&e.eventHub._$onEventFromParent(t)},a.utils.EventHub.prototype.destroy=function(){o(window).off("gl_child_event",this._boundOnEventFromChild)},a.utils.ReactComponentHandler=function(t,e){this._reactComponent=null,this._originalComponentWillUpdate=null,this._container=t,this._initialState=e,this._reactClass=this._getReactClass(),this._container.on("open",this._render,this),this._container.on("destroy",this._destroy,this)},a.utils.copy(a.utils.ReactComponentHandler.prototype,{_render:function(){this._reactComponent=ReactDOM.render(this._getReactComponent(),this._container.getElement()[0]),this._originalComponentWillUpdate=this._reactComponent.componentWillUpdate||function(){},this._reactComponent.componentWillUpdate=this._onUpdate.bind(this),this._container.getState()&&this._reactComponent.setState(this._container.getState())},_destroy:function(){ReactDOM.unmountComponentAtNode(this._container.getElement()[0]),this._container.off("open",this._render,this),this._container.off("destroy",this._destroy,this)},_onUpdate:function(t,e){this._container.setState(e),this._originalComponentWillUpdate.call(this._reactComponent,t,e)},_getReactClass:function(){var t,e=this._container._config.component;if(!e)throw new Error("No react component name. type: react-component needs a field `component`");if(!(t=this._container.layoutManager.getComponent(e)))throw new Error('React component "'+e+'" not found. Please register all components with GoldenLayout using `registerComponent(name, component)`');return t},_getReactComponent:function(){var t={glEventHub:this._container.layoutManager.eventHub,glContainer:this._container},e=o.extend(t,this._container._config.props);return React.createElement(this._reactClass,e)}})}(window.$)},function(t,e){t.exports={}},function(t,e,n){var r=n(165),i=128;t.exports=function(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,r(t,i,void 0,void 0,void 0,void 0,e)}},function(t,e){t.exports=function(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(2435)),r(n(2436)),r(n(991))},function(t,e,n){var r=n(2439)();t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(30),o=n(151),a=n(85),s=n(72),l=n(24),c=n(135),u=n(580),d=n(577),f=function(){function t(){}return t.clone=function(t){return t.with({store:t.store.with({id:s.uuid.generate()})})},t.getExportFormats=function(t){var e;if(t.source.type===d.SourceType.FILE)return null;var n=l.DataSourceManager.getDataSourcesById(t.source.id).first(),s=n.keywordConfig.getIn(["timelapse","export","exclude"],r.Map()),f=n.keywordConfig.getIn(["timelapse","export","include"],r.Map()).reduce(function(t,e,n){return c.StoreConfigs[n]&&(t[n]=c.StoreConfigs[n]),t},{}),p=u.RequestBuilderManager.getBuilder(t.dataFilter.requestType),h=a(p.getExportFormats(),function(t,e){return!1===e.requiresGeomesaFormatOptions&&(t[e.name]=e),t},{});return o(i(i(((e={})[t.store.type]=c.StoreConfigs[t.store.type],e),h),f),s.keySeq().toJS())},t}();e.DataViewHelper=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(17),o=n(4),a=n(30),s=n(151),l=n(46),c=n(14),u=n(55),d=n(57),f=n(74),p=n(277),h=n(270),g=n(998),m=n(564),v=n(194),y=n(603),b=n(1057),w=n(1058),_=n(625),x=function(){function t(){}return t.filter=function(e){var n,r=e.event,o=r.canvasLayer,a=e.records,s=o.store.boundStartMillis(r.boundedStartTimeMillis),l=o.store.boundEndMillis(r.boundedEndTimeMillis);return n=i(a)?g.SearchHelper.sortAndTrimFeatures(r.coord,a,r.clickOverrides):g.SearchHelper.sortAndTrimFeatures(r.coord,a.features,r.clickOverrides),t.buildPopupResult(o,n,s,l)},t.buildPopupResult=function(t,e,n,i){var g=e=o(e,function(t){var e;return e=t instanceof r.Feature?t.getProperties():t.properties,s(e,"geometry")}),x={name:t.getState().name,isError:!1,records:g,getLayerLegendStyle:function(){return t.getState().displayStatus.colorMode!==p.ColorModes.COLOR_BY_ID?{color:t.getState().displayStatus.fillColorHexString}:{display:"none"}},metadata:o(e,function(t){return{source:t,startMillis:n,endMillis:i}}),isFilterable:!1};if(t.getState().dataView.source.type===v.SourceType.SERVER){var S=m.DataSourceManager.getDataSourcesById(t.getState().dataView.source.id).first();if(S)return h.KeywordHelper.getFeatureProperties(S).then(function(e){var n,r=S.keywordConfig.getIn(["click","search","customPopup"]),i=S.keywordConfig.get("capability");return c(i)||(n=b.CapabilityExtendomatic.getInstance().extendCapabilities(i.toJS())),x=a(x,{capabilities:n||{},fieldTypes:e,isFilterable:!0,dataSource:S,filterHandler:function(e,n){var r,i=e+"="+(l(n)?"'"+n+"'":n),o=t.getState().name+"("+i+")",a=y.DataViewHelper.clone(t.getState().dataView);r=a.dataFilter.additionalCql?new f.RawClauseRecord({cql:f.CqlBuilder.combine(f.CqlOperator.AND,i)}):new f.RawClauseRecord({cql:i}),a=a.with({dataFilter:a.dataFilter.with({additionalCql:r})}),w.RecordHelper.buildDefaultCanvasLayerState(a,o,_.BASIC_TL_SERVER_INTERACTION)},popupOptionsOverrides:r?r.toJS():void 0},h.KeywordHelper.formatFromKeywords(S.keywordConfig))});var C="Failed to find source with id: "+t.getState().dataView.source.id;return u.alerter.errorMsg("Could not display popup: error loading source."),d.log.error(C),Promise.reject(C)}return Promise.resolve(x)},t}();e.PopupFilter=x},,,,,,,,,,,,,,,,,,,,function(t,e){var n="Expected a function";t.exports=function(t){if("function"!=typeof t)throw new TypeError(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(325),o=n(2890),a=n(2912),s=n(2913);e.BASIC_TL_SERVER_INTERACTION="BasicTLServer",e.BASIC_TL_LOCAL_INTERACTION="BasicTLLocal";var l=function(){return function(){var t=this;this.defaultWizardOptions={runOnCompletion:!0,editMode:!1,isSaveable:!1,type:"time-lapse"},this.$get=["stealth.geo.wizard.AreaStep","stealth.geo.wizard.OptionsStep","stealth.geo.wizard.SourceTimeStep","stealth.wizard.WizardRunner","stealth.geo.timelapse.manager.Manager","stealth.geo.timelapse.wizard.WizardUtils",function(t,e,n,r,i,o){return new a.GeoTimelapseWizard(t,e,n,r,i,this.defaultWizardOptions,o)}],this.setDefaultOption=function(e,n){t.defaultWizardOptions[e]=n}}}();e.TimelapseWizardProvider=l;var c=function(){return function(){this.$get=[function(){return new s.WizardUtils}]}}();e.WizardUtilsProvider=c,e.default=r.module("stealth.geo.timelapse.wizard",[o.default,"stealth.wizard"]).provider("stealth.geo.timelapse.wizard.TimelapseWizard",l).provider("stealth.geo.timelapse.wizard.WizardUtils",c).factory("stealth.geo.timelapse.wizard.events",function(){return new i.EventEmitter}).run(["startMenuManager","stealth.geo.timelapse.wizard.events","stealth.geo.timelapse.wizard.TimelapseWizard",function(t,e,n){t.addButton("Time-lapse Query","fa-history",function(){n.launchWizard()},"timeenabled",120),e.on("launch",function(t,e){n.launchWizard(t,e)})}]).name},function(t,e,n){t.exports=n(1064)},function(t,e,n){var r=n(1066),i=n(44);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(919),i=n(17);t.exports=function(t,e,n,o){return null==t?[]:(i(e)||(e=null==e?[]:[e]),i(n=o?void 0:n)||(n=null==n?[]:[n]),r(t,e,n))}},function(t,e,n){var r=n(163),i=n(51),o=n(2946),a=n(1072),s=i(function(t){return t.push(void 0,o),r(a,void 0,t)});t.exports=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(39),o=n(6),a=n(348),s=n(1088),l=n(3010),c=n(3011),u=function(t){function e(e,n,r){var o=t.call(this,e,n,r)||this;return o.typeName="WIKIPEDIA",o.titleWidget=new i.WidgetDef({tag:"stealth-search-wikipedia-title",scope:n.scope}),o.contentWidget=new i.WidgetDef({tag:"stealth-search-wikipedia-content",scope:n.scope}),o.collapsedWidget=null,o}return r(e,t),e}(a.ResultTypeWidgetCfg);e.WikipediaResultTypeWidgetCfg=u;var d=function(){return function(t,e){t.record.thumbnail=e.composeThumbnailUrl(new o.Feature(t.record))}}();e.WikipediaResultTitleCtrl=d,e.titleDirective=function(t){return{restrict:"EA",template:l,controller:["$scope",s.partialRight(d,s.partialRight.placeholder,t)]}},e.titleDirective.$inject=["stealth.dragonfish.utils.sidebarService"],e.contentDirective=function(){return{restrict:"EA",template:c}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(286),o=n(456),a=n(126),s=n(126),l=n(171),c=n(126),u=n(171),d=n(6),f=n(1090),p=n(3015),h=function(){return function(t,e){this.selected=!1,u.merge(this,t),e&&(this.id=l.get(t,e,this.id))}}();e.SearchResult=h;var g=function(t){function e(e,n,r,p,h,g,m){var v=t.call(this,p)||this;v.features=[],v.$rootScope=null,v.searchResultsManager=new i.InjectibleCnt("stealth.search.searchResultsManager"),v.FeatureLayerFactory=new i.InjectibleCnt("stealth.core.geo.ol3.layers.FeatureLayer"),v.VectorOverlayFactory=new i.InjectibleCnt("stealth.core.geo.ol3.overlays.Vector"),v.ol3Map=new i.InjectibleCnt("ol3Map"),v.loader=new i.InjectibleCnt("stealth.search.loader"),v.GeoJson=new i.InjectibleCnt("stealth.core.geo.ol3.format.GeoJson"),v.WidgetDef=new i.InjectibleCnt("ccri.angular-utils.WidgetDef"),v.parseGeom=function(t,e){var n,r=v;switch(v.loader.instance.loadClass(e.geometryFormat,[{}])){case f.GeometryFormat.GEOCODE_XYZ_JSON:if(!t.error){var i=parseFloat(t.longt);if(i>=-180&&i<=180){var o=parseFloat(t.latt);o>=-90&&o<=90&&(n=[new d.geom.Point([i,o])])}}break;case f.GeometryFormat.WKT:n=c.map(t,function(t){return r.wktFormat.readGeometry(t)});break;default:n=c.map(t,function(t){return r.geoJsonFormat.readGeometry(t)})}return n},v.decorateCard=function(t){var e,n;t.scope.record.dataSource?t.scope.record.dataSource.typeSelectionPath?(e=t.scope.record.dataSource.typeSelectionPath||"resultType",n=l.get(t.scope.record,e)||"default"):n=t.scope.record.dataSource.resultType?t.scope.record.dataSource.resultType:"default":n=t.scope.record.resultType||"default",t.id=t.scope.record.id,u.merge(t,v.searchResultsManager.instance.getWidgetsByResultType(n)(t,v.selectionManager))},v.menuResolver=function(t){var e=v,n=[];return n.splice(0,0,{name:"Zoom To Entity",onClick:function(){e.datastore.getById(t).then(function(t){e.ol3Map.instance.fit(a.find(e.features,function(e){return e.get("id")===t.id}).getGeometry())})}}),n},v.buttonOptions=[],v.filterResolver=function(t){var e=t.toLowerCase();return function(t){if(!t)return!1;if(!e)return!0;var n=!1;return s.forEach(l.get(t,t.dataSource.fieldPath,t),function(t,r){if(t.toLowerCase&&new RegExp(e).test(t.toLowerCase()))return n=!0,!1}),n}},v.highlightStyle=new d.style.Style({stroke:new d.style.Stroke({color:"red",width:2}),text:new d.style.Text({text:"",font:"normal 26px CcriIcon",textBaseline:"bottom",stroke:new d.style.Stroke({color:"red",width:1}),fill:new d.style.Fill({color:"rgba(255,255,255,0.8)"})}),image:new d.style.Circle({radius:5,fill:new d.style.Fill({color:"red"})})}),v.onMouseEnter=function(t){var e=a.find(v.features,function(e){return e.get("id")===t});e&&!e.highlightFeature&&(e.highlightFeature=e.clone(),v.entityHighlighter.addFeature(e.highlightFeature))},v.onMouseLeave=function(t){var e=a.find(v.features,function(e){return e.get("id")===t});e&&e.highlightFeature&&(v.entityHighlighter.removeFeature(e.highlightFeature),delete e.highlightFeature)};var y=v;if(h&&(v.menuResolver=h),g&&(v.onMouseEnter=g),m&&(v.onMouseLeave=m),v.registerInjectibles(),v.id=e,v.datastore=n,v.geoJsonFormat=new y.GeoJson.instance,v.wktFormat=new d.format.WKT,v.entityHighlighter=new v.VectorOverlayFactory.instance({styleBuilder:function(){return y.highlightStyle}}),v.entityHighlighter.addToMap(),v.searchResultsManager.instance.registerSearch(v),v.selectionManager=new o.SelectionManager,v.geoLayer=new v.FeatureLayerFactory.instance({name:e,features:v.features,iconClass:"fa-map-pin",styleDirective:"st-map-layer-style",viewState:{colorById:!1,showDeleted:!1}}),v.updateGeoLayer(),v.datastore.addChangeListener(function(){y.updateGeoLayer()}),r){var b=v.$rootScope.$new();b.searchId=v.id,v.toolbarWidget=new y.WidgetDef.instance({tag:r,scope:b,isolateScope:!0})}return v}return r(e,t),e.prototype.updateGeoLayer=function(){var t=this;this.datastore.read().then(function(e){e.forEach(function(e){var n=l.get(e,e.dataSource.fieldPath,e),r=l.get(e,e.dataSource.geometrySelectionPath,"");r&&!a.find(t.features,function(t){return t.get("id")===e.id})&&t.features.push(new d.Feature(u.merge(e,{name:l.get(e,e.dataSource.fieldPath+".name",e.id),geometry:t.parseGeom([r],e.dataSource)[0],color:l.get(n,"color","blue")})))}),t.geoLayer.getSource().clear(),t.geoLayer.getSource().addFeatures(t.features),t.features.length>0&&t.ol3Map.instance.fit(t.geoLayer.getExtent())})},e.prototype.destroy=function(){this.searchResultsManager.instance.removeLayerFromManager(this.geoLayer),this.entityHighlighter.removeFromMap()},e.prototype.setBtnId=function(t){this.btnId=t,this.searchResultsManager.instance.addLayerToManager(this.geoLayer,this.btnId)},e}(i.InjectibleLoader);e.SearchResultList=g,e.resultListDirective=function(){return{restrict:"E",template:p,scope:{searchResultList:"="}}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(286),o=n(126),a=function(t){function e(e,n){var r=t.call(this,n)||this,i=r;return o.each(e,function(t,e){"type"!==e&&(i[e]=t)}),r}return r(e,t),e}(i.InjectibleLoader);e.Action=a},,function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(3076),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(78))},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function i(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function o(t,e,n,r){var i=function(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}(t,r);t.forEach(function(t){var o=i[r.getSourceIndex(t)],a=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,a))})}function a(t,e,n){var r=[],i=0,o=[],a=[];function s(t){t.index=t.lowlink=i++,o.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var r=n[e];void 0===r.index?(s(r),t.lowlink=Math.min(t.lowlink,r.lowlink)):r.onStack&&(t.lowlink=Math.min(t.lowlink,r.index))}if(t.lowlink===t.index){for(var l=[];o.length&&((r=o.pop()).onStack=!1,l.push(r),r!==t););a.push(l.map(function(t){return t.id}))}}for(var l=0;l<t;l++)r.push({id:l,out:[]});for(var c=0,u=e;c<u.length;c++){var d=u[c],f=r[n.getSourceIndex(d)],p=r[n.getTargetIndex(d)];f.out.push(p)}for(var h=0,g=r;h<g.length;h++){var m=g[h];void 0===m.index&&s(m)}return a}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=function(t,e,n){void 0===n&&(n=1),o(t,n,function(t,e){return Math.sqrt(r(t,e)-i(t,e))},e)},e.jaccardLinkLengths=function(t,e,n){void 0===n&&(n=1),o(t,n,function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:i(t,e)/r(t,e)},e)},e.generateDirectedEdgeConstraints=function(t,e,n,r){var i={};a(t,e,r).forEach(function(t,e){return t.forEach(function(t){return i[t]=e})});var o=[];return e.forEach(function(t){var e=r.getSourceIndex(t),a=r.getTargetIndex(t);i[e]!==i[a]&&o.push({axis:n,left:e,right:a,gap:r.getMinSeparation(t)})}),o},e.stronglyConnectedComponents=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=r;var i=function(){function t(t,e,n){void 0===n&&(n=null),this.D=e,this.G=n,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new o,this.project=null,this.x=t,this.k=t.length;var i=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new r,this.minD=Number.MAX_VALUE;for(var a,s=i;s--;)for(a=i;--a>s;){var l=e[s][a];l>0&&l<this.minD&&(this.minD=l)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(i),this.H[s]=new Array(i),a=i;a--;)this.H[s][a]=new Array(i);this.Hd[s]=new Array(i),this.a[s]=new Array(i),this.b[s]=new Array(i),this.c[s]=new Array(i),this.d[s]=new Array(i),this.e[s]=new Array(i),this.ia[s]=new Array(i),this.ib[s]=new Array(i),this.xtmp[s]=new Array(i)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*(t.minD/n)})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,l=0;l<n;++l){for(r=0;r<this.k;++r)a[r]=this.g[r][l]=0;for(var c=0;c<n;++c)if(l!==c){for(var u=n;u--;){var d=0;for(r=0;r<this.k;++r){var f=i[r]=t[r][l]-t[r][c];d+=o[r]=f*f}if(d>1e-9)break;var p=this.offsetDir();for(r=0;r<this.k;++r)t[r][c]+=p[r]}var h=Math.sqrt(d),g=this.D[l][c],m=null!=this.G?this.G[l][c]:1;if(m>1&&h>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][l][c]=0;else{m>1&&(m=1);var v=g*g,y=2*m*(h-g)/(v*h),b=h*h*h,w=2*-m/(v*b);for(isFinite(y)||console.log(y),r=0;r<this.k;++r)this.g[r][l]+=i[r]*y,a[r]-=this.H[r][l][c]=w*(b+g*(o[r]-d)+h*d)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][l][l]=a[r])}var _=this.snapGridSize/2,x=this.snapGridSize,S=this.snapStrength/(_*_),C=this.numGridSnapNodes;for(l=0;l<C;++l)for(r=0;r<this.k;++r){var E=this.x[r][l],T=E/x,M=T%1,k=T-M;-_<(f=Math.abs(M)<=.5?E-k*x:E>0?E-(k+1)*x:E-(k-1)*x)&&f<=_&&(this.scaleSnapByMaxH?(this.g[r][l]+=s*S*f,this.H[r][l][l]+=s*S):(this.g[r][l]+=S*f,this.H[r][l][l]+=S))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=s,e.g[r][n]-=s*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][e]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var l=this.D[e][r];if(isFinite(l)){var c=l-o;t+=c*c/(l*l)}}return t},t.zeroDistance=1e-10,t}();e.Descent=i;var o=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=r;var i=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=i;var o=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();e.Variable=o;var a=function(){function t(t){this.vars=[],t.offset=0,this.ps=new r(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,o){var a=r.compute_lm(o,t,n);o===e.right?(i+=a*e.left.scale,e.lm=a):(i+=a*e.right.scale,e.lm=-a),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){e.push(t(r)),i.traverse(t,e,o,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,function(e,a){o||a!==n&&!i.findPath(a,t,n,r)||(o=!0,r(e,a))}),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();e.Block=a;var s=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new a(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<l.LAGRANGIAN_TOLERANCE&&(n=r.left.block,a.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();e.Blocks=s;var l=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new s(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var l=s.slack();if((s.equality||l<e)&&(e=l,n=s,o=a,s.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new s(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=l,e.removeOverlapInOneDimension=function(t,e,n){for(var r=t.map(function(t){return new o(t.desiredCenter)}),a=[],s=t.length,c=0;c<s-1;c++){var u=t[c],d=t[c+1];a.push(new i(r[c],r[c+1],(u.size+d.size)/2))}var f=r[0],p=r[s-1],h=t[0].size/2,g=t[s-1].size/2,m=null,v=null;return e&&(m=new o(e,1e3*f.weight),r.push(m),a.push(new i(m,f,h))),n&&(v=new o(n,1e3*p.weight),r.push(v),a.push(new i(p,v,g))),new l(r,a).solve(),{newCenters:r.slice(0,t.length).map(function(t){return t.position()}),lowerBound:m?m.position():f.position()-h,upperBound:v?v.position():p.position()+g}}},function(t,e,n){"use strict";var r=n(127);t.exports=s;var i="\0",o="\0",a="";function s(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[o]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function l(t,e){t[e]?t[e]++:t[e]=1}function c(t,e){--t[e]||delete t[e]}function u(t,e,n,o){var s=""+e,l=""+n;if(!t&&s>l){var c=s;s=l,l=c}return s+a+l+a+(r.isUndefined(o)?i:o)}function d(t,e){return u(t,e.v,e.w,e.name)}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(t){return this._label=t,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return r.keys(this._nodes)},s.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},s.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},s.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,function(t){n.length>1?i.setNode(t,e):i.setNode(t)}),this},s.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=o,this._children[t]={},this._children[o][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},s.prototype.node=function(t){return this._nodes[t]},s.prototype.hasNode=function(t){return r.has(this._nodes,t)},s.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},s.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=o;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},s.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},s.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==o)return e}},s.prototype.children=function(t){if(r.isUndefined(t)&&(t=o),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===o)return this.nodes();if(this.hasNode(t))return[]}},s.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},s.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},s.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},s.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},s.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var i={};return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,function t(r){var o=n.parent(r);return void 0===o||e.hasNode(o)?(i[r]=o,o):o in i?i[o]:t(o)}(t))}),e},s.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return r.values(this._edgeObjs)},s.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},s.prototype.setEdge=function(){var t,e,n,i,o=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var s=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,s))return o&&(this._edgeLabels[s]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=o?i:this._defaultEdgeLabelFn(t,e,n);var c=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};r&&(s.name=r);return s}(this._isDirected,t,e,n);return t=c.v,e=c.w,Object.freeze(c),this._edgeObjs[s]=c,l(this._preds[e],t),l(this._sucs[t],e),this._in[e][s]=c,this._out[t][s]=c,this._edgeCount++,this},s.prototype.edge=function(t,e,n){var r=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},s.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},s.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?d(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],c(this._preds[e],t),c(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},s.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.v===e}):i}},s.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.w===e}):i}},s.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){var i=void 0===n;if(i)return e=Object.create(null),t;if(e[n]){var o="function"!=typeof r;if(o)delete e[n];else for(var a=e[n],s=0;s<a.length;++s)a[s].callback===r&&a.splice(s,1)}return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var a=i[o];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},function(t,e){function n(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(r){return void 0!==r?(t[n]=r,e):t[n]}}}t.exports=function(t,e,r){if("[object Array]"===Object.prototype.toString.call(r))for(var i=0;i<r.length;++i)n(t,e,r[i]);else for(var o in t)n(t,e,o)}},function(t,e){t.exports=function t(e,n){var r;e||(e={});if(n)for(r in n)if(n.hasOwnProperty(r)){var i=e.hasOwnProperty(r),o=typeof n[r],a=!i||typeof e[r]!==o;a?e[r]=n[r]:"object"===o&&(e[r]=t(e[r],n[r]))}return e}},,function(t,e,n){var r=n(3411)(n(3474));t.exports=r},function(t,e,n){var r=n(244)(n(141),"Map");t.exports=r},function(t,e,n){var r=n(206),i=n(119),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==a||e==s||e==o||e==l}},function(t,e,n){var r=n(3430),i=n(3437),o=n(3439),a=n(3440),s=n(3441);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(1172),i=n(1173),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i;t.exports=s},function(t,e,n){var r=n(3453),i=n(3454),o=n(3455),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(69),i=n(485),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(3467);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(1183),i=n(486),o=n(3481),a=n(69);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},function(t,e){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},function(t,e,n){var r=n(1184),i=n(119),o="Expected a function";t.exports=function(t,e,n){var a=!0,s=!0;if("function"!=typeof t)throw new TypeError(o);return i(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:a,maxWait:e,trailing:s})}},function(t,e,n){var r=n(488),i=n(361),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(1175)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(1171),i=n(1195),o=n(489);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(1167);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(43),i=n(848);t.exports=function(t,e){var n=[];if(!t||!t.length)return n;var o=-1,a=[],s=t.length;for(e=r(e,3);++o<s;){var l=t[o];e(l,o,t)&&(n.push(l),a.push(o))}return i(t,a),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(22);n(3693),n(3694),n(3695),n(3696),n(3697),n(3724),n(367),e.ctrlPressed=!1,e.timeouts=[],e.nonCtrlTimeouts=[],e.setCtrlPressedToTrue=function(){e.ctrlPressed=!0},e.clearAllTimeouts=function(){e.ctrlPressed=!1,i(e.timeouts,function(t){clearTimeout(t)}),e.timeouts=[]},r.module("stealth.hover",["ccri.angular-utils"]).run(["stealth.hover.actions.Manager","stealth.hover.actions.Attribute","stealth.hover.actions.Popup","stealth.hover.actions.QuickHistory","stealth.hover.actions.HighlightEntity","stealth.hover.actions.Ellipse",function(t,e,n,r,i,o){t.addNonCtrlAction(n),t.addLiveAction(r),t.addLiveAction(o),t.addAction(i),t.addAction(o),t.start()}])},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3809);e.stealthDragonfishGroupsCaptureResultsPanel=i.stealthDragonfishGroupsCaptureResultsPanel;var o=n(3811);e.stealthDragonfishGroupsCaptureEntityCaptureService=o.stealthDragonfishGroupsCaptureEntityCaptureService,e.stealthDragonfishGroupsCapture="stealth.dragonfish.groups.capture",r.module(e.stealthDragonfishGroupsCapture,[])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(164),a=n(14),s=n(494),l=n(44),c=n(224),u=n(4),d=n(30),f=n(46),p=n(2),h=n(53),g=n(21),m=n(54);function v(t){return g.isMoment(t)?t:f(t)?g.utc(t):null}e.stealthDragonfishUtils="stealth.dragonfish.utils",e.getMoment=v,r.module(e.stealthDragonfishUtils,[]).constant("stealth.dragonfish.utils.Constant",{endpoint:{getThumbnail:{key:"dragonfish.thumbnailURL",url:"/crumbnail/{{encodeURIComponent(entityId)}}"}},icon:"fa-puzzle-piece",space:{Imagery:{title:"Imagery",icon:"fa-file-image-o"},Fusion:{title:"Fusion",icon:"fa-sun-o"},Sigint:{title:"Sigint",icon:"fa-rss"}},highlightStyle:new i.style.Style({stroke:new i.style.Stroke({color:"red",width:2}),text:new i.style.Text({text:"",font:"normal 26px CcriIcon",textBaseline:"bottom",stroke:new i.style.Stroke({color:"red",width:1}),fill:new i.style.Fill({color:"rgba(255,255,255,0.8)"})}),image:new i.style.Circle({radius:5,fill:new i.style.Fill({color:"red"})})}),polyColor:"#FFFF99",entity:{status:{saved:"urn:ccri:innessDefault",deleted:"urn:ccri:innessDeleted",restored:"urn:ccri:innessRestored",suggested:"urn:ccri:innessSuggested"},colors:{"urn:ccri:innessDefault":"#84b3dd","urn:ccri:innessDeleted":"#dd8487","urn:ccri:innessRestored":"#5edd68","urn:ccri:innessSuggested":"#e1da55",other:"#8487dd"}},thumbnailPlaceholder:"assets/no_image_128x128.png",thumbnailURL:{rawImageKey:"rawImage"},resultSlider:{min:0,max:1,step:.01},baseUrl:{baseUrl:"dragonfish.baseUrl"}}).factory("stealth.dragonfish.utils.entity",["stealth.dragonfish.utils.Constant",function(t){var e=new i.format.WKT;return function(n){return new i.Feature(d(n,{name:n.name||n.id,geometry:function(t){var n=null;try{n=e.readGeometry(t.geom)}catch(t){}return n}(n),time:function(t,e){var n={},r=v(t),i=v(e);if(r||i)if(r&&i&&!r.isSame(i)){if(r.isAfter(i)){var o=r;r=i,i=o}n={type:"interval",start:r,end:i}}else n={type:"instant",instant:r||i};else n=null;return n}(n.startTime,n.endTime),description:n.description||n.desc,labels:n.labels||[],color:n.color||t.entity.colors[n.innessStatus||"other"],innessStatusFilter:n.innessStatus!==t.entity.status.deleted||"deleted"}))}}]).service("stealth.dragonfish.utils.entityService",["stealth.dragonfish.utils.Constant",function(t){function e(t,e){try{return t.get(e)}catch(n){return t[e]}}function n(t,n){var r=e(t,"time");return r?r[n]||r.instant:null}this.id=function(t){return e(t,"id")},this.name=function(t){return e(t,"name")},this.time=function(t){return e(t,"time")},this.startMoment=function(t){return n(t,"start")},this.endMoment=function(t){return n(t,"end")},this.description=function(t){return e(t,"description")},this.labels=function(t){return e(t,"labels")},this.innessStatus=function(t){return e(t,"innessStatus")},this.geometry=function(t){return e(t,"geometry")},this.geomString=function(t){return function(t){var n=e(t,"geom");if(!n){var r=e(t,"geometry");n=r?(new i.format.WKT).writeGeometry(r):null}return n}(t)},this.color=function(t){return e(t,"color")},this.score=function(t){return e(t,"score")},this.getAttr=e}]).service("stealth.dragonfish.utils.sidebarService",["$rootScope","CONFIG","ol3Map","stealth.core.geo.ol3.overlays.Vector","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.entityService","stealth.knn.Constant","stealth.knn.QueryParamsService",function(t,e,n,r,i,d,f,g){var v=p(e,"dragonfish.groups.csvMapKeys",{}),y=p(e,"dragonfish.groups.csvMapValues",{});this.createScope=function(e){var n=t.$new();return n.request=e,n.results=null,n.queryRunning=!0,n.entityHighlighter=new r({styleBuilder:function(){return i.highlightStyle}}),n.entityHighlighter.addToMap(),n.$on("$destroy",function(){n.entityHighlighter.removeFromMap()}),n.highlight=function(t){n.entityHighlighter.clear(),n.entityHighlighter.addFeature(t.clone())},n.unhighlight=function(t){n.entityHighlighter.clear()},n},this.composeThumbnailUrl=function(t,n){var r,a,s=i.thumbnailPlaceholder,l={};return h(e,"dragonfish.thumbnailURL")&&(r=p(e,"dragonfish.thumbnailURL.rawImageKey",i.thumbnailURL.rawImageKey),(a=p(t.getProperties(),r))?s="data:image/png;base64,"+a:(l.entityId=n?d.getAttr(t,n):d.id(t),s=m.getUrl(i.endpoint.getThumbnail,o(i.baseUrl,l)))),s},this.csvExport=function(t,e,n){if(t.length){var r=s(l(t[0].getProperties()),n),i=c(r,"time");i>=0&&r.splice(i+1,0,"start_time","end_time");var o=u(t,function(t){var e=t.getProperties();return e.labels=e.labels.join(", "),e.geometry=d.geomString(t),e.time=p(e,"time.type",null),e.start_time=d.startMoment(t),e.end_time=d.endMoment(t),'"'+u(r,function(t){var n=e[t],r=y[t];return a(r)?n:r[n]||n}).join('","')+'"'}),f=u(r,function(t){return v[t]||t}),h=new Blob([unescape(f.join(",")+"\n"+o.join("\n"))],{type:"text/csv"}),g=URL.createObjectURL(h),m=document.createElement("a");m.setAttribute("href",g),m.setAttribute("download",e+".csv"),document.body.appendChild(m),m.click(),m.remove()}},this.searchSimilar=function(e,n){var r=g.runnerParams(e,p(n,"isFilterable",!1),p(n,"filterFunc",null),p(n,"filterKey",null));t.$emit(f.applyEvent,r)},this.showTimelapse=function(t,e){if(p(e,"filterFunc",null)){var n=u(t,d.id);e.filterFunc(e.filterKey,n)}},this.zoomTo=function(t){n.fit(d.geometry(t))}}]).service("stealth.dragonfish.utils.errorHandling",["$log","$q","toastr",function(t,e,n){this.error=function(t,r){return r=void 0!==r?r:"Communication Error",function(){return n.error(t,r),e.reject(t)}},this.errorWithResponse=function(t,r){return r=void 0!==r?r:"Communication Error",function(i){return n.error(t,r),e.reject(i)}}}])},function(t,e,n){"use strict";n.r(e);var r={ASSUME_TOUCH:!1,DEFAULT_MAX_ZOOM:42,DEFAULT_MIN_ZOOM:0,DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD:.5,DEFAULT_TILE_SIZE:256,DEFAULT_WMS_VERSION:"1.3.0",ENABLE_CANVAS:!0,ENABLE_PROJ4JS:!0,ENABLE_RASTER_REPROJECTION:!0,ENABLE_WEBGL:!0,DEBUG_WEBGL:!0,INITIAL_ATLAS_SIZE:256,MAX_ATLAS_SIZE:-1,MOUSEWHEELZOOM_MAXDELTA:1,OVERVIEWMAP_MAX_RATIO:.75,OVERVIEWMAP_MIN_RATIO:.1,RASTER_REPROJECTION_MAX_SOURCE_TILES:100,RASTER_REPROJECTION_MAX_SUBDIVISION:10,RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH:.25,SIMPLIFY_TOLERANCE:.5,WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK:1024,VERSION:"v4.6.5"};r.WEBGL_MAX_TEXTURE_SIZE,r.WEBGL_EXTENSIONS,r.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},r.nullFunction=function(){},r.getUid=function(t){return t.ol_uid||(t.ol_uid=++r.uidCounter_)},r.uidCounter_=0,e.default=r},function(t,e,n){"use strict";(function(t,r){var i,o=n(1231);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var a=Object(o.a)(i);e.a=a}).call(this,n(78),n(394)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout(function(){throw t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.errorObject={e:{}}},function(t,e,n){var r=n(304),i=n(695)(function(t,e,n){return e=e.toLowerCase(),t+(n?r(e):e)});t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(78))},function(t,e,n){var r=n(696),i=n(1274),o=n(1276),a=RegExp("['’]","g");t.exports=function(t){return function(e){return r(o(i(e).replace(a,"")),t,"")}}},function(t,e){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,n){var r=n(180),i=n(305),o=n(17),a=n(214),s=n(504),l=n(157);t.exports=function(t,e,n){for(var c=-1,u=(e=r(e,t)).length,d=!1;++c<u;){var f=l(e[c]);if(!(d=null!=t&&n(t,f)))break;t=t[f]}return d||++c!=u?d:!!(u=null==t?0:t.length)&&s(u)&&a(f,u)&&(o(t)||i(t))}},function(t,e,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,o=n(1282)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)}),e});t.exports=o},function(t,e,n){var r=n(502),i="Expected a function";function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(43),i=n(121),o=n(44);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var l=r(n,3);e=o(e),n=function(t){return l(s[t],t,s)}}var c=t(e,n,a);return c>-1?s[l?e[c]:c]:void 0}}},function(t,e,n){var r=n(376),i=n(704),o=n(377),a=1,s=2;t.exports=function(t,e,n,l,c,u){var d=n&a,f=t.length,p=e.length;if(f!=p&&!(d&&p>f))return!1;var h=u.get(t);if(h&&u.get(e))return h==e;var g=-1,m=!0,v=n&s?new r:void 0;for(u.set(t,e),u.set(e,t);++g<f;){var y=t[g],b=e[g];if(l)var w=d?l(b,y,g,e,t,u):l(y,b,g,t,e,u);if(void 0!==w){if(w)continue;m=!1;break}if(v){if(!i(e,function(t,e){if(!o(v,e)&&(y===t||c(y,t,n,l,u)))return v.push(e)})){m=!1;break}}else if(y!==b&&!c(y,b,n,l,u)){m=!1;break}}return u.delete(t),u.delete(e),m}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(79).Uint8Array;t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e,n){var r=n(708),i=n(509),o=n(44);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(378),i=n(17);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(1324),i=n(305),o=n(17),a=n(249),s=n(214),l=n(308),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&i(t),d=!n&&!u&&a(t),f=!n&&!u&&!d&&l(t),p=n||u||d||f,h=p?r(t.length,String):[],g=h.length;for(var m in t)!e&&!c.call(t,m)||p&&("length"==m||d&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||h.push(m);return h}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(212)(n(79),"Set");t.exports=r},function(t,e,n){var r=n(212)(n(79),"WeakMap");t.exports=r},function(t,e,n){var r=n(71);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(310),i=1/0,o=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===i||t===-i?(t<0?-1:1)*o:t==t?t:0:0===t?t:0}},,,function(t,e,n){var r=n(721);e.mixin=function(t){var e=new r;return t.on=e.on.bind(e),t.off=e.off.bind(e),t.once=e.once.bind(e),t.emit=e.emit.bind(e),t}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},t.exports=n},function(t,e,n){var r=n(1369),i=n(13).format,o=n(13).isNumber;e.name="Complex",e.path="type",e.factory=function(t,e,n,a,s){return r.prototype.type="Complex",r.prototype.isComplex=!0,r.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},r.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},r.prototype.format=function(t){var e=this.im,n=this.re,r=i(this.re,t),a=i(this.im,t),s=o(t)?t:t?t.precision:null;if(null!==s){var l=Math.pow(10,-s);Math.abs(n/e)<l&&(n=0),Math.abs(e/n)<l&&(e=0)}return 0==e?r:0==n?1==e?"i":-1==e?"-i":a+"i":e<0?-1==e?r+" - i":r+" - "+a.substring(1)+"i":1==e?r+" + i":r+" + "+a+"i"},r.fromPolar=function(e){switch(arguments.length){case 1:var n=arguments[0];if("object"==typeof n)return r(n);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var i=arguments[0],a=arguments[1];if(o(i)){if(t.isUnit(a)&&a.hasBase("ANGLE")&&(a=a.toNumber("rad")),o(a))return new r({r:i,phi:a});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},r.prototype.valueOf=r.prototype.toString,r.fromJSON=function(t){return new r(t)},r.EPSILON=e.epsilon,s.on("config",function(t,e){t.epsilon!==e.epsilon&&(r.EPSILON=t.epsilon)}),r.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},r},e.math=!0},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},o={"–":"\\--","—":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},a=function(t,e){return r({},t,e)};t.exports=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.preserveFormatting,s=void 0!==n&&n,l=e.escapeMapFn,c=void 0===l?a:l,u=String(t),d="",f=c(r({},i),s?r({},o):{}),p=Object.keys(f),h=function(){var t=!1;p.forEach(function(e,n){t||u.length>=e.length&&u.slice(0,e.length)===e&&(d+=f[p[n]],u=u.slice(e.length,u.length),t=!0)}),t||(d+=u.slice(0,1),u=u.slice(1,u.length))};u;)h();return d}},function(t,e,n){"use strict";var r=n(9);e.name="fraction",e.factory=function(t,e,n,i){var o=i("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new t.Fraction(e)},string:function(e){return new t.Fraction(e)},"number, number":function(e,n){return new t.Fraction(e,n)},BigNumber:function(e){return new t.Fraction(e.toString())},Fraction:function(t){return t},Object:function(e){return new t.Fraction(e)},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(13);e.name="Range",e.path="type",e.factory=function(t,e,n,i){function o(e,n,r){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(null!=e)if(t.isBigNumber(e))e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(null!=n)if(t.isBigNumber(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter end must be a number");if(null!=r)if(t.isBigNumber(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter step must be a number");this.start=null!=e?parseFloat(e):0,this.end=null!=n?parseFloat(n):0,this.step=null!=r?parseFloat(r):1}return o.prototype.type="Range",o.prototype.isRange=!0,o.parse=function(t){if("string"!=typeof t)return null;var e=t.split(":").map(function(t){return parseFloat(t)});if(e.some(function(t){return isNaN(t)}))return null;switch(e.length){case 2:return new o(e[0],e[1]);case 3:return new o(e[0],e[2],e[1]);default:return null}},o.prototype.clone=function(){return new o(this.start,this.end,this.step)},o.prototype.size=function(){var t=0,e=this.start,n=this.step,i=this.end-e;return r.sign(n)==r.sign(i)?t=Math.ceil(i/n):0==i&&(t=0),isNaN(t)&&(t=0),[t]},o.prototype.min=function(){var t=this.size()[0];return t>0?this.step>0?this.start:this.start+(t-1)*this.step:void 0},o.prototype.max=function(){var t=this.size()[0];return t>0?this.step>0?this.start+(t-1)*this.step:this.start:void 0},o.prototype.forEach=function(t){var e=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;e<r;)t(e,[i],this),e+=n,i++;else if(n<0)for(;e>r;)t(e,[i],this),e+=n,i++},o.prototype.map=function(t){var e=[];return this.forEach(function(n,r,i){e[r[0]]=t(n,r,i)}),e},o.prototype.toArray=function(){var t=[];return this.forEach(function(e,n){t[n[0]]=e}),t},o.prototype.valueOf=function(){return this.toArray()},o.prototype.format=function(t){var e=r.format(this.start,t);return 1!=this.step&&(e+=":"+r.format(this.step,t)),e+=":"+r.format(this.end,t)},o.prototype.toString=function(){return this.format()},o.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},o.fromJSON=function(t){return new o(t.start,t.end,t.step)},o}},function(t,e,n){"use strict";e.name="ResultSet",e.path="type",e.factory=function(t,e,n,r){function i(t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return i.prototype.type="ResultSet",i.prototype.isResultSet=!0,i.prototype.valueOf=function(){return this.entries},i.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},i.fromJSON=function(t){return new i(t.entries)},i}},function(t,e,n){var r=n(182).memoize;function i(t){return t[0].precision}e.e=r(function(t){return new t(1).exp()},i),e.phi=r(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},i),e.pi=r(function(t){return t.acos(-1)},i),e.tau=r(function(t){return e.pi(t).times(2)},i)},function(t,e,n){"use strict";var r=n(9);e.name="fix",e.factory=function(t,e,n,i){var o=i("fix",{number:function(t){return t>0?Math.floor(t):Math.ceil(t)},Complex:function(e){return new t.Complex(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},BigNumber:function(t){return t.isNegative()?t.ceil():t.floor()},Fraction:function(t){return t.s<0?t.ceil():t.floor()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(13).toFixed,o=n(9),a="Number of decimals in function round must be an integer";e.name="round",e.factory=function(t,e,s,l){var c=s(n(7)),u=s(n(61)),d=s(n(218)),f=s(n(94)),p=s(n(93)),h=s(n(35)),g=l("round",{number:Math.round,"number, number":function(t,e){if(!r(e))throw new TypeError(a);if(e<0||e>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return function(t,e){return parseFloat(i(t,e))}(t,e)},Complex:function(t){return t.round()},"Complex, number":function(t,e){if(e%1)throw new TypeError(a);return t.round(e)},"Complex, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(a);var n=e.toNumber();return t.round(n)},"number, BigNumber":function(e,n){if(!n.isInteger())throw new TypeError(a);return new t.BigNumber(e).toDecimalPlaces(n.toNumber())},BigNumber:function(t){return t.toDecimalPlaces(0)},"BigNumber, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(a);return t.toDecimalPlaces(e.toNumber())},Fraction:function(t){return t.round()},"Fraction, number":function(t,e){if(e%1)throw new TypeError(a);return t.round(e)},"Array | Matrix":function(t){return o(t,g,!0)},"Matrix, number | BigNumber":function(t,e){var n;switch(t.storage()){case"sparse":n=f(t,e,g,!1);break;default:n=h(t,e,g,!1)}return n},"number | Complex | BigNumber, Matrix":function(t,e){if(!u(t,0)){var n;switch(e.storage()){case"sparse":n=p(e,t,g,!0);break;default:n=h(e,t,g,!0)}return n}return d(e.size(),e.storage())},"Array, number | BigNumber":function(t,e){return h(c(t),e,g,!1).valueOf()},"number | Complex | BigNumber, Array":function(t,e){return h(c(e),t,g,!0).valueOf()}});return g.toTex={1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},g}},function(t,e,n){"use strict";var r=n(45);e.name="format",e.factory=function(t,e,n,i){var o=i("format",{any:r.format,"any, Object | function | number":r.format});return o.toTex=void 0,o}},function(t,e,n){e.name="docs",e.path="expression",e.factory=function(t,e,r,i){var o={};return o.bignumber=n(1393),o.boolean=n(1394),o.complex=n(1395),o.createUnit=n(1396),o.fraction=n(1397),o.index=n(1398),o.matrix=n(1399),o.number=n(1400),o.sparse=n(1401),o.splitUnit=n(1402),o.string=n(1403),o.unit=n(1404),o.e=n(732),o.E=n(732),o.false=n(1405),o.i=n(1406),o[1/0]=n(1407),o.LN2=n(1408),o.LN10=n(1409),o.LOG2E=n(1410),o.LOG10E=n(1411),o.NaN=n(1412),o.null=n(1413),o.pi=n(733),o.PI=n(733),o.phi=n(1414),o.SQRT1_2=n(1415),o.SQRT2=n(1416),o.tau=n(1417),o.true=n(1418),o.version=n(1419),o.speedOfLight={description:"Speed of light in vacuum",examples:["speedOfLight"]},o.gravitationConstant={description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},o.planckConstant={description:"Planck constant",examples:["planckConstant"]},o.reducedPlanckConstant={description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},o.magneticConstant={description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},o.electricConstant={description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},o.vacuumImpedance={description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},o.coulomb={description:"Coulomb's constant",examples:["coulomb"]},o.elementaryCharge={description:"Elementary charge",examples:["elementaryCharge"]},o.bohrMagneton={description:"Borh magneton",examples:["bohrMagneton"]},o.conductanceQuantum={description:"Conductance quantum",examples:["conductanceQuantum"]},o.inverseConductanceQuantum={description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},o.magneticFluxQuantum={description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},o.nuclearMagneton={description:"Nuclear magneton",examples:["nuclearMagneton"]},o.klitzing={description:"Von Klitzing constant",examples:["klitzing"]},o.bohrRadius={description:"Borh radius",examples:["bohrRadius"]},o.classicalElectronRadius={description:"Classical electron radius",examples:["classicalElectronRadius"]},o.electronMass={description:"Electron mass",examples:["electronMass"]},o.fermiCoupling={description:"Fermi coupling constant",examples:["fermiCoupling"]},o.fineStructure={description:"Fine-structure constant",examples:["fineStructure"]},o.hartreeEnergy={description:"Hartree energy",examples:["hartreeEnergy"]},o.protonMass={description:"Proton mass",examples:["protonMass"]},o.deuteronMass={description:"Deuteron Mass",examples:["deuteronMass"]},o.neutronMass={description:"Neutron mass",examples:["neutronMass"]},o.quantumOfCirculation={description:"Quantum of circulation",examples:["quantumOfCirculation"]},o.rydberg={description:"Rydberg constant",examples:["rydberg"]},o.thomsonCrossSection={description:"Thomson cross section",examples:["thomsonCrossSection"]},o.weakMixingAngle={description:"Weak mixing angle",examples:["weakMixingAngle"]},o.efimovFactor={description:"Efimov factor",examples:["efimovFactor"]},o.atomicMass={description:"Atomic mass constant",examples:["atomicMass"]},o.avogadro={description:"Avogadro's number",examples:["avogadro"]},o.boltzmann={description:"Boltzmann constant",examples:["boltzmann"]},o.faraday={description:"Faraday constant",examples:["faraday"]},o.firstRadiation={description:"First radiation constant",examples:["firstRadiation"]},o.loschmidt={description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},o.gasConstant={description:"Gas constant",examples:["gasConstant"]},o.molarPlanckConstant={description:"Molar Planck constant",examples:["molarPlanckConstant"]},o.molarVolume={description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},o.sackurTetrode={description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},o.secondRadiation={description:"Second radiation constant",examples:["secondRadiation"]},o.stefanBoltzmann={description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},o.wienDisplacement={description:"Wien displacement law constant",examples:["wienDisplacement"]},o.molarMass={description:"Molar mass constant",examples:["molarMass"]},o.molarMassC12={description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},o.gravity={description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},o.planckLength={description:"Planck length",examples:["planckLength"]},o.planckMass={description:"Planck mass",examples:["planckMass"]},o.planckTime={description:"Planck time",examples:["planckTime"]},o.planckCharge={description:"Planck charge",examples:["planckCharge"]},o.planckTemperature={description:"Planck temperature",examples:["planckTemperature"]},o.derivative=n(1420),o.lsolve=n(1421),o.lup=n(1422),o.lusolve=n(1423),o.simplify=n(1424),o.rationalize=n(1425),o.slu=n(1426),o.usolve=n(1427),o.qr=n(1428),o.abs=n(1429),o.add=n(1430),o.cbrt=n(1431),o.ceil=n(1432),o.cube=n(1433),o.divide=n(1434),o.dotDivide=n(1435),o.dotMultiply=n(1436),o.dotPow=n(1437),o.exp=n(1438),o.fix=n(1439),o.floor=n(1440),o.gcd=n(1441),o.hypot=n(1442),o.lcm=n(1443),o.log=n(1444),o.log10=n(1445),o.mod=n(1446),o.multiply=n(1447),o.norm=n(1448),o.nthRoot=n(1449),o.pow=n(1450),o.round=n(1451),o.sign=n(1452),o.sqrt=n(1453),o.square=n(1454),o.subtract=n(1455),o.unaryMinus=n(1456),o.unaryPlus=n(1457),o.xgcd=n(1458),o.bitAnd=n(1459),o.bitNot=n(1460),o.bitOr=n(1461),o.bitXor=n(1462),o.leftShift=n(1463),o.rightArithShift=n(1464),o.rightLogShift=n(1465),o.bellNumbers=n(1466),o.catalan=n(1467),o.composition=n(1468),o.stirlingS2=n(1469),o.config=n(1470),o.import=n(1471),o.typed=n(1472),o.arg=n(1473),o.conj=n(1474),o.re=n(1475),o.im=n(1476),o.eval=n(1477),o.help=n(1478),o.distance=n(1479),o.intersect=n(1480),o.and=n(1481),o.not=n(1482),o.or=n(1483),o.xor=n(1484),o.concat=n(1485),o.cross=n(1486),o.det=n(1487),o.diag=n(1488),o.dot=n(1489),o.eye=n(1490),o.filter=n(1491),o.flatten=n(1492),o.forEach=n(1493),o.inv=n(1494),o.kron=n(1495),o.map=n(1496),o.ones=n(1497),o.partitionSelect=n(1498),o.range=n(1499),o.resize=n(1500),o.reshape=n(1501),o.size=n(1502),o.sort=n(1503),o.squeeze=n(1504),o.subset=n(1505),o.trace=n(1506),o.transpose=n(1507),o.zeros=n(1508),o.combinations=n(1509),o.factorial=n(1510),o.gamma=n(1511),o.kldivergence=n(1512),o.multinomial=n(1513),o.permutations=n(1514),o.pickRandom=n(1515),o.random=n(1516),o.randomInt=n(1517),o.compare=n(1518),o.compareNatural=n(1519),o.deepEqual=n(1520),o.equal=n(1521),o.larger=n(1522),o.largerEq=n(1523),o.smaller=n(1524),o.smallerEq=n(1525),o.unequal=n(1526),o.setCartesian=n(1527),o.setDifference=n(1528),o.setDistinct=n(1529),o.setIntersect=n(1530),o.setIsSubset=n(1531),o.setMultiplicity=n(1532),o.setPowerset=n(1533),o.setSize=n(1534),o.setSymDifference=n(1535),o.setUnion=n(1536),o.erf=n(1537),o.mad=n(1538),o.max=n(1539),o.mean=n(1540),o.median=n(1541),o.min=n(1542),o.mode=n(1543),o.prod=n(1544),o.quantileSeq=n(1545),o.std=n(1546),o.sum=n(1547),o.var=n(1548),o.acos=n(1549),o.acosh=n(1550),o.acot=n(1551),o.acoth=n(1552),o.acsc=n(1553),o.acsch=n(1554),o.asec=n(1555),o.asech=n(1556),o.asin=n(1557),o.asinh=n(1558),o.atan=n(1559),o.atanh=n(1560),o.atan2=n(1561),o.cos=n(1562),o.cosh=n(1563),o.cot=n(1564),o.coth=n(1565),o.csc=n(1566),o.csch=n(1567),o.sec=n(1568),o.sech=n(1569),o.sin=n(1570),o.sinh=n(1571),o.tan=n(1572),o.tanh=n(1573),o.to=n(1574),o.clone=n(1575),o.format=n(1576),o.isNaN=n(1577),o.isInteger=n(1578),o.isNegative=n(1579),o.isNumeric=n(1580),o.isPositive=n(1581),o.isPrime=n(1582),o.isZero=n(1583),o.typeof=n(1584),o}},function(t,e){t.exports={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]}},function(t,e){t.exports={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]}},function(t,e,n){"use strict";var r=n(45).stringify,i=n(81).getSafeProperty;e.name="AccessorNode",e.path="expression.node",e.factory=function(t,e,o,a){var s=o(n(37)).register,l=o(n(37)).compile,c=o(n(83)),u=(o(n(522)),o(n(735)));function d(e,n){if(!(this instanceof d))throw new SyntaxError("Constructor must be called with the new operator");if(!t.isNode(e))throw new TypeError('Node expected for parameter "object"');if(!t.isIndexNode(n))throw new TypeError('IndexNode expected for parameter "index"');this.object=e||null,this.index=n,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function f(e){return!(t.isAccessorNode(e)||t.isArrayNode(e)||t.isConstantNode(e)||t.isFunctionNode(e)||t.isObjectNode(e)||t.isParenthesisNode(e)||t.isSymbolNode(e))}return d.prototype=new c,d.prototype.type="AccessorNode",d.prototype.isAccessorNode=!0,s(d.prototype.type,function(t,e,n){if(!(t instanceof d))throw new TypeError("No valid AccessorNode");e.access=u,e.getSafeProperty=i;var o=l(t.object,e,n),a=l(t.index,e,n);return t.index.isObjectProperty()?"getSafeProperty("+o+", "+r(t.index.getObjectProperty())+")":t.index.needsSize()?"(function () {  var object = "+o+";  var size = math.size(object).valueOf();  return access(object, "+a+");})()":"access("+o+", "+a+")"}),d.prototype.forEach=function(t){t(this.object,"object",this),t(this.index,"index",this)},d.prototype.map=function(t){return new d(this._ifNode(t(this.object,"object",this)),this._ifNode(t(this.index,"index",this)))},d.prototype.clone=function(){return new d(this.object,this.index)},d.prototype._toString=function(t){var e=this.object.toString(t);return f(this.object)&&(e="("+e+")"),e+this.index.toString(t)},d.prototype.toHTML=function(t){var e=this.object.toHTML(t);return f(this.object)&&(e='<span class="math-parenthesis math-round-parenthesis">(</span>'+e+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+this.index.toHTML(t)},d.prototype._toTex=function(t){var e=this.object.toTex(t);return f(this.object)&&(e="\\left("+e+"\\right)"),e+this.index.toTex(t)},d}},function(t,e,n){"use strict";var r=n(220).transform,i=n(81).getSafeProperty;e.factory=function(t,e,o,a){var s=o(n(112));return function(t,e){try{if(Array.isArray(t))return s(t,e);if(t&&"function"==typeof t.subset)return t.subset(e);if("string"==typeof t)return s(t,e);if("object"==typeof t){if(!e.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return i(t,e.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(t){throw r(t)}}}},function(t,e,n){"use strict";n(27);var r=n(45).stringify,i=n(81).getSafeProperty,o=n(81).setSafeProperty;e.name="AssignmentNode",e.path="expression.node",e.factory=function(t,e,a,s){var l=a(n(37)).register,c=a(n(37)).compile,u=a(n(83)),d=(a(n(524)),a(n(7)),a(n(1587))),f=a(n(735)),p=(n(521),n(312));function h(e,n,r){if(!(this instanceof h))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=e,this.index=r?n:null,this.value=r||n,!t.isSymbolNode(e)&&!t.isAccessorNode(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(t.isSymbolNode(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!t.isIndexNode(this.index))throw new TypeError('IndexNode expected as "index"');if(!t.isNode(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function g(t,e){e||(e="keep");var n=p.getPrecedence(t,e),r=p.getPrecedence(t.value,e);return"all"===e||null!==r&&r<=n}return h.prototype=new u,h.prototype.type="AssignmentNode",h.prototype.isAssignmentNode=!0,l(h.prototype.type,function(e,n,a){if(!(e instanceof h))throw new TypeError("No valid AssignmentNode");var s;n.assign=d,n.access=f,n.getSafeProperty=i,n.setSafeProperty=o;var l=c(e.object,n,a),u=e.index?c(e.index,n,a):null,p=c(e.value,n,a),g=r(e.object.name);if(e.index){if(e.index.isObjectProperty())return"setSafeProperty("+l+", "+r(e.index.getObjectProperty())+", "+p+")";if(t.isSymbolNode(e.object))return"(function () {  var object = "+l+";  var value = "+p+";  "+(s=e.index.needsSize()?"var size = math.size(object).valueOf();":"")+"  setSafeProperty(scope, "+g+", assign(object, "+u+", value));  return value;})()";s=e.index.needsSize()?"var size = math.size(object).valueOf();":"";var m=c(e.object.object,n,a);if(e.object.index.isObjectProperty()){var v=r(e.object.index.getObjectProperty());return"(function () {  var parent = "+m+";  var object = getSafeProperty(parent, "+v+");  var value = "+p+";"+s+"  setSafeProperty(parent, "+v+", assign(object, "+u+", value));  return value;})()"}return"(function () {  var parent = "+m+";  "+(e.object.index.needsSize()?"var size = math.size(parent).valueOf();":"")+"  var parentIndex = "+c(e.object.index,n,a)+";  var object = access(parent, parentIndex);  var value = "+p+";  "+s+"  assign(parent, parentIndex, assign(object, "+u+", value));  return value;})()"}if(!t.isSymbolNode(e.object))throw new TypeError("SymbolNode expected as object");return"setSafeProperty(scope, "+g+", "+p+")"}),h.prototype.forEach=function(t){t(this.object,"object",this),this.index&&t(this.index,"index",this),t(this.value,"value",this)},h.prototype.map=function(t){return new h(this._ifNode(t(this.object,"object",this)),this.index?this._ifNode(t(this.index,"index",this)):null,this._ifNode(t(this.value,"value",this)))},h.prototype.clone=function(){return new h(this.object,this.index,this.value)},h.prototype._toString=function(t){var e=this.object.toString(t),n=this.index?this.index.toString(t):"",r=this.value.toString(t);return g(this,t&&t.parenthesis)&&(r="("+r+")"),e+n+" = "+r},h.prototype.toHTML=function(t){var e=this.object.toHTML(t),n=this.index?this.index.toHTML(t):"",r=this.value.toHTML(t);return g(this,t&&t.parenthesis)&&(r='<span class="math-paranthesis math-round-parenthesis">(</span>'+r+'<span class="math-paranthesis math-round-parenthesis">)</span>'),e+n+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+r},h.prototype._toTex=function(t){var e=this.object.toTex(t),n=this.index?this.index.toTex(t):"",r=this.value.toTex(t);return g(this,t&&t.parenthesis)&&(r="\\left("+r+"\\right)"),e+n+":="+r},h}},function(t,e,n){"use strict";var r=n(11).map,i=n(11).join;e.name="BlockNode",e.path="expression.node",e.factory=function(t,e,o,a){var s=o(n(37)).register,l=o(n(37)).compile,c=o(n(83)),u=o(n(726));function d(e){if(!(this instanceof d))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map(function(e){var n=e&&e.node,r=!e||void 0===e.visible||e.visible;if(!t.isNode(n))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof r)throw new TypeError('Property "visible" must be a boolean');return{node:n,visible:r}})}return d.prototype=new c,d.prototype.type="BlockNode",d.prototype.isBlockNode=!0,s(d.prototype.type,function(t,e,n){if(!(t instanceof d))throw new TypeError("No valid BlockNode");e.ResultSet=u;var o=r(t.blocks,function(t){var r=l(t.node,e,n);return t.visible?"results.push("+r+");":r+";"});return"(function () {var results = [];"+i(o,"")+"return new ResultSet(results);})()"}),d.prototype.forEach=function(t){for(var e=0;e<this.blocks.length;e++)t(this.blocks[e].node,"blocks["+e+"].node",this)},d.prototype.map=function(t){for(var e=[],n=0;n<this.blocks.length;n++){var r=this.blocks[n],i=this._ifNode(t(r.node,"blocks["+n+"].node",this));e[n]={node:i,visible:r.visible}}return new d(e)},d.prototype.clone=function(){return new d(this.blocks.map(function(t){return{node:t.node,visible:t.visible}}))},d.prototype._toString=function(t){return this.blocks.map(function(e){return e.node.toString(t)+(e.visible?"":";")}).join("\n")},d.prototype.toHTML=function(t){return this.blocks.map(function(e){return e.node.toHTML(t)+(e.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')},d.prototype._toTex=function(t){return this.blocks.map(function(e){return e.node.toTex(t)+(e.visible?"":";")}).join("\\;\\;\n")},d}},function(t,e,n){"use strict";n(27);var r=n(312);e.name="ConditionalNode",e.path="expression.node",e.factory=function(t,e,i,o){var a=i(n(37)).register,s=i(n(37)).compile,l=i(n(83));function c(e,n,r){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");if(!t.isNode(e))throw new TypeError("Parameter condition must be a Node");if(!t.isNode(n))throw new TypeError("Parameter trueExpr must be a Node");if(!t.isNode(r))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=n,this.falseExpr=r}return c.prototype=new l,c.prototype.type="ConditionalNode",c.prototype.isConditionalNode=!0,a(c.prototype.type,function(e,n,r){if(!(e instanceof c))throw new TypeError("No valid ConditionalNode");return n.testCondition=function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if(t.isBigNumber(e))return!e.isZero();if(t.isComplex(e))return!(!e.re&&!e.im);if(t.isUnit(e))return!!e.value}if(null===e||void 0===e)return!1;throw new TypeError('Unsupported type of condition "'+n.math.typeof(e)+'"')},"testCondition("+s(e.condition,n,r)+") ? ( "+s(e.trueExpr,n,r)+") : ( "+s(e.falseExpr,n,r)+")"}),c.prototype.forEach=function(t){t(this.condition,"condition",this),t(this.trueExpr,"trueExpr",this),t(this.falseExpr,"falseExpr",this)},c.prototype.map=function(t){return new c(this._ifNode(t(this.condition,"condition",this)),this._ifNode(t(this.trueExpr,"trueExpr",this)),this._ifNode(t(this.falseExpr,"falseExpr",this)))},c.prototype.clone=function(){return new c(this.condition,this.trueExpr,this.falseExpr)},c.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=r.getPrecedence(this,e),i=this.condition.toString(t),o=r.getPrecedence(this.condition,e);("all"===e||"OperatorNode"===this.condition.type||null!==o&&o<=n)&&(i="("+i+")");var a=this.trueExpr.toString(t),s=r.getPrecedence(this.trueExpr,e);("all"===e||"OperatorNode"===this.trueExpr.type||null!==s&&s<=n)&&(a="("+a+")");var l=this.falseExpr.toString(t),c=r.getPrecedence(this.falseExpr,e);return("all"===e||"OperatorNode"===this.falseExpr.type||null!==c&&c<=n)&&(l="("+l+")"),i+" ? "+a+" : "+l},c.prototype.toHTML=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=r.getPrecedence(this,e),i=this.condition.toHTML(t),o=r.getPrecedence(this.condition,e);("all"===e||"OperatorNode"===this.condition.type||null!==o&&o<=n)&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.trueExpr.toHTML(t),s=r.getPrecedence(this.trueExpr,e);("all"===e||"OperatorNode"===this.trueExpr.type||null!==s&&s<=n)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>');var l=this.falseExpr.toHTML(t),c=r.getPrecedence(this.falseExpr,e);return("all"===e||"OperatorNode"===this.falseExpr.type||null!==c&&c<=n)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),i+'<span class="math-operator math-conditional-operator">?</span>'+a+'<span class="math-operator math-conditional-operator">:</span>'+l},c.prototype._toTex=function(t){return"\\begin{cases} {"+this.trueExpr.toTex(t)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(t)+"}\\\\{"+this.falseExpr.toTex(t)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},c}},function(t,e,n){"use strict";var r=n(521),i=n(45).stringify,o=n(45).escape,a=n(11).map,s=n(11).join,l=n(27),c=n(312),u=n(81).setSafeProperty,d=n(740);e.name="FunctionAssignmentNode",e.path="expression.node",e.factory=function(t,e,f,p){var h=f(n(37)).register,g=f(n(37)).compile,m=f(n(83));function v(e,n,i){if(!(this instanceof v))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(n))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!t.isNode(i))throw new TypeError('Node expected for parameter "expr"');if(e in r)throw new Error('Illegal function name, "'+e+'" is a reserved keyword');this.name=e,this.params=n.map(function(t){return t&&t.name||t}),this.types=n.map(function(t){return t&&t.type||"any"}),this.expr=i}function y(t,e){var n=c.getPrecedence(t,e),r=c.getPrecedence(t.expr,e);return"all"===e||null!==r&&r<=n}return v.prototype=new m,v.prototype.type="FunctionAssignmentNode",v.prototype.isFunctionAssignmentNode=!0,h(v.prototype.type,function(t,e,n){if(!(t instanceof v))throw new TypeError("No valid FunctionAssignmentNode");e.typed=p,e.setSafeProperty=u;var r=Object.create(n),o=a(t.params,function(t){return r[t]=d(r),r[t]}),l=g(t.expr,e,r),c=i(t.name);return"setSafeProperty(scope, "+c+",   (function () {    var fn = typed("+c+", {      "+i(s(t.types,","))+": function ("+s(o,",")+") {        return "+l+"      }    });    fn.syntax = "+i(t.name+"("+s(t.params,", ")+")")+";    return fn;  })())"}),v.prototype.forEach=function(t){t(this.expr,"expr",this)},v.prototype.map=function(t){var e=this._ifNode(t(this.expr,"expr",this));return new v(this.name,this.params.slice(0),e)},v.prototype.clone=function(){return new v(this.name,this.params.slice(0),this.expr)},v.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=this.expr.toString(t);return y(this,e)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n},v.prototype.toHTML=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",n=[],r=0;r<this.params.length;r++)n.push('<span class="math-symbol math-parameter">'+o(this.params[r])+"</span>");var i=this.expr.toHTML(t);return y(this,e)&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+o(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+i},v.prototype._toTex=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",n=this.expr.toTex(t);return y(this,e)&&(n="\\left("+n+"\\right)"),"\\mathrm{"+this.name+"}\\left("+this.params.map(l.toSymbol).join(",")+"\\right):="+n},v}},function(t,e){t.exports=function(t){return"arg"+Object.keys(t).length}},function(t,e,n){"use strict";var r=n(45).stringify,i=n(45).escape,o=n(81).isSafeProperty,a=n(28).hasOwnProperty;e.name="ObjectNode",e.path="expression.node",e.factory=function(t,e,s,l){var c=s(n(37)).register,u=s(n(37)).compile,d=s(n(83));function f(e){if(!(this instanceof f))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=e||{},e&&("object"!=typeof e||!Object.keys(e).every(function(n){return t.isNode(e[n])})))throw new TypeError("Object containing Nodes expected")}return f.prototype=new d,f.prototype.type="ObjectNode",f.prototype.isObjectNode=!0,c(f.prototype.type,function(t,e,n){if(!(t instanceof f))throw new TypeError("No valid ObjectNode");var i=[];for(var s in t.properties)if(a(t.properties,s)){var l=r(s),c=JSON.parse(l);if(!o(t.properties,c))throw new Error('No access to property "'+c+'"');i.push(l+": "+u(t.properties[s],e,n))}return"{"+i.join(", ")+"}"}),f.prototype.forEach=function(t){for(var e in this.properties)this.properties.hasOwnProperty(e)&&t(this.properties[e],"properties["+r(e)+"]",this)},f.prototype.map=function(t){var e={};for(var n in this.properties)this.properties.hasOwnProperty(n)&&(e[n]=this._ifNode(t(this.properties[n],"properties["+r(n)+"]",this)));return new f(e)},f.prototype.clone=function(){var t={};for(var e in this.properties)this.properties.hasOwnProperty(e)&&(t[e]=this.properties[e]);return new f(t)},f.prototype._toString=function(t){var e=[];for(var n in this.properties)this.properties.hasOwnProperty(n)&&e.push(r(n)+": "+this.properties[n].toString(t));return"{"+e.join(", ")+"}"},f.prototype.toHTML=function(t){var e=[];for(var n in this.properties)this.properties.hasOwnProperty(n)&&e.push('<span class="math-symbol math-property">'+i(n)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[n].toHTML(t));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},f.prototype._toTex=function(t){var e=[];for(var n in this.properties)this.properties.hasOwnProperty(n)&&e.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(t)+"\\\\");return"\\left\\{\\begin{array}{ll}"+e.join("\n")+"\\end{array}\\right\\}"},f}},function(t,e,n){"use strict";e.name="parse",e.factory=function(t,e,r,i){var o=r(n(219));return i("parse",{"string | Array | Matrix":o,"string | Array | Matrix, Object":o})}},function(t,e,n){"use strict";e.name="parser",e.factory=function(t,e,r,i,o){var a=r(n(744));return i("parser",{"":function(){return new a(o)}})},e.math=!0},function(t,e,n){"use strict";var r=n(28).extend,i=n(81);e.name="Parser",e.path="expression",e.factory=function(t,e,o,a,s){var l=o(n(219));function c(){if(!(this instanceof c))throw new SyntaxError("Constructor must be called with the new operator");this.scope={}}return c.prototype.type="Parser",c.prototype.isParser=!0,c.prototype.parse=function(t){throw new Error("Parser.parse is deprecated. Use math.parse instead.")},c.prototype.compile=function(t){throw new Error("Parser.compile is deprecated. Use math.compile instead.")},c.prototype.eval=function(t){return l(t).compile().eval(this.scope)},c.prototype.get=function(t){return t in this.scope?i.getSafeProperty(this.scope,t):void 0},c.prototype.getAll=function(){return r({},this.scope)},c.prototype.set=function(t,e){return i.setSafeProperty(this.scope,t,e)},c.prototype.remove=function(t){delete this.scope[t]},c.prototype.clear=function(){for(var t in this.scope)this.scope.hasOwnProperty(t)&&delete this.scope[t]},c},e.math=!0},function(t,e,n){"use strict";var r=n(221),i=n(388),o=n(389);e.name="max",e.factory=function(t,e,a,s){var l=a(n(184)),c=s("max",{"Array | Matrix":d,"Array | Matrix, number | BigNumber":function(t,e){return i(t,e.valueOf(),u)},"...":function(t){if(o(t))throw new TypeError("Scalar values expected in function max");return d(t)}});return c.toTex="\\max\\left(${args}\\right)",c;function u(t,e){return l(t,e)?t:e}function d(t){var e=void 0;if(r(t,function(t){(void 0===e||l(t,e))&&(e=t)}),void 0===e)throw new Error("Cannot calculate max of an empty array");return e}}},function(t,e,n){"use strict";var r=n(11).size,i=n(221),o=n(388),a=n(389);e.name="mean",e.factory=function(t,e,s,l){var c=s(n(105)),u=s(n(256)),d=l("mean",{"Array | Matrix":f,"Array | Matrix, number | BigNumber":function(t,e){var n=o(t,e,c),i=Array.isArray(t)?r(t):t.size();return u(n,i[e])},"...":function(t){if(a(t))throw new TypeError("Scalar values expected in function mean");return f(t)}});return d.toTex=void 0,d;function f(t){var e=0,n=0;if(i(t,function(t){e=c(e,t),n++}),0===n)throw new Error("Cannot calculate mean of an empty array");return u(e,n)}}},function(t,e,n){"use strict";var r=n(142);e.name="inv",e.factory=function(t,e,i,o){var a=i(n(7)),s=i(n(82)),l=i(n(91)),c=i(n(66)),u=i(n(185)),d=i(n(748)),f=i(n(385)),p=o("inv",{"Array | Matrix":function(e){var n=t.isMatrix(e)?e.size():r.array.size(e);switch(n.length){case 1:if(1==n[0])return t.isMatrix(e)?a([s(1,e.valueOf()[0])]):[s(1,e[0])];throw new RangeError("Matrix must be square (size: "+r.string.format(n)+")");case 2:var i=n[0],o=n[1];if(i==o)return t.isMatrix(e)?a(h(e.valueOf(),i,o),e.storage()):h(e,i,o);throw new RangeError("Matrix must be square (size: "+r.string.format(n)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+r.string.format(n)+")")}},any:function(t){return s(1,t)}});function h(t,e,n){var r,i,o,a,p;if(1==e){if(0==(a=t[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[s(1,a)]]}if(2==e){var h=d(t);if(0==h)throw Error("Cannot calculate inverse, determinant is zero");return[[s(t[1][1],h),s(u(t[0][1]),h)],[s(u(t[1][0]),h),s(t[0][0],h)]]}var g=t.concat();for(r=0;r<e;r++)g[r]=g[r].concat();for(var m=f(e).valueOf(),v=0;v<n;v++){for(r=v;r<e&&0==g[r][v];)r++;if(r==e||0==g[r][v])throw Error("Cannot calculate inverse, determinant is zero");r!=v&&(p=g[v],g[v]=g[r],g[r]=p,p=m[v],m[v]=m[r],m[r]=p);var y=g[v],b=m[v];for(r=0;r<e;r++){var w=g[r],_=m[r];if(r!=v){if(0!=w[v]){for(o=s(u(w[v]),y[v]),i=v;i<n;i++)w[i]=l(w[i],c(o,y[i]));for(i=0;i<n;i++)_[i]=l(_[i],c(o,b[i]))}}else{for(o=y[v],i=v;i<n;i++)w[i]=s(w[i],o);for(i=0;i<n;i++)_[i]=s(_[i],o)}}}return m}return p.toTex={1:"\\left(${args[0]}\\right)^{-1}"},p}},function(t,e,n){"use strict";var r=n(142),i=r.object,o=r.string;e.name="det",e.factory=function(t,e,r,a){var s=r(n(7)),l=r(n(105)),c=r(n(106)),u=r(n(66)),d=r(n(185)),f=a("det",{any:function(t){return i.clone(t)},"Array | Matrix":function(e){var n;switch((n=t.isMatrix(e)?e.size():Array.isArray(e)?(e=s(e)).size():[]).length){case 0:return i.clone(e);case 1:if(1==n[0])return i.clone(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+o.format(n)+")");case 2:var r=n[0],a=n[1];if(r==a)return function(t,e,n){if(1==e)return i.clone(t[0][0]);if(2==e)return c(u(t[0][0],t[1][1]),u(t[1][0],t[0][1]));for(var r=function(t){var e,n,r=new Array(t.length),i=0;for(e=1;e<t.length;e++)i=l(i,t[e][e]);for(e=0;e<t.length;e++){for(r[e]=new Array(t.length),r[e][e]=d(i),n=0;n<e;n++)r[e][n]=0;for(n=e+1;n<t.length;n++)r[e][n]=t[e][n];e+1<t.length&&(i=c(i,t[e+1][e+1]))}return r},o=t,a=0;a<e-1;a++)o=u(r(o),t);return e%2==0?d(o[0][0]):o[0][0]}(e.clone().valueOf(),r);throw new RangeError("Matrix must be square (size: "+o.format(n)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+o.format(n)+")")}}});return f.toTex={1:"\\det\\left(${args[0]}\\right)"},f}},function(t,e,n){"use strict";var r=n(221),i=n(388),o=n(389);e.name="min",e.factory=function(t,e,a,s){var l=a(n(217)),c=s("min",{"Array | Matrix":d,"Array | Matrix, number | BigNumber":function(t,e){return i(t,e.valueOf(),u)},"...":function(t){if(o(t))throw new TypeError("Scalar values expected in function min");return d(t)}});return c.toTex="\\min\\left(${args}\\right)",c;function u(t,e){return l(t,e)?t:e}function d(t){var e=void 0;if(r(t,function(t){(void 0===e||l(t,e))&&(e=t)}),void 0===e)throw new Error("Cannot calculate min of an empty array");return e}}},function(t,e,n){"use strict";e.name="range",e.factory=function(t,e,r,i){var o=r(n(7)),a=new t.BigNumber(0),s=new t.BigNumber(1),l=i("range",{string:u,"string, boolean":u,"number, number":function(t,e){return c(d(t,e,1))},"number, number, number":function(t,e,n){return c(d(t,e,n))},"number, number, boolean":function(t,e,n){return c(n?f(t,e,1):d(t,e,1))},"number, number, number, boolean":function(t,e,n,r){return c(r?f(t,e,n):d(t,e,n))},"BigNumber, BigNumber":function(t,e){return c(p(t,e,s))},"BigNumber, BigNumber, BigNumber":function(t,e,n){return c(p(t,e,n))},"BigNumber, BigNumber, boolean":function(t,e,n){return c(n?h(t,e,s):p(t,e,s))},"BigNumber, BigNumber, BigNumber, boolean":function(t,e,n,r){return c(r?h(t,e,n):p(t,e,n))}});return l.toTex=void 0,l;function c(t){return"Array"===e.matrix?t:o(t)}function u(n,r){var i=function(t){var e=t.split(":").map(function(t){return Number(t)});if(e.some(function(t){return isNaN(t)}))return null;switch(e.length){case 2:return{start:e[0],end:e[1],step:1};case 3:return{start:e[0],end:e[2],step:e[1]};default:return null}}(n);if(!i)throw new SyntaxError('String "'+n+'" is no valid range');return"BigNumber"===e.number?c((r?h:p)(new t.BigNumber(i.start),new t.BigNumber(i.end),new t.BigNumber(i.step))):c((r?f:d)(i.start,i.end,i.step))}function d(t,e,n){var r=[],i=t;if(n>0)for(;i<e;)r.push(i),i+=n;else if(n<0)for(;i>e;)r.push(i),i+=n;return r}function f(t,e,n){var r=[],i=t;if(n>0)for(;i<=e;)r.push(i),i+=n;else if(n<0)for(;i>=e;)r.push(i),i+=n;return r}function p(t,e,n){var r=[],i=t;if(n.gt(a))for(;i.lt(e);)r.push(i),i=i.plus(n);else if(n.lt(a))for(;i.gt(e);)r.push(i),i=i.plus(n);return r}function h(t,e,n){var r=[],i=t;if(n.gt(a))for(;i.lte(e);)r.push(i),i=i.plus(n);else if(n.lt(a))for(;i.gte(e);)r.push(i),i=i.plus(n);return r}}},function(t,e,n){"use strict";n(13).digits;e.math=!0,e.name="simplifyConstant",e.path="algebra.simplify",e.factory=function(t,e,r,i,o){var a=r(n(752)),s=a.isCommutative,l=a.isAssociative,c=a.allChildren,u=a.createMakeNodeFunction,d=o.expression.node.ConstantNode,f=o.expression.node.OperatorNode,p=o.expression.node.FunctionNode;function h(e,n){try{return v(o[e].apply(null,n))}catch(r){return n=n.map(function(e){return t.isFraction(e)?e.valueOf():e}),v(o[e].apply(null,n))}}var g=i({Fraction:function(t){var e,n=t.s*t.n;return e=n<0?new f("-","unaryMinus",[new d(-n)]):new d(n),1===t.d?e:new f("/","divide",[e,new d(t.d)])},number:function(t){return t<0?y(new d(-t)):new d(t)},BigNumber:function(t){return t<0?y(new d(t.negated().toString(),"number")):new d(t.toString(),"number")},Complex:function(t){throw"Cannot convert Complex number to Node"}});function m(t){if(isFinite(t)){var e=o.fraction(t);if(e.valueOf()===t)return e}return t}var v=i({string:function(t){return"BigNumber"===e.number?o.bignumber(t):"Fraction"===e.number?o.fraction(t):m(parseFloat(t))},Fraction:function(t){return t},BigNumber:function(t){return t},number:function(t){return m(t)},Complex:function(t){return 0!==t.im?t:m(t.re)}});function y(t){return new f("-","unaryMinus",[t])}function b(e,n,r){return n.reduce(function(n,i){if(t.isNode(n)||t.isNode(i))t.isNode(n)?t.isNode(i)||(i=g(i)):n=g(n);else{try{return h(e,[n,i])}catch(t){}n=g(n),i=g(i)}return r([n,i])})}function w(e){switch(e.type){case"SymbolNode":return e;case"ConstantNode":return"number"===e.valueType?v(e.value):e;case"FunctionNode":if(o[e.name]&&o[e.name].rawArgs)return e;if(-1===["add","multiply"].indexOf(e.name)){if(!(n=e.args.map(w)).some(t.isNode))try{return h(e.name,n)}catch(t){}return n=n.map(function(e){return t.isNode(e)?e:g(e)}),new p(e.name,n)}case"OperatorNode":var n,r,i=e.fn.toString(),a=u(e);if(1===e.args.length)n=[w(e.args[0])],r=t.isNode(n[0])?a(n):h(i,n);else if(l(e))if(n=(n=c(e)).map(w),s(i)){for(var d=[],f=[],m=0;m<n.length;m++)t.isNode(n[m])?f.push(n[m]):d.push(n[m]);d.length>1?(r=b(i,d,a),f.unshift(r),r=b(i,f,a)):r=b(i,n,a)}else r=b(i,n,a);else r=b(i,n=e.args.map(w),a);return r;case"ParenthesisNode":return w(e.content);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"UpdateNode":case"ConditionalNode":default:throw"Unimplemented node type in simplifyConstant: "+e.type}}return function(e){var n=w(e);return t.isNode(n)?n:g(n)}}},function(t,e,n){"use strict";e.factory=function(t,e,n,r,i){var o=i.expression.node.FunctionNode,a=i.expression.node.OperatorNode,s=i.expression.node.SymbolNode,l={add:!0,multiply:!0},c={add:!0,multiply:!0};function u(e,n){if(!t.isOperatorNode(e))return!1;var r=e.fn.toString();return n&&n.hasOwnProperty(r)&&n[r].hasOwnProperty("associative")?n[r].associative:c[r]||!1}function d(e){var n,r=[],i=function(e){for(var o=0;o<e.args.length;o++){var a=e.args[o];t.isOperatorNode(a)&&n===a.op?i(a):r.push(a)}};return u(e)?(n=e.op,i(e),r):e.args}function f(e){return t.isOperatorNode(e)?function(t){try{return new a(e.op,e.fn,t)}catch(t){return console.error(t),[]}}:function(t){return new o(new s(e.name),t)}}return{createMakeNodeFunction:f,isCommutative:function(e,n){if(!t.isOperatorNode(e))return!0;var r=e.fn.toString();return n&&n.hasOwnProperty(r)&&n[r].hasOwnProperty("commutative")?n[r].commutative:l[r]||!1},isAssociative:u,flatten:function t(e){if(!e.args||0===e.args.length)return e;e.args=d(e);for(var n=0;n<e.args.length;n++)t(e.args[n])},allChildren:d,unflattenr:function t(e){if(e.args&&0!==e.args.length){for(var n=f(e),r=e.args.length,i=0;i<r;i++)t(e.args[i]);if(r>2&&u(e)){for(var o=e.args.pop();e.args.length>0;)o=n([e.args.pop(),o]);e.args=o.args}}},unflattenl:function t(e){if(e.args&&0!==e.args.length){for(var n=f(e),r=e.args.length,i=0;i<r;i++)t(e.args[i]);if(r>2&&u(e)){for(var o=e.args.shift();e.args.length>0;)o=n([o,e.args.shift()]);e.args=o.args}}}}},e.math=!0},function(t,e,n){"use strict";e.math=!0,e.name="simplifyCore",e.path="algebra.simplify",e.factory=function(t,e,n,r,i){var o=i.expression.node.ConstantNode,a=i.expression.node.OperatorNode,s=i.expression.node.FunctionNode,l=i.expression.node.ParenthesisNode,c=new o(0),u=new o(1);return function e(n){if(t.isOperatorNode(n)&&n.args.length<=2){var r=e(n.args[0]),d=n.args[1]&&e(n.args[1]);if("+"===n.op){if(1===n.args.length)return n.args[0];if(t.isConstantNode(r)){if("0"===r.value)return d;if(t.isConstantNode(d)&&r.value&&r.value.length<5&&d.value&&d.value.length<5)return new o(Number(r.value)+Number(d.value))}return t.isConstantNode(d)&&"0"===d.value?r:2===n.args.length&&t.isOperatorNode(d)&&"-"===d.op&&"unaryMinus"===d.fn?new a("-","subtract",[r,d.args[0]]):new a(n.op,n.fn,d?[r,d]:[r])}if("-"===n.op){if(t.isConstantNode(r)&&d){if(t.isConstantNode(d)&&r.value&&r.value.length<5&&d.value&&d.value.length<5)return new o(Number(r.value)-Number(d.value));if("0"===r.value)return new a("-","unaryMinus",[d])}if("subtract"===n.fn&&2===n.args.length)return t.isConstantNode(d)&&"0"===d.value?r:t.isOperatorNode(d)&&"unaryMinus"===d.fn?e(new a("+","add",[r,d.args[0]])):new a(n.op,n.fn,[r,d]);if("unaryMinus"===n.fn){if(t.isOperatorNode(r)){if("unaryMinus"===r.fn)return r.args[0];if("subtract"===r.fn)return new a("-","subtract",[r.args[1],r.args[0]])}return new a(n.op,n.fn,[r])}throw new Error("never happens")}if("*"===n.op){if(t.isConstantNode(r)){if("0"===r.value)return c;if("1"===r.value)return d;if(t.isConstantNode(d)&&r.value&&r.value.length<5&&d.value&&d.value.length<5)return new o(Number(r.value)*Number(d.value))}if(t.isConstantNode(d)){if("0"===d.value)return c;if("1"===d.value)return r;if(t.isOperatorNode(r)&&r.op===n.op){var f=r.args[0];if(t.isConstantNode(f)&&d.value&&d.value.length<5&&f.value&&f.value.length<5){var p=new o(Number(r.args[0].value)*Number(d.value));return new a(n.op,n.fn,[p,r.args[1]])}}return new a(n.op,n.fn,[d,r])}return new a(n.op,n.fn,[r,d])}if("/"===n.op){if(t.isConstantNode(r)){if("0"===r.value)return c;if(t.isConstantNode(d)&&r.value&&r.value.length<5&&("1"===d.value||"2"===d.value||"4"===d.value))return new o(Number(r.value)/Number(d.value))}return new a(n.op,n.fn,[r,d])}if("^"===n.op){if(t.isConstantNode(d)){if("0"===d.value)return u;if("1"===d.value)return r;if(t.isConstantNode(r)&&r.value&&r.value.length<5&&d.value&&d.value.length<2)return new o(i.pow(Number(r.value),Number(d.value)));if(t.isOperatorNode(r)&&"^"===r.op){var h=r.args[1];if(t.isConstantNode(h))return new a(n.op,n.fn,[r.args[0],new o(h.value*d.value)])}}return new a(n.op,n.fn,[r,d])}}else{if(t.isParenthesisNode(n)){var g=e(n.content);return t.isParenthesisNode(g)||t.isSymbolNode(g)||t.isConstantNode(g)?g:new l(g)}if(t.isFunctionNode(n)){var m=n.args.map(e);return 1===m.length&&t.isParenthesisNode(m[0])&&(m[0]=m[0].content),new s(e(n.fn),m)}}return n}}},function(t,e,n){"use strict";var r=n(28);e.name="clone",e.factory=function(t,e,n,i){var o=i("clone",{any:r.clone});return o.toTex=void 0,o}},function(t,e,n){"use strict";var r=n(13).nearlyEqual,i=n(215);e.name="unequal",e.factory=function(t,e,o,a){var s=o(n(7)),l=o(n(92)),c=o(n(143)),u=o(n(93)),d=o(n(41)),f=o(n(35)),p=n(27),h=a("unequal",{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:g(t,e)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,g);break;default:n=l(e,t,g,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,g,!1);break;default:n=d(t,e,g)}}return n},"Array, Array":function(t,e){return h(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return h(s(t),e)},"Matrix, Array":function(t,e){return h(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,g,!1);break;default:n=f(t,e,g,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=u(e,t,g,!0);break;default:n=f(e,t,g,!0)}return n},"Array, any":function(t,e){return f(s(t),e,g,!1).valueOf()},"any, Array":function(t,e){return f(s(e),t,g,!0).valueOf()}}),g=a("_unequal",{"boolean, boolean":function(t,e){return t!==e},"number, number":function(t,n){return!r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return!i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return!t.equals(e)},"Complex, Complex":function(t,e){return!t.equals(e)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return h(t.value,e.value)},"string, string":function(t,e){return t!==e}});return h.toTex={2:"\\left(${args[0]}"+p.operators.unequal+"${args[1]}\\right)"},h}},function(t,e,n){"use strict";var r=n(13),i=n(9);e.name="sign",e.factory=function(t,e,n,o){var a=o("sign",{number:r.sign,Complex:function(t){return t.sign()},BigNumber:function(e){return new t.BigNumber(e.cmp(0))},Fraction:function(e){return new t.Fraction(e.s,1)},"Array | Matrix":function(t){return i(t,a,!0)},Unit:function(t){return a(t.value)}});return a.toTex={1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(9);e.name="conj",e.factory=function(t,e,n,i){var o=i("conj",{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.conjugate()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\left(${args[0]}\\right)^*"},o}},function(t,e,n){"use strict";var r=n(142).object;e.name="lup",e.factory=function(t,e,i,o){var a=i(n(7)),s=i(n(145)),l=i(n(91)),c=i(n(82)),u=i(n(107)),d=i(n(106)),f=i(n(184)),p=i(n(61)),h=i(n(185)),g=t.SparseMatrix,m=t.DenseMatrix,v=t.Spa,y=o("lup",{DenseMatrix:function(t){return b(t)},SparseMatrix:function(t){return w(t)},Array:function(t){var e=a(t),n=b(e);return{L:n.L.valueOf(),U:n.U.valueOf(),p:n.p}}}),b=function(t){var e,n,i,o=t._size[0],a=t._size[1],h=Math.min(o,a),g=r.clone(t._data),v=[],y=[o,h],b=[],w=[h,a],_=[];for(e=0;e<o;e++)_[e]=e;for(n=0;n<a;n++){if(n>0)for(e=0;e<o;e++){var x=Math.min(e,n),S=0;for(i=0;i<x;i++)S=l(S,u(g[e][i],g[i][n]));g[e][n]=d(g[e][n],S)}var C=n,E=0,T=0;for(e=n;e<o;e++){var M=g[e][n],k=s(M);f(k,E)&&(C=e,E=k,T=M)}if(n!==C&&(_[n]=[_[C],_[C]=_[n]][0],m._swapRows(n,C,g)),n<o)for(e=n+1;e<o;e++){var A=g[e][n];p(A,0)||(g[e][n]=c(g[e][n],T))}}for(n=0;n<a;n++)for(e=0;e<o;e++)0===n&&(e<a&&(b[e]=[]),v[e]=[]),e<n?(e<a&&(b[e][n]=g[e][n]),n<o&&(v[e][n]=0)):e!==n?(e<a&&(b[e][n]=0),n<o&&(v[e][n]=g[e][n])):(e<a&&(b[e][n]=g[e][n]),n<o&&(v[e][n]=1));var I=new m({data:v,size:y}),O=new m({data:b,size:w}),P=[];for(e=0,h=_.length;e<h;e++)P[_[e]]=e;return{L:I,U:O,p:P,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}},w=function(t){var e,n,r,i=t._size[0],o=t._size[1],a=Math.min(i,o),l=t._values,d=t._index,m=t._ptr,y=[],b=[],w=[],_=[i,a],x=[],S=[],C=[],E=[a,o],T=[],M=[];for(e=0;e<i;e++)T[e]=e,M[e]=e;var k=function(t,e){var n=M[t],r=M[e];T[n]=e,T[r]=t,M[t]=r,M[e]=n};for(n=0;n<o;n++){var A=new v;n<i&&(w.push(y.length),y.push(1),b.push(n)),C.push(x.length);var I=m[n],O=m[n+1];for(r=I;r<O;r++)e=d[r],A.set(T[e],l[r]);n>0&&A.forEach(0,n-1,function(t,e){g._forEachRow(t,y,b,w,function(n,r){n>t&&A.accumulate(n,h(u(r,e)))})});var P=n,L=A.get(n),D=s(L);A.forEach(n+1,i-1,function(t,e){var n=s(e);f(n,D)&&(P=t,D=n,L=e)}),n!==P&&(g._swapRows(n,P,_[1],y,b,w),g._swapRows(n,P,E[1],x,S,C),A.swap(n,P),k(n,P)),A.forEach(0,i-1,function(t,e){t<=n?(x.push(e),S.push(t)):(e=c(e,L),p(e,0)||(y.push(e),b.push(t)))})}return C.push(x.length),w.push(y.length),{L:new g({values:y,index:b,ptr:w,size:_}),U:new g({values:x,index:S,ptr:C,size:E}),p:T,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}};return y}},function(t,e,n){"use strict";var r=n(142).number.isInteger;e.name="slu",e.factory=function(t,e,i,o){var a=i(n(1610)),s=i(n(1618));return o("slu",{"SparseMatrix, number, number":function(t,e,n){if(!r(e)||e<0||e>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(n<0||n>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var i=a(e,t,!1),o=s(t,i,n);return{L:o.L,U:o.U,p:o.pinv,q:i.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})}},function(t,e,n){"use strict";e.name="cs_tdfs",e.path="sparse",e.factory=function(){return function(t,e,n,r,i,o,a){var s=0;for(n[a]=t;s>=0;){var l=n[a+s],c=n[r+l];-1==c?(s--,o[e++]=l):(n[r+l]=n[i+c],n[a+ ++s]=c)}return e}}},function(t,e,n){"use strict";var r=n(13).nearlyEqual,i=n(215);e.name="largerEq",e.factory=function(t,e,o,a){var s=o(n(7)),l=o(n(92)),c=o(n(143)),u=o(n(93)),d=o(n(41)),f=o(n(35)),p=n(27),h=a("largerEq",{"boolean, boolean":function(t,e){return t>=e},"number, number":function(t,n){return t>=n||r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.gte(n)||i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return-1!==t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return h(t.value,e.value)},"string, string":function(t,e){return t>=e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,h);break;default:n=l(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,h,!1);break;default:n=d(t,e,h)}}return n},"Array, Array":function(t,e){return h(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return h(s(t),e)},"Matrix, Array":function(t,e){return h(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,h,!1);break;default:n=f(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=u(e,t,h,!0);break;default:n=f(e,t,h,!0)}return n},"Array, any":function(t,e){return f(s(t),e,h,!1).valueOf()},"any, Array":function(t,e){return f(s(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+p.operators.largerEq+"${args[1]}\\right)"},h}},function(t,e,n){"use strict";e.name="cs_marked",e.path="sparse",e.factory=function(){return function(t,e){return t[e]<0}}},function(t,e,n){"use strict";e.name="cs_mark",e.path="sparse",e.factory=function(t,e,r){var i=r(n(528));return function(t,e){t[e]=i(t[e])}}},function(t,e,n){"use strict";e.name="lsolve",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(82)),s=r(n(107)),l=r(n(106)),c=r(n(61)),u=r(n(529)),d=t.DenseMatrix,f=i("lsolve",{"SparseMatrix, Array | Matrix":function(t,e){return h(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return p(t,e)},"Array, Array | Matrix":function(t,e){var n=o(t);return p(n,e).valueOf()}}),p=function(t,e){for(var n=(e=u(t,e,!0))._data,r=t._size[0],i=t._size[1],o=[],f=t._data,p=0;p<i;p++){var h,g=n[p][0]||0;if(c(g,0))h=0;else{var m=f[p][p];if(c(m,0))throw new Error("Linear system cannot be solved since matrix is singular");h=a(g,m);for(var v=p+1;v<r;v++)n[v]=[l(n[v][0]||0,s(h,f[v][p]))]}o[p]=[h]}return new d({data:o,size:[r,1]})},h=function(t,e){for(var n,r,i=(e=u(t,e,!0))._data,o=t._size[0],f=t._size[1],p=t._values,h=t._index,g=t._ptr,m=[],v=0;v<f;v++){var y=i[v][0]||0;if(c(y,0))m[v]=[0];else{var b=0,w=[],_=[],x=g[v+1];for(r=g[v];r<x;r++)(n=h[r])===v?b=p[r]:n>v&&(w.push(p[r]),_.push(n));if(c(b,0))throw new Error("Linear system cannot be solved since matrix is singular");var S=a(y,b);for(r=0,x=_.length;r<x;r++)i[n=_[r]]=[l(i[n][0]||0,s(S,w[r]))];m[v]=[S]}}return new d({data:m,size:[o,1]})};return f}},function(t,e,n){"use strict";e.name="usolve",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(82)),s=r(n(107)),l=r(n(106)),c=r(n(61)),u=r(n(529)),d=t.DenseMatrix,f=i("usolve",{"SparseMatrix, Array | Matrix":function(t,e){return h(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return p(t,e)},"Array, Array | Matrix":function(t,e){var n=o(t);return p(n,e).valueOf()}}),p=function(t,e){for(var n=(e=u(t,e,!0))._data,r=t._size[0],i=t._size[1],o=[],f=t._data,p=i-1;p>=0;p--){var h,g=n[p][0]||0;if(c(g,0))h=0;else{var m=f[p][p];if(c(m,0))throw new Error("Linear system cannot be solved since matrix is singular");h=a(g,m);for(var v=p-1;v>=0;v--)n[v]=[l(n[v][0]||0,s(h,f[v][p]))]}o[p]=[h]}return new d({data:o,size:[r,1]})},h=function(t,e){for(var n,r,i=(e=u(t,e,!0))._data,o=t._size[0],f=t._size[1],p=t._values,h=t._index,g=t._ptr,m=[],v=f-1;v>=0;v--){var y=i[v][0]||0;if(c(y,0))m[v]=[0];else{var b=0,w=[],_=[],x=g[v],S=g[v+1];for(r=S-1;r>=x;r--)(n=h[r])===v?b=p[r]:n<v&&(w.push(p[r]),_.push(n));if(c(b,0))throw new Error("Linear system cannot be solved since matrix is singular");var C=a(y,b);for(r=0,S=_.length;r<S;r++)i[n=_[r]]=[l(i[n][0],s(C,w[r]))];m[v]=[C]}}return new d({data:m,size:[o,1]})};return f}},function(t,e,n){"use strict";e.name="dotDivide",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(82)),s=n(27),l=r(n(131)),c=r(n(92)),u=r(n(143)),d=r(n(94)),f=r(n(93)),p=r(n(41)),h=r(n(35)),g=i("dotDivide",{"any, any":a,"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,a,!1);break;default:n=l(e,t,a,!0)}break;default:switch(e.storage()){case"sparse":n=c(t,e,a,!1);break;default:n=p(t,e,a)}}return n},"Array, Array":function(t,e){return g(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return g(o(t),e)},"Matrix, Array":function(t,e){return g(t,o(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=d(t,e,a,!1);break;default:n=h(t,e,a,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=f(e,t,a,!0);break;default:n=h(e,t,a,!0)}return n},"Array, any":function(t,e){return h(o(t),e,a,!1).valueOf()},"any, Array":function(t,e){return h(o(e),t,a,!0).valueOf()}});return g.toTex={2:"\\left(${args[0]}"+s.operators.dotDivide+"${args[1]}\\right)"},g}},function(t,e,n){"use strict";var r=n(65);e.name="algorithm09",e.factory=function(t,e,i,o){var a=i(n(61)),s=t.SparseMatrix;return function(t,e,n){var i=t._values,l=t._index,c=t._ptr,u=t._size,d=t._datatype,f=e._values,p=e._index,h=e._ptr,g=e._size,m=e._datatype;if(u.length!==g.length)throw new r(u.length,g.length);if(u[0]!==g[0]||u[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+g+")");var v,y=u[0],b=u[1],w=a,_=0,x=n;"string"==typeof d&&d===m&&(v=d,w=o.find(a,[v,v]),_=o.convert(0,v),x=o.find(n,[v,v]));var S,C,E,T,M,k=i&&f?[]:void 0,A=[],I=[],O=new s({values:k,index:A,ptr:I,size:[y,b],datatype:v}),P=k?[]:void 0,L=[];for(C=0;C<b;C++){I[C]=A.length;var D=C+1;if(P)for(T=h[C],M=h[C+1],E=T;E<M;E++)L[S=p[E]]=D,P[S]=f[E];for(T=c[C],M=c[C+1],E=T;E<M;E++)if(S=l[E],P){var N=L[S]===D?P[S]:_,R=x(i[E],N);w(R,_)||(A.push(S),k.push(R))}else A.push(S)}return I[b]=A.length,O}}},function(t,e,n){"use strict";var r=n(9);e.name="log",e.factory=function(t,e,i,o){var a=i(n(82)),s=o("log",{number:function(n){return n>=0||e.predictable?Math.log(n):new t.Complex(n,0).log()},Complex:function(t){return t.log()},BigNumber:function(n){return!n.isNegative()||e.predictable?n.ln():new t.Complex(n.toNumber(),0).log()},"Array | Matrix":function(t){return r(t,s)},"any, any":function(t,e){return a(s(t),s(e))}});return s.toTex={1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(28).clone,i=n(45).format;e.name="trace",e.factory=function(t,e,o,a){var s=o(n(7)),l=o(n(105)),c=a("trace",{Array:function(t){return c(s(t))},Matrix:function(t){var e;switch(t.storage()){case"dense":e=u(t);break;case"sparse":e=d(t)}return e},any:r}),u=function(t){var e=t._size,n=t._data;switch(e.length){case 1:if(1==e[0])return r(n[0]);throw new RangeError("Matrix must be square (size: "+i(e)+")");case 2:var o=e[0];if(o===e[1]){for(var a=0,s=0;s<o;s++)a=l(a,n[s][s]);return a}throw new RangeError("Matrix must be square (size: "+i(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+i(e)+")")}},d=function(t){var e=t._values,n=t._index,r=t._ptr,o=t._size,a=o[0],s=o[1];if(a===s){var c=0;if(e.length>0)for(var u=0;u<s;u++)for(var d=r[u],f=r[u+1],p=d;p<f;p++){var h=n[p];if(h===u){c=l(c,e[p]);break}if(h>u)break}return c}throw new RangeError("Matrix must be square (size: "+i(o)+")")};return c.toTex={1:"\\mathrm{tr}\\left(${args[0]}\\right)"},c}},function(t,e,n){"use strict";e.name="stirlingS2",e.factory=function(t,e,r,i){var o=r(n(105)),a=r(n(106)),s=r(n(66)),l=r(n(256)),c=r(n(253)),u=r(n(392)),d=r(n(393)),f=r(n(316)),p=r(n(258)),h=r(n(184)),g=i("stirlingS2",{"number | BigNumber, number | BigNumber":function(t,e){if(!p(t)||f(t)||!p(e)||f(e))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(e,t))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var n=u(e),r=0,i=0;i<=e;i++){var g=c(-1,a(e,i)),m=d(e,i),v=c(i,t);r=o(r,s(s(m,v),g))}return l(r,n)}});return g.toTex={2:"\\mathrm{S}\\left(${args}\\right)"},g}},function(t,e,n){"use strict";var r=n(9),i=n(13).isInteger;var o=4.7421875,a=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];e.name="gamma",e.factory=function(t,e,s,l){var c=s(n(66)),u=s(n(253)),d=l("gamma",{number:function(t){var e,n;if(i(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,s=t-1;r>1;)s*=r,r--;return 0==s&&(s=1),s}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*d(1-t));if(t>=171.35)return 1/0;if(t>85){var l=t*t,c=l*t,u=c*t,f=u*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*l)-139/(51840*c)-571/(2488320*u)+163879/(209018880*f)+5246819/(75246796800*f*t))}--t,n=a[0];for(var p=1;p<a.length;++p)n+=a[p]/(t+p);return e=t+o+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n},Complex:function(e){var n,r;if(0==e.im)return d(e.re);e=new t.Complex(e.re-1,e.im),r=new t.Complex(a[0],0);for(var i=1;i<a.length;++i){var s=e.re+i,l=s*s+e.im*e.im;0!=l?(r.re+=a[i]*s/l,r.im+=-a[i]*e.im/l):r.re=a[i]<0?-1/0:1/0}n=new t.Complex(e.re+o+.5,e.im);var f=Math.sqrt(2*Math.PI);e.re+=.5;var p=u(n,e);0==p.im?p.re*=f:0==p.re?p.im*=f:(p.re*=f,p.im*=f);var h=Math.exp(-n.re);return n.re=h*Math.cos(-n.im),n.im=h*Math.sin(-n.im),c(c(p,n),r)},BigNumber:function(n){if(n.isInteger())return n.isNegative()||n.isZero()?new t.BigNumber(1/0):function(n){if(n.isZero())return new t.BigNumber(1);for(var r=e.precision+(0|Math.log(n.toNumber())),i=new(t.BigNumber.clone({precision:r}))(n),o=n.toNumber()-1;o>1;)i=i.times(o),o--;return new t.BigNumber(i.toPrecision(t.BigNumber.precision))}(n.minus(1));if(!n.isFinite())return new t.BigNumber(n.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(t){return r(t,d)}});return d.toTex={1:"\\Gamma\\left(${args[0]}\\right)"},d}},function(t,e,n){"use strict";var r=n(9);e.name="not",e.factory=function(t,e,i,o){var a=n(27),s=o("not",{number:function(t){return!t},Complex:function(t){return 0===t.re&&0===t.im},BigNumber:function(t){return t.isZero()||t.isNaN()},Unit:function(t){return s(t.value)},"Array | Matrix":function(t){return r(t,s)}});return s.toTex={1:a.operators.not+"\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(182).maxArgumentCount;function i(t,e){var n=r(e),i=function(r,o){return Array.isArray(r)?r.map(function(t,e){return i(t,o.concat(e))}):1===n?e(r):2===n?e(r,o):e(r,o,t)};return i(t,[])}e.name="map",e.factory=function(t,e,n,r){var o=r("map",{"Array, function":i,"Matrix, function":function(t,e){return t.map(e)}});return o.toTex=void 0,o}},function(t,e,n){"use strict";var r=n(11).size;e.name="sort",e.factory=function(t,e,i,o){var a=i(n(7)),s=i(n(259)),l=function(t,e){return-s(t,e)},c=i(n(161)),u=o("sort",{Array:function(t){return f(t),t.sort(s)},Matrix:function(t){return p(t),a(t.toArray().sort(s),t.storage())},"Array, function":function(t,e){return f(t),t.sort(e)},"Matrix, function":function(t,e){return p(t),a(t.toArray().sort(e),t.storage())},"Array, string":function(t,e){return f(t),t.sort(d(e))},"Matrix, string":function(t,e){return p(t),a(t.toArray().sort(d(e)),t.storage())}});function d(t){if("asc"===t)return s;if("desc"===t)return l;if("natural"===t)return c;throw new Error('String "asc", "desc", or "natural" expected')}function f(t){if(1!==r(t).length)throw new Error("One dimensional array expected")}function p(t){if(1!==t.size().length)throw new Error("One dimensional matrix expected")}return u.toTex=void 0,u}},function(t,e){t.exports=function t(e,n){"use strict";var r,i,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,c=/^0/,u=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},d=u(e).replace(a,"")||"",f=u(n).replace(a,"")||"",p=d.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(d.match(l),16)||1!==p.length&&d.match(s)&&Date.parse(d),m=parseInt(f.match(l),16)||g&&f.match(s)&&Date.parse(f)||null;if(m){if(g<m)return-1;if(g>m)return 1}for(var v=0,y=Math.max(p.length,h.length);v<y;v++){if(r=!(p[v]||"").match(c)&&parseFloat(p[v])||p[v]||0,i=!(h[v]||"").match(c)&&parseFloat(h[v])||h[v]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},function(t,e,n){"use strict";var r=n(221);e.name="sum",e.factory=function(t,e,i,o){var a=i(n(91)),s=o("sum",{"Array | Matrix":function(t){return l(t)},"Array | Matrix, number | BigNumber":function(){throw new Error("sum(A, dim) is not yet supported")},"...":function(t){return l(t)}});return s.toTex=void 0,s;function l(n){var i=void 0;if(r(n,function(t){i=void 0===i?t:a(i,t)}),void 0===i)switch(e.number){case"number":return 0;case"BigNumber":return new t.BigNumber(0);case"Fraction":return new t.Fraction(0);default:return 0}return i}}},function(t,e,n){"use strict";(function(e){var n=256,r=[],i=void 0===e?window:e,o=Math.pow(n,6),a=Math.pow(2,52),s=2*a,l=n-1,c=Math.random;function u(t,e){for(var n,r=t+"",i=0;i<r.length;)e[l&i]=l&(n^=19*e[l&i])+r.charCodeAt(i++);return d(e)}function d(t){return String.fromCharCode.apply(0,t)}t.exports=function(e,c){if(c&&!0===c.global)return c.global=!1,Math.random=t.exports(e,c),c.global=!0,Math.random;var f=[],p=(u(function t(e,n){var r,i=[],o=(typeof e)[0];if(n&&"o"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"s"==o?e:e+"\0"}(c&&c.entropy||!1?[e,d(r)]:0 in arguments?e:function(t){try{return i.crypto.getRandomValues(t=new Uint8Array(n)),d(t)}catch(t){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,d(r)]}}(),3),f),new function(t){var e,r=t.length,i=this,o=0,a=i.i=i.j=0,s=i.S=[];r||(t=[r++]);for(;o<n;)s[o]=o++;for(o=0;o<n;o++)s[o]=s[a=l&a+t[o%r]+(e=s[o])],s[a]=e;(i.g=function(t){for(var e,r=0,o=i.i,a=i.j,s=i.S;t--;)e=s[o=l&o+1],r=r*n+s[l&(s[o]=s[a=l&a+e])+(s[a]=e)];return i.i=o,i.j=a,r})(n)}(f));return u(d(p.S),r),function(){for(var t=p.g(6),e=o,r=0;t<a;)t=(t+r)*n,e*=n,r=p.g(1);for(;t>=s;)t/=2,e/=2,r>>>=1;return(t+r)/e}},t.exports.resetGlobal=function(){Math.random=c},u(Math.random(),r)}).call(this,n(78))},function(t,e,n){"use strict";var r=n(11).flatten,i=n(11).identify,o=n(11).generalize;e.name="setDifference",e.factory=function(t,e,a,s){var l=a(n(160)),c=a(n(144)),u=a(n(252)),d=a(n(146)),f=a(n(112)),p=a(n(161));return s("setDifference",{"Array | Matrix, Array | Matrix":function(t,e){if(0===f(d(t),new c(0)))var n=[];else{if(0===f(d(e),new c(0)))return r(t.toArray());for(var a,s=i(r(Array.isArray(t)?t:t.toArray()).sort(p)),h=i(r(Array.isArray(e)?e:e.toArray()).sort(p)),g=(n=[],0);g<s.length;g++){a=!1;for(var m=0;m<h.length;m++)if(l(s[g].value,h[m].value)&&s[g].identifier===h[m].identifier){a=!0;break}a||n.push(s[g])}}return Array.isArray(t)&&Array.isArray(e)?o(n):new u(o(n))}})}},function(t,e,n){"use strict";var r=n(11).flatten,i=n(11).identify,o=n(11).generalize;e.name="setIntersect",e.factory=function(t,e,a,s){var l=a(n(160)),c=a(n(144)),u=a(n(252)),d=a(n(146)),f=a(n(112)),p=a(n(161));return s("setIntersect",{"Array | Matrix, Array | Matrix":function(t,e){if(0===f(d(t),new c(0))||0===f(d(e),new c(0)))var n=[];else for(var a=i(r(Array.isArray(t)?t:t.toArray()).sort(p)),s=i(r(Array.isArray(e)?e:e.toArray()).sort(p)),h=(n=[],0);h<a.length;h++)for(var g=0;g<s.length;g++)if(l(a[h].value,s[g].value)&&a[h].identifier===s[g].identifier){n.push(a[h]);break}return Array.isArray(t)&&Array.isArray(e)?o(n):new u(o(n))}})}},function(t,e,n){"use strict";var r=n(11).flatten;e.name="setSymDifference",e.factory=function(t,e,i,o){var a=i(n(144)),s=i(n(387)),l=i(n(146)),c=(i(n(774)),i(n(112))),u=i(n(778));return o("setSymDifference",{"Array | Matrix, Array | Matrix":function(t,e){if(0===c(l(t),new a(0)))return r(e);if(0===c(l(e),new a(0)))return r(t);var n=r(t),i=r(e);return s(u(n,i),u(i,n))}})}},function(t,e,n){"use strict";var r=n(11).flatten,i=(n(388),n(389));e.name="median",e.factory=function(t,e,o,a){var s=o(n(91)),l=o(n(82)),c=o(n(259)),u=o(n(533)),d=a("median",{"Array | Matrix":f,"Array | Matrix, number | BigNumber":function(t,e){throw new Error("median(A, dim) is not yet supported")},"...":function(t){if(i(t))throw new TypeError("Scalar values expected in function median");return f(t)}});function f(t){var e=(t=r(t.valueOf())).length;if(0==e)throw new Error("Cannot calculate median of an empty array");if(e%2==0){for(var n=e/2-1,i=u(t,n+1),o=t[n],a=0;a<n;++a)c(t[a],o)>0&&(o=t[a]);return h(o,i)}var s=u(t,(e-1)/2);return p(s)}var p=a({"number | BigNumber | Complex | Unit":function(t){return t}}),h=a({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(t,e){return l(s(t,e),2)}});return d.toTex=void 0,d}},function(t,e,n){"use strict";var r="unbiased",i=n(221);e.name="var",e.factory=function(t,e,o,a){var s=o(n(91)),l=o(n(106)),c=o(n(107)),u=o(n(82)),d=a("variance",{"Array | Matrix":function(t){return f(t,r)},"Array | Matrix, string":f,"...":function(t){return f(t,r)}});return d.toTex="\\mathrm{Var}\\left(${args}\\right)",d;function f(e,n){var r=0,o=0;if(0==e.length)throw new SyntaxError("Function var requires one or more parameters (0 provided)");if(i(e,function(t){r=s(r,t),o++}),0===o)throw new Error("Cannot calculate var of an empty array");var a=u(r,o);switch(r=0,i(e,function(t){var e=l(t,a);r=s(r,c(e,e))}),n){case"uncorrected":return u(r,o);case"biased":return u(r,o+1);case"unbiased":var d=t.isBigNumber(r)?new t.BigNumber(0):0;return 1==o?d:u(r,o-1);default:throw new Error('Unknown normalization "'+n+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}}},function(t,e,n){"use strict";var r=n(9);var i=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)};e.name="acosh",e.factory=function(t,e,n,o){var a=o("acosh",{number:function(n){return n>=1||e.predictable?i(n):n<=-1?new t.Complex(Math.log(Math.sqrt(n*n-1)-n),Math.PI):new t.Complex(n,0).acosh()},Complex:function(t){return t.acosh()},BigNumber:function(t){return t.acosh()},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={1:"\\cosh^{-1}\\left(${args[0]}\\right)"},a}},,,function(t,e){var n=9007199254740991,r=Math.floor;t.exports=function(t,e){var i="";if(!t||e<1||e>n)return i;do{e%2&&(i+=t),(e=r(e/2))&&(t+=t)}while(e);return i}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}},function(t,e,n){var r=n(121);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e,n){var r=n(187),i=n(121);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,function(t,r,i){o[++n]=e(t,r,i)}),o}},function(t,e,n){var r=n(163),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),l=Array(s);++a<s;)l[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(l),r(t,this,c)}}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(212),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e){var n=800,r=16,i=Date.now;t.exports=function(t){var e=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(148),i=n(260),o=n(108),a=i(function(t,e){r(e,o(e),t)});t.exports=a},function(t,e,n){var r=n(187);t.exports=function(t,e){var n=[];return r(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}},function(t,e){var n="Expected a function";t.exports=function(t,e,r){if("function"!=typeof t)throw new TypeError(n);return setTimeout(function(){t.apply(void 0,r)},e)}},function(t,e,n){(function(t){var r=n(79),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(120)(t))},function(t,e,n){var r=n(378),i=n(399),o=n(509),a=n(709),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(541);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(262),i=n(399),o=n(309);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e,n){var r=n(104),i=n(802),o=i?function(t,e){return i.set(t,e),t}:r;t.exports=o},function(t,e,n){var r=n(713),i=r&&new r;t.exports=i},function(t,e,n){var r=n(804),i=n(805),o=n(1831),a=n(400),s=n(806),l=n(263),c=n(1838),u=n(223),d=n(79),f=1,p=2,h=8,g=16,m=128,v=512;t.exports=function t(e,n,y,b,w,_,x,S,C,E){var T=n&m,M=n&f,k=n&p,A=n&(h|g),I=n&v,O=k?void 0:a(e);return function f(){for(var p=arguments.length,h=Array(p),g=p;g--;)h[g]=arguments[g];if(A)var m=l(f),v=o(h,m);if(b&&(h=r(h,b,w,A)),_&&(h=i(h,_,x,A)),p-=v,A&&p<E){var P=u(h,m);return s(e,n,t,f.placeholder,y,h,P,S,C,E-p)}var L=M?y:this,D=k?L[e]:e;return p=h.length,S?h=c(h,S):I&&p>1&&h.reverse(),T&&C<p&&(h.length=C),this&&this!==d&&this instanceof f&&(D=O||a(D)),D.apply(L,h)}}},function(t,e){var n=Math.max;t.exports=function(t,e,r,i){for(var o=-1,a=t.length,s=r.length,l=-1,c=e.length,u=n(a-s,0),d=Array(c+u),f=!i;++l<c;)d[l]=e[l];for(;++o<s;)(f||o<a)&&(d[r[o]]=t[o]);for(;u--;)d[l++]=t[o++];return d}},function(t,e){var n=Math.max;t.exports=function(t,e,r,i){for(var o=-1,a=t.length,s=-1,l=r.length,c=-1,u=e.length,d=n(a-l,0),f=Array(d+u),p=!i;++o<d;)f[o]=t[o];for(var h=o;++c<u;)f[h+c]=e[c];for(;++s<l;)(p||o<a)&&(f[h+r[s]]=t[o++]);return f}},function(t,e,n){var r=n(807),i=n(809),o=n(810),a=1,s=2,l=4,c=8,u=32,d=64;t.exports=function(t,e,n,f,p,h,g,m,v,y){var b=e&c;e|=b?u:d,(e&=~(b?d:u))&l||(e&=~(a|s));var w=[t,e,p,b?h:void 0,b?g:void 0,b?void 0:h,b?void 0:g,m,v,y],_=n.apply(void 0,w);return r(t)&&i(_,w),_.placeholder=f,o(_,t,e)}},function(t,e,n){var r=n(542),i=n(544),o=n(808),a=n(1833);t.exports=function(t){var e=o(t),n=a[e];if("function"!=typeof n||!(e in r.prototype))return!1;if(t===n)return!0;var s=i(n);return!!s&&t===s[0]}},function(t,e,n){var r=n(1832),i=Object.prototype.hasOwnProperty;t.exports=function(t){for(var e=t.name+"",n=r[e],o=i.call(r,e)?n.length:0;o--;){var a=n[o],s=a.func;if(null==s||s==t)return a.name}return e}},function(t,e,n){var r=n(801),i=n(793)(r);t.exports=i},function(t,e,n){var r=n(1835),i=n(1836),o=n(537),a=n(1837);t.exports=function(t,e,n){var s=e+"";return o(t,i(s,a(r(s),n)))}},function(t,e,n){var r=n(188),i=n(213);t.exports=function(t,e,n){(void 0===n||i(t[e],n))&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){t.exports=function(t,e){if("__proto__"!=e)return t[e]}},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(123),i=n(1854),o=n(1856),a=n(1857),s=n(1858),l=n(815),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(1859);t.exports=function(t){return new Promise(function(e,u){var d=t.data,f=t.headers;r.isFormData(d)&&delete f["Content-Type"];var p=new XMLHttpRequest,h="onreadystatechange",g=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(t.url)||(p=new window.XDomainRequest,h="onload",g=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var m=t.auth.username||"",v=t.auth.password||"";f.Authorization="Basic "+c(m+":"+v)}if(p.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[h]=function(){if(p&&(4===p.readyState||g)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:t,request:p};i(e,u,r),p=null}},p.onerror=function(){u(l("Network Error",t,null,p)),p=null},p.ontimeout=function(){u(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var y=n(1860),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;b&&(f[t.xsrfHeaderName]=b)}if("setRequestHeader"in p&&r.forEach(f,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),u(t),p=null)}),void 0===d&&(d=null),p.send(d)})}},function(t,e,n){"use strict";var r=n(1855);t.exports=function(t,e,n,i,o){var a=new Error(t);return r(a,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){var r=n(128),i=n(80),o="[object Boolean]";t.exports=function(t){return!0===t||!1===t||i(t)&&r(t)==o}},,function(t,e,n){var r,i;!function(o,a){"use strict";void 0===(i="function"==typeof(r=function(){var t=function(){},e="undefined",n=["trace","debug","info","warn","error"];function r(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(e,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<e?t:this.methodFactory(o,e,r)}this.log=this.debug}function o(n,o,a){return function(n){"debug"===n&&(n="log");return typeof console!==e&&(void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):t)}(n)||function(t,n,r){return function(){typeof console!==e&&(i.call(this,n,r),this[t].apply(this,arguments))}}.apply(this,arguments)}function a(t,r,a){var s,l=this,c="loglevel";function u(){var t;if(typeof window!==e){try{t=window.localStorage[c]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===l.levels[t]&&(t=void 0),t}}t&&(c+=":"+t),l.name=t,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=a||o,l.getLevel=function(){return s},l.setLevel=function(r,o){if("string"==typeof r&&void 0!==l.levels[r.toUpperCase()]&&(r=l.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=l.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(s=r,!1!==o&&function(t){var r=(n[t]||"silent").toUpperCase();if(typeof window===e)return;try{return void(window.localStorage[c]=r)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"="+r+";"}catch(t){}}(r),i.call(l,r,t),typeof console===e&&r<l.levels.SILENT)return"No console available for logging"},l.setDefaultLevel=function(t){u()||l.setLevel(t,!1)},l.enableAll=function(t){l.setLevel(l.levels.TRACE,t)},l.disableAll=function(t){l.setLevel(l.levels.SILENT,t)};var d=u();null==d&&(d=null==r?"WARN":r),l.setLevel(d,!1)}var s=new a,l={};s.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=l[t];return e||(e=l[t]=new a(t,s.getLevel(),s.methodFactory)),e};var c=typeof window!==e?window.log:void 0;return s.noConflict=function(){return typeof window!==e&&window.log===s&&(window.log=c),s},s.getLoggers=function(){return l},s})?r.call(e,n,e,t):r)||(t.exports=i)}()},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.combineReducers=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(1897));e.combineReducers=r.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&"@@redux/INIT"===t.type?"initialState argument passed to createStore":"previous state received by the reducer"},t.exports=e.default},,,,function(t,e,n){var r=n(536),i=n(162),o=n(108);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},function(t){t.exports={a:"2.5.0"}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,n){"use strict";var r=n(191),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,e.string2buf=function(t){var e,n,i,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,i,o,s=e||t.length,c=new Array(2*s);for(r=0,n=0;n<s;)if((i=t[n++])<128)c[r++]=i;else if((o=a[i])>4)c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<s;)i=i<<6|63&t[n++],o--;o>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+a[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\b"},function(t,e,n){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!1,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},function(t,e,n){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=r},function(t,e,n){"use strict";for(var r=n(132),i=n(266),o=n(556),a=new Array(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var l=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+a[t[n]]>e?n:e},c=function(t){var e,n,i,o,s=t.length,l=new Array(2*s);for(n=0,e=0;e<s;)if((i=t[e++])<128)l[n++]=i;else if((o=a[i])>4)l[n++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&e<s;)i=i<<6|63&t[e++],o--;o>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)};e.utf8encode=function(t){return i.nodebuffer?o(t,"utf-8"):function(t){var e,n,r,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=i.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e}(t)},e.utf8decode=function(t){if(i.nodebuffer)return r.transformTo("nodebuffer",t).toString("utf-8");for(var e=[],n=0,o=(t=r.transformTo(i.uint8array?"uint8array":"array",t)).length;n<o;){var a=l(t,Math.min(n+65536,o));i.uint8array?e.push(c(t.subarray(n,a))):e.push(c(t.slice(n,a))),n=a}return e.join("")}},function(t,e,n){"use strict";var r=n(839),i=n(132);function o(t,e){this.data=t,e||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}o.prototype=new r,o.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=o},function(t,e,n){"use strict";var r=n(132);function i(t){this.data=null,this.length=0,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},t.exports=i},function(t,e,n){"use strict";var r=n(841);function i(t){t&&(this.data=t,this.length=this.data.length,this.index=0,this.zero=0)}i.prototype=new r,i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=i},function(t,e,n){"use strict";var r=n(839);function i(t){if(t){this.data=t,this.length=this.data.length,this.index=0,this.zero=0;for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}}i.prototype=new r,i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=i},function(t,e,n){"use strict";var r=n(1937);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&p(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(t,e,n){r(function(){var r;try{r=e(n)}catch(e){return o.reject(t,e)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)})}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var a=h(function(){e(i,r)});"error"===a.status&&r(a.value)}function h(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}t.exports=c,c.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(i);this.state!==l?d(n,this.state===s?t:e,this.outcome):this.queue.push(new u(n,t,e));return n},u.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){d(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){o.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){d(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=h(f,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=s,t.outcome=e;for(var i=-1,a=t.queue.length;++i<a;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},c.resolve=function(t){if(t instanceof this)return t;return o.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return o.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var a=new Array(n),s=0,l=-1,c=new this(i);for(;++l<n;)u(t[l],l);return c;function u(t,i){e.resolve(t).then(function(t){a[i]=t,++s!==n||r||(r=!0,o.resolve(c,a))},function(t){r||(r=!0,o.reject(c,t))})}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);var a=-1,s=new this(i);for(;++a<n;)l(t[a]);return s;function l(t){e.resolve(t).then(function(t){r||(r=!0,o.resolve(s,t))},function(t){r||(r=!0,o.reject(s,t))})}}},function(t,e,n){var r=n(1952),i=n(844);function o(t){this.options=t,this.lambda=t.lambda||t.lon,this.phi=t.phi||t.lat,this.height_above_ellipsoid=t.height_above_ellipsoid||0,this.ellipsoid=t.ellipsoid||new i}t.exports=o,o.prototype.toSpherical=function(){var t=this.ellipsoid,e=Math.cos(this.phi*Math.PI/180),n=Math.sin(this.phi*Math.PI/180),i=t.a/Math.sqrt(1-t.epssq*n*n),o=(i+this.height_above_ellipsoid)*e,a=(i*(1-t.epssq)+this.height_above_ellipsoid)*n,s=Math.sqrt(o*o+a*a);return new r({r:s,phig:180/Math.PI*Math.asin(a/s),lambda:this.lambda})},o.prototype.clone=function(){return new o(this.options)}},function(t,e){t.exports=function(t){t=t||{a:6378.137,b:6356.7523142,fla:1/298.257223563,re:6371.2},this.a=t.a,this.b=t.b,this.fla=t.fla,this.re=t.re,this.eps=Math.sqrt(1-this.b*this.b/(this.a*this.a)),this.epssq=this.eps*this.eps}},,function(t,e,n){var r=n(103),i=n(847),o=n(848),a=n(850),s=n(267),l=n(214),c=s(function(t,e){var n=null==t?0:t.length,s=i(t,e);return o(t,r(e,function(t){return l(t,n)?+t:t}).sort(a)),s});t.exports=c},function(t,e,n){var r=n(2);t.exports=function(t,e){for(var n=-1,i=e.length,o=Array(i),a=null==t;++n<i;)o[n]=a?void 0:r(t,e[n]);return o}},function(t,e,n){var r=n(559),i=n(214),o=Array.prototype.splice;t.exports=function(t,e){for(var n=t?e.length:0,a=n-1;n--;){var s=e[n];if(n==a||s!==l){var l=s;i(s)?o.call(t,s,1):r(t,s)}}return t}},function(t,e,n){var r=n(306),i=n(211);t.exports=function(t,e){return e.length<2?t:r(t,i(e,0,-1))}},function(t,e,n){var r=n(156);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,a=r(t),s=void 0!==e,l=null===e,c=e==e,u=r(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&t<e||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}},,,,,,,function(t,e){t.exports=/<%=([\s\S]+?)%>/g},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2037);e.LiveManager=i.LiveManager,e.default=r.module("stealth.live.manager").service("stealth.live.manager.Manager",i.LiveManager).name},function(t,e){t.exports=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}},,,function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(2047)),r(n(2048))},function(t,e,n){var r=n(211);t.exports=function(t){var e=null==t?0:t.length;return e?r(t,1,e):[]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84),i=n(889);e.DataSourceActions=i;var o=n(2049),a=n(2050);e.DataSourceRecord=a.DataSourceRecord;e.DATA_SOURCE_PATH="DataSources";var s=r.StoreManager.getInstance(),l={};l.DataSources=o.reducer,s.addReducers(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.ADD_DATA_SOURCE="GEO_ADD_DATA_SOURCE",t.UPDATE_DATA_SOURCE="GEO_UPDATE_DATA_SOURCE",t.REMOVE_DATA_SOURCE="GEO_REMOVE_DATA_SOURCE",t.CLEAR_DATA_SOURCES="GEO_CLEAR_DATA_SOURCES",t.OTHER_ACTION="OTHER_ACTION"}(e.TypeKeys||(e.TypeKeys={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(15);e.ogcConfigs=r.List(i.config.get("ogc.configs",[]))},function(t,e,n){var r=n(545),i=n(267),o=n(544),a=n(808),s=n(17),l=n(807),c="Expected a function",u=8,d=32,f=128,p=256;t.exports=function(t){return i(function(e){var n=e.length,i=n,h=r.prototype.thru;for(t&&e.reverse();i--;){var g=e[i];if("function"!=typeof g)throw new TypeError(c);if(h&&!m&&"wrapper"==a(g))var m=new r([],!0)}for(i=m?i:n;++i<n;){g=e[i];var v=a(g),y="wrapper"==v?o(g):void 0;m=y&&l(y[0])&&y[1]==(f|u|d|p)&&!y[4].length&&1==y[9]?m[a(y[0])].apply(m,y[3]):1==g.length&&l(g)?m[v]():m.thru(g)}return function(){var t=arguments,r=t[0];if(m&&1==t.length&&s(r))return m.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2052),o=n(2053),a=n(2054);e.KeywordStyle=a.KeywordStyle,e.default=r.module("stealth.geo.style.keyword").directive("stealth.geo.style.keywordWidget",[function(){return{restrict:"E",template:i,scope:!0,controller:o.StyleController,controllerAs:"$ctrl"}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(894);e.LiveActions=i;var o=n(2055),a=n(895);e.DisplayStatusRecord=a.DisplayStatusRecord,e.LiveState=a.LiveState,e.ViewRecord=a.ViewRecord;e.LIVE_PATH="Live";var s=r.StateManager.getInstance(),l={};l.Live=o.reducer,s.addReducers(l),s.addRecord(a.DisplayStatusRecord),s.addRecord(a.LiveState),s.addRecord(a.ViewRecord)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.ADD_VIEW="LIVE_ADD_VIEW",t.REMOVE_VIEW="LIVE_REMOVE_VIEW",t.UPDATE_VIEW="LIVE_UPDATE_VIEW",t.UPDATE_DISPLAY_STATUS="LIVE_VIEW_UPDATE_DISPLAY_STATUS",t.SET_INTERVAL="LIVE_SET_POLLING_INTERVAL",t.SET_IS_LIVE_ON="LIVE_SET_IS_LIVE_ON",t.OTHER_ACTION="OTHER_ACTION"}(e.TypeKeys||(e.TypeKeys={}))},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({isOnMap:!1,isVisible:!1,isLoading:!1,isExpanded:!1,isRemovable:!0},"LiveDisplayStatusRecord"));e.DisplayStatusRecord=o;var a=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({id:"",cqlFilter:"",dataSourceId:"",displayStatus:new o,mapLayerId:"",name:"",options:{},workspaceId:""},"LiveViewRecord"));e.ViewRecord=a;var s=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({isLiveOn:!0,pollingInterval:10,workspaces:i.Map()},"LiveState"));e.LiveState=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;return e.enabled=!1,e}return r(e,t),e.prototype.setEnabled=function(t){this.enabled=t,this.emit(t?"enabled":"disabled")},e}(n(325).EventEmitter);e.ExtentFilterState=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(6),a=n(39);function s(t,e,n,r,i,o,a){return function(s,c,u,d){return new l(t,e,n,r,i,o,a,s,c,u,d)}}s.$inject=["$q","$rootScope","mapFollowManager","ccri.popup.manager","wfs","stealth.core.geo.ol3.format.GeoJson","ccri.angular-utils.WidgetDef"],e.factory=s;var l=function(){function t(t,e,n,o,s,l,c,u,d,f,p){var h=this;this.$q=t,this.$rootScope=e,this.mapFollowManager=n,this.popupManager=o,this.wfs=s,this.GeoJson=l,this.widgetDef=c,this._toolTipChoices=["Follow track","Stop following track"],this._iconChoices=["fa-crosshairs","fa-stop-circle"],this.openPopup=function(t){var e=h._liveLayer.getCapabilities(),n=h._layerThisBelongsTo.Title,r={name:n,records:[t],metadata:[{source:t.sourceFeature}],capabilities:e,popupOptionsOverrides:i.get(h._layerThisBelongsTo.KeywordConfig,"click.search.customPopup")},o=h.$rootScope.$new();o.results=h._liveLayer.buildSearchPointWidgetsForResponse(r,o);var s=new a.WidgetDef({tag:"ccri-popup-components-tab-container",scope:o,attrs:'results="results" active-tab-idx="activeTabIdx" popup-id="popupId"'}),l=h.popupManager.getViewportDim(h._popupContainerId);o.popupId=h.popupManager.displayPopup(h._popupContainerId,n,"list",h.buttonIconName,s,{offsets:[l[0]/2,l[1]/2],onClose:function(){o.$destroy(),o=null}})};var g=this,m=r.element(".primaryDisplay > ccri-popup-container"),v=new l,y=0;function b(){var n=i.keys(g._recordStates);if(i.isEmpty(n))return t.when();var r={featureID:n.join()},o=++y;return s.getFeature(p,f.Name,r,void 0,!0).then(function(r){var a=r.data.features;if(o!==y)return t.reject();var s=t.defer();return e.$applyAsync(function(){i.forEach(n,function(t){var e=i.find(a,{id:t});if(i.isUndefined(e))g._recordStates[t].displayState.trackEnded=!0;else{g._recordStates[t].displayState.trackEnded=!1;var n=v.readGeometry(e.geometry);i.merge(g._recordStates[t].record,e.properties),g._recordStates[t].highlightFeature.setGeometry(n),i.each(g._recordStates[t].popups,function(t){t.$broadcast("TabBar:RefreshTab")})}}),s.resolve()}),s.promise})}this._recordStates={},this._idField=u,this._liveLayer=d,this._layerThisBelongsTo=f,this._popupContainerId=m.data("ccri.popup.containerId"),m=null,this.onDestroy=function(){d.removeRefreshListener(b),d.getHighlightLayer()&&d.getHighlightLayer().clear();g=null,d=this.liveLayer=null,f=null,v=null,this._recordStates=null},d.addRefreshListener(b)}return t.prototype.getRecordState=function(t,e){var n=t[this._idField];if(i.isUndefined(this._recordStates[n])){var r=t.lat?t.lat:e?e[1]:0,a=t.lon?t.lon:e?e[0]:0;this._recordStates[n]={record:t,popups:[],highlightFeature:new o.Feature(new o.geom.Point([a,r])),displayState:{highlight:{"border-style":"solid","border-width":"2px 0px","border-color":"white"},trackEnded:!1},followCapability:this.getFollowCapability(t[this._idField])}}return this._recordStates[n]},t.prototype.getFollowCapability=function(t){var e=this,n=this._recordStates[t];return i.isUndefined(n)?{toolTipText:this._toolTipChoices[0],iconClass:this._iconChoices[0],following:!1,onClick:function(t,n,r){i.isNull(e._liveLayer)||(r.following?e.unFollow(n):e.follow(n))}}:n.followCapability},t.prototype.addPopup=function(t,e){this.getRecordState(t).popups.push(e)},t.prototype.removePopup=function(t,e){var n=this.getRecordState(t);i.pull(n.popups,e),i.isEmpty(n.popups)?(n.followCapability.following&&this.unFollow(t),this.checkHighlight(t),n.altitudeProfile&&!n.altitudeProfile.open&&delete this._recordStates[t[this._idField]]):this.checkHighlight(t)},t.prototype.checkHighlight=function(t){var e=this.getRecordState(t),n=this._liveLayer.getHighlightLayer(),r=n.getFeatures(),o=i.includes(r.getArray(),e.highlightFeature);i.some(i.map(e.popups,"tabFocused"))||e.followCapability.following?o||this.$rootScope.$applyAsync(function(){var t=n.addFeature(e.highlightFeature);e.displayState.highlight=i.merge({},e.displayState.highlight,{"border-color":t})}):o&&r.remove(e.highlightFeature)},t.prototype.follow=function(t){var e=t.sourceFeature.geometry.coordinates,n=this.getRecordState(t,e);n.followCapability.following=!0,n.followCapability.toolTipText=this._toolTipChoices[1],n.followCapability.iconClass=this._iconChoices[1],i.isEmpty(n.popups)?this.openPopup(t):this.checkHighlight(t),this.mapFollowManager.followFeature(n.highlightFeature)},t.prototype.unFollow=function(t){var e=t.sourceFeature.geometry.coordinates,n=this.getRecordState(t,e);n.followCapability.following=!1,n.followCapability.toolTipText=this._toolTipChoices[0],n.followCapability.iconClass=this._iconChoices[0],this.mapFollowManager.unFollowFeature(n.highlightFeature),this.checkHighlight(t)},Object.defineProperty(t.prototype,"buttonIconName",{get:function(){var t=i.get(this._layerThisBelongsTo.KeywordConfig,"timelapse.live"),e=i.keys(t);if(!i.isEmpty(e)){var n=i.first(e);return i.get(t,[n,"list","iconClass"],"fa-bolt")}return"fa-bolt"},enumerable:!0,configurable:!0}),t}();e.ListPopupCoordinator=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(1),o=n(84),a=n(899),s=n(896);function l(t,e,n,r,i,o,a,s,l,u,d,f){return function(p,h,g,m,v,y,b,w){return new c(t,e,n,r,i,o,a,s,l,u,d,f,p,h,g,m,v,y,b,w)}}l.$inject=["$log","$q","$rootScope","ccri.angular-utils.WidgetDef","cqlHelper","ol3Map","stealth.live.select.SelectService","sidebarManager","sidebarButtons","stealth.core.geo.ol3.format.GeoJson","stealth.live.list.ExtentFilterState","wfs"],e.factory=l;var c=function(){function t(e,n,r,a,l,c,u,d,f,p,h,g,m,v,y,b,w,_,x,S){var C=this;this.$log=e,this.$q=n,this.$rootScope=r,this.WidgetDef=a,this.cqlHelper=l,this.ol3Map=c,this.selectService=u,this.sidebarManager=d,this.sidebarButtons=f,this.GeoJson=p,this.extentFilterState=h,this.wfs=g,this.isPolling=!1,this.wfsCallCount=0,this.isFilteringByExtent=!1,this._titleField="label",this._subTitleField="subLabel",this.onPanelOpened=function(){C._liveOlLayer.getVisible()&&C.startPolling(),C._extentFilterState.enabled&&C.startFilteringByExtent()},this.onPanelClosed=function(){C.stopPolling(),C.stopFilteringByExtent()},this._refresh=function(){var t=C.$q.when();if(C.isPolling&&C.panelScope){C.panelScope.itemsLoading=!0;var e,n=++C.wfsCallCount;e=C.isFilteringByExtent?i.merge({},C._requestParams,{CQL_FILTER:C.cqlHelper.combine(C.cqlHelper.operator.AND,C._requestParams.CQL_FILTER,C.viewExtentCQL())}):C._requestParams,i.forEach(C.panelScope.extraCQL,function(t){e.CQL_FILTER=C.cqlHelper.combine(C.cqlHelper.operator.AND,e.CQL_FILTER,t)}),(t=C.wfs.getFeature(C._wfsUrl,C._layerThisBelongsTo.Name,e,void 0,!0).then(function(t){if(n===C.wfsCallCount&&C.panelScope){var e=i.map(t.data.features,function(t){var e=t.properties,n={};for(var r in t.properties)i.includes(C._displayFields,r)&&(n[r]=t.properties[r]);return e.displayProperties=n,e.titleProperties={title:t.properties[C._titleField],subTitle:t.properties[C._subTitleField]},e.geom=C._parser.readGeometry(t.geometry),e.sourceFeature=t,e});C._arrayStore.updateAndPrune.apply(C._arrayStore,e),C.panelScope.totalLength=t.data.totalFeatures}})).finally(function(){C.panelScope&&(C.panelScope.itemsLoading=!1)})}return t},this._paramsListener=function(t){return C._requestParams=i.merge({},C._requestParams,t),C.$q.when()},this.onExtentFilterChanged=function(){C._extentFilterState.enabled?C.startFilteringByExtent():(C.stopFilteringByExtent(),C._refresh())},this.startFilteringByExtent=function(){C.isFilteringByExtent&&C.stopFilteringByExtent(),C.isFilteringByExtent=!0,C.view.on(["change:center","change:resolution","change:rotation"],C.debounced_viewExtentChangeListener),C.viewExtentChangeListener()},this.stopFilteringByExtent=function(){C.isFilteringByExtent&&(C.isFilteringByExtent=!1,C.view.un(["change:center","change:resolution","change:rotation"],C.debounced_viewExtentChangeListener))},this.viewExtentChangeListener=function(){C.viewExtent=C.ol3Map.getExtent(),C._refresh()},this._arrayStore=new o.List.ArrayStore([],m),this._arrayStore.sortBy(["label","subLabel"]),this._parser=new p,this._defaultParams={count:200,maxFeatures:200,sortBy:"label,subLabel"},this._requestParams=i.merge({},this._defaultParams,w),this._extentFilterState=new s.ExtentFilterState,this.view=c.getView(),this.debounced_viewExtentChangeListener=i.debounce(this.viewExtentChangeListener,200),this._liveLayer=y,this._liveOlLayer=this._liveLayer.getOl3Layer(),this.buttonName="liveList_"+ ++t.n,f.register(this.buttonName),this.sidebarButton=f.getByName(this.buttonName),this.sidebarButton.on("opened",this.onPanelOpened),this.sidebarButton.on("closed",this.onPanelClosed),this._extentFilterState.on("enabled",this.onExtentFilterChanged),this._extentFilterState.on("disabled",this.onExtentFilterChanged),y.addRefreshListener(this._paramsListener),this._layerThisBelongsTo=b,this._wfsUrl=v,this.getGeomField().then(function(){C._extentFilterState.setEnabled(!0)},function(){e.error('Geometry field for layer "'+b.Name+'" could not be determined.')});var E=b.stealthWorkspace;this._searchFields=i.keys(i.get(b.KeywordConfig,["timelapse","live",E,"list","search","field"])),this._displayFields=i.keys(i.get(b.KeywordConfig,["timelapse","live",E,"list","display","field"]));var T=["timelapse","live",E,"list","title","field"],M=["timelapse","live",E,"list","subTitle","field"];i.has(b.KeywordConfig,T)&&i.has(b.KeywordConfig,M)&&(this._titleField=i.keys(i.get(b.KeywordConfig,T))[0],this._subTitleField=i.keys(i.get(b.KeywordConfig,M))[0],this._searchFields.push(this._titleField),this._searchFields.push(this._subTitleField)),this._manualRefresh=_,this._listPopupCoord=x,this._liveManager=S,this._requestParams=w}return t.prototype.onDestroy=function(){this._arrayStore&&(this._arrayStore.close(),this._arrayStore=null),this.sidebarButton&&(this.sidebarButton.off("opened",this.onPanelOpened),this.sidebarButton.off("closed",this.onPanelClosed),this.sidebarButton=null),this._extentFilterState&&(this._extentFilterState.off("enabled",this.onExtentFilterChanged),this._extentFilterState.off("disabled",this.onExtentFilterChanged),this._extentFilterState=null),this.panelScope&&(this.panelScope.$destroy(),this.panelScope=null),this.sidebarButtons.deregister(this.buttonName),this._liveLayer.removeRefreshListener(this._refresh),this._liveLayer.removeRefreshListener(this._paramsListener),this._liveLayer=null,this.stopFilteringByExtent(),this._layerThisBelongsTo=null,this._requestParams=null,this._manualRefresh=null,this._listPopupCoord=null,this._parser=null,this._defaultParams=null,this.view=null,this.debounced_viewExtentChangeListener=null,this._liveOlLayer=null,this._liveManager=null},t.prototype.getGeomField=function(){var t=this;return this.wfs.getDefaultGeometryFieldName(this._wfsUrl,this._layerThisBelongsTo.Name,!1,!0).then(function(e){t._geomField=e})},Object.defineProperty(t.prototype,"widgetDefTag",{get:function(){return"stealth-live-list-list"},enumerable:!0,configurable:!0}),t.prototype.showButton=function(){var t,e=this;this._buttonId&&this.sidebarManager.removeButton(this._buttonId),this.panelScope&&this.panelScope.$destroy(),this.panelScope=this.$rootScope.$new(),this.panelScope.arrayStore=this._arrayStore,this.panelScope.liveLayer=this._liveLayer,this.panelScope.buttonName=this.buttonName,this.panelScope.limit=this._requestParams.maxFeatures,this.panelScope.totalLength=null,this.panelScope.itemsLoading=!0,this.panelScope.manualRefresh=this._manualRefresh,this.panelScope.extentFilterState=this._extentFilterState,this.panelScope.listPopupCoord=this._listPopupCoord,this.panelScope.extraCQL={},this.panelScope.searchFields=this._searchFields,t=this._liveLayer.id===a.SelectService.SELECT_LAYER_ID?a.SelectService.SELECT_MODE.iconClassLarge:this._listPopupCoord.buttonIconName,this._buttonId=this.sidebarManager.addButton(this._liveLayer.name,t,400,new this.WidgetDef({tag:this.widgetDefTag,scope:this.panelScope,isolateScope:!0}),void 0,!1,function(t){if(t){var n=e._liveLayer.layerThisBelongsTo.stealthWorkspace;if(e._liveLayer.id===a.SelectService.SELECT_LAYER_ID)e.selectService.removeSelectLayer(e.ol3Map);else{var r=e._liveManager.getViews().find(function(t){return t.mapLayerId===e._liveLayer.id});r&&(r.displayStatus.isRemovable?e._liveManager.removeView(n,r.id):e._liveManager.toggleView(n,r.id))}}})},t.prototype.hideButton=function(){this._buttonId&&(this.sidebarManager.removeButton(this._buttonId),this._buttonId=null),this.panelScope&&(this.panelScope.$destroy(),this.panelScope=null)},t.prototype.startPolling=function(){this.isPolling=!0,this._liveLayer.addRefreshListener(this._refresh),this._refresh()},t.prototype.stopPolling=function(){this.isPolling&&(this._liveLayer.removeRefreshListener(this._refresh),this.isPolling=!1)},t.prototype.viewExtentCQL=function(){var t,e=Geo.NormalizeHelper.normalizeOrSplit(Geo.getExtentCoordinates(this.viewExtent));return t=1===e.length?new r.geom.Polygon(e):new r.geom.MultiPolygon(e.map(function(t){return[t]})),"INTERSECTS("+this._geomField+","+(new r.format.WKT).writeFeature(new r.Feature(t))+")"},t.n=0,t}();e.Panel=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2059),o=n(565);e.SelectService=o.SelectService;var a=n(2060),s=n(2061),l=n(2062),c=n(2063);e.default=r.module("stealth.live.select",["ccri.angular-utils","ccri.area-definition"]).namespace().service("SelectService",o.SelectService).service("SearchService",i.SearchService).directive("tool",[function(){return{restrict:"E",scope:{},template:a,controller:s.SelectToolController}}]).directive("clear",[function(){return{restrict:"E",scope:{},template:l,controller:c.SelectClearController}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(325);e.Service=new r.EventEmitter,e.selectionUpdated="selectionUpdated"},function(t,e){t.exports='<ccri-list-view-element datastore="arrayStore"\n                        decorate-card="decorateCard"\n                        menu-resolver="menuResolver"\n                        filter-resolver="filterResolver"\n                        toolbar-widget="toolbarWidget"\n                        on-mouse-enter="onMouseEnter"\n                        on-mouse-leave="onMouseLeave"\n                        items-loading="itemsLoading"\n                        manual-refresh="manualRefresh"\n                        class="anchorAll"/>\n'},function(t,e){t.exports='<div style="padding-bottom: 10px">\n    <div ng-if="record.classification" class="truncate-text">{{record.classification}}</div>\n    <div class="truncate-text" ng-repeat="(key, value) in record.displayProperties">\n            {{ key | attributeLabel }}: <span style="color:#d6d6d6">{{ value }}</span>\n    </div>\n\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2070);e.ContextManager=i.ContextManager,e.default=r.module("stealth.context.manager",["ccri.angular-utils","ccri.bars","stealth.core.geo.ol3.format","stealth.core.geo.ol3.manager","stealth.core.geo.ows","stealth.core.utils","stealth.geo.style.keyword"]).run(["$rootScope","categoryManager","ccri.angular-utils.WidgetDef","ccri.bars.mgr","ccri.bars.Widget","stealth.core.geo.ol3.manager.Category",function(t,e,n,r,i,o){var a=t.$new(),s=new n({tag:"st-context-category",scope:a,isolateScope:!0});e.addCategory(0,new o(0,"Context","fa-compass",s,null,!0)),r.insert("top",new i({widget:new n({tag:"st-context-base-selector",scope:a,isolateScope:!0})}),"Last",755)}]).service("stealth.context.manager.Manager",i.ContextManager).name},,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.ADD_WORKSPACE="CONTEXT_ADD_WORKSPACE",t.ADD_VIEW="CONTEXT_ADD_VIEW",t.UPDATE_WORKSPACE="CONTEXT_UPDATE_WORKSPACE",t.UPDATE_VIEW="CONTEXT_UPDATE_VIEW",t.UPDATE_DISPLAY_STATUS="CONTEXT_UPDATE_DISPLAY_STATUS",t.OTHER_ACTION="OTHER_ACTION"}(e.TypeKeys||(e.TypeKeys={}))},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({isOnMap:!1,isVisible:!1,isLoading:!1,lastOpacity:1},"ContextDisplayStatusRecord"));e.DisplayStatusRecord=o;var a=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({id:"",cqlFilter:"",dataSourceId:"",default:!1,displayStatus:new o,mapLayerId:"",name:"",options:{},workspaceId:""},"ContextViewRecord"));e.ViewRecord=a;var s=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({id:"",isExpanded:!1,views:i.Map()},"ContextWorkspaceRecord"));e.WorkspaceRecord=s;var l=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({workspaces:i.Map()},"ContextStateRecord"));e.ContextState=l},,,function(t,e,n){var r=n(306),i=n(403),o=n(180);t.exports=function(t,e,n){for(var a=-1,s=e.length,l={};++a<s;){var c=e[a],u=r(t,c);n(u,c)&&i(l,o(c,t),u)}return l}},function(t,e,n){n(2129),n(2138),n(2140),n(2143),n(2144),n(2145),n(2147),n(2149),n(2151),n(2153),n(2155),n(2159),n(2162),n(2164),n(2166),n(914),n(2168),n(2169),n(2170),n(2171),n(2172),n(2173),n(2174),n(2175),n(2178)},function(t,e){t.exports='<div style="padding:4px;border-radius:4px;background-color:#232323;color:#DDD;">\n    <div style="margin:10px;text-align:center;">This will permanently delete the {{objectType}}.</div>\n    <div style="text-align:right;">\n        <span class="btn btn-xs action-btn" ng-click="$close()">\n            <i class="fa fa-close text-danger"></i>\n            <b>Cancel</b>\n        </span>\n        <span class="btn btn-xs action-btn" ng-click="$close(); delete()">\n            <b>Delete</b>\n            <i class="fa fa-check text-success"></i>\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(24),i=n(47),o=n(2),a=function(){function t(t){var e=this;this.$scope=t,this.maritimeRecord={},this.metadata={dataSource:new r.DataSourceRecord,mapLayerId:"",source:{}},this.record={},this.hideBlankKeys=!1,this.id=0,this.lookupKeyword=function(t,n,r){return t.keywordConfig?i.KeywordHelper.getFieldByName(e.metadata.dataSource,n,r):o(t.KeywordConfig,r.concat(n).join("."))}}return t.prototype.$onInit=function(){},t.$inject=["$scope"],t}();e.StealthMaritimeBaseTabController=a},function(t,e,n){var r=n(103),i=n(2189),o=n(51),a=n(2190),s=o(function(t){var e=r(t,a);return e.length&&e[0]===t[0]?i(e):[]});t.exports=s},function(t,e,n){var r=n(188),i=n(222),o=n(43);t.exports=function(t,e){var n={};return e=o(e,3),i(t,function(t,i,o){r(n,e(t,i,o),t)}),n}},function(t,e,n){var r=n(103),i=n(43),o=n(789),a=n(2192),s=n(158),l=n(2193),c=n(104);t.exports=function(t,e,n){var u=-1;e=r(e.length?e:[c],s(i));var d=o(t,function(t,n,i){return{criteria:r(e,function(e){return e(t)}),index:++u,value:t}});return a(d,function(t,e){return l(t,e,n)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(329);!function(t){!function(t){!function(t){!function(t){t.Schema=r.org.apache.arrow.flatbuf.Schema}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor"}(t.MessageHeader||(t.MessageHeader={}))}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.length=function(){return this.bb.readInt64(this.bb_pos)},t.prototype.nullCount=function(){return this.bb.readInt64(this.bb_pos+8)},t.createFieldNode=function(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()},t}();t.FieldNode=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsRecordBatch=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.length=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.nodes=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.apache.arrow.flatbuf.FieldNode).__init(this.bb.__vector(this.bb_pos+r)+16*e,this.bb):null},e.prototype.nodesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.buffers=function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new r.org.apache.arrow.flatbuf.Buffer).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null},e.prototype.buffersLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startRecordBatch=function(t){t.startObject(3)},e.addLength=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addNodes=function(t,e){t.addFieldOffset(1,e,0)},e.startNodesVector=function(t,e){t.startVector(16,e,8)},e.addBuffers=function(t,e){t.addFieldOffset(2,e,0)},e.startBuffersVector=function(t,e){t.startVector(16,e,8)},e.endRecordBatch=function(t){return t.endObject()},e}();e.RecordBatch=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDictionaryBatch=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.id=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.data=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.apache.arrow.flatbuf.RecordBatch).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.isDelta=function(){var t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)},e.startDictionaryBatch=function(t){t.startObject(3)},e.addId=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addData=function(t,e){t.addFieldOffset(1,e,0)},e.addIsDelta=function(t,e){t.addFieldInt8(2,+e,0)},e.endDictionaryBatch=function(t){return t.endObject()},e}();e.DictionaryBatch=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsMessage=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):r.org.apache.arrow.flatbuf.MetadataVersion.V1},e.prototype.headerType=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.apache.arrow.flatbuf.MessageHeader.NONE},e.prototype.header=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null},e.prototype.bodyLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.startMessage=function(t){t.startObject(4)},e.addVersion=function(t,e){t.addFieldInt16(0,e,r.org.apache.arrow.flatbuf.MetadataVersion.V1)},e.addHeaderType=function(e,n){e.addFieldInt8(1,n,t.apache.arrow.flatbuf.MessageHeader.NONE)},e.addHeader=function(t,e){t.addFieldOffset(2,e,0)},e.addBodyLength=function(t,e){t.addFieldInt64(3,e,t.createLong(0,0))},e.endMessage=function(t){return t.endObject()},e.finishMessageBuffer=function(t,e){t.finish(e)},e}();e.Message=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(){function t(t,e){this.indices=e,this.dictionary=t}return t.prototype.clone=function(e){return new t(e.dictionary,this.indices.clone(e.indices))},t.prototype.isValid=function(t){return this.indices.isValid(t)},t.prototype.get=function(t){return this.dictionary.get(this.indices.get(t))},t.prototype.set=function(t,e){this.dictionary.set(this.indices.get(t),e)},t.prototype.toArray=function(){return r.__spread(this)},t.prototype[Symbol.iterator]=function(){var t,e,n,i;return r.__generator(this,function(r){switch(r.label){case 0:t=this.dictionary,e=this.indices,n=-1,i=e.length,r.label=1;case 1:return++n<i?[4,t.get(e.get(n))]:[3,4];case 2:r.sent(),r.label=3;case 3:return[3,1];case 4:return[2]}})},t.prototype.indexOf=function(t){var e=this.dictionary.indexOf(t);return-1===e?e:this.indices.indexOf(e)},t}();e.DictionaryView=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(168),o=n(923);e.encodeUtf8=function(t){return t.encode.bind(t)}(new o.TextEncoder("utf-8")),e.decodeUtf8=function(t){return t.decode.bind(t)}(new o.TextDecoder("utf-8"));var a=function(){function t(t){this.length=t.length,this.values=t.values}return t.prototype.clone=function(t){return new this.constructor(t)},t.prototype.isValid=function(){return!0},t.prototype.toArray=function(){return r.__spread(this)},t.prototype.get=function(t){return this.getList(this.values,t,this.valueOffsets)},t.prototype.set=function(t,e){return this.setList(this.values,t,e,this.valueOffsets)},t.prototype[Symbol.iterator]=function(){var t,e,n,i,o;return r.__generator(this,function(r){switch(r.label){case 0:t=this.getList,e=this.length,n=this.values,i=this.valueOffsets,o=-1,r.label=1;case 1:return++o<e?[4,t(n,o,i)]:[3,4];case 2:r.sent(),r.label=3;case 3:return[3,1];case 4:return[2]}})},t.prototype.indexOf=function(t){var e,n,i=0;try{for(var o=r.__values(this),a=o.next();!a.done;a=o.next()){if(a.value===t)return i;++i}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return-1},t}();e.ListViewBase=a;var s=function(t){function e(e){var n=t.call(this,e)||this;return n.length=e.length,n.valueOffsets=e.valueOffsets,n}return r.__extends(e,t),e}(a);e.VariableListViewBase=s;var l=function(t){function e(e){var n=t.call(this,e)||this;return n.values=i.createVector(e.values),n}return r.__extends(e,t),e.prototype.getList=function(t,e,n){return t.slice(n[e],n[e+1])},e.prototype.setList=function(t,e,n,r){for(var i=-1,o=r[e],a=Math.min(n.length,r[e+1]-o);o<a;)t.set(o++,n.get(++i))},e}(s);e.ListView=l;var c=function(t){function e(e){var n=t.call(this,e)||this;return n.size=e.type.listSize,n.values=i.createVector(e.values),n}return r.__extends(e,t),e.prototype.getList=function(t,e){var n=this.size;return t.slice(e*=n,e+n)},e.prototype.setList=function(t,e,n){for(var r=this.size,i=-1,o=e*r;++i<r;)t.set(o+i,n.get(++i))},e}(a);e.FixedSizeListView=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.getList=function(t,e,n){return t.subarray(n[e],n[e+1])},e.prototype.setList=function(t,e,n,r){var i=r[e];t.set(n.subarray(0,r[e+1]-i),i)},e}(s);e.BinaryView=u;var d=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(n,t),n.prototype.getList=function(t,n,r){return e.decodeUtf8(t.subarray(r[n],r[n+1]))},n.prototype.setList=function(t,n,r,i){var o=i[n];t.set(e.encodeUtf8(r).subarray(0,i[n+1]-o),o)},n}(s);e.Utf8View=d},function(t,e,n){"use strict";function r(t,e,n){return e<=t&&t<=n}function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}var o=-1;function a(t){this.tokens=[].slice.call(t)}a.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():o},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var s=-1;function l(t,e){if(t)throw TypeError("Decoder error");return e||65533}var c="utf-8";function u(t,e){if(!(this instanceof u))return new u(t,e);if((t=void 0!==t?String(t).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function d(t,e){if(!(this instanceof d))return new d(t,e);if((t=void 0!==t?String(t).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}u.prototype={decode:function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=i(e),this._streaming||(this._decoder=new function(t){var e=t.fatal,n=0,i=0,a=0,c=128,u=191;this.handler=function(t,d){if(d===o&&0!==a)return a=0,l(e);if(d===o)return s;if(0===a){if(r(d,0,127))return d;if(r(d,194,223))a=1,n=d-192;else if(r(d,224,239))224===d&&(c=160),237===d&&(u=159),a=2,n=d-224;else{if(!r(d,240,244))return l(e);240===d&&(c=144),244===d&&(u=143),a=3,n=d-240}return n<<=6*a,null}if(!r(d,c,u))return n=a=i=0,c=128,u=191,t.prepend(d),l(e);if(c=128,u=191,n+=d-128<<6*(a-(i+=1)),i!==a)return null;var f=n;return n=a=i=0,f}}({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var c,u=new a(n),d=[];!u.endOfStream()&&(c=this._decoder.handler(u,u.read()))!==s;)null!==c&&(Array.isArray(c)?d.push.apply(d,c):d.push(c));if(!this._streaming){do{if((c=this._decoder.handler(u,u.read()))===s)break;null!==c&&(Array.isArray(c)?d.push.apply(d,c):d.push(c))}while(!u.endOfStream());this._decoder=null}return d.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===d[0]?(this._BOMseen=!0,d.shift()):this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(d)}},d.prototype={encode:function(t,e){t=t?String(t):"",e=i(e),this._streaming||(this._encoder=new function(t){t.fatal;this.handler=function(t,e){if(e===o)return s;if(r(e,0,127))return e;var n,i;r(e,128,2047)?(n=1,i=192):r(e,2048,65535)?(n=2,i=224):r(e,65536,1114111)&&(n=3,i=240);for(var a=[(e>>6*n)+i];n>0;){var l=e>>6*(n-1);a.push(128|63&l),n-=1}return a}}(this._options)),this._streaming=Boolean(e.stream);for(var n,l=[],c=new a(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var a=t.charCodeAt(r+1);if(56320<=a&&a<=57343){var s=1023&o,l=1023&a;i.push(65536+(s<<10)+l),r+=1}else i.push(65533)}r+=1}return i}(t));!c.endOfStream()&&(n=this._encoder.handler(c,c.read()))!==s;)Array.isArray(n)?l.push.apply(l,n):l.push(n);if(!this._streaming){for(;(n=this._encoder.handler(c,c.read()))!==s;)Array.isArray(n)?l.push.apply(l,n):l.push(n);this._encoder=null}return new Uint8Array(l)}},e.TextEncoder=d,e.TextDecoder=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(168),o=function(){function t(t,e){this.length=t.length,this.childData=t.childData,this.numChildren=t.childData.length,this._children=e||new Array(this.numChildren)}return t.prototype.clone=function(t){return new this.constructor(t,this._children)},t.prototype.isValid=function(){return!0},t.prototype.toArray=function(){return r.__spread(this)},t.prototype.indexOf=function(t){throw new Error("Not implemented yet")},t.prototype.toJSON=function(){return this.toArray()},t.prototype.toString=function(){return r.__spread(this).map(function(t){return function(t){return"string"==typeof t?'"'+t+'"':Array.isArray(t)?JSON.stringify(t):ArrayBuffer.isView(t)?"["+t+"]":""+t}(t)}).join(", ")},t.prototype.get=function(t){return this.getNested(this,t)},t.prototype.set=function(t,e){return this.setNested(this,t,e)},t.prototype.getChildAt=function(t){return t<0||t>=this.numChildren?null:this._children[t]||(this._children[t]=i.Vector.create(this.childData[t]))},t.prototype[Symbol.iterator]=function(){var t,e,n;return r.__generator(this,function(r){switch(r.label){case 0:t=this.getNested,e=this.length,n=-1,r.label=1;case 1:return++n<e?[4,t(this,n)]:[3,4];case 2:r.sent(),r.label=3;case 3:return[3,1];case 4:return[2]}})},t}();e.NestedView=o;var a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.length=e.length,r.typeIds=e.typeIds,r}return r.__extends(e,t),e.prototype.getNested=function(t,e){return t.getChildValue(t,e,t.typeIds,t.valueOffsets)},e.prototype.setNested=function(t,e,n){return t.setChildValue(t,e,n,t.typeIds,t.valueOffsets)},e.prototype.getChildValue=function(t,e,n,r){var i=t.getChildAt(n[e]);return i?i.get(e):null},e.prototype.setChildValue=function(t,e,n,r,i){var o=t.getChildAt(r[e]);return o?o.set(e,n):null},e.prototype[Symbol.iterator]=function(){var t,e,n,i,o,a;return r.__generator(this,function(r){switch(r.label){case 0:t=this.length,e=this.getChildValue,i=(n=this).typeIds,o=n.valueOffsets,a=-1,r.label=1;case 1:return++a<t?[4,e(this,a,i,o)]:[3,4];case 2:r.sent(),r.label=3;case 3:return[3,1];case 4:return[2]}})},e}(o);e.UnionView=a;var s=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.valueOffsets=e.valueOffsets,r}return r.__extends(e,t),e.prototype.getNested=function(t,e){return t.getChildValue(t,e,t.typeIds,t.valueOffsets)},e.prototype.getChildValue=function(t,e,n,r){var i=t.getChildAt(n[e]);return i?i.get(r[e]):null},e.prototype.setChildValue=function(t,e,n,r,i){var o=t.getChildAt(r[e]);return o?o.set(i[e],n):null},e}(a);e.DenseUnionView=s;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.getNested=function(t,e){return new u(t,t._children,e)},e.prototype.setNested=function(t,e,n){var r,a=-1,s=t.numChildren;if(n instanceof o||n instanceof i.Vector)for(;++a<s;)(r=t.getChildAt(a))&&r.set(e,n.get(a));else for(;++a<s;)(r=t.getChildAt(a))&&r.set(e,n[a])},e}(o);e.StructView=l;var c=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.typeIds=e.type.children.reduce(function(t,e,n){return(t[e.name]=n)&&t||t},Object.create(null)),r}return r.__extends(e,t),e.prototype.getNested=function(t,e){return new d(t,t._children,e)},e.prototype.setNested=function(t,e,n){var r,a=t.typeIds;if(n instanceof o||n instanceof i.Vector)for(var s in a)(r=t.getChildAt(a[s]))&&r.set(e,n.get(s));else for(var s in a)(r=t.getChildAt(a[s]))&&r.set(e,n[s])},e}(o);e.MapView=c;var u=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.rowIndex=r||0,i.length=e.numChildren,i}return r.__extends(e,t),e.prototype.clone=function(t){return new this.constructor(t,this._children,this.rowIndex)},e.prototype.getChildValue=function(t,e,n,r){var i=t.getChildAt(e);return i?i.get(t.rowIndex):null},e.prototype.setChildValue=function(t,e,n,r,i){var o=t.getChildAt(e);return o?o.set(t.rowIndex,n):null},e}(a);e.RowView=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toJSON=function(){var t=this.getChildValue,e={},n=this.typeIds;for(var r in n)e[r]=t(this,r,n,null);return e},e.prototype.getChildValue=function(t,e,n,r){var i=t.getChildAt(n[e]);return i?i.get(t.rowIndex):null},e.prototype.setChildValue=function(t,e,n,r,i){var o=t.getChildAt(r[e]);return o?o.set(t.rowIndex,n):null},e}(u);e.MapRowView=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);function i(t){return t<0&&(t=4294967295+t+1),"0x"+t.toString(16)}var o=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8],a=function(){function t(t){this.buffer=t}return t.prototype.high=function(){return this.buffer[1]},t.prototype.low=function(){return this.buffer[0]},t.prototype._times=function(t){var e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]),r=e[3]*n[3];this.buffer[0]=65535&r;var i=r>>>16;return i+=r=e[2]*n[3],i+=r=e[3]*n[2]>>>0,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<r?65536:0,this.buffer[1]+=i>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this},t.prototype._plus=function(t){var e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e},t.prototype.lessThan=function(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]},t.prototype.equals=function(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]},t.prototype.greaterThan=function(t){return t.lessThan(this)},t.prototype.hex=function(){return i(this.buffer[1])+" "+i(this.buffer[0])},t}();e.BaseInt64=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.times=function(t){return this._times(t),this},e.prototype.plus=function(t){return this._plus(t),this},e.multiply=function(t,n){return new e(new Uint32Array(t.buffer)).times(n)},e.add=function(t,n){return new e(new Uint32Array(t.buffer)).plus(n)},e}(a);e.Uint64=s;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.negate=function(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this},e.prototype.times=function(t){return this._times(t),this},e.prototype.plus=function(t){return this._plus(t),this},e.prototype.lessThan=function(t){var e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]},e.fromString=function(t,n){void 0===n&&(n=new Uint32Array(2));for(var r=t.startsWith("-"),i=t.length,a=new e(n),s=r?1:0;s<i;){var l=8<i-s?8:i-s,c=new e(new Uint32Array([parseInt(t.substr(s,l),10),0])),u=new e(new Uint32Array([o[l],0]));a.times(u),a.plus(c),s+=l}return r?a.negate():a},e.multiply=function(t,n){return new e(new Uint32Array(t.buffer)).times(n)},e.add=function(t,n){return new e(new Uint32Array(t.buffer)).plus(n)},e}(a);e.Int64=l;var c=function(){function t(t){this.buffer=t}return t.prototype.high=function(){return new l(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))},t.prototype.low=function(){return new l(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))},t.prototype.negate=function(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this},t.prototype.times=function(t){var e=new s(new Uint32Array([this.buffer[3],0])),n=new s(new Uint32Array([this.buffer[2],0])),r=new s(new Uint32Array([this.buffer[1],0])),i=new s(new Uint32Array([this.buffer[0],0])),o=new s(new Uint32Array([t.buffer[3],0])),a=new s(new Uint32Array([t.buffer[2],0])),l=new s(new Uint32Array([t.buffer[1],0])),c=new s(new Uint32Array([t.buffer[0],0])),u=s.multiply(i,c);this.buffer[0]=u.low();var d=new s(new Uint32Array([u.high(),0]));return u=s.multiply(r,c),d.plus(u),u=s.multiply(i,l),d.plus(u),this.buffer[1]=d.low(),this.buffer[3]=d.lessThan(u)?1:0,this.buffer[2]=d.high(),new s(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(s.multiply(n,c)).plus(s.multiply(r,l)).plus(s.multiply(i,a)),this.buffer[3]+=s.multiply(e,c).plus(s.multiply(n,l)).plus(s.multiply(r,a)).plus(s.multiply(i,o)).low(),this},t.prototype.plus=function(t){var e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this},t.prototype.hex=function(){return i(this.buffer[3])+" "+i(this.buffer[2])+" "+i(this.buffer[1])+" "+i(this.buffer[0])},t.multiply=function(e,n){return new t(new Uint32Array(e.buffer)).times(n)},t.add=function(e,n){return new t(new Uint32Array(e.buffer)).plus(n)},t.fromString=function(e,n){void 0===n&&(n=new Uint32Array(4));for(var r=e.startsWith("-"),i=e.length,a=new t(n),s=r?1:0;s<i;){var l=8<i-s?8:i-s,c=new t(new Uint32Array([parseInt(e.substr(s,l),10),0,0,0])),u=new t(new Uint32Array([o[l],0,0,0]));a.times(u),a.plus(c),s+=l}return r?a.negate():a},t}();e.Int128=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(2199);e.readJSON=i.readJSON;var o=n(414);e.RecordBatch=o.RecordBatch;var a=n(2200);e.readBuffers=a.readBuffers,e.readBuffersAsync=a.readBuffersAsync;var s=n(574);e.readRecordBatches=s.readRecordBatches,e.readRecordBatchesAsync=s.readRecordBatchesAsync,e.read=function(t){var e,n;return r.__generator(this,function(o){switch(o.label){case 0:if("string"==typeof(e=t))try{e=JSON.parse(e)}catch(n){e=t}return n=e&&"object"==typeof e?"function"==typeof e[Symbol.iterator]?a.readBuffers(e):i.readJSON(e):"string"==typeof e?a.readBuffers([e]):[],[5,r.__values(s.readRecordBatches(n))];case 1:return o.sent(),[2]}})},e.readAsync=function(t){return r.__asyncGenerator(this,arguments,function(){var e,n,i,o,l;return r.__generator(this,function(c){switch(c.label){case 0:c.trys.push([0,7,8,13]),e=r.__asyncValues(s.readRecordBatchesAsync(a.readBuffersAsync(t))),c.label=1;case 1:return[4,r.__await(e.next())];case 2:return(n=c.sent()).done?[3,6]:[4,r.__await(n.value)];case 3:return[4,c.sent()];case 4:c.sent(),c.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return i=c.sent(),o={error:i},[3,13];case 8:return c.trys.push([8,,11,12]),n&&!n.done&&(l=e.return)?[4,r.__await(l.call(e))]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(o)throw o.error;return[7];case 12:return[7];case 13:return[2]}})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(332),i=n(576);e.GetFeatureRequestBuilder=i.GetFeatureRequestBuilder,e.GET_FEATURE_REQUEST_TYPE="WFSGetFeature",r.RequestBuilderManager.registerBuilder(e.GET_FEATURE_REQUEST_TYPE,i.GetFeatureRequestBuilder)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2209);e.GeomesaArrowFormatOptionsRecord=r.GeomesaArrowFormatOptionsRecord;var i=n(2210);e.GeomesaBinaryFormatOptionsRecord=i.GeomesaBinaryFormatOptionsRecord},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16),a=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({source:void 0,store:void 0,dataFilter:void 0},"DataViewRecord"));e.DataViewRecord=a,o.StateManager.getInstance().addRecord(a)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16),a=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({id:"",type:void 0,geomField:"",dtgField:"",idField:"",formatOptions:void 0},"GeoDataStoreRecord"));e.StoreRecord=a,o.StateManager.getInstance().addRecord(a)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(272),o=n(578),a=n(6),s=n(57),l=n(333),c=n(579),u=n(42),d=n(224),f=n(50),p=n(30),h=n(29),g=n(85),m=n(2215);var v=function(t){function e(e,n,r,i){var o=t.call(this,e,l.StoreTypes.Arrow)||this;return o.geomField=n,o.dtgField=r,o.idField=i,o.predicates=[],o.dataLoaded=!1,o}return r(e,t),e.prototype.getRange=function(t){return this.ranges||(this.ranges={}),this.ranges[t]||(this.ranges[t]=[1,this.table.countBy(t).length]),this.ranges[t]},e.prototype.populate=function(t,n){var r=this;return new Promise(function(n,a){r.data=t;try{r.table=o.read(new Uint8Array(t)),0===r.table.length&&a(c.StoreObject.ErrorMessages.NO_RESULTS)}catch(t){s.log.error(t),a(c.StoreObject.ErrorMessages.OTHER)}r.numRecords=r.table.length;var l=r.table.getColumn(r.dtgField);r.minTimeMillis=1e3*l.get(0),r.maxTimeMillis=1e3*l.get(r.numRecords-1),r.fields=e.getDictionaryEncodedFields(r.table.schema.fields).map(function(t){return t.name}),r.fields=r.table.schema.fields.filter(function(t){return t.type instanceof i.type.Dictionary}).map(function(t){return t.name}),r.dataLoaded=!0,n()})},e.prototype.groupBy=function(t,e,n,r,o){var a,s,l,c=n.start,d=n.end,p=i.predicate.col(this.dtgField),h=this.getPredicates(r,o),g=p.ge(c).and(p.le(d)),v=this.table.filter(h?h.and(g):g);e?a=function(t,e,n){var r,i,o={},a=[];return t.scan(function(t){r=e.vector.getKey(t),f(r)&&(i=n.vector.getKey(t),f(i)&&(o[r]||(o[r]=new Set),o[r].add(i)))},function(t){e.bind(t),n.bind(t)}),u(o,function(t,n){if(t.size){var r={name:e.vector.getValue(parseInt(n,10)),count:t.size};a.splice(m(a,r,"count"),0,r)}}),a.reverse()}(v,i.predicate.col(t),i.predicate.col(e)):(a=[],v.countBy(t).scan(function(t){if(l(t)){var e={name:s(t),count:l(t)};a.splice(m(a,e,"count"),0,e)}},function(t){s=i.predicate.col("values").bind(t),l=i.predicate.col("counts").bind(t)}),a.reverse());return a},e.prototype.getAttributePromise=function(t,e,n,r,o){var a,s,l=n.start,c=n.end,u=i.predicate.col(this.dtgField),d=this.getPredicates(r,o),f=u.ge(l).and(u.le(c)),p=this.table.filter(d?d.and(f):f),h=[],g=i.predicate.col(t),m=i.predicate.col(e);return p.scan(function(n){var r={};r[t]=a(n)instanceof Int32Array?a(n)[0]:a(n),r[e]=s(n)instanceof Int32Array?s(n)[0]:s(n),h.push(r)},function(t){a=g.bind(t),s=m.bind(t)}),h},e.prototype.getPredicates=function(t,e){var n=this.predicates.filter(function(e){return e!==t});if(e&&n.push(e),n.length)return n.reduce(function(t,e){return t.and(e)})},e.prototype.getFilterableFields=function(){return this.table.schema.fields.filter(function(t){return t.type instanceof i.type.Dictionary&&i.type.Int.isInt(t.type.dictionary)}).map(function(t){return t.name})},e.getDictionaryEncodedFields=function(t){return t.filter(function(t){return t.type instanceof i.type.Dictionary})},e.prototype.addPredicate=function(t,e){e&&(this.predicates=h(this.predicates,function(t){return JSON.stringify(t)!==JSON.stringify(e)})),t&&this.predicates.push(t)},e.prototype.removePredicate=function(t){-1!==d(this.predicates,t)&&(this.predicates=h(this.predicates,function(e){return JSON.stringify(e)!==JSON.stringify(t)}))},e.prototype.each=function(t,e,n,r){void 0===r&&(r=this.idField);var o=i.predicate.col(this.dtgField),a=i.predicate.col(this.geomField),s=i.predicate.col(this.idField),l=i.predicate.col(r);this.table.filter(this.getPredicates(null,o.ge(e).and(o.le(n)))).scan(function(e,n){t(a.vector.view.values.get(2*e),a.vector.view.values.get(2*e+1),o.vector.get(e),s.vector.getKey(e),l.vector.getKey(e),e)},function(t){a.bind(t),o.bind(t),s.bind(t),l.bind(t)})},e.prototype.hasLabel=function(t){return this.table.getColumnIndex(t)>-1},e.prototype.decodeField=function(t,e){return this.decodeDictVal(e,t)},e.prototype.searchForRecords=function(t,e,n){var r,o=this,s=[],l=i.predicate.col(this.dtgField),c=i.predicate.col(this.geomField),u=Math.floor(e/1e3),d=Math.ceil(n/1e3);return this.table.filter(this.getPredicates(null,l.ge(u).and(l.le(d)))).scan(function(e){var n=c.vector.view.values.get(e<<1),i=c.vector.view.values.get(e<<1|1);if(a.extent.containsXY(t,i,n)){var o=1e3*l.vector.get(e),u=new a.Feature(p({geometry:new a.geom.Point([i,n]),lat:n,lon:i,dtg:o},g(r,function(t,n,r){return t[r]=n(e),t})));s.push(u)}},function(t){l.bind(t),c.bind(t),r=g(o.fields,function(e,n){return e[n]=i.predicate.col(n).bind(t),e},{})}),Promise.resolve(s)},e.prototype.searchForListRecords=function(t,e,n){var r,o=this,s=[],l={},c=this.idField,u=i.predicate.col(this.dtgField),d=i.predicate.col(this.geomField);return this.table.filter(this.getPredicates(null,u.ge(e).and(u.le(n)))).scan(function(e){var n=d.vector.view.values.get(e<<1),i=d.vector.view.values.get(e<<1|1);if(!t||a.extent.containsXY(t,i,n)){var p=1e3*u.vector.get(e),h=g(r,function(t,n,r){return t[r]=n(e),t},{});h[o.geomField]=[i,n],h[o.dtgField]=p;var m=l[h[c]];f(m)?s[m]=h:(s.push(h),l[h[c]]=s.length-1)}},function(t){u.bind(t),d.bind(t),r=g(o.fields,function(e,n){return e[n]=i.predicate.col(n).bind(t),e},{})}),s},e.prototype.encodeDictVal=function(t,e){return this.table.getColumn(t).getKey(e)},e.prototype.decodeDictVal=function(t,e){var n=this.table.getColumn(e);if(!n)throw new Error("No arrow column for property "+e);if(n instanceof i.vector.DictionaryVector)return n.getValue(t);throw new Error("Arrow column not a dictionary for property "+e)},e.prototype.hasData=function(){return this.dataLoaded},e}(c.StoreObject);e.ArrowStore=v},function(t,e,n){var r=n(156),i=4294967294,o=Math.floor,a=Math.min;t.exports=function(t,e,n,s){e=n(e);for(var l=0,c=null==t?0:t.length,u=e!=e,d=null===e,f=r(e),p=void 0===e;l<c;){var h=o((l+c)/2),g=n(t[h]),m=void 0!==g,v=null===g,y=g==g,b=r(g);if(u)var w=s||y;else w=p?y&&(s||m):d?y&&m&&(s||!v):f?y&&m&&!v&&(s||!b):!v&&!b&&(s?g<=e:g<e);w?l=h+1:c=h}return a(c,i)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(6),a=n(2),s=n(818),l=n(14),c=n(2216),u=n(57),d=n(333),f=n(2217),p=n(579);!function(t){t.id="Track Id",t.label="Label"}(i||(i={}));var h=function(t){function e(e,n){var r=t.call(this,e,d.StoreTypes.Binary)||this;return r.idField=n,r.predicates=[],r.dataLoaded=!1,r._determineRecordSize=function(t,e){var n=16,r=function(n){for(var r=0,i=0,o=0;o<100;o++){var a=o*(n/4),s=Math.abs(t[a]),l=Math.abs(e[a]);if((s<1e-15&&s>0||l<1e-15&&l>0)&&i++,(s>90||l>180)&&r++,r>=1||i>=20)return!0}return!1};return r(n)&&r(n=24)?(u.log.error("Unable to determine bin file record size"),null):(u.log.debug("Format is "+n+" bytes/record"),n)},r._finish=function(){var t=r.dataMap.seconds.length-(r.stride-1);return r.minTimeMillis=1e3*r.dataMap.seconds[0],r.maxTimeMillis=1e3*r.dataMap.seconds[t],r.ranges=r.buildRanges(),r.dataLoaded=!0,Promise.resolve()},r._sort=function(t){var e=new Int32Array(t),n=new Float64Array(t),i=new Int32Array(64);return i[0]=0,i[1]=r.numRecords,new Promise(function(t){f.Sorter.sortBinRec(e,n,i,2,1,r.stride/2,t)})},r}return r(e,t),e.prototype.buildRanges=function(){for(var t,e=this.dataMap.id[0],n=this.dataMap.id[0],r=this.stride;r<this.numRecords*this.stride;r+=0|this.stride)this.dataMap.id[r]>n?n=this.dataMap.id[r]:this.dataMap.id[r]<e&&(e=this.dataMap.id[r]);return(t={})[this.idField?this.idField:i.id]=[e,n],t},e.prototype.getRange=function(t){return this.ranges||(this.ranges=this.buildRanges()),this.ranges[t]},e.prototype.populate=function(t,e){if(this.data=t,t.byteLength%4!=0)return Promise.reject(p.StoreObject.ErrorMessages.INVALID_FORMAT);if(this.dataMap={id:new Uint32Array(t,0),seconds:new Uint32Array(t,4),lat:new Float32Array(t,8),lon:new Float32Array(t,12)},this.fields=[this.idField?this.idField:i.id],this.recordSizeBytes=this._determineRecordSize(this.dataMap.lat,this.dataMap.lon),!this.recordSizeBytes)return Promise.reject(p.StoreObject.ErrorMessages.UNKNOWN_RECORD_SIZE);this.recordSizeBytes>16&&(this.fields.push(i.label),this.dataMap.label=new Uint32Array(t,16)),this.recordSizeBytes>20&&(this.dataMap.label2=new Uint32Array(t,20)),this.stride=this.recordSizeBytes/4,this.numRecords=t.byteLength/this.recordSizeBytes;var n=new Int32Array(t);return s(e)||(e=f.Sorter.sortedBinRec(n,0,this.numRecords,1,this.stride/2)),e?this._finish():this._sort(t).then(this._finish)},e.prototype.getRecordId=function(t){return a(this.dataMap,["id",t])},e.prototype.getTimeInSeconds=function(t){return a(this.dataMap,["seconds",t])},e.prototype.getLat=function(t){return a(this.dataMap,["lat",t])},e.prototype.getLon=function(t){return a(this.dataMap,["lon",t])},e.prototype.decodeField=function(t,e){return e},e.prototype.hasData=function(){return this.dataLoaded},e.prototype.getFilterableFields=function(){return this.fields},e.prototype.getLowerBoundIdx=function(t){var e=t/1e3,n=this.getNumRecords(),r=0,i=0,o=0;if(this.getMinTimeInMillis()>=t)return-1;if(this.getMaxTimeInMillis()<t)return n-1;for(;n>1;)i=o+(r=n>>1),this.getTimeInSeconds(i*this.stride)<e?(o=i,n-=r):n=r;return o},e.prototype.getUpperBoundIdx=function(t){var e=t/1e3,n=this.getNumRecords(),r=0,i=0,o=this.getNumRecords();if(this.getMinTimeInMillis()>t)return 0;if(this.getMaxTimeInMillis()<=t)return n;for(;n>1;)i=o-(r=n>>1),e<this.getTimeInSeconds(i*this.stride)?(o=i,n-=r):n=r;return o},e.prototype.searchForRecords=function(t,e,n){for(var r=[],i=this.getLowerBoundIdx(e);i<this.numRecords;i++){var a=i*this.stride,s=this.getLat(a),l=this.getLon(a),c=1e3*this.getTimeInSeconds(a);if(c>n)break;o.extent.containsXY(t,l,s)&&r.push(new o.Feature({geometry:new o.geom.Point([l,s]),lat:s,lon:l,dtg:c,id:this.getRecordId(a),label:this.getLabelString(a)}))}return Promise.resolve(r)},e.prototype.checkPredicates=function(t){for(var e=0,n=this.predicates.length;e<n;e+=1)if(!this.predicates[e](t))return!1;return!0},e.prototype.each=function(t,e,n){for(var r=this.stride*(l(e)?1:this.getLowerBoundIdx(1e3*e)),i=this.stride*this.numRecords,o=r;o<i&&!(this.dataMap.seconds[o]>n);o+=0|this.stride)this.checkPredicates(this.dataMap.id[o])&&t(this.dataMap.lat[o],this.dataMap.lon[o],this.dataMap.seconds[o],this.dataMap.id[o],this.dataMap.id[o])},e.prototype.getPredicates=function(){return this.predicates},e.prototype.hasLabel=function(){return 6===this.stride},e.prototype.getLabel=function(t){return this.hasLabel()?new c(this.dataMap.label[t],this.dataMap.label2[t]):null},e.prototype.getLabelString=function(t){var e=this.getLabel(t);return e?e.toString():null},e}(p.StoreObject);e.BinaryStore=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){this.restrict="E",this.scope={response:"=",record:"=",properties:"=",index:"="},this.controllerAs="$ctrl"}}();e.StealthMaritimeBaseTabDirective=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2223),o=n(2224),a=n(2225);e.Registry=a.Registry;var s=n(936);e.View=s.View;var l=n(2237),c=n(2238),u=n(2239);e.EasyButtonsService=u.EasyButtonsService;var d=n(2240);r.module("stealth.display",["ccri.angular-utils","ccri.bars","stealth.core.sidebar"]).namespace().run(["stealth.display.registry","ccri.angular-utils.WidgetDef","$rootScope",i.getConfiguredDisplays]).run(["$rootScope","ccri.angular-utils.WidgetDef","ccri.bars.mgr","ccri.bars.Widget",c.initConfiguredEasyButtons]).factory("View",[function(){return s.View}]).service("registry",a.Registry).directive("listMenu",[function(){return{scope:{views:"=",setActive:"&"},template:l}}]).directive("singleView",[function(){return{scope:{},template:'<ccri-angular-utils-widget-compiler widget-def="view.widget" widget-watch class="anchorAll"/>',controller:o.SingleViewCtrl}}]).directive("easyButtons",[function(){return{scope:{easyButtons:"="},template:d,controller:c.EasyButtonCtrl}}]).service("easyButtonsService",u.EasyButtonsService)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=0,i=function(){return function(t){if(!t.widget)throw new Error("Must specify a Widget");this.id=t.id||(r++).toString(),this.name=t.name||this.id,this.type=t.type||this.id,this.widget=t.widget,this.iconClass=t.iconClass||"fa-square",this.active=!!t.active,this.activateOptions=t.activateOptions||null}}();e.View=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r;
/*!
 * jQuery JavaScript Library v1.11.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-17T15:27Z
 */
/*!
 * jQuery JavaScript Library v1.11.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-17T15:27Z
 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,i){var o=[],a=o.slice,s=o.concat,l=o.push,c=o.indexOf,u={},d=u.toString,f=u.hasOwnProperty,p={},h=function(t,e){return new h.fn.init(t,e)},g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,v=/-([\da-z])/gi,y=function(t,e){return e.toUpperCase()};function b(t){var e=t.length,n=h.type(t);return"function"!==n&&!h.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}h.fn=h.prototype={jquery:"1.11.2",constructor:h,selector:"",length:0,toArray:function(){return a.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:a.call(this)},pushStack:function(t){var e=h.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return h.each(this,t,e)},map:function(t){return this.pushStack(h.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:o.sort,splice:o.splice},h.extend=h.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||h.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(i=arguments[s]))for(r in i)t=a[r],a!==(n=i[r])&&(c&&n&&(h.isPlainObject(n)||(e=h.isArray(n)))?(e?(e=!1,o=t&&h.isArray(t)?t:[]):o=t&&h.isPlainObject(t)?t:{},a[r]=h.extend(c,o,n)):void 0!==n&&(a[r]=n));return a},h.extend({expando:"jQuery"+("1.11.2"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===h.type(t)},isArray:Array.isArray||function(t){return"array"===h.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!h.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==h.type(t)||t.nodeType||h.isWindow(t))return!1;try{if(t.constructor&&!f.call(t,"constructor")&&!f.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(p.ownLast)for(e in t)return f.call(t,e);for(e in t);return void 0===e||f.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[d.call(t)]||"object":typeof t},globalEval:function(t){t&&h.trim(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(t){return t.replace(m,"ms-").replace(v,y)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r=0,i=t.length,o=b(t);if(n){if(o)for(;r<i&&!1!==e.apply(t[r],n);r++);else for(r in t)if(!1===e.apply(t[r],n))break}else if(o)for(;r<i&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(g,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(b(Object(t))?h.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){var r;if(e){if(c)return c.call(e,t,n);for(r=e.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;)t[i++]=e[r++];if(n!=n)for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i=0,o=t.length,a=[];if(b(t))for(;i<o;i++)null!=(r=e(t[i],i,n))&&a.push(r);else for(i in t)null!=(r=e(t[i],i,n))&&a.push(r);return s.apply([],a)},guid:1,proxy:function(t,e){var n,r,i;if("string"==typeof e&&(i=t[e],e=t,t=i),h.isFunction(t))return n=a.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||h.guid++,r},now:function(){return+new Date},support:p}),h.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){u["[object "+e+"]"]=e.toLowerCase()});var w=
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(t){var e,n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,y,b,w="sizzle"+1*new Date,_=t.document,x=0,S=0,C=at(),E=at(),T=at(),M=function(t,e){return t===e&&(d=!0),0},k=1<<31,A={}.hasOwnProperty,I=[],O=I.pop,P=I.push,L=I.push,D=I.slice,N=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),q="\\["+F+"*("+B+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",z=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(F+"+","g"),$=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),V=new RegExp("^"+F+"*,"+F+"*"),H=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),W=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),G=new RegExp(z),Y=new RegExp("^"+j+"$"),K={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),rt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){f()};try{L.apply(I=D.call(_.childNodes),_.childNodes),I[_.childNodes.length].nodeType}catch(t){L={apply:I.length?function(t,e){P.apply(t,D.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,s,c,u,d,h,v,y,x,S;if((e?e.ownerDocument||e:_)!==p&&f(e),e=e||p,r=r||[],u=e.nodeType,"string"!=typeof t||!t||1!==u&&9!==u&&11!==u)return r;if(!i&&g){if(11!==u&&(o=J.exec(t)))if(c=o[1]){if(9===u){if(!(s=e.getElementById(c))||!s.parentNode)return r;if(s.id===c)return r.push(s),r}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(c))&&b(e,s)&&s.id===c)return r.push(s),r}else{if(o[2])return L.apply(r,e.getElementsByTagName(t)),r;if((c=o[3])&&n.getElementsByClassName)return L.apply(r,e.getElementsByClassName(c)),r}if(n.qsa&&(!m||!m.test(t))){if(y=v=w,x=e,S=1!==u&&t,1===u&&"object"!==e.nodeName.toLowerCase()){for(h=a(t),(v=e.getAttribute("id"))?y=v.replace(et,"\\$&"):e.setAttribute("id",y),y="[id='"+y+"'] ",d=h.length;d--;)h[d]=y+mt(h[d]);x=tt.test(t)&&ht(e.parentNode)||e,S=h.join(",")}if(S)try{return L.apply(r,x.querySelectorAll(S)),r}catch(t){}finally{v||e.removeAttribute("id")}}}return l(t.replace($,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[w]=!0,t}function lt(t){var e=p.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),i=t.length;i--;)r.attrHandle[n[i]]=e}function ut(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||k)-(~t.sourceIndex||k);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function dt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function pt(t){return st(function(e){return e=+e,st(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ht(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:_;return a!==p&&9===a.nodeType&&a.documentElement?(p=a,h=a.documentElement,(i=a.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),g=!o(a),n.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=lt(function(t){return t.appendChild(a.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(a.getElementsByClassName),n.getById=lt(function(t){return h.appendChild(t).id=w,!a.getElementsByName||!a.getElementsByName(w).length}),n.getById?(r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(t){var e=t.replace(nt,rt);return function(t){return t.getAttribute("id")===e}}):(delete r.find.ID,r.filter.ID=function(t){var e=t.replace(nt,rt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=Z.test(a.querySelectorAll))&&(lt(function(t){h.appendChild(t).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+R+")"),t.querySelectorAll("[id~="+w+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),lt(function(t){var e=a.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Z.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&lt(function(t){n.disconnectedMatch=y.call(t,"div"),y.call(t,"[s!='']:x"),v.push("!=",z)}),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=Z.test(h.compareDocumentPosition),b=e||Z.test(h.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},M=e?function(t,e){if(t===e)return d=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===a||t.ownerDocument===_&&b(_,t)?-1:e===a||e.ownerDocument===_&&b(_,e)?1:u?N(u,t)-N(u,e):0:4&r?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!i||!o)return t===a?-1:e===a?1:i?-1:o?1:u?N(u,t)-N(u,e):0;if(i===o)return ut(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?ut(s[r],l[r]):s[r]===_?-1:l[r]===_?1:0},a):p},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==p&&f(t),e=e.replace(W,"='$1']"),n.matchesSelector&&g&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,p,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==p&&f(t),b(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==p&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&A.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(M),d){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return u=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:st,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(nt,rt),t[3]=(t[3]||t[4]||t[5]||"").replace(nt,rt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(nt,rt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&C(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,f,p,h,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(m){if(o){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=g="only"===t&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&y){for(p=(c=(u=m[w]||(m[w]={}))[t]||[])[0]===x&&c[1],f=c[0]===x&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===e){u[t]=[x,p,f];break}}else if(y&&(c=(e[w]||(e[w]={}))[t])&&c[0]===x)f=c[1];else for(;(d=++p&&d&&d[g]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[w]||(d[w]={}))[t]=[x,f]),d!==e)););return(f-=i)===r||f%r==0&&f/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[w]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=N(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:st(function(t){var e=[],n=[],r=s(t.replace($,"$1"));return r[w]?st(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return ot(t,e).length>0}}),contains:st(function(t){return t=t.replace(nt,rt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:st(function(t){return Y.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(nt,rt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===h},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:pt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:pt(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:pt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=dt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ft(e);function gt(){}function mt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function vt(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=S++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,l,c=[x,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if((s=(l=e[w]||(e[w]={}))[r])&&s[0]===x&&s[1]===o)return c[2]=s[2];if(l[r]=c,c[2]=t(e,n,a))return!0}}}function yt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function bt(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,c=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function wt(t,e,n,r,i,o){return r&&!r[w]&&(r=wt(r)),i&&!i[w]&&(i=wt(i,o)),st(function(o,a,s,l){var c,u,d,f=[],p=[],h=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),m=!t||!o&&e?g:bt(g,f,t,s,l),v=n?i||(o?t:h||r)?[]:a:m;if(n&&n(m,v,s,l),r)for(c=bt(v,p),r(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[p[u]]=!(m[p[u]]=d));if(o){if(i||t){if(i){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(m[u]=d);i(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=i?N(o,d):f[u])>-1&&(o[c]=!(a[c]=d))}}else v=bt(v===a?v.splice(h,v.length):v),i?i(null,a,v,l):L.apply(a,v)})}function _t(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],l=a?1:0,u=vt(function(t){return t===e},s,!0),d=vt(function(t){return N(e,t)>-1},s,!0),f=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?u(t,n,r):d(t,n,r));return e=null,i}];l<o;l++)if(n=r.relative[t[l].type])f=[vt(yt(f),n)];else{if((n=r.filter[t[l].type].apply(null,t[l].matches))[w]){for(i=++l;i<o&&!r.relative[t[i].type];i++);return wt(l>1&&yt(f),l>1&&mt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace($,"$1"),n,l<i&&_t(t.slice(l,i)),i<o&&_t(t=t.slice(i)),i<o&&mt(t))}f.push(n)}return yt(f)}return gt.prototype=r.filters=r.pseudos,r.setFilters=new gt,a=ot.tokenize=function(t,e){var n,i,o,a,s,l,c,u=E[t+" "];if(u)return e?0:u.slice(0);for(s=t,l=[],c=r.preFilter;s;){for(a in n&&!(i=V.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=H.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace($," ")}),s=s.slice(n.length)),r.filter)!(i=K[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):E(t,l).slice(0)},s=ot.compile=function(t,e){var n,i=[],o=[],s=T[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=_t(e[n]))[w]?i.push(s):o.push(s);(s=T(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,l,u){var d,f,h,g=0,m="0",v=o&&[],y=[],b=c,w=o||i&&r.find.TAG("*",u),_=x+=null==b?1:Math.random()||.1,S=w.length;for(u&&(c=a!==p&&a);m!==S&&null!=(d=w[m]);m++){if(i&&d){for(f=0;h=t[f++];)if(h(d,a,s)){l.push(d);break}u&&(x=_)}n&&((d=!h&&d)&&g--,o&&v.push(d))}if(g+=m,n&&m!==g){for(f=0;h=e[f++];)h(v,y,a,s);if(o){if(g>0)for(;m--;)v[m]||y[m]||(y[m]=O.call(l));y=bt(y)}L.apply(l,y),u&&!o&&y.length>0&&g+e.length>1&&ot.uniqueSort(l)}return u&&(x=_,c=b),v};return n?st(o):o}(o,i))).selector=t}return s},l=ot.select=function(t,e,i,o){var l,c,u,d,f,p="function"==typeof t&&t,h=!o&&a(t=p.selector||t);if(i=i||[],1===h.length){if((c=h[0]=h[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&n.getById&&9===e.nodeType&&g&&r.relative[c[1].type]){if(!(e=(r.find.ID(u.matches[0].replace(nt,rt),e)||[])[0]))return i;p&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(l=K.needsContext.test(t)?0:c.length;l--&&(u=c[l],!r.relative[d=u.type]);)if((f=r.find[d])&&(o=f(u.matches[0].replace(nt,rt),tt.test(c[0].type)&&ht(e.parentNode)||e))){if(c.splice(l,1),!(t=o.length&&mt(c)))return L.apply(i,o),i;break}}return(p||s(t,h))(o,e,!g,i,tt.test(t)&&ht(e.parentNode)||e),i},n.sortStable=w.split("").sort(M).join("")===w,n.detectDuplicates=!!d,f(),n.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(p.createElement("div"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ct(R,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),ot}(n);h.find=w,h.expr=w.selectors,h.expr[":"]=h.expr.pseudos,h.unique=w.uniqueSort,h.text=w.getText,h.isXMLDoc=w.isXML,h.contains=w.contains;var _=h.expr.match.needsContext,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;function C(t,e,n){if(h.isFunction(e))return h.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return h.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(S.test(e))return h.filter(e,t,n);e=h.filter(e,t)}return h.grep(t,function(t){return h.inArray(t,e)>=0!==n})}h.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?h.find.matchesSelector(r,t)?[r]:[]:h.find.matches(t,h.grep(e,function(t){return 1===t.nodeType}))},h.fn.extend({find:function(t){var e,n=[],r=this,i=r.length;if("string"!=typeof t)return this.pushStack(h(t).filter(function(){for(e=0;e<i;e++)if(h.contains(r[e],this))return!0}));for(e=0;e<i;e++)h.find(t,r[e],n);return(n=this.pushStack(i>1?h.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(C(this,t||[],!1))},not:function(t){return this.pushStack(C(this,t||[],!0))},is:function(t){return!!C(this,"string"==typeof t&&_.test(t)?h(t):t||[],!1).length}});var E,T=n.document,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(h.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:M.exec(t))||!n[1]&&e)return!e||e.jquery?(e||E).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof h?e[0]:e,h.merge(this,h.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:T,!0)),x.test(n[1])&&h.isPlainObject(e))for(n in e)h.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if((r=T.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return E.find(t);this.length=1,this[0]=r}return this.context=T,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):h.isFunction(t)?void 0!==E.ready?E.ready(t):t(h):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),h.makeArray(t,this))}).prototype=h.fn,E=h(T);var k=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}h.extend({dir:function(t,e,n){for(var r=[],i=t[e];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!h(i).is(n));)1===i.nodeType&&r.push(i),i=i[e];return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),h.fn.extend({has:function(t){var e,n=h(t,this),r=n.length;return this.filter(function(){for(e=0;e<r;e++)if(h.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=_.test(t)||"string"!=typeof t?h(t,e||this.context):0;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&h.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?h.unique(o):o)},index:function(t){return t?"string"==typeof t?h.inArray(this[0],h(t)):h.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(h.unique(h.merge(this.get(),h(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),h.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return h.dir(t,"parentNode")},parentsUntil:function(t,e,n){return h.dir(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return h.dir(t,"nextSibling")},prevAll:function(t){return h.dir(t,"previousSibling")},nextUntil:function(t,e,n){return h.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return h.dir(t,"previousSibling",n)},siblings:function(t){return h.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return h.sibling(t.firstChild)},contents:function(t){return h.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:h.merge([],t.childNodes)}},function(t,e){h.fn[t]=function(n,r){var i=h.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=h.filter(r,i)),this.length>1&&(A[t]||(i=h.unique(i)),k.test(t)&&(i=i.reverse())),this.pushStack(i)}});var O,P=/\S+/g,L={};function D(){T.addEventListener?(T.removeEventListener("DOMContentLoaded",N,!1),n.removeEventListener("load",N,!1)):(T.detachEvent("onreadystatechange",N),n.detachEvent("onload",N))}function N(){(T.addEventListener||"load"===event.type||"complete"===T.readyState)&&(D(),h.ready())}h.Callbacks=function(t){var e,n,r,i,o,a,s=[],l=!(t="string"==typeof t?L[t]||function(t){var e=L[t]={};return h.each(t.match(P)||[],function(t,n){e[n]=!0}),e}(t):h.extend({},t)).once&&[],c=function(d){for(n=t.memory&&d,r=!0,o=a||0,a=0,i=s.length,e=!0;s&&o<i;o++)if(!1===s[o].apply(d[0],d[1])&&t.stopOnFalse){n=!1;break}e=!1,s&&(l?l.length&&c(l.shift()):n?s=[]:u.disable())},u={add:function(){if(s){var r=s.length;!function e(n){h.each(n,function(n,r){var i=h.type(r);"function"===i?t.unique&&u.has(r)||s.push(r):r&&r.length&&"string"!==i&&e(r)})}(arguments),e?i=s.length:n&&(a=r,c(n))}return this},remove:function(){return s&&h.each(arguments,function(t,n){for(var r;(r=h.inArray(n,s,r))>-1;)s.splice(r,1),e&&(r<=i&&i--,r<=o&&o--)}),this},has:function(t){return t?h.inArray(t,s)>-1:!(!s||!s.length)},empty:function(){return s=[],i=0,this},disable:function(){return s=l=n=void 0,this},disabled:function(){return!s},lock:function(){return l=void 0,n||u.disable(),this},locked:function(){return!l},fireWith:function(t,n){return!s||r&&!l||(n=[t,(n=n||[]).slice?n.slice():n],e?l.push(n):c(n)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},h.extend({Deferred:function(t){var e=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return h.Deferred(function(n){h.each(e,function(e,o){var a=h.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&h.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?h.extend(t,r):r}},i={};return r.pipe=r.then,h.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=a.call(arguments),s=o.length,l=1!==s||t&&h.isFunction(t.promise)?s:0,c=1===l?t:h.Deferred(),u=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?a.call(arguments):i,r===e?c.notifyWith(n,r):--l||c.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),r=new Array(s);i<s;i++)o[i]&&h.isFunction(o[i].promise)?o[i].promise().done(u(i,r,o)).fail(c.reject).progress(u(i,n,e)):--l;return l||c.resolveWith(r,o),c.promise()}}),h.fn.ready=function(t){return h.ready.promise().done(t),this},h.extend({isReady:!1,readyWait:1,holdReady:function(t){t?h.readyWait++:h.ready(!0)},ready:function(t){if(!0===t?!--h.readyWait:!h.isReady){if(!T.body)return setTimeout(h.ready);h.isReady=!0,!0!==t&&--h.readyWait>0||(O.resolveWith(T,[h]),h.fn.triggerHandler&&(h(T).triggerHandler("ready"),h(T).off("ready")))}}}),h.ready.promise=function(t){if(!O)if(O=h.Deferred(),"complete"===T.readyState)setTimeout(h.ready);else if(T.addEventListener)T.addEventListener("DOMContentLoaded",N,!1),n.addEventListener("load",N,!1);else{T.attachEvent("onreadystatechange",N),n.attachEvent("onload",N);var e=!1;try{e=null==n.frameElement&&T.documentElement}catch(t){}e&&e.doScroll&&function t(){if(!h.isReady){try{e.doScroll("left")}catch(e){return setTimeout(t,50)}D(),h.ready()}}()}return O.promise(t)};var R,F="undefined";for(R in h(p))break;p.ownLast="0"!==R,p.inlineBlockNeedsLayout=!1,h(function(){var t,e,n,r;(n=T.getElementsByTagName("body")[0])&&n.style&&(e=T.createElement("div"),(r=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(e),typeof e.style.zoom!==F&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",p.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(r))}),function(){var t=T.createElement("div");if(null==p.deleteExpando){p.deleteExpando=!0;try{delete t.test}catch(t){p.deleteExpando=!1}}t=null}(),h.acceptData=function(t){var e=h.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var B=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/([A-Z])/g;function q(t,e,n){if(void 0===n&&1===t.nodeType){var r="data-"+e.replace(j,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:B.test(n)?h.parseJSON(n):n)}catch(t){}h.data(t,e,n)}else n=void 0}return n}function z(t){var e;for(e in t)if(("data"!==e||!h.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function U(t,e,n,r){if(h.acceptData(t)){var i,a,s=h.expando,l=t.nodeType,c=l?h.cache:t,u=l?t[s]:t[s]&&s;if(u&&c[u]&&(r||c[u].data)||void 0!==n||"string"!=typeof e)return u||(u=l?t[s]=o.pop()||h.guid++:s),c[u]||(c[u]=l?{}:{toJSON:h.noop}),"object"!=typeof e&&"function"!=typeof e||(r?c[u]=h.extend(c[u],e):c[u].data=h.extend(c[u].data,e)),a=c[u],r||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[h.camelCase(e)]=n),"string"==typeof e?null==(i=a[e])&&(i=a[h.camelCase(e)]):i=a,i}}function $(t,e,n){if(h.acceptData(t)){var r,i,o=t.nodeType,a=o?h.cache:t,s=o?t[h.expando]:h.expando;if(a[s]){if(e&&(r=n?a[s]:a[s].data)){i=(e=h.isArray(e)?e.concat(h.map(e,h.camelCase)):e in r?[e]:(e=h.camelCase(e))in r?[e]:e.split(" ")).length;for(;i--;)delete r[e[i]];if(n?!z(r):!h.isEmptyObject(r))return}(n||(delete a[s].data,z(a[s])))&&(o?h.cleanData([t],!0):p.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}h.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?h.cache[t[h.expando]]:t[h.expando])&&!z(t)},data:function(t,e,n){return U(t,e,n)},removeData:function(t,e){return $(t,e)},_data:function(t,e,n){return U(t,e,n,!0)},_removeData:function(t,e){return $(t,e,!0)}}),h.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=h.data(o),1===o.nodeType&&!h._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&q(o,r=h.camelCase(r.slice(5)),i[r]);h._data(o,"parsedAttrs",!0)}return i}return"object"==typeof t?this.each(function(){h.data(this,t)}):arguments.length>1?this.each(function(){h.data(this,t,e)}):o?q(o,t,h.data(o,t)):void 0},removeData:function(t){return this.each(function(){h.removeData(this,t)})}}),h.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=h._data(t,e),n&&(!r||h.isArray(n)?r=h._data(t,e,h.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=h.queue(t,e),r=n.length,i=n.shift(),o=h._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){h.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return h._data(t,n)||h._data(t,n,{empty:h.Callbacks("once memory").add(function(){h._removeData(t,e+"queue"),h._removeData(t,n)})})}}),h.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?h.queue(this[0],t):void 0===e?this:this.each(function(){var n=h.queue(this,t,e);h._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&h.dequeue(this,t)})},dequeue:function(t){return this.each(function(){h.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=h.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=h._data(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=["Top","Right","Bottom","Left"],W=function(t,e){return t=e||t,"none"===h.css(t,"display")||!h.contains(t.ownerDocument,t)},G=h.access=function(t,e,n,r,i,o,a){var s=0,l=t.length,c=null==n;if("object"===h.type(n))for(s in i=!0,n)h.access(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,h.isFunction(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(h(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):l?e(t[0],n):o},Y=/^(?:checkbox|radio)$/i;!function(){var t=T.createElement("input"),e=T.createElement("div"),n=T.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",p.leadingWhitespace=3===e.firstChild.nodeType,p.tbody=!e.getElementsByTagName("tbody").length,p.htmlSerialize=!!e.getElementsByTagName("link").length,p.html5Clone="<:nav></:nav>"!==T.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,n.appendChild(t),p.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,n.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",p.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,p.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){p.noCloneEvent=!1}),e.cloneNode(!0).click()),null==p.deleteExpando){p.deleteExpando=!0;try{delete e.test}catch(t){p.deleteExpando=!1}}}(),function(){var t,e,r=T.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})e="on"+t,(p[t+"Bubbles"]=e in n)||(r.setAttribute(e,"t"),p[t+"Bubbles"]=!1===r.attributes[e].expando);r=null}();var K=/^(?:input|select|textarea)$/i,X=/^key/,Q=/^(?:mouse|pointer|contextmenu)|click/,Z=/^(?:focusinfocus|focusoutblur)$/,J=/^([^.]*)(?:\.(.+)|)$/;function tt(){return!0}function et(){return!1}function nt(){try{return T.activeElement}catch(t){}}function rt(t){var e=it.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}h.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,c,u,d,f,p,g,m,v=h._data(t);if(v){for(n.handler&&(n=(l=n).handler,i=l.selector),n.guid||(n.guid=h.guid++),(a=v.events)||(a=v.events={}),(u=v.handle)||((u=v.handle=function(t){return typeof h===F||t&&h.event.triggered===t.type?void 0:h.event.dispatch.apply(u.elem,arguments)}).elem=t),s=(e=(e||"").match(P)||[""]).length;s--;)p=m=(o=J.exec(e[s])||[])[1],g=(o[2]||"").split(".").sort(),p&&(c=h.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=h.event.special[p]||{},d=h.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&h.expr.match.needsContext.test(i),namespace:g.join(".")},l),(f=a[p])||((f=a[p]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,r,g,u)||(t.addEventListener?t.addEventListener(p,u,!1):t.attachEvent&&t.attachEvent("on"+p,u))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),h.event.global[p]=!0);t=null}},remove:function(t,e,n,r,i){var o,a,s,l,c,u,d,f,p,g,m,v=h.hasData(t)&&h._data(t);if(v&&(u=v.events)){for(c=(e=(e||"").match(P)||[""]).length;c--;)if(p=m=(s=J.exec(e[c])||[])[1],g=(s[2]||"").split(".").sort(),p){for(d=h.event.special[p]||{},f=u[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(t,a));l&&!f.length&&(d.teardown&&!1!==d.teardown.call(t,g,v.handle)||h.removeEvent(t,p,v.handle),delete u[p])}else for(p in u)h.event.remove(t,p+e[c],n,r,!0);h.isEmptyObject(u)&&(delete v.handle,h._removeData(t,"events"))}},trigger:function(t,e,r,i){var o,a,s,l,c,u,d,p=[r||T],g=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(s=u=r=r||T,3!==r.nodeType&&8!==r.nodeType&&!Z.test(g+h.event.triggered)&&(g.indexOf(".")>=0&&(g=(m=g.split(".")).shift(),m.sort()),a=g.indexOf(":")<0&&"on"+g,(t=t[h.expando]?t:new h.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:h.makeArray(e,[t]),c=h.event.special[g]||{},i||!c.trigger||!1!==c.trigger.apply(r,e))){if(!i&&!c.noBubble&&!h.isWindow(r)){for(l=c.delegateType||g,Z.test(l+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),u=s;u===(r.ownerDocument||T)&&p.push(u.defaultView||u.parentWindow||n)}for(d=0;(s=p[d++])&&!t.isPropagationStopped();)t.type=d>1?l:c.bindType||g,(o=(h._data(s,"events")||{})[t.type]&&h._data(s,"handle"))&&o.apply(s,e),(o=a&&s[a])&&o.apply&&h.acceptData(s)&&(t.result=o.apply(s,e),!1===t.result&&t.preventDefault());if(t.type=g,!i&&!t.isDefaultPrevented()&&(!c._default||!1===c._default.apply(p.pop(),e))&&h.acceptData(r)&&a&&r[g]&&!h.isWindow(r)){(u=r[a])&&(r[a]=null),h.event.triggered=g;try{r[g]()}catch(t){}h.event.triggered=void 0,u&&(r[a]=u)}return t.result}},dispatch:function(t){t=h.event.fix(t);var e,n,r,i,o,s,l=a.call(arguments),c=(h._data(this,"events")||{})[t.type]||[],u=h.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(s=h.event.handlers.call(this,t,c),e=0;(i=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(r.namespace)||(t.handleObj=r,t.data=r.data,void 0!==(n=((h.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,l))&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(i=[],o=0;o<s;o++)void 0===i[n=(r=e[o]).selector+" "]&&(i[n]=r.needsContext?h(n,this).index(l)>=0:h.find(n,this,null,[l]).length),i[n]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[h.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Q.test(i)?this.mouseHooks:X.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new h.Event(o),e=r.length;e--;)t[n=r[e]]=o[n];return t.target||(t.target=o.srcElement||T),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=(r=t.target.ownerDocument||T).documentElement,n=r.body,t.pageX=e.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==nt()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===nt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(h.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return h.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=h.extend(new h.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?h.event.trigger(i,null,e):h.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},h.removeEvent=T.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var r="on"+e;t.detachEvent&&(typeof t[r]===F&&(t[r]=null),t.detachEvent(r,n))},h.Event=function(t,e){if(!(this instanceof h.Event))return new h.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?tt:et):this.type=t,e&&h.extend(this,e),this.timeStamp=t&&t.timeStamp||h.now(),this[h.expando]=!0},h.Event.prototype={isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=tt,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=tt,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=tt,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){h.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||h.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),p.submitBubbles||(h.event.special.submit={setup:function(){if(h.nodeName(this,"form"))return!1;h.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=h.nodeName(e,"input")||h.nodeName(e,"button")?e.form:void 0;n&&!h._data(n,"submitBubbles")&&(h.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),h._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&h.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(h.nodeName(this,"form"))return!1;h.event.remove(this,"._submit")}}),p.changeBubbles||(h.event.special.change={setup:function(){if(K.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(h.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),h.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),h.event.simulate("change",this,t,!0)})),!1;h.event.add(this,"beforeactivate._change",function(t){var e=t.target;K.test(e.nodeName)&&!h._data(e,"changeBubbles")&&(h.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||h.event.simulate("change",this.parentNode,t,!0)}),h._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return h.event.remove(this,"._change"),!K.test(this.nodeName)}}),p.focusinBubbles||h.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){h.event.simulate(e,t.target,h.event.fix(t),!0)};h.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=h._data(r,e);i||r.addEventListener(t,n,!0),h._data(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=h._data(r,e)-1;i?h._data(r,e,i):(r.removeEventListener(t,n,!0),h._removeData(r,e))}}}),h.fn.extend({on:function(t,e,n,r,i){var o,a;if("object"==typeof t){for(o in"string"!=typeof e&&(n=n||e,e=void 0),t)this.on(o,e,n,t[o],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),!1===r)r=et;else if(!r)return this;return 1===i&&(a=r,(r=function(t){return h().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=h.guid++)),this.each(function(){h.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,h(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=et),this.each(function(){h.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){h.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return h.event.trigger(t,e,n,!0)}});var it="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ot=/ jQuery\d+="(?:null|\d+)"/g,at=new RegExp("<(?:"+it+")[\\s/>]","i"),st=/^\s+/,lt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ct=/<([\w:]+)/,ut=/<tbody/i,dt=/<|&#?\w+;/,ft=/<(?:script|style|link)/i,pt=/checked\s*(?:[^=]|=\s*.checked.)/i,ht=/^$|\/(?:java|ecma)script/i,gt=/^true\/(.*)/,mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,vt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:p.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},yt=rt(T).appendChild(T.createElement("div"));function bt(t,e){var n,r,i=0,o=typeof t.getElementsByTagName!==F?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==F?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],n=t.childNodes||t;null!=(r=n[i]);i++)!e||h.nodeName(r,e)?o.push(r):h.merge(o,bt(r,e));return void 0===e||e&&h.nodeName(t,e)?h.merge([t],o):o}function wt(t){Y.test(t.type)&&(t.defaultChecked=t.checked)}function _t(t,e){return h.nodeName(t,"table")&&h.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function xt(t){return t.type=(null!==h.find.attr(t,"type"))+"/"+t.type,t}function St(t){var e=gt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function Ct(t,e){for(var n,r=0;null!=(n=t[r]);r++)h._data(n,"globalEval",!e||h._data(e[r],"globalEval"))}function Et(t,e){if(1===e.nodeType&&h.hasData(t)){var n,r,i,o=h._data(t),a=h._data(e,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(r=0,i=s[n].length;r<i;r++)h.event.add(e,n,s[n][r]);a.data&&(a.data=h.extend({},a.data))}}function Tt(t,e){var n,r,i;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!p.noCloneEvent&&e[h.expando]){for(r in(i=h._data(e)).events)h.removeEvent(e,r,i.handle);e.removeAttribute(h.expando)}"script"===n&&e.text!==t.text?(xt(e).text=t.text,St(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),p.html5Clone&&t.innerHTML&&!h.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Y.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}vt.optgroup=vt.option,vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td,h.extend({clone:function(t,e,n){var r,i,o,a,s,l=h.contains(t.ownerDocument,t);if(p.html5Clone||h.isXMLDoc(t)||!at.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(yt.innerHTML=t.outerHTML,yt.removeChild(o=yt.firstChild)),!(p.noCloneEvent&&p.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||h.isXMLDoc(t)))for(r=bt(o),s=bt(t),a=0;null!=(i=s[a]);++a)r[a]&&Tt(i,r[a]);if(e)if(n)for(s=s||bt(t),r=r||bt(o),a=0;null!=(i=s[a]);a++)Et(i,r[a]);else Et(t,o);return(r=bt(o,"script")).length>0&&Ct(r,!l&&bt(t,"script")),r=s=i=null,o},buildFragment:function(t,e,n,r){for(var i,o,a,s,l,c,u,d=t.length,f=rt(e),g=[],m=0;m<d;m++)if((o=t[m])||0===o)if("object"===h.type(o))h.merge(g,o.nodeType?[o]:o);else if(dt.test(o)){for(s=s||f.appendChild(e.createElement("div")),l=(ct.exec(o)||["",""])[1].toLowerCase(),u=vt[l]||vt._default,s.innerHTML=u[1]+o.replace(lt,"<$1></$2>")+u[2],i=u[0];i--;)s=s.lastChild;if(!p.leadingWhitespace&&st.test(o)&&g.push(e.createTextNode(st.exec(o)[0])),!p.tbody)for(i=(o="table"!==l||ut.test(o)?"<table>"!==u[1]||ut.test(o)?0:s:s.firstChild)&&o.childNodes.length;i--;)h.nodeName(c=o.childNodes[i],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(h.merge(g,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else g.push(e.createTextNode(o));for(s&&f.removeChild(s),p.appendChecked||h.grep(bt(g,"input"),wt),m=0;o=g[m++];)if((!r||-1===h.inArray(o,r))&&(a=h.contains(o.ownerDocument,o),s=bt(f.appendChild(o),"script"),a&&Ct(s),n))for(i=0;o=s[i++];)ht.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(t,e){for(var n,r,i,a,s=0,l=h.expando,c=h.cache,u=p.deleteExpando,d=h.event.special;null!=(n=t[s]);s++)if((e||h.acceptData(n))&&(a=(i=n[l])&&c[i])){if(a.events)for(r in a.events)d[r]?h.event.remove(n,r):h.removeEvent(n,r,a.handle);c[i]&&(delete c[i],u?delete n[l]:typeof n.removeAttribute!==F?n.removeAttribute(l):n[l]=null,o.push(i))}}}),h.fn.extend({text:function(t){return G(this,function(t){return void 0===t?h.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||_t(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_t(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?h.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||h.cleanData(bt(n)),n.parentNode&&(e&&h.contains(n.ownerDocument,n)&&Ct(bt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&h.cleanData(bt(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&h.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return h.clone(this,t,e)})},html:function(t){return G(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(ot,""):void 0;if("string"==typeof t&&!ft.test(t)&&(p.htmlSerialize||!at.test(t))&&(p.leadingWhitespace||!st.test(t))&&!vt[(ct.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(lt,"<$1></$2>");try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(h.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,h.cleanData(bt(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=s.apply([],t);var n,r,i,o,a,l,c=0,u=this.length,d=this,f=u-1,g=t[0],m=h.isFunction(g);if(m||u>1&&"string"==typeof g&&!p.checkClone&&pt.test(g))return this.each(function(n){var r=d.eq(n);m&&(t[0]=g.call(this,n,r.html())),r.domManip(t,e)});if(u&&(n=(l=h.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=n),n)){for(i=(o=h.map(bt(l,"script"),xt)).length;c<u;c++)r=l,c!==f&&(r=h.clone(r,!0,!0),i&&h.merge(o,bt(r,"script"))),e.call(this[c],r,c);if(i)for(a=o[o.length-1].ownerDocument,h.map(o,St),c=0;c<i;c++)r=o[c],ht.test(r.type||"")&&!h._data(r,"globalEval")&&h.contains(a,r)&&(r.src?h._evalUrl&&h._evalUrl(r.src):h.globalEval((r.text||r.textContent||r.innerHTML||"").replace(mt,"")));l=n=null}return this}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){h.fn[t]=function(t){for(var n,r=0,i=[],o=h(t),a=o.length-1;r<=a;r++)n=r===a?this:this.clone(!0),h(o[r])[e](n),l.apply(i,n.get());return this.pushStack(i)}});var Mt,kt={};function At(t,e){var r,i=h(e.createElement(t)).appendTo(e.body),o=n.getDefaultComputedStyle&&(r=n.getDefaultComputedStyle(i[0]))?r.display:h.css(i[0],"display");return i.detach(),o}function It(t){var e=T,n=kt[t];return n||("none"!==(n=At(t,e))&&n||((e=((Mt=(Mt||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||Mt[0].contentDocument).document).write(),e.close(),n=At(t,e),Mt.detach()),kt[t]=n),n}!function(){var t;p.shrinkWrapBlocks=function(){return null!=t?t:(t=!1,(n=T.getElementsByTagName("body")[0])&&n.style?(e=T.createElement("div"),(r=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(e),typeof e.style.zoom!==F&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(T.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(r),t):void 0);var e,n,r}}();var Ot,Pt,Lt=/^margin/,Dt=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),Nt=/^(top|right|bottom|left)$/;function Rt(t,e){return{get:function(){var n=t();if(null!=n){if(!n)return(this.get=e).apply(this,arguments);delete this.get}}}}n.getComputedStyle?(Ot=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)},Pt=function(t,e,n){var r,i,o,a,s=t.style;return a=(n=n||Ot(t))?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==a||h.contains(t.ownerDocument,t)||(a=h.style(t,e)),Dt.test(a)&&Lt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0===a?a:a+""}):T.documentElement.currentStyle&&(Ot=function(t){return t.currentStyle},Pt=function(t,e,n){var r,i,o,a,s=t.style;return null==(a=(n=n||Ot(t))?n[e]:void 0)&&s&&s[e]&&(a=s[e]),Dt.test(a)&&!Nt.test(e)&&(r=s.left,(o=(i=t.runtimeStyle)&&i.left)&&(i.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"}),function(){var t,e,r,i,o,a,s;function l(){var t,e,r,l;(e=T.getElementsByTagName("body")[0])&&e.style&&(t=T.createElement("div"),(r=T.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",i=o=!1,s=!0,n.getComputedStyle&&(i="1%"!==(n.getComputedStyle(t,null)||{}).top,o="4px"===(n.getComputedStyle(t,null)||{width:"4px"}).width,(l=t.appendChild(T.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",l.style.marginRight=l.style.width="0",t.style.width="1px",s=!parseFloat((n.getComputedStyle(l,null)||{}).marginRight),t.removeChild(l)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(l=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===l[0].offsetHeight)&&(l[0].style.display="",l[1].style.display="none",a=0===l[0].offsetHeight),e.removeChild(r))}(t=T.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(e=(r=t.getElementsByTagName("a")[0])&&r.style)&&(e.cssText="float:left;opacity:.5",p.opacity="0.5"===e.opacity,p.cssFloat=!!e.cssFloat,t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===t.style.backgroundClip,p.boxSizing=""===e.boxSizing||""===e.MozBoxSizing||""===e.WebkitBoxSizing,h.extend(p,{reliableHiddenOffsets:function(){return null==a&&l(),a},boxSizingReliable:function(){return null==o&&l(),o},pixelPosition:function(){return null==i&&l(),i},reliableMarginRight:function(){return null==s&&l(),s}}))}(),h.swap=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};var Ft=/alpha\([^)]*\)/i,Bt=/opacity\s*=\s*([^)]*)/,jt=/^(none|table(?!-c[ea]).+)/,qt=new RegExp("^("+V+")(.*)$","i"),zt=new RegExp("^([+-])=("+V+")","i"),Ut={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:"0",fontWeight:"400"},Vt=["Webkit","O","Moz","ms"];function Ht(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),r=e,i=Vt.length;i--;)if((e=Vt[i]+n)in t)return e;return r}function Wt(t,e){for(var n,r,i,o=[],a=0,s=t.length;a<s;a++)(r=t[a]).style&&(o[a]=h._data(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&W(r)&&(o[a]=h._data(r,"olddisplay",It(r.nodeName)))):(i=W(r),(n&&"none"!==n||!i)&&h._data(r,"olddisplay",i?n:h.css(r,"display"))));for(a=0;a<s;a++)(r=t[a]).style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function Gt(t,e,n){var r=qt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function Yt(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=h.css(t,n+H[o],!0,i)),r?("content"===n&&(a-=h.css(t,"padding"+H[o],!0,i)),"margin"!==n&&(a-=h.css(t,"border"+H[o]+"Width",!0,i))):(a+=h.css(t,"padding"+H[o],!0,i),"padding"!==n&&(a+=h.css(t,"border"+H[o]+"Width",!0,i)));return a}function Kt(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Ot(t),a=p.boxSizing&&"border-box"===h.css(t,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Pt(t,e,o))<0||null==i)&&(i=t.style[e]),Dt.test(i))return i;r=a&&(p.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+Yt(t,e,n||(a?"border":"content"),r,o)+"px"}function Xt(t,e,n,r,i){return new Xt.prototype.init(t,e,n,r,i)}h.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Pt(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:p.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=h.camelCase(e),l=t.style;if(e=h.cssProps[s]||(h.cssProps[s]=Ht(l,s)),a=h.cssHooks[e]||h.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e];if("string"===(o=typeof n)&&(i=zt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(h.css(t,e)),o="number"),null!=n&&n==n&&("number"!==o||h.cssNumber[s]||(n+="px"),p.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,r)))))try{l[e]=n}catch(t){}}},css:function(t,e,n,r){var i,o,a,s=h.camelCase(e);return e=h.cssProps[s]||(h.cssProps[s]=Ht(t.style,s)),(a=h.cssHooks[e]||h.cssHooks[s])&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=Pt(t,e,r)),"normal"===o&&e in $t&&(o=$t[e]),""===n||n?(i=parseFloat(o),!0===n||h.isNumeric(i)?i||0:o):o}}),h.each(["height","width"],function(t,e){h.cssHooks[e]={get:function(t,n,r){if(n)return jt.test(h.css(t,"display"))&&0===t.offsetWidth?h.swap(t,Ut,function(){return Kt(t,e,r)}):Kt(t,e,r)},set:function(t,n,r){var i=r&&Ot(t);return Gt(0,n,r?Yt(t,e,r,p.boxSizing&&"border-box"===h.css(t,"boxSizing",!1,i),i):0)}}}),p.opacity||(h.cssHooks.opacity={get:function(t,e){return Bt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,r=t.currentStyle,i=h.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===h.trim(o.replace(Ft,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||r&&!r.filter)||(n.filter=Ft.test(o)?o.replace(Ft,i):o+" "+i)}}),h.cssHooks.marginRight=Rt(p.reliableMarginRight,function(t,e){if(e)return h.swap(t,{display:"inline-block"},Pt,[t,"marginRight"])}),h.each({margin:"",padding:"",border:"Width"},function(t,e){h.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+H[r]+e]=o[r]||o[r-2]||o[0];return i}},Lt.test(t)||(h.cssHooks[t+e].set=Gt)}),h.fn.extend({css:function(t,e){return G(this,function(t,e,n){var r,i,o={},a=0;if(h.isArray(e)){for(r=Ot(t),i=e.length;a<i;a++)o[e[a]]=h.css(t,e[a],!1,r);return o}return void 0!==n?h.style(t,e,n):h.css(t,e)},t,e,arguments.length>1)},show:function(){return Wt(this,!0)},hide:function(){return Wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){W(this)?h(this).show():h(this).hide()})}}),h.Tween=Xt,Xt.prototype={constructor:Xt,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(h.cssNumber[n]?"":"px")},cur:function(){var t=Xt.propHooks[this.prop];return t&&t.get?t.get(this):Xt.propHooks._default.get(this)},run:function(t){var e,n=Xt.propHooks[this.prop];return this.options.duration?this.pos=e=h.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Xt.propHooks._default.set(this),this}},Xt.prototype.init.prototype=Xt.prototype,Xt.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=h.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){h.fx.step[t.prop]?h.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[h.cssProps[t.prop]]||h.cssHooks[t.prop])?h.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},Xt.propHooks.scrollTop=Xt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},h.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},h.fx=Xt.prototype.init,h.fx.step={};var Qt,Zt,Jt=/^(?:toggle|show|hide)$/,te=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),ee=/queueHooks$/,ne=[function(t,e,n){var r,i,o,a,s,l,c,u=this,d={},f=t.style,g=t.nodeType&&W(t),m=h._data(t,"fxshow");n.queue||(null==(s=h._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,h.queue(t,"fx").length||s.empty.fire()})}));1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=h.css(t,"display"),"inline"===("none"===c?h._data(t,"olddisplay")||It(t.nodeName):c)&&"none"===h.css(t,"float")&&(p.inlineBlockNeedsLayout&&"inline"!==It(t.nodeName)?f.zoom=1:f.display="inline-block"));n.overflow&&(f.overflow="hidden",p.shrinkWrapBlocks()||u.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],Jt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}d[r]=m&&m[r]||h.style(t,r)}else c=void 0;if(h.isEmptyObject(d))"inline"===("none"===c?It(t.nodeName):c)&&(f.display=c);else for(r in m?"hidden"in m&&(g=m.hidden):m=h._data(t,"fxshow",{}),o&&(m.hidden=!g),g?h(t).show():u.done(function(){h(t).hide()}),u.done(function(){var e;for(e in h._removeData(t,"fxshow"),d)h.style(t,e,d[e])}),d)a=ae(g?m[r]:0,r,u),r in m||(m[r]=a.start,g&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}],re={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=te.exec(e),o=i&&i[3]||(h.cssNumber[t]?"":"px"),a=(h.cssNumber[t]||"px"!==o&&+r)&&te.exec(h.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{a/=s=s||".5",h.style(n.elem,t,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};function ie(){return setTimeout(function(){Qt=void 0}),Qt=h.now()}function oe(t,e){var n,r={height:t},i=0;for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=H[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function ae(t,e,n){for(var r,i=(re[e]||[]).concat(re["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function se(t,e,n){var r,i,o=0,a=ne.length,s=h.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=Qt||ie(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(t,[c,r,n]),r<1&&a?n:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:h.extend({},e),opts:h.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Qt||ie(),duration:n.duration,tweens:[],createTween:function(e,n){var r=h.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?s.resolveWith(t,[c,e]):s.rejectWith(t,[c,e]),this}}),u=c.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=h.camelCase(n)],o=t[n],h.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=h.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(u,c.opts.specialEasing);o<a;o++)if(r=ne[o].call(c,t,u,c.opts))return r;return h.map(u,ae,c),h.isFunction(c.opts.start)&&c.opts.start.call(t,c),h.fx.timer(h.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}h.Animation=h.extend(se,{tweener:function(t,e){h.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;r<i;r++)n=t[r],re[n]=re[n]||[],re[n].unshift(e)},prefilter:function(t,e){e?ne.unshift(t):ne.push(t)}}),h.speed=function(t,e,n){var r=t&&"object"==typeof t?h.extend({},t):{complete:n||!n&&e||h.isFunction(t)&&t,duration:t,easing:n&&e||e&&!h.isFunction(e)&&e};return r.duration=h.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in h.fx.speeds?h.fx.speeds[r.duration]:h.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){h.isFunction(r.old)&&r.old.call(this),r.queue&&h.dequeue(this,r.queue)},r},h.fn.extend({fadeTo:function(t,e,n,r){return this.filter(W).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=h.isEmptyObject(t),o=h.speed(e,n,r),a=function(){var e=se(this,h.extend({},t),o);(i||h._data(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=h.timers,a=h._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ee.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||h.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=h._data(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=h.timers,a=r?r.length:0;for(n.finish=!0,h.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),h.each(["toggle","show","hide"],function(t,e){var n=h.fn[e];h.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(oe(e,!0),t,r,i)}}),h.each({slideDown:oe("show"),slideUp:oe("hide"),slideToggle:oe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){h.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),h.timers=[],h.fx.tick=function(){var t,e=h.timers,n=0;for(Qt=h.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||h.fx.stop(),Qt=void 0},h.fx.timer=function(t){h.timers.push(t),t()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){Zt||(Zt=setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){clearInterval(Zt),Zt=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(t,e){return t=h.fx&&h.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t,e,n,r,i;(e=T.createElement("div")).setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=e.getElementsByTagName("a")[0],i=(n=T.createElement("select")).appendChild(T.createElement("option")),t=e.getElementsByTagName("input")[0],r.style.cssText="top:1px",p.getSetAttribute="t"!==e.className,p.style=/top/.test(r.getAttribute("style")),p.hrefNormalized="/a"===r.getAttribute("href"),p.checkOn=!!t.value,p.optSelected=i.selected,p.enctype=!!T.createElement("form").enctype,n.disabled=!0,p.optDisabled=!i.disabled,(t=T.createElement("input")).setAttribute("value",""),p.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),p.radioValue="t"===t.value}();var le=/\r/g;h.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=h.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,h(this).val()):t)?i="":"number"==typeof i?i+="":h.isArray(i)&&(i=h.map(i,function(t){return null==t?"":t+""})),(e=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=h.valHooks[i.type]||h.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(le,""):null==n?"":n:void 0}}),h.extend({valHooks:{option:{get:function(t){var e=h.find.attr(t,"value");return null!=e?e:h.trim(h.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(p.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!h.nodeName(n.parentNode,"optgroup"))){if(e=h(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=h.makeArray(e),a=i.length;a--;)if(r=i[a],h.inArray(h.valHooks.option.get(r),o)>=0)try{r.selected=n=!0}catch(t){r.scrollHeight}else r.selected=!1;return n||(t.selectedIndex=-1),i}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(t,e){if(h.isArray(e))return t.checked=h.inArray(h(t).val(),e)>=0}},p.checkOn||(h.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ce,ue,de=h.expr.attrHandle,fe=/^(?:checked|selected)$/i,pe=p.getSetAttribute,he=p.input;h.fn.extend({attr:function(t,e){return G(this,h.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){h.removeAttr(this,t)})}}),h.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===F?h.prop(t,e,n):(1===o&&h.isXMLDoc(t)||(e=e.toLowerCase(),r=h.attrHooks[e]||(h.expr.match.bool.test(e)?ue:ce)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=h.find.attr(t,e))?void 0:i:null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void h.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(P);if(o&&1===t.nodeType)for(;n=o[i++];)r=h.propFix[n]||n,h.expr.match.bool.test(n)?he&&pe||!fe.test(n)?t[r]=!1:t[h.camelCase("default-"+n)]=t[r]=!1:h.attr(t,n,""),t.removeAttribute(pe?n:r)},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&"radio"===e&&h.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),ue={set:function(t,e,n){return!1===e?h.removeAttr(t,n):he&&pe||!fe.test(n)?t.setAttribute(!pe&&h.propFix[n]||n,n):t[h.camelCase("default-"+n)]=t[n]=!0,n}},h.each(h.expr.match.bool.source.match(/\w+/g),function(t,e){var n=de[e]||h.find.attr;de[e]=he&&pe||!fe.test(e)?function(t,e,r){var i,o;return r||(o=de[e],de[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,de[e]=o),i}:function(t,e,n){if(!n)return t[h.camelCase("default-"+e)]?e.toLowerCase():null}}),he&&pe||(h.attrHooks.value={set:function(t,e,n){if(!h.nodeName(t,"input"))return ce&&ce.set(t,e,n);t.defaultValue=e}}),pe||(ce={set:function(t,e,n){var r=t.getAttributeNode(n);if(r||t.setAttributeNode(r=t.ownerDocument.createAttribute(n)),r.value=e+="","value"===n||e===t.getAttribute(n))return e}},de.id=de.name=de.coords=function(t,e,n){var r;if(!n)return(r=t.getAttributeNode(e))&&""!==r.value?r.value:null},h.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:ce.set},h.attrHooks.contenteditable={set:function(t,e,n){ce.set(t,""!==e&&e,n)}},h.each(["width","height"],function(t,e){h.attrHooks[e]={set:function(t,n){if(""===n)return t.setAttribute(e,"auto"),n}}})),p.style||(h.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var ge=/^(?:input|select|textarea|button|object)$/i,me=/^(?:a|area)$/i;h.fn.extend({prop:function(t,e){return G(this,h.prop,t,e,arguments.length>1)},removeProp:function(t){return t=h.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),h.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return(1!==o||!h.isXMLDoc(t))&&(e=h.propFix[e]||e,i=h.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=h.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}}}),p.hrefNormalized||h.each(["href","src"],function(t,e){h.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),p.optSelected||(h.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),p.enctype||(h.propFix.enctype="encoding");var ve=/[\t\r\n\f]/g;h.fn.extend({addClass:function(t){var e,n,r,i,o,a,s=0,l=this.length,c="string"==typeof t&&t;if(h.isFunction(t))return this.each(function(e){h(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(P)||[];s<l;s++)if(r=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(ve," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=h.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,r,i,o,a,s=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(h.isFunction(t))return this.each(function(e){h(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(P)||[];s<l;s++)if(r=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(ve," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=t?h.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):h.isFunction(t)?this.each(function(n){h(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,r=0,i=h(this),o=t.match(P)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else n!==F&&"boolean"!==n||(this.className&&h._data(this,"__className__",this.className),this.className=this.className||!1===t?"":h._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ve," ").indexOf(e)>=0)return!0;return!1}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){h.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),h.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ye=h.now(),be=/\?/,we=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;h.parseJSON=function(t){if(n.JSON&&n.JSON.parse)return n.JSON.parse(t+"");var e,r=null,i=h.trim(t+"");return i&&!h.trim(i.replace(we,function(t,n,i,o){return e&&n&&(r=0),0===r?t:(e=i||n,r+=!o-!i,"")}))?Function("return "+i)():h.error("Invalid JSON: "+t)},h.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{n.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t))}catch(t){e=void 0}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+t),e};var _e,xe,Se=/#.*$/,Ce=/([?&])_=[^&]*/,Ee=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Te=/^(?:GET|HEAD)$/,Me=/^\/\//,ke=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ae={},Ie={},Oe="*/".concat("*");try{xe=location.href}catch(t){(xe=T.createElement("a")).href="",xe=xe.href}function Pe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(P)||[];if(h.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Le(t,e,n,r){var i={},o=t===Ie;function a(s){var l;return i[s]=!0,h.each(t[s]||[],function(t,s){var c=s(e,n,r);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),l}return a(e.dataTypes[0])||!i["*"]&&a("*")}function De(t,e){var n,r,i=h.ajaxSettings.flatOptions||{};for(r in e)void 0!==e[r]&&((i[r]?t:n||(n={}))[r]=e[r]);return n&&h.extend(!0,t,n),t}_e=ke.exec(xe.toLowerCase())||[],h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_e[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?De(De(t,h.ajaxSettings),e):De(h.ajaxSettings,t)},ajaxPrefilter:Pe(Ae),ajaxTransport:Pe(Ie),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,i,o,a,s,l,c,u=h.ajaxSetup({},e),d=u.context||u,f=u.context&&(d.nodeType||d.jquery)?h(d):h.event,p=h.Deferred(),g=h.Callbacks("once memory"),m=u.statusCode||{},v={},y={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!c)for(c={};e=Ee.exec(o);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(b<2)for(e in t)m[e]=[m[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||w;return l&&l.abort(e),x(0,e),this}};if(p.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,u.url=((t||u.url||xe)+"").replace(Se,"").replace(Me,_e[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=h.trim(u.dataType||"*").toLowerCase().match(P)||[""],null==u.crossDomain&&(n=ke.exec(u.url.toLowerCase()),u.crossDomain=!(!n||n[1]===_e[1]&&n[2]===_e[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(_e[3]||("http:"===_e[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=h.param(u.data,u.traditional)),Le(Ae,u,e,_),2===b)return _;for(r in(s=h.event&&u.global)&&0==h.active++&&h.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Te.test(u.type),i=u.url,u.hasContent||(u.data&&(i=u.url+=(be.test(i)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=Ce.test(i)?i.replace(Ce,"$1_="+ye++):i+(be.test(i)?"&":"?")+"_="+ye++)),u.ifModified&&(h.lastModified[i]&&_.setRequestHeader("If-Modified-Since",h.lastModified[i]),h.etag[i]&&_.setRequestHeader("If-None-Match",h.etag[i])),(u.data&&u.hasContent&&!1!==u.contentType||e.contentType)&&_.setRequestHeader("Content-Type",u.contentType),_.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Oe+"; q=0.01":""):u.accepts["*"]),u.headers)_.setRequestHeader(r,u.headers[r]);if(u.beforeSend&&(!1===u.beforeSend.call(d,_,u)||2===b))return _.abort();for(r in w="abort",{success:1,error:1,complete:1})_[r](u[r]);if(l=Le(Ie,u,e,_)){_.readyState=1,s&&f.trigger("ajaxSend",[_,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){_.abort("timeout")},u.timeout));try{b=1,l.send(v,x)}catch(t){if(!(b<2))throw t;x(-1,t)}}else x(-1,"No Transport");function x(t,e,n,r){var c,v,y,w,x,S=e;2!==b&&(b=2,a&&clearTimeout(a),l=void 0,o=r||"",_.readyState=t>0?4:0,c=t>=200&&t<300||304===t,n&&(w=function(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}(u,_,n)),w=function(t,e,n,r){var i,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(u,w,_,c),c?(u.ifModified&&((x=_.getResponseHeader("Last-Modified"))&&(h.lastModified[i]=x),(x=_.getResponseHeader("etag"))&&(h.etag[i]=x)),204===t||"HEAD"===u.type?S="nocontent":304===t?S="notmodified":(S=w.state,v=w.data,c=!(y=w.error))):(y=S,!t&&S||(S="error",t<0&&(t=0))),_.status=t,_.statusText=(e||S)+"",c?p.resolveWith(d,[v,S,_]):p.rejectWith(d,[_,S,y]),_.statusCode(m),m=void 0,s&&f.trigger(c?"ajaxSuccess":"ajaxError",[_,u,c?v:y]),g.fireWith(d,[_,S]),s&&(f.trigger("ajaxComplete",[_,u]),--h.active||h.event.trigger("ajaxStop")))}return _},getJSON:function(t,e,n){return h.get(t,e,n,"json")},getScript:function(t,e){return h.get(t,void 0,e,"script")}}),h.each(["get","post"],function(t,e){h[e]=function(t,n,r,i){return h.isFunction(n)&&(i=i||r,r=n,n=void 0),h.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),h._evalUrl=function(t){return h.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},h.fn.extend({wrapAll:function(t){if(h.isFunction(t))return this.each(function(e){h(this).wrapAll(t.call(this,e))});if(this[0]){var e=h(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return h.isFunction(t)?this.each(function(e){h(this).wrapInner(t.call(this,e))}):this.each(function(){var e=h(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=h.isFunction(t);return this.each(function(n){h(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!p.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||h.css(t,"display"))},h.expr.filters.visible=function(t){return!h.expr.filters.hidden(t)};var Ne=/%20/g,Re=/\[\]$/,Fe=/\r?\n/g,Be=/^(?:submit|button|image|reset|file)$/i,je=/^(?:input|select|textarea|keygen)/i;function qe(t,e,n,r){var i;if(h.isArray(e))h.each(e,function(e,i){n||Re.test(t)?r(t,i):qe(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==h.type(e))r(t,e);else for(i in e)qe(t+"["+i+"]",e[i],n,r)}h.param=function(t,e){var n,r=[],i=function(t,e){e=h.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(t)||t.jquery&&!h.isPlainObject(t))h.each(t,function(){i(this.name,this.value)});else for(n in t)qe(n,t[n],e,i);return r.join("&").replace(Ne,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=h.prop(this,"elements");return t?h.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!h(this).is(":disabled")&&je.test(this.nodeName)&&!Be.test(t)&&(this.checked||!Y.test(t))}).map(function(t,e){var n=h(this).val();return null==n?null:h.isArray(n)?h.map(n,function(t){return{name:e.name,value:t.replace(Fe,"\r\n")}}):{name:e.name,value:n.replace(Fe,"\r\n")}}).get()}}),h.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Ve()||function(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:Ve;var ze=0,Ue={},$e=h.ajaxSettings.xhr();function Ve(){try{return new n.XMLHttpRequest}catch(t){}}n.attachEvent&&n.attachEvent("onunload",function(){for(var t in Ue)Ue[t](void 0,!0)}),p.cors=!!$e&&"withCredentials"in $e,($e=p.ajax=!!$e)&&h.ajaxTransport(function(t){var e;if(!t.crossDomain||p.cors)return{send:function(n,r){var i,o=t.xhr(),a=++ze;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];for(i in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.send(t.hasContent&&t.data||null),e=function(n,i){var s,l,c;if(e&&(i||4===o.readyState))if(delete Ue[a],e=void 0,o.onreadystatechange=h.noop,i)4!==o.readyState&&o.abort();else{c={},s=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(t){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=c.text?200:404}c&&r(s,l,c,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Ue[a]=e:e()},abort:function(){e&&e(void 0,!0)}}}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return h.globalEval(t),t}}}),h.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),h.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=T.head||h("head")[0]||T.documentElement;return{send:function(r,i){(e=T.createElement("script")).async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||i(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var He=[],We=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=He.pop()||h.expando+"_"+ye++;return this[t]=!0,t}}),h.ajaxPrefilter("json jsonp",function(t,e,r){var i,o,a,s=!1!==t.jsonp&&(We.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(We,"$1"+i):!1!==t.jsonp&&(t.url+=(be.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||h.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){n[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,He.push(i)),a&&h.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),h.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||T;var r=x.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=h.buildFragment([t],e,i),i&&i.length&&h(i).remove(),h.merge([],r.childNodes))};var Ge=h.fn.load;h.fn.load=function(t,e,n){if("string"!=typeof t&&Ge)return Ge.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>=0&&(r=h.trim(t.slice(s,t.length)),t=t.slice(0,s)),h.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&h.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){i=arguments,a.html(r?h("<div>").append(h.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){a.each(n,i||[t.responseText,e,t])}),this},h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){h.fn[e]=function(t){return this.on(e,t)}}),h.expr.filters.animated=function(t){return h.grep(h.timers,function(e){return t===e.elem}).length};var Ye=n.document.documentElement;function Ke(t){return h.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}h.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,c=h.css(t,"position"),u=h(t),d={};"static"===c&&(t.style.position="relative"),s=u.offset(),o=h.css(t,"top"),l=h.css(t,"left"),("absolute"===c||"fixed"===c)&&h.inArray("auto",[o,l])>-1?(a=(r=u.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),h.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):u.css(d)}},h.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){h.offset.setOffset(this,t,e)});var e,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?(e=o.documentElement,h.contains(e,i)?(typeof i.getBoundingClientRect!==F&&(r=i.getBoundingClientRect()),n=Ke(o),{top:r.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},r=this[0];return"fixed"===h.css(r,"position")?e=r.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),h.nodeName(t[0],"html")||(n=t.offset()),n.top+=h.css(t[0],"borderTopWidth",!0),n.left+=h.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-h.css(r,"marginTop",!0),left:e.left-n.left-h.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ye;t&&!h.nodeName(t,"html")&&"static"===h.css(t,"position");)t=t.offsetParent;return t||Ye})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);h.fn[t]=function(r){return G(this,function(t,r,i){var o=Ke(t);if(void 0===i)return o?e in o?o[e]:o.document.documentElement[r]:t[r];o?o.scrollTo(n?h(o).scrollLeft():i,n?i:h(o).scrollTop()):t[r]=i},t,r,arguments.length,null)}}),h.each(["top","left"],function(t,e){h.cssHooks[e]=Rt(p.pixelPosition,function(t,n){if(n)return n=Pt(t,e),Dt.test(n)?h(t).position()[e]+"px":n})}),h.each({Height:"height",Width:"width"},function(t,e){h.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){h.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return G(this,function(e,n,r){var i;return h.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?h.css(e,n,a):h.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),h.fn.size=function(){return this.length},h.fn.andSelf=h.fn.addBack,void 0===(r=function(){return h}.apply(e,[]))||(t.exports=r);var Xe=n.jQuery,Qe=n.$;return h.noConflict=function(t){return n.$===h&&(n.$=Qe),t&&n.jQuery===h&&(n.jQuery=Xe),h},typeof i===F&&(n.jQuery=n.$=h),h})},function(t,e){!function(t){function e(){var t=!1,e=!1;this.stopPropagation=function(){t=!0},this.isPropagationStopped=function(){return t},this.stopImmediatePropagation=function(){e=!0},this.isImmediatePropagationStopped=function(){return e}}function n(){this.__nonDataRow=!0}function r(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}function i(){this.__groupTotals=!0,this.group=null,this.initialized=!1}function o(){var t=null;this.isActive=function(e){return e?t===e:null!==t},this.activate=function(e){if(e!==t){if(null!==t)throw new Error("SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController");if(!e.commitCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()");if(!e.cancelCurrentEdit)throw new Error("SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()");t=e}},this.deactivate=function(e){if(t!==e)throw new Error("SlickGrid.EditorLock.deactivate: specified editController is not the currently active one");t=null},this.commitCurrentEdit=function(){return!t||t.commitCurrentEdit()},this.cancelCurrentEdit=function(){return!t||t.cancelCurrentEdit()}}jQuery.extend(!0,window,{Slick:{Event:function(){var t=[];this.subscribe=function(e){t.push(e)},this.unsubscribe=function(e){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},this.notify=function(n,r,i){var o;r=r||new e,i=i||this;for(var a=0;a<t.length&&!r.isPropagationStopped()&&!r.isImmediatePropagationStopped();a++)o=t[a].call(i,r,n);return o}},EventData:e,EventHandler:function(){var t=[];this.subscribe=function(e,n){return t.push({event:e,handler:n}),e.subscribe(n),this},this.unsubscribe=function(e,n){for(var r=t.length;r--;)if(t[r].event===e&&t[r].handler===n)return t.splice(r,1),void e.unsubscribe(n);return this},this.unsubscribeAll=function(){for(var e=t.length;e--;)t[e].event.unsubscribe(t[e].handler);return t=[],this}},Range:function(t,e,n,r){void 0===n&&void 0===r&&(n=t,r=e);this.fromRow=Math.min(t,n),this.fromCell=Math.min(e,r),this.toRow=Math.max(t,n),this.toCell=Math.max(e,r),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(t,e){return t>=this.fromRow&&t<=this.toRow&&e>=this.fromCell&&e<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}},NonDataRow:n,Group:r,GroupTotals:i,EditorLock:o,GlobalEditorLock:new o,keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,TAB:9,UP:38,A:65},preClickClassName:"slick-edit-preclick"}}),r.prototype=new n,r.prototype.equals=function(t){return this.value===t.value&&this.count===t.count&&this.collapsed===t.collapsed&&this.title===t.title},i.prototype=new n}()},,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(2411),i=n(2413);t.exports=function(t,e,n){return r(i,t,e,n)}},function(t,e,n){var r=n(165),i=n(267)(function(t,e){return r(t,256,void 0,void 0,void 0,e)});t.exports=i},function(t,e,n){var r=n(600),i=n(368),o=n(60),a=n(102);t.exports=function(t,e,n){t=a(t),e=i(e);var s=t.length,l=n=void 0===n?s:r(o(n),0,s);return(n-=e.length)>=0&&t.slice(n,l)==e}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(15),a=n(72),s=function(t){function e(e){return(e=e||{}).fillColorHexString=e.fillColorHexString||a.colors.getColor(),t.call(this,e)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},Object.defineProperty(e.prototype,"fillColorRgbArray",{get:function(){return a.colors.hexStringToRgbArray(this.fillColorHexString)},enumerable:!0,configurable:!0}),e}(i.Record({colorByField:void 0,colorByMultiplier:1,colorMode:0,connectById:!1,downloadSize:0,editActive:!1,errorMsg:"",fadeRate:0,fillColorHexString:void 0,fillColorRgbArray:[],isError:!1,isExpanded:!1,isDownloadActive:!1,isLoading:!1,labelsOn:!1,opacity:100,opacityRampEnabled:!1,opacityRampField:void 0,opacityRampFilter:i.List(),pointRadius:o.config.get("timelapse.defaultPointSize",15),relativeSizing:!0,savedLabelsOn:!1,toggledOn:!0},"TimelapseDisplayStatusRecord"));e.DisplayStatusRecord=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(431),i=n(993);e.getIdHashFunc=function(t,e){var n=i.PixelCache.numColors,o=i.PixelCache.maxColors,a=e.get(1),s=e.get(0);if(t===r.ColorModes.OPACITY_RAMP){var l=o/(a-s);return function(t){return(t-s)*l|0}}return function(t){return t%n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=n(4),o=n(602),a=n(72),s=n(431),l=n(994),c=n(992),u=function(){function t(e){this.canvasLayer=e,this.helpers=l.DrawingHelpers.getInstance(),this.len=t._w*t._h|0,this.byteLength=4*this.len,this.buffer=new Uint16Array(this.len),this.connectLookup={},this.predicates=e.store.getPredicates(),this.recomputeBinMap(e.getState().displayStatus.fadeRate)}return t.prototype.recomputeBinMap=function(e){var n=e>=0?1+e:1/(1-e);this.binMap=i(o(0,t._numBins),function(e){return Math.pow(e/(t._numBins-1),n)*(t._numBins-1)|0}),this.computedFadeRate=e},t.prototype.paintAllLatLons=function(t,e,n,r,i){this.fillCache(e,n,r),this.drawCacheToImage(t,i)},t.prototype.paintAllLatLonsStandard=function(e,n,i,o,l){var u,d=this,f={},p=this.canvasLayer.getState().displayStatus,h=p.colorByMultiplier,g=Math.round(64*p.opacity/100),m=a.colors.hexStringToRgbInt(p.fillColorHexString),v=t.bin_lower_limit(n,this.qInv),y=Math.ceil(n*this.qInv)*this.q,b=c.getIdHashFunc(p.colorMode,p.opacityRampFilter),w=p.fadeRate;w!==this.computedFadeRate&&this.recomputeBinMap(w),u=p.relativeSizing?Math.max(0,Math.min(100,p.pointRadius+(Math.round(t._zoomLevel)-2)-16)):p.pointRadius-1;var _,x,S,C,E,T,M,k,A,I,O=this.helpers.radiusRamps[u],P=this.helpers.r2Plus1Ramps[u],L=p.connectById,D=p.colorMode,N=D===s.ColorModes.OPACITY_RAMP?p.opacityRampField:p.colorByField;D===s.ColorModes.OPACITY_RAMP&&(_=this.helpers.generateContinuousOpacityArray(t.maxColors,1,64)),this.canvasLayer.store.each(function(a,c,u,p,w){D===s.ColorModes.COLOR_BY_ID&&(m=d.helpers.colorRgbArray[b(w%t.numColors*h)]),x=!1,0===o||n===i?(S=t._numBins-1,C=d.helpers.nDiv-1):(u>y?(S=t.bin(u,d.qInv),S=(S-=v)>=0?S:S+t._numBins,S=d.binMap[S]):S=0,C=S>>4),l&&(C=d.helpers.nDiv-1),a>t._bounds.south&&a<=t._bounds.north&&c>=t._bounds.west&&c<t._bounds.east?x=!0:t._wrap.west&&c>=t._wrap.eastLine?(x=!0,c-=360):t._wrap.east&&c<t._wrap.westLine&&(x=!0,c+=360),x&&(E=(c-t._bounds.west)*t._lonFactor|0,T=(t._bounds.north-a)*t._latFactor|0,M=T*t._w+E|0,k=m,D===s.ColorModes.OPACITY_RAMP?(A=_[b(w)],k|=64===g&&64===A?4278190080:g*A>>4<<24):(I=l?t._numBins-1:S,k|=64===g?I<<25:I*g>>5<<24),k|=16777216,d.helpers.fillCircle(e,d.byteLength,t._w,M,O[C],P[C],k),L&&null!==p&&(r(f[p])||d.helpers.connectPoints(e,[E,T],f[p],f[p][2],t._w,t._halfWorld),f[p]=[E,T,k]))}.bind(this),n,i,N)},t.prototype.drawCacheToImage=function(e,n){var r,i,o,l,u=this.canvasLayer.getState().displayStatus,d=Math.round(64*u.opacity/100),f=u.colorMode,p=u.connectById,h=u.colorByMultiplier,g=a.colors.hexStringToRgbInt(u.fillColorHexString),m=c.getIdHashFunc(u.colorMode,u.opacityRampFilter),v=u.fadeRate;f===s.ColorModes.OPACITY_RAMP&&(r=this.helpers.generateContinuousOpacityArray(t.maxColors,1,64)),v!==this.computedFadeRate&&this.recomputeBinMap(v),i=u.relativeSizing?Math.max(0,Math.min(100,u.pointRadius+(Math.round(t._zoomLevel)-2)-16)):u.pointRadius-1,o=this.helpers.radiusRamps[i],l=this.helpers.r2Plus1Ramps[i];for(var y,b,w,_,x,S,C,E,T=this.buffer,M=0,k=T.length;M<k;M++)1&(y=T[M])&&(b=y>>1&1,!p&&b||(w=y>>>9,_=y>>2&t._binMask,_=(_-=this.lowestBinStored)>=0?_:_+t._numBins,_=this.binMap[_],x=f===s.ColorModes.COLOR_BY_ID?this.helpers.colorRgbArray[m(w%t.numColors*h)]:(s.ColorModes.OPACITY_RAMP,g),f===s.ColorModes.OPACITY_RAMP?(S=r[w],x|=64===d&&64===S?4278190080:d*S>>4<<24):(C=n?t._numBins-1:_,x|=64===d?C<<25:C*d>>5<<24),x|=16777216,b?e[M]=x:(E=n?this.helpers.nDiv-1:_>>4,this.helpers.fillCircle(e,this.byteLength,t._w,M,o[E],l[E],x))))},t.prototype.fillCacheZero=function(e){var n,r,i,o=this,a=t._numBins-1,l=this.canvasLayer.getState().displayStatus,u=l.colorMode===s.ColorModes.OPACITY_RAMP?l.opacityRampField:l.colorByField,d=c.getIdHashFunc(l.colorMode,l.opacityRampFilter);this.clearCache(),this.canvasLayer.store.each(function(e,s,l,c,u){e>t._bounds.south&&e<=t._bounds.north&&s>=t._bounds.west&&s<t._bounds.east&&(n=(s-t._bounds.west)*t._lonFactor|0,r=(t._bounds.north-e)*t._latFactor|0,i=r*t._w+n|0,o.buffer[i]=d(u)<<9|a<<2|1),t._wrap.west&&s>=t._wrap.eastLine&&(n=((s-=360)-t._bounds.west)*t._lonFactor|0,r=(t._bounds.north-e)*t._latFactor|0,i=r*t._w+n|0,o.buffer[i]=d(u)<<9|a<<2|1),t._wrap.east&&s<t._wrap.westLine&&(n=((s+=360)-t._bounds.west)*t._lonFactor|0,r=(t._bounds.north-e)*t._latFactor|0,i=r*t._w+n|0,o.buffer[i]=d(u)<<9|a<<2|1)}.bind(this),e,e,u),this.startTime=e,this.endTime=e,this.lowestBinStored=0},t.prototype.fillCache=function(e,n,i){var o=this;if(0===i||e===n)return this.fillCacheZero(e);var a,l,u,d,f,p=this.canvasLayer.getState().displayStatus,h=p.connectById,g=p.colorMode===s.ColorModes.OPACITY_RAMP?p.opacityRampField:p.colorByField,m=t.bin_lower_limit(e,this.qInv),v=c.getIdHashFunc(p.colorMode,p.opacityRampFilter),y=i===this.windowSize&&this.startTime<=e&&e<this.endTime&&n>=this.endTime&&this.canvasLayer.store.getPredicates()===this.predicates;h&&r(this.connectLookup)?(this.connectLookup={},y=!1):h||r(this.connectLookup)||(this.connectLookup=void 0),y?(this.clearCache(this.lowestBinStored,m),h&&this.clearConnections(this.lowestBinStored,m),a=this.endTime):(i!==this.windowSize&&(this.windowSize=i,this.q=i/t._numBins,this.qInv=t._numBins/i,m=t.bin_lower_limit(e,this.qInv)),this.clearCache(),h&&this.clearConnections(),a=(Math.floor(e*this.qInv)+1)*this.q),this.canvasLayer.store.each(function(e,n,i,a,s){l=!1,e>t._bounds.south&&e<=t._bounds.north&&n>=t._bounds.west&&n<t._bounds.east?l=!0:t._wrap.west&&n>=t._wrap.eastLine?(l=!0,n-=360):t._wrap.east&&n<t._wrap.westLine&&(l=!0,n+=360),l&&(u=(n-t._bounds.west)*t._lonFactor|0,d=(t._bounds.north-e)*t._latFactor|0,f=d*t._w+u|0,o.buffer[f]=v(s)<<9|t.bin(i,o.qInv)<<2|1,h&&null!==a&&(r(o.connectLookup[a])||o.helpers.connectPoints(o.buffer,[u,d],o.connectLookup[a],o.connectLookup[a][2],t._w,t._halfWorld),o.connectLookup[a]=[u,d,2|o.buffer[f]]))}.bind(this),a,n,g),this.startTime=e,this.endTime=n,this.lowestBinStored=m},t.prototype.clearCache=function(e,n){var i,o,a;if(r(e)||r(n))for(i=0,o=this.buffer.length;i<o;i+=1)1&this.buffer[i]&&(this.buffer[i]&=4294967294);else if(e<n)for(i=0,o=this.buffer.length;i<o;i++)1&this.buffer[i]&&e<=(a=this.buffer[i]>>2&t._binMask)&&a<n&&(this.buffer[i]&=4294967294);else if(e>n)for(i=0,o=this.buffer.length;i<o;i++)1&this.buffer[i]&&(e<=(a=this.buffer[i]>>2&t._binMask)||a<n)&&(this.buffer[i]&=4294967294)},t.prototype.clearConnections=function(e,n){var i,o;if(r(e)||r(n))this.connectLookup={};else if(e<n)for(i in this.connectLookup)this.connectLookup.hasOwnProperty(i)&&e<=(o=this.connectLookup[i][2]>>2&t._binMask)&&o<n&&delete this.connectLookup[i];else if(e>n)for(i in this.connectLookup)this.connectLookup.hasOwnProperty(i)&&(e<=(o=this.connectLookup[i][2]>>2&t._binMask)||o<n)&&delete this.connectLookup[i]},t._binBits=7,t._numBins=1<<t._binBits,t._binMask=t._numBins-1,t._idhashBits=7,t.maxColors=1<<t._idhashBits,t.numColors=Math.min(a.colors.getNumColors(),t.maxColors),t._bounds={north:void 0,south:void 0,east:void 0,west:void 0},t._wrap={east:void 0,west:void 0,eastLine:void 0,westLine:void 0},t.viewChanged=function(e,n,r,i){t._w=e,t._h=n,t._bounds.west=r[0],t._bounds.south=r[1],t._bounds.east=r[2],t._bounds.north=r[3],t._wrap.east=t._bounds.east>180,t._wrap.west=t._bounds.west<-180,t._wrap.eastLine=t._bounds.west+360,t._wrap.westLine=t._bounds.east-360,t._zoomLevel=i,t._latFactor=t._h/(t._bounds.north-t._bounds.south),t._lonFactor=t._w/(t._bounds.east-t._bounds.west),t._halfWorld=180*t._lonFactor},t.bin=function(e,n){return e*n%t._numBins|0},t.bin_lower_limit=function(e,n){return(Math.floor(e*n)+1)%t._numBins},t}();e.PixelCache=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(602),o=n(72),a=function(){function t(){var t=this;this.ALPHA_MASK=4278190080,this.COLOR_MASK=16777215,this.nDiv=8,this._chooseColor=function(t,e,n,r){var i=(4278190080&t)>>>0;return 0===i||(16777215&t)!==r||n>=i?e:t},this._makeLinearRamp=function(e,n,r){var i=r-n>>1;i<1||(e[n+i]=e[n]+(e[r]-e[n]>>1),t._makeLinearRamp(e,n,n+i),t._makeLinearRamp(e,n+i,r))},this.connectPoints=function(t,e,n,r,i,o){if(n){var a=0|e[0],s=0|e[1],l=s*i|0,c=0|n[0],u=0|n[1],d=0|Math.abs(c-a),f=0|(a<c?1:-1);d>=o&&(c-=2*f*o,d=0|Math.abs(c-a),f*=-1);for(var p=0|Math.abs(u-s),h=0|(s<u?1:-1),g=(d>p?d:-p)/2,m=void 0;(m=g)>-d&&(g-=p,a+=f),m<p&&(g+=d,l=(s+=h)*i|0),a!==c||s!==u;)t[l+(a<0?a+i:a%i)]=r}},this.generateContinuousRgbArray=function(t,e){var n=o.colors.rgbToHsl(e[0],e[1],e[2]);return r(i(0,t),function(t){var e=o.colors.hslToRgb(n[0],n[1],t/o.colors.getNumColors());return e[2]<<16|e[1]<<8|e[0]})},this.generateContinuousOpacityArray=function(t,e,n){var r=[];if(0===t)return r;for(var i=(e<n?n-e:e-n)/(t-1),o=e,a=0;a<t-1;a++,o+=i)r.push(0|o);return r.push(n),r},this.fillCircle=function(e,n,r,i,o,a,s){var l=(s&t.ALPHA_MASK)>>>0,c=s&t.COLOR_MASK;e[i]=t._chooseColor(e[i],s,l,c);for(var u,d,f,p,h=1;h<o;h=h+1|0)for(u=h*h|0,(f=i+(d=h*r|0)|0)<n&&(e[f]=t._chooseColor(e[f],s,l,c)),(f=i-d|0)>-1&&(e[f]=t._chooseColor(e[f],s,l,c)),(f=i+h|0)<n&&(e[f]=t._chooseColor(e[f],s,l,c)),(f=i-h|0)>-1&&(e[f]=t._chooseColor(e[f],s,l,c)),p=1;p<o;p=p+1|0)p*p+u<a&&((f=i+d+p|0)<n&&(e[f]=t._chooseColor(e[f],s,l,c)),(f=i-d+p|0)>-1&&f<n&&(e[f]=t._chooseColor(e[f],s,l,c)),(f=i+d-p|0)>-1&&f<n&&(e[f]=t._chooseColor(e[f],s,l,c)),(f=i-d-p|0)>-1&&(e[f]=t._chooseColor(e[f],s,l,c)))},this.fillCircleForce=function(t,e,n,r,i,o,a){t[r]=a;for(var s,l,c,u,d=1;d<i;d=d+1|0)for(s=d*d|0,(c=r+(l=d*n|0)|0)<e&&(t[c]=a),(c=r-l|0)>-1&&(t[c]=a),(c=r+d|0)<e&&(t[c]=a),(c=r-d|0)>-1&&(t[c]=a),u=1;u<i;u=u+1|0)u*u+s<o&&((c=r+l+u|0)<e&&(t[c]=a),(c=r-l+u|0)>-1&&c<e&&(t[c]=a),(c=r+l-u|0)>-1&&c<e&&(t[c]=a),(c=r-l-u|0)>-1&&(t[c]=a))},this.radiusRamps=r(i(1,101),function(e){var n=new Uint32Array(t.nDiv);return n[0]=1,n[t.nDiv-1]=e,t._makeLinearRamp(n,0,t.nDiv-1),n}),this.r2Plus1Ramps=r(this.radiusRamps,function(t){return r(t,function(t){return(t-1)*(t-1)+1})}),this.alphaRamps=r(i(1,101),function(e){var n=new Uint8Array(t.nDiv);return n[0]=2,n[t.nDiv-1]=e/100*255|0,t._makeLinearRamp(n,0,t.nDiv-1),n}),this.colorRgbArray=r(i(0,o.colors.getNumColors()),function(t){var e=o.colors.getColor(t);return o.colors.hexStringToRgbInt(e)})}return t.getInstance=function(){return this.instance},t.instance=new t,t}();e.DrawingHelpers=a},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__995__},function(t,e){t.exports=function(t,e){return t<e}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(64),i=n(2),o=n(53),a=n(34),s=n(44),l=n(134),c=n(999),u=n(15),d=n(6),f=n(2469),p=function(){function t(){}return t.getSearchExtent=function(e,n,r){r=r||{};var i=e[0],o=e[1],a=r.fixedPixelBuffer||t.defaultFixedPixelBuffer,s=r.zoomMeterBuffer||t.defaultZoomMeterBuffer,l=r.strategy||t.defaultStrategy,c=n*a;return t.isZoomStrategy(l)&&(c=Math.max(c,s/t.mapProj.getMetersPerUnit())),[i-c,o-c,i+c,o+c]},t.isZoomStrategy=function(t){return-1!==t.indexOf("zoom")},t.isNearestStrategy=function(t){return-1!==t.indexOf("nearest")},t.parser=new f.GeoJson,t.defaultStrategy=u.config.get("map.clicksearch.strategy"),t.defaultFixedPixelBuffer=u.config.get("map.clicksearch.fixedPixelBuffer"),t.defaultZoomMeterBuffer=u.config.get("map.clicksearch.zoomMeterBuffer"),t.mapProj=new d.proj.Projection({code:u.config.get("map.projection"),units:u.config.get("map.units")}),t.getLayerOverrides=function(t){var e={};return o(t,"click.search.strategy")&&(e.strategy=i(t,"click.search.strategy")),o(t,"click.search.fixed.pixelBuffer")&&(e.fixedPixelBuffer=i(t,"click.search.fixed.pixelBuffer")),o(t,"click.search.zoom.meterBuffer")&&(e.zoomMeterBuffer=i(t,"click.search.zoom.meterBuffer")),e},t.sortAndTrimFeatures=function(e,n,i){i=i||{};var o=l(n,function(n){var o,l=a(n.getProperties)?n.getProperties():n.properties;return i.geom&&r(s(l),i.geom)&&(o=t.parser.readGeometry(l[i.geom])),o||(o=a(n.getGeometry)?n.getGeometry():t.parser.readGeometry(n.geometry)),f.GeodeticsHelper.distanceHaversine([e,o.getClosestPoint(e)])}),u=i.strategy||t.defaultStrategy;if(t.isNearestStrategy(u)){var d=1;return u.split("-").length>=3&&(d=parseInt(u.split("-")[2],10)||d),c(o,d)}return o},t}();e.SearchHelper=p},function(t,e,n){var r=n(211),i=n(60);t.exports=function(t,e,n){return t&&t.length?(e=n||void 0===e?1:i(e),r(t,0,e<0?0:e)):[]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.queryBinStoreExtender=t}return t.getInstance=function(e){return t.instance||(t.instance=new t(e)),t.instance},t.prototype.extendCapabilities=function(t,e){return void 0===e&&(e={}),this.queryBinStoreExtender.extendCapabilities(t,this,e)},t}();e.CapabilityExtendomatic=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(72),i=n(16),o=n(47),a=n(601),s=n(430),l=n(24),c=n(451),u=n(14),d=function(){function t(){}return t.buildDefaultCanvasLayerState=function(t,e,n){var i=r.uuid.generate(),d=l.DataSourceManager.getDataSourcesById(t.source.id).first(),f=new a.CanvasLayerRecord({id:i,name:e,dataView:t,defaultClickInteractionType:n,editable:t.source.type===o.SourceType.SERVER,displayStatus:new a.DisplayStatusRecord(c({isLoading:!0,colorByField:t.store.idField,colorMode:o.KeywordHelper.getColorMode(d)},u))});return this.stateManager.dispatch({type:s.TypeKeys.ADD_CANVAS_LAYER_STATE,canvasLayerState:f}),i},t.stateManager=i.StateManager.getInstance(),t}();e.RecordHelper=d},function(t,e,n){var r=n(571),i=n(51),o=n(264),a=i(function(t,e){return o(t)?r(t,e):[]});t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(325);e.SavedQueryEvents=new r.EventEmitter},function(t,e,n){var r,i=i||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},n=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=/constructor/i.test(t.HTMLElement)||t.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},s=function(t){setTimeout(function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()},4e4)},l=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},c=function(c,u,d){d||(c=l(c));var f,p=this,h="application/octet-stream"===c.type,g=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){a(t)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return f=e().createObjectURL(c),void setTimeout(function(){n.href=f,n.download=u,function(t){var e=new MouseEvent("click");t.dispatchEvent(e)}(n),g(),s(f),p.readyState=p.DONE});!function(){if((o||h&&i)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,g()},n.readAsDataURL(c),void(p.readyState=p.INIT)}f||(f=e().createObjectURL(c)),h?t.location.href=f:t.open(f,"_blank")||(t.location.href=f);p.readyState=p.DONE,g(),s(f)}()},u=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=l(t)),navigator.msSaveOrOpenBlob(t,e)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(t,e,n){return new c(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==t&&t.exports?t.exports.saveAs=i:null!==n(506)&&null!==n(2921)&&(void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2922),o=n(2923);!function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(2924)),e.default=r.module("stealth.geo.timelapse.rangeslider").directive("stGeoTimelapseRangeSliderPopup",[function(){return{restrict:"E",template:i,controller:o.RangeSliderController,controllerAs:"ctrl",bindToController:!0}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(626),o=n(29),a=n(18),s=n(34),l=n(30),c=n(395),u=n(85),d=n(6),f=n(16),p=n(15),h=n(57),g=n(55),m=n(193),v=n(277),y=n(1067),b=n(998),w=n(194),_=n(24),x=n(2926);e.TL_DEFAULT_POPUP_INTERACTION_ID="TL_CLICK_GET_FEATURE";var S=function(){function t(n,s,l,c){var h=this;this.MapLayer=l,this.VectorOverlay=c,this.stateManager=f.StateManager.getInstance(),this._w=0,this._h=0,this._bounds={north:null,south:null,east:null,west:null},this._offScreenSize=0,this._wFull=0,this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._imageData=null,this._imageView=null,this._curSize=[0,0],this._curExtent=[0,0,0,0],this._curResolution=0,this._curZoomLevel=0,this._windowStart_s=0,this._windowEnd_s=0,this._windowSize_s=0,this._layers=[],this._callWhenBufferDelivered=function(){},this._caches={},this._tcState=this.stateManager.getState(m.TIME_CONTROLS_PATH),this.tcSub=this.stateManager.getObservable(m.TIME_CONTROLS_PATH).subscribe({next:function(t){h._tcState.showAll!==t.showAll&&h.redrawCurrent(),h._tcState=t}}),this._olSource=new d.source.ImageCanvas({ratio:1,canvasFunction:function(t,e,n,r,i){return h._drawFn(t,e,n,r,i)},projection:p.config.get("map.projection")}),this._olLayer=new d.layer.Image({source:this._olSource}),this._highlightLayerStyle=[new d.style.Style({stroke:new d.style.Stroke({color:"rgb(255, 255, 255)",width:4})}),new d.style.Style({stroke:new d.style.Stroke({color:"rgb(255, 255, 255)",width:2})})],this._highlightLayer=new this.VectorOverlay({styleBuilder:function(){return h._highlightLayerStyle}}),this.getBaseCapabilities=function(){return{}},this._clearAlpha=function(t){for(var e=3,n=t.length;e<n;e+=4)t[e]=0},this._drawFn=function(t,e,n,r,o){r=r.map(Math.round);var a=0|u(h._layers,function(t,e){var n=e.getState().displayStatus.pointRadius;return n>t?n:t},0),s=t.slice();if(s[0]-=a*e,s[2]+=a*e,function(t,e){return C(t,e)}(h._curSize,r)||function(t,e){return C(t,e)}(h._curExtent,s)||h._curResolution!==e||a!==h._offScreenSize){h._offScreenSize=a;var l=o.getExtent(),c=Math.max(l[2]-l[0],l[3]-l[1]);if(h._curSize=r,h._curExtent=s.slice(),h._w=0|h._curSize[0],h._wFull=h._w+2*h._offScreenSize,h._h=0|h._curSize[1],h._canvas.setAttribute("width",String(h._w)),h._canvas.setAttribute("height",String(h._h)),h._bounds.west=s[0],h._bounds.south=s[1],h._bounds.east=s[2],h._bounds.north=s[3],h._curResolution=e,h._curZoomLevel=Math.log(c/(256*e))/Math.LN2,h._bounds.east-h._bounds.west<360)h._imageData=h._context.createImageData(h._wFull,h._h),v.PixelCache.viewChanged(h._wFull,h._h,s,h._curZoomLevel);else{var d=Math.round(360*h._wFull/(h._bounds.east-h._bounds.west));h._imageData=h._context.createImageData(d,h._h),v.PixelCache.viewChanged(d,h._h,[h._bounds.west,h._bounds.south,h._bounds.west+360,h._bounds.north],h._curZoomLevel)}h._imageView=new Uint32Array(h._imageData.data.buffer),i(h._layers,function(t){h._caches[t.id]=new v.PixelCache(t)}),h._fillImageBuffer()}return h._imageData&&(h._context.putImageData(h._imageData,-h._offScreenSize,0,0,0,h._wFull,h._h),h._imageData.width<h._wFull&&h._context.putImageData(h._imageData,h._imageData.width-h._offScreenSize,0,0,0,h._wFull,h._h),h._callWhenBufferDelivered(),h._callWhenBufferDelivered=function(){}),h._canvas},this._fillImageBuffer=function(){clearTimeout(h._standardRenderTimeout),h._fillImageBufferCaching(),h._standardRenderTimeout=setTimeout(function(){h._clearAlpha(h._imageData.data),h._fillImageBufferStandard(),h._olSource.changed()},200)},this._fillImageBufferCaching=function(){i(h._layers,function(t){var e=t.getState().displayStatus;t.store.hasData()&&!e.isError&&e.toggledOn&&e.opacity>0&&h._caches[t.id].paintAllLatLons(h._imageView,h._windowStart_s,h._windowEnd_s,h._windowSize_s,h._tcState.showAll)})},this._fillImageBufferStandard=function(){i(h._layers,function(t){var e=t.getState().displayStatus;t.store.hasData()&&!e.isError&&e.toggledOn&&e.opacity>0&&h._caches[t.id].paintAllLatLonsStandard(h._imageView,h._windowStart_s,h._windowEnd_s,h._windowSize_s,h._tcState.showAll)})},this._onDestroy=function(){h.mapLayerOverrides.onDestroy(),h.mapLayerOverrides=null,h.tcSub&&h.tcSub.unsubscribe(),h.tcSub=null,clearTimeout(h._standardRenderTimeout),h._canvas=h._context=null,h._olLayer=h._olSource=null,h._highlightLayer.removeFromMap(),h._highlightLayer=null},this._clickPoint=function(n,i){var s=o(h._layers,function(t){var e=t.getState().displayStatus;return e.toggledOn&&!e.isError&&!e.isLoading&&!a(t.interactions)});if(!s.length)return[Promise.resolve({isError:!1,name:"Canvas",records:[]})];n[0]>180?n[0]=(n[0]+180)%360-180:n[0]<-180&&(n[0]=(n[0]-180)%-360+180);var l={};return r(s,function(e,r){var o=1e3*h._windowStart_s,a=1e3*h._windowEnd_s,s=t.createClickOverrides(e),c=1e3*h.getRenderedTime().start,u=1e3*h.getRenderedTime().end,d={coord:n,res:i,extent:b.SearchHelper.getSearchExtent(n,i,s),canvas:h,canvasLayer:e,clickOverrides:s,windowStartTimeMillis:o,windowEndTimeMillis:a,boundedStartTimeMillis:c,boundedEndTimeMillis:u};(l=t.notifyInteractionListeners(y.InteractionEventType.CLICK,e,d,r,l))&&x.CanvasEventManager.emit(x.CanvasEvents.CLICK_RESULTS_ALL,l)}),l[e.TL_DEFAULT_POPUP_INTERACTION_ID]},this.redraw=function(t,e,n,r){h._windowStart_s=t,h._windowEnd_s=e,h._windowSize_s=n,h._windowEnd_s<h._tcState.displayEnd_s?h._windowStart_s=h._windowEnd_s-h._windowSize_s:h._windowEnd_s=h._windowStart_s+h._windowSize_s,null!==h._imageData?(h._clearAlpha(h._imageData.data),r&&(h._callWhenBufferDelivered=r),h._fillImageBuffer(),h._olSource.changed()):r&&r()},this._highlightLayer.addToMap(),this.mapLayer=new l(n,s,this._olLayer,!0,7,"TimelapseCanvas"),this.mapLayerOverrides={onDestroy:this.mapLayer.onDestroy},this.mapLayer.onDestroy=this._onDestroy,this.mapLayer.searchPoint=this._clickPoint,this.mapLayer.styleDirective="st-geo-timelapse-canvas-style",this.mapLayer.styleDirectiveScope.styleVars.iconClass="fa fa-fw fa-lg fa-history"}return t.notifyInteractionListeners=function(t,e,n,i,o){return r(e.interactions[t],function(t){o[t.id]||(o[t.id]=[]),e.store.getMinTimeInMillis()>n.windowEndTimeMillis||e.store.getMaxTimeInMillis()<n.windowStartTimeMillis?o[t.id].push(Promise.resolve({name:e.getState().name,isError:!1,records:[]})):o[t.id].push(t.fetch(n).then(function(r){return r.name=e.getState().name,r.event=n,r.levelSuffix="_"+c(String(i),4,"0"),s(t.filter)?t.filter(r).then(function(e){return x.CanvasEventManager.emit(x.CanvasEvents.CLICK_RESULTS_LAYER+t.id,e),e}):(x.CanvasEventManager.emit(x.CanvasEvents.CLICK_RESULTS_LAYER+t.id,r),r)}))}),o},t.createClickOverrides=function(t){var e={fixedPixelBuffer:Math.max(t.getState().displayStatus.pointRadius,4)};if(t.getState().dataView.source.type===w.SourceType.SERVER){var n=_.DataSourceManager.getDataSourcesById(t.getState().dataView.source.id).first();n||(g.alerter.errorMsg("Error loading datasource."),h.log.error("Failed to find datasource with id: "+t.getState().dataView.source.id)),e=l(e,b.SearchHelper.getLayerOverrides(n.keywordConfig))}return e},t.prototype.updateCanvasLayers=function(t){var e=this,n={};this._layers=t,this.mapLayer.styleDirectiveScope.layers=this._layers,t.forEach(function(t){n[t.id]=e._caches[t.id]?e._caches[t.id]:new v.PixelCache(t)}),this._caches=n,this.redrawCurrent()},t.prototype.getHighlightLayer=function(){return this._highlightLayer},t.prototype.getImageByteLength=function(){return this._imageData.data.length},t.prototype.getCanvasLayers=function(){return this._layers},t.prototype.getRenderedTime=function(){return{start:this._windowStart_s,end:this._windowEnd_s,window:this._windowSize_s}},t.prototype.hideLabels=function(t,e,n,i){r(this._layers,function(t){}),i&&i()},t.prototype.redrawCurrent=function(){this.redraw(this._windowStart_s,this._windowEnd_s,this._windowSize_s)},t}();function C(t,e){return t[0]<e[0]||t[0]>e[0]||t[1]<e[1]||t[1]>e[1]}e.Canvas=S},function(t,e,n){var r=n(2925),i=n(1065),o=n(162),a=n(17);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},function(t,e,n){var r=n(627),i=n(788)(r,!0);t.exports=i},function(t,e,n){var r=n(787)(!0);t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.CLICK="CLICK"}(e.InteractionEventType||(e.InteractionEventType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(){function t(){}return t.interactions=r.Map(),t.registerInteraction=function(e,n){t.interactions=t.interactions.set(e,n)},t.getInteraction=function(e){return t.interactions.get(e)},t}();e.InteractionManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),i=n(2),o=n(34),a=n(4),s=n(271),l=n(1),c=n(5),u=n(21),d=n(57),f=n(55),p=n(72),h=n(74),g=n(24),m=n(47),v=n(927),y=n(194),b=n(575),w=function(){function t(){}return t.localFile=function(t){var e=t.canvasLayer,n=new m.DataViewRecord({source:l.cloneDeep(e.getState().dataView.source),store:new m.StoreRecord({type:m.StoreTypes.JSON,id:p.uuid.generate()}),dataFilter:new b.LocalFileSearchDataFilterRecord({geomClause:new h.BboxClauseRecord({extent:t.extent}),timeClause:new h.PointTimeClauseRecord({dtg:u.utc(t.windowStartTimeMillis).toISOString(),endDtg:u.utc(t.windowEndTimeMillis).toISOString()})})});return e.store.searchForRecords(t.extent,t.windowStartTimeMillis,t.windowEndTimeMillis).then(function(t){return t||n.source.type!==m.SourceType.FILE?{name:e.getState().name,isError:!1,records:t}:{name:e.getState().name,records:[]}})},t.GetFeature=function(e){return t.buildGetFeatureDVR(e).then(function(t){return v.GetFeatureRequestBuilder.buildAndSubmit(t)}).then(function(t){return{isError:!1,records:t}}).catch(function(t){return d.log.error(t),f.alerter.errorMsg("Failed to find features"),Promise.reject(t)})},t.buildGetFeatureDVR=function(e){var n=e.canvasLayer,l=g.DataSourceManager.getDataSourcesById(n.getState().dataView.source.id).first();return l&&n.getState().dataView.source.type===m.SourceType.SERVER?m.KeywordHelper.getFeatureProperties(l).then(function(d){var f,g,v=m.KeywordHelper.getFeaturePropertiesByName(["startDtg","endDtg","dtg"],d),w=n.getState().dataView,_=w.dataFilter.timeClause;if(m.KeywordHelper.isLineQuery(v))f=new h.LineStringTimeClauseRecord({lineDtgField:i(_,"lineDtgField",m.KeywordHelper.getFieldByName(l,"dtg")),endDtg:u.utc(e.windowEndTimeMillis).toISOString(),endDtgField:i(_,"endDtgField",m.KeywordHelper.getFieldByName(l,"endDtg")),startDtg:u.utc(e.windowStartTimeMillis).toISOString(),startDtgField:i(_,"startDtgField",m.KeywordHelper.getFieldByName(l,"startDtg"))});else{var x=m.KeywordHelper.getFeaturePropertiesByName(["dtg"],d).dtg;f=new h.PointTimeClauseRecord({field:i(w.store,"dtgField",m.KeywordHelper.getFieldByName(l,"dtg")),dtg:u.utc(e.windowStartTimeMillis).toISOString(),endDtg:u.utc(e.windowEndTimeMillis).toISOString(),dtgFieldIsString:i(x,"isString")})}g=o(n.getState().dataView.dataFilter.buildCql)?h.CqlBuilder.combine(h.CqlOperator.AND,n.getState().dataView.dataFilter.buildCql(),n.getIdPredicateAsCql()):n.getIdPredicateAsCql();var S=n.store.getPredicates();S&&(g=h.CqlBuilder.combine(h.CqlOperator.AND,g,m.StoreHelper.buildCqlFromPredicate(S)));var C=new b.GetFeatureDataFilterRecord({geomClause:new h.BboxClauseRecord({field:i(w.store,"geomField",m.KeywordHelper.getFieldByName(l,"geom")),extent:e.extent}),timeClause:f,additionalCql:new h.RawClauseRecord({cql:g})}),E=new m.DataViewRecord({source:new y.SourceRecord({type:m.SourceType.SERVER,id:l.id}),store:new m.StoreRecord({type:m.StoreTypes.JSON,id:p.uuid.generate()}),dataFilter:C}),T=m.KeywordHelper.getFieldByName(l,"label");if(T&&n.store.hasLabel(T)){var M=r(d,{name:T});return t.localFile(e).then(function(t){if(t.records.length>0){var e=s(a(t.records,function(t){return i(t.getProperties(),T,t.get("label"))}));if(e.length>0){var n=new h.InClauseRecord({field:T,list:c.List(e),useQuotes:!!M&&"string"===M.localType});E=E.with({dataFilter:C.with({simpleClauses:c.Map({labels:n})})})}}return E})}return E},function(t){return d.log.error("Failed to build click request for "+n.getState().name+".\nReason: "+t),Promise.reject(t)}):Promise.reject("Error submitting request: unable to find "+l.name)},t}();e.SearchStrategies=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(149),i=function(){function t(t,e,n){this.barManager=t,this.BarWidget=e,this.WidgetDef=n}return t.prototype.addInputToApp=function(){this.barManager.insert("top",new this.BarWidget({widget:new this.WidgetDef({tag:"stealth-search-action"})}),r.Position.Last,"740"),this.barManager.insert("top",new this.BarWidget({widget:new this.WidgetDef({tag:"ccri-bars-separator"})}),r.Position.Last,"740")},t.$inject=["ccri.bars.mgr","ccri.bars.Widget","ccri.angular-utils.WidgetDef"],t}();e.Dispatcher=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(347),i=n(126),o=n(171),a=n(171),s=function(){function t(t,e,n){var s=this;this.registeredSearches={},this.resultTypeWidgetMap={},this.registerSearch=function(t){s.registeredSearches[t.id]=t},this.deleteSearch=function(t){delete s.registeredSearches[t.id]},this.registerWidgetByResultType=function(t,e){s.resultTypeWidgetMap[t.toLowerCase()]=e},this.getWidgetsByResultType=function(t){return s.resultTypeWidgetMap[t.toLowerCase()]},this.addLayerToManager=function(t,e){var n=s;a.set(t,"btnId",e),s.layerManagerLayer||(s.layerManagerLayer=s.CategoryManager.addCategory(2,new s.LayerManagerLayerFactory("Search","fa-map-pin",function(){i.each(n.layerManagerLayer.getLayers(),function(t){n.SidebarManager.removeButton(t.btnId)})},function(t){n.SidebarManager.removeButton(t.btnId)}))),s.layerManagerLayer.addLayer(t)},this.removeLayerFromManager=function(t){s.layerManagerLayer.removeLayer(t),t.onDestroy(),s.layerManagerLayer&&0===s.layerManagerLayer.getLayers().length&&delete s.layerManagerLayer},this.LayerManagerLayerFactory=t,this.CategoryManager=e,this.SidebarManager=n,o.merge(this.resultTypeWidgetMap,{default:function(t,e){return new r.DefaultResultTypeWidgetCfg({},t,e)}})}return t.$inject=["stealth.core.geo.analysis.category.AnalysisCategory","categoryManager","sidebarManager"],t}();e.SearchResultsManager=s},function(t,e,n){var r=n(546),i=n(260)(function(t,e,n,i){r(t,e,n,i)});t.exports=i},function(t,e,n){var r=n(1074)(n(44));t.exports=r},function(t,e,n){var r=n(2948),i=n(181),o=n(706),a=n(2949),s="[object Map]",l="[object Set]";t.exports=function(t){return function(e){var n=i(e);return n==s?o(e):n==l?a(e):r(e,t(e))}}},function(t,e,n){var r=n(1074)(n(108));t.exports=r},function(t,e){t.exports=function(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}},function(t,e,n){var r=n(307),i=n(34);t.exports=function(t,e){return r(e,function(e){return i(t[e])})}},function(t,e,n){var r=n(2958);t.exports=function(t,e){return function(n,i){return r(n,t,e(i),{})}}},function(t,e,n){var r=n(163),i=n(180),o=n(322),a=n(849),s=n(157);t.exports=function(t,e,n){e=i(e,t);var l=null==(t=a(t,e))?t:t[s(o(e))];return null==l?void 0:r(l,t,n)}},function(t,e,n){var r=n(317),i=n(262),o=n(222),a=n(43),s=n(399),l=n(17),c=n(249),u=n(34),d=n(71),f=n(308);t.exports=function(t,e,n){var p=l(t),h=p||c(t)||f(t);if(e=a(e,4),null==n){var g=t&&t.constructor;n=h?p?new g:[]:d(t)&&u(g)?i(s(t)):{}}return(h?r:o)(t,function(t,r,i){return e(n,t,r,i)}),n}},function(t,e,n){var r=n(306),i=n(403);t.exports=function(t,e,n,o){return i(t,e,n(r(t,e)),o)}},function(t,e,n){var r=n(188),i=n(406)(function(t,e,n){r(t,n,e)});t.exports=i},function(t,e,n){var r=n(1084);t.exports=function(t){var e=t.length;return e?t[r(0,e-1)]:void 0}},function(t,e){var n=Math.floor,r=Math.random;t.exports=function(t,e){return t+n(r()*(e-t+1))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(126),i=function(){return function(){var t=this;this.registeredActions={},this.registerAction=function(e){t.registeredActions[e.id]&&console.log("This could have unintended consequences. Did you mean to override an existing action? Overwriting action "+e.id),t.registeredActions[e.id]=e},this.registerActions=function(e){var n=t;r.forEach(e,function(t){n.registerAction(t)})}}}();e.ActionManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(126),i=function(){return function(){var t=this;this.registeredDataSources={},this.registerDataSource=function(e){t.registeredDataSources[e.id]&&console.log("This could have unintended consequences. Did you mean to override an existing action? Overwriting action "+e.id),t.registeredDataSources[e.id]=e},this.registerDataSources=function(e){var n=t;r.forEach(e,function(t){n.registerDataSource(t)})}}}();e.DataSourceManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2990),i=n(2991),o=n(23),a=n(4),s=n(319),l=function(){return function(t,e,n){this.$scope=t,this.$templateCache=e,this.ActionManager=n,e.put("stealth.search/actions/inputTooltip.tpl.html",i);var r=function(){t.availableActions=t.actions.filter(function(e){return e!==t.selectedAction&&!e.preventInSearch})},s=function(){var e=o(t.actions,function(t){return t.isDefault&&!t.preventInSearch});e||(e=t.actions.filter(function(t){return!t.preventInSearch})[0]),t.selectedAction=e,r()},l=function(){t.actions=a(n.registeredActions||{},function(t){return t})};t.$watch(function(){return n.registeredActions},function(){l(),s()}),l(),s(),t.selectAction=function(e){return t.selectedAction=e,r(),e},t.actionLabelFn=function(t){return t.title},t.actionListFilter=function(t){return!t.preventInSearch}}}();e.SearchCtrl=l,e.searchDirective=function(t){return{restrict:"E",template:r,controller:["$scope","$templateCache",s(l,t)]}},e.searchDirective.$inject=["stealth.search.actionManager"]},function(t,e,n){t.exports={after:n(2998),ary:n(599),before:n(1089),bind:n(2999),bindKey:n(3e3),curry:n(338),curryRight:n(3001),debounce:n(196),defer:n(122),delay:n(432),flip:n(3002),memoize:n(700),negate:n(624),once:n(3003),overArgs:n(3004),partial:n(228),partialRight:n(319),rearg:n(989),rest:n(3006),spread:n(3007),throttle:n(276),unary:n(3008),wrap:n(3009)}},function(t,e,n){var r=n(60),i="Expected a function";t.exports=function(t,e){var n;if("function"!=typeof e)throw new TypeError(i);return t=r(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3016),i=n(21),o=n(126),a=n(1088),s=function(){return function(t,e,n,r,a,s,l){var c=this;this.updateGroups=function(t){var e=c;c.groupsManager.getGroups().then(function(n){e.scope.groups=n,t&&(e.scope.selection.existingGroup=o.find(e.scope.groups,{id:t}))})},this.getGroupLabel=function(t){return t.name},this.setNewGroupName=function(){c.scope.selection.newGroupName="New Group ("+i().format("YYYY-MM-DD HH:mm:ss")+")"},this.createGroup=function(t){var e=c;c.groupsManager.addGroup({name:c.scope.selection.newGroupName}).then(function(n){e.panelManager.addGroup(n),e.updateGroups(n.id),e.sidebarManager.pinButton(e.btn.id,!0),e.addToGroup(n,t)})},this.appendToGroup=function(t){var e=c;c.scope.searchResultList.selectionManager.isAnySelected&&(t?c.scope.selection.newGroupName:c.scope.selection.existingGroup)&&c.searchResultList.datastore.read().then(function(n){var r=n.filter(function(t){return t.selected}).toArray();t?e.createGroup(r):e.addToGroup(c.scope.selection.existingGroup,r,!0)})},this.addToGroup=function(t,e,n){var r=c;r.entityManager.addEntitiesToGroup(t,e).then(function(){r.panelManager.showEntities(t,n)})},this.showTargetGroupEntities=function(){c.scope.selection.existingGroup&&(c.sidebarManager.pinButton(c.btn.id,!0),c.panelManager.showEntities(c.scope.selection.existingGroup,!0))};var u=this;this.groupsManager=e,this.entityManager=a,this.searchResultsManager=n,this.sidebarManager=l,this.scope=t,this.searchResultList=this.searchResultsManager.registeredSearches[t.searchId],this.scope.searchResultList=this.searchResultList,this.panelManager=r,this.entityPanelManager=s,this.updateGroups(),this.scope.createGroup=this.createGroup,this.scope.appendToGroup=this.appendToGroup,this.scope.getGroupLabel=this.getGroupLabel,this.scope.setNewGroupName=this.setNewGroupName,this.scope.$watch("selection.existingGroup",this.showTargetGroupEntities),this.groupBtn=o.find(this.sidebarManager.getButtons(),function(t){return"Groups Manager"===t.panel.title}),this.btn=o.find(this.sidebarManager.getButtons(),function(t){return t.panel.title===u.scope.searchId}),this.scope.selection={existingGroup:null,newGroupName:null}}}();e.ResultsToolbar=s,e.resultsToolbarDirective=function(t,e,n,i,o,l){return{restrict:"EA",template:r,controller:["$scope",a.partialRight(s,a.partialRight.placeholder,t,e,n,i,o,l)]}},e.resultsToolbarDirective.$inject=["stealth.dragonfish.groups.groupsManager","stealth.search.searchResultsManager","stealth.dragonfish.groups.panelManager","stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.groups.entities.panelManager","sidebarManager"]},function(t,e,n){(function(e){!function(e,r){t.exports=r(n(3077),n(3078))}("undefined"!=typeof self&&self,function(t,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=20)}([function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(3),o=i?i.navigator:null,a=i?i.document:null,s=r(""),l=r({}),c=r(function(){}),u="undefined"==typeof HTMLElement?"undefined":r(HTMLElement),d=function(t){return t&&t.instanceString&&f.fn(t.instanceString)?t.instanceString():null},f={defined:function(t){return null!=t},string:function(t){return null!=t&&(void 0===t?"undefined":r(t))==s},fn:function(t){return null!=t&&(void 0===t?"undefined":r(t))===c},array:function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},plainObject:function(t){return null!=t&&(void 0===t?"undefined":r(t))===l&&!f.array(t)&&t.constructor===Object},object:function(t){return null!=t&&(void 0===t?"undefined":r(t))===l},number:function(t){return null!=t&&(void 0===t?"undefined":r(t))===r(1)&&!isNaN(t)},integer:function(t){return f.number(t)&&Math.floor(t)===t},bool:function(t){return null!=t&&(void 0===t?"undefined":r(t))===r(!0)},htmlElement:function(t){return"undefined"===u?void 0:null!=t&&t instanceof HTMLElement},elementOrCollection:function(t){return f.element(t)||f.collection(t)},element:function(t){return"collection"===d(t)&&t._private.single},collection:function(t){return"collection"===d(t)&&!t._private.single},core:function(t){return"core"===d(t)},style:function(t){return"style"===d(t)},stylesheet:function(t){return"stylesheet"===d(t)},event:function(t){return"event"===d(t)},thread:function(t){return"thread"===d(t)},fabric:function(t){return"fabric"===d(t)},emptyString:function(t){return void 0===t||null===t||!(""!==t&&!t.match(/^\s+$/))},nonemptyString:function(t){return!(!t||!f.string(t)||""===t||t.match(/^\s+$/))},domElement:function(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement},boundingBox:function(t){return f.plainObject(t)&&f.number(t.x1)&&f.number(t.x2)&&f.number(t.y1)&&f.number(t.y2)},promise:function(t){return f.object(t)&&f.fn(t.then)},touch:function(){return i&&("ontouchstart"in i||i.DocumentTouch&&a instanceof DocumentTouch)},gecko:function(){return i&&("undefined"!=typeof InstallTrigger||"MozAppearance"in a.documentElement.style)},webkit:function(){return i&&("undefined"!=typeof webkitURL||"WebkitAppearance"in a.documentElement.style)},chromium:function(){return i&&"undefined"!=typeof chrome},khtml:function(){return o&&o.vendor.match(/kde/i)},khtmlEtc:function(){return f.khtml()||f.webkit()||f.chromium()},ms:function(){return o&&o.userAgent.match(/msie|trident|edge/i)},windows:function(){return o&&o.appVersion.match(/Win/i)},mac:function(){return o&&o.appVersion.match(/Mac/i)},linux:function(){return o&&o.appVersion.match(/Linux/i)},unix:function(){return o&&o.appVersion.match(/X11/i)}};t.exports=f},function(t,e,n){"use strict";var r=n(0),i=n(2),o={MAX_INT:Number.MAX_SAFE_INTEGER||9007199254740991,trueify:function(){return!0},falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(t){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(t){return this.extend({},t)},copy:function(t){return null==t?t:r.array(t)?t.slice():r.plainObject(t)?this.clone(t):t},copyArray:function(t){return t.slice()},clonePosition:function(t){return{x:t.x,y:t.y}},uuid:function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e}};o.makeBoundingBox=i.makeBoundingBox.bind(i),o._staticEmptyObject={},o.staticEmptyObject=function(){return o._staticEmptyObject},o.extend=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},o.assign=o.extend,o.default=function(t,e){return void 0===t?e:t},o.removeFromArray=function(t,e,n){for(var r=t.length;r>=0&&(t[r]!==e||(t.splice(r,1),n));r--);},o.clearArray=function(t){t.splice(0,t.length)},o.push=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}},o.getPrefixedProperty=function(t,e,n){return n&&(e=this.prependCamel(n,e)),t[e]},o.setPrefixedProperty=function(t,e,n,r){n&&(e=this.prependCamel(n,e)),t[e]=r},[n(21),n(22),{memoize:n(13)},n(23),n(24),n(25),n(27)].forEach(function(t){o.extend(o,t)}),t.exports=o},function(t,e,n){"use strict";var r={arePositionsSame:function(t,e){return t.x===e.x&&t.y===e.y},copyPosition:function(t){return{x:t.x,y:t.y}},modelToRenderedPosition:function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},renderedToModelPosition:function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},array2point:function(t){return{x:t[0],y:t[1]}},deg2rad:function(t){return Math.PI*t/180},getAngleFromDisp:function(t,e){return Math.atan2(e,t)-Math.PI/2}};r.log2=Math.log2||function(t){return Math.log(t)/Math.log(2)},r.signum=function(t){return t>0?1:t<0?-1:0},r.dist=function(t,e){return Math.sqrt(r.sqdist(t,e))},r.sqdist=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},r.qbezierAt=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},r.qbezierPtAt=function(t,e,n,i){return{x:r.qbezierAt(t.x,e.x,n.x,i),y:r.qbezierAt(t.y,e.y,n.y,i)}},r.lineAt=function(t,e,n,i){var o=e.x-t.x,a=e.y-t.y,s=r.dist(t,e),l=o/s,c=a/s;return n=null==n?0:n,i=null!=i?i:n*s,{x:t.x+l*i,y:t.y+c*i}},r.lineAtDist=function(t,e,n){return r.lineAt(t,e,void 0,n)},r.triangleAngle=function(t,e,n){var i=r.dist(e,n),o=r.dist(t,n),a=r.dist(t,e);return Math.acos((i*i+o*o-a*a)/(2*i*o))},r.bound=function(t,e,n){return Math.max(t,Math.min(n,e))},r.makeBoundingBox=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},r.updateBoundingBox=function(t,e){t.x1=Math.min(t.x1,e.x1),t.x2=Math.max(t.x2,e.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,e.y1),t.y2=Math.max(t.y2,e.y2),t.h=t.y2-t.y1},r.expandBoundingBoxByPoint=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},r.expandBoundingBox=function(t,e){return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},r.boundingBoxesIntersect=function(t,e){return!(t.x1>e.x2)&&(!(e.x1>t.x2)&&(!(t.x2<e.x1)&&(!(e.x2<t.x1)&&(!(t.y2<e.y1)&&(!(e.y2<t.y1)&&(!(t.y1>e.y2)&&!(e.y1>t.y2)))))))},r.inBoundingBox=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},r.pointInBoundingBox=function(t,e){return this.inBoundingBox(t,e.x,e.y)},r.boundingBoxInBoundingBox=function(t,e){return r.inBoundingBox(t,e.x1,e.y1)&&r.inBoundingBox(t,e.x2,e.y2)},r.roundRectangleIntersectLine=function(t,e,n,r,i,o,a){var s=this.getRoundRectangleRadius(i,o),l=i/2,c=o/2,u=void 0,d=n-l+s-a,f=r-c-a,p=n+l-s+a,h=f;if((u=this.finiteLinesIntersect(t,e,n,r,d,f,p,h,!1)).length>0)return u;var g=n+l+a,m=r-c+s-a,v=g,y=r+c-s+a;if((u=this.finiteLinesIntersect(t,e,n,r,g,m,v,y,!1)).length>0)return u;var b=n-l+s-a,w=r+c+a,_=n+l-s+a,x=w;if((u=this.finiteLinesIntersect(t,e,n,r,b,w,_,x,!1)).length>0)return u;var S=n-l-a,C=r-c+s-a,E=S,T=r+c-s+a;if((u=this.finiteLinesIntersect(t,e,n,r,S,C,E,T,!1)).length>0)return u;var M=void 0,k=n-l+s,A=r-c+s;if((M=this.intersectLineCircle(t,e,n,r,k,A,s+a)).length>0&&M[0]<=k&&M[1]<=A)return[M[0],M[1]];var I=n+l-s,O=r-c+s;if((M=this.intersectLineCircle(t,e,n,r,I,O,s+a)).length>0&&M[0]>=I&&M[1]<=O)return[M[0],M[1]];var P=n+l-s,L=r+c-s;if((M=this.intersectLineCircle(t,e,n,r,P,L,s+a)).length>0&&M[0]>=P&&M[1]>=L)return[M[0],M[1]];var D=n-l+s,N=r+c-s;return(M=this.intersectLineCircle(t,e,n,r,D,N,s+a)).length>0&&M[0]<=D&&M[1]>=N?[M[0],M[1]]:[]},r.inLineVicinity=function(t,e,n,r,i,o,a){var s=a,l=Math.min(n,i),c=Math.max(n,i),u=Math.min(r,o),d=Math.max(r,o);return l-s<=t&&t<=c+s&&u-s<=e&&e<=d+s},r.inBezierVicinity=function(t,e,n,r,i,o,a,s,l){var c=Math.min(n,a,i)-l,u=Math.max(n,a,i)+l,d=Math.min(r,s,o)-l,f=Math.max(r,s,o)+l;return!(t<c||t>u||e<d||e>f)},r.solveQuadratic=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*t;return[(-e+o)/a,(-e-o)/a]},r.solveCubic=function(t,e,n,r,i){var o,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=void 0,f=void 0;return s=-27*(r/=t)+(e/=t)*(9*(n/=t)-e*e*2),o=(a=(3*n-e*e)/9)*a*a+(s/=54)*s,i[1]=0,d=e/3,o>0?(c=(c=s+Math.sqrt(o))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),u=(u=s-Math.sqrt(o))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-d+c+u,d+=(c+u)/2,i[4]=i[2]=-d,d=Math.sqrt(3)*(-u+c)/2,i[3]=d,void(i[5]=-d)):(i[5]=i[3]=0,0===o?(f=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*f-d,void(i[4]=i[2]=-(f+d))):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),f=2*Math.sqrt(a),i[0]=-d+f*Math.cos(l/3),i[2]=-d+f*Math.cos((l+2*Math.PI)/3),void(i[4]=-d+f*Math.cos((l+4*Math.PI)/3))))},r.sqdistToQuadraticBezier=function(t,e,n,r,i,o,a,s){var l=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,c=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,u=3*n*n-6*n*i+n*a-n*t+2*i*i+2*i*t-a*t+3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e,d=1*n*i-n*n+n*t-i*t+r*o-r*r+r*e-o*e,f=[];this.solveCubic(l,c,u,d,f);for(var p=[],h=0;h<6;h+=2)Math.abs(f[h+1])<1e-7&&f[h]>=0&&f[h]<=1&&p.push(f[h]);p.push(1),p.push(0);for(var g=-1,m=void 0,v=void 0,y=void 0,b=0;b<p.length;b++)m=Math.pow(1-p[b],2)*n+2*(1-p[b])*p[b]*i+p[b]*p[b]*a,v=Math.pow(1-p[b],2)*r+2*(1-p[b])*p[b]*o+p[b]*p[b]*s,y=Math.pow(m-t,2)+Math.pow(v-e,2),g>=0?y<g&&(g=y):g=y;return g},r.sqdistToFiniteLine=function(t,e,n,r,i,o){var a=[t-n,e-r],s=[i-n,o-r],l=s[0]*s[0]+s[1]*s[1],c=a[0]*a[0]+a[1]*a[1],u=a[0]*s[0]+a[1]*s[1],d=u*u/l;return u<0?c:d>l?(t-i)*(t-i)+(e-o)*(e-o):c-d},r.pointInsidePolygonPoints=function(t,e,n){for(var r=void 0,i=void 0,o=void 0,a=void 0,s=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),r==t&&o==t);else{if(!(r>=t&&t>=o||r<=t&&t<=o))continue;(t-r)/(o-r)*(a-i)+i>e&&s++}return s%2!=0},r.pointInsidePolygon=function(t,e,n,i,o,a,s,l,c){var u=new Array(n.length),d=void 0;null!=l[0]?(d=Math.atan(l[1]/l[0]),l[0]<0?d+=Math.PI/2:d=-d-Math.PI/2):d=l;for(var f=Math.cos(-d),p=Math.sin(-d),h=0;h<u.length/2;h++)u[2*h]=a/2*(n[2*h]*f-n[2*h+1]*p),u[2*h+1]=s/2*(n[2*h+1]*f+n[2*h]*p),u[2*h]+=i,u[2*h+1]+=o;var g=void 0;if(c>0){var m=this.expandPolygon(u,-c);g=this.joinLines(m)}else g=u;return r.pointInsidePolygonPoints(t,e,g)},r.joinLines=function(t){for(var e=new Array(t.length/2),n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=0;u<t.length/4;u++){n=t[4*u],r=t[4*u+1],i=t[4*u+2],o=t[4*u+3],u<t.length/4-1?(a=t[4*(u+1)],s=t[4*(u+1)+1],l=t[4*(u+1)+2],c=t[4*(u+1)+3]):(a=t[0],s=t[1],l=t[2],c=t[3]);var d=this.finiteLinesIntersect(n,r,i,o,a,s,l,c,!0);e[2*u]=d[0],e[2*u+1]=d[1]}return e},r.expandPolygon=function(t,e){for(var n=new Array(2*t.length),r=void 0,i=void 0,o=void 0,a=void 0,s=0;s<t.length/2;s++){r=t[2*s],i=t[2*s+1],s<t.length/2-1?(o=t[2*(s+1)],a=t[2*(s+1)+1]):(o=t[0],a=t[1]);var l=a-i,c=-(o-r),u=Math.sqrt(l*l+c*c),d=l/u,f=c/u;n[4*s]=r+d*e,n[4*s+1]=i+f*e,n[4*s+2]=o+d*e,n[4*s+3]=a+f*e}return n},r.intersectLineEllipse=function(t,e,n,r,i,o){var a=n-t,s=r-e;a/=i,s/=o;var l=Math.sqrt(a*a+s*s),c=l-1;if(c<0)return[];var u=c/l;return[(n-t)*u+t,(r-e)*u+e]},r.checkInEllipse=function(t,e,n,r,i,o,a){return t-=i,e-=o,(t/=n/2+a)*t+(e/=r/2+a)*e<=1},r.intersectLineCircle=function(t,e,n,r,i,o,a){var s=[n-t,r-e],l=[t-i,e-o],c=s[0]*s[0]+s[1]*s[1],u=2*(l[0]*s[0]+l[1]*s[1]),d=u*u-4*c*(l[0]*l[0]+l[1]*l[1]-a*a);if(d<0)return[];var f=(-u+Math.sqrt(d))/(2*c),p=(-u-Math.sqrt(d))/(2*c),h=Math.min(f,p),g=Math.max(f,p),m=[];if(h>=0&&h<=1&&m.push(h),g>=0&&g<=1&&m.push(g),0===m.length)return[];var v=m[0]*s[0]+t,y=m[0]*s[1]+e;return m.length>1?m[0]==m[1]?[v,y]:[v,y,m[1]*s[0]+t,m[1]*s[1]+e]:[v,y]},r.findCircleNearPoint=function(t,e,n,r,i){var o=r-t,a=i-e,s=Math.sqrt(o*o+a*a);return[t+o/s*n,e+a/s*n]},r.findMaxSqDistanceToOrigin=function(t){for(var e=1e-6,n=void 0,r=0;r<t.length/2;r++)(n=t[2*r]*t[2*r]+t[2*r+1]*t[2*r+1])>e&&(e=n);return e},r.midOfThree=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},r.finiteLinesIntersect=function(t,e,n,r,i,o,a,s,l){var c=t-i,u=n-t,d=a-i,f=e-o,p=r-e,h=s-o,g=d*f-h*c,m=u*f-p*c,v=h*u-d*p;if(0!==v){var y=g/v,b=m/v;return-.001<=y&&y<=1.001&&-.001<=b&&b<=1.001?[t+y*u,e+y*p]:l?[t+y*u,e+y*p]:[]}return 0===g||0===m?this.midOfThree(t,n,a)===a?[a,s]:this.midOfThree(t,n,i)===i?[i,o]:this.midOfThree(i,a,n)===n?[n,r]:[]:[]},r.polygonIntersectLine=function(t,e,n,i,o,a,s,l){var c=[],u=void 0,d=new Array(n.length),f=!0;5===arguments.length&&(f=!1);var p=void 0;if(f){for(var h=0;h<d.length/2;h++)d[2*h]=n[2*h]*a+i,d[2*h+1]=n[2*h+1]*s+o;if(l>0){var g=r.expandPolygon(d,-l);p=r.joinLines(g)}else p=d}else p=n;for(var m=void 0,v=void 0,y=void 0,b=void 0,w=0;w<p.length/2;w++)m=p[2*w],v=p[2*w+1],w<p.length/2-1?(y=p[2*(w+1)],b=p[2*(w+1)+1]):(y=p[0],b=p[1]),0!==(u=this.finiteLinesIntersect(t,e,i,o,m,v,y,b)).length&&c.push(u[0],u[1]);return c},r.shortenIntersection=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[e[0]+o*r[0],e[1]+o*r[1]]},r.generateUnitNgonPointsFitToSquare=function(t,e){var n=r.generateUnitNgonPoints(t,e);return n=r.fitPolygonToSquare(n)},r.fitPolygonToSquare=function(t){for(var e=void 0,n=void 0,r=t.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<r;l++)e=t[2*l],n=t[2*l+1],i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);for(var c=2/(a-i),u=2/(s-o),d=0;d<r;d++)e=t[2*d]=t[2*d]*c,n=t[2*d+1]=t[2*d+1]*u,i=Math.min(i,e),a=Math.max(a,e),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var f=0;f<r;f++)n=t[2*f+1]=t[2*f+1]+(-1-o);return t},r.generateUnitNgonPoints=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i=new Array(2*t),o=void 0,a=0;a<t;a++)o=a*n+r,i[2*a]=Math.cos(o),i[2*a+1]=Math.sin(-o);return i},r.getRoundRectangleRadius=function(t,e){return Math.min(t/4,e/4,8)},r.getCutRectangleCornerLength=function(){return 8},r.bezierPtsToQuadCoeff=function(t,e,n){return[t-2*e+n,2*(e-t),t]},r.getBarrelCurveConstants=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},t.exports=r},function(t,e,n){"use strict";t.exports="undefined"==typeof window?null:window},function(t,e,n){"use strict";var r=n(1),i={};[n(43),n(45),n(46)].forEach(function(t){r.assign(i,t)}),t.exports=i},function(t,n,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};
/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/o.prototype={fulfill:function(t){return a(this,1,"fulfillValue",t)},reject:function(t){return a(this,2,"rejectReason",t)},then:function(t,e){var n=new o;return this.onFulfilled.push(c(t,n,"fulfill")),this.onRejected.push(c(e,n,"reject")),s(this),n.proxy}};var a=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,s(t)),t},s=function(t){1===t.state?l(t,"onFulfilled",t.fulfillValue):2===t.state&&l(t,"onRejected",t.rejectReason)},l=function(t,n,r){if(0!==t[n].length){var i=t[n];t[n]=[];var o=function(){for(var t=0;t<i.length;t++)i[t](r)};"function"==typeof e?e(o):setTimeout(o,0)}},c=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}u(e,i)}}},u=function t(e,n){if(e!==n&&e.proxy!==n){var r;if("object"===(void 0===n?"undefined":i(n))&&null!==n||"function"==typeof n)try{r=n.then}catch(t){return void e.reject(t)}if("function"!=typeof r)e.fulfill(n);else{var o=!1;try{r.call(n,function(r){o||(o=!0,r===n?e.reject(new TypeError("circular thenable chain")):t(e,r))},function(t){o||(o=!0,e.reject(t))})}catch(t){o||e.reject(t)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};o.all=function(t){return new o(function(e,n){for(var r=new Array(t.length),i=0,o=function(n,o){r[n]=o,++i===t.length&&e(r)},a=0;a<t.length;a++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then(function(t){o(e,t)},function(t){n(t)}):o(e,r)}(a)})},o.resolve=function(t){return new o(function(e,n){e(t)})},o.reject=function(t){return new o(function(e,n){n(t)})},t.exports="undefined"!=typeof Promise?Promise:o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(10),a=function(t){if(this._private={selectorText:t,invalid:!0},null==t||r.string(t)&&t.match(/^\s*$/))this.length=0;else if("*"===t||"edge"===t||"node"===t)this[0]=o(),this[0].group="*"===t?t:t+"s",this[0].groupOnly=!0,this[0].length=1,this._private.invalid=!1,this.length=1;else if(r.elementOrCollection(t)){var e=t.collection();this[0]=o(),this[0].collection=e,this[0].length=1,this.length=1}else if(r.fn(t))this[0]=o(),this[0].filter=t,this[0].length=1,this.length=1;else{if(!r.string(t))return void i.error("A selector must be created from a string; found ",t);if(!this.parse(t))return}this._private.invalid=!1},s=a.prototype;s.valid=function(){return!this._private.invalid},s.invalid=function(){return this._private.invalid},s.text=function(){return this._private.selectorText},s.size=function(){return this.length},s.eq=function(t){return this[t]},s.sameText=function(t){return this.text()===t.text()},s.toString=s.selector=function(){if(null!=this._private.toStringCache)return this._private.toStringCache;var t=void 0,e="",n=function(t){return null==t?"":t},i=function(t){return r.string(t)?'"'+t+'"':n(t)},o=function(t){return" "+t+" "},a=function e(r){var a="",s=void 0;r.subject===r&&(a+="$");var l=n(r.group);for(a+=l.substring(0,l.length-1),s=0;s<r.data.length;s++){var c=r.data[s];c.value?a+="["+c.field+o(n(c.operator))+i(c.value)+"]":a+="["+n(c.operator)+c.field+"]"}for(s=0;s<r.meta.length;s++){var u=r.meta[s];a+="[["+u.field+o(n(u.operator))+i(u.value)+"]]"}for(s=0;s<r.colonSelectors.length;s++)a+=r.colonSelectors[t];for(s=0;s<r.ids.length;s++)a+="#"+r.ids[t];for(s=0;s<r.classes.length;s++)a+="."+r.classes[s];if(null!=r.source&&null!=r.target&&(a=e(r.source)+" -> "+e(r.target)),null!=r.connectedNodes){var d=r.connectedNodes;a=e(d[0])+" <-> "+e(d[1])}return null!=r.parent&&(a=e(r.parent)+" > "+a),null!=r.ancestor&&(a=e(r.ancestor)+" "+a),null!=r.child&&(a+=" > "+e(r.child)),null!=r.descendant&&(a+=" "+e(r.descendant)),a};for(t=0;t<this.length;t++){e+=a(this[t]),this.length>1&&t<this.length-1&&(e+=", ")}return this._private.toStringCache=e,e},[n(49),n(52)].forEach(function(t){return i.assign(s,t)}),t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(8),s=n(14),l=function(t,e,n){for(var i=null!=n?n:r.uuid();t.hasElementWithId(i);)i=r.uuid();return i},c=function(t,e,n){if(void 0!==t&&i.core(t)){var c=new o,u=!1;if(e){if(e.length>0&&i.plainObject(e[0])&&!i.element(e[0])){u=!0;for(var d=[],f=new a,p=0,h=e.length;p<h;p++){var g=e[p];null==g.data&&(g.data={});var m=g.data;if(null==m.id)m.id=l(t,g);else if(t.hasElementWithId(m.id)||f.has(m.id))continue;var v=new s(t,g,!1);d.push(v),f.add(m.id)}e=d}}else e=[];this.length=0;for(var y=0,b=e.length;y<b;y++){var w=e[y];if(null!=w){var _=w._private.data.id;(null==n||n.unique&&!c.has(_))&&(c.set(_,{index:this.length,ele:w}),this[this.length]=w,this.length++)}}this._private={cy:t,map:c},u&&this.restore()}else r.error("A collection must have a reference to the core")},u=s.prototype=c.prototype;u.instanceString=function(){return"collection"},u.spawn=function(t,e,n){return i.core(t)||(n=e,e=t,t=this.cy()),new c(t,e,n)},u.spawnSelf=function(){return this.spawn(this)},u.cy=function(){return this._private.cy},u.renderer=function(){return this._private.cy.renderer()},u.element=function(){return this[0]},u.collection=function(){return i.collection(this)?this:new c(this._private.cy,[this])},u.unique=function(){return new c(this._private.cy,this,{unique:!0})},u.hasElementWithId=function(t){return this._private.map.has(t)},u.getElementById=function(t){var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new c(e)},u.$id=u.getElementById,u.poolIndex=function(){var t=this._private.cy._private.elements,e=this._private.data.id;return t._private.map.get(e).index},u.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var o=e._private;if(i.plainObject(t)){n.startBatch(),t.data&&e.data(t.data),t.position&&e.position(t.position);var a=function(n,r,i){var a=t[n];null!=a&&a!==o[n]&&(a?e[r]():e[i]())};return a("removed","remove","restore"),a("selected","select","unselect"),a("selectable","selectify","unselectify"),a("locked","lock","unlock"),a("grabbable","grabify","ungrabify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var s={data:r.copy(o.data),position:r.copy(o.position),group:o.group,removed:o.removed,selected:o.selected,selectable:o.selectable,locked:o.locked,grabbable:o.grabbable,classes:null};s.classes="";var l=0;return o.classes.forEach(function(t){return s.classes+=0==l++?t:" "+t}),s}}},u.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},u.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new s(t,r,!1);e.push(i)}return new c(t,e)},u.copy=u.clone,u.restore=function(t){var e=this.cy(),n=e._private;void 0===t&&(t=!0);for(var a=[],s=[],u=void 0,d=0,f=this.length;d<f;d++){var p=this[d];p.removed()&&(p.isNode()?a.push(p):s.push(p))}u=a.concat(s);var h=void 0,g=function(){u.splice(h,1),h--};for(h=0;h<u.length;h++){var m=u[h],v=m._private,y=v.data;if(m.clearTraversalCache(),void 0===y.id)y.id=l(e,m);else if(i.number(y.id))y.id=""+y.id;else{if(i.emptyString(y.id)||!i.string(y.id)){r.error("Can not create element with invalid string ID `"+y.id+"`"),g();continue}if(e.hasElementWithId(y.id)){r.error("Can not create second element with ID `"+y.id+"`"),g();continue}}var b=y.id;if(m.isNode()){var w=v.position;null==w.x&&(w.x=0),null==w.y&&(w.y=0)}if(m.isEdge()){for(var _=m,x=["source","target"],S=x.length,C=!1,E=0;E<S;E++){var T=x[E],M=y[T];i.number(M)&&(M=y[T]=""+y[T]),null==M||""===M?(r.error("Can not create edge `"+b+"` with unspecified "+T),C=!0):e.hasElementWithId(M)||(r.error("Can not create edge `"+b+"` with nonexistant "+T+" `"+M+"`"),C=!0)}if(C){g();continue}var k=e.getElementById(y.source),A=e.getElementById(y.target);k._private.edges.push(_),A._private.edges.push(_),_._private.source=k,_._private.target=A}v.map=new o,v.map.set(b,{ele:m,index:0}),v.removed=!1,e.addToPool(m)}for(var I=0;I<a.length;I++){var O=a[I],P=O._private.data;i.number(P.parent)&&(P.parent=""+P.parent);var L=P.parent;if(null!=L){var D=e.getElementById(L);if(D.empty())P.parent=void 0;else{for(var N=!1,R=D;!R.empty();){if(O.same(R)){N=!0,P.parent=void 0;break}R=R.parent()}N||(D[0]._private.children.push(O),O._private.parent=D[0],n.hasCompoundNodes=!0)}}}if(u.length>0){for(var F=new c(e,u),B=0;B<F.length;B++){var j=F[B];j.isNode()||(j.parallelEdges().clearTraversalCache(),j.source().clearTraversalCache(),j.target().clearTraversalCache())}(n.hasCompoundNodes?e.collection().merge(F).merge(F.connectedNodes()).merge(F.parent()):F).dirtyCompoundBoundsCache().updateStyle(t),t?F.emitAndNotify("add"):F.emit("add")}return this},u.removed=function(){var t=this[0];return t&&t._private.removed},u.inside=function(){var t=this[0];return t&&!t._private.removed},u.remove=function(t){var e=[],n=[],i={},o=this._private.cy;function a(t){var e=i[t.id()];t.removed()||e||(i[t.id()]=!0,t.isNode()?(n.push(t),function(t){for(var e=t._private.edges,n=0;n<e.length;n++)a(e[n])}(t),function(t){for(var e=t._private.children,n=0;n<e.length;n++)a(e[n])}(t)):n.unshift(t))}void 0===t&&(t=!0);for(var s=0,l=this.length;s<l;s++){a(this[s])}function u(t,e){var n=t._private.edges;r.removeFromArray(n,e),t.clearTraversalCache()}function d(t){t.parallelEdges().clearTraversalCache()}var f=[];function p(t,e){e=e[0];var n=(t=t[0])._private.children,i=t.id();r.removeFromArray(n,e),f.ids[i]||(f.ids[i]=!0,f.push(t))}f.ids={},this.dirtyCompoundBoundsCache(),o.removeFromPool(n);for(var h=0;h<n.length;h++){var g=n[h];if(g._private.removed=!0,e.push(g),g.isEdge()){var m=g.source()[0],v=g.target()[0];u(m,g),u(v,g),d(g)}else{var y=g.parent();0!==y.length&&p(y,g)}}var b=o._private.elements;o._private.hasCompoundNodes=!1;for(var w=0;w<b.length;w++){if(b[w].isParent()){o._private.hasCompoundNodes=!0;break}}var _=new c(this.cy(),e);_.size()>0&&(t&&this.cy().notify({type:"remove",eles:_}),_.emit("remove"));for(var x=0;x<f.length;x++){var S=f[x];S.removed()||S.updateStyle()}return new c(o,e)},u.move=function(t){var e=this._private.cy;if(void 0!==t.source||void 0!==t.target){var n=t.source,r=t.target,i=e.hasElementWithId(n),o=e.hasElementWithId(r);if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var l=a[s],c=this[s];"edges"===l.group&&(i&&(l.data.source=n),o&&(l.data.target=r),l.scratch=c._private.scratch)}return e.add(a)}}else if(void 0!==t.parent){var u=t.parent;if(null===u||e.hasElementWithId(u)){var d=this.jsons(),f=this.descendants(),p=f.union(f.union(this).connectedEdges()).jsons();this.remove();for(var h=0;h<d.length;h++){var g=d[h],m=this[h];"nodes"===g.group&&(g.data.parent=null===u?void 0:u,g.scratch=m._private.scratch)}return e.add(d.concat(p))}}return this},[n(29),n(42),n(47),n(48),n(53),n(54),n(55),n(56),n(61),n(62),n(63),n(7),n(64),n(65),n(66),n(67),n(68)].forEach(function(t){r.extend(u,t)}),t.exports=c},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();"function"==typeof Symbol&&Symbol.iterator;var i=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._obj=Object.create(null),null!=e){var n=void 0;n=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var r=0;r<n.length;r++)this.add(n[r])}}return r(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){this._obj[t]=1}},{key:"delete",value:function(t){this._obj[t]=0}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(e){return t.has(e)})}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}},{key:"size",get:function(){return this.toArray().length}}]),t}();t.exports=i},function(t,e,n){"use strict";t.exports=n(32)},function(t,e,n){"use strict";t.exports=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(16),a=/^([^.]+)(\.(?:[^.]+))?$/,s={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},eventFields:function(){return{}},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:void 0};function l(t){r.assign(this,s,t),this.listeners=[],this.emitting=0}var c=l.prototype,u=function(t,e,n,o,s,l,c){i.fn(o)&&(s=o,o=null),c&&(l=null==l?c:r.assign({},l,c));for(var u=n.split(/\s+/),d=0;d<u.length;d++){var f=u[d];if(!i.emptyString(f)){var p=f.match(a);if(p)if(!1===e(t,f,p[1],p[2]?p[2]:null,o,s,l))break}}},d=function(t,e){return new o(e.type,r.assign(e,t.eventFields(t.context)))};c.on=c.addListener=function(t,e,n,r,o){return u(this,function(t,e,n,r,o,a,s){i.fn(a)&&t.listeners.push({event:e,callback:a,type:n,namespace:r,qualifier:o,conf:s})},t,e,n,r,o),this},c.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},c.removeListener=c.off=function(t,e,n,i){var o=this;0!==this.emitting&&(this.listeners=r.copyArray(this.listeners));for(var a=this.listeners,s=function(r){var s=a[r];u(o,function(t,e,n,i,o,l){if(s.type===n&&(!i||s.namespace===i)&&(!o||t.qualifierCompare(s.qualifier,o))&&(!l||s.callback===l))return a.splice(r,1),!1},t,e,n,i)},l=a.length-1;l>=0;l--)s(l);return this},c.emit=c.trigger=function(t,e,n){var o=this.listeners,s=o.length;return this.emitting++,i.array(e)||(e=[e]),function(t,e,n){if(i.event(n))e(t,n);else if(i.plainObject(n))e(t,d(t,n));else for(var r=n.split(/\s+/),o=0;o<r.length;o++){var s=r[o];if(!i.emptyString(s)){var l=s.match(a);if(l){var c=l[1],u=l[2]?l[2]:null;e(t,d(t,{type:c,namespace:u,target:t.context}))}}}}(this,function(t,i){null!=n&&(o=[{event:i.event,type:i.type,namespace:i.namespace,callback:n}],s=o.length);for(var a=function(n){var a=o[n];if(a.type===i.type&&(!a.namespace||a.namespace===i.namespace||".*"===a.namespace)&&t.eventMatches(t.context,a,i)){var s=[i];null!=e&&r.push(s,e),t.beforeEmit(t.context,a,i),a.conf&&a.conf.one&&(t.listeners=t.listeners.filter(function(t){return t!==a}));var l=t.callbackContext(t.context,a,i),c=a.callback.apply(l,s);t.afterEmit(t.context,a,i),!1===c&&(i.stopPropagation(),i.preventDefault())}},l=0;l<s;l++)a(l);t.bubble(t.context)&&!i.isPropagationStopped()&&t.parent(t.context).emit(i,e)},t),this.emitting--,this},t.exports=l},function(t,e,n){"use strict";var r=n(3),i=n(1),o=n(7),a=n(0),s=n(5),l=n(4),c=function(t){var e=this,n=(t=i.extend({},t)).container;n&&!a.htmlElement(n)&&a.htmlElement(n[0])&&(n=n[0]);var l=n?n._cyreg:null;(l=l||{})&&l.cy&&(l.cy.destroy(),l={});var c=l.readies=l.readies||[];n&&(n._cyreg=l),l.cy=e;var u=void 0!==r&&void 0!==n&&!t.headless,d=t;d.layout=i.extend({name:u?"grid":"null"},d.layout),d.renderer=i.extend({name:u?"canvas":"null"},d.renderer);var f=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},p=this._private={container:n,ready:!1,options:d,elements:new o(this),listeners:[],aniEles:new o(this),scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:f(!0,d.zoomingEnabled),userZoomingEnabled:f(!0,d.userZoomingEnabled),panningEnabled:f(!0,d.panningEnabled),userPanningEnabled:f(!0,d.userPanningEnabled),boxSelectionEnabled:f(!0,d.boxSelectionEnabled),autolock:f(!1,d.autolock,d.autolockNodes),autoungrabify:f(!1,d.autoungrabify,d.autoungrabifyNodes),autounselectify:f(!1,d.autounselectify),styleEnabled:void 0===d.styleEnabled?u:d.styleEnabled,zoom:a.number(d.zoom)?d.zoom:1,pan:{x:a.plainObject(d.pan)&&a.number(d.pan.x)?d.pan.x:0,y:a.plainObject(d.pan)&&a.number(d.pan.y)?d.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter();var h=d.selectionType;p.selectionType=void 0===h||"additive"!==h&&"single"!==h?"single":h,a.number(d.minZoom)&&a.number(d.maxZoom)&&d.minZoom<d.maxZoom?(p.minZoom=d.minZoom,p.maxZoom=d.maxZoom):a.number(d.minZoom)&&void 0===d.maxZoom?p.minZoom=d.minZoom:a.number(d.maxZoom)&&void 0===d.minZoom&&(p.maxZoom=d.maxZoom);p.styleEnabled&&e.setStyle([]),e.initRenderer(i.extend({hideEdgesOnViewport:d.hideEdgesOnViewport,textureOnViewport:d.textureOnViewport,wheelSensitivity:a.number(d.wheelSensitivity)&&d.wheelSensitivity>0?d.wheelSensitivity:1,motionBlur:void 0!==d.motionBlur&&d.motionBlur,motionBlurOpacity:void 0===d.motionBlurOpacity?.05:d.motionBlurOpacity,pixelRatio:a.number(d.pixelRatio)&&d.pixelRatio>0?d.pixelRatio:void 0,desktopTapThreshold:void 0===d.desktopTapThreshold?4:d.desktopTapThreshold,touchTapThreshold:void 0===d.touchTapThreshold?8:d.touchTapThreshold},d.renderer));!function(t,e){if(t.some(a.promise))return s.all(t).then(e);e(t)}([d.style,d.elements],function(t){var n=t[0],r=t[1];p.styleEnabled&&e.style().append(n),function(t,n,r){e.notifications(!1);var o=e.mutableElements();o.length>0&&o.remove(),null!=t&&(a.plainObject(t)||a.array(t))&&e.add(t),e.one("layoutready",function(t){e.notifications(!0),e.emit(t),e.notify({type:"load",eles:e.mutableElements()}),e.one("load",n),e.emit("load")}).one("layoutstop",function(){e.one("done",r),e.emit("done")});var s=i.extend({},e._private.options.layout);s.eles=e.elements(),e.layout(s).run()}(r,function(){e.startAnimationLoop(),p.ready=!0,a.fn(d.ready)&&e.on("ready",d.ready);for(var t=0;t<c.length;t++){var n=c[t];e.on("ready",n)}l&&(l.readies=[]),e.emit("ready")},d.done)})},u=c.prototype;i.extend(u,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},isDestroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.isDestroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return"null"===this._private.options.renderer.name},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container},options:function(){return i.copy(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(a.plainObject(t)){if(e.startBatch(),t.elements){var o={},s=function(t,n){for(var r=0;r<t.length;r++){var a=t[r],s=a.data.id,l=e.getElementById(s);o[s]=!0,0!==l.length?l.json(a):n?e.add(i.extend({group:n},a)):e.add(a)}};if(a.array(t.elements))s(t.elements);else for(var l=["nodes","edges"],c=0;c<l.length;c++){var u=l[c],d=t.elements[u];a.array(d)&&s(d,u)}r.stdFilter(function(t){return!o[t.id()]}).remove()}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan));for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],p=0;p<f.length;p++){var h=f[p];null!=t[h]&&e[h](t[h])}return e.endBatch(),this}if(void 0===t){var g={elements:{}};return r.forEach(function(t){var e=t.group();g.elements[e]||(g.elements[e]=[]),g.elements[e].push(t.json())}),this._private.styleEnabled&&(g.style=e.style().json()),g.zoomingEnabled=e._private.zoomingEnabled,g.userZoomingEnabled=e._private.userZoomingEnabled,g.zoom=e._private.zoom,g.minZoom=e._private.minZoom,g.maxZoom=e._private.maxZoom,g.panningEnabled=e._private.panningEnabled,g.userPanningEnabled=e._private.userPanningEnabled,g.pan=i.copy(e._private.pan),g.boxSelectionEnabled=e._private.boxSelectionEnabled,g.renderer=i.copy(e._private.options.renderer),g.hideEdgesOnViewport=e._private.options.hideEdgesOnViewport,g.textureOnViewport=e._private.options.textureOnViewport,g.wheelSensitivity=e._private.options.wheelSensitivity,g.motionBlur=e._private.options.motionBlur,g}},scratch:l.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:l.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),u.$id=u.getElementById,[n(69),n(70),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(93)].forEach(function(t){i.extend(u,t)}),t.exports=c},function(t,e,n){"use strict";t.exports=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r=arguments,i=void 0,o=e.apply(this,r),a=n.cache;return(i=a[o])||(i=a[o]=t.apply(this,r)),i};return n.cache={},n}},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(8);t.exports=function(t,e,n){if(n=!(void 0!==n&&!n),void 0!==t&&void 0!==e&&i.core(t)){var a=e.group;if(null==a&&(a=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===a||"edges"===a){this.length=1,this[0]=this;var s=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,active:!1,classes:new o,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1};if(e.renderedPosition){var l=e.renderedPosition,c=t.pan(),u=t.zoom();s.position={x:(l.x-c.x)/u,y:(l.y-c.y)/u}}if(i.string(e.classes))for(var d=e.classes.split(/\s+/),f=0,p=d.length;f<p;f++){var h=d[f];h&&""!==h&&s.classes.add(h)}(e.style||e.css)&&t.style().applyBypass(this,e.style||e.css),this.createEmitter(),(void 0===n||n)&&this.restore()}else r.error("An element must be of type `nodes` or `edges`; you specified `"+a+"`")}else r.error("An element must have a core reference and parameters set")}},function(t,e,n){"use strict";var r=n(1),i=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(t,e){return r.sort.descending(t.selector,e.selector)}),o="("+i.map(function(t){return t.selector}).join("|")+")";t.exports={stateSelectors:i,stateSelectorMatches:function t(e,n){return(t.lookup=t.lookup||function(){for(var t={},e=void 0,n=0;n<i.length;n++)t[(e=i[n]).selector]=e.matches;return t}())[e](n)},stateSelectorRegex:o}},function(t,e,n){"use strict";
/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var r=function(t,e){this.recycle(t,e)};function i(){return!1}function o(){return!0}r.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=i,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?o:i):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*r+a.x,y:n.y*r+a.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=o;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=o;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i},t.exports=r},function(t,e,n){"use strict";var r=n(1);t.exports=function(t,e){var n=t.cy().hasCompoundNodes();function i(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?r.MAX_INT:0}var o=i(t)-i(e);if(0!==o)return o;function a(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var s=a(t)-a(e);if(0!==s)return s;var l=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==l?l:t.poolIndex()-e.poolIndex()}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(6),a=function t(e){if(!(this instanceof t))return new t(e);r.core(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):i.error("A style must have a core reference")},s=a.prototype;s.instanceString=function(){return"style"},s.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},s.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},s.core=function(){return this._private.coreStyle},s.selector=function(t){var e="core"===t?null:new o(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},s.css=function(){var t=arguments;switch(t.length){case 1:for(var e=t[0],n=0;n<this.properties.length;n++){var r=this.properties[n],o=e[r.name];void 0===o&&(o=e[i.dash2camel(r.name)]),void 0!==o&&this.cssRule(r.name,o)}break;case 2:this.cssRule(t[0],t[1])}return this},s.style=s.css,s.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},s.append=function(t){return r.stylesheet(t)?t.appendToStyle(this):r.array(t)?this.appendFromJson(t):r.string(t)&&this.appendFromString(t),this},a.fromJson=function(t,e){var n=new a(t);return n.fromJson(e),n},a.fromString=function(t,e){return new a(t).fromString(e)},[n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92)].forEach(function(t){i.extend(s,t)}),a.types=s.types,a.properties=s.properties,t.exports=a},function(t,e,n){"use strict";var r=n(1);t.exports={setupDequeueing:function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var i=r.debounce(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold),o=t.priority||r.noop;n.beforeRender(function(o,a){for(var s=r.performanceNow(),l=n.averageRedrawTime,c=n.lastRedrawTime,u=[],d=n.cy.extent(),f=n.getPixelRatio();;){var p=r.performanceNow(),h=p-s,g=p-a;if(c<1e3/60){var m=1e3/60-(o?l:0);if(g>=t.deqFastCost*m)break}else if(o){if(h>=t.deqCost*c||h>=t.deqAvgCost*l)break}else if(g>=t.deqNoDrawCost*(1e3/60))break;var v=t.deq(e,f,d);if(!(v.length>0))break;for(var y=0;y<v.length;y++)u.push(v[y])}u.length>0&&(t.onDeqd(e,u),!o&&t.shouldRedraw(e,u,f,d)&&i())},o(e))}}}}},function(t,e,n){"use strict";var r=n(0),i=n(12),o=n(94),a=n(136),s=function(t){return void 0===t&&(t={}),r.plainObject(t)?new i(t):r.string(t)?o.apply(o,arguments):void 0};s.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(s),t.apply(null,e),this},s.version=n(137),s.stylesheet=s.Stylesheet=a,t.exports=s},function(t,e,n){"use strict";var r=n(0);t.exports={hex2tuple:function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e=void 0,n=void 0,r=void 0;return 4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),[e,n,r]}},hsl2tuple:function(t){var e=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0;function c(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var u=new RegExp("^"+this.regex.hsla+"$").exec(t);if(u){if((n=parseInt(u[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(u[2]))<0||r>100)return;if(r/=100,(i=parseFloat(u[3]))<0||i>100)return;if(i/=100,void 0!==(o=u[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)a=s=l=Math.round(255*i);else{var d=i<.5?i*(1+r):i+r-i*r,f=2*i-d;a=Math.round(255*c(f,d,n+1/3)),s=Math.round(255*c(f,d,n)),l=Math.round(255*c(f,d,n-1/3))}e=[a,s,l,o]}return e},rgb2tuple:function(t){var e=void 0,n=new RegExp("^"+this.regex.rgba+"$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;e.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var l=n[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;e.push(l)}}return e},colorname2tuple:function(t){return this.colors[t.toLowerCase()]},color2tuple:function(t){return(r.array(t)?t:null)||this.colorname2tuple(t)||this.hex2tuple(t)||this.rgb2tuple(t)||this.hsl2tuple(t)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},function(t,e,n){"use strict";var r=n(0);t.exports={mapEmpty:function(t){return null==t||0===Object.keys(t).length},pushMap:function(t){var e=this.getMap(t);null==e?this.setMap(this.extend({},t,{value:[t.value]})):e.push(t.value)},setMap:function(t){for(var e=t.map,n=t.keys,i=n.length,o=0;o<i;o++){var a=n[o];r.plainObject(a)&&this.error("Tried to set map with object key"),o<n.length-1?(null==e[a]&&(e[a]={}),e=e[a]):e[a]=t.value}},getMap:function(t){for(var e=t.map,n=t.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(r.plainObject(a)&&this.error("Tried to get map with object key"),null==(e=e[a]))return e}return e},deleteMap:function(t){for(var e=t.map,n=t.keys,i=n.length,o=t.keepChildren,a=0;a<i;a++){var s=n[a];if(r.plainObject(s)&&this.error("Tried to delete map with object key"),a===t.keys.length-1)if(o)for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];o[u]||(e[u]=void 0)}else e[s]=void 0;else e=e[s]}}}},function(t,e,n){"use strict";var r="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))";t.exports={regex:{number:r,rgba:"rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)",rgbaNoBackRefs:"rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)",hsla:"hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)",hslaNoBackRefs:"hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)",hex3:"\\#[0-9a-fA-F]{3}",hex6:"\\#[0-9a-fA-F]{6}"}}},function(t,e,n){"use strict";var r=n(13),i=n(0);t.exports={camel2dash:r(function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),dash2camel:r(function(t){return t.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),prependCamel:r(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),capitalize:function(t){return i.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)}}},function(t,e,n){"use strict";var r=n(3),i=r?r.performance:null,o={},a=i&&i.now?function(){return i.now()}:function(){return Date.now()},s=function(){if(r){if(r.requestAnimationFrame)return function(t){r.requestAnimationFrame(t)};if(r.mozRequestAnimationFrame)return function(t){r.mozRequestAnimationFrame(t)};if(r.webkitRequestAnimationFrame)return function(t){r.webkitRequestAnimationFrame(t)};if(r.msRequestAnimationFrame)return function(t){r.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(a())},1e3/60)}}();o.requestAnimationFrame=function(t){s(t)},o.performanceNow=a,o.debounce=n(26),o.now=function(){return Date.now()},t.exports=o},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t,e){return t<e?-1:t>e?1:0}t.exports={sort:{ascending:r,descending:function(t,e){return-1*r(t,e)}}}},function(t,e,n){"use strict";function r(){this._obj={}}var i=r.prototype;i.set=function(t,e){this._obj[t]=e},i.delete=function(t){this._obj[t]=null},i.has=function(t){return null!=this._obj[t]},i.get=function(t){return this._obj[t]},t.exports=r},function(t,e,n){"use strict";var r=n(1),i={};[n(30),n(31),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41)].forEach(function(t){r.extend(i,t)}),t.exports=i},function(t,e,n){"use strict";var r=n(0),i=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,i){var o;r.plainObject(e)&&!r.elementOrCollection(e)&&(e=(o=e).roots||o.root,n=o.visit,i=o.directed),i=2!==arguments.length||r.fn(n)?i:n,n=r.fn(n)?n:function(){};for(var a,s=this._private.cy,l=e=r.string(e)?this.filter(e):e,c=[],u=[],d={},f={},p={},h=0,g=this.nodes(),m=this.edges(),v=0;v<l.length;v++)l[v].isNode()&&(c.unshift(l[v]),t.bfs&&(p[l[v].id()]=!0,u.push(l[v])),f[l[v].id()]=0);for(;0!==c.length;){l=t.bfs?c.shift():c.pop();if(t.dfs){if(p[l.id()])continue;p[l.id()]=!0,u.push(l)}var y,b=f[l.id()],w=d[l.id()],_=null==w?void 0:w.connectedNodes().not(l)[0];if(!0===(y=n(l,w,_,h++,b))){a=l;break}if(!1===y)break;var x=l.connectedEdges(i?function(t){return t.data("source")===l.id()}:void 0).intersect(m);for(v=0;v<x.length;v++){var S=x[v],C=S.connectedNodes(function(t){return t.id()!==l.id()}).intersect(g);0===C.length||p[C.id()]||(C=C[0],c.push(C),t.bfs&&(p[C.id()]=!0,u.push(C)),d[C.id()]=S,f[C.id()]=f[l.id()]+1)}}var E=[];for(v=0;v<u.length;v++){var T=u[v],M=d[T.id()];M&&E.push(M),E.push(T)}return{path:s.collection(E,{unique:!0}),found:s.collection(a)}}},o={breadthFirstSearch:i({bfs:!0}),depthFirstSearch:i({dfs:!0})};o.bfs=o.breadthFirstSearch,o.dfs=o.depthFirstSearch,t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(9),o={dijkstra:function(t,e,n){var o;r.plainObject(t)&&!r.elementOrCollection(t)&&(t=(o=t).root,e=o.weight,n=o.directed);var a=this._private.cy;e=r.fn(e)?e:function(){return 1};for(var s=r.string(t)?this.filter(t)[0]:t[0],l={},c={},u={},d=this.edges().filter(function(t){return!t.isLoop()}),f=this.nodes(),p=function(t){return l[t.id()]},h=function(t,e){l[t.id()]=e,g.updateItem(t)},g=new i(function(t,e){return p(t)-p(e)}),m=0;m<f.length;m++){var v=f[m];l[v.id()]=v.same(s)?0:1/0,g.push(v)}for(var y=function(t,r){for(var i,o=(n?t.edgesTo(r):t.edgesWith(r)).intersect(d),a=1/0,s=0;s<o.length;s++){var l=o[s],c=e(l);(c<a||!i)&&(a=c,i=l)}return{edge:i,dist:a}};g.size()>0;){var b=g.pop(),w=p(b),_=b.id();if(u[_]=w,w!==1/0){var x=b.neighborhood().intersect(f);for(m=0;m<x.length;m++){var S=x[m],C=S.id(),E=y(b,S),T=w+E.dist;T<p(S)&&(h(S,T),c[C]={node:b,edge:E.edge})}}}return{distanceTo:function(t){var e=r.string(t)?f.filter(t)[0]:t[0];return u[e.id()]},pathTo:function(t){var e=r.string(t)?f.filter(t)[0]:t[0],n=[],i=e;if(e.length>0)for(n.unshift(e);c[i.id()];){var o=c[i.id()];n.unshift(o.edge),n.unshift(o.node),i=o.node}return a.collection(n)}}}};t.exports=o},function(t,e){t.exports=n},function(t,e,n){"use strict";var r=n(0),i={kruskal:function(t){var e=this.cy();function n(t){for(var e=0;e<o.length;e++){var n=o[e];if(n.anySame(t))return{eles:n,index:e}}}t=r.fn(t)?t:function(){return 1};for(var i=e.collection(e,[]),o=[],a=this.nodes(),s=0;s<a.length;s++)o.push(a[s].collection());var l=this.edges().toArray().sort(function(e,n){return t(e)-t(n)});for(s=0;s<l.length;s++){var c=l[s],u=c.source()[0],d=c.target()[0],f=n(u),p=n(d);f.index!==p.index&&(i=i.add(c),o[f.index]=f.eles.add(p.eles),o.splice(p.index,1))}return a.add(i)}};t.exports=i},function(t,e,n){"use strict";var r=n(0),i={aStar:function(t){t=t||{};var e=function t(e,n,r,o){if(e==n)return o.unshift(i.getElementById(n)),o;if(n in r){var a=r[n],s=g[n];return o.unshift(i.getElementById(s)),o.unshift(i.getElementById(n)),t(e,a,r,o)}},n=function(t,e){if(0!==t.length){for(var n=0,r=e[t[0]],i=1;i<t.length;i++){var o=e[t[i]];o<r&&(r=o,n=i)}return n}},i=this._private.cy;if(null!=t&&null!=t.root){var o=r.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.goal){var a=r.string(t.goal)?this.filter(t.goal)[0]:t.goal[0];if(null!=t.heuristic&&r.fn(t.heuristic))var s=t.heuristic;else s=function(){return 0};if(null!=t.weight&&r.fn(t.weight))var l=t.weight;else l=function(t){return 1};if(null!=t.directed)var c=t.directed;else c=!1;var u=o.id(),d=a.id(),f=[],p=[u],h={},g={},m={},v={};m[u]=0,v[u]=s(o);for(var y=0;p.length>0;){var b=n(p,v),w=i.getElementById(p[b]),_=w.id();if(y++,_==d){var x=e(u,d,h,[]);return{found:!0,distance:m[_],path:this.spawn(x),steps:y}}f.push(_),p.splice(b,1);for(var S=w._private.edges,C=0;C<S.length;C++){var E=S[C];if(this.hasElementWithId(E.id())&&(!c||E.data("source")===_)){var T=E.source(),M=E.target(),k=T.id()!==_?T:M,A=k.id();if(this.hasElementWithId(A)&&-1==f.indexOf(A)){var I=m[_]+l(E);-1!=p.indexOf(A)?I<m[A]&&(m[A]=I,v[A]=I+s(k),h[A]=_):(m[A]=I,v[A]=I+s(k),p.push(A),h[A]=_,g[A]=E.id())}}}}return{found:!1,distance:void 0,path:void 0,steps:y}}}}};t.exports=i},function(t,e,n){"use strict";var r=n(0),i={floydWarshall:function(t){t=t||{};var e=this.cy();if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else n=function(t){return 1};if(null!=t.directed)var i=t.directed;else i=!1;for(var o=this.edges().stdFilter(function(t){return!t.isLoop()}),a=this.nodes(),s=a.length,l={},c=0;c<s;c++)l[a[c].id()]=c;var u=[];for(c=0;c<s;c++){for(var d=new Array(s),f=0;f<s;f++)d[f]=c==f?0:1/0;u.push(d)}var p=[],h=[],g=function(t){for(var e=0;e<s;e++){for(var n=new Array(s),r=0;r<s;r++)n[r]=void 0;t.push(n)}};g(p),g(h);for(c=0;c<o.length;c++){var m=l[o[c].source().id()],v=l[o[c].target().id()],y=n(o[c]);u[m][v]>y&&(u[m][v]=y,p[m][v]=v,h[m][v]=o[c])}if(!i)for(c=0;c<o.length;c++){m=l[o[c].target().id()],v=l[o[c].source().id()],y=n(o[c]);u[m][v]>y&&(u[m][v]=y,p[m][v]=v,h[m][v]=o[c])}for(var b=0;b<s;b++)for(c=0;c<s;c++)for(f=0;f<s;f++)u[c][b]+u[b][f]<u[c][f]&&(u[c][f]=u[c][b]+u[b][f],p[c][f]=p[c][b]);var w=[];for(c=0;c<s;c++)w.push(a[c].id());return{distance:function(t,n){if(r.string(t))var i=e.filter(t)[0].id();else i=t.id();if(r.string(n))var o=e.filter(n)[0].id();else o=n.id();return u[l[i]][l[o]]},path:function(t,n){if(r.string(t))var i=e.filter(t)[0].id();else i=t.id();if(r.string(n))var o=e.filter(n)[0].id();else o=n.id();var a=function(t,n,r,i,o){if(t===n)return e.getElementById(i[t]);if(void 0!==r[t][n]){for(var a=[e.getElementById(i[t])],s=t;t!==n;){s=t,t=r[t][n];var l=o[s][t];a.push(l),a.push(e.getElementById(i[t]))}return a}}(l[i],l[o],p,w,h);return e.collection(a)}}}};t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(1),o={bellmanFord:function(t){var e=this;if(null!=(t=t||{}).weight&&r.fn(t.weight))var n=t.weight;else n=function(t){return 1};if(null!=t.directed)var o=t.directed;else o=!1;if(null!=t.root){if(r.string(t.root))var a=this.filter(t.root)[0];else a=t.root[0];for(var s=this._private.cy,l=this.edges().stdFilter(function(t){return!t.isLoop()}),c=this.nodes(),u=c.length,d={},f=0;f<u;f++)d[c[f].id()]=f;var p=[],h=[],g=[];for(f=0;f<u;f++)c[f].id()===a.id()?p[f]=0:p[f]=1/0,h[f]=void 0;var m=!1;for(f=1;f<u;f++){m=!1;for(var v=0;v<l.length;v++){var y,b=d[l[v].source().id()],w=d[l[v].target().id()],_=n(l[v]);if((y=p[b]+_)<p[w]&&(p[w]=y,h[w]=b,g[w]=l[v],m=!0),!o)(y=p[w]+_)<p[b]&&(p[b]=y,h[b]=w,g[b]=l[v],m=!0)}if(!m)break}if(m)for(v=0;v<l.length;v++){b=d[l[v].source().id()],w=d[l[v].target().id()],_=n(l[v]);if(p[b]+_<p[w])return i.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}var x=[];for(f=0;f<u;f++)x.push(c[f].id());return{distanceTo:function(t){if(r.string(t))var e=s.filter(t)[0].id();else e=t.id();return p[d[e]]},pathTo:function(t){if(r.string(t))var n=s.filter(t)[0].id();else n=t.id();var i=function(t,e,n,r,i,o){for(;;){if(i.push(s.getElementById(r[n])),i.push(o[n]),e===n)return i;var a=t[n];if(void 0===a)return;n=a}}(h,d[a.id()],d[n],x,[],g);return null!=i&&i.reverse(),e.spawn(i)},hasNegativeWeightCycle:!1}}}};t.exports=o},function(t,e,n){"use strict";var r=n(1),i={kargerStein:function(t){t=t||{};var e=function t(e,n,r,i){return r<=i?n:t(e,function(t,e,n){for(var r=n[t],i=r[1],o=r[2],a=e[i],s=e[o],l=n.filter(function(t){return!(e[t[1]]===a&&e[t[2]]===s||e[t[1]]===s&&e[t[2]]===a)}),c=0;c<l.length;c++){var u=l[c];u[1]===s?(l[c]=u.slice(0),l[c][1]=a):u[2]===s&&(l[c]=u.slice(0),l[c][2]=a)}for(c=0;c<e.length;c++)e[c]===s&&(e[c]=a);return l}(Math.floor(Math.random()*n.length),e,n),r-1,i)},n=this._private.cy,i=this.edges().stdFilter(function(t){return!t.isLoop()}),o=this.nodes(),a=o.length,s=i.length,l=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),c=Math.floor(a/Math.sqrt(2));if(!(a<2)){for(var u={},d=0;d<a;d++)u[o[d].id()]=d;var f=[];for(d=0;d<s;d++){var p=i[d];f.push([d,u[p.source().id()],u[p.target().id()]])}var h,g=1/0,m=[];for(d=0;d<a;d++)m.push(d);for(var v=0;v<=l;v++){var y=m.slice(0),b=e(y,f,a,c),w=y.slice(0),_=e(y,b,c,2),x=e(w,b,c,2);_.length<=x.length&&_.length<g?(g=_.length,h=[_,y]):x.length<=_.length&&x.length<g&&(g=x.length,h=[x,w])}var S=h[0].map(function(t){return i[t[0]]}),C=[],E=[],T=h[1][0];for(d=0;d<h[1].length;d++){h[1][d]===T?C.push(o[d]):E.push(o[d])}return{cut:this.spawn(n,S),partition1:this.spawn(C),partition2:this.spawn(E)}}r.error("At least 2 nodes are required for Karger-Stein algorithm")}};t.exports=i},function(t,e,n){"use strict";var r=n(0),i={pageRank:function(t){var e=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(r=0;r<e;r++)t[r]=t[r]/n};if(null!=(t=t||{})&&null!=t.dampingFactor)var n=t.dampingFactor;else n=.8;if(null!=t&&null!=t.precision)var i=t.precision;else i=1e-6;if(null!=t&&null!=t.iterations)var o=t.iterations;else o=200;if(null!=t&&null!=t.weight&&r.fn(t.weight))var a=t.weight;else a=function(t){return 1};for(var s=this._private.cy,l=this.edges().stdFilter(function(t){return!t.isLoop()}),c=this.nodes(),u=c.length,d=l.length,f={},p=0;p<u;p++)f[c[p].id()]=p;var h=[],g=[],m=(1-n)/u;for(p=0;p<u;p++){for(var v=[],y=0;y<u;y++)v.push(0);h.push(v),g.push(0)}for(p=0;p<d;p++){var b=l[p],w=f[b.source().id()],_=f[b.target().id()],x=a(b);h[_][w]+=x,g[w]+=x}var S=1/u+m;for(y=0;y<u;y++)if(0===g[y])for(p=0;p<u;p++)h[p][y]=S;else for(p=0;p<u;p++)h[p][y]=h[p][y]/g[y]+m;var C,E=[],T=[];for(p=0;p<u;p++)E.push(1),T.push(0);for(var M=0;M<o;M++){var k=T.slice(0);for(p=0;p<u;p++)for(y=0;y<u;y++)k[p]+=h[p][y]*E[y];e(k),C=E,E=k;var A=0;for(p=0;p<u;p++)A+=Math.pow(C[p]-E[p],2);if(A<i)break}return{rank:function(t){if(r.string(t))var e=s.filter(t)[0].id();else e=t.id();return E[f[e]]}}}};t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(1),o={degreeCentralityNormalized:function(t){t=t||{};var e=this.cy();if(null!=t.directed)var n=t.directed;else n=!1;var o=this.nodes(),a=o.length;if(n){var s={},l={},c=0,u=0;for(p=0;p<a;p++){h=o[p],g=this.degreeCentrality(i.extend({},t,{root:h}));c<g.indegree&&(c=g.indegree),u<g.outdegree&&(u=g.outdegree),s[h.id()]=g.indegree,l[h.id()]=g.outdegree}return{indegree:function(t){if(0==c)return 0;if(r.string(t))t=e.filter(t)[0].id();else t=t.id();return s[t]/c},outdegree:function(t){if(0==u)return 0;if(r.string(t))t=e.filter(t)[0].id();else t=t.id();return l[t]/u}}}for(var d={},f=0,p=0;p<a;p++){var h=o[p],g=this.degreeCentrality(i.extend({},t,{root:h}));f<g.degree&&(f=g.degree),d[h.id()]=g.degree}return{degree:function(t){if(0==f)return 0;if(r.string(t))t=e.filter(t)[0].id();else t=t.id();return d[t]/f}}},degreeCentrality:function(t){if(null!=(t=t||{})&&null!=t.root){var e=r.string(t.root)?this.filter(t.root)[0]:t.root[0];if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else n=function(t){return 1};if(null!=t.directed)var i=t.directed;else i=!1;if(null!=t.alpha&&r.number(t.alpha))var o=t.alpha;else o=0;if(i){var a=e.connectedEdges('edge[target = "'+e.id()+'"]').intersection(this),s=e.connectedEdges('edge[source = "'+e.id()+'"]').intersection(this),l=a.length,c=s.length,u=0,d=0;for(g=0;g<a.length;g++){u+=n(a[g])}for(g=0;g<s.length;g++){d+=n(s[g])}return{indegree:Math.pow(l,1-o)*Math.pow(u,o),outdegree:Math.pow(c,1-o)*Math.pow(d,o)}}for(var f=e.connectedEdges().intersection(this),p=f.length,h=0,g=0;g<f.length;g++){h+=n(f[g])}return{degree:Math.pow(p,1-o)*Math.pow(h,o)}}}};o.dc=o.degreeCentrality,o.dcn=o.degreeCentralityNormalised=o.degreeCentralityNormalized,t.exports=o},function(t,e,n){"use strict";var r=n(0),i={closenessCentralityNormalized:function(t){t=t||{};var e=this.cy(),n=t.harmonic;void 0===n&&(n=!0);for(var i={},o=0,a=this.nodes(),s=this.floydWarshall({weight:t.weight,directed:t.directed}),l=0;l<a.length;l++){for(var c=0,u=0;u<a.length;u++)if(l!=u){var d=s.distance(a[l],a[u]);c+=n?1/d:d}n||(c=1/c),o<c&&(o=c),i[a[l].id()]=c}return{closeness:function(t){if(0==o)return 0;if(r.string(t))t=e.filter(t)[0].id();else t=t.id();return i[t]/o}}},closenessCentrality:function(t){if(null!=(t=t||{}).root){if(r.string(t.root))var e=this.filter(t.root)[0];else e=t.root[0];if(null!=t.weight&&r.fn(t.weight))var n=t.weight;else n=function(){return 1};if(null!=t.directed&&r.bool(t.directed))var i=t.directed;else i=!1;var o=t.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:e,weight:n,directed:i}),s=0,l=this.nodes(),c=0;c<l.length;c++)if(l[c].id()!=e.id()){var u=a.distanceTo(l[c]);s+=o?1/u:u}return o?s:1/s}}};i.cc=i.closenessCentrality,i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized,t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(9),o={betweennessCentrality:function(t){var e,n;t=t||{},r.fn(t.weight)?(n=t.weight,e=!0):e=!1;for(var o=null!=t.directed&&t.directed,a=this._private.cy,s=this.nodes(),l={},c={},u=0,d=function(t,e){c[t]=e,e>u&&(u=e)},f=function(t){return c[t]},p=0;p<s.length;p++){l[_=(x=s[p]).id()]=o?x.outgoers().nodes():x.openNeighborhood().nodes(),d(_,0)}for(var h=0;h<s.length;h++){var g=s[h].id(),m=[],v={},y={},b={},w=new i(function(t,e){return b[t]-b[e]});for(p=0;p<s.length;p++){var _;v[_=s[p].id()]=[],y[_]=0,b[_]=1/0}for(y[g]=1,b[g]=0,w.push(g);!w.empty();){var x=w.pop();if(m.push(x),e)for(var S=0;S<l[x].length;S++){var C=l[x][S],E=a.getElementById(x),T=n(E.edgesTo(C).length>0?E.edgesTo(C)[0]:C.edgesTo(E)[0]);C=C.id(),b[C]>b[x]+T&&(b[C]=b[x]+T,w.nodes.indexOf(C)<0?w.push(C):w.updateItem(C),y[C]=0,v[C]=[]),b[C]==b[x]+T&&(y[C]=y[C]+y[x],v[C].push(x))}else for(S=0;S<l[x].length;S++){C=l[x][S].id();b[C]==1/0&&(w.push(C),b[C]=b[x]+1),b[C]==b[x]+1&&(y[C]=y[C]+y[x],v[C].push(x))}}var M={};for(p=0;p<s.length;p++)M[s[p].id()]=0;for(;m.length>0;)for(C=m.pop(),S=0;S<v[C].length;S++){M[x=v[C][S]]=M[x]+y[x]/y[C]*(1+M[C]),C!=s[h].id()&&d(C,f(C)+M[C])}}var k={betweenness:function(t){if(r.string(t))t=a.filter(t).id();else t=t.id();return f(t)},betweennessNormalized:function(t){if(0==u)return 0;if(r.string(t))t=a.filter(t).id();else t=t.id();return f(t)/u}};return k.betweennessNormalised=k.betweennessNormalized,k}};o.bc=o.betweennessCentrality,t.exports=o},function(t,e,n){"use strict";var r=n(4),i={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop()};t.exports=i},function(t,e,n){"use strict";var r=n(1),i=n(44),o=n(2),a=n(0),s={animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var e=t[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var e=0;e<t.length;e++){t[e]._private.animation.queue=[]}return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=void 0!==this.length,s=n?this:[this],l=this._private.cy||this,c=!n,u=!c;if(!l.styleEnabled())return this;var d=l.style();if(t=r.assign({},t,e),0===Object.keys(t).length)return new i(s[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(u&&(t.style=d.getPropsList(t.style||t.css),t.css=void 0),u&&null!=t.renderedPosition){var f=t.renderedPosition,p=l.pan(),h=l.zoom();t.position=o.renderedToModelPosition(f,h,p)}if(c&&null!=t.panBy){var g=t.panBy,m=l.pan();t.pan={x:m.x+g.x,y:m.y+g.y}}var v=t.center||t.centre;if(c&&null!=v){var y=l.getCenterPan(v.eles,t.zoom);null!=y&&(t.pan=y)}if(c&&null!=t.fit){var b=t.fit,w=l.getFitViewport(b.eles||b.boundingBox,b.padding);null!=w&&(t.pan=w.pan,t.zoom=w.zoom)}if(c&&a.plainObject(t.zoom)){var _=l.getZoomedViewport(t.zoom);null!=_&&(_.zoomed&&(t.zoom=_.zoom),_.panned&&(t.pan=_.pan))}return new i(s[0],t)}},animate:function(){return function(t,e){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=r.extend({},t,e));for(var i=0;i<n.length;i++){var o=n[i],a=o.animated()&&(void 0===t.queue||t.queue);o.animation(t,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var o=n[i]._private,a=o.animation.current,s=0;s<a.length;s++){var l=a[s]._private;e&&(l.duration=0)}t&&(o.animation.queue=[]),e||(o.animation.current=[])}return r.notify({eles:this,type:"draw"}),this}}};t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(5),a=function(t,e,n){var o=this._private=r.extend({duration:1e3},e,n);o.target=t,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&i.fn(o.complete)&&o.completes.push(o.complete),this.length=1,this[0]=this},s=a.prototype;r.extend(s,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),i.elementOrCollection(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],o=i.name,a=t.startStyle[o];t.startStyle[o]=i,t.style[r]=a}return e&&this.play(),this},promise:function(t){var e=this._private,n=void 0;switch(t){case"frame":n=e.frames;break;default:case"complete":case"completed":n=e.completes}return new o(function(t,e){n.push(function(){t()})})}}),s.complete=s.completed,t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(0),o={data:function(t){return t=r.extend({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,o=void 0!==this.length,a=o?this:[this],s=o?this[0]:this;if(i.string(e)){if(r.allowGetting&&void 0===n){var l=void 0;return s&&(r.beforeGet(s),l=s._private[r.field][e]),l}if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var c=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n);r.beforeSet(this,c);for(var u=0,d=a.length;u<d;u++){var f=a[u];r.canSet(f)&&(f._private[r.field][e]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&i.plainObject(e)){var p=e,h=void 0,g=void 0,m=Object.keys(p);r.beforeSet(this,p);for(var v=0;v<m.length;v++){if(g=p[h=m[v]],!r.immutableKeys[h])for(var y=0;y<a.length;y++){var b=a[y];r.canSet(b)&&(b._private[r.field][h]=g)}}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&i.fn(e)){var w=e;this.on(r.bindingEvent,w)}else if(r.allowGetting&&void 0===e){var _=void 0;return s&&(r.beforeGet(s),_=s._private[r.field]),_}return this}},removeData:function(t){return t=r.extend({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=void 0!==this.length?this:[this];if(i.string(e)){for(var o=e.split(/\s+/),a=o.length,s=0;s<a;s++){var l=o[s];if(!i.emptyString(l))if(!n.immutableKeys[l])for(var c=0,u=r.length;c<u;c++)r[c]._private[n.field][l]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===e){for(var d=0,f=r.length;d<f;d++)for(var p=r[d]._private[n.field],h=Object.keys(p),g=0;g<h.length;g++){var m=h[g];!n.immutableKeys[m]&&(p[m]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}};t.exports=o},function(t,e,n){"use strict";var r=n(5),i={eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,i=Array.prototype.slice.call(arguments,0);return new r(function(t,e){var r=i.concat([function(e){n.off.apply(n,o),t(e)}]),o=r.concat([]);n.on.apply(n,r)})}}};t.exports=i},function(t,e,n){"use strict";var r=n(8),i={classes:function(t){t=(t||"").match(/\S+/g)||[];for(var e=this,n=[],i=new r(t),o=function(t){var o=e[t],a=o._private,s=a.classes,l=!1;i.forEach(function(t){s.has(t)||(l=!0)}),l||s.forEach(function(t){i.has(t)||(l=!0)}),l&&(a.classes=new r(i),n.push(o))},a=0;a<e.length;a++)o(a);return n.length>0&&this.spawn(n).updateStyle().emit("class"),e},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){for(var n=t.match(/\S+/g)||[],r=[],i=0,o=this.length;i<o;i++)for(var a=this[i],s=!1,l=0;l<n.length;l++){var c=n[l],u=a._private.classes,d=u.has(c);e||void 0===e&&!d?(u.add(c),d||s||(r.push(a),s=!0)):(u.delete(c),d&&!s&&(r.push(a),s=!0))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};t.exports=i},function(t,e,n){"use strict";n(0);var r=n(6),i={allAre:function(t){var e=new r(t);return this.every(function(t){return e.matches(t)})},is:function(t){var e=new r(t);return this.some(function(t){return e.matches(t)})},some:function(t,e){for(var n=0;n<this.length;n++){if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0}return!1},every:function(t,e){for(var n=0;n<this.length;n++){if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1}return!0},same:function(t){return t=this.cy().collection(t),this.length===t.length&&this.every(function(e){return t.hasElementWithId(e.id())})},anySame:function(t){return t=this.cy().collection(t),this.some(function(e){return t.hasElementWithId(e.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every(function(t){return e.hasElementWithId(t.id())})},contains:function(t){var e=this;return(t=this.cy().collection(t)).every(function(t){return e.hasElementWithId(t.id())})}};i.allAreNeighbours=i.allAreNeighbors,i.has=i.contains,t.exports=i},function(t,e,n){"use strict";var r=n(1),i=n(50),o=n(10),a=function(t){for(var e=void 0,n=void 0,r=void 0,o=0;o<i.length;o++){var a=i[o],s=a.name,l=t.match(a.regexObj);if(null!=l){n=l,e=a,r=s;var c=l[0];t=t.substring(c.length);break}}return{expr:e,match:n,name:r,remaining:t}};t.exports={parse:function(t){var e=this._private.selectorText=t,n=this[0]=o();for(this.length=1,e=function(t){var e=t.match(/^\s+/);if(e){var n=e[0];t=t.substring(n.length)}return t}(e);;){var i=a(e);if(null==i.expr)return r.error("The selector `"+t+"`is invalid"),!1;var s=i.match.slice(1),l=i.expr.populate(this,n,s);if(!1===l)return!1;if(null!=l&&(n=l),(e=i.remaining).match(/^\s*$/))break}for(var c=0;c<this.length;c++){var u=this[c];if(null!=u.subject){for(;u.subject!==u;)if(null!=u.parent){var d=u.parent,f=u;f.parent=null,d.child=f,u=d}else{if(null==u.ancestor)return u.source||u.target||u.connectedNodes?(r.error("The selector `"+this.text()+"` can not contain a subject selector that applies to the source or target of an edge selector"),!1):(r.error("When adjusting references for the selector `"+this.text()+"`, neither parent nor ancestor was found"),!1);var p=u.ancestor,h=u;h.ancestor=null,p.descendant=h,u=p}this[c]=u.subject}}return!0}}},function(t,e,n){"use strict";var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(15).stateSelectorRegex,o=n(51),a=n(1),s=n(10),l=function(t){return t.replace(new RegExp("\\\\("+o.metaChar+")","g"),function(t,e){return e})},c=function(t,e,n){e===t[t.length-1]&&(t[t.length-1]=n)},u=[{name:"group",query:!0,regex:"("+o.group+")",populate:function(t,e,n){var i=r(n,1)[0];e.group="*"===i?i:i+"s"}},{name:"state",query:!0,regex:i,populate:function(t,e,n){var i=r(n,1)[0];e.colonSelectors.push(i)}},{name:"id",query:!0,regex:"\\#("+o.id+")",populate:function(t,e,n){var i=r(n,1)[0];e.ids.push(l(i))}},{name:"className",query:!0,regex:"\\.("+o.className+")",populate:function(t,e,n){var i=r(n,1)[0];e.classes.push(l(i))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+o.variable+")\\s*\\]",populate:function(t,e,n){var i=r(n,1)[0];e.data.push({field:l(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+o.variable+")\\s*("+o.comparatorOp+")\\s*("+o.value+")\\s*\\]",populate:function(t,e,n){var i=r(n,3),a=i[0],s=i[1],c=i[2];c=null!=new RegExp("^"+o.string+"$").exec(c)?c.substring(1,c.length-1):parseFloat(c),e.data.push({field:l(a),operator:s,value:c})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+o.boolOp+")\\s*("+o.variable+")\\s*\\]",populate:function(t,e,n){var i=r(n,2),o=i[0],a=i[1];e.data.push({field:l(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+o.meta+")\\s*("+o.comparatorOp+")\\s*("+o.number+")\\s*\\]\\]",populate:function(t,e,n){var i=r(n,3),o=i[0],a=i[1],s=i[2];e.meta.push({field:l(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:o.separator,populate:function(t){var e=t[t.length++]=s();return t.currentSubject=null,e}},{name:"directedEdge",separator:!0,regex:o.directedEdge,populate:function(t,e){var n=s(),r=e,i=s();return n.group="edges",n.target=i,n.source=r,n.subject=t.currentSubject,c(t,e,n),i}},{name:"undirectedEdge",separator:!0,regex:o.undirectedEdge,populate:function(t,e){var n=s(),r=e,i=s();return n.group="edges",n.connectedNodes=[r,i],n.subject=t.currentSubject,c(t,e,n),i}},{name:"child",separator:!0,regex:o.child,populate:function(t,e){var n=s();return n.parent=e,n.subject=t.currentSubject,c(t,e,n),n}},{name:"descendant",separator:!0,regex:o.descendant,populate:function(t,e){var n=s();return n.ancestor=e,n.subject=t.currentSubject,c(t,e,n),n}},{name:"subject",modifier:!0,regex:o.subject,populate:function(t,e){if(null!=t.currentSubject&&e.subject!=e)return a.error("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e,e.subject=e,t[t.length-1].subject=e}}];u.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)}),t.exports=u},function(t,e,n){"use strict";var r={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:n(1).regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};r.variable="(?:[\\w-]|(?:\\\\"+r.metaChar+"))+",r.value=r.string+"|"+r.number,r.className=r.variable,r.id=r.variable,function(){var t=void 0,e=void 0,n=void 0;for(t=r.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],r.comparatorOp+="|@"+e;for(t=r.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(r.comparatorOp+="|\\!"+e)}(),t.exports=r},function(t,e,n){"use strict";var r=n(15).stateSelectorMatches,i=n(0),o=function(t,e){for(var n=!0,r=0;r<t[e.name].length;r++){var o=t[e.name][r],a=o.operator,s=o.value,l=o.field,c=void 0,u=e.fieldValue(l);if(null!=a&&null!=s){var d=i.string(u)||i.number(u)?""+u:"",f=""+s,p=!1;a.indexOf("@")>=0&&(d=d.toLowerCase(),f=f.toLowerCase(),a=a.replace("@",""),p=!0);var h=!1;a.indexOf("!")>=0&&(a=a.replace("!",""),h=!0),p&&(s=f.toLowerCase(),u=d.toLowerCase());var g=!1;switch(a){case"*=":c=d.indexOf(f)>=0;break;case"$=":c=d.indexOf(f,d.length-f.length)>=0;break;case"^=":c=0===d.indexOf(f);break;case"=":c=u===s;break;case">":g=!0,c=u>s;break;case">=":g=!0,c=u>=s;break;case"<":g=!0,c=u<s;break;case"<=":g=!0,c=u<=s;break;default:c=!1}!h||null==u&&g||(c=!c)}else if(null!=a)switch(a){case"?":c=!!u;break;case"!":c=!u;break;case"^":c=void 0===u}else c=void 0!==u;if(!c){n=!1;break}}return n},a=function(t,e,n){if(null!=t){var r=!1;if(!e)return!1;n=n();for(var i=0;i<n.length;i++)if(s(t,n[i])){r=!0;break}return r}return!0},s=function(t,e){if(t.groupOnly)return"*"===t.group||t.group===e.group();if(null!=t.group&&"*"!=t.group&&t.group!=e.group())return!1;var n=e.cy(),i=void 0,s=!0;for(i=0;i<t.colonSelectors.length;i++){var l=t.colonSelectors[i];if(!(s=r(l,e)))break}if(!s)return!1;var c=!0;for(i=0;i<t.ids.length;i++){var u=t.ids[i],d=e.id();if(!(c=c&&u==d))break}if(!c)return!1;var f=!0;for(i=0;i<t.classes.length;i++){var p=t.classes[i];if(!(f=f&&e.hasClass(p)))break}if(!f)return!1;if(!o(t,{name:"data",fieldValue:function(t){return e.data(t)}}))return!1;if(!o(t,{name:"meta",fieldValue:function(t){return e[t]()}}))return!1;if(null!=t.collection&&!t.collection.hasElementWithId(e.id()))return!1;if(null!=t.filter&&e.collection().some(t.filter))return!1;var h=n.hasCompoundNodes(),g=function(){return e.source()},m=function(){return e.target()};if(!a(t.parent,h,function(){return e.parent()}))return!1;if(!a(t.ancestor,h,function(){return e.parents()}))return!1;if(!a(t.child,h,function(){return e.children()}))return!1;if(!a(t.descendant,h,function(){return e.descendants()}))return!1;if(!a(t.source,!0,g))return!1;if(!a(t.target,!0,m))return!1;if(t.connectedNodes){var v=t.connectedNodes[0],y=t.connectedNodes[1];if(a(v,!0,g)&&a(y,!0,m));else if(!a(v,!0,m)||!a(y,!0,g))return!1}return!0};t.exports={matches:function(t){if(this.invalid())return!1;for(var e=0;e<this.length;e++){var n=this[e];if(s(n,t))return!0}return!1},filter:function(t){var e=this,n=t.cy();if(e.invalid())return n.collection();if(1===e.length&&1===e[0].length&&1===e[0].ids.length)return t.getElementById(e[0].ids[0]).collection();var r=function(t){for(var n=0;n<e.length;n++){var r=e[n];if(s(r,t))return!0}return!1};return null==e.text()&&(r=function(){return!0}),t.filter(r)}}},function(t,e,n){"use strict";var r=n(8),i={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,{unique:!0}).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}n=n.parent()}return this.spawn(e,{unique:!0}).filter(t)},commonAncestors:function(t){for(var e=void 0,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(t){return t.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(t){return t.isChild()}).filter(t)},children:function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];e=e.concat(r._private.children)}return this.spawn(e,{unique:!0}).filter(t)},siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(e,{unique:!0}).filter(t)}};function o(t,e,n,i){for(var o=[],a=new r,s=t.cy().hasCompoundNodes(),l=0;l<t.length;l++){var c=t[l];n?o.push(c):s&&i(o,a,c)}for(;o.length>0;){var u=o.shift();e(u),a.add(u.id()),s&&i(o,a,u)}return t}function a(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}function s(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function l(t,e,n){s(t,e,n),a(t,e,n)}i.forEachDown=function(t){return o(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a)},i.forEachUp=function(t){return o(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s)},i.forEachUpAndDown=function(t){return o(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l)},i.ancestors=i.parents,t.exports=i},function(t,e,n){"use strict";var r,i=n(4),o=void 0;(o=r={data:i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:i.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:i.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=o.data,o.removeAttr=o.removeData,t.exports=r},function(t,e,n){"use strict";var r=n(1),i={};function o(t){return function(e){if(void 0===e&&(e=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,o=0;o<i.length;o++){var a=i[o];!e&&a.isLoop()||(n+=t(r,a))}return n}}}function a(t,e){return function(n){for(var r=void 0,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][t](n);void 0===a||void 0!==r&&!e(a,r)||(r=a)}return r}}r.extend(i,{degree:o(function(t,e){return e.source().same(e.target())?2:1}),indegree:o(function(t,e){return e.target().same(t)?1:0}),outdegree:o(function(t,e){return e.source().same(t)?1:0})}),r.extend(i,{minDegree:a("degree",function(t,e){return t<e}),maxDegree:a("degree",function(t,e){return t>e}),minIndegree:a("indegree",function(t,e){return t<e}),maxIndegree:a("indegree",function(t,e){return t>e}),minOutdegree:a("outdegree",function(t,e){return t<e}),maxOutdegree:a("outdegree",function(t,e){return t>e})}),r.extend(i,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}}),t.exports=i},function(t,e,n){"use strict";var r=n(1),i=n(57),o=n(58),a=n(59),s=n(60);t.exports=r.assign({},i,o,a,s)},function(t,e,n){"use strict";var r,i=n(4),o=n(0),a=n(2),s=void 0,l=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.isParent()&&!r.locked()){var i=r._private.position,o={x:e.x-i.x,y:e.y-i.y};t.children().shift(o)}}};(s=r={position:i.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:l,onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}}),silentPosition:i.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!1,validKeys:["x","y"],beforeSet:l,onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}}),positions:function(t,e){if(o.plainObject(t))e?this.silentPosition(t):this.position(t);else if(o.fn(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var a,s=this[i];(a=n(s,i))&&(e?s.silentPosition(a):s.position(a))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e){var n=void 0;if(o.plainObject(t)?n=t:o.string(t)&&o.number(e)&&((n={x:0,y:0})[t]=e),null!=n)for(var r=0;r<this.length;r++){var i=this[r],a=i.position();i.position({x:a.x+n.x,y:a.y+n.y})}return this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),s=r.pan(),l=o.plainObject(t)?t:void 0,c=void 0!==l||void 0!==e&&o.string(t);if(n&&n.isNode()){if(!c){var u=n.position();return l=a.modelToRenderedPosition(u,i,s),void 0===t?l:l[t]}for(var d=0;d<this.length;d++){var f=this[d];void 0!==e?f.position(t,(e-s[t])/i):void 0!==l&&f.position(a.renderedToModelPosition(l,i,s))}}else if(!c)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=o.plainObject(t)?t:void 0,a=void 0!==i||void 0!==e&&o.string(t),s=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var l=n.position(),c=s?n.parent():null,u=c&&c.length>0,d=u;u&&(c=c[0]);var f=d?c.position():{x:0,y:0};return i={x:l.x-f.x,y:l.y-f.y},void 0===t?i:i[t]}for(var p=0;p<this.length;p++){var h=this[p],g=s?h.parent():null,m=g&&g.length>0,v=m;m&&(g=g[0]);var y=v?g.position():{x:0,y:0};void 0!==e?h.position(t,e+y[t]):void 0!==i&&h.position({x:i.x+y.x,y:i.y+y.y})}}else if(!a)return;return this}}).modelPosition=s.point=s.position,s.modelPositions=s.points=s.positions,s.renderedPoint=s.renderedPosition,s.relativePoint=s.relativePosition,t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(2),a=void 0,s=void 0;a=s={},s.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,l=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},s.dirtyCompoundBoundsCache=function(){var t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp(function(t){t._private.compoundBoundsClean=!1,t.isParent()&&t.emit("bounds")}),this):this},s.updateCompoundBounds=function(){var t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(t.batching())return this;var e=[];function n(t){if(t.isParent()){var n=t._private,r=t.children(),i="include"===t.pstyle("compound-sizing-wrt-labels").value,o={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},a=r.boundingBox({includeLabels:i,includeOverlays:!1,useCache:!1}),s=n.position;0!==a.w&&0!==a.h||((a={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=s.x-a.w/2,a.x2=s.x+a.w/2,a.y1=s.y-a.h/2,a.y2=s.y+a.h/2);var l=o.width.left.value;"px"===o.width.left.units&&o.width.val>0&&(l=100*l/o.width.val);var c=o.width.right.value;"px"===o.width.right.units&&o.width.val>0&&(c=100*c/o.width.val);var u=o.height.top.value;"px"===o.height.top.units&&o.height.val>0&&(u=100*u/o.height.val);var d=o.height.bottom.value;"px"===o.height.bottom.units&&o.height.val>0&&(d=100*d/o.height.val);var f=y(o.width.val-a.w,l,c),p=f.biasDiff,h=f.biasComplementDiff,g=y(o.height.val-a.h,u,d),m=g.biasDiff,v=g.biasComplementDiff;n.autoPadding=function(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}(a.w,a.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),n.autoWidth=Math.max(a.w,o.width.val),s.x=(-p+a.x1+a.x2+h)/2,n.autoHeight=Math.max(a.h,o.height.val),s.y=(-m+a.y1+a.y2+v)/2,e.push(t)}function y(t,e,n){var r=0,i=0,o=e+n;return t>0&&o>0&&(r=e/o*t,i=n/o*t),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean||(n(i),t._private.batchingStyle||(o.compoundBoundsClean=!0))}return this};var l=function(t){return t===1/0||t===-1/0?0:t},c=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2)},u=function(t,e){return c(t,e.x1,e.y1,e.x2,e.y2)},d=function(t,e,n){return i.getPrefixedProperty(t,e,n)},f=function(t,e,n){if(!e.cy().headless()){var r=e._private.rstyle,i=r.arrowWidth/2,o=void 0,a=void 0;"none"!==e.pstyle(n+"-arrow-shape").value&&("source"===n?(o=r.srcX,a=r.srcY):"target"===n?(o=r.tgtX,a=r.tgtY):(o=r.midX,a=r.midY),c(t,o-i,a-i,o+i,a+i))}},p=function(t,e,n){if(!e.cy().headless()){var r=void 0;r=n?n+"-":"";var i=e._private,o=i.rstyle;if(e.pstyle(r+"label").strValue){var a=e.pstyle("text-halign"),s=e.pstyle("text-valign"),l=d(o,"labelWidth",n),u=d(o,"labelHeight",n),f=d(o,"labelX",n),p=d(o,"labelY",n),h=e.pstyle(r+"text-margin-x").pfValue,g=e.pstyle(r+"text-margin-y").pfValue,m=e.isEdge(),v=e.pstyle(r+"text-rotation"),y=e.pstyle("text-outline-width").pfValue,b=e.pstyle("text-border-width").pfValue/2,w=e.pstyle("text-background-padding").pfValue,_=u+2*w,x=l+2*w,S=x/2,C=_/2,E=void 0,T=void 0,M=void 0,k=void 0;if(m)E=f-S,T=f+S,M=p-C,k=p+C;else{switch(a.value){case"left":E=f-x,T=f;break;case"center":E=f-S,T=f+S;break;case"right":E=f,T=f+x}switch(s.value){case"top":M=p-_,k=p;break;case"center":M=p-C,k=p+C;break;case"bottom":M=p,k=p+_}}var A=m&&"autorotate"===v.strValue,I=null!=v.pfValue&&0!==v.pfValue;if(A||I){var O=A?d(i.rstyle,"labelAngle",n):v.pfValue,P=Math.cos(O),L=Math.sin(O),D=function(t,e){return{x:(t-=f)*P-(e-=p)*L+f,y:t*L+e*P+p}},N=D(E,M),R=D(E,k),F=D(T,M),B=D(T,k);E=Math.min(N.x,R.x,F.x,B.x),T=Math.max(N.x,R.x,F.x,B.x),M=Math.min(N.y,R.y,F.y,B.y),k=Math.max(N.y,R.y,F.y,B.y)}E+=h-Math.max(y,b),T+=h+Math.max(y,b),M+=g-Math.max(y,b),k+=g+Math.max(y,b),c(t,E,M,T,k)}return t}},h=function(t){return t?"t":"f"},g=function(t){var e="";return e+=h(t.incudeNodes),e+=h(t.includeEdges),e+=h(t.includeLabels),e+=h(t.includeOverlays)},m=function(t,e){var n=t._private,r=void 0,i=t.cy().headless(),a=e===v?y:g(e);return e.useCache&&!i&&n.bbCache&&n.bbCache[a]?r=n.bbCache[a]:(r=function(t,e){var n=t._private.cy,r=n.styleEnabled(),i=n.headless(),a={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0},s=t._private,u=r?t.pstyle("display").value:"element",d=t.isNode(),h=t.isEdge(),g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,_="none"!==u;if(_){var x=0;r&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(x=t.pstyle("overlay-padding").value);var S=0;if(r&&(S=t.pstyle("width").pfValue/2),d&&e.includeNodes){var C=t.position();b=C.x,w=C.y;var E=t.outerWidth()/2,T=t.outerHeight()/2;c(a,g=b-E-x,v=w-T-x,m=b+E+x,y=w+T+x)}else if(h&&e.includeEdges){var M=s.rstyle||{};if(r&&!i&&(g=Math.min(M.srcX,M.midX,M.tgtX),m=Math.max(M.srcX,M.midX,M.tgtX),v=Math.min(M.srcY,M.midY,M.tgtY),y=Math.max(M.srcY,M.midY,M.tgtY),c(a,g-=S,v-=S,m+=S,y+=S)),r&&!i&&"haystack"===t.pstyle("curve-style").strValue){var k=M.haystackPts||[];if(g=k[0].x,v=k[0].y,m=k[1].x,y=k[1].y,g>m){var A=g;g=m,m=A}if(v>y){var I=v;v=y,y=I}c(a,g-S,v-S,m+S,y+S)}else{for(var O=M.bezierPts||M.linePts||[],P=0;P<O.length;P++){var L=O[P];g=L.x-S,m=L.x+S,v=L.y-S,y=L.y+S,c(a,g,v,m,y)}if(0===O.length){var D=t.source().position(),N=t.target().position();if(g=D.x,m=N.x,v=D.y,y=N.y,g>m){var R=g;g=m,m=R}if(v>y){var F=v;v=y,y=F}c(a,g-=S,v-=S,m+=S,y+=S)}}}if(r&&e.includeEdges&&h&&(f(a,t,"mid-source"),f(a,t,"mid-target"),f(a,t,"source"),f(a,t,"target")),r&&"yes"===t.pstyle("ghost").value){var B=t.pstyle("ghost-offset-x").pfValue,j=t.pstyle("ghost-offset-y").pfValue;c(a,a.x1+B,a.y1+j,a.x2+B,a.y2+j)}r&&(g=a.x1,m=a.x2,v=a.y1,y=a.y2,c(a,g-x,v-x,m+x,y+x)),r&&e.includeLabels&&(p(a,t,null),h&&(p(a,t,"source"),p(a,t,"target")))}return a.x1=l(a.x1),a.y1=l(a.y1),a.x2=l(a.x2),a.y2=l(a.y2),a.w=l(a.x2-a.x1),a.h=l(a.y2-a.y1),a.w>0&&a.h>0&&_&&o.expandBoundingBox(a,1),a}(t,e),i||(n.bbCache=n.bbCache||{},n.bbCache[a]=r)),r},v={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeOverlays:!0,useCache:!0},y=g(v);function b(t){return{includeNodes:i.default(t.includeNodes,v.includeNodes),includeEdges:i.default(t.includeEdges,v.includeEdges),includeLabels:i.default(t.includeLabels,v.includeLabels),includeOverlays:i.default(t.includeOverlays,v.includeOverlays),useCache:i.default(t.useCache,v.useCache)}}s.boundingBox=function(t){if(1===this.length&&this[0]._private.bbCache&&(void 0===t||void 0===t.useCache||!0===t.useCache))return t=void 0===t?v:b(t),m(this[0],t);var e={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0},n=b(t=t||i.staticEmptyObject()),r=this.cy().styleEnabled();r&&this.recalculateRenderedStyle(n.useCache),this.updateCompoundBounds();for(var o={},a=0;a<this.length;a++){var s=this[a];if(r&&s.isEdge()&&"bezier"===s.pstyle("curve-style").strValue&&!o[s.id()]){for(var c=s.parallelEdges(),d=0;d<c.length;d++)o[c[d].id()]=!0;c.recalculateRenderedStyle(n.useCache)}u(e,m(s,n))}return e.x1=l(e.x1),e.y1=l(e.y1),e.x2=l(e.x2),e.y2=l(e.y2),e.w=l(e.x2-e.x1),e.h=l(e.y2-e.y1),e},s.boundingBoxAt=function(t){var e=this.nodes();if(r.plainObject(t)){var n=t;t=function(){return n}}for(var i=0;i<e.length;i++){var o=e[i],a=o._private,s=a.position,l=t.call(o,o,i);a.bbAtOldPos={x:s.x,y:s.y},l&&(s.x=l.x,s.y=l.y)}this.emit("dirty"),e.dirtyCompoundBoundsCache().updateCompoundBounds();for(var c=this.boundingBox({useCache:!1}),u=0;u<e.length;u++){var d=e[u],f=d._private,p=d._private.position,h=f.bbAtOldPos;p.x=h.x,p.y=h.y}return e.dirtyCompoundBoundsCache(),this.emit("dirty"),c},a.boundingbox=a.boundingBox,a.renderedBoundingbox=a.renderedBoundingBox,t.exports=s},function(t,e,n){"use strict";var r=n(1),i=void 0,o=void 0;i=o={};var a=function(t){t.uppercaseName=r.capitalize(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=r.capitalize(t.outerName),i[t.name]=function(){var e=this[0],n=e._private,r=n.cy._private.styleEnabled;if(e){if(!r)return 1;if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var i=e.pstyle(t.name);switch(i.strValue){case"label":return e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0;default:return i.pfValue}}},i["outer"+t.uppercaseName]=function(){var e=this[0],n=e._private.cy._private.styleEnabled;if(e)return n?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},i["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},i["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};a({name:"width"}),a({name:"height"}),o.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},t.exports=o},function(t,e,n){"use strict";var r=function(t,e){if(t.isEdge())return e(t.renderer())};t.exports={controlPoints:function(){var t=this;return r(this,function(e){return e.getControlPoints(t)})},segmentPoints:function(){var t=this;return r(this,function(e){return e.getSegmentPoints(t)})},sourceEndpoint:function(){var t=this;return r(this,function(e){return e.getSourceEndpoint(t)})},targetEndpoint:function(){var t=this;return r(this,function(e){return e.getTargetEndpoint(t)})},midpoint:function(){var t=this;return r(this,function(e){return e.getEdgeMidpoint(t)})}}},function(t,e,n){"use strict";var r=n(11),i=n(4),o=n(0),a=n(1),s=n(6),l={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&o.element(n.target)&&r.matches(n.target)},eventFields:function(t){return{cy:t.cy(),target:t}},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},c=function(t){return o.string(t)?new s(t):t},u={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new r(a.assign({context:e},l)))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=0;r<this.length;r++){this[r].emitter().on(t,c(e),n)}return this},removeListener:function(t,e,n){for(var r=0;r<this.length;r++){this[r].emitter().removeListener(t,c(e),n)}return this},one:function(t,e,n){for(var r=0;r<this.length;r++){this[r].emitter().one(t,c(e),n)}return this},once:function(t,e,n){for(var r=0;r<this.length;r++){this[r].emitter().on(t,c(e),n,{once:!0,onceCollection:this})}},emit:function(t,e){for(var n=0;n<this.length;n++){this[n].emitter().emit(t,e)}return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify({type:t,eles:this}),this.emit(t,e),this}};i.eventAliasesOn(u),t.exports=u},function(t,e,n){"use strict";var r=n(0),i=n(6),o={nodes:function(t){return this.filter(function(t){return t.isNode()}).filter(t)},edges:function(t){return this.filter(function(t){return t.isEdge()}).filter(t)},filter:function(t,e){if(void 0===t)return this;if(r.string(t)||r.elementOrCollection(t))return new i(t).filter(this);if(r.fn(t)){for(var n=this.spawn(),o=0;o<this.length;o++){var a=this[o];(e?t.apply(e,[a,o,this]):t(a,o,this))&&n.merge(a)}return n}return this.spawn()},not:function(t){if(t){r.string(t)&&(t=this.filter(t));for(var e=[],n=t._private.map,i=0;i<this.length;i++){var o=this[i];n.has(o.id())||e.push(o)}return this.spawn(e)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(r.string(t)){var e=t;return this.filter(e)}for(var n=[],i=t,o=this.length<t.length,a=o?i._private.map:this._private.map,s=o?this:i,l=0;l<s.length;l++){var c=s[l]._private.data.id,u=a.get(c);u&&n.push(u.ele)}return this.spawn(n)},xor:function(t){var e=this._private.cy;r.string(t)&&(t=e.$(t));var n=[],i=t,o=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],o=i._private.data.id;e.hasElementWithId(o)||n.push(i)}};return o(this,i),o(i,this),this.spawn(n)},diff:function(t){var e=this._private.cy;r.string(t)&&(t=e.$(t));var n=[],i=[],o=[],a=t,s=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r],a=i._private.data.id;e.hasElementWithId(a)?o.push(i):n.push(i)}};return s(this,a,n),s(a,this,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(o,{unique:!0})}},add:function(t){var e=this._private.cy;if(!t)return this;if(r.string(t)){var n=t;t=e.mutableElements().filter(n)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var a=this._private.map,s=0;s<t.length;s++){var l=!a.has(t[s].id());l&&i.push(t[s])}return this.spawn(i)},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&r.string(t)){var i=t;t=n.mutableElements().filter(i)}for(var o=e.map,a=0;a<t.length;a++){var s=t[a],l=s._private.data.id;if(!o.has(l)){var c=this.length++;this[c]=s,o.set(l,{ele:s,index:c})}else{var u=o.get(l).index;this[u]=s,o.set(l,{ele:s,index:u})}}return this},unmergeOne:function(t){t=t[0];var e=this._private,n=t._private.data.id,r=e.map,i=r.get(n);if(!i)return this;var o=i.index;this[o]=void 0,r.delete(n);var a=o===this.length-1;if(this.length>1&&!a){var s=this.length-1,l=this[s],c=l._private.data.id;this[s]=void 0,this[o]=l,r.set(c,{ele:l,index:o})}return this.length--,this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&r.string(t)){var n=t;t=e.mutableElements().filter(n)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=e?t.apply(e,[i,r,this]):t(i,r,this);n.push(o)}return n},reduce:function(t,e){for(var n=e,r=0;r<this.length;r++)n=t(n,this[r],r,this);return n},max:function(t,e){for(var n=-1/0,r=void 0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a>n&&(n=a,r=o)}return{value:n,ele:r}},min:function(t,e){for(var n=1/0,r=void 0,i=0;i<this.length;i++){var o=this[i],a=e?t.apply(e,[o,i,this]):t(o,i,this);a<n&&(n=a,r=o)}return{value:n,ele:r}}},a=o;a.u=a["|"]=a["+"]=a.union=a.or=a.add,a["\\"]=a["!"]=a["-"]=a.difference=a.relativeComplement=a.subtract=a.not,a.n=a["&"]=a["."]=a.and=a.intersection=a.intersect,a["^"]=a["(+)"]=a["(-)"]=a.symmetricDifference=a.symdiff=a.xor,a.fnFilter=a.filterFn=a.stdFilter=a.filter,a.complement=a.abscomp=a.absoluteComplement,t.exports=o},function(t,e,n){"use strict";t.exports={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var t=this[0];if(t)return t._private.group}}},function(t,e,n){"use strict";var r=n(0),i=n(17),o=n(1),a={forEach:function(t,e){if(r.fn(t))for(var n=0;n<this.length;n++){var i=this[n];if(!1===(e?t.apply(e,[i,n,this]):t(i,n,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!r.fn(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(i)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:o.MAX_INT-1}var r=e.source,i=e.target,a=r.zDepth(),s=i.zDepth();return Math.max(a,s,0)}}};a.each=a.forEach,t.exports=a},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(5),a=n(2),s={layoutDimensions:function(t){if((t=i.assign({nodeDimensionsIncludeLabels:!0},t)).nodeDimensionsIncludeLabels){var e=this.boundingBox();return{w:e.w,h:e.h}}return{w:this.outerWidth(),h:this.outerHeight()}},layoutPositions:function(t,e,n){var s=this.nodes(),l=this.cy(),c=e.eles,u=function(t,e){return t.id()+"$"+e},d=i.memoize(n,u);t.emit({type:"layoutstart",layout:t}),t.animations=[];var f=e.spacingFactor&&1!==e.spacingFactor,p=function(){if(!f)return null;for(var t=a.makeBoundingBox(),e=0;e<s.length;e++){var n=s[e],r=d(n,e);a.expandBoundingBoxByPoint(t,r.x,r.y)}return t}(),h=i.memoize(function(t,n){var i=d(t,n),o=t.position();(r.number(o.x)&&r.number(o.y)||t.silentPosition({x:0,y:0}),f)&&(i=function(t,e,n){var r=e.x1+e.w/2,i=e.y1+e.h/2;return{x:r+(n.x-r)*t,y:i+(n.y-i)*t}}(Math.abs(e.spacingFactor),p,i));return null!=e.transform&&(i=e.transform(t,i)),i},u);if(e.animate){for(var g=0;g<s.length;g++){var m=s[g],v=h(m,g);if(null==e.animateFilter||e.animateFilter(m,g)){var y=m.animation({position:v,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(y),y.play()}else m.position(v)}if(e.fit){var b=l.animation({fit:{boundingBox:c.boundingBoxAt(h),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(b),b.play()}else if(void 0!==e.zoom&&void 0!==e.pan){var w=l.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(w),w.play()}t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),o.all(t.animations.map(function(t){return t.promise()})).then(function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})})}else s.positions(h),e.fit&&l.fit(e.eles,e.padding),null!=e.zoom&&l.zoom(e.zoom),e.pan&&l.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(i.extend({},t,{eles:this}))}};s.createLayout=s.makeLayout=s.layout,t.exports=s},function(t,e,n){"use strict";var r=n(0);function i(t,e,n){var r,i=n._private,o=i.styleCache=i.styleCache||{};return null!=(r=o[t])?r:r=o[t]=e(n)}function o(t,e){return function(n){return i(t,e,n)}}function a(t,e){var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return i(t,n,e)}}var s={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t=function(t){return t._private.styleCache={}};if(this.cy().hasCompoundNodes()){var e=void 0;(e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(t)}else this.forEach(function(e){t(e),e.connectedEdges().forEach(t)});return this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e._private.batchingStyle)return e._private.batchStyleEles.merge(this),this;var n=e.hasCompoundNodes(),r=e.style(),i=this;t=!(!t&&void 0!==t),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=r.apply(i);return o.dirtyStyleCache(),o.dirtyCompoundBoundsCache(),t?o.emitAndNotify("style"):o.emit("style"),this},updateMappers:function(t){var e=this._private.cy,n=e.style();if(t=!(!t&&void 0!==t),!e.styleEnabled())return this;var r=n.updateMappers(this);return r.dirtyStyleCache(),r.dirtyCompoundBoundsCache(),t?r.emitAndNotify("style"):r.emit("style"),this},parsedStyle:function(t){var e=this[0],n=e.cy();if(n.styleEnabled())return e?e._private.style[t]||n.style().getDefaultProperty(t):void 0},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var i=n.style();if(r.plainObject(t)){var o=t;i.applyBypass(this,o,!1),this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style")}else if(r.string(t)){if(void 0===e){var a=this[0];return a?i.getStylePropertyValue(a,t):void 0}i.applyBypass(this,t,e,!1),this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style")}else if(void 0===t){var s=this[0];return s?i.getRawStyle(s):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style();if(void 0===t)for(var r=0;r<this.length;r++){var i=this[r];n.removeAllBypasses(i,!1)}else{t=t.split(/\s+/);for(var o=0;o<this.length;o++){var a=this[o];n.removeBypasses(a,t,!1)}}return this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){i*=o[a].pstyle("opacity").value}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function l(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++){if(!e(n[r]))return!1}return!0}function c(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],o=t.hasCompoundNodes();if(i){var a=i._private;if(!e(i))return!1;if(i.isNode())return!o||l(i,r);var s=a.source,c=a.target;return n(s)&&(!o||l(s,n))&&(s===c||n(c)&&(!o||l(c,n)))}}}var u=o("eleTakesUpSpace",function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())});s.takesUpSpace=a("takesUpSpace",c({ok:u}));var d=o("eleInteractive",function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&u(t)}),f=o("parentInteractive",function(t){return"visible"===t.pstyle("visibility").value&&u(t)});s.interactive=a("interactive",c({ok:d,parentOk:f,edgeOkViaNode:u})),s.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var p=o("eleVisible",function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&u(t)}),h=u;s.visible=a("visible",c({ok:p,edgeOkViaNode:h})),s.hidden=function(){var t=this[0];if(t)return!t.visible()},s.bypass=s.css=s.style,s.renderedCss=s.renderedStyle,s.removeBypass=s.removeCss=s.removeStyle,s.pstyle=s.parsedStyle,t.exports=s},function(t,e,n){"use strict";var r={};function i(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length){var o=e[0];this.on(t.event,o)}else if(0===e.length){for(var a=0;a<this.length;a++){var s=this[a],l=!t.ableField||s._private[t.ableField],c=s._private[t.field]!=t.value;if(t.overrideAble){var u=t.overrideAble(s);if(void 0!==u&&(l=u,!u))return this}l&&(s._private[t.field]=t.value,c&&n.push(s))}var d=this.spawn(n);d.updateStyle(),d.emit(t.event)}return this}}function o(t){r[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},r[t.on]=i({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),r[t.off]=i({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}o({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),o({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),o({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),o({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),r.deselect=r.unselect,r.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},o({field:"active",on:"activate",off:"unactivate"}),r.inactive=function(){var t=this[0];if(t)return!t._private.active},t.exports=r},function(t,e,n){"use strict";var r=n(1),i=n(0),o={},a=function(t,e){return function(n,r,o,a){var s=n,l=void 0;if(null==s?l="null":i.elementOrCollection(s)&&1===s.length&&(l="#"+s.id()),1===this.length&&l){var c=this[0]._private,u=c.traversalCache=c.traversalCache||{},d=u[e]=u[e]||{},f=d[l];return f||(d[l]=t.call(this,n,r,o,a))}return t.call(this,n,r,o,a)}},s=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var l=a[s],c=l.source(),u=l.target();if(t.noIncomingEdges&&u===i&&c!==i||t.noOutgoingEdges&&c===i&&u!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)}},l=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),c=s.target();t.outgoing&&l===i?(n.push(s),n.push(c)):t.incoming&&c===i&&(n.push(s),n.push(l))}}return this.spawn(n,{unique:!0}).filter(e)}},c=function(t){return function(e){for(var n=this,r=[],i={};;){var o=t.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],c=l.id();i[c]||(i[c]=!0,r.push(l),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(e)}};function u(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,{unique:!0}).filter(e)}}function d(t){return function(e){var n=[],r=this._private.cy,o=t||{};i.string(e)&&(e=r.$(e));for(var a=0;a<e.length;a++)for(var s=e[a]._private.edges,l=0;l<s.length;l++){var c=s[l],u=c._private.data,d=this.hasElementWithId(u.source)&&e.hasElementWithId(u.target),f=e.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(d||f){if(o.thisIsSrc||o.thisIsTgt){if(o.thisIsSrc&&!d)continue;if(o.thisIsTgt&&!f)continue}n.push(c)}}return this.spawn(n,{unique:!0})}}function f(t){return t=r.extend({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,l=s._private.data.id,c=a.data.target,u=s._private.edges,d=0;d<u.length;d++){var f=u[d],p=f._private.data,h=p.target,g=p.source,m=h===c&&g===l,v=l===h&&c===g;(i.codirected&&m||!i.codirected&&(m||v))&&n.push(f)}return this.spawn(n,{unique:!0}).filter(e)}}o.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},r.extend(o,{roots:s({noIncomingEdges:!0}),leaves:s({noOutgoingEdges:!0}),outgoers:a(l({outgoing:!0}),"outgoers"),successors:c({outgoing:!0}),incomers:a(l({incoming:!0}),"incomers"),predecessors:c({incoming:!0})}),r.extend(o,{neighborhood:a(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),c=s.target(),u=i===l?c:l;u.length>0&&e.push(u[0]),e.push(s[0])}return this.spawn(e,{unique:!0}).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),o.neighbourhood=o.neighborhood,o.closedNeighbourhood=o.closedNeighborhood,o.openNeighbourhood=o.openNeighborhood,r.extend(o,{source:a(function(t){var e=this[0],n=void 0;return e&&(n=e._private.source||e.cy().collection()),n&&t?n.filter(t):n},"source"),target:a(function(t){var e=this[0],n=void 0;return e&&(n=e._private.target||e.cy().collection()),n&&t?n.filter(t):n},"target"),sources:u({attr:"source"}),targets:u({attr:"target"})}),r.extend(o,{edgesWith:a(d(),"edgesWith"),edgesTo:a(d({thisIsSrc:!0}),"edgesTo")}),r.extend(o,{connectedEdges:a(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++){var a=i[o];e.push(a)}}return this.spawn(e,{unique:!0}).filter(t)},"connectedEdges"),connectedNodes:a(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,{unique:!0}).filter(t)},"connectedNodes"),parallelEdges:a(f(),"parallelEdges"),codirectedEdges:a(f({codirected:!0}),"codirectedEdges")}),r.extend(o,{components:function(){var t=this,e=t.cy(),n=t.spawn(),r=t.nodes().spawnSelf(),i=[],o=function(t,e){n.merge(t),r.unmerge(t),e.merge(t)};if(r.empty())return t.spawn();var a=function(){var n=e.collection();i.push(n);var a=r[0];o(a,n),t.bfs({directed:!1,roots:a,visit:function(t,e,r,i,a){o(t,n)}})};do{a()}while(r.length>0);return i.map(function(t){var e=t.connectedEdges().stdFilter(function(e){return t.anySame(e.source())&&t.anySame(e.target())});return t.union(e)})}}),t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(7),a=n(14),s={add:function(t){var e=void 0,n=this;if(r.elementOrCollection(t)){var s=t;if(s._private.cy===n)e=s.restore();else{for(var l=[],c=0;c<s.length;c++){var u=s[c];l.push(u.json())}e=new o(n,l)}}else if(r.array(t)){e=new o(n,t)}else if(r.plainObject(t)&&(r.array(t.nodes)||r.array(t.edges))){for(var d=t,f=[],p=["nodes","edges"],h=0,g=p.length;h<g;h++){var m=p[h],v=d[m];if(r.array(v))for(var y=0,b=v.length;y<b;y++){var w=i.extend({group:m},v[y]);f.push(w)}}e=new o(n,f)}else{e=new a(n,t).collection()}return e},remove:function(t){if(r.elementOrCollection(t));else if(r.string(t)){var e=t;t=this.$(e)}return t.remove()}};t.exports=s},function(t,e,n){"use strict";var r=n(4),i=n(1),o=n(71),a={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender(function(e,n){o(n,t)},e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&i.requestAnimationFrame(function(n){o(n,t),e()})}()}}};t.exports=a},function(t,e,n){"use strict";var r=n(72),i=n(77);t.exports=function(t,e){var n=e._private.aniEles,o=[];function a(e,n){var a=e._private,s=a.animation.current,l=a.animation.queue,c=!1;if(!n&&"none"===e.pstyle("display").value){s=s.splice(0,s.length).concat(l.splice(0,l.length));for(var u=0;u<s.length;u++)s[u].stop()}if(0===s.length){var d=l.shift();d&&s.push(d)}for(var f=function(t){for(var e=t.length-1;e>=0;e--)(0,t[e])();t.splice(0,t.length)},p=s.length-1;p>=0;p--){var h=s[p],g=h._private;g.stopped?(s.splice(p,1),g.hooked=!1,g.playing=!1,g.started=!1,f(g.frames)):(g.playing||g.applying)&&(g.playing&&g.applying&&(g.applying=!1),g.started||i(e,h,t,n),r(e,h,t,n),g.applying&&(g.applying=!1),f(g.frames),h.completed()&&(s.splice(p,1),g.hooked=!1,g.playing=!1,g.started=!1,f(g.completes)),c=!0)}return n||0!==s.length||0!==l.length||o.push(e),c}for(var s=!1,l=0;l<n.length;l++){var c=a(n[l]);s=s||c}var u=a(e,!0);(s||u)&&(n.length>0?(n.dirtyCompoundBoundsCache(),e.notify({type:"draw",eles:n})):e.notify({type:"draw"})),n.unmerge(o),e.emit("step")}},function(t,e,n){"use strict";var r=n(73),i=n(76),o=n(0);function a(t,e){return null!=t&&null!=e&&(!(!o.number(t)||!o.number(e))||!(!t||!e))}t.exports=function(t,e,n,s){var l=!s,c=t._private,u=e._private,d=u.easing,f=u.startTime,p=(s?t:t.cy()).style();if(!u.easingImpl)if(null==d)u.easingImpl=r.linear;else{var h=void 0;h=o.string(d)?p.parse("transition-timing-function",d).value:d;var g=void 0,m=void 0;o.string(h)?(g=h,m=[]):(g=h[1],m=h.slice(2).map(function(t){return+t})),m.length>0?("spring"===g&&m.push(u.duration),u.easingImpl=r[g].apply(null,m)):u.easingImpl=r[g]}var v=u.easingImpl,y=void 0;if(y=0===u.duration?1:(n-f)/u.duration,u.applying&&(y=u.progress),y<0?y=0:y>1&&(y=1),null==u.delay){var b=u.startPosition,w=u.position;if(w&&l&&!t.locked()){var _=t.position();a(b.x,w.x)&&(_.x=i(b.x,w.x,y,v)),a(b.y,w.y)&&(_.y=i(b.y,w.y,y,v)),t.emit("position")}var x=u.startPan,S=u.pan,C=c.pan,E=null!=S&&s;E&&(a(x.x,S.x)&&(C.x=i(x.x,S.x,y,v)),a(x.y,S.y)&&(C.y=i(x.y,S.y,y,v)),t.emit("pan"));var T=u.startZoom,M=u.zoom,k=null!=M&&s;k&&(a(T,M)&&(c.zoom=i(T,M,y,v)),t.emit("zoom")),(E||k)&&t.emit("viewport");var A=u.style;if(A&&A.length>0&&l){for(var I=0;I<A.length;I++){var O=A[I],P=O.name,L=O,D=u.startStyle[P],N=p.properties[D.name],R=i(D,L,y,v,N);p.overrideBypass(t,P,R)}t.emit("style")}}return u.progress=y,y}},function(t,e,n){"use strict";var r=n(74),i=n(75),o=function(t,e,n,i){var o=r(t,e,n,i);return function(t,e,n){return t+(e-t)*o(n)}},a={linear:function(t,e,n){return t+(e-t)*n},ease:o(.25,.1,.25,1),"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1),"ease-in-sine":o(.47,0,.745,.715),"ease-out-sine":o(.39,.575,.565,1),"ease-in-out-sine":o(.445,.05,.55,.95),"ease-in-quad":o(.55,.085,.68,.53),"ease-out-quad":o(.25,.46,.45,.94),"ease-in-out-quad":o(.455,.03,.515,.955),"ease-in-cubic":o(.55,.055,.675,.19),"ease-out-cubic":o(.215,.61,.355,1),"ease-in-out-cubic":o(.645,.045,.355,1),"ease-in-quart":o(.895,.03,.685,.22),"ease-out-quart":o(.165,.84,.44,1),"ease-in-out-quart":o(.77,0,.175,1),"ease-in-quint":o(.755,.05,.855,.06),"ease-out-quint":o(.23,1,.32,1),"ease-in-out-quint":o(.86,0,.07,1),"ease-in-expo":o(.95,.05,.795,.035),"ease-out-expo":o(.19,1,.22,1),"ease-in-out-expo":o(1,0,0,1),"ease-in-circ":o(.6,.04,.98,.335),"ease-out-circ":o(.075,.82,.165,1),"ease-in-out-circ":o(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return a.linear;var r=i(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":o};t.exports=a},function(t,e,n){"use strict";
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */t.exports=function(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,l=11,c=1/(l-1),u="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var d=0;d<4;++d)if("number"!=typeof arguments[d]||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var f=u?new Float32Array(l):new Array(l);function p(t,e){return 1-3*e+3*t}function h(t,e){return 3*e-6*t}function g(t){return 3*t}function m(t,e,n){return((p(e,n)*t+h(e,n))*t+g(e))*t}function v(t,e,n){return 3*p(e,n)*t*t+2*h(e,n)*t+g(e)}function y(e){for(var r=0,u=1,d=l-1;u!==d&&f[u]<=e;++u)r+=c;var p=r+(e-f[--u])/(f[u+1]-f[u])*c,h=v(p,t,n);return h>=o?function(e,r){for(var o=0;o<i;++o){var a=v(r,t,n);if(0===a)return r;r-=(m(r,t,n)-e)/a}return r}(e,p):0===h?p:function(e,r,i){var o=void 0,l=void 0,c=0;do{(o=m(l=r+(i-r)/2,t,n)-e)>0?i=l:r=l}while(Math.abs(o)>a&&++c<s);return l}(e,r,r+c)}var b=!1;function w(){b=!0,t===e&&n===r||function(){for(var e=0;e<l;++e)f[e]=m(e*c,t,n)}()}var _=function(i){return b||w(),t===e&&n===r?i:0===i?0:1===i?1:m(y(i),e,r)};_.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var x="generateBezier("+[t,e,n,r]+")";return _.toString=function(){return x},_}},function(t,e,n){"use strict";
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var r=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),c=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*r,n.v=n.v+c*r,n}return function t(e,r,i){var o,a={x:-1,v:0,tension:null,friction:null},s=[0],l=0,c=void 0,u=void 0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,a.tension=e,a.friction=r,c=(o=null!==i)?(l=t(e,r))/i*.016:.016;u=n(u||a,c),s.push(1+u.x),l+=16,Math.abs(u.x)>1e-4&&Math.abs(u.v)>1e-4;);return o?function(t){return s[t*(s.length-1)|0]}:l}}();t.exports=r},function(t,e,n){"use strict";var r=n(0);function i(t,e,n,r,i){if(1===r)return n;var o=i(e,n,r);return null==t?o:((t.roundValue||t.color)&&(o=Math.round(o)),void 0!==t.min&&(o=Math.max(o,t.min)),void 0!==t.max&&(o=Math.min(o,t.max)),o)}function o(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}t.exports=function(t,e,n,a,s){var l=null!=s?s.type:null;n<0?n=0:n>1&&(n=1);var c=o(t,s),u=o(e,s);if(r.number(c)&&r.number(u))return i(l,c,u,n,a);if(r.array(c)&&r.array(u)){for(var d=[],f=0;f<u.length;f++){var p=c[f],h=u[f];if(null!=p&&null!=h){var g=i(l,p,h,n,a);d.push(g)}else d.push(h)}return d}}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){var i=!r,o=t,a=e._private,s=r?t:t.cy(),l=s.style();if(i){var c=o.position();a.startPosition=a.startPosition||{x:c.x,y:c.y},a.startStyle=a.startStyle||l.getAnimationStartStyle(o,a.style)}if(r){var u=s._private.pan;a.startPan=a.startPan||{x:u.x,y:u.y},a.startZoom=null!=a.startZoom?a.startZoom:s._private.zoom}a.started=!0,a.startTime=n-a.progress*a.duration}},function(t,e,n){"use strict";var r=n(11),i=n(4),o=n(0),a=n(1),s=n(6),l={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&o.element(n.target)&&r.matches(n.target)},eventFields:function(t){return{cy:t,target:t}},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},c=function(t){return o.string(t)?new s(t):t},u={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new r(a.assign({context:this},l))),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,c(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,c(e),n),this},one:function(t,e,n){return this.emitter().one(t,c(e),n),this},once:function(t,e,n){return this.emitter().one(t,c(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this}};i.eventAliasesOn(u),t.exports=u},function(t,e,n){"use strict";var r={png:function(t){var e=this._private.renderer;return t=t||{},e.png(t)},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};r.jpeg=r.jpg,t.exports=r},function(t,e,n){"use strict";var r=n(1),i=n(0),o={layout:function(t){if(null!=t)if(null!=t.name){var e=t.name,n=this.extension("layout",e);if(null!=n){var o=void 0;o=i.string(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$();var a=new n(r.extend({},t,{cy:this,eles:o}));return a}r.error("Can not apply layout: No such layout `"+e+"` found; did you include its JS file?")}else r.error("A `name` must be specified to make a layout");else r.error("Layout options must be specified to make a layout")}};o.createLayout=o.makeLayout=o.layout,t.exports=o},function(t,e,n){"use strict";var r={notify:function(t){var e=this._private;if(e.batchingNotify){var n=e.batchNotifyEles,r=e.batchNotifyTypes;return t.eles&&n.merge(t.eles),void(r.ids[t.type]||(r.push(t.type),r.ids[t.type]=!0))}if(e.notificationsEnabled){var i=this.renderer();!this.isDestroyed()&&i&&i.notify(t)}},notifications:function(t){var e=this._private;if(void 0===t)return e.notificationsEnabled;e.notificationsEnabled=!!t},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchingStyle=t.batchingNotify=!0,t.batchStyleEles=this.collection(),t.batchNotifyEles=this.collection(),t.batchNotifyTypes=[],t.batchNotifyTypes.ids={}),t.batchCount++,this},endBatch:function(){var t=this._private;return t.batchCount--,0===t.batchCount&&(t.batchingStyle=!1,t.batchStyleEles.updateStyle(),t.batchingNotify=!1,this.notify({type:t.batchNotifyTypes,eles:t.batchNotifyEles})),this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e.getElementById(i).data(o)}})}};t.exports=r},function(t,e,n){"use strict";var r=n(1),i={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.invalidateSize(),this.notify({type:"resize"}),this.emit("resize"),this},initRenderer:function(t){var e=this.extension("renderer",t.name);null!=e?(this._private.renderer=new e(r.extend({},t,{cy:this})),this.notify({type:"init"})):r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name)},destroyRenderer:function(){this.notify({type:"destroy"});var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};i.invalidateDimensions=i.resize,t.exports=i},function(t,e,n){"use strict";var r=n(0),i=n(7),o={collection:function(t,e){return r.string(t)?this.$(t):r.elementOrCollection(t)?t.collection():r.array(t)?new i(this,t,e):new i(this)},nodes:function(t){var e=this.$(function(t){return t.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(t){return t.isEdge()});return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};o.elements=o.filter=o.$,t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(18),o={style:function(t){t&&this.setStyle(t).update();return this._private.style},setStyle:function(t){var e=this._private;return r.stylesheet(t)?e.style=t.generateStyle(this):r.array(t)?e.style=i.fromJson(this,t):r.string(t)?e.style=i.fromString(this,t):e.style=i(this),e.style}};t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(5),a={apply:function(t){var e=this._private,n=e.cy.collection();e.newStyle&&(e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0));for(var r=0;r<t.length;r++){var i=t[r],o=this.getContextMeta(i);if(!o.empty){n.merge(i);var a=this.getContextStyle(o),s=this.applyContextStyle(o,a,i);e.newStyle||this.updateTransitions(i,s.diffProps),this.updateStyleHints(i)}}return e.newStyle=!1,n},getPropertiesDiff:function(t,e){var n=this._private.propDiffs=this._private.propDiffs||{},r=t+"-"+e,i=n[r];if(i)return i;for(var o=[],a={},s=0;s<this.length;s++){var l=this[s],c="t"===t[s]!==("t"===e[s]),u=l.mappedProperties.length>0;if(c||u){var d=void 0;c&&u?d=l.properties:c?d=l.properties:u&&(d=l.mappedProperties);for(var f=0;f<d.length;f++){for(var p=d[f],h=p.name,g=!1,m=s+1;m<this.length;m++){var v=this[m];if("t"===e[m]&&(g=null!=v.properties[p.name]))break}a[h]||g||(a[h]=!0,o.push(h))}}}return n[r]=o,o},getContextMeta:function(t){var e,n="",r=t._private.styleCxtKey||"";this._private.newStyle&&(r="");for(var i=0;i<this.length;i++){var o=this[i];n+=o.selector&&o.selector.matches(t)?"t":"f"}return e=this.getPropertiesDiff(r,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},getContextStyle:function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var o=this[i];if("t"===e[i])for(var a=0;a<o.properties.length;a++){var s=o.properties[a];r[s.name]=s}}return n[e]=r,r},applyContextStyle:function(t,e,n){for(var r=t.diffPropNames,i={},o=0;o<r.length;o++){var a=r[o],s=e[a],l=n.pstyle(a);if(!s){if(!l)continue;s=l.bypass?{name:a,deleteBypassed:!0}:{name:a,delete:!0}}if(l!==s){var c=i[a]={prev:l};this.applyParsedProperty(n,s),c.next=n.pstyle(a),c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:i}},updateStyleHints:function(t){var e=t._private;if(!t.removed()){var n=!1;if("nodes"===e.group)for(var r=1;r<=this.pieBackgroundN;r++){if(t.pstyle("pie-"+r+"-background-size").value>0){n=!0;break}}e.hasPie=n;var i=t.pstyle("text-transform").strValue,o=t.pstyle("label").strValue,a=t.pstyle("source-label").strValue,s=t.pstyle("target-label").strValue,l=t.pstyle("font-style").strValue,c=t.pstyle("font-size").pfValue+"px",u=t.pstyle("font-family").strValue,d=t.pstyle("font-weight").strValue,f=l+"$"+c+"$"+u+"$"+d+"$"+i+"$"+t.pstyle("text-valign").strValue+"$"+t.pstyle("text-valign").strValue+"$"+t.pstyle("text-outline-width").pfValue+"$"+t.pstyle("text-wrap").strValue+"$"+t.pstyle("text-max-width").pfValue;e.labelStyleKey=f,e.sourceLabelKey=f+"$"+a,e.targetLabelKey=f+"$"+s,e.labelKey=f+"$"+o,e.fontKey=l+"$"+d+"$"+c+"$"+u,e.styleKey=Date.now()}},applyParsedProperty:function(t,e){var n=this,o=e,a=t._private.style,s=void 0,l=n.types,c=n.properties[o.name].type,u=o.bypass,d=a[o.name],f=d&&d.bypass,p=t._private,h=function(){n.checkZOrderTrigger(t,o.name,d?d.value:null,o.value)};if("curve-style"===e.name&&"haystack"===e.value&&t.isEdge()&&(t.isLoop()||t.source().isParent()||t.target().isParent())&&(o=e=this.parse(e.name,"bezier",u)),o.delete)return a[o.name]=void 0,h(),!0;if(o.deleteBypassed)return d?!!d.bypass&&(d.bypassed=void 0,h(),!0):(h(),!0);if(o.deleteBypass)return d?!!d.bypass&&(a[o.name]=d.bypassed,h(),!0):(h(),!0);var g=function(){r.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+t.id()+"` for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case l.mapData:for(var m=o.field.split("."),v=p.data,y=0;y<m.length&&v;y++){v=v[m[y]]}var b=void 0;if((b=i.number(v)?(v-o.fieldMin)/(o.fieldMax-o.fieldMin):0)<0?b=0:b>1&&(b=1),c.color){var w=o.valueMin[0],_=o.valueMax[0],x=o.valueMin[1],S=o.valueMax[1],C=o.valueMin[2],E=o.valueMax[2],T=null==o.valueMin[3]?1:o.valueMin[3],M=null==o.valueMax[3]?1:o.valueMax[3],k=[Math.round(w+(_-w)*b),Math.round(x+(S-x)*b),Math.round(C+(E-C)*b),Math.round(T+(M-T)*b)];s={bypass:o.bypass,name:o.name,value:k,strValue:"rgb("+k[0]+", "+k[1]+", "+k[2]+")"}}else{if(!c.number)return!1;var A=o.valueMin+(o.valueMax-o.valueMin)*b;s=this.parse(o.name,A,o.bypass,"mapping")}s||(s=this.parse(o.name,d.strValue,o.bypass,"mapping")),s||g(),s.mapping=o,o=s;break;case l.data:var I=o.field.split("."),O=p.data;if(O)for(var P=0;P<I.length;P++){O=O[I[P]]}if(!(s=this.parse(o.name,O,o.bypass,"mapping"))){var L=d?d.strValue:"";s=this.parse(o.name,L,o.bypass,"mapping")}s||g(),s.mapping=o,o=s;break;case l.fn:var D=(0,o.value)(t);(s=this.parse(o.name,D,o.bypass,"mapping")).mapping=o,o=s;break;case void 0:break;default:return!1}return u?(o.bypassed=f?d.bypassed:d,a[o.name]=o):f?d.bypassed=o:a[o.name]=o,h(),!0},cleanElements:function(t,e){for(var n=this.properties,r=0;r<t.length;r++){var i=t[r];if(e)for(var o=i._private.style,a=0;a<n.length;a++){var s=n[a],l=o[s.name];l&&(l.bypass?l.bypassed=null:o[s.name]=null)}else i._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateMappers:function(t){for(var e=this._private.cy.collection(),n=0;n<t.length;n++){for(var r=t[n],i=r._private.style,o=!1,a=0;a<this.properties.length;a++){var s=i[this.properties[a].name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(r,l),o=!0}}o&&(this.updateStyleHints(r),e.merge(r))}return e},updateTransitions:function(t,e,n){var r=this,a=t._private,s=t.pstyle("transition-property").value,l=t.pstyle("transition-duration").pfValue,c=t.pstyle("transition-delay").pfValue;if(s.length>0&&l>0){for(var u={},d=!1,f=0;f<s.length;f++){var p=s[f],h=t.pstyle(p),g=e[p];if(g){var m=g.prev,v=null!=g.next?g.next:h,y=!1,b=void 0;m&&(i.number(m.pfValue)&&i.number(v.pfValue)?(y=v.pfValue-m.pfValue,b=m.pfValue+1e-6*y):i.number(m.value)&&i.number(v.value)?(y=v.value-m.value,b=m.value+1e-6*y):i.array(m.value)&&i.array(v.value)&&(y=m.value[0]!==v.value[0]||m.value[1]!==v.value[1]||m.value[2]!==v.value[2],b=m.strValue),y&&(u[p]=v.strValue,this.applyBypass(t,p,b),d=!0))}}if(!d)return;a.transitioning=!0,new o(function(e){c>0?t.delayAnimation(c).play().promise().then(e):e()}).then(function(){return t.animation({style:u,duration:l,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,s),t.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(t,s),t.emitAndNotify("style"),a.transitioning=!1)},checkZOrderTrigger:function(t,e,n,r){var i=this.properties[e];null==i.triggersZOrder||null!=n&&!i.triggersZOrder(n,r)||this._private.cy.notify({type:"zorder",eles:t})}};t.exports=a},function(t,e,n){"use strict";var r=n(0),i=n(1),o={applyBypass:function(t,e,n,o){var a=[];if("*"===e||"**"===e){if(void 0!==n)for(var s=0;s<this.properties.length;s++){var l=this.properties[s].name,c=this.parse(l,n,!0);c&&a.push(c)}}else if(r.string(e)){var u=this.parse(e,n,!0);u&&a.push(u)}else{if(!r.plainObject(e))return!1;var d=e;o=n;for(var f=Object.keys(d),p=0;p<f.length;p++){var h=f[p],g=(this.properties[h],d[h]);if(void 0===g&&(g=d[i.dash2camel(h)]),void 0!==g){var m=this.parse(h,g,!0);m&&a.push(m)}}}if(0===a.length)return!1;for(var v=!1,y=0;y<t.length;y++){for(var b=t[y],w={},_=void 0,x=0;x<a.length;x++){var S=a[x];if(o){var C=b.pstyle(S.name);_=w[S.name]={prev:C}}v=this.applyParsedProperty(b,S)||v,o&&(_.next=b.pstyle(S.name))}v&&this.updateStyleHints(b),o&&this.updateTransitions(b,w,!0)}return v},overrideBypass:function(t,e,n){e=i.camel2dash(e);for(var r=0;r<t.length;r++){var o=t[r],a=o._private.style[e],s=this.properties[e].type,l=s.color,c=s.mutiple;if(a&&a.bypass){var u=null!=a.pfValue?a.pfValue:a.value;a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=l?"rgb("+n.join(",")+")":c?n.join(" "):""+n,this.checkZOrderTrigger(o,e,u,n)}else this.applyBypass(o,e,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],o={},a=0;a<e.length;a++){var s=e[a],l=this.properties[s],c=i.pstyle(l.name);if(c&&c.bypass){var u=this.parse(s,"",!0),d=o[l.name]={prev:c};this.applyParsedProperty(i,u),d.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}}};t.exports=o},function(t,e,n){"use strict";var r=n(3),i={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(r&&e&&r.getComputedStyle)return r.getComputedStyle(e).getPropertyValue(t)}};t.exports=i},function(t,e,n){"use strict";var r=n(1),i=n(0),o={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){if(t=t[0]){for(var n={},i=0;i<this.properties.length;i++){var o=this.properties[i],a=this.getStylePropertyValue(t,o.name,e);null!=a&&(n[o.name]=a,n[r.dash2camel(o.name)]=a)}return n}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,o=t.pstyle(r.name),a=t.cy().zoom();if(o){var s=o.units?i.implicitUnits||"px":null;return s?[].concat(o.pfValue).map(function(t){return t*(n?a:1)+s}).join(" "):o.strValue}}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var o=e[r].name,a=t.pstyle(o);void 0!==a&&(a=i.plainObject(a)?this.parse(o,a.strValue):this.parse(o,a)),a&&(n[o]=a)}return n},getPropsList:function(t){var e=[],n=t,i=this.properties;if(n)for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a],l=n[s],c=i[s]||i[r.camel2dash(s)],u=this.parse(c.name,l);u&&e.push(u)}return e}};t.exports=o},function(t,e,n){"use strict";var r={appendFromJson:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.selector,i=n.style||n.css,o=Object.keys(i);this.selector(r);for(var a=0;a<o.length;a++){var s=o[a],l=i[s];this.css(s,l)}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t}};t.exports=r},function(t,e,n){"use strict";var r=n(1),i=n(6),o={appendFromString:function(t){var e=""+t,n=void 0,o=void 0,a=void 0;function s(){e=e.length>n.length?e.substr(n.length):""}function l(){o=o.length>a.length?o.substr(a.length):""}for(e=e.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(e.match(/^\s*$/))break;var c=e.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){r.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+e);break}n=c[0];var u=c[1];if("core"!==u)if(new i(u)._private.invalid){r.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+u),s();continue}var d=c[2],f=!1;o=d;for(var p=[];;){if(o.match(/^\s*$/))break;var h=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!h){r.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),f=!0;break}a=h[0];var g=h[1],m=h[2];if(this.properties[g])this.parse(g,m)?(p.push({name:g,val:m}),l()):(r.error("Skipping property: Invalid property definition in: "+a),l());else r.error("Skipping property: Invalid property name in: "+a),l()}if(f){s();break}this.selector(u);for(var v=0;v<p.length;v++){var y=p[v];this.css(y.name,y.val)}s()}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}};t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o={};!function(){var t=r.regex.number,e=r.regex.rgbaNoBackRefs,n=r.regex.hslaNoBackRefs,a=r.regex.hex3,s=r.regex.hex6,l=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},c=function(r){var i=t+"|\\w+|"+e+"|"+n+"|"+a+"|"+s;return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"},u=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];o.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontletiant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","cutrectangle","bottomroundrectangle","barrel","ellipse","triangle","square","pentagon","hexagon","concavehexagon","heptagon","octagon","tag","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:l("data")},layoutData:{mapping:!0,regex:l("layoutData")},scratch:{mapping:!0,regex:l("scratch")},mapData:{mapping:!0,regex:c("mapData")},mapLayoutData:{mapping:!0,regex:c("mapLayoutData")},mapScratch:{mapping:!0,regex:c("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:u,singleRegexMatchValue:!0},urls:{regexes:u,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-line"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return i.string(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var d={zeroNonZero:function(t,e){return 0===t&&0!==e||0!==t&&0===e},anyDiff:function(t,e){return t!==e}},f=o.types,p=o.properties=[{name:"label",type:f.text},{name:"text-rotation",type:f.textRotation},{name:"text-margin-x",type:f.bidirectionalSize},{name:"text-margin-y",type:f.bidirectionalSize},{name:"source-label",type:f.text},{name:"source-text-rotation",type:f.textRotation},{name:"source-text-margin-x",type:f.bidirectionalSize},{name:"source-text-margin-y",type:f.bidirectionalSize},{name:"source-text-offset",type:f.size},{name:"target-label",type:f.text},{name:"target-text-rotation",type:f.textRotation},{name:"target-text-margin-x",type:f.bidirectionalSize},{name:"target-text-margin-y",type:f.bidirectionalSize},{name:"target-text-offset",type:f.size},{name:"text-valign",type:f.valign},{name:"text-halign",type:f.halign},{name:"color",type:f.color},{name:"text-outline-color",type:f.color},{name:"text-outline-width",type:f.size},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-opacity",type:f.zeroOneNumber},{name:"text-background-color",type:f.color},{name:"text-background-opacity",type:f.zeroOneNumber},{name:"text-background-padding",type:f.size},{name:"text-border-opacity",type:f.zeroOneNumber},{name:"text-border-color",type:f.color},{name:"text-border-width",type:f.size},{name:"text-border-style",type:f.borderStyle},{name:"text-background-shape",type:f.textBackgroundShape},{name:"text-transform",type:f.textTransform},{name:"text-wrap",type:f.textWrap},{name:"text-max-width",type:f.size},{name:"text-events",type:f.bool},{name:"font-family",type:f.fontFamily},{name:"font-style",type:f.fontStyle},{name:"font-weight",type:f.fontWeight},{name:"font-size",type:f.size},{name:"min-zoomed-font-size",type:f.size},{name:"events",type:f.bool},{name:"display",type:f.display,triggersZOrder:d.anyDiff},{name:"visibility",type:f.visibility,triggersZOrder:d.anyDiff},{name:"opacity",type:f.zeroOneNumber,triggersZOrder:d.zeroNonZero},{name:"z-compound-depth",type:f.zCompoundDepth,triggersZOrder:d.anyDiff},{name:"z-index-compare",type:f.zIndexCompare,triggersZOrder:d.anyDiff},{name:"z-index",type:f.nonNegativeInt,triggersZOrder:d.anyDiff},{name:"overlay-padding",type:f.size},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber},{name:"transition-property",type:f.propList},{name:"transition-duration",type:f.time},{name:"transition-delay",type:f.time},{name:"transition-timing-function",type:f.easing},{name:"height",type:f.nodeSize},{name:"width",type:f.nodeSize},{name:"shape",type:f.nodeShape},{name:"shape-polygon-points",type:f.polygonPointList},{name:"background-color",type:f.color},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-blacken",type:f.nOneOneNumber},{name:"padding",type:f.sizeMaybePercent},{name:"padding-relative-to",type:f.paddingRelativeTo},{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size},{name:"border-style",type:f.borderStyle},{name:"background-image",type:f.urls},{name:"background-image-crossorigin",type:f.bgCrossOrigin},{name:"background-image-opacity",type:f.zeroOneNumbers},{name:"background-position-x",type:f.bgPos},{name:"background-position-y",type:f.bgPos},{name:"background-width-relative-to",type:f.bgRelativeTo},{name:"background-height-relative-to",type:f.bgRelativeTo},{name:"background-repeat",type:f.bgRepeat},{name:"background-fit",type:f.bgFit},{name:"background-clip",type:f.bgClip},{name:"background-width",type:f.bgWH},{name:"background-height",type:f.bgWH},{name:"position",type:f.position},{name:"compound-sizing-wrt-labels",type:f.compoundIncludeLabels},{name:"min-width",type:f.size},{name:"min-width-bias-left",type:f.sizeMaybePercent},{name:"min-width-bias-right",type:f.sizeMaybePercent},{name:"min-height",type:f.size},{name:"min-height-bias-top",type:f.sizeMaybePercent},{name:"min-height-bias-bottom",type:f.sizeMaybePercent},{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"curve-style",type:f.curveStyle},{name:"haystack-radius",type:f.zeroOneNumber},{name:"source-endpoint",type:f.edgeEndpoint},{name:"target-endpoint",type:f.edgeEndpoint},{name:"control-point-step-size",type:f.size},{name:"control-point-distances",type:f.bidirectionalSizes},{name:"control-point-weights",type:f.numbers},{name:"segment-distances",type:f.bidirectionalSizes},{name:"segment-weights",type:f.numbers},{name:"edge-distances",type:f.edgeDistances},{name:"arrow-scale",type:f.positiveNumber},{name:"loop-direction",type:f.angle},{name:"loop-sweep",type:f.angle},{name:"source-distance-from-node",type:f.size},{name:"target-distance-from-node",type:f.size},{name:"ghost",type:f.bool},{name:"ghost-offset-x",type:f.bidirectionalSize},{name:"ghost-offset-y",type:f.bidirectionalSize},{name:"ghost-opacity",type:f.zeroOneNumber},{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size},{name:"outside-texture-bg-color",type:f.color},{name:"outside-texture-bg-opacity",type:f.zeroOneNumber}],h=o.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];o.pieBackgroundN=16,p.push({name:"pie-size",type:f.sizeMaybePercent});for(var g=1;g<=o.pieBackgroundN;g++)p.push({name:"pie-"+g+"-background-color",type:f.color}),p.push({name:"pie-"+g+"-background-size",type:f.percent}),p.push({name:"pie-"+g+"-background-opacity",type:f.zeroOneNumber});var m=o.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:f.arrowShape},{name:"arrow-color",type:f.color},{name:"arrow-fill",type:f.arrowFill}].forEach(function(t){m.forEach(function(e){var n=e+"-"+t.name,r=t.type;p.push({name:n,type:r})})},{}),o.propertyNames=p.map(function(t){return t.name});for(var v=0;v<p.length;v++){var y=p[v];p[y.name]=y}for(var b=0;b<h.length;b++){var w=h[b],_=p[w.pointsTo],x={name:w.name,alias:!0,pointsTo:_};p.push(x),p[w.name]=x}}(),o.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},o.getDefaultProperties=r.memoize(function(){for(var t=r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(t,e){for(var n=1;n<=o.pieBackgroundN;n++){var r=e.name.replace("{{i}}",n),i=e.value;t[r]=i}return t},{}),{"line-style":"solid","line-color":"#999","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"bezier","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node"},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(t,e){return o.arrowPrefixes.forEach(function(n){var r=n+"-"+e.name,i=e.value;t[r]=i}),t},{})),e={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,s=t[a],l=this.parse(a,s);e[a]=l}}return e}),o.addDefaultStylesheet=function(){this.selector("$node > node").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3,"curve-style":"haystack"}).selector(":parent <-> node").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector("node:parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(2),a={parse:function(t,e,n,o){if(i.fn(e))return this.parseImplWarn(t,e,n,o);var a=[t,e,n,"mapping"===o||!0===o||!1===o||null==o?"dontcare":o].join("$"),s=this.propCache=this.propCache||{},l=void 0;return(l=s[a])||(l=s[a]=this.parseImplWarn(t,e,n,o)),(n||"mapping"===o)&&(l=r.copy(l))&&(l.value=r.copy(l.value)),l},parseImplWarn:function(t,e,n,i){var o=this.parseImpl(t,e,n,i);return o||null==e||r.error("The style property `%s: %s` is invalid",t,e),o},parseImpl:function(t,e,n,a){t=r.camel2dash(t);var s=this.properties[t],l=e,c=this.types;if(!s)return null;if(void 0===e)return null;s.alias&&(s=s.pointsTo,t=s.name);var u=i.string(e);u&&(e=e.trim());var d=s.type;if(!d)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(i.fn(e))return{name:t,value:e,strValue:"fn",mapped:c.fn,bypass:n};var f=void 0,p=void 0;if(!u||a);else{if(f=new RegExp(c.data.regex).exec(e)){if(n)return!1;var h=c.data;return{name:t,value:f,strValue:""+e,mapped:h,field:f[1],bypass:n}}if(p=new RegExp(c.mapData.regex).exec(e)){if(n)return!1;if(d.multiple)return!1;var g=c.mapData;if(!d.color&&!d.number)return!1;var m=this.parse(t,p[4]);if(!m||m.mapped)return!1;var v=this.parse(t,p[5]);if(!v||v.mapped)return!1;if(m.value===v.value)return!1;if(d.color){var y=m.value,b=v.value;if(!(y[0]!==b[0]||y[1]!==b[1]||y[2]!==b[2]||y[3]!==b[3]&&(null!=y[3]&&1!==y[3]||null!=b[3]&&1!==b[3])))return!1}return{name:t,value:p,strValue:""+e,mapped:g,field:p[1],fieldMin:parseFloat(p[2]),fieldMax:parseFloat(p[3]),valueMin:m.value,valueMax:v.value,bypass:n}}}if(d.multiple&&"multiple"!==a){var w=void 0;if(w=u?e.split(/\s+/):i.array(e)?e:[e],d.evenMultiple&&w.length%2!=0)return null;for(var _=[],x=[],S=[],C=!1,E=0;E<w.length;E++){var T=this.parse(t,w[E],n,"multiple");C=C||i.string(T.value),_.push(T.value),S.push(null!=T.pfValue?T.pfValue:T.value),x.push(T.units)}return d.validate&&!d.validate(_,x)?null:d.singleEnum&&C?1===_.length&&i.string(_[0])?{name:t,value:_[0],strValue:_[0],bypass:n}:null:{name:t,value:_,pfValue:S,strValue:_.map(function(t,e){return t+(x[e]||"")}).join(" "),bypass:n,units:x}}var M=function(){for(var r=0;r<d.enums.length;r++){if(d.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(d.number){var k=void 0,A="px";if(d.units&&(k=d.units),d.implicitUnits&&(A=d.implicitUnits),!d.unitless)if(u){var I="px|em"+(d.allowPercent?"|\\%":"");k&&(I=k);var O=e.match("^("+r.regex.number+")("+I+")?$");O&&(e=O[1],k=O[2]||A)}else k&&!d.implicitUnits||(k=A);if(e=parseFloat(e),isNaN(e)&&void 0===d.enums)return null;if(isNaN(e)&&void 0!==d.enums)return e=l,M();if(d.integer&&!i.integer(e))return null;if(void 0!==d.min&&(e<d.min||d.strictMin&&e===d.min)||void 0!==d.max&&(e>d.max||d.strictMax&&e===d.max))return null;var P={name:t,value:e,strValue:""+e+(k||""),units:k,bypass:n};return d.unitless||"px"!==k&&"em"!==k?P.pfValue=e:P.pfValue="px"!==k&&k?this.getEmSizeInPixels()*e:e,"ms"!==k&&"s"!==k||(P.pfValue="ms"===k?e:1e3*e),"deg"!==k&&"rad"!==k||(P.pfValue="rad"===k?e:o.deg2rad(e)),"%"===k&&(P.pfValue=e/100),P}if(d.propList){var L=[],D=""+e;if("none"===D);else{for(var N=D.split(","),R=0;R<N.length;R++){var F=N[R].trim();this.properties[F]&&L.push(F)}if(0===L.length)return null}return{name:t,value:L,strValue:0===L.length?"none":L.join(", "),bypass:n}}if(d.color){var B=r.color2tuple(e);return B?{name:t,value:B,pfValue:B,strValue:""+e,bypass:n}:null}if(d.regex||d.regexes){if(d.enums){var j=M();if(j)return j}for(var q=d.regexes?d.regexes:[d.regex],z=0;z<q.length;z++){var U=new RegExp(q[z]).exec(e);if(U)return{name:t,value:d.singleRegexMatchValue?U[1]:U,strValue:""+e,bypass:n}}return null}return d.string?{name:t,value:""+e,strValue:""+e,bypass:n}:d.enums?M():null}};t.exports=a},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(2),a={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t=arguments,e=this._private.pan,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0;switch(t.length){case 0:return e;case 1:if(r.string(t[0]))return e[n=t[0]];if(r.plainObject(t[0])){if(!this._private.panningEnabled)return this;a=(o=t[0]).x,s=o.y,r.number(a)&&(e.x=a),r.number(s)&&(e.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=t[0],i=t[1],"x"!==n&&"y"!==n||!r.number(i)||(e[n]=i),this.emit("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(t,e){var n=arguments,i=this._private.pan,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0;if(!this._private.panningEnabled)return this;switch(n.length){case 1:r.plainObject(t)&&(l=(s=n[0]).x,c=s.y,r.number(l)&&(i.x+=l),r.number(c)&&(i.y+=c),this.emit("pan viewport"));break;case 2:a=e,"x"!==(o=t)&&"y"!==o||!r.number(a)||(i[o]+=a),this.emit("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(t,e){if(r.number(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n=void 0;if(r.string(t)){var i=t;t=this.$(i)}else if(r.boundingBox(t)){var o=t;(n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else r.elementOrCollection(t)||(t=this.mutableElements());if(!r.elementOrCollection(t)||!t.empty()){n=n||t.boundingBox();var a=this.width(),s=this.height(),l=void 0;if(e=r.number(e)?e:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:l=(l=(l=Math.min((a-2*e)/n.w,(s-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:l)<this._private.minZoom?this._private.minZoom:l,pan:{x:(a-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2}}}}},minZoom:function(t){return void 0===t?this._private.minZoom:(r.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(r.number(t)&&(this._private.maxZoom=t),this)},getZoomedViewport:function(t){var e=this._private,n=e.pan,i=e.zoom,a=void 0,s=void 0,l=!1;if(e.zoomingEnabled||(l=!0),r.number(t)?s=t:r.plainObject(t)&&(s=t.level,null!=t.position?a=o.modelToRenderedPosition(t.position,i,n):null!=t.renderedPosition&&(a=t.renderedPosition),null==a||e.panningEnabled||(l=!0)),s=(s=s>e.maxZoom?e.maxZoom:s)<e.minZoom?e.minZoom:s,l||!r.number(s)||s===i||null!=a&&(!r.number(a.x)||!r.number(a.y)))return null;if(null!=a){var c=n,u=i,d=s;return{zoomed:!0,panned:!0,zoom:d,pan:{x:-d/u*(a.x-c.x)+a.x,y:-d/u*(a.y-c.y)+a.y}}}return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify({type:"viewport"}),this):this},viewport:function(t){var e=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!t)return this;if(r.number(t.zoom)||(n=!1),r.plainObject(t.pan)||(i=!1),!n&&!i)return this;if(n){var l=t.zoom;l<e.minZoom||l>e.maxZoom||!e.zoomingEnabled?a=!0:(e.zoom=l,o.push("zoom"))}if(i&&(!a||!t.cancelOnFailedZoom)&&e.panningEnabled){var c=t.pan;r.number(c.x)&&(e.pan.x=c.x,s=!1),r.number(c.y)&&(e.pan.y=c.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify({type:"viewport"})),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(r.string(t)){var n=t;t=this.mutableElements().filter(n)}else r.elementOrCollection(t)||(t=this.mutableElements());if(0!==t.length){var i=t.boundingBox(),o=this.width(),a=this.height();return{x:(o-(e=void 0===e?this._private.zoom:e)*(i.x1+i.x2))/2,y:(a-e*(i.y1+i.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t=this._private,e=t.container;return t.sizeCache=t.sizeCache||(e?function(){var t=i.getComputedStyle(e),n=function(e){return parseFloat(t.getPropertyValue(e))};return{width:e.clientWidth-n("padding-left")-n("padding-right"),height:e.clientHeight-n("padding-top")-n("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};a.centre=a.center,a.autolockNodes=a.autolock,a.autoungrabifyNodes=a.autoungrabify,t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(4),o=n(7),a=n(12),s=n(95),l=n(0),c=n(11),u={},d={};function f(t,e,n){var s=n,d=function(n){r.error("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(a.prototype[e])return d(e);a.prototype[e]=n}else if("collection"===t){if(o.prototype[e])return d(e);o.prototype[e]=n}else if("layout"===t){for(var f=function(t){this.options=t,n.call(this,t),l.plainObject(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},h=f.prototype=Object.create(n.prototype),g=[],m=0;m<g.length;m++){var v=g[m];h[v]=h[v]||function(){return this}}h.start&&!h.run?h.run=function(){return this.start(),this}:!h.start&&h.run&&(h.start=function(){return this.run(),this});var y=n.prototype.stop;h.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return y?y.call(this):this.emit("layoutstop"),this},h.destroy||(h.destroy=function(){return this}),h.cy=function(){return this._private.cy};var b=function(t){return t._private.cy};r.assign(h,{createEmitter:function(){return this._private.emitter=new c({eventFields:function(t){return{layout:t,cy:b(t),target:t}},bubble:function(){return!0},parent:function(t){return b(t)},context:this}),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),i.eventAliasesOn(h),s=f}else if("renderer"===t&&"null"!==e&&"base"!==e){var w=p("renderer","base"),_=w.prototype,x=n,S=n.prototype,C=function(){w.apply(this,arguments),x.apply(this,arguments)},E=C.prototype;for(var T in _){var M=_[T];if(null!=S[T])return d(T);E[T]=M}for(var k in S)E[k]=S[k];_.clientFunctions.forEach(function(t){E[t]=E[t]||function(){r.error("Renderer does not implement `renderer."+t+"()` on its prototype")}}),s=C}return r.setMap({map:u,keys:[t,e],value:s})}function p(t,e){return r.getMap({map:u,keys:[t,e]})}var h=function(){return 2===arguments.length?p.apply(null,arguments):3===arguments.length?f.apply(null,arguments):4===arguments.length?function(t,e,n,i){return r.getMap({map:d,keys:[t,e,n,i]})}.apply(null,arguments):5===arguments.length?function(t,e,n,i,o){return r.setMap({map:d,keys:[t,e,n,i],value:o})}.apply(null,arguments):void r.error("Invalid extension access syntax")};a.prototype.extension=h,s.forEach(function(t){t.extensions.forEach(function(e){f(t.type,e.name,e.impl)})}),t.exports=h},function(t,e,n){"use strict";t.exports=[{type:"layout",extensions:n(96)},{type:"renderer",extensions:n(105)}]},function(t,e,n){"use strict";t.exports=[{name:"breadthfirst",impl:n(97)},{name:"circle",impl:n(98)},{name:"concentric",impl:n(99)},{name:"cose",impl:n(100)},{name:"grid",impl:n(101)},{name:"null",impl:n(102)},{name:"preset",impl:n(103)},{name:"random",impl:n(104)}]},function(t,e,n){"use strict";var r=n(1),i=n(2),o=n(0),a={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function s(t){this.options=r.extend({},a,t)}s.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,a=r.nodes().not(":parent"),s=r,l=i.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c=void 0;if(o.elementOrCollection(e.roots))c=e.roots;else if(o.array(e.roots)){for(var u=[],d=0;d<e.roots.length;d++){var f=e.roots[d],p=n.getElementById(f);u.push(p)}c=n.collection(u)}else if(o.string(e.roots))c=n.$(e.roots);else if(e.directed)c=a.roots();else{for(var h=[],g=a,m=function(){var t=n.collection();r.bfs({roots:g[0],visit:function(e,n,r,i,o){t=t.add(e)},directed:!1}),g=g.not(t),h.push(t)};g.length>0;)m();c=n.collection();for(var v=function(t){var e=h[t],n=e.maxDegree(!1),r=e.filter(function(t){return t.degree(!1)===n});c=c.add(r)},y=0;y<h.length;y++)v(y)}var b=[],w={},_={},x={},S={},C={};s.bfs({roots:c,directed:e.directed,visit:function(t,e,n,r,i){var o=t[0],a=o.id();if(b[i]||(b[i]=[]),b[i].push(o),w[a]=!0,_[a]=i,x[a]=n,S[a]=e,n){var s=n.id();(C[s]=C[s]||[]).push(t)}}});for(var E=[],T=0;T<a.length;T++){var M=a[T];w[M.id()]||E.push(M)}for(var k=3*E.length,A=0;0!==E.length&&A<k;){for(var I=E.shift(),O=I.neighborhood().nodes(),P=!1,L=0;L<O.length;L++){var D=_[O[L].id()];if(void 0!==D){b[D].push(I),P=!0;break}}P||E.push(I),A++}for(;0!==E.length;){var N=E.shift();0===b.length&&b.push([]),b[0].push(N)}var R=function(){for(var t=0;t<b.length;t++)for(var e=b[t],n=0;n<e.length;n++){var r=e[n];null!=r?r._private.scratch.breadthfirst={depth:t,index:n}:(e.splice(n,1),n--)}};R();for(var F=function(t){for(var e=t.connectedEdges(function(e){return e.data("target")===t.id()}),n=t._private.scratch.breadthfirst,r=0,i=void 0,o=0;o<e.length;o++){var a=e[o].source()[0],s=a._private.scratch.breadthfirst;n.depth<=s.depth&&r<s.depth&&(r=s.depth,i=a)}return i},B=0;B<e.maximalAdjustments;B++){for(var j=b.length,q=[],z=0;z<j;z++)for(var U=b[z],$=U.length,V=0;V<$;V++){var H=U[V],W=H._private.scratch.breadthfirst,G=F(H);G&&(W.intEle=G,q.push(H))}for(var Y=0;Y<q.length;Y++){var K=q[Y],X=K._private.scratch.breadthfirst,Q=X.intEle._private.scratch.breadthfirst;b[X.depth][X.index]=null;for(var Z=Q.depth+1;Z>b.length-1;)b.push([]);b[Z].push(K),X.depth=Z,X.index=b[Z].length-1}R()}var J=0;if(e.avoidOverlap)for(var tt=0;tt<a.length;tt++){var et=a[tt].layoutDimensions(e),nt=et.w,rt=et.h;J=Math.max(J,nt,rt)}for(var it={},ot=function(t){if(it[t.id()])return it[t.id()];for(var e=t._private.scratch.breadthfirst.depth,n=t.neighborhood().nodes().not(":parent").intersection(a),r=0,i=0,o=0;o<n.length;o++){var s=n[o]._private.scratch.breadthfirst,l=s.index,c=s.depth,u=b[c].length;(e>c||0===e)&&(r+=l/u,i++)}return r/=i=Math.max(1,i),0===i&&(r=void 0),it[t.id()]=r,r},at=function(t,e){return ot(t)-ot(e)},st=0;st<3;st++){for(var lt=0;lt<b.length;lt++)b[lt]=b[lt].sort(at);R()}for(var ct=0,ut=0;ut<b.length;ut++)ct=Math.max(b[ut].length,ct);for(var dt=l.x1+l.w/2,ft=l.x1+l.h/2,pt=function(t,n){var r=t._private.scratch.breadthfirst,i=r.depth,o=r.index,a=b[i].length,s=Math.max(l.w/(a+1),J),c=Math.max(l.h/(b.length+1),J),u=Math.min(l.w/2/b.length,l.h/2/b.length);if(u=Math.max(u,J),e.circle){if(e.circle){var d=u*i+u-(b.length>0&&b[0].length<=3?u/2:0),f=2*Math.PI/b[i].length*o;return 0===i&&1===b[0].length&&(d=1),{x:dt+d*Math.cos(f),y:ft+d*Math.sin(f)}}return{x:dt+(o+1-(a+1)/2)*s,y:(i+1)*c}}var p={x:dt+(o+1-(a+1)/2)*s,y:(i+1)*c};return p},ht={},gt=b.length-1;gt>=0;gt--)for(var mt=b[gt],vt=0;vt<mt.length;vt++){var yt=mt[vt];ht[yt.id()]=pt(yt,b.length)}return a.layoutPositions(this,e,function(t){return ht[t.id()]}),this},t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(2),o=n(0),a={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function s(t){this.options=r.extend({},a,t)}s.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,a=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,s=r.nodes().not(":parent");e.sort&&(s=s.sort(e.sort));for(var l=i.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c=l.x1+l.w/2,u=l.y1+l.h/2,d=(void 0===e.sweep?2*Math.PI-2*Math.PI/s.length:e.sweep)/Math.max(1,s.length-1),f=void 0,p=0,h=0;h<s.length;h++){var g=s[h].layoutDimensions(e),m=g.w,v=g.h;p=Math.max(p,m,v)}if(f=o.number(e.radius)?e.radius:s.length<=1?0:Math.min(l.h,l.w)/2-p,s.length>1&&e.avoidOverlap){p*=1.75;var y=Math.cos(d)-Math.cos(0),b=Math.sin(d)-Math.sin(0),w=Math.sqrt(p*p/(y*y+b*b));f=Math.max(w,f)}return s.layoutPositions(this,e,function(t,n){var r=e.startAngle+n*d*(a?1:-1),i=f*Math.cos(r),o=f*Math.sin(r);return{x:c+i,y:u+o}}),this},t.exports=s},function(t,e,n){"use strict";var r=n(1),i=n(2),o={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function a(t){this.options=r.extend({},o,t)}a.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,o=e.eles.nodes().not(":parent"),a=i.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s=a.x1+a.w/2,l=a.y1+a.h/2,c=[],u=(e.startAngle,0),d=0;d<o.length;d++){var f,p=o[d];f=e.concentric(p),c.push({value:f,node:p}),p._private.scratch.concentric=f}o.updateStyle();for(var h=0;h<o.length;h++){var g=o[h].layoutDimensions(e);u=Math.max(u,g.w,g.h)}c.sort(function(t,e){return e.value-t.value});for(var m=e.levelWidth(o),v=[[]],y=v[0],b=0;b<c.length;b++){var w=c[b];if(y.length>0)Math.abs(y[0].value-w.value)>=m&&(y=[],v.push(y));y.push(w)}var _=u+e.minNodeSpacing;if(!e.avoidOverlap){var x=v.length>0&&v[0].length>1,S=(Math.min(a.w,a.h)/2-_)/(v.length+x?1:0);_=Math.min(_,S)}for(var C=0,E=0;E<v.length;E++){var T=v[E],M=void 0===e.sweep?2*Math.PI-2*Math.PI/T.length:e.sweep,k=T.dTheta=M/Math.max(1,T.length-1);if(T.length>1&&e.avoidOverlap){var A=Math.cos(k)-Math.cos(0),I=Math.sin(k)-Math.sin(0),O=Math.sqrt(_*_/(A*A+I*I));C=Math.max(O,C)}T.r=C,C+=_}if(e.equidistant){for(var P=0,L=0,D=0;D<v.length;D++){var N=v[D].r-L;P=Math.max(P,N)}L=0;for(var R=0;R<v.length;R++){var F=v[R];0===R&&(L=F.r),F.r=L,L+=P}}for(var B={},j=0;j<v.length;j++)for(var q=v[j],z=q.dTheta,U=q.r,$=0;$<q.length;$++){var V=q[$],H=e.startAngle+(n?1:-1)*z*$,W={x:s+U*Math.cos(H),y:l+U*Math.sin(H)};B[V.node.id()]=W}return o.layoutPositions(this,e,function(t){var e=t.id();return B[e]}),this},t.exports=a},function(t,e,n){"use strict";var r,i=n(1),o=n(2),a=n(0),s=n(5),l={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1,weaver:!1};function c(t){this.options=i.extend({},l,t),this.options.layout=this}c.prototype.run=function(){var t=this.options,e=t.cy,n=this,o=this.thread,l=t.weaver?t.weaver.Thread:null,c={listeners:[],on:function(t,e){return this.listeners.push({event:t,callback:e}),this},trigger:function(t){a.string(t)&&(t={type:t});var e=function(e){e.callback(t)};return this.listeners.filter(function(e){return e.event===t.type}).forEach(e),this},pass:function(t){return this.pass=t,this},run:function(t){var e=this.pass;return new s(function(n){n(t(e))})},stop:function(){return this},stopped:function(){return!0}};function d(t){var e={type:"message",message:t};c.trigger(e)}o&&!o.stopped()||(o=this.thread=l?new l:c),n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),r=!0===t.debug;var f=u(e,n,t);r&&p(f),t.randomize&&h(f,e);var m=Date.now(),v=!1,y=function(n){n=n||{},v&&!n.next||!n.force&&Date.now()-m<t.animationThreshold||(v=!0,i.requestAnimationFrame(function(){g(f,e,t),!0===t.fit&&e.fit(t.padding),v=!1,n.next&&n.next()}))};o.on("message",function(t){var e=t.message;f.layoutNodes=e,y()}),o.pass({layoutInfo:f,options:{animate:t.animate,refresh:t.refresh,componentSpacing:t.componentSpacing,nodeOverlap:t.nodeOverlap,nestingFactor:t.nestingFactor,gravity:t.gravity,numIter:t.numIter,initialTemp:t.initialTemp,coolingFactor:t.coolingFactor,minTemp:t.minTemp}}).run(function(t){var e=t.layoutInfo,n=t.options,r=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,a=0;a<i;a++)for(var s=t.layoutNodes[t.idToIndex[r[a]]],l=a+1;l<i;l++){var c=t.layoutNodes[t.idToIndex[r[l]]];o(s,c,t,e)}},i=function(t){return-t+2*t*Math.random()},o=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var o=e.positionX-t.positionX,l=e.positionY-t.positionY;0===o&&0===l&&(o=i(1),l=i(1));var c=a(t,e,o,l);if(c>0)var u=(f=r.nodeOverlap*c)*o/(y=Math.sqrt(o*o+l*l)),d=f*l/y;else{var f,p=s(t,o,l),h=s(e,-1*o,-1*l),g=h.x-p.x,m=h.y-p.y,v=g*g+m*m,y=Math.sqrt(v);u=(f=(t.nodeRepulsion+e.nodeRepulsion)/v)*g/y,d=f*m/y}t.isLocked||(t.offsetX-=u,t.offsetY-=d),e.isLocked||(e.offsetX+=u,e.offsetY+=d)}},a=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var o=t.maxY-e.minY;else o=e.maxY-t.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},s=function(t,e,n){var r=t.positionX,i=t.positionY,o=t.height||1,a=t.width||1,s=n/e,l=o/a,c={};return 0===e&&0<n?(c.x=r,c.y=i+o/2,c):0===e&&0>n?(c.x=r,c.y=i+o/2,c):0<e&&-1*l<=s&&s<=l?(c.x=r+a/2,c.y=i+a*n/2/e,c):0>e&&-1*l<=s&&s<=l?(c.x=r-a/2,c.y=i-a*n/2/e,c):0<n&&(s<=-1*l||s>=l)?(c.x=r+o*e/2/n,c.y=i+o/2,c):0>n&&(s<=-1*l||s>=l)?(c.x=r-o*e/2/n,c.y=i-o/2,c):c},l=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.idToIndex[r.sourceId],o=t.layoutNodes[i],a=t.idToIndex[r.targetId],l=t.layoutNodes[a],c=l.positionX-o.positionX,u=l.positionY-o.positionY;if(0!==c||0!==u){var d=s(o,c,u),f=s(l,-1*c,-1*u),p=f.x-d.x,h=f.y-d.y,g=Math.sqrt(p*p+h*h),m=Math.pow(r.idealLength-g,2)/r.elasticity;if(0!==g)var v=m*p/g,y=m*h/g;else v=0,y=0;o.isLocked||(o.offsetX+=v,o.offsetY+=y),l.isLocked||(l.offsetX-=v,l.offsetY-=y)}}},c=function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var o=t.clientHeight/2,a=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[r[0]]],l=t.layoutNodes[t.idToIndex[s.parentId]];o=l.positionX,a=l.positionY}for(var c=0;c<i;c++){var u=t.layoutNodes[t.idToIndex[r[c]]];if(!u.isLocked){var d=o-u.positionX,f=a-u.positionY,p=Math.sqrt(d*d+f*f);if(p>1){var h=e.gravity*d/p,g=e.gravity*f/p;u.offsetX+=h,u.offsetY+=g}}}}},u=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var o=n[r++],a=t.idToIndex[o],s=t.layoutNodes[a],l=s.children;if(0<l.length&&!s.isLocked){for(var c=s.offsetX,u=s.offsetY,d=0;d<l.length;d++){var f=t.layoutNodes[t.idToIndex[l[d]]];f.offsetX+=c,f.offsetY+=u,n[++i]=l[d]}s.offsetX=0,s.offsetY=0}}},f=function(t,e){for(var n=0;n<t.nodeSize;n++){0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(n=0;n<t.nodeSize;n++){if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=p(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,h(i,t)}}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},p=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},h=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o?t(i,n):void 0}},g=function(t){return function(t,e,n){r(t,e),l(t,e),c(t,e),u(t,e),f(t,e)}(e,n),e.temperature=e.temperature*n.coolingFactor,!(e.temperature<n.minTemp)},m=0;do{for(var v=0;v<n.refresh&&m<n.numIter;){var y;if(!(y=g()))break;v++,m++}!0===n.animate&&d(e.layoutNodes)}while(y&&m+1<n.numIter);return function(t,n){for(var r=e.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId;(i[s]=i[s]||[]).push(a)}var l=0;for(o=0;o<i.length;o++)if(m=i[o]){m.x1=1/0,m.x2=-1/0,m.y1=1/0,m.y2=-1/0;for(var c=0;c<m.length;c++){var u=m[c];m.x1=Math.min(m.x1,u.positionX-u.width/2),m.x2=Math.max(m.x2,u.positionX+u.width/2),m.y1=Math.min(m.y1,u.positionY-u.height/2),m.y2=Math.max(m.y2,u.positionY+u.height/2)}m.w=m.x2-m.x1,m.h=m.y2-m.y1,l+=m.w*m.h}i.sort(function(t,e){return e.w*e.h-t.w*t.h});var d=0,f=0,p=0,h=0,g=Math.sqrt(l)*e.clientWidth/e.clientHeight;for(o=0;o<i.length;o++){var m;if(m=i[o]){for(c=0;c<m.length;c++)(u=m[c]).isLocked||(u.positionX+=d,u.positionY+=f);d+=m.w+n.componentSpacing,p+=m.w+n.componentSpacing,h=Math.max(h,m.h),p>g&&(f+=h+n.componentSpacing,d=0,p=0,h=0)}}}(0,n),e}).then(function(t){f.layoutNodes=t.layoutNodes,o.stop(),b()});var b=function(){!0===t.animate||!1===t.animate?y({force:!0,next:function(){n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n})}}):t.eles.nodes().layoutPositions(n,t,function(t){var e=f.layoutNodes[f.idToIndex[t.data("id")]];return{x:e.positionX,y:e.positionY}})};return this},c.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},c.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var u=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),s={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:o.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},l=n.eles.components(),c={},u=0;u<l.length;u++)for(var f=l[u],p=0;p<f.length;p++){c[f[p].id()]=u}for(u=0;u<s.nodeSize;u++){var h=(b=i[u]).layoutDimensions(n);(N={}).isLocked=b.locked(),N.id=b.data("id"),N.parentId=b.data("parent"),N.cmptId=c[b.id()],N.children=[],N.positionX=b.position("x"),N.positionY=b.position("y"),N.offsetX=0,N.offsetY=0,N.height=h.w,N.width=h.h,N.maxX=N.positionX+N.width/2,N.minX=N.positionX-N.width/2,N.maxY=N.positionY+N.height/2,N.minY=N.positionY-N.height/2,N.padLeft=parseFloat(b.style("padding")),N.padRight=parseFloat(b.style("padding")),N.padTop=parseFloat(b.style("padding")),N.padBottom=parseFloat(b.style("padding")),N.nodeRepulsion=a.fn(n.nodeRepulsion)?n.nodeRepulsion(b):n.nodeRepulsion,s.layoutNodes.push(N),s.idToIndex[N.id]=u}var g=[],m=0,v=-1,y=[];for(u=0;u<s.nodeSize;u++){var b,w=(b=s.layoutNodes[u]).parentId;null!=w?s.layoutNodes[s.idToIndex[w]].children.push(b.id):(g[++v]=b.id,y.push(b.id))}for(s.graphSet.push(y);m<=v;){var _=g[m++],x=s.idToIndex[_],S=s.layoutNodes[x].children;if(S.length>0){s.graphSet.push(S);for(u=0;u<S.length;u++)g[++v]=S[u]}}for(u=0;u<s.graphSet.length;u++){var C=s.graphSet[u];for(p=0;p<C.length;p++){var E=s.idToIndex[C[p]];s.indexToGraph[E]=u}}for(u=0;u<s.edgeSize;u++){var T=r[u],M={};M.id=T.data("id"),M.sourceId=T.data("source"),M.targetId=T.data("target");var k=a.fn(n.idealEdgeLength)?n.idealEdgeLength(T):n.idealEdgeLength,A=a.fn(n.edgeElasticity)?n.edgeElasticity(T):n.edgeElasticity,I=s.idToIndex[M.sourceId],O=s.idToIndex[M.targetId];if(s.indexToGraph[I]!=s.indexToGraph[O]){for(var P=d(M.sourceId,M.targetId,s),L=s.graphSet[P],D=0,N=s.layoutNodes[I];-1===L.indexOf(N.id);)N=s.layoutNodes[s.idToIndex[N.parentId]],D++;for(N=s.layoutNodes[O];-1===L.indexOf(N.id);)N=s.layoutNodes[s.idToIndex[N.parentId]],D++;k*=D*n.nestingFactor}M.idealLength=k,M.elasticity=A,s.layoutEdges.push(M)}return s},d=function(t,e,n){var r=f(t,e,0,n);return 2>r.count?0:r.graph},f=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var l=o[s],c=i.idToIndex[l],u=i.layoutNodes[c].children;if(0!==u.length){var d=t(e,n,i.indexToGraph[i.idToIndex[u[0]]],i);if(0!==d.count){if(1!==d.count)return d;if(2===++a)break}}}return{count:a,graph:r}},p=function(t){if(r){console.debug("layoutNodes:");for(var e=0;e<t.nodeSize;e++){var n=t.layoutNodes[e],i="\nindex: "+e+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(i)}for(var e in console.debug("idToIndex"),t.idToIndex)console.debug("Id: "+e+"\nIndex: "+t.idToIndex[e]);console.debug("Graph Set");var o=t.graphSet;for(e=0;e<o.length;e++)console.debug("Set : "+e+": "+o[e].toString());for(i="IndexToGraph",e=0;e<t.indexToGraph.length;e++)i+="\nIndex : "+e+" Graph: "+t.indexToGraph[e];console.debug(i),i="Layout Edges";for(e=0;e<t.layoutEdges.length;e++){var a=t.layoutEdges[e];i+="\nEdge Index: "+e+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(i),i="nodeSize: "+t.nodeSize,i+="\nedgeSize: "+t.edgeSize,i+="\ntemperature: "+t.temperature,console.debug(i)}},h=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var o=t.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},g=function(t,e,n){var r=n.layout,i=n.eles.nodes(),o=t.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};n.boundingBox&&(i.forEach(function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(e,r){var i=t.layoutNodes[t.idToIndex[e.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,l=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+l*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))};t.exports=c},function(t,e,n){"use strict";var r=n(1),i=n(2),o={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function a(t){this.options=r.extend({},o,t)}a.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));var o=i.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)r.layoutPositions(this,e,function(t){return{x:o.x1,y:o.y1}});else{var a=r.size(),s=Math.sqrt(a*o.h/o.w),l=Math.round(s),c=Math.round(o.w/o.h*s),u=function(t){if(null==t)return Math.min(l,c);Math.min(l,c)==l?l=t:c=t},d=function(t){if(null==t)return Math.max(l,c);Math.max(l,c)==l?l=t:c=t},f=e.rows,p=null!=e.cols?e.cols:e.columns;if(null!=f&&null!=p)l=f,c=p;else if(null!=f&&null==p)l=f,c=Math.ceil(a/l);else if(null==f&&null!=p)c=p,l=Math.ceil(a/c);else if(c*l>a){var h=u(),g=d();(h-1)*g>=a?u(h-1):(g-1)*h>=a&&d(g-1)}else for(;c*l<a;){var m=u(),v=d();(v+1)*m>=a?d(v+1):u(m+1)}var y=o.w/c,b=o.h/l;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var w=0;w<r.length;w++){var _=r[w],x=_._private.position;null!=x.x&&null!=x.y||(x.x=0,x.y=0);var S=_.layoutDimensions(e),C=e.avoidOverlapPadding,E=S.w+C,T=S.h+C;y=Math.max(y,E),b=Math.max(b,T)}for(var M={},k=function(t,e){return!!M["c-"+t+"-"+e]},A=function(t,e){M["c-"+t+"-"+e]=!0},I=0,O=0,P=function(){++O>=c&&(O=0,I++)},L={},D=0;D<r.length;D++){var N=r[D],R=e.position(N);if(R&&(void 0!==R.row||void 0!==R.col)){var F={row:R.row,col:R.col};if(void 0===F.col)for(F.col=0;k(F.row,F.col);)F.col++;else if(void 0===F.row)for(F.row=0;k(F.row,F.col);)F.row++;L[N.id()]=F,A(F.row,F.col)}}r.layoutPositions(this,e,function(t,e){var n=void 0,r=void 0;if(t.locked()||t.isParent())return!1;var i=L[t.id()];if(i)n=i.col*y+y/2+o.x1,r=i.row*b+b/2+o.y1;else{for(;k(I,O);)P();n=O*y+y/2+o.x1,r=I*b+b/2+o.y1,A(I,O),P()}return{x:n,y:r}})}return this},t.exports=a},function(t,e,n){"use strict";var r=n(1),i={ready:function(){},stop:function(){}};function o(t){this.options=r.extend({},i,t)}o.prototype.run=function(){var t=this.options,e=t.eles;t.cy;return this.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},o.prototype.stop=function(){return this},t.exports=o},function(t,e,n){"use strict";var r=n(1),i=n(0),o={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function a(t){this.options=r.extend({},o,t)}a.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=i.fn(t.positions);return e.layoutPositions(this,t,function(e,r){var i=function(e){if(null==t.positions)return null;if(n)return t.positions(e);var r=t.positions[e._private.data.id];return null==r?null:r}(e);return!e.locked()&&null!=i&&i}),this},t.exports=a},function(t,e,n){"use strict";var r=n(1),i=n(2),o={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function a(t){this.options=r.extend({},o,t)}a.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles.nodes().not(":parent"),r=i.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.layoutPositions(this,t,function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this},t.exports=a},function(t,e,n){"use strict";t.exports=[{name:"null",impl:n(106)},{name:"base",impl:n(107)},{name:"canvas",impl:n(123)}]},function(t,e,n){"use strict";function r(t){this.options=t,this.notifications=0}var i=function(){};r.prototype={recalculateRenderedStyle:i,notify:function(){this.notifications++},init:i},t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(3),a=function(t){this.init(t)},s=a.prototype;s.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],s.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(o){var r=o.document,a=r.head,s="__________cytoscape_container",l=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(s)<0&&(n.className=(n.className||"")+" "+s),!l){var c=r.createElement("style");c.id="__________cytoscape_stylesheet",c.innerHTML="."+s+" { position: relative; }",a.insertBefore(c,a.children[0])}"static"===o.getComputedStyle(n).getPropertyValue("position")&&i.error("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.hideLabelsOnViewport=t.hideLabelsOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=t.pixelRatio,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},s.notify=function(t){var e,n=this;if(!this.destroyed){e=r.array(t.type)?t.type:[t.type];for(var i={},o=0;o<e.length;o++){i[e[o]]=!0}i.init?n.load():i.destroy?n.destroy():((i.add||i.remove||i.load||i.zorder)&&n.invalidateCachedZSortedEles(),i.viewport&&n.redrawHint("select",!0),(i.load||i.resize)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw())}},s.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},[n(108),n(109),n(119),n(120),n(121),n(122)].forEach(function(t){i.extend(s,t)}),t.exports=a},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(1),a={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,o,a){var s=i.x-n/2-a,l=i.x+n/2+a,c=i.y-n/2-a,u=i.y+n/2+a;return s<=t&&t<=l&&c<=e&&e<=u},a=function(t,e,n,r,i){var o=t*Math.cos(r)-e*Math.sin(r),a=(t*Math.sin(r)+e*Math.cos(r))*n;return{x:o*n+i.x,y:a+i.y}},s=function(t,e,n,r){for(var i=[],o=0;o<t.length;o+=2){var s=t[o],l=t[o+1];i.push(a(s,l,e,n,r))}return i},l=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},c=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},u=function(a,u){i.string(u)&&(u=t[u]),t[a]=o.extend({name:a,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,i,o,a){var c=l(s(this.points,n+2*a,i,o));return r.pointInsidePolygonPoints(t,e,c)},roughCollide:n,draw:function(t,n,r,i){var o=s(this.points,n,r,i);e.arrowShapeImpl("polygon")(t,o)},spacing:function(t){return 0},gap:c},u)};u("none",{collide:o.falsify,roughCollide:o.falsify,draw:o.noop,spacing:o.zeroify,gap:o.zeroify}),u("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),u("arrow","triangle"),u("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,r,i,o){var l=s(this.points,n,r,i),c=this.controlPoint,u=a(c[0],c[1],n,r,i);e.arrowShapeImpl(this.name)(t,l,u)},gap:function(t){return.8*c(t)}}),u("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,i,o,a,c){var u=l(s(this.points,n+2*c,i,o)),d=l(s(this.pointsTee,n+2*c,i,o));return r.pointInsidePolygonPoints(t,e,u)||r.pointInsidePolygonPoints(t,e,d)},draw:function(t,n,r,i,o){var a=s(this.points,n,r,i),l=s(this.pointsTee,n,r,i);e.arrowShapeImpl(this.name)(t,a,l)}}),u("triangle-cross",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(t,e,n,i,o,a,c){var u=l(s(this.points,n+2*c,i,o)),d=l(s(this.crossLinePts(n,a),n+2*c,i,o));return r.pointInsidePolygonPoints(t,e,u)||r.pointInsidePolygonPoints(t,e,d)},draw:function(t,n,r,i,o){var a=s(this.points,n,r,i),l=s(this.crossLinePts(n,o),n,r,i);e.arrowShapeImpl(this.name)(t,a,l)}}),u("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*c(t)}}),u("circle",{radius:.15,collide:function(t,e,n,r,i,o,a){var s=i;return Math.pow(s.x-t,2)+Math.pow(s.y-e,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(t,n,r,i,o){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),u("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),u("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),u("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}};t.exports=a},function(t,e,n){"use strict";var r=n(1),i={};[n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118)].forEach(function(t){r.extend(i,t)}),t.exports=i},function(t,e,n){"use strict";var r=n(3),i=n(2),o=n(1),a=(r=n(3),{projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),l=n.zoom();return[((t-i)/a-s.x)/l,((e-o)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=r.getComputedStyle(t),i=function(t){return parseFloat(n.getPropertyValue(t))},o=i("padding-left"),a=i("padding-right"),s=i("padding-top"),l=i("padding-bottom"),c=i("border-left-width"),u=i("border-right-width"),d=i("border-top-width"),f=i("border-bottom-width"),p=t.clientWidth,h=t.clientHeight,g=o+a,m=s+l,v=c+u,y=d+f,b=e.width/(p+v),w=p-g,_=h-m,x=(e.width,e.height,e.left+o+c),S=e.top+s+d;return this.containerBB=[x,S,w,_,b]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var a,s,l=this,c=this,u=c.getCachedZSortedEles(),d=[],f=c.cy.zoom(),p=c.cy.hasCompoundNodes(),h=(r?24:8)/f,g=(r?8:2)/f,m=(r?8:2)/f,v=1/0;function y(t,e){if(t.isNode()){if(s)return;s=t,d.push(t)}if(t.isEdge()&&(null==e||e<v))if(a){if(a.pstyle("z-index").value===t.pstyle("z-index").value)for(var n=0;n<d.length;n++)if(d[n].isEdge()){d[n]=t,a=t,v=null!=e?e:v;break}}else d.push(t),a=t,v=null!=e?e:v}function b(n){var r=n.outerWidth()+2*g,i=n.outerHeight()+2*g,o=r/2,a=i/2,s=n.position();if(s.x-o<=t&&t<=s.x+o&&s.y-a<=e&&e<=s.y+a&&c.nodeShapes[l.getNodeShape(n)].checkPoint(t,e,0,r,i,s.x,s.y))return y(n,0),!0}function w(n){var r,o=n._private,a=o.rscratch,s=n.pstyle("width").pfValue,u=n.pstyle("arrow-scale").value,f=s/2+h,g=f*f,m=2*f,v=o.source,w=o.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var _=a.allpts,x=0;x+3<_.length;x+=2)if(i.inLineVicinity(t,e,_[x],_[x+1],_[x+2],_[x+3],m)&&g>(r=i.sqdistToFiniteLine(t,e,_[x],_[x+1],_[x+2],_[x+3])))return y(n,r),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(_=a.allpts,x=0;x+5<a.allpts.length;x+=4)if(i.inBezierVicinity(t,e,_[x],_[x+1],_[x+2],_[x+3],_[x+4],_[x+5],m)&&g>(r=i.sqdistToQuadraticBezier(t,e,_[x],_[x+1],_[x+2],_[x+3],_[x+4],_[x+5])))return y(n,r),!0;v=v||o.source,w=w||o.target;var S=l.getArrowWidth(s,u),C=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(x=0;x<C.length;x++){var E=C[x],T=c.arrowShapes[n.pstyle(E.name+"-arrow-shape").value],M=n.pstyle("width").pfValue;if(T.roughCollide(t,e,S,E.angle,{x:E.x,y:E.y},M,h)&&T.collide(t,e,S,E.angle,{x:E.x,y:E.y},M,h))return y(n),!0}p&&d.length>0&&(b(v),b(w))}function _(t,e,n){return o.getPrefixedProperty(t,e,n)}function x(n,r){var o,a=n._private,s=m;o=r?r+"-":"";var l=n.pstyle(o+"label").value;if("yes"===n.pstyle("text-events").strValue&&l){var c=a.rstyle,u=n.pstyle("text-border-width").pfValue,d=n.pstyle("text-background-padding").pfValue,f=_(c,"labelWidth",r)+u+2*s+2*d,p=_(c,"labelHeight",r)+u+2*s+2*d,h=_(c,"labelX",r),g=_(c,"labelY",r),v=_(a.rscratch,"labelAngle",r),b=h-f/2,w=h+f/2,x=g-p/2,S=g+p/2;if(v){var C=Math.cos(v),E=Math.sin(v),T=function(t,e){return{x:(t-=h)*C-(e-=g)*E+h,y:t*E+e*C+g}},M=T(b,x),k=T(b,S),A=T(w,x),I=T(w,S),O=[M.x,M.y,A.x,A.y,I.x,I.y,k.x,k.y];if(i.pointInsidePolygonPoints(t,e,O))return y(n),!0}else{var P={w:f,h:p,x1:b,x2:w,y1:x,y2:S};if(i.inBoundingBox(P,t,e))return y(n),!0}}}n&&(u=u.interactive);for(var S=u.length-1;S>=0;S--){var C=u[S];C.isNode()?b(C)||x(C):w(C)||x(C)||x(C,"source")||x(C,"target")}return d},getAllInBox:function(t,e,n,r){var o=this.getCachedZSortedEles().interactive,a=[],s=Math.min(t,n),l=Math.max(t,n),c=Math.min(e,r),u=Math.max(e,r);t=s,n=l,e=c,r=u;for(var d=i.makeBoundingBox({x1:t,y1:e,x2:n,y2:r}),f=0;f<o.length;f++){var p=o[f];if(p.isNode()){var h=p,g=h.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});i.boundingBoxesIntersect(d,g)&&!i.boundingBoxInBoundingBox(g,d)&&a.push(h)}else{var m=p,v=m._private,y=v.rscratch;if(null!=y.startX&&null!=y.startY&&!i.inBoundingBox(d,y.startX,y.startY))continue;if(null!=y.endX&&null!=y.endY&&!i.inBoundingBox(d,y.endX,y.endY))continue;if("bezier"===y.edgeType||"multibezier"===y.edgeType||"self"===y.edgeType||"compound"===y.edgeType||"segments"===y.edgeType||"haystack"===y.edgeType){for(var b=v.rstyle.bezierPts||v.rstyle.linePts||v.rstyle.haystackPts,w=!0,_=0;_<b.length;_++)if(!i.pointInBoundingBox(d,b[_])){w=!1;break}w&&a.push(m)}else"haystack"!==y.edgeType&&"straight"!==y.edgeType||a.push(m)}}return a}});t.exports=a},function(t,e,n){"use strict";var r=n(2),i={calculateArrowAngles:function(t){var e,n,i,o,a,s,l=t._private.rscratch,c="haystack"===l.edgeType,u="bezier"===l.edgeType,d="multibezier"===l.edgeType,f="segments"===l.edgeType,p="compound"===l.edgeType,h="self"===l.edgeType;if(c?(i=l.haystackPts[0],o=l.haystackPts[1],a=l.haystackPts[2],s=l.haystackPts[3]):(i=l.arrowStartX,o=l.arrowStartY,a=l.arrowEndX,s=l.arrowEndY),m=l.midX,v=l.midY,f)e=i-l.segpts[0],n=o-l.segpts[1];else if(d||p||h||u){var g=l.allpts;e=i-r.qbezierAt(g[0],g[2],g[4],.1),n=o-r.qbezierAt(g[1],g[3],g[5],.1)}else e=i-m,n=o-v;l.srcArrowAngle=r.getAngleFromDisp(e,n);var m=l.midX,v=l.midY;if(c&&(m=(i+a)/2,v=(o+s)/2),e=a-i,n=s-o,f)if((g=l.allpts).length/2%2==0){var y=(b=g.length/2)-2;e=g[b]-g[y],n=g[b+1]-g[y+1]}else{y=(b=g.length/2-1)-2;var b,w=b+2;e=g[b]-g[y],n=g[b+1]-g[y+1]}else if(d||p||h){var _,x,S,C,g=l.allpts;if(l.ctrlpts.length/2%2==0){var E=(T=(M=g.length/2-1)+2)+2;_=r.qbezierAt(g[M],g[T],g[E],0),x=r.qbezierAt(g[M+1],g[T+1],g[E+1],0),S=r.qbezierAt(g[M],g[T],g[E],1e-4),C=r.qbezierAt(g[M+1],g[T+1],g[E+1],1e-4)}else{var T,M=(T=g.length/2-1)-2;E=T+2;_=r.qbezierAt(g[M],g[T],g[E],.4999),x=r.qbezierAt(g[M+1],g[T+1],g[E+1],.4999),S=r.qbezierAt(g[M],g[T],g[E],.5),C=r.qbezierAt(g[M+1],g[T+1],g[E+1],.5)}e=S-_,n=C-x}(l.midtgtArrowAngle=r.getAngleFromDisp(e,n),l.midDispX=e,l.midDispY=n,e*=-1,n*=-1,f)&&((g=l.allpts).length/2%2==0||(e=-(g[w=(b=g.length/2-1)+2]-g[b]),n=-(g[w+1]-g[b+1])));if(l.midsrcArrowAngle=r.getAngleFromDisp(e,n),f)e=a-l.segpts[l.segpts.length-2],n=s-l.segpts[l.segpts.length-1];else if(d||p||h||u){var k=(g=l.allpts).length;e=a-r.qbezierAt(g[k-6],g[k-4],g[k-2],.9),n=s-r.qbezierAt(g[k-5],g[k-3],g[k-1],.9)}else e=a-m,n=s-v;l.tgtArrowAngle=r.getAngleFromDisp(e,n)}};i.getArrowWidth=i.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)},t.exports=i},function(t,e,n){"use strict";var r=n(2),i=n(0),o={};function a(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}o.findEdgeControlPoints=function(t){if(t&&0!==t.length){for(var e,n,o,a,s,l=this,c=l.cy.hasCompoundNodes(),u={},d=[],f=[],p=0;p<t.length;p++){var h=(Ue=(ze=t[p])._private).data,g="unbundled-bezier"===(L=ze.pstyle("curve-style").value)||"segments"===L,m="unbundled-bezier"===L||"bezier"===L;if("none"!==ze.pstyle("display").value)if("haystack"!==L){var v=h.source,y=h.target;e=v>y?y+"$-$"+v:v+"$-$"+y,g&&(e="unbundled$-$"+h.id);var b=u[e];null==b&&(b=u[e]=[],d.push(e)),b.push(ze),g&&(b.hasUnbundled=!0),m&&(b.hasBezier=!0)}else f.push(ze)}for(var w=0;w<d.length;w++){var _=u[e=d[w]];if(_.sort(function(t,e){return t.poolIndex()-e.poolIndex()}),We=_[0]._private.source,Ge=_[0]._private.target,!_.hasUnbundled&&We.id()>Ge.id()){var x=We;We=Ge,Ge=x}Ye=We.position(),Ke=Ge.position(),Xe=We.outerWidth(),Ze=We.outerHeight(),Qe=Ge.outerWidth(),Je=Ge.outerHeight(),n=l.nodeShapes[this.getNodeShape(We)],o=l.nodeShapes[this.getNodeShape(Ge)],s=!1;var S={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0},C=Ye.x,E=Ye.y,T=Xe,M=Ze,k=Ke.x,A=Ke.y,I=Qe,O=Je,P=_.length;for(p=0;p<_.length;p++){var L,D,N=(Ve=(ze=_[p])._private.rscratch).lastEdgeIndex,R=p,F=Ve.lastNumEdges,B=(g="unbundled-bezier"===(L=ze.pstyle("curve-style").value)||"segments"===L,We.id()!==ze.source().id()),j=ze.pstyle("control-point-distances"),q=ze.pstyle("loop-direction").pfValue,z=ze.pstyle("loop-sweep").pfValue,U=ze.pstyle("control-point-weights"),$=j&&U?Math.min(j.value.length,U.value.length):1,V=ze.pstyle("control-point-step-size").pfValue,H=j?j.pfValue[0]:void 0,W=U.value[0],G=ze.pstyle("edge-distances").value,Y=ze.pstyle("segment-weights"),K=ze.pstyle("segment-distances"),X=Math.min(Y.pfValue.length,K.pfValue.length),Q=ze.pstyle("source-endpoint").value,Z=ze.pstyle("target-endpoint").value,J=ze.pstyle("source-arrow-shape").value,tt=ze.pstyle("target-arrow-shape").value,et=ze.pstyle("arrow-scale").value,nt=ze.pstyle("width").pfValue,rt=Ve.lastSrcCtlPtX,it=Ve.lastSrcCtlPtY,ot=Ve.lastSrcCtlPtW,at=Ve.lastSrcCtlPtH,st=Ve.lastTgtCtlPtX,lt=Ve.lastTgtCtlPtY,ct=Ve.lastTgtCtlPtW,ut=Ve.lastTgtCtlPtH,dt=Ve.lastCurveStyle,ft=L,pt=Ve.lastCtrlptDists,ht=j?j.strValue:null,gt=Ve.lastCtrlptWs,mt=U.strValue,vt=Ve.lastSegmentWs,yt=Y.strValue,bt=Ve.lastSegmentDs,wt=K.strValue,_t=Ve.lastStepSize,xt=V,St=Ve.lastLoopDir,Ct=q,Et=Ve.lastLoopSwp,Tt=z,Mt=Ve.lastEdgeDistances,kt=G,At=Ve.lastSrcEndpt,It=Q,Ot=Ve.lastTgtEndpt,Pt=Z,Lt=Ve.lastSrcArr,Dt=J,Nt=Ve.lastTgtArr,Rt=tt,Ft=Ve.lastLineW,Bt=nt,jt=Ve.lastArrScl,qt=et;if(Ve.badBezier=!!s,rt===C&&it===E&&ot===T&&at===M&&st===k&&lt===A&&ct===I&&ut===O&&dt===ft&&pt===ht&&gt===mt&&vt===yt&&bt===wt&&_t===xt&&St===Ct&&Et===Tt&&Mt===kt&&At===It&&Ot===Pt&&Lt===Dt&&Nt===Rt&&Ft===Bt&&jt===qt&&(N===R&&F===P||g)?D=!0:(D=!1,Ve.lastSrcCtlPtX=C,Ve.lastSrcCtlPtY=E,Ve.lastSrcCtlPtW=T,Ve.lastSrcCtlPtH=M,Ve.lastTgtCtlPtX=k,Ve.lastTgtCtlPtY=A,Ve.lastTgtCtlPtW=I,Ve.lastTgtCtlPtH=O,Ve.lastEdgeIndex=R,Ve.lastNumEdges=P,Ve.lastCurveStyle=ft,Ve.lastCtrlptDists=ht,Ve.lastCtrlptWs=mt,Ve.lastSegmentDs=wt,Ve.lastSegmentWs=yt,Ve.lastStepSize=xt,Ve.lastLoopDir=Ct,Ve.lastLoopSwp=Tt,Ve.lastEdgeDistances=kt,Ve.lastSrcEndpt=It,Ve.lastTgtEndpt=Pt,Ve.lastSrcArr=Dt,Ve.lastTgtArr=Rt,Ve.lastLineW=Bt,Ve.lastArrScl=qt),!D){if(!_.calculatedIntersection&&We!==Ge&&(_.hasBezier||_.hasUnbundled)){_.calculatedIntersection=!0;var zt=n.intersectLine(Ye.x,Ye.y,Xe,Ze,Ke.x,Ke.y,0);_.srcIntn=zt;var Ut=o.intersectLine(Ke.x,Ke.y,Qe,Je,Ye.x,Ye.y,0);_.tgtIntn=Ut;var $t={x1:zt[0],x2:Ut[0],y1:zt[1],y2:Ut[1]},Vt={x1:Ye.x,x2:Ke.x,y1:Ye.y,y2:Ke.y},Ht=Ut[1]-zt[1],Wt=Ut[0]-zt[0],Gt=Math.sqrt(Wt*Wt+Ht*Ht),Yt={x:Wt,y:Ht},Kt={x:Yt.x/Gt,y:Yt.y/Gt};a={x:-Kt.y,y:Kt.x},o.checkPoint(zt[0],zt[1],0,Qe,Je,Ke.x,Ke.y)&&n.checkPoint(Ut[0],Ut[1],0,Xe,Ze,Ye.x,Ye.y)&&(a={},s=!0)}if(B?(Ve.srcIntn=_.tgtIntn,Ve.tgtIntn=_.srcIntn):(Ve.srcIntn=_.srcIntn,Ve.tgtIntn=_.tgtIntn),We===Ge){Ve.edgeType="self";var Xt=p,Qt=V;g&&(Xt=0,Qt=H);var Zt=q-Math.PI/2,Jt=Zt-z/2,te=Zt+z/2,ee=String(q+"_"+z);Xt=void 0===S[ee]?S[ee]=0:++S[ee],Ve.ctrlpts=[Ye.x+1.4*Math.cos(Jt)*Qt*(Xt/3+1),Ye.y+1.4*Math.sin(Jt)*Qt*(Xt/3+1),Ye.x+1.4*Math.cos(te)*Qt*(Xt/3+1),Ye.y+1.4*Math.sin(te)*Qt*(Xt/3+1)]}else if(c&&(We.isParent()||We.isChild()||Ge.isParent()||Ge.isChild())&&(We.parents().anySame(Ge)||Ge.parents().anySame(We))){Ve.edgeType="compound",Ve.badBezier=!1;Xt=p,Qt=V;g&&(Xt=0,Qt=H);var ne={x:Ye.x-Xe/2,y:Ye.y-Ze/2},re={x:Ke.x-Qe/2,y:Ke.y-Je/2},ie={x:Math.min(ne.x,re.x),y:Math.min(ne.y,re.y)},oe=Math.max(.5,Math.log(.01*Xe)),ae=Math.max(.5,Math.log(.01*Qe));Ve.ctrlpts=[ie.x,ie.y-(1+Math.pow(50,1.12)/100)*Qt*(Xt/3+1)*oe,ie.x-(1+Math.pow(50,1.12)/100)*Qt*(Xt/3+1)*ae,ie.y]}else if("segments"===L){Ve.edgeType="segments",Ve.segpts=[];for(var se=0;se<X;se++){var le=Y.pfValue[se],ce=K.pfValue[se],ue=1-le,de=le,fe={x:(be="node-position"===G?Vt:$t).x1*ue+be.x2*de,y:be.y1*ue+be.y2*de};Ve.segpts.push(fe.x+a.x*ce,fe.y+a.y*ce)}}else if(_.length%2!=1||p!==Math.floor(_.length/2)||g){var pe=g;Ve.edgeType=pe?"multibezier":"bezier",Ve.ctrlpts=[];for(var he=0;he<$;he++){var ge,me=(.5-_.length/2+p)*V,ve=r.signum(me);pe&&(H=j?j.pfValue[he]:V,W=U.value[he]);var ye=void 0!==(ge=g?H:void 0!==H?ve*H:void 0)?ge:me;ue=1-W,de=W;if(B){x=ue;ue=de,de=x}var be;fe={x:(be="node-position"===G?Vt:$t).x1*ue+be.x2*de,y:be.y1*ue+be.y2*de};Ve.ctrlpts.push(fe.x+a.x*ye,fe.y+a.y*ye)}}else Ve.edgeType="straight";this.findEndpoints(ze);var we=!i.number(Ve.startX)||!i.number(Ve.startY),_e=!i.number(Ve.arrowStartX)||!i.number(Ve.arrowStartY),xe=!i.number(Ve.endX)||!i.number(Ve.endY),Se=!i.number(Ve.arrowEndX)||!i.number(Ve.arrowEndY),Ce=3*(this.getArrowWidth(ze.pstyle("width").pfValue,ze.pstyle("arrow-scale").value)*this.arrowShapeWidth);if("bezier"===Ve.edgeType){var Ee=r.dist({x:Ve.ctrlpts[0],y:Ve.ctrlpts[1]},{x:Ve.startX,y:Ve.startY}),Te=Ee<Ce,Me=r.dist({x:Ve.ctrlpts[0],y:Ve.ctrlpts[1]},{x:Ve.endX,y:Ve.endY}),ke=Me<Ce,Ae=!1;if(we||_e||Te){Ae=!0;var Ie={x:Ve.ctrlpts[0]-Ye.x,y:Ve.ctrlpts[1]-Ye.y},Oe=Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y),Pe={x:Ie.x/Oe,y:Ie.y/Oe},Le=Math.max(Xe,Ze),De={x:Ve.ctrlpts[0]+2*Pe.x*Le,y:Ve.ctrlpts[1]+2*Pe.y*Le},Ne=n.intersectLine(Ye.x,Ye.y,Xe,Ze,De.x,De.y,0);Te?(Ve.ctrlpts[0]=Ve.ctrlpts[0]+Pe.x*(Ce-Ee),Ve.ctrlpts[1]=Ve.ctrlpts[1]+Pe.y*(Ce-Ee)):(Ve.ctrlpts[0]=Ne[0]+Pe.x*Ce,Ve.ctrlpts[1]=Ne[1]+Pe.y*Ce)}if(xe||Se||ke){Ae=!0;Ie={x:Ve.ctrlpts[0]-Ke.x,y:Ve.ctrlpts[1]-Ke.y},Oe=Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y),Pe={x:Ie.x/Oe,y:Ie.y/Oe},Le=Math.max(Xe,Ze),De={x:Ve.ctrlpts[0]+2*Pe.x*Le,y:Ve.ctrlpts[1]+2*Pe.y*Le};var Re=o.intersectLine(Ke.x,Ke.y,Qe,Je,De.x,De.y,0);ke?(Ve.ctrlpts[0]=Ve.ctrlpts[0]+Pe.x*(Ce-Me),Ve.ctrlpts[1]=Ve.ctrlpts[1]+Pe.y*(Ce-Me)):(Ve.ctrlpts[0]=Re[0]+Pe.x*Ce,Ve.ctrlpts[1]=Re[1]+Pe.y*Ce)}Ae&&this.findEndpoints(ze)}if("multibezier"===Ve.edgeType||"bezier"===Ve.edgeType||"self"===Ve.edgeType||"compound"===Ve.edgeType){Ve.allpts=[],Ve.allpts.push(Ve.startX,Ve.startY);for(he=0;he+1<Ve.ctrlpts.length;he+=2)Ve.allpts.push(Ve.ctrlpts[he],Ve.ctrlpts[he+1]),he+3<Ve.ctrlpts.length&&Ve.allpts.push((Ve.ctrlpts[he]+Ve.ctrlpts[he+2])/2,(Ve.ctrlpts[he+1]+Ve.ctrlpts[he+3])/2);var Fe,Be;Ve.allpts.push(Ve.endX,Ve.endY),Ve.ctrlpts.length/2%2==0?(Fe=Ve.allpts.length/2-1,Ve.midX=Ve.allpts[Fe],Ve.midY=Ve.allpts[Fe+1]):(Fe=Ve.allpts.length/2-3,Be=.5,Ve.midX=r.qbezierAt(Ve.allpts[Fe],Ve.allpts[Fe+2],Ve.allpts[Fe+4],Be),Ve.midY=r.qbezierAt(Ve.allpts[Fe+1],Ve.allpts[Fe+3],Ve.allpts[Fe+5],Be))}else if("straight"===Ve.edgeType)Ve.allpts=[Ve.startX,Ve.startY,Ve.endX,Ve.endY],Ve.midX=(Ve.startX+Ve.endX+Ve.arrowStartX+Ve.arrowEndX)/4,Ve.midY=(Ve.startY+Ve.endY+Ve.arrowStartY+Ve.arrowEndY)/4;else if("segments"===Ve.edgeType)if(Ve.allpts=[],Ve.allpts.push(Ve.startX,Ve.startY),Ve.allpts.push.apply(Ve.allpts,Ve.segpts),Ve.allpts.push(Ve.endX,Ve.endY),Ve.segpts.length%4==0){var je=Ve.segpts.length/2,qe=je-2;Ve.midX=(Ve.segpts[qe]+Ve.segpts[je])/2,Ve.midY=(Ve.segpts[qe+1]+Ve.segpts[je+1])/2}else{qe=Ve.segpts.length/2-1;Ve.midX=Ve.segpts[qe],Ve.midY=Ve.segpts[qe+1]}this.storeEdgeProjections(ze),this.calculateArrowAngles(ze)}this.recalculateEdgeLabelProjections(ze),this.calculateLabelAngles(ze)}}for(p=0;p<f.length;p++){var ze,Ue,$e=(Ue=(ze=f[p])._private).rscratch,Ve=$e;if(!$e.haystack){var He=2*Math.random()*Math.PI;$e.source={x:Math.cos(He),y:Math.sin(He)};He=2*Math.random()*Math.PI;$e.target={x:Math.cos(He),y:Math.sin(He)}}var We=Ue.source,Ge=Ue.target,Ye=We.position(),Ke=Ge.position(),Xe=We.width(),Qe=Ge.width(),Ze=We.height(),Je=Ge.height(),tn=(Le=ze.pstyle("haystack-radius").value)/2;Ve.haystackPts=Ve.allpts=[Ve.source.x*Xe*tn+Ye.x,Ve.source.y*Ze*tn+Ye.y,Ve.target.x*Qe*tn+Ke.x,Ve.target.y*Je*tn+Ke.y],Ve.midX=(Ve.allpts[0]+Ve.allpts[2])/2,Ve.midY=(Ve.allpts[1]+Ve.allpts[3])/2,$e.edgeType=$e.lastCurveStyle="haystack",$e.haystack=!0,this.storeEdgeProjections(ze),this.calculateArrowAngles(ze),this.recalculateEdgeLabelProjections(ze),this.calculateLabelAngles(ze)}}},o.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return a(e.segpts)},o.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return a(e.ctrlpts)},o.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return{x:e.midX,y:e.midY}},t.exports=o},function(t,e,n){"use strict";var r=n(2),i=n(0),o={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var o=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(o[0]=o[0]*r),"%"===e.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var a=e.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(r,i),l=[n.x+Math.cos(a)*s,n.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,l[0],l[1],0)},findEndpoints:function(t){var e=this,n=void 0,o=t.source()[0],a=t.target()[0],s=o.position(),l=a.position(),c=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,d=t.pstyle("target-distance-from-node").pfValue,f=t.pstyle("source-distance-from-node").pfValue,p=t._private.rscratch,h=p.edgeType,g="self"===h||"compound"===h,m="bezier"===h||"multibezier"===h||g,v="bezier"!==h,y="straight"===h||"segments"===h,b="segments"===h,w=m||v||y,_=t.pstyle("source-endpoint"),x=g?"outside-to-node":_.value,S=t.pstyle("target-endpoint"),C=g?"outside-to-node":S.value;p.srcManEndpt=_,p.tgtManEndpt=S;var E=void 0,T=void 0,M=void 0,k=void 0;if(m){var A=[p.ctrlpts[0],p.ctrlpts[1]];E=v?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:A,T=A}else if(y){var I=b?p.segpts.slice(0,2):[l.x,l.y];E=b?p.segpts.slice(p.segpts.length-2):[s.x,s.y],T=I}"inside-to-node"===C?n=[l.x,l.y]:S.units?n=this.manualEndptToPx(a,S):"outside-to-line"===C?n=p.tgtIntn:("outside-to-node"===C?M=E:"outside-to-line"===C&&(M=[s.x,s.y]),n=e.nodeShapes[this.getNodeShape(a)].intersectLine(l.x,l.y,a.outerWidth(),a.outerHeight(),M[0],M[1],0));var O=r.shortenIntersection(n,E,e.arrowShapes[c].spacing(t)+d),P=r.shortenIntersection(n,E,e.arrowShapes[c].gap(t)+d);p.endX=P[0],p.endY=P[1],p.arrowEndX=O[0],p.arrowEndY=O[1],"inside-to-node"===x?n=[s.x,s.y]:_.units?n=this.manualEndptToPx(o,_):"outside-to-line"===x?n=p.srcIntn:("outside-to-node"===x?k=T:"outside-to-line"===x&&(k=[l.x,l.y]),n=e.nodeShapes[this.getNodeShape(o)].intersectLine(s.x,s.y,o.outerWidth(),o.outerHeight(),k[0],k[1],0));var L=r.shortenIntersection(n,T,e.arrowShapes[u].spacing(t)+f),D=r.shortenIntersection(n,T,e.arrowShapes[u].gap(t)+f);p.startX=D[0],p.startY=D[1],p.arrowStartX=L[0],p.arrowStartY=L[1],w&&(i.number(p.startX)&&i.number(p.startY)&&i.number(p.endX)&&i.number(p.endY)?p.badLine=!1:p.badLine=!0)},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;switch(e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;switch(e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}}};t.exports=o},function(t,e,n){"use strict";var r=n(2),i={};function o(t,e,n){for(var i=function(t,e,n,i){return r.qbezierAt(t,e,n,i)},o=e._private.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var s=t.bezierProjPcts[a];o.push({x:i(n[0],n[2],n[4],s),y:i(n[1],n[3],n[5],s)})}}i.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)o(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var a=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var s=n.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},i.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)},t.exports=i},function(t,e,n){"use strict";var r=n(2),i=n(0),o=n(1),a={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!i.emptyString(e)){var n,r,o=t._private,a=t.width(),s=t.height(),l=t.padding(),c=t.position(),u=t.pstyle("text-halign").strValue,d=t.pstyle("text-valign").strValue,f=o.rscratch,p=o.rstyle;switch(u){case"left":n=c.x-a/2-l;break;case"right":n=c.x+a/2+l;break;default:n=c.x}switch(d){case"top":r=c.y-s/2-l;break;case"bottom":r=c.y+s/2+l;break;default:r=c.y}f.labelX=n,f.labelY=r,p.labelX=n,p.labelY=r,this.applyLabelDimensions(t)}}},s=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},l=function(t,e){var n=e.x-t.x,r=e.y-t.y;return s(n,r)};a.recalculateEdgeLabelProjections=function(t){var e,n=t._private,i=n.rscratch,a=this,c={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(c.mid||c.source||c.target){e={x:i.midX,y:i.midY};var u=function(t,e,r){o.setPrefixedProperty(n.rscratch,t,e,r),o.setPrefixedProperty(n.rstyle,t,e,r)};u("labelX",null,e.x),u("labelY",null,e.y);var d=s(i.midDispX,i.midDispY);u("labelAutoAngle",null,d);var f=function(o){var s,d="source"===o;if(c[o]){var f=t.pstyle(o+"-text-offset").pfValue;switch(i.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var p,h=function t(){if(t.cache)return t.cache;for(var e=[],o=0;o+5<i.allpts.length;o+=4){var s={x:i.allpts[o],y:i.allpts[o+1]},l={x:i.allpts[o+2],y:i.allpts[o+3]},c={x:i.allpts[o+4],y:i.allpts[o+5]};e.push({p0:s,p1:l,p2:c,startDist:0,length:0,segments:[]})}var u=n.rstyle.bezierPts,d=a.bezierProjPcts.length;function f(t,e,n,i,o){var a=r.dist(e,n),s=t.segments[t.segments.length-1],l={p0:e,p1:n,t0:i,t1:o,startDist:s?s.startDist+s.length:0,length:a};t.segments.push(l),t.length+=a}for(o=0;o<e.length;o++){var p=e[o],h=e[o-1];h&&(p.startDist=h.startDist+h.length),f(p,p.p0,u[o*d],0,a.bezierProjPcts[0]);for(var g=0;g<d-1;g++)f(p,u[o*d+g],u[o*d+g+1],a.bezierProjPcts[g],a.bezierProjPcts[g+1]);f(p,u[o*d+d-1],p.p2,a.bezierProjPcts[d-1],1)}return t.cache=e}(),g=0,m=0,v=0;v<h.length;v++){for(var y=h[d?v:h.length-1-v],b=0;b<y.segments.length;b++){var w=y.segments[d?b:y.segments.length-1-b],_=v===h.length-1&&b===y.segments.length-1;if(g=m,(m+=w.length)>=f||_){p={cp:y,segment:w};break}}if(p)break}y=p.cp;var x=(f-g)/(w=p.segment).length,S=w.t1-w.t0,C=d?w.t0+S*x:w.t1-S*x;C=r.bound(0,C,1),e=r.qbezierPtAt(y.p0,y.p1,y.p2,C),s=function(t,e,n,i){var o=r.bound(0,i-.001,1),a=r.bound(0,i+.001,1),s=r.qbezierPtAt(t,e,n,o),c=r.qbezierPtAt(t,e,n,a);return l(s,c)}(y.p0,y.p1,y.p2,C);break;case"straight":case"segments":case"haystack":var E,T,M,k,A=0,I=i.allpts.length;for(v=0;v+3<I&&(d?(M={x:i.allpts[v],y:i.allpts[v+1]},k={x:i.allpts[v+2],y:i.allpts[v+3]}):(M={x:i.allpts[I-2-v],y:i.allpts[I-1-v]},k={x:i.allpts[I-4-v],y:i.allpts[I-3-v]}),T=A,!((A+=E=r.dist(M,k))>=f));v+=2);C=(f-T)/E;C=r.bound(0,C,1),e=r.lineAt(M,k,C),s=l(M,k)}u("labelX",o,e.x),u("labelY",o,e.y),u("labelAutoAngle",o,s)}};f("source"),f("target"),this.applyLabelDimensions(t)}},a.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},a.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r);o.setPrefixedProperty(n.rstyle,"labelWidth",e,i.width),o.setPrefixedProperty(n.rscratch,"labelWidth",e,i.width),o.setPrefixedProperty(n.rstyle,"labelHeight",e,i.height),o.setPrefixedProperty(n.rscratch,"labelHeight",e,i.height)},a.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,a=t.pstyle("text-transform").value,s=function(t,r){return r?(o.setPrefixedProperty(n.rscratch,t,e,r),r):o.getPrefixedProperty(n.rscratch,t,e)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var l=t.pstyle("text-wrap").value;if("wrap"===l){var c=s("labelKey");if(c&&s("labelWrapKey")===c)return s("labelWrapCachedText");for(var u=i.split("\n"),d=t.pstyle("text-max-width").pfValue,f=[],p=0;p<u.length;p++){var h=u[p];if(this.calculateLabelDimensions(t,h,"line="+h).width>d){for(var g=h.split(/\s+/),m="",v=0;v<g.length;v++){var y=g[v],b=0===m.length?y:m+" "+y;this.calculateLabelDimensions(t,b,"testLine="+b).width<=d?m+=y+" ":(f.push(m),m=y+" ")}m.match(/^\s+$/)||f.push(m)}else f.push(h)}s("labelWrapCachedLines",f),i=s("labelWrapCachedText",f.join("\n")),s("labelWrapKey",c)}else if("ellipsis"===l){d=t.pstyle("text-max-width").pfValue;for(var w="",_=!1,x=0;x<i.length;x++){if(this.calculateLabelDimensions(t,w+i[x]+"…").width>d)break;w+=i[x],x===i.length-1&&(_=!0)}return _||(w+="…"),w}return i},a.calculateLabelDimensions=function(t,e,n){var r=t._private.labelStyleKey+"$@$"+e;n&&(r+="$@$"+n);var i=this.labelDimCache||(this.labelDimCache={});if(i[r])return i[r];var o=t.pstyle("font-style").strValue,a=1*t.pstyle("font-size").pfValue+"px",s=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,c=this.labelCalcDiv;c||(c=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(c));var u=c.style;return u.fontFamily=s,u.fontStyle=o,u.fontSize=a,u.fontWeight=l,u.position="absolute",u.left="-9999px",u.top="-9999px",u.zIndex="-1",u.visibility="hidden",u.pointerEvents="none",u.padding="0",u.lineHeight="1","wrap"===t.pstyle("text-wrap").value?u.whiteSpace="pre":u.whiteSpace="normal",c.textContent=e,i[r]={width:Math.ceil(c.clientWidth/1),height:Math.ceil(c.clientHeight/1)},i[r]},a.calculateLabelAngles=function(t){var e=t._private.rscratch,n=t.isEdge(),r=t.pstyle("text-rotation"),i=r.strValue;"none"===i?e.labelAngle=e.sourceLabelAngle=e.targetLabelAngle=0:n&&"autorotate"===i?(e.labelAngle=e.labelAutoAngle,e.sourceLabelAngle=e.sourceLabelAutoAngle,e.targetLabelAngle=e.targetLabelAutoAngle):e.labelAngle=e.sourceLabelAngle=e.targetLabelAngle="autorotate"===i?0:r.pfValue},t.exports=a},function(t,e,n){"use strict";var r={getNodeShape:function(t){var e=t.pstyle("shape").value;if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"cutrectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e}};t.exports=r},function(t,e,n){"use strict";var r={registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.merge(t);for(var i=0;i<t.length;i++){var o=t[i]._private,a=o.rstyle;r&&(a.clean=!1,o.bbCache=null);var s=a.dirtyEvents=a.dirtyEvents||{length:0};s[n.type]||(s[n.type]=!0,s.length++)}};n.binder(t).on("position.* style.* free.* bounds.*","node",function(t){var e=t.target;r(e,t),r(e.connectedEdges(),t)}).on("add.*","node",function(t){var e=t.target;r(e,t)}).on("background.*","node",function(t){var e=t.target;r(e,t,!1)}).on("add.* style.*","edge",function(t){var e=t.target;r(e,t),r(e.parallelEdges(),t)}).on("remove.*","edge",function(t){for(var e=t.target.parallelEdges(),n=0;n<e.length;n++){var i=e[n];i.removed()||r(i,t)}}).on("dirty.*","node",function(t){var e=t.target;r(e,t)});n.beforeRender(function(r){if(r){var i=n.onUpdateEleCalcsFns;if(i)for(var o=0;o<i.length;o++)(0,i[o])(r,e);for(n.recalculateRenderedStyle(e,!1),o=0;o<e.length;o++)e[o]._private.rstyle.dirtyEvents=null;e=t.collection()}},n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=[],r=[];if(!this.destroyed){void 0===e&&(e=!0);for(var i=0;i<t.length;i++){var o=(l=(s=t[i])._private).rstyle;e&&o.clean||s.removed()||"none"!==s.pstyle("display").value&&("nodes"===l.group?r.push(s):n.push(s),o.clean=!0)}for(i=0;i<r.length;i++){o=(l=(s=r[i])._private).rstyle;var a=s.position();this.recalculateNodeLabelProjection(s),o.nodeX=a.x,o.nodeY=a.y,o.nodeW=s.pstyle("width").pfValue,o.nodeH=s.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(i=0;i<n.length;i++){o=(l=(s=n[i])._private).rstyle;var s,l,c=l.rscratch;this.recalculateEdgeLabelProjections(s),o.srcX=c.arrowStartX,o.srcY=c.arrowStartY,o.tgtX=c.arrowEndX,o.tgtY=c.arrowEndY,o.midX=c.midX,o.midY=c.midY,o.labelAngle=c.labelAngle,o.sourceLabelAngle=c.sourceLabelAngle,o.targetLabelAngle=c.targetLabelAngle}}}};t.exports=r},function(t,e,n){"use strict";var r=n(17),i={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(r),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}};t.exports=i},function(t,e,n){"use strict";var r={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[t]=r[t]||{}).image=new Image;o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0});return"data:"===t.substring(0,"data:".length).toLowerCase()||(o.crossOrigin=e),o.src=t,o}};t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(2),a=(n(16),{registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(t);return o.on.apply(o,i)},binder:function(t){var e=this,n=t===window||t===document||t===document.body||r.domElement(t);if(null==e.supportsPassiveEvents){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o)}catch(t){}e.supportsPassiveEvents=i}var a=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),e.bindings.push({target:t,args:a}),(t.addEventListener||t.on).apply(t,a),this};return{on:a,addEventListener:a,addListener:a,bind:a}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()}});a.load=function(){var t=this,e=function(e,n,r,o){null==e&&(e=t.cy);for(var a=0;a<n.length;a++){var s=n[a];e.emit(i.extend({originalEvent:r,type:s},o))}},n=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},a=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.isEdge())for(var i=0;n&&i<n.length;i++){if((e=n[i]).isNode()&&e.isParent()){r=!1;break}}else r=!0;return r},s=function(t){t[0]._private.rscratch.inDragLayer=!0},l=function(t){t[0]._private.rscratch.isGrabTarget=!0},c=function(e,n){var r=function(e){var n;if(e.addToList&&t.cy.hasCompoundNodes()){if(!e.addToList.hasId){e.addToList.hasId={};for(var r=0;r<e.addToList.length;r++){var i=e.addToList[r];e.addToList.hasId[i.id()]=!0}}n=e.addToList.hasId}return n||{}}(n);r[e.id()]||(n.addToList.push(e),r[e.id()]=!0,function(t){t[0]._private.grabbed=!0}(e))},u=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(s),e.neighborhood().stdFilter(function(t){return!r||t.isEdge()}).forEach(s)),n.addToList&&e.forEach(function(t){c(t,n)}),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(s),n.connectedEdges().forEach(s)),e.addToList&&n.forEach(function(t){c(t,e)})}}(e,n),p(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},d=u,f=function(e){e&&(e.hasId={},t.getCachedZSortedEles().forEach(function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)}),t.updateCachedGrabbedEles())},p=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(s),r.forEach(s)),e.addToList&&r.forEach(function(t){c(t,e)})}}},h=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},g="undefined"!=typeof MutationObserver;g?(t.removeObserver=new MutationObserver(function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++){if(r[i]===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(e){t.destroy()});var m=i.debounce(function(){t.cy.resize()},100);g&&(t.styleObserver=new MutationObserver(m),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",m);var v=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,function(e){t.registerBinding(e,"transitionend",v),t.registerBinding(e,"animationend",v),t.registerBinding(e,"scroll",v)}),t.registerBinding(t.container,"contextmenu",function(t){t.preventDefault()});var y=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=e.touches?e.touches:[e],l=!1,c=0;c<s.length;c++){var u=s[c];if(r<=u.clientX&&u.clientX<=r+o&&i<=u.clientY&&u.clientY<=i+a){l=!0;break}}if(!l)return!1;for(var d=t.container,f=e.target.parentNode,p=!1;f;){if(f===d){p=!0;break}f=f.parentNode}return!!p};t.registerBinding(t.container,"mousedown",function(n){if(y(n)){n.preventDefault(),h(),t.hoverData.capture=!0,t.hoverData.which=n.which;var r=t.cy,i=[n.clientX,n.clientY],o=t.projectIntoViewport(i[0],i[1]),a=t.selection,s=t.findNearestElements(o[0],o[1],!0,!1),c=s[0],f=t.dragData.possibleDragElements;t.hoverData.mdownPos=o,t.hoverData.mdownGPos=i;if(3==n.which){t.hoverData.cxtStarted=!0;var p={originalEvent:n,type:"cxttapstart",position:{x:o[0],y:o[1]}};c?(c.activate(),c.emit(p),t.hoverData.down=c):r.emit(p),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==n.which){if(c&&c.activate(),null!=c&&t.nodeIsGrabbable(c)){var g=function(t){return{originalEvent:n,type:t,position:{x:o[0],y:o[1]}}};if(l(c),c.selected()){f=t.dragData.possibleDragElements=[];var m=r.$(function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)});u(m,{addToList:f}),c.emit(g("grabon")),m.forEach(function(t){t.emit(g("grab"))})}else f=t.dragData.possibleDragElements=[],d(c,{addToList:f}),c.emit(g("grabon")).emit(g("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=c,t.hoverData.downs=s,t.hoverData.downTime=(new Date).getTime(),e(c,["mousedown","tapstart","vmousedown"],n,{position:{x:o[0],y:o[1]}}),null==c?(a[4]=1,t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()):c.isEdge()&&(a[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var e=t.hoverData.down;e?e.emit({originalEvent:n,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:n,type:"taphold",position:{x:o[0],y:o[1]}})}},t.tapholdDuration)}a[0]=a[2]=o[0],a[1]=a[3]=o[1]}},!1),t.registerBinding(window,"mousemove",function(i){if(t.hoverData.capture||y(i)){var s=!1,l=t.cy,c=l.zoom(),d=[i.clientX,i.clientY],p=t.projectIntoViewport(d[0],d[1]),h=t.hoverData.mdownPos,g=t.hoverData.mdownGPos,m=t.selection,v=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(v=t.findNearestElement(p[0],p[1],!0,!1));var b,w=t.hoverData.last,_=t.hoverData.down,x=[p[0]-m[2],p[1]-m[3]],S=t.dragData.possibleDragElements;if(g){var C=d[0]-g[0],E=C*C,T=d[1]-g[1],M=E+T*T;t.hoverData.isOverThresholdDrag=b=M>=t.desktopTapThreshold2}var k=n(i);b&&(t.hoverData.tapholdCancelled=!0);s=!0,e(v,["mousemove","vmousemove","tapdrag"],i,{position:{x:p[0],y:p[1]}});var A=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||l.emit("boxstart"),m[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(b){var I={originalEvent:i,type:"cxtdrag",position:{x:p[0],y:p[1]}};_?_.emit(I):l.emit(I),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&v===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:i,type:"cxtdragout",position:{x:p[0],y:p[1]}}),t.hoverData.cxtOver=v,v&&v.emit({originalEvent:i,type:"cxtdragover",position:{x:p[0],y:p[1]}}))}}else if(t.hoverData.dragging){if(s=!0,l.panningEnabled()&&l.userPanningEnabled()){var O;if(t.hoverData.justStartedPan){var P=t.hoverData.mdownPos;O={x:(p[0]-P[0])*c,y:(p[1]-P[1])*c},t.hoverData.justStartedPan=!1}else O={x:x[0]*c,y:x[1]*c};l.panBy(O),t.hoverData.dragged=!0}p=t.projectIntoViewport(i.clientX,i.clientY)}else if(1!=m[4]||null!=_&&!_.isEdge()){if(_&&_.isEdge()&&_.active()&&_.unactivate(),_&&_.grabbed()||v==w||(w&&e(w,["mouseout","tapdragout"],i,{position:{x:p[0],y:p[1]}}),v&&e(v,["mouseover","tapdragover"],i,{position:{x:p[0],y:p[1]}}),t.hoverData.last=v),_)if(b){if(l.boxSelectionEnabled()&&k)_&&_.grabbed()&&(f(S),_.emit("free")),A();else if(_&&_.grabbed()&&t.nodeIsDraggable(_)){var L=!t.dragData.didDrag;L&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var D=[];t.hoverData.draggingEles||u(l.collection(S),{inDragLayer:!0});for(var N=0;N<S.length;N++){var R=S[N];if(t.nodeIsDraggable(R)&&R.grabbed()){var F=R.position();if(D.push(R),r.number(x[0])&&r.number(x[1])&&(F.x+=x[0],F.y+=x[1],L)){var B=t.hoverData.dragDelta;B&&r.number(B[0])&&r.number(B[1])&&(F.x+=B[0],F.y+=B[1])}}}t.hoverData.draggingEles=!0;var j=l.collection(D);j.dirtyCompoundBoundsCache(),j.emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(x[0]),e.push(x[1])):(e[0]+=x[0],e[1]+=x[1])}();s=!0}else if(b){if(t.hoverData.dragging||!l.boxSelectionEnabled()||!k&&l.panningEnabled()&&l.userPanningEnabled()){if(!t.hoverData.selecting&&l.panningEnabled()&&l.userPanningEnabled()){a(_,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,m[4]=0,t.data.bgActivePosistion=o.array2point(h),t.redrawHint("select",!0),t.redraw())}}else A();_&&_.isEdge()&&_.active()&&_.unactivate()}return m[2]=p[0],m[3]=p[1],s?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0}},!1),t.registerBinding(window,"mouseup",function(r){if(t.hoverData.capture){t.hoverData.capture=!1;var i=t.cy,o=t.projectIntoViewport(r.clientX,r.clientY),a=t.selection,s=t.findNearestElement(o[0],o[1],!0,!1),l=t.dragData.possibleDragElements,c=t.hoverData.down,u=n(r);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,c&&c.unactivate(),3===t.hoverData.which){var d={originalEvent:r,type:"cxttapend",position:{x:o[0],y:o[1]}};if(c?c.emit(d):i.emit(d),!t.hoverData.cxtDragged){var p={originalEvent:r,type:"cxttap",position:{x:o[0],y:o[1]}};c?c.emit(p):i.emit(p)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(null!=c||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||n(r)||(i.$(function(t){return t.selected()}).unselect(),l.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=l=[]),e(s,["mouseup","tapend","vmouseup"],r,{position:{x:o[0],y:o[1]}}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||e(c,["click","tap","vclick"],r,{position:{x:o[0],y:o[1]}}),s!=c||t.dragData.didDrag||t.hoverData.selecting||null!=s&&s._private.selectable&&(t.hoverData.dragging||("additive"===i.selectionType()||u?s.selected()?s.unselect():s.select():u||(i.$(":selected").unmerge(s).unselect(),s.select())),t.redrawHint("eles",!0)),t.hoverData.selecting){var h=i.collection(t.getAllInBox(a[0],a[1],a[2],a[3]));t.redrawHint("select",!0),h.length>0&&t.redrawHint("eles",!0),i.emit("boxend");var g=function(t){return t.selectable()&&!t.selected()};"additive"===i.selectionType()?h.emit("box").stdFilter(g).select().emit("boxselect"):(u||i.$(":selected").unmerge(h).unselect(),h.emit("box").stdFilter(g).select().emit("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!a[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var m=c&&c.grabbed();f(l),m&&c.emit("free")}}a[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var b,w,_,x,S,C,E,T,M,k,A,I,O;t.registerBinding(t.container,"wheel",function(e){if(!t.scrollingPage){var n,r=t.cy,i=t.projectIntoViewport(e.clientX,e.clientY),o=[i[0]*r.zoom()+r.pan().x,i[1]*r.zoom()+r.pan().y];t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4]?e.preventDefault():r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()&&(e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150),n=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,n*=t.wheelSensitivity,1===e.deltaMode&&(n*=33),r.zoom({level:r.zoom()*Math.pow(10,n),renderedPosition:{x:o[0],y:o[1]}}))}},!0),t.registerBinding(window,"scroll",function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"mouseout",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),t.registerBinding(t.container,"mouseover",function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var P,L,D,N,R=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},F=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",P=function(n){if(y(n)){h(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,o=t.touchData.earlier;if(n.touches[0]){var a=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);i[0]=a[0],i[1]=a[1]}if(n.touches[1]){a=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);i[2]=a[0],i[3]=a[1]}if(n.touches[2]){a=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);i[4]=a[0],i[5]=a[1]}if(n.touches[1]){f(t.dragData.touchDragEles);var s=t.findContainerClientCoords();M=s[0],k=s[1],A=s[2],I=s[3],b=n.touches[0].clientX-M,w=n.touches[0].clientY-k,_=n.touches[1].clientX-M,x=n.touches[1].clientY-k,O=0<=b&&b<=A&&0<=_&&_<=A&&0<=w&&w<=I&&0<=x&&x<=I;var c=r.pan(),p=r.zoom();S=R(b,w,_,x),C=F(b,w,_,x),T=[((E=[(b+_)/2,(w+x)/2])[0]-c.x)/p,(E[1]-c.y)/p];if(C<4e4&&!n.touches[2]){var g=t.findNearestElement(i[0],i[1],!0,!0),m=t.findNearestElement(i[2],i[3],!0,!0);return g&&g.isNode()?(g.activate().emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):m&&m.isNode()?(m.activate().emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=m):r.emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var v=t.findNearestElements(i[0],i[1],!0,!0),P=v[0];if(null!=P&&(P.activate(),t.touchData.start=P,t.touchData.starts=v,t.nodeIsGrabbable(P))){var L=t.dragData.touchDragEles=[],D=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),P.selected()?(D=r.$(function(e){return e.selected()&&t.nodeIsGrabbable(e)}),u(D,{addToList:L})):d(P,{addToList:L}),l(P);var N=function(t){return{originalEvent:n,type:t,position:{x:i[0],y:i[1]}}};P.emit(N("grabon")),D?D.forEach(function(t){t.emit(N("grab"))}):P.emit(N("grab"))}e(P,["touchstart","tapstart","vmousedown"],n,{position:{x:i[0],y:i[1]}}),null==P&&(t.data.bgActivePosistion={x:a[0],y:a[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||(e(t.touchData.start,["taphold"],n,{position:{x:i[0],y:i[1]}}),t.touchData.start||r.$(":selected").unselect())},t.tapholdDuration)}if(n.touches.length>=1){for(var B=t.touchData.startPosition=[],j=0;j<i.length;j++)B[j]=o[j]=i[j];var q=n.touches[0];t.touchData.startGPosition=[q.clientX,q.clientY]}}},!1),t.registerBinding(window,"touchmove",L=function(n){var i=t.touchData.capture;if(i||y(n)){var s=t.selection,l=t.cy,c=t.touchData.now,d=t.touchData.earlier,p=l.zoom();if(n.touches[0]){var h=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=h[0],c[1]=h[1]}if(n.touches[1]){h=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=h[0],c[3]=h[1]}if(n.touches[2]){h=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=h[0],c[5]=h[1]}var g,m=t.touchData.startGPosition;if(i&&n.touches[0]&&m){for(var v=[],E=0;E<c.length;E++)v[E]=c[E]-d[E];var A=n.touches[0].clientX-m[0],I=A*A,P=n.touches[0].clientY-m[1];g=I+P*P>=t.touchTapThreshold2}if(i&&t.touchData.cxt){n.preventDefault();var L=n.touches[0].clientX-M,D=n.touches[0].clientY-k,N=n.touches[1].clientX-M,B=n.touches[1].clientY-k,j=F(L,D,N,B);if(j/C>=2.25||j>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var q={originalEvent:n,type:"cxttapend",position:{x:c[0],y:c[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(q),t.touchData.start=null):l.emit(q)}}if(i&&t.touchData.cxt){q={originalEvent:n,type:"cxtdrag",position:{x:c[0],y:c[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(q):l.emit(q),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var z=t.findNearestElement(c[0],c[1],!0,!0);t.touchData.cxtOver&&z===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:n,type:"cxtdragout",position:{x:c[0],y:c[1]}}),t.touchData.cxtOver=z,z&&z.emit({originalEvent:n,type:"cxtdragover",position:{x:c[0],y:c[1]}}))}else if(i&&n.touches[2]&&l.boxSelectionEnabled())n.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||l.emit("boxstart"),t.touchData.selecting=!0,t.redrawHint("select",!0),s&&0!==s.length&&void 0!==s[0]?(s[2]=(c[0]+c[2]+c[4])/3,s[3]=(c[1]+c[3]+c[5])/3):(s[0]=(c[0]+c[2]+c[4])/3,s[1]=(c[1]+c[3]+c[5])/3,s[2]=(c[0]+c[2]+c[4])/3+1,s[3]=(c[1]+c[3]+c[5])/3+1),s[4]=1,t.touchData.selecting=!0,t.redraw();else if(i&&n.touches[1]&&l.zoomingEnabled()&&l.panningEnabled()&&l.userZoomingEnabled()&&l.userPanningEnabled()){if(n.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),tt=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var U=0;U<tt.length;U++){var $=tt[U]._private;$.grabbed=!1,$.rscratch.inDragLayer=!1}}L=n.touches[0].clientX-M,D=n.touches[0].clientY-k,N=n.touches[1].clientX-M,B=n.touches[1].clientY-k;var V=R(L,D,N,B),H=V/S;if(O){var W=(L-b+(N-_))/2,G=(D-w+(B-x))/2,Y=l.zoom(),K=Y*H,X=l.pan(),Q=T[0]*Y+X.x,Z=T[1]*Y+X.y,J={x:-K/Y*(Q-X.x-W)+Q,y:-K/Y*(Z-X.y-G)+Z};if(t.touchData.start&&t.touchData.start.active()){var tt=t.dragData.touchDragEles;f(tt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),t.touchData.start.unactivate().emit("free")}l.viewport({zoom:K,pan:J,cancelOnFailedZoom:!0}),S=V,b=L,w=D,_=N,x=B,t.pinching=!0}if(n.touches[0]){h=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=h[0],c[1]=h[1]}if(n.touches[1]){h=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=h[0],c[3]=h[1]}if(n.touches[2]){h=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=h[0],c[5]=h[1]}}else if(n.touches[0]){var et=t.touchData.start,nt=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(z=t.findNearestElement(c[0],c[1],!0,!0)),i&&null!=et&&n.preventDefault(),i&&null!=et&&t.nodeIsDraggable(et))if(g){tt=t.dragData.touchDragEles;var rt=!t.dragData.didDrag;rt&&u(l.collection(tt),{inDragLayer:!0});for(var it=0;it<tt.length;it++){var ot=tt[it];if(t.nodeIsDraggable(ot)&&ot.grabbed()){t.dragData.didDrag=!0;var at=ot.position();if(r.number(v[0])&&r.number(v[1])&&(at.x+=v[0],at.y+=v[1]),rt)t.redrawHint("eles",!0),(lt=t.touchData.dragDelta)&&r.number(lt[0])&&r.number(lt[1])&&(at.x+=lt[0],at.y+=lt[1])}}var st=l.collection(tt);st.dirtyCompoundBoundsCache(),st.emit("position drag"),t.hoverData.draggingEles=!0,t.redrawHint("drag",!0),t.touchData.startPosition[0]==d[0]&&t.touchData.startPosition[1]==d[1]&&t.redrawHint("eles",!0),t.redraw()}else{var lt;0===(lt=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(lt.push(v[0]),lt.push(v[1])):(lt[0]+=v[0],lt[1]+=v[1])}if(e(et||z,["touchmove","tapdrag","vmousemove"],n,{position:{x:c[0],y:c[1]}}),et&&et.grabbed()||z==nt||(nt&&nt.emit({originalEvent:n,type:"tapdragout",position:{x:c[0],y:c[1]}}),z&&z.emit({originalEvent:n,type:"tapdragover",position:{x:c[0],y:c[1]}})),t.touchData.last=z,i)for(U=0;U<c.length;U++)c[U]&&t.touchData.startPosition[U]&&g&&(t.touchData.singleTouchMoved=!0);if(i&&(null==et||et.isEdge())&&l.panningEnabled()&&l.userPanningEnabled()){a(et,t.touchData.starts)&&(n.preventDefault(),t.swipePanning?l.panBy({x:v[0]*p,y:v[1]*p}):g&&(t.swipePanning=!0,l.panBy({x:A*p,y:P*p}),et&&(et.unactivate(),t.data.bgActivePosistion||(t.data.bgActivePosistion=o.array2point(t.touchData.startPosition)),t.redrawHint("select",!0),t.touchData.start=null)));h=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=h[0],c[1]=h[1]}}for(E=0;E<c.length;E++)d[E]=c[E];i&&n.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",D=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(window,"touchend",N=function(n){var r=t.touchData.start;if(t.touchData.capture){0===n.touches.length&&(t.touchData.capture=!1),n.preventDefault();var i=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var o,a=t.cy,s=a.zoom(),l=t.touchData.now,c=t.touchData.earlier;if(n.touches[0]){var u=t.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=u[0],l[1]=u[1]}if(n.touches[1]){u=t.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=u[0],l[3]=u[1]}if(n.touches[2]){u=t.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=u[0],l[5]=u[1]}if(r&&r.unactivate(),t.touchData.cxt){if(o={originalEvent:n,type:"cxttapend",position:{x:l[0],y:l[1]}},r?r.emit(o):a.emit(o),!t.touchData.cxtDragged){var d={originalEvent:n,type:"cxttap",position:{x:l[0],y:l[1]}};r?r.emit(d):a.emit(d)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!n.touches[2]&&a.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var p=a.collection(t.getAllInBox(i[0],i[1],i[2],i[3]));i[0]=void 0,i[1]=void 0,i[2]=void 0,i[3]=void 0,i[4]=0,t.redrawHint("select",!0),a.emit("boxend");p.emit("box").stdFilter(function(t){return t.selectable()&&!t.selected()}).select().emit("boxselect"),p.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=r&&r.unactivate(),n.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var h=t.dragData.touchDragEles;if(null!=r){var g=r._private.grabbed;f(h),t.redrawHint("drag",!0),t.redrawHint("eles",!0),g&&r.emit("free"),e(r,["touchend","tapend","vmouseup","tapdragout"],n,{position:{x:l[0],y:l[1]}}),r.unactivate(),t.touchData.start=null}else{var m=t.findNearestElement(l[0],l[1],!0,!0);e(m,["touchend","tapend","vmouseup","tapdragout"],n,{position:{x:l[0],y:l[1]}})}var v=t.touchData.startPosition[0]-l[0],y=v*v,b=t.touchData.startPosition[1]-l[1],w=(y+b*b)*s*s;null!=r&&!t.dragData.didDrag&&r._private.selectable&&w<t.touchTapThreshold2&&!t.pinching&&("single"===a.selectionType()?(a.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved||e(r,["tap","vclick"],n,{position:{x:l[0],y:l[1]}}),t.touchData.singleTouchMoved=!0}for(var _=0;_<l.length;_++)c[_]=l[_];t.dragData.didDrag=!1,0===n.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null),n.touches.length<2&&(t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var B=[],j=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},q=function(t){B.push(function(t){return{event:t,touch:j(t)}}(t))},z=function(t){for(var e=0;e<B.length;e++){if(B[e].event.pointerId===t.pointerId)return void B.splice(e,1)}},U=function(t){t.touches=B.map(function(t){return t.touch})},$=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",function(t){$(t)||(t.preventDefault(),q(t),U(t),P(t))}),t.registerBinding(t.container,"pointerup",function(t){$(t)||(z(t),U(t),N(t))}),t.registerBinding(t.container,"pointercancel",function(t){$(t)||(z(t),U(t),D())}),t.registerBinding(t.container,"pointermove",function(t){$(t)||(t.preventDefault(),function(t){var e=B.filter(function(e){return e.event.pointerId===t.pointerId})[0];e.event=t,e.touch=j(t)}(t),U(t),L(t))})}},t.exports=a},function(t,e,n){"use strict";var r=n(2),i={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,i,o,a,s){return r.polygonIntersectLine(o,a,this.points,t,e,n/2,i/2,s)},checkPoint:function(t,e,n,i,o,a,s){return r.pointInsidePolygon(t,e,this.points,a,s,i,o,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,i,o,a,s){return r.intersectLineEllipse(o,a,t,e,n/2+s,i/2+s)},checkPoint:function(t,e,n,i,o,a,s){return r.checkInEllipse(t,e,i,o,a,s,n)}}},generateRoundRectangle:function(){return this.nodeShapes.roundrectangle={renderer:this,name:"roundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,i,o,a,s){return r.roundRectangleIntersectLine(o,a,t,e,n,i,s)},checkPoint:function(t,e,n,i,o,a,s){var l=r.getRoundRectangleRadius(i,o),c=2*l;return!!r.pointInsidePolygon(t,e,this.points,a,s,i,o-c,[0,-1],n)||(!!r.pointInsidePolygon(t,e,this.points,a,s,i-c,o,[0,-1],n)||(!!r.checkInEllipse(t,e,c,c,a-i/2+l,s-o/2+l,n)||(!!r.checkInEllipse(t,e,c,c,a+i/2-l,s-o/2+l,n)||(!!r.checkInEllipse(t,e,c,c,a+i/2-l,s+o/2-l,n)||!!r.checkInEllipse(t,e,c,c,a-i/2+l,s+o/2-l,n)))))}}},generateCutRectangle:function(){return this.nodeShapes.cutrectangle={renderer:this,name:"cutrectangle",cornerLength:r.getCutRectangleCornerLength(),points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,o=e/2,a=t/2,s=n-a,l=n+a,c=r-o,u=r+o;return{topLeft:[s,c+i,s+i,c,s+i,c+i],topRight:[l-i,c,l,c+i,l-i,c+i],bottomRight:[l,u-i,l-i,u,l-i,u-i],bottomLeft:[s+i,u,s,u-i,s+i,u-i]}},intersectLine:function(t,e,n,i,o,a,s){var l=this.generateCutTrianglePts(n+2*s,i+2*s,t,e),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return r.polygonIntersectLine(o,a,c,t,e)},checkPoint:function(t,e,n,i,o,a,s){if(r.pointInsidePolygon(t,e,this.points,a,s,i,o-2*this.cornerLength,[0,-1],n))return!0;if(r.pointInsidePolygon(t,e,this.points,a,s,i-2*this.cornerLength,o,[0,-1],n))return!0;var l=this.generateCutTrianglePts(i,o,a,s);return r.pointInsidePolygonPoints(t,e,l.topLeft)||r.pointInsidePolygonPoints(t,e,l.topRight)||r.pointInsidePolygonPoints(t,e,l.bottomRight)||r.pointInsidePolygonPoints(t,e,l.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,i,o,a,s){var l=this.generateBarrelBezierPts(n+2*s,i+2*s,t,e),c=function(t){var e=r.qbezierPtAt({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),n=r.qbezierPtAt({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),i=r.qbezierPtAt({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,n.x,n.y,i.x,i.y,t[4],t[5]]},u=[].concat(c(l.topLeft),c(l.topRight),c(l.bottomRight),c(l.bottomLeft));return r.polygonIntersectLine(o,a,u,t,e)},generateBarrelBezierPts:function(t,e,n,i){var o=e/2,a=t/2,s=n-a,l=n+a,c=i-o,u=i+o,d=r.getBarrelCurveConstants(t,e),f=d.heightOffset,p=d.widthOffset,h=d.ctrlPtOffsetPct*t,g={topLeft:[s,c+f,s+h,c,s+p,c],topRight:[l-p,c,l-h,c,l,c+f],bottomRight:[l,u-f,l-h,u,l-p,u],bottomLeft:[s+p,u,s+h,u,s,u-f]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(t,e,n,i,o,a,s){var l=r.getBarrelCurveConstants(i,o),c=l.heightOffset,u=l.widthOffset;if(r.pointInsidePolygon(t,e,this.points,a,s,i,o-2*c,[0,-1],n))return!0;if(r.pointInsidePolygon(t,e,this.points,a,s,i-2*u,o,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(i,o,a,s),f=function(t,e,n){var i=n[4],o=n[2],a=n[0],s=n[5],l=n[1],c=Math.min(i,a),u=Math.max(i,a),d=Math.min(s,l),f=Math.max(s,l);if(c<=t&&t<=u&&d<=e&&e<=f){var p=r.bezierPtsToQuadCoeff(i,o,a),h=r.solveQuadratic(p[0],p[1],p[2],t).filter(function(t){return 0<=t&&t<=1});if(h.length>0)return h[0]}return null},p=Object.keys(d),h=0;h<p.length;h++){var g=d[p[h]],m=f(t,e,g);if(null!=m){var v=g[5],y=g[3],b=g[1],w=r.qbezierAt(v,y,b,m);if(g.isTop&&w<=e)return!0;if(g.isBottom&&e<=w)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottomroundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,i,o,a,s){var l=t-(n/2+s),c=e-(i/2+s),u=c,d=t+(n/2+s),f=r.finiteLinesIntersect(o,a,t,e,l,c,d,u,!1);return f.length>0?f:r.roundRectangleIntersectLine(o,a,t,e,n,i,s)},checkPoint:function(t,e,n,i,o,a,s){var l=r.getRoundRectangleRadius(i,o),c=2*l;if(r.pointInsidePolygon(t,e,this.points,a,s,i,o-c,[0,-1],n))return!0;if(r.pointInsidePolygon(t,e,this.points,a,s,i-c,o,[0,-1],n))return!0;var u=i/2+2*n,d=o/2+2*n,f=[a-u,s-d,a-u,s,a+u,s,a+u,s-d];return!!r.pointInsidePolygonPoints(t,e,f)||(!!r.checkInEllipse(t,e,c,c,a+i/2-l,s+o/2-l,n)||!!r.checkInEllipse(t,e,c,c,a-i/2+l,s+o/2-l,n))}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",r.generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",r.generateUnitNgonPointsFitToSquare(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",r.generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",r.generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",r.generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",r.generateUnitNgonPointsFitToSquare(8,0));var n=new Array(20),i=r.generateUnitNgonPoints(5,0),o=r.generateUnitNgonPoints(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=o[2*s],n[4*s+3]=o[2*s+1];n=r.fitPolygonToSquare(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("concavehexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]),this.generatePolygon("tag",[-1,-1,.25,-1,1,0,.25,1,-1,1]),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}}};t.exports=i},function(t,e,n){"use strict";var r=n(1),i={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||r.staticEmptyObject();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){e=e||0;var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(t,e){return e.priority-t.priority})}}},o=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};i.startRenderLoop=function(){var t=this;if(!t.renderLoopStarted){t.renderLoopStarted=!0;r.requestAnimationFrame(function e(n){if(!t.destroyed){if(t.requestedFrame&&!t.skipFrame){o(t,!0,n);var i=r.performanceNow();t.render(t.renderOptions);var a=t.lastDrawTime=r.performanceNow();void 0===t.averageRedrawTime&&(t.averageRedrawTime=a-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var s=a-i;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else o(t,!1,n);t.skipFrame=!1,r.requestAnimationFrame(e)}})}},t.exports=i},function(t,e,n){"use strict";var r=n(1),i=n(0),o=n(124),a=n(125),s=c,l=c.prototype;function c(t){var e=this;e.data={canvases:new Array(l.CANVAS_LAYERS),contexts:new Array(l.CANVAS_LAYERS),canvasNeedsRedraw:new Array(l.CANVAS_LAYERS),bufferCanvases:new Array(l.BUFFER_COUNT),bufferContexts:new Array(l.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color: rgba(0,0,0,0);";e.data.canvasContainer=document.createElement("div");var r=e.data.canvasContainer.style;e.data.canvasContainer.setAttribute("style",n),r.position="relative",r.zIndex="0",r.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),(s.getAttribute("style")||"").indexOf(n)<0&&s.setAttribute("style",(s.getAttribute("style")||"")+n);for(var c=0;c<l.CANVAS_LAYERS;c++){var u=e.data.canvases[c]=document.createElement("canvas");e.data.contexts[c]=u.getContext("2d"),u.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(i.ms()?" -ms-touch-action: none; touch-action: none; ":"")),u.style.position="absolute",u.setAttribute("data-id","layer"+c),u.style.zIndex=String(l.CANVAS_LAYERS-c),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[c]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[l.NODE].setAttribute("data-id","layer"+l.NODE+"-node"),e.data.canvases[l.SELECT_BOX].setAttribute("data-id","layer"+l.SELECT_BOX+"-selectbox"),e.data.canvases[l.DRAG].setAttribute("data-id","layer"+l.DRAG+"-drag");for(c=0;c<l.BUFFER_COUNT;c++)e.data.bufferCanvases[c]=document.createElement("canvas"),e.data.bufferContexts[c]=e.data.bufferCanvases[c].getContext("2d"),e.data.bufferCanvases[c].style.position="absolute",e.data.bufferCanvases[c].setAttribute("data-id","buffer"+c),e.data.bufferCanvases[c].style.zIndex=String(-c-1),e.data.bufferCanvases[c].style.visibility="hidden";e.pathsEnabled=!0,e.data.eleTxrCache=new o(e),e.data.lyrTxrCache=new a(e,e.data.eleTxrCache),e.onUpdateEleCalcs(function(t,n){for(var r=0;r<n.length;r++){var i=n[r],o=i._private.rstyle,a=o.dirtyEvents;if(i.isNode()&&a&&1===a.length&&a.position);else if(e.data.eleTxrCache.invalidateElement(i),i.isParent()&&a.style){var s=o.prevParentOpacity,l=i.pstyle("opacity").pfValue;if(o.prevParentOpacity=l,s!==l)for(var c=i.descendants(),u=0;u<c.length;u++)e.data.eleTxrCache.invalidateElement(c[u])}}n.length>0&&e.data.lyrTxrCache.invalidateElements(n)})}l.CANVAS_LAYERS=3,l.SELECT_BOX=0,l.DRAG=1,l.NODE=2,l.BUFFER_COUNT=3,l.TEXTURE_BUFFER=0,l.MOTIONBLUR_BUFFER_NODE=1,l.MOTIONBLUR_BUFFER_DRAG=2,l.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[l.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[l.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[l.SELECT_BOX]=e}};var u="undefined"!=typeof Path2D;l.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},l.usePaths=function(){return u&&this.pathsEnabled},[n(126),n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135)].forEach(function(t){r.extend(l,t)}),t.exports=s},function(t,e,n){"use strict";var r=n(2),i=n(1),o=n(9),a=n(19),s={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},l=function(t){this.renderer=t,this.onDequeues=[],this.setupDequeueing()},c=l.prototype;c.reasons=s,c.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},c.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},c.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new o(function(t,e){return e.reqs-t.reqs})},c.getElementIdToQueue=function(){return this.eleIdToCacheQueue=this.eleIdToCacheQueue||{}},c.getElement=function(t,e,n,i,o){var a=this,l=this.renderer,c=t._private.rscratch,u=l.cy.zoom();if(0===e.w||0===e.h||!t.visible())return null;if(null==i&&(i=Math.ceil(r.log2(u*n))),i<-4)i=-4;else if(u>=3.99||i>2)return null;var d,f=Math.pow(2,i),p=e.h*f,h=e.w*f,g=c.imgCaches=c.imgCaches||{},m=g[i];if(m)return m;if(d=p<=25?25:p<=50?50:50*Math.ceil(p/50),p>1024||h>1024||t.isEdge()||t.isParent())return null;var v=a.getTextureQueue(d),y=v[v.length-2],b=function(){return a.recycleTexture(d,h)||a.addTexture(d,h)};y||(y=v[v.length-1]),y||(y=b()),y.width-y.usedWidth<h&&(y=b());for(var w,_=l.eleTextBiggerThanMin(t,f),x=function(t){return t&&t.scaledLabelShown===_},S=o&&o===s.dequeue,C=o&&o===s.highQuality,E=o&&o===s.downscale,T=i+1;T<=2;T++){if(I=g[T]){w=I;break}}var M=w&&w.level===i+1?w:null,k=function(){y.context.drawImage(M.texture.canvas,M.x,0,M.width,M.height,y.usedWidth,0,h,p)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,h,d),x(M))k();else if(x(w)){if(!C)return a.queueElement(t,w.level-1),w;for(T=w.level;T>i;T--)M=a.getElement(t,e,n,T,s.downscale);k()}else{var A;if(!S&&!C&&!E)for(T=i-1;T>=-4;T--){var I;if(I=g[T]){A=I;break}}if(x(A))return a.queueElement(t,i),A;y.context.translate(y.usedWidth,0),y.context.scale(f,f),l.drawElement(y.context,t,e,_),y.context.scale(1/f,1/f),y.context.translate(-y.usedWidth,0)}return m=g[i]={ele:t,x:y.usedWidth,texture:y,level:i,scale:f,width:h,height:p,scaledLabelShown:_},y.usedWidth+=Math.ceil(h+8),y.eleCaches.push(m),a.checkTextureFullness(y),m},c.invalidateElement=function(t){var e=t._private.rscratch.imgCaches;if(e)for(var n=-4;n<=2;n++){var r=e[n];if(r){var o=r.texture;o.invalidatedWidth+=r.width,e[n]=null,i.removeFromArray(o.eleCaches,r),this.removeFromQueue(t),this.checkTextureUtility(o)}}},c.checkTextureUtility=function(t){t.invalidatedWidth>=.5*t.width&&this.retireTexture(t)},c.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?i.removeFromArray(e,t):t.fullnessChecks++},c.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e);i.removeFromArray(n,t),t.retired=!0;for(var r=t.eleCaches,o=0;o<r.length;o++){var a=r[o],s=a.ele,l=a.level,c=s._private.rscratch.imgCaches;c&&(c[l]=null)}i.clearArray(r),this.getRetiredTextureQueue(e).push(t)},c.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=document.createElement("canvas"),n.canvas.width=n.width,n.canvas.height=n.height,n.context=n.canvas.getContext("2d"),n},c.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),o=0;o<r.length;o++){var a=r[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,i.clearArray(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),i.removeFromArray(r,a),n.push(a),a}},c.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementIdToQueue(),i=t.id(),o=r[i];if(o)o.level=Math.max(o.level,e),o.reqs++,n.updateItem(o);else{var a={ele:t,level:e,reqs:1};n.push(a),r[i]=a}},c.dequeue=function(t){for(var e=this.getElementQueue(),n=this.getElementIdToQueue(),r=[],i=0;i<1&&e.size()>0;i++){var o=e.pop(),a=o.ele;if(null==a._private.rscratch.imgCaches[o.level]){n[a.id()]=null,r.push(o);var l=a.boundingBox();this.getElement(a,l,t,o.level,s.dequeue)}}return r},c.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementIdToQueue(),r=n[t.id()];null!=r&&(r.reqs=i.MAX_INT,e.updateItem(r),e.pop(),n[t.id()]=null)},c.onDequeue=function(t){this.onDequeues.push(t)},c.offDequeue=function(t){i.removeFromArray(this.onDequeues,t)},c.setupDequeueing=a.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++){(0,t.onDequeues[n])(e)}},shouldRedraw:function(t,e,n,i){for(var o=0;o<e.length;o++){var a=e[o].ele.boundingBox();if(r.boundingBoxesIntersect(a,i))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}}),t.exports=l},function(t,e,n){"use strict";var r=n(1),i=n(2),o=n(9),a=n(0),s=n(19),l=function(t,e){var n=this,i=n.renderer=t;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=r.performanceNow()-500,n.skipping=!1,i.beforeRender(function(t,e){e-n.lastInvalidationTime<=250?n.skipping=!0:n.skipping=!1});n.layersQueue=new o(function(t,e){return e.reqs-t.reqs}),n.eleTxrCache=e,n.setupEleCacheInvalidation(),n.setupDequeueing()},c=l.prototype,u=0,d=Math.pow(2,53)-1;function f(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)}c.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=document.createElement("canvas");o.width=r,o.height=i;var a={id:u=++u%d,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,c=-a.bb.y1;return s.scale(n,n),s.translate(l,c),a},c.getLayers=function(t,e,n){var o=this,a=o.renderer.cy.zoom(),s=o.firstGet;if(o.firstGet=!1,null==n)if((n=Math.ceil(i.log2(a*e)))<-4)n=-4;else if(a>=3.99||n>2)return null;o.validateLayersElesOrdering(n,t);var l,c,u=o.layersByLevel,d=Math.pow(2,n),f=u[n]=u[n]||[];if(o.levelIsComplete(n,t))return f;!function(){var e=function(e){if(o.validateLayersElesOrdering(e,t),o.levelIsComplete(e,t))return c=u[e],!0},i=function(t){if(!c)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};i(1),i(-1);for(var a=f.length-1;a>=0;a--){var s=f[a];s.invalid&&r.removeFromArray(f,s)}}();var p=function(e){var r=(e=e||{}).after;if(function(){if(!l){l=i.makeBoundingBox();for(var e=0;e<t.length;e++)i.updateBoundingBox(l,t[e].boundingBox())}}(),l.w*d*(l.h*d)>16e6)return null;var a=o.makeLayer(l,n);if(null!=r){var s=f.indexOf(r)+1;f.splice(s,0,a)}else(void 0===e.insert||e.insert)&&f.unshift(a);return a};if(o.skipping&&!s)return null;for(var h=null,g=t.length/1,m=!s,v=0;v<t.length;v++){var y=t[v],b=y._private.rscratch,w=b.imgLayerCaches=b.imgLayerCaches||{},_=w[n];if(_)h=_;else{if((!h||h.eles.length>=g||!i.boundingBoxInBoundingBox(h.bb,y.boundingBox()))&&!(h=p({insert:!0,after:h})))return null;c||m?o.queueLayer(h,y):o.drawEleInLayer(h,y,n,e),h.eles.push(y),w[n]=h}}return c||(m?null:f)},c.getEleLevelForLayerLevel=function(t,e){return t},c.drawEleInLayer=function(t,e,n,r){var i=this.renderer,o=t.context,a=e.boundingBox();if(0!==a.w&&0!==a.h&&e.visible()){var s=this.eleTxrCache,l=s.reasons.highQuality;n=this.getEleLevelForLayerLevel(n,r);var c=s.getElement(e,a,null,n,l);c?(f(o,!1),o.drawImage(c.texture.canvas,c.x,0,c.width,c.height,a.x1,a.y1,a.w,a.h),f(o,!0)):i.drawElement(o,e)}},c.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===e.length},c.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}}},c.updateElementsInLayers=function(t,e){for(var n=a.element(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],o=n?t[r]:t[r].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},c=-4;c<=2;c++){var u=l[c];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||e(u,o,i))}},c.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},c.invalidateElements=function(t){var e=this;e.lastInvalidationTime=r.performanceNow(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(t,n,r){e.invalidateLayer(t)})},c.invalidateLayer=function(t){if(this.lastInvalidationTime=r.performanceNow(),!t.invalid){var e=t.level,n=t.eles,i=this.layersByLevel[e];r.removeFromArray(i,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var o=0;o<n.length;o++){var a=n[o]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}},c.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])})},c.setupEleCacheInvalidation=function(){var t=this,e=[];var n=r.debounce(function(){t.refineElementTextures(e),e=[]},50);t.eleTxrCache.onDequeue(function(t){for(var r=0;r<t.length;r++)e.push(t[r]);n()})},c.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},c.dequeue=function(t){for(var e=this.layersQueue,n=[],r=0;r<1&&0!==e.size();){var i=e.peek();if(i.replacement)e.pop();else if(i.replaces&&i!==i.replaces.replacement)e.pop();else if(i.invalid)e.pop();else{var o=i.elesQueue.shift();o&&(this.drawEleInLayer(i,o,i.level,t),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(e.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},c.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var o=t.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[t.level]=t)}this.requestRedraw()}},c.requestRedraw=r.debounce(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),c.setupDequeueing=s.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:r.noop,shouldRedraw:r.trueify,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}}),t.exports=l},function(t,e,n){"use strict";var r,i={};i.arrowShapeImpl=function(t){return(r||(r={polygon:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}},"triangle-backcurve":function(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];0===i&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)},"triangle-tee":function(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath(),t.beginPath&&t.beginPath();var a=n,s=n[0];t.moveTo(s.x,s.y);for(i=0;i<a.length;i++){o=a[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()},"triangle-cross":function(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath(),t.beginPath&&t.beginPath();var a=n,s=n[0];t.moveTo(s.x,s.y);for(i=0;i<a.length;i++){o=a[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()},circle:function(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}}))[t]},t.exports=i},function(t,e,n){"use strict";var r=n(2),i={drawElement:function(t,e,n,r){e.isNode()?this.drawNode(t,e,n,r):this.drawEdge(t,e,n,r)},drawCachedElement:function(t,e,n,i){var o=e.boundingBox();if(0!==o.w&&0!==o.h&&(!i||r.boundingBoxesIntersect(o,i))){var a=this.data.eleTxrCache.getElement(e,o,n);null!=a?t.drawImage(a.texture.canvas,a.x,0,a.width,a.height,o.x1,o.y1,o.w,o.h):this.drawElement(t,e)}},drawElements:function(t,e){for(var n=0;n<e.length;n++){var r=e[n];this.drawElement(t,r)}},drawCachedElements:function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];this.drawCachedElement(t,o,n,r)}},drawCachedNodes:function(t,e,n,r){for(var i=0;i<e.length;i++){var o=e[i];o.isNode()&&this.drawCachedElement(t,o,n,r)}},drawLayeredElements:function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&t.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(t,e,n,r)},drawDebugPoints:function(t,e){for(var n=function(e,n,r){t.fillStyle=r,t.fillRect(e-1,n-1,3,3)},r=0;r<e.length;r++){var i=e[r],o=i._private.rscratch;if(i.isNode()){var a=i.position();n(a.x,a.y,"magenta")}else{for(var s=o.allpts,l=0;l+1<s.length;l+=2){n(s[l],s[l+1],"cyan")}n(o.midX,o.midY,"yellow")}}}};t.exports=i},function(t,e,n){"use strict";var r={drawEdge:function(t,e,n,r){var i=this,o=e._private.rscratch,a=i.usePaths();if(e.visible()&&!o.badLine&&null!=o.allpts&&!isNaN(o.allpts[0])){var s=void 0;n&&(s=n,t.translate(-s.x1,-s.y1));var l=2*e.pstyle("overlay-padding").pfValue,c=e.pstyle("overlay-opacity").value,u=e.pstyle("overlay-color").value,d=e.pstyle("line-color").value,f=e.pstyle("opacity").value,p=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;t.lineWidth=h,t.lineCap="butt",i.strokeStyle(t,d[0],d[1],d[2],n),i.drawEdgePath(e,t,o.allpts,p)},m=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;i.drawArrowheads(t,e,n)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var v=e.pstyle("ghost-offset-x").pfValue,y=e.pstyle("ghost-offset-y").pfValue,b=e.pstyle("ghost-opacity").value,w=f*b;t.translate(v,y),g(w),m(w),t.translate(-v,-y)}g(),m(),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;t.lineWidth=l,"self"!==o.edgeType||a?t.lineCap="round":t.lineCap="butt",i.strokeStyle(t,u[0],u[1],u[2],n),i.drawEdgePath(e,t,o.allpts,"solid")}(),i.drawElementText(t,e,r),n&&t.translate(s.x1,s.y1)}},drawEdgePath:function(t,e,n,r){var i=t._private.rscratch,o=e,a=void 0,s=!1,l=this.usePaths();if(l){var c=n.join("$");i.pathCacheKey&&i.pathCacheKey===c?(a=e=i.pathCache,s=!0):(a=e=new Path2D,i.pathCacheKey=c,i.pathCache=a)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash([6,3]);break;case"solid":o.setLineDash([])}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var u=2;u+3<n.length;u+=4)e.quadraticCurveTo(n[u],n[u+1],n[u+2],n[u+3]);break;case"straight":case"segments":case"haystack":for(var d=2;d+1<n.length;d+=2)e.lineTo(n[d],n[d+1])}e=o,l?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])},drawArrowheads:function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(t,e,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=e.pstyle(n+"-arrow-shape").value;if("none"!==s){var l="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",c=e.pstyle(n+"-arrow-fill").value,u=e.pstyle("width").pfValue,d=e.pstyle("opacity").value;void 0===a&&(a=d);var f=t.globalCompositeOperation;1===a&&"hollow"!==c||(t.globalCompositeOperation="destination-out",this.fillStyle(t,255,255,255,1),this.strokeStyle(t,255,255,255,1),this.drawArrowShape(e,n,t,l,u,s,r,i,o),t.globalCompositeOperation=f);var p=e.pstyle(n+"-arrow-color").value;this.fillStyle(t,p[0],p[1],p[2],a),this.strokeStyle(t,p[0],p[1],p[2],a),this.drawArrowShape(e,n,t,c,u,s,r,i,o)}}},drawArrowShape:function(t,e,n,r,i,o,a,s,l){var c=this.usePaths(),u=t._private.rscratch,d=!1,f=void 0,p=n,h={x:a,y:s},g=t.pstyle("arrow-scale").value,m=this.getArrowWidth(i,g),v=this.arrowShapes[o];if(c){var y=m+"$"+o+"$"+l+"$"+a+"$"+s;u.arrowPathCacheKey=u.arrowPathCacheKey||{},u.arrowPathCache=u.arrowPathCache||{},u.arrowPathCacheKey[e]===y?(f=n=u.arrowPathCache[e],d=!0):(f=n=new Path2D,u.arrowPathCacheKey[e]=y,u.arrowPathCache[e]=f)}n.beginPath&&n.beginPath(),d||v.draw(n,m,l,h,i),!v.leavePathOpen&&n.closePath&&n.closePath(),n=p,"filled"!==r&&"both"!==r||(c?n.fill(f):n.fill()),"hollow"!==r&&"both"!==r||(n.lineWidth=v.matchEdgeWidth?i:1,n.lineJoin="miter",c?n.stroke(f):n.stroke())}};t.exports=r},function(t,e,n){"use strict";var r={safeDrawImage:function(t,e,n,r,i,o,a,s,l,c){i<=0||o<=0||l<=0||c<=0||t.drawImage(e,n,r,i,o,a,s,l,c)},drawInscribedImage:function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,l=a.y,c=n.cy().style(),u=c.getIndexedStyle.bind(c),d=u(n,"background-fit","value",r),f=u(n,"background-repeat","value",r),p=n.width(),h=n.height(),g=2*n.padding(),m=p+("inner"===u(n,"background-width-relative-to","value",r)?0:g),v=h+("inner"===u(n,"background-height-relative-to","value",r)?0:g),y=n._private.rscratch,b="node"===n.pstyle("background-clip").value,w=u(n,"background-image-opacity","value",r)*i,_=e.width||e.cachedW,x=e.height||e.cachedH;null!=_&&null!=x||(document.body.appendChild(e),_=e.cachedW=e.width||e.offsetWidth,x=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var S=_,C=x;if("auto"!==u(n,"background-width","value",r)&&(S="%"===u(n,"background-width","units",r)?u(n,"background-width","pfValue",r)*m:u(n,"background-width","pfValue",r)),"auto"!==u(n,"background-height","value",r)&&(C="%"===u(n,"background-height","units",r)?u(n,"background-height","pfValue",r)*v:u(n,"background-height","pfValue",r)),0!==S&&0!==C){if("contain"===d)S*=E=Math.min(m/S,v/C),C*=E;else if("cover"===d){var E;S*=E=Math.max(m/S,v/C),C*=E}var T=s-m/2;"%"===u(n,"background-position-x","units",r)?T+=(m-S)*u(n,"background-position-x","pfValue",r):T+=u(n,"background-position-x","pfValue",r);var M=l-v/2;"%"===u(n,"background-position-y","units",r)?M+=(v-C)*u(n,"background-position-y","pfValue",r):M+=u(n,"background-position-y","pfValue",r),y.pathCache&&(T-=s,M-=l,s=0,l=0);var k=t.globalAlpha;if(t.globalAlpha=w,"no-repeat"===f)b&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,m,v),t.clip())),o.safeDrawImage(t,e,0,0,_,x,T,M,S,C),b&&t.restore();else{var A=t.createPattern(e,f);t.fillStyle=A,o.nodeShapes[o.getNodeShape(n)].draw(t,s,l,m,v),t.translate(T,M),t.fill(),t.translate(-T,-M)}t.globalAlpha=k}}};t.exports=r},function(t,e,n){"use strict";var r=n(1),i=n(2),o={};o.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),o=Math.ceil(i.log2(n*r));e=Math.pow(2,o)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},o.drawElementText=function(t,e,n){var r=this;if(void 0===n){if(!r.eleTextBiggerThanMin(e))return}else if(!n)return;if(e.isNode()){if(!(o=e.pstyle("label"))||!o.value)return;var i=e.pstyle("text-halign").strValue;e.pstyle("text-valign").strValue;switch(i){case"left":t.textAlign="right";break;case"right":t.textAlign="left";break;default:t.textAlign="center"}t.textBaseline="bottom"}else{var o=e.pstyle("label"),a=e.pstyle("source-label"),s=e.pstyle("target-label");if(!(o&&o.value||a&&a.value||s&&s.value))return;t.textAlign="center",t.textBaseline="bottom"}r.drawText(t,e),e.isEdge()&&(r.drawText(t,e,"source"),r.drawText(t,e,"target"))},o.drawNodeText=o.drawEdgeText=o.drawElementText,o.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return e={context:t},this.fontCaches.push(e),e},o.setupTextStyle=function(t,e){var n=e.effectiveOpacity(),r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=e.pstyle("text-opacity").value*e.pstyle("opacity").value*n,l=e.pstyle("text-outline-opacity").value*s,c=e.pstyle("color").value,u=e.pstyle("text-outline-color").value,d=e._private.fontKey,f=this.getFontCache(t);f.key!==d&&(t.font=r+" "+a+" "+i+" "+o,f.key=d),t.lineJoin="round",this.fillStyle(t,c[0],c[1],c[2],s),this.strokeStyle(t,u[0],u[1],u[2],l)},o.drawText=function(t,e,n){var i=e._private.rscratch,o=e.effectiveOpacity();if(0!==o&&0!==e.pstyle("text-opacity").value){var a=r.getPrefixedProperty(i,"labelX",n),s=r.getPrefixedProperty(i,"labelY",n),l=this.getLabelText(e,n);if(null!=l&&""!==l&&!isNaN(a)&&!isNaN(s)){this.setupTextStyle(t,e);var c=n?n+"-":"",u=r.getPrefixedProperty(i,"labelWidth",n),d=r.getPrefixedProperty(i,"labelHeight",n),f=r.getPrefixedProperty(i,"labelAngle",n),p=e.pstyle(c+"text-margin-x").pfValue,h=e.pstyle(c+"text-margin-y").pfValue,g=e.isEdge(),m=(e.isNode(),e.pstyle("text-halign").value),v=e.pstyle("text-valign").value;g&&(m="center",v="center"),a+=p,s+=h;var y,b=e.pstyle(c+"text-rotation");if(0!==(y="autorotate"===b.strValue?g?f:0:"none"===b.strValue?0:b.pfValue)){var w=a,_=s;t.translate(w,_),t.rotate(y),a=0,s=0}switch(v){case"top":break;case"center":s+=d/2;break;case"bottom":s+=d}var x=e.pstyle("text-background-opacity").value,S=e.pstyle("text-border-opacity").value,C=e.pstyle("text-border-width").pfValue,E=e.pstyle("text-background-padding").pfValue;if(x>0||C>0&&S>0){var T=a-E;switch(m){case"left":T-=u;break;case"center":T-=u/2}var M=s-d-E,k=u+2*E,A=d+2*E;if(x>0){var I=t.fillStyle,O=e.pstyle("text-background-color").value;t.fillStyle="rgba("+O[0]+","+O[1]+","+O[2]+","+x*o+")","roundrectangle"==e.pstyle("text-background-shape").strValue?function(t,e,n,r,i,o){o=o||5,t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),t.fill()}(t,T,M,k,A,2):t.fillRect(T,M,k,A),t.fillStyle=I}if(C>0&&S>0){var P=t.strokeStyle,L=t.lineWidth,D=e.pstyle("text-border-color").value,N=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+S*o+")",t.lineWidth=C,t.setLineDash)switch(N){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=C/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(T,M,k,A),"double"===N){var R=C/2;t.strokeRect(T+R,M+R,k-2*R,A-2*R)}t.setLineDash&&t.setLineDash([]),t.lineWidth=L,t.strokeStyle=P}}var F=2*e.pstyle("text-outline-width").pfValue;if(F>0&&(t.lineWidth=F),"wrap"===e.pstyle("text-wrap").value){var B=r.getPrefixedProperty(i,"labelWrapCachedLines",n),j=d/B.length;switch(v){case"top":s-=(B.length-1)*j;break;case"center":case"bottom":s-=(B.length-1)*j}for(var q=0;q<B.length;q++)F>0&&t.strokeText(B[q],a,s),t.fillText(B[q],a,s),s+=j}else F>0&&t.strokeText(l,a,s),t.fillText(l,a,s);0!==y&&(t.rotate(-y),t.translate(-w,-_))}}},t.exports=o},function(t,e,n){"use strict";var r=n(0),i={drawNode:function(t,e,n,i){var o,a,s=this,l=e._private,c=l.rscratch,u=e.position();if(r.number(u.x)&&r.number(u.y)&&e.visible()){var d=e.effectiveOpacity(),f=s.usePaths(),p=void 0,h=!1,g=e.padding();o=e.width()+2*g,a=e.height()+2*g;var m=void 0;n&&(m=n,t.translate(-m.x1,-m.y1));for(var v=e.pstyle("background-image").value,y=new Array(v.length),b=new Array(v.length),w=0,_=0;_<v.length;_++){var x=v[_];if(y[_]=null!=x&&"none"!==x){var S=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",_);w++,b[_]=s.getCachedImage(x,S,function(){e.emitAndNotify("background")})}}var C=e.pstyle("background-blacken").value,E=e.pstyle("border-width").pfValue,T=e.pstyle("background-color").value,M=e.pstyle("background-opacity").value*d,k=e.pstyle("border-color").value,A=e.pstyle("border-style").value,I=e.pstyle("border-opacity").value*d;t.lineJoin="miter";var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;s.fillStyle(t,T[0],T[1],T[2],e)},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;s.strokeStyle(t,k[0],k[1],k[2],e)},L=e.pstyle("shape").strValue,D=e.pstyle("shape-polygon-points").pfValue;if(f){var N=L+"$"+o+"$"+a+("polygon"===L?"$"+D.join("$"):"");t.translate(u.x,u.y),c.pathCacheKey===N?(p=c.pathCache,h=!0):(p=new Path2D,c.pathCacheKey=N,c.pathCache=p)}var R=function(){if(!h){var n=u;f&&(n={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(p||t,n.x,n.y,o,a)}f?t.fill(p):t.fill()},F=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,r=l.backgrounding,i=0,o=0;o<b.length;o++)y[o]&&b[o].complete&&!b[o].error&&(i++,s.drawInscribedImage(t,b[o],e,o,n));l.backgrounding=!(i===w),r!==l.backgrounding&&e.updateStyle(!1)},B=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;s.hasPie(e)&&(s.drawPie(t,e,r),n&&(f||s.nodeShapes[s.getNodeShape(e)].draw(t,u.x,u.y,o,a)))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=(C>0?C:-C)*e,r=C>0?0:255;0!==C&&(s.fillStyle(t,r,r,r,n),f?t.fill(p):t.fill())},q=function(){if(E>0){if(t.lineWidth=E,t.lineCap="butt",t.setLineDash)switch(A){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(f?t.stroke(p):t.stroke(),"double"===A){t.lineWidth=E/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",f?t.stroke(p):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}};if("yes"===e.pstyle("ghost").value){var z=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue,$=e.pstyle("ghost-opacity").value,V=$*d;t.translate(z,U),O($*M),R(),F(V),B(0!==C||0!==E),j(V),P($*I),q(),t.translate(-z,-U)}O(),R(),F(),B(0!==C||0!==E),j(),P(),q(),f&&t.translate(-u.x,-u.y),s.drawElementText(t,e,i),function(){var n=e.pstyle("overlay-padding").pfValue,r=e.pstyle("overlay-opacity").value,i=e.pstyle("overlay-color").value;r>0&&(s.fillStyle(t,i[0],i[1],i[2],r),s.nodeShapes.roundrectangle.draw(t,u.x,u.y,o+2*n,a+2*n),t.fill())}(),n&&t.translate(m.x1,m.y1)}},hasPie:function(t){return(t=t[0])._private.hasPie},drawPie:function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,l=e.width(),c=e.height(),u=Math.min(l,c)/2,d=0;this.usePaths()&&(a=0,s=0),"%"===o.units?u*=o.pfValue:void 0!==o.pfValue&&(u=o.pfValue/2);for(var f=1;f<=i.pieBackgroundN;f++){var p=e.pstyle("pie-"+f+"-background-size").value,h=e.pstyle("pie-"+f+"-background-color").value,g=e.pstyle("pie-"+f+"-background-opacity").value*n,m=p/100;m+d>1&&(m=1-d);var v=1.5*Math.PI+2*Math.PI*d,y=v+2*Math.PI*m;0===p||d>=1||d+m>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,u,v,y),t.closePath(),this.fillStyle(t,h[0],h[1],h[2],g),t.fill(),d+=m)}}};t.exports=i},function(t,e,n){"use strict";var r={},i=n(1);r.getPixelRatio=function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},r.paintCache=function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},r.fillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},r.strokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},r.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(a=s);var l,c=i*a,u=o*a;if(c!==e.canvasWidth||u!==e.canvasHeight){e.fontCaches=null;var d=n.canvasContainer;d.style.width=i+"px",d.style.height=o+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)(l=n.canvases[f]).width=c,l.height=u,l.style.width=i+"px",l.style.height=o+"px";for(f=0;f<e.BUFFER_COUNT;f++)(l=n.bufferCanvases[f]).width=c,l.height=u,l.style.width=i+"px",l.style.height=o+"px";e.textureMult=1,a<=1&&(l=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,l.width=c*e.textureMult,l.height=u*e.textureMult),e.canvasWidth=c,e.canvasHeight=u}},r.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.render=function(t){var e=(t=t||i.staticEmptyObject()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,o=t.forcedZoom,a=t.forcedPan,s=this,l=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,c=s.cy,u=s.data,d=u.canvasNeedsRedraw,f=s.textureOnViewport&&!e&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),p=void 0!==t.motionBlur?t.motionBlur:s.motionBlur,h=s.motionBlurPxRatio,g=c.hasCompoundNodes(),m=s.hoverData.draggingEles,v=!(!s.hoverData.selecting&&!s.touchData.selecting),y=p=p&&!e&&s.motionBlurEnabled&&!v;e||(s.prevPxRatio!==l&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=l),!e&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),p&&(null==s.mbFrames&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(y=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!f&&(d[s.NODE]=!0,d[s.SELECT_BOX]=!0);var b=c.style()._private.coreStyle,w=c.zoom(),_=void 0!==o?o:w,x=c.pan(),S={x:x.x,y:x.y},C={zoom:w,pan:{x:x.x,y:x.y}},E=s.prevViewport;void 0===E||C.zoom!==E.zoom||C.pan.x!==E.pan.x||C.pan.y!==E.pan.y||m&&!g||(s.motionBlurPxRatio=1),a&&(S=a),_*=l,S.x*=l,S.y*=l;var T=s.getCachedZSortedEles();function M(t,e,n,r,i){var o=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",s.fillStyle(t,255,255,255,s.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=o}function k(t,r){var i,l,c,d;s.clearingMotionBlur||t!==u.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]&&t!==u.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]?(i=S,l=_,c=s.canvasWidth,d=s.canvasHeight):(i={x:x.x*h,y:x.y*h},l=w*h,c=s.canvasWidth*h,d=s.canvasHeight*h),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?M(t,0,0,c,d):e||void 0!==r&&!r||t.clearRect(0,0,c,d),n||(t.translate(i.x,i.y),t.scale(l,l)),a&&t.translate(a.x,a.y),o&&t.scale(o,o)}if(f||(s.textureDrawLastFrame=!1),f){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=c.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var A=s.data.bufferContexts[s.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:l*s.textureMult}),(C=s.textureCache.viewport={zoom:c.zoom(),pan:c.pan(),width:s.canvasWidth,height:s.canvasHeight}).mpan={x:(0-C.pan.x)/C.zoom,y:(0-C.pan.y)/C.zoom}}d[s.DRAG]=!1,d[s.NODE]=!1;var I=u.contexts[s.NODE],O=s.textureCache.texture;C=s.textureCache.viewport;s.textureCache.bb,I.setTransform(1,0,0,1,0,0),p?M(I,0,0,C.width,C.height):I.clearRect(0,0,C.width,C.height);var P=b["outside-texture-bg-color"].value,L=b["outside-texture-bg-opacity"].value;s.fillStyle(I,P[0],P[1],P[2],L),I.fillRect(0,0,C.width,C.height);w=c.zoom();k(I,!1),I.clearRect(C.mpan.x,C.mpan.y,C.width/C.zoom/l,C.height/C.zoom/l),I.drawImage(O,C.mpan.x,C.mpan.y,C.width/C.zoom/l,C.height/C.zoom/l)}else s.textureOnViewport&&!e&&(s.textureCache=null);var D=c.extent(),N=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles,R=s.hideEdgesOnViewport&&N,F=[];if(F[s.NODE]=!d[s.NODE]&&p&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,F[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),F[s.DRAG]=!d[s.DRAG]&&p&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,F[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),d[s.NODE]||n||r||F[s.NODE]){var B=p&&!F[s.NODE]&&1!==h;k(I=e||(B?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:u.contexts[s.NODE]),p&&!B?"motionBlur":void 0),R?s.drawCachedNodes(I,T.nondrag,l,D):s.drawLayeredElements(I,T.nondrag,l,D),s.debug&&s.drawDebugPoints(I,T.nondrag),n||p||(d[s.NODE]=!1)}if(!r&&(d[s.DRAG]||n||F[s.DRAG])){B=p&&!F[s.DRAG]&&1!==h;k(I=e||(B?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:u.contexts[s.DRAG]),p&&!B?"motionBlur":void 0),R?s.drawCachedNodes(I,T.drag,l,D):s.drawCachedElements(I,T.drag,l,D),s.debug&&s.drawDebugPoints(I,T.drag),n||p||(d[s.DRAG]=!1)}if(s.showFps||!r&&d[s.SELECT_BOX]&&!n){if(k(I=e||u.contexts[s.SELECT_BOX]),1==s.selection[4]&&(s.hoverData.selecting||s.touchData.selecting)){w=s.cy.zoom();var j=b["selection-box-border-width"].value/w;I.lineWidth=j,I.fillStyle="rgba("+b["selection-box-color"].value[0]+","+b["selection-box-color"].value[1]+","+b["selection-box-color"].value[2]+","+b["selection-box-opacity"].value+")",I.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),j>0&&(I.strokeStyle="rgba("+b["selection-box-border-color"].value[0]+","+b["selection-box-border-color"].value[1]+","+b["selection-box-border-color"].value[2]+","+b["selection-box-opacity"].value+")",I.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(u.bgActivePosistion&&!s.hoverData.selecting){w=s.cy.zoom();var q=u.bgActivePosistion;I.fillStyle="rgba("+b["active-bg-color"].value[0]+","+b["active-bg-color"].value[1]+","+b["active-bg-color"].value[2]+","+b["active-bg-opacity"].value+")",I.beginPath(),I.arc(q.x,q.y,b["active-bg-size"].pfValue/w,0,2*Math.PI),I.fill()}var z=s.lastRedrawTime;if(s.showFps&&z){z=Math.round(z);var U=Math.round(1e3/z);I.setTransform(1,0,0,1,0,0),I.fillStyle="rgba(255, 0, 0, 0.75)",I.strokeStyle="rgba(255, 0, 0, 0.75)",I.lineWidth=1,I.fillText("1 frame = "+z+" ms = "+U+" fps",0,20);I.strokeRect(0,30,250,20),I.fillRect(0,30,250*Math.min(U/60,1),20)}n||(d[s.SELECT_BOX]=!1)}if(p&&1!==h){var $=u.contexts[s.NODE],V=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],H=u.contexts[s.DRAG],W=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],G=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!y?t.clearRect(0,0,s.canvasWidth,s.canvasHeight):M(t,0,0,s.canvasWidth,s.canvasHeight);var r=h;t.drawImage(e,0,0,s.canvasWidth*r,s.canvasHeight*r,0,0,s.canvasWidth,s.canvasHeight)};(d[s.NODE]||F[s.NODE])&&(G($,V,F[s.NODE]),d[s.NODE]=!1),(d[s.DRAG]||F[s.DRAG])&&(G(H,W,F[s.DRAG]),d[s.DRAG]=!1)}s.prevViewport=C,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),p&&(s.motionBlurTimeout=setTimeout(function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!f,s.mbFrames=0,d[s.NODE]=!0,d[s.DRAG]=!0,s.redraw()},100)),e||c.emit("render")},t.exports=r},function(t,e,n){"use strict";for(var r=n(2),i={drawPolygonPath:function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var l=1;l<o.length/2;l++)t.lineTo(e+a*o[2*l],n+s*o[2*l+1]);t.closePath()},drawRoundRectanglePath:function(t,e,n,i,o){var a=i/2,s=o/2,l=r.getRoundRectangleRadius(i,o);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+a,n-s,e+a,n,l),t.arcTo(e+a,n+s,e,n+s,l),t.arcTo(e-a,n+s,e-a,n,l),t.arcTo(e-a,n-s,e,n-s,l),t.lineTo(e,n-s),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,i,o){var a=i/2,s=o/2,l=r.getRoundRectangleRadius(i,o);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.lineTo(e+a,n-s),t.lineTo(e+a,n),t.arcTo(e+a,n+s,e,n+s,l),t.arcTo(e-a,n+s,e-a,n,l),t.lineTo(e-a,n-s),t.lineTo(e,n-s),t.closePath()},drawCutRectanglePath:function(t,e,n,i,o){var a=i/2,s=o/2,l=r.getCutRectangleCornerLength();t.beginPath&&t.beginPath(),t.moveTo(e-a+l,n-s),t.lineTo(e+a-l,n-s),t.lineTo(e+a,n-s+l),t.lineTo(e+a,n+s-l),t.lineTo(e+a-l,n+s),t.lineTo(e-a+l,n+s),t.lineTo(e-a,n+s-l),t.lineTo(e-a,n-s+l),t.closePath()},drawBarrelPath:function(t,e,n,i,o){var a=i/2,s=o/2,l=e-a,c=e+a,u=n-s,d=n+s,f=r.getBarrelCurveConstants(i,o),p=f.widthOffset,h=f.heightOffset,g=f.ctrlPtOffsetPct*p;t.beginPath&&t.beginPath(),t.moveTo(l,u+h),t.lineTo(l,d-h),t.quadraticCurveTo(l+g,d,l+p,d),t.lineTo(c-p,d),t.quadraticCurveTo(c-g,d,c,d-h),t.lineTo(c,u+h),t.quadraticCurveTo(c-g,u,c-p,u),t.lineTo(l+p,u),t.quadraticCurveTo(l+g,u,l,u+h),t.closePath()}},o=Math.sin(0),a=Math.cos(0),s={},l={},c=Math.PI/40,u=0*Math.PI;u<2*Math.PI;u+=c)s[u]=Math.sin(u),l[u]=Math.cos(u);i.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var u,d,f=r/2,p=i/2,h=0*Math.PI;h<2*Math.PI;h+=c)u=e-f*s[h]*o+f*l[h]*a,d=n+p*l[h]*o+p*s[h]*a,0===h?t.moveTo(u,d):t.lineTo(u,d);t.closePath()},t.exports=i},function(t,e,n){"use strict";var r=n(0),i={};function o(t){var e=t.indexOf(",");return t.substr(e+1)}function a(t,e,n){var r=e.toDataURL(n,t.quality);switch(t.output){case"blob":return function(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}(o(r),n);case"base64":return o(r);case"base64uri":default:return r}}i.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},i.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),i=this.findContainerClientCoords(),o=t.full?Math.ceil(n.w):i[2],a=t.full?Math.ceil(n.h):i[3],s=r.number(t.maxWidth)||r.number(t.maxHeight),l=this.getPixelRatio(),c=1;if(void 0!==t.scale)o*=t.scale,a*=t.scale,c=t.scale;else if(s){var u=1/0,d=1/0;r.number(t.maxWidth)&&(u=c*t.maxWidth/o),r.number(t.maxHeight)&&(d=c*t.maxHeight/a),o*=c=Math.min(u,d),a*=c}s||(o*=l,a*=l,c*=l);var f=document.createElement("canvas");f.width=o,f.height=a,f.style.width=o+"px",f.style.height=a+"px";var p=f.getContext("2d");if(o>0&&a>0){p.clearRect(0,0,o,a),p.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(t.full)p.translate(-n.x1*c,-n.y1*c),p.scale(c,c),this.drawElements(p,h),p.scale(1/c,1/c),p.translate(n.x1*c,n.y1*c);else{var g=e.pan(),m={x:g.x*c,y:g.y*c};c*=e.zoom(),p.translate(m.x,m.y),p.scale(c,c),this.drawElements(p,h),p.scale(1/c,1/c),p.translate(-m.x,-m.y)}t.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=t.bg,p.rect(0,0,o,a),p.fill())}return f},i.png=function(t){return a(t,this.bufferCanvasImage(t),"image/png")},i.jpg=function(t){return a(t,this.bufferCanvasImage(t),"image/jpeg")},t.exports=i},function(t,e,n){"use strict";var r={nodeShapeImpl:function(t,e,n,r,i,o,a){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"roundrectangle":return this.drawRoundRectanglePath(e,n,r,i,o);case"cutrectangle":return this.drawCutRectanglePath(e,n,r,i,o);case"bottomroundrectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}}};t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(18),a=function t(){if(!(this instanceof t))return new t;this.length=0},s=a.prototype;s.instanceString=function(){return"stylesheet"},s.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},s.css=function(t,e){var n=this.length-1;if(r.string(t))this[n].properties.push({name:t,value:e});else if(r.plainObject(t))for(var a=t,s=0;s<o.properties.length;s++){var l=o.properties[s],c=a[l.name];if(void 0===c&&(c=a[i.dash2camel(l.name)]),void 0!==c){var u=l.name,d=c;this[n].properties.push({name:u,value:d})}}return this},s.style=s.css,s.generateStyle=function(t){var e=new o(t);return this.appendToStyle(e)},s.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var o=0;o<i.length;o++){var a=i[o];t.css(a.name,a.value)}}return t},t.exports=a},function(t,e,n){"use strict";t.exports="3.2.17"}])})}).call(this,n(634).setImmediate)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e,n){this.source=t,this.target=e,this.type=n}}();e.PowerEdge=r;var i=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new s);for(var a=0;a<t;++a)this.roots[0].add(this.modules[a]=new o(a))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new s;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new o(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var a=0;a<t.groups.length;++a){var c=t.groups[a],u={};for(var d in c)"leaves"!==d&&"groups"!==d&&c.hasOwnProperty(d)&&(u[d]=c[d]);e.add(new o(-1-a,new l,new l,this.initModulesFromGroup(c),u))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),a=new s;a.add(t),a.add(e);var l=new o(this.modules.length,i,r,a);this.modules.push(l);var c=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var a=n[r];a.add(o,l),a.remove(o,t),a.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)})})};return c(i,"incoming","outgoing"),c(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(l),l},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var l=e[o],c=e[s];r[i]={id:i,nEdges:this.nEdges(l,c),a:l,b:c},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges})[0];if(!(e.nEdges>=this.R))return this.merge(e.a,e.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,n=[];return function t(e,n,r){e.forAll(function(e){if(e.isLeaf())n.leaves||(n.leaves=[]),n.leaves.push(e.id);else{var i=n;if(e.gid=r.length,!e.isIsland()||e.isPredefined()){if(i={id:e.gid},e.isPredefined())for(var o in e.definition)i[o]=e.definition[o];n.groups||(n.groups=[]),n.groups.push(e.gid),r.push(i)}t(e.children,i,r)}})}(this.roots[0],{},n),this.allEdges().forEach(function(i){var o=e.modules[i.source],a=e.modules[i.target];t.push(new r(void 0===o.gid?i.source:n[o.gid],void 0===a.gid?i.target:n[a.gid],i.type))}),n},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();e.Configuration=i;var o=function(){function t(t,e,n,r,i){void 0===e&&(e=new l),void 0===n&&(n=new l),void 0===r&&(r=new s),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(n,i){n.forAll(function(n){t.push(new r(e.id,n.id,i))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();function a(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}e.Module=o;var s=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=a(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();e.ModuleSet=s;var l=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new s).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},t}();e.LinkSets=l,e.getGroups=function(t,e,n,r){for(var o=t.length,a=new i(o,e,n,r);a.greedyMerge(););var s=[],l=a.getGroupHierarchy(s);return s.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:l,powerEdges:s}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){var e=this._comparator;return this._bound(t,function(t,n){return e(n,t)})},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new o(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(e(t,(n=r._ancestors[o]).data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();e.TreeBase=i;var o=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=o;var a=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),s=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return r(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new a(t),n=!0,this.size++;else{var r=new a(void 0),i=!1,o=!1,s=null,l=r,c=null,u=this._root;for(l.right=this._root;;){if(null===u?(u=new a(t),c.set_child(i,u),n=!0,this.size++):e.is_red(u.left)&&e.is_red(u.right)&&(u.red=!0,u.left.red=!1,u.right.red=!1),e.is_red(u)&&e.is_red(c)){var d=l.right===s;u===c.get_child(o)?l.set_child(d,e.single_rotate(s,!o)):l.set_child(d,e.double_rotate(s,!o))}var f=this._comparator(u.data,t);if(0===f)break;o=i,i=f<0,null!==s&&(l=s),s=c,c=u,u=u.get_child(i)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new a(void 0),r=n;r.right=this._root;for(var i=null,o=null,s=null,l=!0;null!==r.get_child(l);){var c=l;o=i,i=r,r=r.get_child(l);var u=this._comparator(t,r.data);if(l=u>0,0===u&&(s=r),!e.is_red(r)&&!e.is_red(r.get_child(l)))if(e.is_red(r.get_child(!l))){var d=e.single_rotate(r,l);i.set_child(c,d),i=d}else if(!e.is_red(r.get_child(!l))){var f=i.get_child(!c);if(null!==f)if(e.is_red(f.get_child(!c))||e.is_red(f.get_child(c))){var p=o.right===i;e.is_red(f.get_child(c))?o.set_child(p,e.double_rotate(i,c)):e.is_red(f.get_child(!c))&&o.set_child(p,e.single_rotate(i,c));var h=o.get_child(p);h.red=!0,r.red=!0,h.left.red=!1,h.right.red=!1}else i.red=!1,f.red=!0,r.red=!0}}return null!==s&&(s.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(i);e.RBTree=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var a=new t(n);return null!==r&&r(n,a),this.merge(a,i)},t}();e.PairingHeap=r;var i=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i,o=0;i=e[o];++o)t=new r(i),this.root=this.empty()?t:this.root.merge(t,this.lessThan);return t},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();e.PriorityQueue=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(351),o=function(){return function(){}}();e.Point=o;var a=function(){return function(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}}();e.LineSegment=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o);function l(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function c(t,e,n){return l(t,e,n)>0}function u(t,e,n){return l(t,e,n)<0}function d(t,e){var n=e.slice(0);return n.push(e[0]),{rtan:f(t,n),ltan:p(t,n)}}function f(t,e){var n,r,i,o,a=e.length-1;if(u(t,e[1],e[0])&&!c(t,e[a-1],e[0]))return 0;for(n=0,r=a;;){if(r-n==1)return c(t,e[n],e[r])?n:r;if((o=u(t,e[(i=Math.floor((n+r)/2))+1],e[i]))&&!c(t,e[i-1],e[i]))return i;c(t,e[n+1],e[n])?o?r=i:c(t,e[n],e[i])?r=i:n=i:o&&u(t,e[n],e[i])?r=i:n=i}}function p(t,e){var n,r,i,o,a=e.length-1;if(c(t,e[a-1],e[0])&&!u(t,e[1],e[0]))return 0;for(n=0,r=a;;){if(r-n==1)return u(t,e[n],e[r])?n:r;if(o=u(t,e[(i=Math.floor((n+r)/2))+1],e[i]),c(t,e[i-1],e[i])&&!o)return i;u(t,e[n+1],e[n])?o?u(t,e[n],e[i])?r=i:n=i:r=i:o?n=i:c(t,e[n],e[i])?r=i:n=i}}function h(t,e,n,r,i,o){var a,s;s=r(t[a=n(e[0],t)],e);for(var l=!1;!l;){for(l=!0;a===t.length-1&&(a=0),!i(e[s],t[a],t[a+1]);)++a;for(;0===s&&(s=e.length-1),!o(t[a],e[s],e[s-1]);)--s,l=!1}return{t1:a,t2:s}}function g(t,e){return h(t,e,f,p,c,u)}e.PolyPoint=s,e.isLeft=l,e.ConvexHull=function(t){var e,n=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),r=t.length,i=n[0].x;for(e=1;e<r&&n[e].x===i;++e);var o=e-1,a=[];if(a.push(n[0]),o===r-1)n[o].y!==n[0].y&&a.push(n[o]);else{var s,c=r-1,u=n[r-1].x;for(e=r-2;e>=0&&n[e].x===u;e--);for(s=e+1,e=o;++e<=s;)if(!(l(n[0],n[s],n[e])>=0&&e<s)){for(;a.length>1&&!(l(a[a.length-2],a[a.length-1],n[e])>0);)a.length-=1;0!=e&&a.push(n[e])}c!=s&&a.push(n[c]);var d=a.length;for(e=s;--e>=o;)if(!(l(n[c],n[o],n[e])>=0&&e>o)){for(;a.length>d&&!(l(a[a.length-2],a[a.length-1],n[e])>0);)a.length-=1;0!=e&&a.push(n[e])}}return a},e.clockwiseRadialSweep=function(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)},e.tangent_PolyPolyC=h,e.LRtangent_PolyPolyC=function(t,e){var n=g(e,t);return{t1:n.t2,t2:n.t1}},e.RLtangent_PolyPolyC=g,e.LLtangent_PolyPolyC=function(t,e){return h(t,e,p,p,u,u)},e.RRtangent_PolyPolyC=function(t,e){return h(t,e,f,f,c,c)};var m=function(){return function(t,e){this.t1=t,this.t2=e}}();e.BiTangent=m;var v=function(){return function(){}}();e.BiTangents=v;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(o);e.TVGPoint=y;var b=function(){return function(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this}}();e.VisibilityVertex=b;var w=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=w;var _=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++){for(var i=t[r],o=0;o<i.length;++o){var a=i[o],s=new b(this.V.length,r,o,a);this.V.push(s),o>0&&this.E.push(new w(i[o-1].vv,s))}i.length>1&&this.E.push(new w(i[0].vv,i[i.length-1].vv))}for(r=0;r<n-1;r++){var l=t[r];for(o=r+1;o<n;o++){var c=t[o],u=S(l,c);for(var d in u){var f=u[d],p=l[f.t1],h=c[f.t2];this.addEdgeIfVisible(p,h,r,o)}}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new a(t.x,t.y,e.x,e.y),n,r)||this.E.push(new w(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n=this.P.length;this.V.push(new b(this.V.length,n,0,t));for(var r=0;r<n;++r)if(r!==e){var i=this.P[r],o=d(t,i);this.addEdgeIfVisible(t,i[o.ltan],e,r),this.addEdgeIfVisible(t,i[o.rtan],e,r)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&x(t,this.P[r]).length>0)return!0;return!1},t}();function x(t,e){for(var n=[],r=1,o=e.length;r<o;++r){var a=i.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);a&&n.push(a)}return n}function S(t,e){for(var n=t.length-1,r=e.length-1,i=new v,o=0;o<n;++o)for(var a=0;a<r;++a){var s=t[0==o?n-1:o-1],c=t[o],u=t[o+1],d=e[0==a?r-1:a-1],f=e[a],p=e[a+1],h=l(s,c,f),g=l(c,d,f),y=l(c,f,p),b=l(d,f,c),w=l(f,s,c),_=l(f,c,u);h>=0&&g>=0&&y<0&&b>=0&&w>=0&&_<0?i.ll=new m(o,a):h<=0&&g<=0&&y>0&&b<=0&&w<=0&&_>0?i.rr=new m(o,a):h<=0&&g>0&&y<=0&&b>=0&&w<0&&_>=0?i.rl=new m(o,a):h>=0&&g<0&&y>=0&&b<=0&&w>0&&_<=0&&(i.lr=new m(o,a))}return i}function C(t,e){return!t.every(function(t){return!function(t,e){for(var n=1,r=e.length;n<r;++n)if(u(e[n-1],e[n],t))return!1;return!0}(t,e)})}e.TangentVisibilityGraph=_,e.tangents=S,e.polysOverlap=function(t,e){if(C(t,e))return!0;if(C(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(x(new a(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};e.applyPacking=function(t,e,n,i,o){void 0===o&&(o=1);var a=0,s=0,l=e,c=n,u=(o=void 0!==o?o:1,i=void 0!==i?i:0,0),d=0,f=0,p=0,h=[];function g(t,e){h=[],u=0,d=0,p=s;for(var n=0;n<t.length;n++)m(t[n],e);return Math.abs(u/d-o)}function m(t,e){for(var n=void 0,i=0;i<h.length;i++)if(h[i].space_left>=t.height&&h[i].x+h[i].width+t.width+r.PADDING-e<=r.FLOAT_EPSILON){n=h[i];break}h.push(t),void 0!==n?(t.x=n.x+n.width+r.PADDING,t.y=n.bottom,t.space_left=t.height,t.bottom=t.y,n.space_left-=t.height+r.PADDING,n.bottom+=t.height+r.PADDING):(t.y=p,p+=t.height+r.PADDING,t.x=a,t.bottom=t.y,t.space_left=t.height),t.y+t.height-d>-r.FLOAT_EPSILON&&(d=t.y+t.height-s),t.x+t.width-u>-r.FLOAT_EPSILON&&(u=t.x+t.width-a)}0!=t.length&&(function(t){t.forEach(function(t){!function(t){var e=Number.MAX_VALUE,n=Number.MAX_VALUE,r=0,o=0;t.array.forEach(function(t){var a=void 0!==t.width?t.width:i,s=void 0!==t.height?t.height:i;a/=2,s/=2,r=Math.max(t.x+a,r),e=Math.min(t.x-a,e),o=Math.max(t.y+s,o),n=Math.min(t.y-s,n)}),t.width=r-e,t.height=o-n}(t)})}(t),function(t,e){var n=Number.POSITIVE_INFINITY,i=0;t.sort(function(t,e){return e.height-t.height}),f=t.reduce(function(t,e){return t.width<e.width?t.width:e.width});for(var o=h=f,a=m=function(t){var e=0;return t.forEach(function(t){return e+=t.width+r.PADDING}),e}(t),s=0,l=Number.MAX_VALUE,c=Number.MAX_VALUE,u=-1,d=Number.MAX_VALUE,p=Number.MAX_VALUE;d>f||p>r.FLOAT_EPSILON;){if(1!=u)var h=a-(a-o)/r.GOLDEN_SECTION,l=g(t,h);if(0!=u)var m=o+(a-o)/r.GOLDEN_SECTION,c=g(t,m);if(d=Math.abs(h-m),p=Math.abs(l-c),l<n&&(n=l,i=h),c<n&&(n=c,i=m),l>c?(o=h,h=m,l=c,u=1):(a=m,m=h,c=l,u=0),s++>100)break}g(t,i)}(t),function(t){t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n={x:e.x-t.width/2,y:e.y-t.height/2},r={x:t.x-n.x+l/2-u/2,y:t.y-n.y+c/2-d/2};t.array.forEach(function(t){t.x+=r.x,t.y+=r.y})})}(t))},e.separateGraphs=function(t,e){for(var n={},r={},i=[],o=0,a=0;a<e.length;a++){var s=e[a],l=s.source,c=s.target;r[l.index]?r[l.index].push(c):r[l.index]=[c],r[c.index]?r[c.index].push(l):r[c.index]=[l]}for(a=0;a<t.length;a++){var u=t[a];n[u.index]||d(u,!0)}function d(t,e){if(void 0===n[t.index]){e&&(o++,i.push({array:[]})),n[t.index]=o,i[o-1].array.push(t);var a=r[t.index];if(a)for(var s=0;s<a.length;s++)d(a[s],!1)}}return i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(351),i=n(637),o=n(458),a=function(){return function(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length}}();e.NodeWrapper=a;var s=function(){return function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i}}();e.Vert=s;var l=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(t[a]===e[s]){var l=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;l>i.length&&(i.length=l,i.si=a-l+1,i.ti=s-l+1)}else o[a][s]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=l;var c=function(){function t(t,e,n){void 0===n&&(n=12);var i=this;this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map(function(t,n){return new a(n,e.getBounds(t),e.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return i.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){void 0===t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return i.getDepth(t)-i.getDepth(e)}),this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf}).forEach(function(t){var e=r.Rectangle.empty();t.children.forEach(function(t){return e=e.union(i.nodes[t].rect)}),t.rect=e.inflate(i.groupPadding)});var o=this.midPoints(this.cols.map(function(t){return t.pos})),l=this.midPoints(this.rows.map(function(t){return t.pos})),c=o[0],u=o[o.length-1],d=l[0],f=l[l.length-1],p=this.rows.map(function(t){return{x1:c,x2:u,y1:t.pos,y2:t.pos}}).concat(l.map(function(t){return{x1:c,x2:u,y1:t,y2:t}})),h=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:d,y2:f}}).concat(o.map(function(t){return{x1:t,x2:t,y1:d,y2:f}})),g=p.concat(h);g.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(t){return h.forEach(function(e){var n=new s(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var o=i.backToFront[r],a=o.rect,l=Math.abs(n.x-a.cx()),c=Math.abs(n.y-a.cy());if(l<a.width()/2&&c<a.height()/2){n.node=o;break}}})}),g.forEach(function(t,e){i.nodes.forEach(function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(n,r){var o=new s(i.verts.length,n.x,n.y,e,t);i.verts.push(o),t.verts.push(o),e.ports.push(o)})});var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var o=1;o<t.verts.length;o++){var a=t.verts[o-1],l=t.verts[o];a.node&&a.node===l.node&&a.node.leaf||i.edges.push({source:a.id,target:l.id,length:Math.abs(r(a,l))})}})}return t.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var o=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return o=o.concat(t.parent.children.filter(function(e){return e!==t.id}))}),o.map(function(t){return n.nodes[t]})},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],a=0;a<o.length;a++){(d=o[a]).edgeid=i,d.i=a;var s=d[1][e]-d[0][e];Math.abs(s)<.1&&r.push(d)}r.sort(function(t,n){return t[0][e]-n[0][e]});for(var l=[],c=null,u=0;u<r.length;u++){var d=r[u];(!c||Math.abs(d[0][e]-c.pos)>.1)&&(c={pos:d[0][e],segments:[]},l.push(c)),c.segments.push(d)}return l},t.nudgeSegs=function(t,e,n,r,o,a){var s=r.length;if(!(s<=1)){for(var l=r.map(function(e){return new i.Variable(e[0][t])}),c=[],u=0;u<s;u++)for(var d=0;d<s;d++)if(u!==d){var f=r[u],p=r[d],h=f.edgeid,g=p.edgeid,m=-1,v=-1;"x"==t?o(h,g)&&(f[0][e]<f[1][e]?(m=d,v=u):(m=u,v=d)):o(h,g)&&(f[0][e]<f[1][e]?(m=u,v=d):(m=d,v=u)),m>=0&&c.push(new i.Constraint(l[m],l[v],a))}new i.Solver(l,c).solve(),l.forEach(function(e,i){var o=r[i],a=e.position();o[0][t]=o[1][t]=a;var s=n[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)})}},t.nudgeSegments=function(e,n,r,i,o){for(var a=t.getSegmentSets(e,n,r),s=0;s<a.length;s++){for(var l=a[s],c=[],u=0;u<l.segments.length;u++){var d=l.segments[u];c.push({type:0,s:d,pos:Math.min(d[0][r],d[1][r])}),c.push({type:1,s:d,pos:Math.max(d[0][r],d[1][r])})}c.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var f=[],p=0;c.forEach(function(a){0===a.type?(f.push(a.s),p++):p--,0==p&&(t.nudgeSegs(n,r,e,f,i,o),f=[])})}},t.prototype.routeEdges=function(e,n,r,i){var o=this,a=e.map(function(t){return o.route(r(t),i(t))}),s=t.orderEdges(a),l=a.map(function(e){return t.makeSegments(e)});return t.nudgeSegments(l,"x","y",s,n),t.nudgeSegments(l,"y","x",s,n),t.unreverseEdges(l,a),l},t.unreverseEdges=function(t,e){t.forEach(function(t,n){e[n].reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var o,a,s,c=e[r],u=e[i],d=new l(c,u);0!==d.length&&(d.reversed&&(u.reverse(),u.reversed=!0,d=new l(c,u)),(d.si<=0||d.ti<=0)&&(d.si+d.length>=c.length||d.ti+d.length>=u.length)?n.push({l:r,r:i}):(d.si+d.length>=c.length||d.ti+d.length>=u.length?(o=c[d.si+1],s=c[d.si-1],a=u[d.ti-1]):(o=c[d.si+d.length-2],a=c[d.si+d.length],s=u[d.ti+d.length]),t.isLeft(o,a,s)?n.push({l:i,r:r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001},r=[],i=e(t[0]),o=1;o<t.length;o++){var a=e(t[o]),s=o<t.length-1?t[o+1]:null;s&&n(i,a,s)||(r.push([i,a]),i=a)}return r},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var a={};this.obstacles.forEach(function(t){return a[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in a||r.node&&r.node.id in a)});for(var s=1;s<r.ports.length;s++){var l=r.ports[0].id,c=r.ports[s].id;this.passableEdges.push({source:l,target:c,length:0})}for(s=1;s<i.ports.length;s++){l=i.ports[0].id,c=i.ports[s].id;this.passableEdges.push({source:l,target:c,length:0})}var u=new o.Calculator(this.verts.length,this.passableEdges,function(t){return t.source},function(t){return t.target},function(t){return t.length}).PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,function(t,e,o){var a=n.verts[t],s=n.verts[e],l=n.verts[o],c=Math.abs(l.x-a.x),u=Math.abs(l.y-a.y);return a.node===r&&a.node===s.node||s.node===i&&s.node===l.node?0:c>1&&u>1?1e3:0}).reverse().map(function(t){return n.verts[t]});return u.push(this.nodes[i.id].ports[0]),u.filter(function(t,e){return!(e<u.length-1&&u[e+1].node===r&&t.node===r||e>0&&t.node===i&&u[e-1].node===i)})},t.getRoutePath=function(e,n,r,i){var o={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var a=0;a<e.length;a++){var s=(w=e[a])[1].x,l=w[1].y,c=s-w[0].x,u=l-w[0].y;if(a<e.length-1){Math.abs(c)>0?s-=c/Math.abs(c)*n:l-=u/Math.abs(u)*n,o.routepath+="L "+s+" "+l+" ";var d=e[a+1],f=d[0].x,p=d[0].y;c=d[1].x-f,u=d[1].y-p;var h,g,m=t.angleBetween2Lines(w,d)<0?1:0;Math.abs(c)>0?(h=f+c/Math.abs(c)*n,g=p):(h=f,g=p+u/Math.abs(u)*n);var v=Math.abs(h-s),y=Math.abs(g-l);o.routepath+="A "+v+" "+y+" 0 0 "+m+" "+h+" "+g+" "}else{var b=[s,l];Math.abs(c)>0?(_=[s-=c/Math.abs(c)*i,l+r],x=[s,l-r]):(_=[s+r,l-=u/Math.abs(u)*i],x=[s-r,l]),o.routepath+="L "+s+" "+l+" ",i>0&&(o.arrowpath="M "+b[0]+" "+b[1]+" L "+_[0]+" "+_[1]+" L "+x[0]+" "+x[1])}}else{var w,_,x;s=(w=e[0])[1].x,l=w[1].y,c=s-w[0].x,u=l-w[0].y,b=[s,l];Math.abs(c)>0?(_=[s-=c/Math.abs(c)*i,l+r],x=[s,l-r]):(_=[s+r,l-=u/Math.abs(u)*i],x=[s-r,l]),o.routepath+="L "+s+" "+l+" ",i>0&&(o.arrowpath="M "+b[0]+" "+b[1]+" L "+_[0]+" "+_[1]+" L "+x[0]+" "+x[1])}return o},t}();e.GridRouter=c},function(t,e,n){var r=n(127),i=n(1100);t.exports=function(t,e,n,r){return function(t,e,n,r){var o,a,s={},l=new i,c=function(t){var e=t.v!==o?t.v:t.w,r=s[e],i=n(t),c=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,l.decrease(e,c))};t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},l.add(t,n)});for(;l.size()>0&&(o=l.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return s}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},function(t,e,n){var r=n(127);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},function(t,e,n){var r=n(127);t.exports=function(t){var e=0,n=[],i={},o=[];return t.nodes().forEach(function(a){r.has(i,a)||function a(s){var l=i[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(t){r.has(i,t)?i[t].onStack&&(l.lowlink=Math.min(l.lowlink,i[t].index)):(a(t),l.lowlink=Math.min(l.lowlink,i[t].lowlink))}),l.lowlink===l.index){var c,u=[];do{c=n.pop(),i[c].onStack=!1,u.push(c)}while(s!==c);o.push(u)}}(a)}),o}},function(t,e,n){var r=n(127);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),function a(s){if(r.has(n,s))throw new o;r.has(e,s)||(n[s]=!0,e[s]=!0,r.each(t.predecessors(s),a),delete n[s],i.push(s))}),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o},function(t,e,n){var r=n(127);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],a={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,i,o,a,s){r.has(o,n)||(o[n]=!0,i||s.push(n),r.each(a(n),function(n){t(e,n,i,o,a,s)}),i&&s.push(n))}(t,e,"post"===n,a,i,o)}),o}},function(t,e,n){"use strict";var r=n(48),i=n(139).Graph,o=n(459).slack;function a(t,e){return r.forEach(t.nodes(),function n(i){r.forEach(e.nodeEdges(i),function(r){var a=r.v,s=i===a?r.w:a;t.hasNode(s)||o(e,r)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))})}),t.nodeCount()}function s(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)})}function l(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}t.exports=function(t){var e,n,r=new i({directed:!1}),c=t.nodes()[0],u=t.nodeCount();r.setNode(c,{});for(;a(r,t)<u;)e=s(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),l(r,t,n);return r}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=function(t){var e=n(3232),r=n(660),i=n(661),o=n(659),a=(t=i(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20})).createQuadTree||n(3233),s=t.createBounds||n(3237),l=t.createDragForce||n(3238),c=t.createSpringForce||n(3239),u=t.integrator||n(3240),d=t.createBody||n(3241),f=[],p=[],h=a(t),g=s(f,t),m=c(t),v=l(t),y={bodies:f,quadTree:h,springs:p,settings:t,step:function(){!function(){var t,e=f.length;if(e)for(h.insertBodies(f);e--;)(t=f[e]).isPinned||(t.force.reset(),h.updateBodyForce(t),v.update(t));e=p.length;for(;e--;)m.update(p[e])}();var e=u(f,t.timeStep);return g.update(),e},addBody:function(t){if(!t)throw new Error("Body is required");return f.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=d(t);return f.push(e),e},removeBody:function(t){if(t){var e=f.indexOf(t);if(!(e<0))return f.splice(e,1),0===f.length&&g.reset(),!0}},addSpring:function(t,n,r,i,o){if(!t||!n)throw new Error("Cannot add null spring to force simulator");"number"!=typeof r&&(r=-1);var a=new e(t,n,r,o>=0?o:-1,i);return p.push(a),a},getTotalMovement:function(){return 0},removeSpring:function(t){if(t){var e=p.indexOf(t);return e>-1?(p.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return g.getBestNewPosition(t)},getBBox:function(){return g.box},gravity:function(e){return void 0!==e?(t.gravity=e,h.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,h.options({theta:e}),this):t.theta}};return r(t,y),o(y),y}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.left=function(t){return t.depth},e.right=function(t,e){return e-1-t.height},e.justify=function(t,e){return t.sourceLinks.length?t.depth:e-1},e.center=function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?(0,r.min)(t.sourceLinks,i)-1:0};var r=n(1229);function i(t){return t.target.depth}},,,,,,,,,,,,function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(78))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(3442),i=n(179);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e,n){var r=n(3443),i=n(3446),o=n(3447),a=1,s=2;t.exports=function(t,e,n,l,c,u){var d=n&a,f=t.length,p=e.length;if(f!=p&&!(d&&p>f))return!1;var h=u.get(t);if(h&&u.get(e))return h==e;var g=-1,m=!0,v=n&s?new r:void 0;for(u.set(t,e),u.set(e,t);++g<f;){var y=t[g],b=e[g];if(l)var w=d?l(b,y,g,e,t,u):l(y,b,g,t,e,u);if(void 0!==w){if(w)continue;m=!1;break}if(v){if(!i(e,function(t,e){if(!o(v,e)&&(y===t||c(y,t,n,l,u)))return v.push(e)})){m=!1;break}}else if(y!==b&&!c(y,b,n,l,u)){m=!1;break}}return u.delete(t),u.delete(e),m}},function(t,e,n){var r=n(141).Uint8Array;t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(1171),i=n(668),o=n(245);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(667),i=n(69);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(3450),i=n(481),o=n(69),a=n(482),s=n(483),l=n(669),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&i(t),d=!n&&!u&&a(t),f=!n&&!u&&!d&&l(t),p=n||u||d||f,h=p?r(t.length,String):[],g=h.length;for(var m in t)!e&&!c.call(t,m)||p&&("length"==m||d&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||h.push(m);return h}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(3458),i=n(664),o=n(3459),a=n(3460),s=n(3461),l=n(206),c=n(1164),u=c(r),d=c(i),f=c(o),p=c(a),h=c(s),g=l;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case u:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return e}),t.exports=g},function(t,e,n){var r=n(119);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e,n){var r=n(3475);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(119),i=n(485),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=l.test(t);return n||c.test(t)?u(t.slice(2),n?2:8):s.test(t)?o:+t}},function(t,e,n){var r=n(3478)();t.exports=r},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(119),i=n(3496),o=n(1181),a="Expected a function",s=Math.max,l=Math.min;t.exports=function(t,e,n){var c,u,d,f,p,h,g=0,m=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError(a);function b(e){var n=c,r=u;return c=u=void 0,g=e,f=t.apply(r,n)}function w(t){var n=t-h;return void 0===h||n>=e||n<0||v&&t-g>=d}function _(){var t=i();if(w(t))return x(t);p=setTimeout(_,function(t){var n=e-(t-h);return v?l(n,d-(t-g)):n}(t))}function x(t){return p=void 0,y&&c?b(t):(c=u=void 0,f)}function S(){var t=i(),n=w(t);if(c=arguments,u=this,h=t,n){if(void 0===p)return function(t){return g=t,p=setTimeout(_,e),m?b(t):f}(h);if(v)return p=setTimeout(_,e),b(h)}return void 0===p&&(p=setTimeout(_,e)),f}return e=o(e)||0,r(n)&&(m=!!n.leading,d=(v="maxWait"in n)?s(o(n.maxWait)||0,e):d,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==p&&clearTimeout(p),g=0,c=h=u=p=void 0},S.flush=function(){return void 0===p?f:x(i())},S}},function(t,e,n){var r=n(677),i=n(297),o=n(483),a=n(119),s=n(298);t.exports=function(t,e,n,l){if(!a(t))return t;for(var c=-1,u=(e=i(e,t)).length,d=u-1,f=t;null!=f&&++c<u;){var p=s(e[c]),h=n;if(c!=d){var g=f[p];void 0===(h=l?l(g,p,f):void 0)&&(h=a(g)?g:o(e[c+1])?[]:{})}r(f,p,h),f=f[p]}return t}},function(t,e,n){var r=n(244),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(206),i=n(69),o=n(179),a="[object String]";t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&r(t)==a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(287),o=n(55),a=n(1190),s=n(362),l=n(1191),c=n(3517),u=n(299);e.name="sendData";var d=function(){return function(t,e){var n=this;this.onClick=function(t){n.disabled||r.getGraphByIdWithCallback(n.graphId,function(e){r.getGraphByIdWithCallback(n.targetGraphId,function(r){var d=c(t),f=r.cy.nodes();n.maxDataSize&&n.maxDataSize<f.length+d.length&&(o.alerter.infoMsg("Max graph size exceeded",n.maxDataEnforcedMsg),d=d.slice(0,n.maxDataSize-f.length));var p=u(f,function(t){return t.id()}).concat(d),h=a(e.currentData,function(t){return"nodes"===s(t,["data","group"])?l(d,s(t,["data","id"])):l(p,s(t,["data","source"]))&&l(p,s(t,["data","target"]))});i.GraphEvents.Service.emit(i.GraphEvents.updateData,{graphId:n.targetGraphId,data:r.currentData.concat(h)})})})},this._addEventListeners=function(){i.GraphEvents.Service.on(i.GraphEvents.interactionSyncUpdated,n._syncedListener)},this._syncedListener=function(t){n.disabled=!!t.synced},this.graphId=t,this.iconClass=e.iconClass||"fa-rotate-90 fa-arrow-circle-left",this.tooltip=e.tooltip||"Send data",this.targetGraphId=e.targetGraphId,this.maxDataSize=e.maxDataSize,this.maxDataEnforcedMsg=e.maxDataEnforcedMsg||"Showing only the first "+this.maxDataSize+" entities.",this.disabled=!1,this._addEventListeners()}}();function f(t){return r=t,d}e.SendData=d,f.$inject=["ccri.orion.manager"],e.factory=f},function(t,e,n){var r=n(1172),i=n(3511),o=n(295),a=n(69);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(3512),i=n(207),o=n(1188),a=n(1180),s=n(3515),l=Math.max;t.exports=function(t,e,n,c){t=i(t)?t:s(t),n=n&&!c?a(n):0;var u=t.length;return n<0&&(n=l(u+n,0)),o(t)?n<=u&&t.indexOf(e,n)>-1:!!u&&r(t,e,n)>-1}},function(t,e,n){var r=n(476),i=n(1183),o=n(677),a=n(3518),s=n(3519),l=n(1193),c=n(1194),u=n(3522),d=n(3523),f=n(1170),p=n(679),h=n(1176),g=n(3524),m=n(3525),v=n(1197),y=n(69),b=n(482),w=n(119),_=n(245),x=1,S=2,C=4,E="[object Arguments]",T="[object Function]",M="[object GeneratorFunction]",k="[object Object]",A={};A[E]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[k]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[T]=A["[object WeakMap]"]=!1,t.exports=function t(e,n,I,O,P,L){var D,N=n&x,R=n&S,F=n&C;if(I&&(D=P?I(e,O,P,L):I(e)),void 0!==D)return D;if(!w(e))return e;var B=y(e);if(B){if(D=g(e),!N)return c(e,D)}else{var j=h(e),q=j==T||j==M;if(b(e))return l(e,N);if(j==k||j==E||q&&!P){if(D=R||q?{}:v(e),!N)return R?d(e,s(D,e)):u(e,a(D,e))}else{if(!A[j])return P?e:{};D=m(e,j,t,N)}}L||(L=new r);var z=L.get(e);if(z)return z;L.set(e,D);var U=F?R?p:f:R?keysIn:_,$=B?void 0:U(e);return i($||e,function(r,i){$&&(r=e[i=r]),o(D,i,t(r,n,I,i,e,L))}),D}},function(t,e,n){(function(t){var r=n(141),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(120)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(667),i=n(678),o=n(668),a=n(1173),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(680);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(3533),i=n(678),o=n(671);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(287),o=n(55),a=n(1190),s=n(362),l=n(1191),c=n(299),u=n(487),d=n(3534),f=n(663),p=n(674),h=n(1184);e.name="syncGraphInstances";var g=function(){return function(t,e){var n=this;this.onClick=function(){if(n.enabled){n._syncData(),n._addEventListeners();var t=function(e){e.graphId===n.syncGraphId&&(n._colorsUpdatedListener({graphId:n.graphId}),i.GraphEvents.Service.removeListener(i.GraphEvents.elementsUpdated,t))};i.GraphEvents.Service.on(i.GraphEvents.elementsUpdated,t),i.GraphEvents.Service.emit(i.GraphEvents.interactionSyncUpdated,{graphId:n.graphId,synced:!0})}else n._removeEventListeners(),i.GraphEvents.Service.emit(i.GraphEvents.interactionSyncUpdated,{graphId:n.graphId,synced:!1})},this._addEventListeners=function(){i.GraphEvents.Service.on(i.GraphEvents.reloadData,n._dataChangedListener),i.GraphEvents.Service.on(i.GraphEvents.elementsUpdated,n._dataChangedListener),i.GraphEvents.Service.on(i.GraphEvents.elementsAdded,n._dataChangedListener),i.GraphEvents.Service.on(i.GraphEvents.elementsRemoved,n._dataChangedListener),i.GraphEvents.Service.on(i.GraphEvents.nodeColorsUpdated,n._colorsUpdatedListener),i.GraphEvents.Service.on(i.GraphEvents.filterData,h(n._dataFilterListener,1500,{leading:!1,trailing:!0})),i.GraphEvents.Service.on(i.GraphEvents.elementSelected,h(n._elementSelectedListener,500,{leading:!1,trailing:!0})),i.GraphEvents.Service.on(i.GraphEvents.elementMouseOver,n._mouseOverListener),i.GraphEvents.Service.on(i.GraphEvents.elementMouseOut,n._mouseOutListener)},this._removeEventListeners=function(){i.GraphEvents.Service.removeListener(i.GraphEvents.reloadData,n._dataChangedListener),i.GraphEvents.Service.removeListener(i.GraphEvents.elementsUpdated,n._dataChangedListener),i.GraphEvents.Service.removeListener(i.GraphEvents.elementsAdded,n._dataChangedListener),i.GraphEvents.Service.removeListener(i.GraphEvents.elementsRemoved,n._dataChangedListener),i.GraphEvents.Service.removeListener(i.GraphEvents.nodeColorsUpdated,n._colorsUpdatedListener),i.GraphEvents.Service.removeListener(i.GraphEvents.filterData,n._dataFilterListener),i.GraphEvents.Service.removeListener(i.GraphEvents.elementSelected,n._elementSelectedListener),i.GraphEvents.Service.removeListener(i.GraphEvents.elementMouseOver,n._mouseOverListener),i.GraphEvents.Service.removeListener(i.GraphEvents.elementMouseOut,n._mouseOutListener)},this._mouseOverListener=function(t){n.enabled&&t.graphId===n.graphId&&r.getGraphByIdWithCallback(n.syncGraphId,function(e){e.cy.getElementById(t.node.id()).trigger("mouseover")})},this._mouseOutListener=function(t){n.enabled&&t.graphId===n.graphId&&r.getGraphByIdWithCallback(n.syncGraphId,function(e){t.node?e.cy.getElementById(t.node.id()).trigger("mouseout"):e.cy.nodes().trigger("mouseout")})},this._elementSelectedListener=function(t){n.enabled&&(t.graphId===n.graphId?r.getGraphByIdWithCallback(n.syncGraphId,function(e){if(0!==t.nodes.length){var n=[];p(t.nodes,function(t){n.push(e.cy.getElementById(t.id()))}),e.cy.zoom(1),e.cy.center(n[0]),e.highlightNode(!1,n)}}):t.graphId===n.syncGraphId&&r.getGraphByIdWithCallback(n.graphId,function(e){e.selectedNodes=t.nodes,i.GraphEvents.Service.emit(i.GraphEvents.elementSelected,{graphId:n.graphId,nodes:t.nodes,edges:[]})}))},this._dataChangedListener=function(t){if(!n.enabled)return!1;t.graphId===n.graphId?n._syncData():t.graphId===n.syncGraphId&&n._syncDataBack()},this._syncData=function(){r.getGraphByIdWithCallback(n.graphId,function(t){var e=t.cy.nodes(),r=t.currentData;if(n.graphData=r,n.maxDataSize&&n.maxDataSize<e.length){o.alerter.infoMsg("Max graph size exceeded",n.maxDataEnforcedMsg),e=e.slice(0,n.maxDataSize);var u=c(e,function(t){return t.id()});r=a(r,function(t){return"nodes"===s(t,["data","group"])?l(u,s(t,["data","id"])):l(u,s(t,["data","source"]))&&l(u,s(t,["data","target"]))})}var d=n.syncGraphData,f=n.syncGraphData?n.syncGraphData.length:void 0,p=n.graphData,h=n.graphData?n.graphData.length:void 0;!d||0!==f&&0!==h&&f===h&&d[0].data.id===p[0].data.id&&d[f-1].data.id===p[h-1].data.id||i.GraphEvents.Service.emit(i.GraphEvents.updateData,{graphId:n.syncGraphId,data:r})})},this._syncDataBack=function(){r.getGraphByIdWithCallback(n.syncGraphId,function(t){var e=t.currentData;n.syncGraphData=e;var r=n.syncGraphData,o=n.syncGraphData?n.syncGraphData.length:void 0,a=n.graphData,s=n.graphData?n.graphData.length:void 0;!a||0!==o&&0!==s&&o===s&&r[0].data.id===a[0].data.id&&r[o-1].data.id===a[s-1].data.id||i.GraphEvents.Service.emit(i.GraphEvents.updateData,{graphId:n.graphId,data:e})})},this._dataFilterListener=function(t){if(n.enabled&&t.graphId===n.graphId){var e=d(t.nodes,function(t){return t.id()});r.getGraphByIdWithCallback(n.syncGraphId,function(t){t.cy.startBatch(),u(t.cy.nodes(),function(t){e[t.id()]?t.removeClass("displayHidden"):t.addClass("displayHidden")}),t.cy.endBatch()})}},this._colorsUpdatedListener=function(t){n.enabled&&t.graphId===n.graphId&&n.clearGraphColorTimeout&&(n.clearGraphColorTimeout=!1,r.getGraphByIdWithCallback(n.graphId,function(t){r.getGraphByIdWithCallback(n.syncGraphId,function(e){if(s(t.options.nodeColorBy,["grouping","value"])!==s(e.options.nodeColorBy,["grouping","value"])){var r=f(e.nodeGroupings,{name:t.options.nodeColorBy.grouping.name});e.changeNodeColorGrouping(r)}e.nodeColorGroups=c(e.nodeColorGroups,function(e){var n=s(f(t.nodeColorGroups,{group:e.group}),"color");return e.color=n||e.color,e}),e.updateNodesGroupColor(e.nodeColorGroups),setTimeout(function(){n.clearGraphColorTimeout=!0},200)})})),n.enabled&&t.graphId===n.syncGraphId&&n.clearSyncGraphColorTimeout&&(n.clearSyncGraphColorTimeout=!1,r.getGraphByIdWithCallback(n.syncGraphId,function(t){r.getGraphByIdWithCallback(n.graphId,function(e){if(s(t.options.nodeColorBy,["grouping","value"])!==s(e.options.nodeColorBy,["grouping","value"])){var r=f(e.nodeGroupings,{name:t.options.nodeColorBy.grouping.name});e.changeNodeColorGrouping(r)}e.nodeColorGroups=c(e.nodeColorGroups,function(e){var n=s(f(t.nodeColorGroups,{group:e.group}),"color");return e.color=n||e.color,e}),e.updateNodesGroupColor(e.nodeColorGroups),setTimeout(function(){n.clearSyncGraphColorTimeout=!0},200)})}))},this.graphId=t,this.iconClass=e.iconClass||"fa-rotate-90 fa-exchange",this.tooltip=e.tooltip||"Send data",this.syncGraphId=e.syncGraphId,this.maxDataSize=e.maxDataSize,this.maxDataEnforcedMsg=e.maxDataEnforcedMsg||"Showing only the first "+this.maxDataSize+" entities.",this.enabled=!!e.defaultEnabled,this.toggleBtn=!0,this.disabled=!1,this.clearSyncGraphColorTimeout=!0,this.clearGraphColorTimeout=!0,this.enabled&&(this._syncData(),this._addEventListeners(),i.GraphEvents.Service.emit(i.GraphEvents.interactionSyncUpdated,{graphId:this.graphId,synced:!0}))}}();function m(t){return r=t,g}e.SendData=g,m.$inject=["ccri.orion.manager"],e.factory=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(299);e.name="createTLDataSource";var a=function(){return function(t,e){var n=this;this.startTLLayerListener=function(){n.layerListener=r.$on("timelapse:querySuccessful",function(t,e){"arrow"===e.type&&n.addArrowDataToGraph(e)})},this.removeTLLayerListener=function(){n.layerListener&&(n.layerListener(),n.layerListener=null)},this.addArrowDataToGraph=function(t){n.addFaData(t)},this.formatRecords=function(t,e){var r={name:t.getName(),data:{nodes:n.getNodes(e,t.getIdFieldName()),edges:n.getEdges(e)}};n.addOrionData(r)},this.addOrionData=function(t){i.getGraphByIdWithCallback(n.graphId,function(e){t.data=i.formatData(n.graphId,t.data,e.options,""),e.allData.push({name:t.name,url:t.url||null,dataUrl:t.dataUrl||null,browseUrl:t.browseUrl||null,browseFilterUrl:t.browseFilterUrl||null,editUrl:t.editUrl||null,subGraphUrl:t.subGraphUrl||null,childUrl:t.childUrl||null,expandCollapse:t.expandCollapse||null,type:t.type||null,parentProp:t.parentProp||null,data:t.data})})},this.addFaData=function(t){t.searchForListRecords().then(function(e){n.formatRecords(t,e)})},this.getNodes=function(t,e){return o(t,function(t){return{name:t[e],group:1,properties:t}})},this.getEdges=function(t){return[]},this.graphId=t,this.startTLLayerListener()}}();function s(t,e){return r=t,i=e,a}e.CreateTLDataSource=a,s.$inject=["$rootScope","ccri.orion.manager"],e.factory=s},function(t,e,n){var r=n(488),i=n(361);t.exports=function(t,e,n){(void 0===n||i(t[e],n))&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(206),i=n(678),o=n(179),a="[object Object]",s=Function.prototype,l=Object.prototype,c=s.toString,u=l.hasOwnProperty,d=c.call(Object);t.exports=function(t){if(!o(t)||r(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}},function(t,e,n){var r=n(3551),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),l=Array(s);++a<s;)l[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(l),r(t,this,c)}}},function(t,e,n){var r=n(3552),i=n(3554)(r);t.exports=i},function(t,e,n){var r=n(433),i=n(997),o=n(104);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},function(t,e){t.exports='<div class="delete-confirmation" style="width: 330px">\n    <div style="margin:10px;">\n        Are you sure you want to permanently delete this item?:\n        <br>\n        <strong>{{name}}</strong>\n    </div>\n    <div class="text-right">\n        <span class="btn btn-xs hover-text" ng-click="$close()">\n            <i class="fa fa-close text-danger"></i>\n            <b>Cancel</b>\n        </span>\n        <span class="btn btn-xs hover-text" ng-click="$close(); delete()">\n            <b>Delete</b>\n            <i class="fa fa-check text-success"></i>\n        </span>\n    </div>\n</div>\n'},,,,,,,,,,function(t,e,n){var r=n(166),i=n(51),o=n(570),a=n(264),s=i(function(t){return o(r(t,1,a,!0))});t.exports=s},,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),i=n(4),o=n(2),a=n(3726),s=n(322),l=n(18),c=n(46),u=n(55),d=n(320),f=n(858),p=n(331),h=n(683),g=n(24),m=n(1222),v=n(270),y=n(135),b=n(410),w=n(194),_=n(303),x=n(1223),S=function(){function t(e){var n=this;this.TLManager=e,this.addCapability=function(t){var e=new d.Capability("tubeselect",["trackLayer","poolLayer","trackLayerIdField","poolLayerIdField","poolLayerDtgField","trackLayerDtgField","poolLayerGeomField"],"Launch tube-select","ccri-icon ccri-icon-route");return d.CapabilitiesHelper.addCapability(t,e,n.generateOnClick)},this.generateOnClick=function(e,c){return function(d,p,h,m){u.alerter.infoMsg("Launching tube-select...");var v=g.DataSourceManager.getDataSourceByLayerName(c.poolLayer),y=g.DataSourceManager.getDataSourceByLayerName(c.trackLayer),b=e+" tube results: "+p[c.trackLayerIdField]+" ("+r.utc().format("YYYY-MM-DD HH:mm:ss")+")",_=c.trackLayerIdField;f.WfsManager.getFeature(y.wfsUrl,y.name,{cql_filter:_+"='"+p[_]+"'",propertyName:c.trackLayerDtgField}).then(function(e){if(e){var r=i(e.features,function(t){return o(t,"properties."+c.trackLayerDtgField)}).sort(),u=a(r),d=s(r);if(!l(u)&&!l(d))return f.WfsManager.getFeatureTypeDescription(y.wfsUrl,y.name,!1).then(function(e){return f.WfsManager.getFeatureTypeDescription(v.wfsUrl,v.name,!1).then(function(r){var i=t.buildDataFilter(u,d,p,c,v,y,r,e),o=t.buildStoreRecord(v,c),a=new w.SourceRecord({id:v.id,type:w.SourceType.SERVER}),s=new w.DataViewRecord({source:a,store:o,dataFilter:i});return n.TLManager.buildCanvasLayerState(s,b,x.ROUTE_SEARCH_TL_INTERACTION)})})}})}}}return t.buildFormatOptions=function(t,e,n,r,i,o){switch(t){case y.StoreTypes.Arrow:return b.StoreHelper.buildArrowFormatOptions(i,e,o);case y.StoreTypes.Binary:return b.StoreHelper.buildBinFormatOptions(e,n,r);case y.StoreTypes.JSON:return null;default:return}},t.buildStoreRecord=function(e,n){var r=v.KeywordHelper.getDefaultStoreType(e),i=t.buildFormatOptions(r,n.trackLayerDtgField,n.poolLayerGeomField,n.poolLayerIdField,e,[]);return new w.StoreRecord({type:r,id:h.uuid.generate(),geomField:n.poolLayerGeomField,dtgField:n.trackLayerDtgField,idField:n.poolLayerIdField,formatOptions:i})},t.buildDataFilter=function(t,e,n,r,i,o,a,s){return new m.TubeSelectDataFilterRecord({route:new _.QueryFeaturesDataFilterRecord({dataLayer:o.name,properties:{},workspace:s.targetPrefix,namespace:s.targetNamespace,additionalCql:new p.RawClauseRecord({cql:r.trackLayerIdField+"='"+n[r.trackLayerIdField]+"'"})}),pool:new _.QueryFeaturesDataFilterRecord({dataLayer:i.name,properties:{},workspace:a.targetPrefix,namespace:a.targetNamespace,additionalCql:new p.RawClauseRecord({cql:"("+r.poolLayerDtgField+" DURING "+t+"/"+e+")"})}),bufferSize:r.bufferMeters,gapFill:h.defaultIf(c,r.gapFill,"nofill"),maxBins:h.defaultIf(c,r.maxBins,5e3),maxSpeed:r.maxSpeed,maxTime:h.defaultIf(c,r.maxTime,600)})},t.$inject=["stealth.geo.timelapse.manager.Manager"],t}();e.TubeSelectCapability=S},,,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16),a=n(3737),s=n(303),l=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({route:void 0,pool:new s.QueryFeaturesDataFilterRecord({}),bufferSize:void 0,maxSpeed:void 0,maxTime:void 0,maxBins:void 0,gapFill:"nofill",additionalCql:void 0,requestType:a.TUBE_SELECT_REQUEST_TYPE},"TubeSelectDataFilterRecord"));e.TubeSelectDataFilterRecord=l,o.StateManager.getInstance().addRecord(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1063),i=n(1068),o=n(1069),a=n(604),s=n(331),l=n(576),c=n(135);e.ROUTE_SEARCH_TL_INTERACTION="RouteSearchTLServer",i.InteractionManager.registerInteraction(e.ROUTE_SEARCH_TL_INTERACTION,{fetch:function(t){var e=t.canvasLayer.getState().dataView.dataFilter;return o.SearchStrategies.buildGetFeatureDVR(t).then(function(t){return t.dataFilter.with({additionalCql:new s.RawClauseRecord({cql:e.pool.additionalCql.buildCql()})}),l.GetFeatureRequestBuilder.buildAndSubmit(t)}).then(function(e){var n=e.features;return o.SearchStrategies.localFile(t).then(function(e){var r=t.canvasLayer.getState().dataView.store;return{records:c.StoreConfigs[r.type].localIdFilter(n,e.records,r.idField)}})})},filter:a.PopupFilter.filter,id:r.TL_DEFAULT_POPUP_INTERACTION_ID})},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(96),i=n(23),o=n(2),a=n(14),s=n(561),l=n(15),c=function(){return function(t,e){var n=this;this.displayRegistry=t,this.displayIsActive=function(){var t=n.displayRegistry.listActive(),e=i(t,function(t){return t.id===n.displayId});return!a(e)},this.displayRecord=function(t){n.url=s(n.urlTemplate,n.templateSettings)(t),n.displayIsActive()||n.displayRegistry.emit("display.active",{id:n.displayId,active:!0}),setTimeout(function(){var t=document.getElementById("stealth-dragonfish-display-iframe-"+n.displayId);t&&(t.src=n.url),n.displayRegistry.emit("display.selected",{id:n.displayId})},0)},this.addCapability=function(t){return a(t[n.displayId])||(t[n.displayId]=r(t[n.displayId],{toolTipText:"Show in "+n.displayId,iconClass:n.iconClass}),t[n.displayId].onClick=function(t,e,r,i){var a=o(i,"source.propertes",e);n.displayRecord(a)}),t},this.url=e.defaultUrl,this.urlTemplate=e.urlTemplate,this.templateSettings=r(l.config.get("dragonfish.display.templateSettings",{}),{evaluate:/{{([\s\S]+?)}}/g,interpolate:/{{([\s\S]+?)}}/g,escape:/{{-([\s\S]+?)}}/g}),this.iconClass=e.iconClass,this.displayId=e.id,this.displayOptionText="<i class='fa fa-fw "+this.iconClass+"'></i> Show in "+this.displayId}}();e.DisplayService=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(39),o=n(113),a=n(3821);e.stealthDragonfishEntityThumbnailPopupManager="stealth.dragonfish.entity.thumbnailPopupManager",r.module("stealth.dragonfish.entity",["ccri.popup"]).service(e.stealthDragonfishEntityThumbnailPopupManager,["$rootScope","ccri.popup.manager",function(t,e){this.entityPopups={},this.displayPopup=function(n,a,s,l){if(!n)return;if(this.entityPopups[n])!function(t){e.focusPopup(this.entityPopups[t])}(n);else{var c=t.$new(),u=r.element(".primaryDisplay > ccri-popup-container"),d=u.data("ccri.popup.containerId"),f=o.Popup.Positioning.TopLeft;c.imgSrc=a,s||((s=e.getViewportDim(d))[1]=0,f=o.Popup.Positioning.TopRight),this.entityPopups[n]=e.displayPopup(d,n,"DF_ENTITY","fa-picture-o",new i.WidgetDef({tag:"st-df-entity-thumbnail-popup",scope:c,isolateScope:!0}),{contentHeight:l[1],contentWidth:l[0],offsets:[s[0],s[1]],onClose:function(){c.$destroy(),delete this.entityPopups[n]}.bind(this),positioning:f})}},this.closePopup=function(t){e.closePopup(this.entityPopups[t])}}]).directive("stDfEntityThumbnailPopup",[function(){return{restrict:"E",template:a,scope:!1}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,i){this.title=t,this.entityId=e,this.isFilterable=n,this.filterFunc=r,this.filterKey=i}return t.prototype.getTitle=function(){return this.title},t}();e.QueryParams=r},function(t,e,n){"use strict";n.r(e);var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},i=function(t){return 1===t.length&&(t=function(t){return function(e,n){return r(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var o=i(r),a=o.right,s=o.left,l=a,c=function(t,e){null==e&&(e=u);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return o};function u(t,e){return[t,e]}var d=function(t,e,n){var r,i,o,a,s=t.length,l=e.length,c=new Array(s*l);for(null==n&&(n=u),r=o=0;r<s;++r)for(a=t[r],i=0;i<l;++i,++o)c[o]=n(a,e[i]);return c},f=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},p=function(t){return null===t?NaN:+t},h=function(t,e){var n,r,i=t.length,o=0,a=-1,s=0,l=0;if(null==e)for(;++a<i;)isNaN(n=p(t[a]))||(l+=(r=n-s)*(n-(s+=r/++o)));else for(;++a<i;)isNaN(n=p(e(t[a],a,t)))||(l+=(r=n-s)*(n-(s+=r/++o)));if(o>1)return l/(o-1)},g=function(t,e){var n=h(t,e);return n?Math.sqrt(n):n},m=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},v=Array.prototype,y=v.slice,b=v.map,w=function(t){return function(){return t}},_=function(t){return t},x=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},S=Math.sqrt(50),C=Math.sqrt(10),E=Math.sqrt(2),T=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=M(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function M(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=S?10:o>=C?5:o>=E?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=S?10:o>=C?5:o>=E?2:1)}function k(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=S?i*=10:o>=C?i*=5:o>=E&&(i*=2),e<t?-i:i}var A=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},I=function(){var t=_,e=m,n=A;function r(r){var i,o,a=r.length,s=new Array(a);for(i=0;i<a;++i)s[i]=t(r[i],i,r);var c=e(s),u=c[0],d=c[1],f=n(s,u,d);Array.isArray(f)||(f=k(u,d,f),f=x(Math.ceil(u/f)*f,d,f));for(var p=f.length;f[0]<=u;)f.shift(),--p;for(;f[p-1]>d;)f.pop(),--p;var h,g=new Array(p+1);for(i=0;i<=p;++i)(h=g[i]=[]).x0=i>0?f[i-1]:u,h.x1=i<p?f[i]:d;for(i=0;i<a;++i)u<=(o=s[i])&&o<=d&&g[l(f,o,0,p)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:w(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:w([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?w(y.call(t)):w(t),r):n},r},O=function(t,e,n){if(null==n&&(n=p),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},P=function(t,e,n){return t=b.call(t,p).sort(r),Math.ceil((n-e)/(2*(O(t,.75)-O(t,.25))*Math.pow(t.length,-1/3)))},L=function(t,e,n){return Math.ceil((n-e)/(3.5*g(t)*Math.pow(t.length,-1/3)))},D=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},N=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=p(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=p(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},R=function(t,e){var n,i=t.length,o=-1,a=[];if(null==e)for(;++o<i;)isNaN(n=p(t[o]))||a.push(n);else for(;++o<i;)isNaN(n=p(e(t[o],o,t)))||a.push(n);return O(a.sort(r),.5)},F=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},B=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r},j=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},q=function(t,e){if(n=t.length){var n,i,o=0,a=0,s=t[a];for(null==e&&(e=r);++o<n;)(e(i=t[o],s)<0||0!==e(s,s))&&(s=i,a=o);return 0===e(s,s)?a:void 0}},z=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},U=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},$=function(t){if(!(i=t.length))return[];for(var e=-1,n=B(t,V),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r};function V(t){return t.length}var H=function(){return $(arguments)};n.d(e,"bisect",function(){return l}),n.d(e,"bisectRight",function(){return a}),n.d(e,"bisectLeft",function(){return s}),n.d(e,"ascending",function(){return r}),n.d(e,"bisector",function(){return i}),n.d(e,"cross",function(){return d}),n.d(e,"descending",function(){return f}),n.d(e,"deviation",function(){return g}),n.d(e,"extent",function(){return m}),n.d(e,"histogram",function(){return I}),n.d(e,"thresholdFreedmanDiaconis",function(){return P}),n.d(e,"thresholdScott",function(){return L}),n.d(e,"thresholdSturges",function(){return A}),n.d(e,"max",function(){return D}),n.d(e,"mean",function(){return N}),n.d(e,"median",function(){return R}),n.d(e,"merge",function(){return F}),n.d(e,"min",function(){return B}),n.d(e,"pairs",function(){return c}),n.d(e,"permute",function(){return j}),n.d(e,"quantile",function(){return O}),n.d(e,"range",function(){return x}),n.d(e,"scan",function(){return q}),n.d(e,"shuffle",function(){return z}),n.d(e,"sum",function(){return U}),n.d(e,"ticks",function(){return T}),n.d(e,"tickIncrement",function(){return M}),n.d(e,"tickStep",function(){return k}),n.d(e,"transpose",function(){return $}),n.d(e,"variance",function(){return h}),n.d(e,"zip",function(){return H})},function(t,e,n){"use strict";n.r(e);var r=n(687),i={NAMESPACE_URI:"http://www.w3.org/1999/xlink",readHref:function(t){return t.getAttributeNS(i.NAMESPACE_URI,"href")}},o=i,a={binarySearch:function(t,e,n){for(var r,i,o=n||a.numberSafeCompareFunction,s=0,l=t.length,c=!1;s<l;)(i=+o(t[r=s+(l-s>>1)],e))<0?s=r+1:(l=r,c=!i);return c?s:~s},numberSafeCompareFunction:function(t,e){return t>e?1:t<e?-1:0},includes:function(t,e){return t.indexOf(e)>=0},linearFindNearest:function(t,e,n){var r,i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1},reverseSubArray:function(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}},extend:function(t,e){var n,r=Array.isArray(e)?e:[e],i=r.length;for(n=0;n<i;n++)t[t.length]=r[n]},remove:function(t,e){var n=t.indexOf(e),r=n>-1;return r&&t.splice(n,1),r},find:function(t,e){for(var n,r=t.length>>>0,i=0;i<r;i++)if(e(n=t[i],i,t))return n;return null},equals:function(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0},stableSort:function(t,e){var n,r=t.length,i=Array(t.length);for(n=0;n<r;n++)i[n]={index:n,value:t[n]};for(i.sort(function(t,n){return e(t.value,n.value)||t.index-n.index}),n=0;n<t.length;n++)t[n]=i[n].value},findIndex:function(t,e){var n;return!t.every(function(r,i){return n=i,!e(r,i,t)})?n:-1},isSorted:function(t,e,n){var r=e||a.numberSafeCompareFunction;return t.every(function(e,i){if(0===i)return!0;var o=r(t[i-1],e);return!(o>0||n&&0===o)})}},s=a,l={};l.DOCUMENT=document.implementation.createDocument("","",null),l.createElementNS=function(t,e){return l.DOCUMENT.createElementNS(t,e)},l.getAllTextContent=function(t,e){return l.getAllTextContent_(t,e,[]).join("")},l.getAllTextContent_=function(t,e,n){var r;if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else for(r=t.firstChild;r;r=r.nextSibling)l.getAllTextContent_(r,e,n);return n},l.isDocument=function(t){return t instanceof Document},l.isNode=function(t){return t instanceof Node},l.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)||""},l.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},l.parse=function(t){return(new DOMParser).parseFromString(t,"application/xml")},l.makeArrayExtender=function(t,e){return function(n,r){var i=t.call(e,n,r);if(void 0!==i){var o=r[r.length-1];s.extend(o,i)}}},l.makeArrayPusher=function(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&r[r.length-1].push(i)}},l.makeReplacer=function(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&(r[r.length-1]=i)}},l.makeObjectPropertyPusher=function(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:r.localName;(s in a?a[s]:a[s]=[]).push(o)}}},l.makeObjectPropertySetter=function(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);void 0!==o&&(i[i.length-1][void 0!==e?e:r.localName]=o)}},l.makeChildAppender=function(t,e){return function(n,r,i){t.call(void 0!==e?e:this,n,r,i),i[i.length-1].node.appendChild(n)}},l.makeArraySerializer=function(t,e){var n,r;return function(e,i,o){if(void 0===n){n={};var a={};a[e.localName]=t,n[e.namespaceURI]=a,r=l.makeSimpleNodeFactory(e.localName)}l.serialize(n,r,i,o)}},l.makeSimpleNodeFactory=function(t,e){var n=t;return function(t,r,i){var o=r[r.length-1].node,a=n;void 0===a&&(a=i);var s=e;return void 0===e&&(s=o.namespaceURI),l.createElementNS(s,a)}},l.OBJECT_PROPERTY_NODE_FACTORY=l.makeSimpleNodeFactory(),l.makeSequence=function(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=t[e[i]];return r},l.makeStructureNS=function(t,e,n){var r,i,o=void 0!==n?n:{};for(r=0,i=t.length;r<i;++r)o[t[r]]=e;return o},l.parseNode=function(t,e,n,r){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(r,i,n)}}},l.pushParseAndPop=function(t,e,n,r,i){return r.push(t),l.parseNode(e,n,r,i),r.pop()},l.serialize=function(t,e,n,r,i,o){for(var a,s,l=(void 0!==i?i:n).length,c=0;c<l;++c)void 0!==(a=n[c])&&void 0!==(s=e.call(o,a,r,void 0!==i?i[c]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,r)},l.pushSerializeAndPop=function(t,e,n,r,i,o,a){return i.push(t),l.serialize(e,n,r,i,o,a),i.pop()};var c=l,u=function(){};u.prototype.read=function(t){if(c.isDocument(t))return this.readFromDocument(t);if(c.isNode(t))return this.readFromNode(t);if("string"==typeof t){var e=c.parse(t);return this.readFromDocument(e)}return null},u.prototype.readFromDocument=function(t){},u.prototype.readFromNode=function(t){};var d=u,f={padNumber:function(t,e,n){var r=void 0!==n?t.toFixed(n):""+t,i=r.indexOf(".");return(i=-1===i?r.length:i)>e?r:new Array(1+e-i).join("0")+r},compareVersions:function(t,e){for(var n=(""+t).split("."),r=(""+e).split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||"0",10),a=parseInt(r[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}},p=f,h={NAMESPACE_URI:"http://www.w3.org/2001/XMLSchema",readBoolean:function(t){var e=c.getAllTextContent(t,!1);return h.readBooleanString(e)},readBooleanString:function(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0},readDateTime:function(t){var e=c.getAllTextContent(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3},readDecimal:function(t){var e=c.getAllTextContent(t,!1);return h.readDecimalString(e)},readDecimalString:function(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0},readNonNegativeInteger:function(t){var e=c.getAllTextContent(t,!1);return h.readNonNegativeIntegerString(e)},readNonNegativeIntegerString:function(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0},readString:function(t){return c.getAllTextContent(t,!1).trim()},writeBooleanTextNode:function(t,e){h.writeStringTextNode(t,e?"1":"0")},writeCDATASection:function(t,e){t.appendChild(c.DOCUMENT.createCDATASection(e))},writeDateTimeTextNode:function(t,e){var n=new Date(1e3*e),r=n.getUTCFullYear()+"-"+p.padNumber(n.getUTCMonth()+1,2)+"-"+p.padNumber(n.getUTCDate(),2)+"T"+p.padNumber(n.getUTCHours(),2)+":"+p.padNumber(n.getUTCMinutes(),2)+":"+p.padNumber(n.getUTCSeconds(),2)+"Z";t.appendChild(c.DOCUMENT.createTextNode(r))},writeDecimalTextNode:function(t,e){var n=e.toPrecision();t.appendChild(c.DOCUMENT.createTextNode(n))},writeNonNegativeIntegerTextNode:function(t,e){var n=e.toString();t.appendChild(c.DOCUMENT.createTextNode(n))},writeStringTextNode:function(t,e){t.appendChild(c.DOCUMENT.createTextNode(e))}},g=h,m=function(){d.call(this),this.version=void 0};r.default.inherits(m,d),m.prototype.read,m.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},m.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();var e=c.pushParseAndPop({version:this.version},m.PARSERS_,t,[]);return e||null},m.readAttribution_=function(t,e){return c.pushParseAndPop({},m.ATTRIBUTION_PARSERS_,t,e)},m.readBoundingBox_=function(t,e){var n=[g.readDecimalString(t.getAttribute("minx")),g.readDecimalString(t.getAttribute("miny")),g.readDecimalString(t.getAttribute("maxx")),g.readDecimalString(t.getAttribute("maxy"))],r=[g.readDecimalString(t.getAttribute("resx")),g.readDecimalString(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:n,res:r}},m.readEXGeographicBoundingBox_=function(t,e){var n=c.pushParseAndPop({},m.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_,t,e);if(n){var r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,a=n.northBoundLatitude;if(void 0!==r&&void 0!==i&&void 0!==o&&void 0!==a)return[r,i,o,a]}},m.readCapability_=function(t,e){return c.pushParseAndPop({},m.CAPABILITY_PARSERS_,t,e)},m.readService_=function(t,e){return c.pushParseAndPop({},m.SERVICE_PARSERS_,t,e)},m.readContactInformation_=function(t,e){return c.pushParseAndPop({},m.CONTACT_INFORMATION_PARSERS_,t,e)},m.readContactPersonPrimary_=function(t,e){return c.pushParseAndPop({},m.CONTACT_PERSON_PARSERS_,t,e)},m.readContactAddress_=function(t,e){return c.pushParseAndPop({},m.CONTACT_ADDRESS_PARSERS_,t,e)},m.readException_=function(t,e){return c.pushParseAndPop([],m.EXCEPTION_PARSERS_,t,e)},m.readCapabilityLayer_=function(t,e){return c.pushParseAndPop({},m.LAYER_PARSERS_,t,e)},m.readLayer_=function(t,e){var n=e[e.length-1],r=c.pushParseAndPop({},m.LAYER_PARSERS_,t,e);if(r){var i=g.readBooleanString(t.getAttribute("queryable"));void 0===i&&(i=n.queryable),r.queryable=void 0!==i&&i;var o=g.readNonNegativeIntegerString(t.getAttribute("cascaded"));void 0===o&&(o=n.cascaded),r.cascaded=o;var a=g.readBooleanString(t.getAttribute("opaque"));void 0===a&&(a=n.opaque),r.opaque=void 0!==a&&a;var s=g.readBooleanString(t.getAttribute("noSubsets"));void 0===s&&(s=n.noSubsets),r.noSubsets=void 0!==s&&s;var l=g.readDecimalString(t.getAttribute("fixedWidth"));l||(l=n.fixedWidth),r.fixedWidth=l;var u=g.readDecimalString(t.getAttribute("fixedHeight"));u||(u=n.fixedHeight),r.fixedHeight=u;["Style","CRS","AuthorityURL"].forEach(function(t){if(t in n){var e=r[t]||[];r[t]=e.concat(n[t])}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in r)){var e=n[t];r[t]=e}}),r}},m.readDimension_=function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:g.readBooleanString(t.getAttribute("multipleValues")),nearestValue:g.readBooleanString(t.getAttribute("nearestValue")),current:g.readBooleanString(t.getAttribute("current")),values:g.readString(t)}},m.readFormatOnlineresource_=function(t,e){return c.pushParseAndPop({},m.FORMAT_ONLINERESOURCE_PARSERS_,t,e)},m.readRequest_=function(t,e){return c.pushParseAndPop({},m.REQUEST_PARSERS_,t,e)},m.readDCPType_=function(t,e){return c.pushParseAndPop({},m.DCPTYPE_PARSERS_,t,e)},m.readHTTP_=function(t,e){return c.pushParseAndPop({},m.HTTP_PARSERS_,t,e)},m.readOperationType_=function(t,e){return c.pushParseAndPop({},m.OPERATIONTYPE_PARSERS_,t,e)},m.readSizedFormatOnlineresource_=function(t,e){var n=m.readFormatOnlineresource_(t,e);if(n){var r=[g.readNonNegativeIntegerString(t.getAttribute("width")),g.readNonNegativeIntegerString(t.getAttribute("height"))];return n.size=r,n}},m.readAuthorityURL_=function(t,e){var n=m.readFormatOnlineresource_(t,e);if(n)return n.name=t.getAttribute("name"),n},m.readMetadataURL_=function(t,e){var n=m.readFormatOnlineresource_(t,e);if(n)return n.type=t.getAttribute("type"),n},m.readStyle_=function(t,e){return c.pushParseAndPop({},m.STYLE_PARSERS_,t,e)},m.readKeywordList_=function(t,e){return c.pushParseAndPop([],m.KEYWORDLIST_PARSERS_,t,e)},m.NAMESPACE_URIS_=[null,"http://www.opengis.net/wms"],m.PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Service:c.makeObjectPropertySetter(m.readService_),Capability:c.makeObjectPropertySetter(m.readCapability_)}),m.CAPABILITY_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Request:c.makeObjectPropertySetter(m.readRequest_),Exception:c.makeObjectPropertySetter(m.readException_),Layer:c.makeObjectPropertySetter(m.readCapabilityLayer_)}),m.SERVICE_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Name:c.makeObjectPropertySetter(g.readString),Title:c.makeObjectPropertySetter(g.readString),Abstract:c.makeObjectPropertySetter(g.readString),KeywordList:c.makeObjectPropertySetter(m.readKeywordList_),OnlineResource:c.makeObjectPropertySetter(o.readHref),ContactInformation:c.makeObjectPropertySetter(m.readContactInformation_),Fees:c.makeObjectPropertySetter(g.readString),AccessConstraints:c.makeObjectPropertySetter(g.readString),LayerLimit:c.makeObjectPropertySetter(g.readNonNegativeInteger),MaxWidth:c.makeObjectPropertySetter(g.readNonNegativeInteger),MaxHeight:c.makeObjectPropertySetter(g.readNonNegativeInteger)}),m.CONTACT_INFORMATION_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{ContactPersonPrimary:c.makeObjectPropertySetter(m.readContactPersonPrimary_),ContactPosition:c.makeObjectPropertySetter(g.readString),ContactAddress:c.makeObjectPropertySetter(m.readContactAddress_),ContactVoiceTelephone:c.makeObjectPropertySetter(g.readString),ContactFacsimileTelephone:c.makeObjectPropertySetter(g.readString),ContactElectronicMailAddress:c.makeObjectPropertySetter(g.readString)}),m.CONTACT_PERSON_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{ContactPerson:c.makeObjectPropertySetter(g.readString),ContactOrganization:c.makeObjectPropertySetter(g.readString)}),m.CONTACT_ADDRESS_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{AddressType:c.makeObjectPropertySetter(g.readString),Address:c.makeObjectPropertySetter(g.readString),City:c.makeObjectPropertySetter(g.readString),StateOrProvince:c.makeObjectPropertySetter(g.readString),PostCode:c.makeObjectPropertySetter(g.readString),Country:c.makeObjectPropertySetter(g.readString)}),m.EXCEPTION_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Format:c.makeArrayPusher(g.readString)}),m.LAYER_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Name:c.makeObjectPropertySetter(g.readString),Title:c.makeObjectPropertySetter(g.readString),Abstract:c.makeObjectPropertySetter(g.readString),KeywordList:c.makeObjectPropertySetter(m.readKeywordList_),CRS:c.makeObjectPropertyPusher(g.readString),EX_GeographicBoundingBox:c.makeObjectPropertySetter(m.readEXGeographicBoundingBox_),BoundingBox:c.makeObjectPropertyPusher(m.readBoundingBox_),Dimension:c.makeObjectPropertyPusher(m.readDimension_),Attribution:c.makeObjectPropertySetter(m.readAttribution_),AuthorityURL:c.makeObjectPropertyPusher(m.readAuthorityURL_),Identifier:c.makeObjectPropertyPusher(g.readString),MetadataURL:c.makeObjectPropertyPusher(m.readMetadataURL_),DataURL:c.makeObjectPropertyPusher(m.readFormatOnlineresource_),FeatureListURL:c.makeObjectPropertyPusher(m.readFormatOnlineresource_),Style:c.makeObjectPropertyPusher(m.readStyle_),MinScaleDenominator:c.makeObjectPropertySetter(g.readDecimal),MaxScaleDenominator:c.makeObjectPropertySetter(g.readDecimal),Layer:c.makeObjectPropertyPusher(m.readLayer_)}),m.ATTRIBUTION_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Title:c.makeObjectPropertySetter(g.readString),OnlineResource:c.makeObjectPropertySetter(o.readHref),LogoURL:c.makeObjectPropertySetter(m.readSizedFormatOnlineresource_)}),m.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{westBoundLongitude:c.makeObjectPropertySetter(g.readDecimal),eastBoundLongitude:c.makeObjectPropertySetter(g.readDecimal),southBoundLatitude:c.makeObjectPropertySetter(g.readDecimal),northBoundLatitude:c.makeObjectPropertySetter(g.readDecimal)}),m.REQUEST_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{GetCapabilities:c.makeObjectPropertySetter(m.readOperationType_),GetMap:c.makeObjectPropertySetter(m.readOperationType_),GetFeatureInfo:c.makeObjectPropertySetter(m.readOperationType_)}),m.OPERATIONTYPE_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Format:c.makeObjectPropertyPusher(g.readString),DCPType:c.makeObjectPropertyPusher(m.readDCPType_)}),m.DCPTYPE_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{HTTP:c.makeObjectPropertySetter(m.readHTTP_)}),m.HTTP_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Get:c.makeObjectPropertySetter(m.readFormatOnlineresource_),Post:c.makeObjectPropertySetter(m.readFormatOnlineresource_)}),m.STYLE_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Name:c.makeObjectPropertySetter(g.readString),Title:c.makeObjectPropertySetter(g.readString),Abstract:c.makeObjectPropertySetter(g.readString),LegendURL:c.makeObjectPropertyPusher(m.readSizedFormatOnlineresource_),StyleSheetURL:c.makeObjectPropertySetter(m.readFormatOnlineresource_),StyleURL:c.makeObjectPropertySetter(m.readFormatOnlineresource_)}),m.FORMAT_ONLINERESOURCE_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Format:c.makeObjectPropertySetter(g.readString),OnlineResource:c.makeObjectPropertySetter(o.readHref)}),m.KEYWORDLIST_PARSERS_=c.makeStructureNS(m.NAMESPACE_URIS_,{Keyword:c.makeArrayPusher(g.readString)});e.default=m},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(1233),n(3761),n(3798),n(3854),n(3857),n(3875),n(3884)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(1234),n(1254);var r=n(1255);window.rxjsTakeWhile=r.takeWhile;var i=n(39);window.ccriAngularUtils=i;var o=n(95),a=n(149),s=n(55),l=n(320),c=n(15),u=n(54),d=n(57),f=n(1891),p=n(84),h=n(16),g=n(1907),m=n(167),v=n(265);n(2004),n(113);var y=n(404),b=n(90),w=n(2036),_=n(2069),x=n(24),S=n(193),C=n(2101);n(914),n(2181),n(935);var E=n(2241);n(2377),n(2382),n(2397),n(2431),n(2934);var T=n(2939),M=n(597);window.GoldenLayout=M;var k=n(3020),A=n(287),I=n(3408),O=n(3567);window.ccriUtils=o,window.ccriBars=a,window.ccriCorealerter=s,window.ccriCoreconfig=c,window.ccriCorecapabilities=l,window.ccriCorehttp=u,window.ccriCorelog=d,window.ccriCoreuserprefs=f,window.DataStore=p,window.AppState=h,window.Geo=g,window.OwsUtils=m,window.ccriUserObjects=v,window.ccriMap=y,window.MathUtils=b,window.stealthLive=w,window.stealthContext=_,window.ccriTimeControls=S,window.stealthQueryEdit=C,window.DataSourceManager=x.DataSourceManager,window.StealthOrion=I,window.stealthSearch=T,window.ccriFormGen=k,window.DataGrid=E,window.ccriOrion=A,window.stealthLegend=O,n(3574),n(3603),n(3609),n(3612),n(3668),n(682),n(3725),n(3750),n(3754),n(3756),n(3758)},function(t,e,n){"use strict";n(1235)()||Object.defineProperty(n(1236),"Symbol",{value:n(1237),configurable:!0,enumerable:!1,writable:!0})},function(t,e,n){"use strict";var r={object:!0,symbol:!0};t.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},function(t,e){t.exports=function(){return this}()},function(t,e,n){"use strict";var r,i,o,a,s=n(1238),l=n(1252),c=Object.create,u=Object.defineProperties,d=Object.defineProperty,f=Object.prototype,p=c(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),a=!0}catch(t){}}var h=function(){var t=c(null);return function(e){for(var n,r,i=0;t[e+(i||"")];)++i;return t[e+=i||""]=!0,d(f,n="@@"+e,s.gs(null,function(t){r||(r=!0,d(this,n,s(t)),r=!1)})),n}}();o=function(t){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(t)},t.exports=i=function t(e){var n;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return a?r(e):(n=c(o.prototype),e=void 0===e?"":String(e),u(n,{__description__:s("",e),__name__:s("",h(e))}))},u(i,{for:s(function(t){return p[t]?p[t]:p[t]=i(String(t))}),keyFor:s(function(t){var e;for(e in l(t),p)if(p[e]===t)return e}),hasInstance:s("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",r&&r.iterator||i("iterator")),match:s("",r&&r.match||i("match")),replace:s("",r&&r.replace||i("replace")),search:s("",r&&r.search||i("search")),species:s("",r&&r.species||i("species")),split:s("",r&&r.split||i("split")),toPrimitive:s("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:s("",r&&r.toStringTag||i("toStringTag")),unscopables:s("",r&&r.unscopables||i("unscopables"))}),u(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),u(i.prototype,{toString:s(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:s(function(){return l(this)})}),d(i.prototype,i.toPrimitive,s("",function(){var t=l(this);return"symbol"==typeof t?t:t.toString()})),d(i.prototype,i.toStringTag,s("c","Symbol")),d(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),d(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},function(t,e,n){"use strict";var r=n(1239),i=n(1247),o=n(1248),a=n(1249);(t.exports=function(t,e){var n,o,s,l,c;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],null==t?(n=s=!0,o=!1):(n=a.call(t,"c"),o=a.call(t,"e"),s=a.call(t,"w")),c={value:e,configurable:n,enumerable:o,writable:s},l?r(i(l),c):c}).gs=function(t,e,n){var s,l,c,u;return"string"!=typeof t?(c=n,n=e,e=t,t=null):c=arguments[3],null==e?e=void 0:o(e)?null==n?n=void 0:o(n)||(c=n,n=void 0):(c=e,e=n=void 0),null==t?(s=!0,l=!1):(s=a.call(t,"c"),l=a.call(t,"e")),u={get:e,set:n,configurable:s,enumerable:l},c?r(i(c),u):u}},function(t,e,n){"use strict";t.exports=n(1240)()?Object.assign:n(1241)},function(t,e,n){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var r=n(1242),i=n(1246),o=Math.max;t.exports=function(t,e){var n,a,s,l=o(arguments.length,2);for(t=Object(i(t)),s=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},a=1;a<l;++a)e=arguments[a],r(e).forEach(s);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=n(1243)()?Object.keys:n(1244)},function(t,e,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,n){"use strict";var r=n(498),i=Object.keys;t.exports=function(t){return i(r(t)?Object(t):t)}},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){"use strict";var r=n(498);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,n){"use strict";var r=n(498),i=Array.prototype.forEach,o=Object.create;t.exports=function(t){var e=o(null);return i.call(arguments,function(t){r(t)&&function(t,e){var n;for(n in t)e[n]=t[n]}(Object(t),e)}),e}},function(t,e,n){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,n){"use strict";t.exports=n(1250)()?String.prototype.contains:n(1251)},function(t,e,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(t,e,n){"use strict";var r=String.prototype.indexOf;t.exports=function(t){return r.call(this,t,arguments[1])>-1}},function(t,e,n){"use strict";var r=n(1253);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e,n){"use strict";t.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},function(t,e,n){(function(t){!function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),n=function(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(n[Symbol.iterator]=function(){return n}),n},r=function(t){return encodeURIComponent(t).replace(/%20/g,"+")},i=function(t){return decodeURIComponent(t).replace(/\+/g," ")};"URLSearchParams"in t&&"a=1"===new URLSearchParams("?a=1").toString()||function(){var o=function(t){if(Object.defineProperty(this,"_entries",{writable:!0,value:{}}),"string"==typeof t)""!==t&&this._fromString(t);else if(t instanceof o){var e=this;t.forEach(function(t,n){e.append(n,t)})}},a=o.prototype;a.append=function(t,e){t in this._entries?this._entries[t].push(e.toString()):this._entries[t]=[e.toString()]},a.delete=function(t){delete this._entries[t]},a.get=function(t){return t in this._entries?this._entries[t][0]:null},a.getAll=function(t){return t in this._entries?this._entries[t].slice(0):[]},a.has=function(t){return t in this._entries},a.set=function(t,e){this._entries[t]=[e.toString()]},a.forEach=function(t,e){var n;for(var r in this._entries)if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var i=0;i<n.length;i++)t.call(e,n[i],r,this)}},a.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),n(t)},a.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},a.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),n(t)},e&&(a[Symbol.iterator]=a.entries),a.toString=function(){var t=[];return this.forEach(function(e,n){t.push(r(n)+"="+r(e))}),t.join("&")},Object.defineProperty(a,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(t){this._entries={};for(var e,n=(t=t.replace(/^\?/,"")).split("&"),r=0;r<n.length;r++)e=n[r].split("="),this.append(i(e[0]),e.length>1?i(e[1]):"")}}),t.URLSearchParams=o}(),"function"!=typeof URLSearchParams.prototype.sort&&(URLSearchParams.prototype.sort=function(){var t=this,e=[];this.forEach(function(n,r){e.push([r,n]),t._entries||t.delete(r)}),e.sort(function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0}),t._entries&&(t._entries={});for(var n=0;n<e.length;n++)this.append(e[n][0],e[n][1])})}(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(t){if(function(){try{var t=new URL("b","http://a");return t.pathname="c%20d","http://a/c%20d"===t.href&&t.searchParams}catch(t){return!1}}()||function(){var e=t.URL,n=function(e,n){"string"!=typeof e&&(e=String(e));var r,i=document;if(n&&(void 0===t.location||n!==t.location.href)){(r=(i=document.implementation.createHTMLDocument("")).createElement("base")).href=n,i.head.appendChild(r);try{if(0!==r.href.indexOf(n))throw new Error(r.href)}catch(t){throw new Error("URL unable to set base "+n+" due to "+t)}}var o=i.createElement("a");if(o.href=e,r&&(i.body.appendChild(o),o.href=o.href),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o});var a=new URLSearchParams(this.search),s=!0,l=!0,c=this;["append","delete","set"].forEach(function(t){var e=a[t];a[t]=function(){e.apply(a,arguments),s&&(l=!1,c.search=a.toString(),l=!0)}}),Object.defineProperty(this,"searchParams",{value:a,enumerable:!0});var u=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==u&&(u=this.search,l&&(s=!1,this.searchParams._fromString(this.search),s=!0))}})},r=n.prototype;["hash","host","hostname","port","protocol"].forEach(function(t){!function(t){Object.defineProperty(r,t,{get:function(){return this._anchorElement[t]},set:function(e){this._anchorElement[t]=e},enumerable:!0})}(t)}),Object.defineProperty(r,"search",{get:function(){return this._anchorElement.search},set:function(t){this._anchorElement.search=t,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(r,{toString:{get:function(){var t=this;return function(){return t.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(t){this._anchorElement.href=t,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(t){this._anchorElement.pathname=t},enumerable:!0},origin:{get:function(){var t={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],e=this._anchorElement.port!=t&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(e?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(t){},enumerable:!0},username:{get:function(){return""},set:function(t){},enumerable:!0}}),n.createObjectURL=function(t){return e.createObjectURL.apply(e,arguments)},n.revokeObjectURL=function(t){return e.revokeObjectURL.apply(e,arguments)},t.URL=n}(),void 0!==t.location&&!("origin"in t.location)){var e=function(){return t.location.protocol+"//"+t.location.hostname+(t.location.port?":"+t.location.port:"")};try{Object.defineProperty(t.location,"origin",{get:e,enumerable:!0})}catch(n){setInterval(function(){t.location.origin=e()},100)}}}(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(this,n(78))},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1256);e.takeWhile=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.predicate))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.index=0,r}return r(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(i.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(689),o=n(1257),a=n(1258),s=n(1263),l=n(690),c=n(691),u=function(t){function e(e,n,r){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=o.empty;break;case 1:if(!e){i.destination=o.empty;break}if("object"==typeof e){if(f(e)){var a=e[s.rxSubscriber]();i.syncErrorThrowable=a.syncErrorThrowable,i.destination=a,a.add(i)}else i.syncErrorThrowable=!0,i.destination=new d(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new d(i,e,n,r)}return i}return r(e,t),e.prototype[s.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(a.Subscription);e.Subscriber=u;var d=function(t){function e(e,n,r,a){var s,l=t.call(this)||this;l._parentSubscriber=e;var c=l;return i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==o.empty&&(c=Object.create(n),i.isFunction(c.unsubscribe)&&l.add(c.unsubscribe.bind(c)),c.unsubscribe=l.unsubscribe.bind(l))),l._context=c,l._next=s,l._error=r,l._complete=a,l}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;l.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=l.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):c.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;c.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};l.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),l.config.useDeprecatedSynchronousErrorHandling)throw t;c.hostReportError(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!l.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return l.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(c.hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(u);function f(t){return t instanceof u||"syncErrorThrowable"in t&&t[s.rxSubscriber]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(690),i=n(691);e.empty={closed:!0,next:function(t){},error:function(t){if(r.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1259),i=n(1260),o=n(689),a=n(1261),s=n(692),l=n(1262),c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,c=this._parents,d=this._unsubscribe,f=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,h=c?c.length:0;n;)n.remove(this),n=++p<h&&c[p]||null;if(o.isFunction(d))a.tryCatch(d).call(this)===s.errorObject&&(e=!0,t=t||(s.errorObject.e instanceof l.UnsubscriptionError?u(s.errorObject.e.errors):[s.errorObject.e]));if(r.isArray(f))for(p=-1,h=f.length;++p<h;){var g=f[p];if(i.isObject(g))if(a.tryCatch(g.unsubscribe).call(g)===s.errorObject){e=!0,t=t||[];var m=s.errorObject.e;m instanceof l.UnsubscriptionError?t=t.concat(u(m.errors)):t.push(m)}}if(e)throw new l.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function u(t){return t.reduce(function(t,e){return t.concat(e instanceof l.UnsubscriptionError?e.errors:e)},[])}e.Subscription=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(692);function o(){try{return r.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return r=t,o}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return r(e,t),e}(Error);e.UnsubscriptionError=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},,,,,function(t,e,n){var r=n(248),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(1271)("toUpperCase");t.exports=r},function(t,e,n){var r=n(369),i=n(370),o=n(500),a=n(102);t.exports=function(t){return function(e){e=a(e);var n=i(e)?o(e):void 0,s=n?n[0]:e.charAt(0),l=n?r(n,1).join(""):e.slice(1);return s[t]()+l}}},function(t,e){t.exports=function(t){return t.split("")}},function(t,e){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[o+r+"?",r,a,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+u+c,"g");t.exports=function(t){return t.match(d)||[]}},function(t,e,n){var r=n(1275),i=n(102),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(o,r).replace(a,"")}},function(t,e,n){var r=n(697)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});t.exports=r},function(t,e,n){var r=n(1277),i=n(1278),o=n(102),a=n(1279);t.exports=function(t,e,n){return t=o(t),void 0===(e=n?void 0:e)?i(t)?a(t):r(t):t.match(e)||[]}},function(t,e){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(n)||[]}},function(t,e){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return n.test(t)}},function(t,e){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+n+"]",i="\\d+",o="[\\u2700-\\u27bf]",a="[a-z\\xdf-\\xf6\\xf8-\\xff]",s="[^\\ud800-\\udfff"+n+i+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="[A-Z\\xc0-\\xd6\\xd8-\\xde]",d="(?:"+a+"|"+s+")",f="(?:"+u+"|"+s+")",p="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",h="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,c].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),g="(?:"+[o,l,c].join("|")+")"+h,m=RegExp([u+"?"+a+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,u,"$"].join("|")+")",f+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,u+d,"$"].join("|")+")",u+"?"+d+"+(?:['’](?:d|ll|m|re|s|t|ve))?",u+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i,g].join("|"),"g");t.exports=function(t){return t.match(m)||[]}},,function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var r=n(700),i=500;t.exports=function(t){var e=r(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(1284),i=n(372),o=n(503);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(1285),i=n(1290),o=n(1291),a=n(1292),s=n(1293);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(371);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(34),i=n(1287),o=n(71),a=n(701),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,f=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},function(t,e,n){var r=n(1288),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(79)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(371),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(371),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(371),i="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(373),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(373);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(373);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(373);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(374);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(374);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(374);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(374);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(128),i=n(80),o="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==o}},,,,,,function(t,e,n){
/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */
!function(e,r,i){void 0!==t&&t.exports?t.exports=i():n(506)("bowser",i)}(0,0,function(){var t=!0;function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function r(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var i,a=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(e)&&/android/i.test(e),l=/nexus\s*[0-6]\s*/i.test(e),c=!l&&/nexus\s*[0-9]+/i.test(e),u=/CrOS/.test(e),d=/silk/i.test(e),f=/sailfish/i.test(e),p=/tizen/i.test(e),h=/(web|hpw)(o|0)s/i.test(e),g=/windows phone/i.test(e),m=(/SamsungBrowser/i.test(e),!g&&/windows/i.test(e)),v=!a&&!d&&/macintosh/i.test(e),y=!s&&!f&&!p&&!h&&/linux/i.test(e),b=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),w=n(/version\/(\d+(\.\d+)?)/i),_=/tablet/i.test(e)&&!/tablet pc/i.test(e),x=!_&&/[^-]mobi/i.test(e),S=/xbox/i.test(e);/opera/i.test(e)?i={name:"Opera",opera:t,version:w||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?i={name:"Opera",opera:t,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||w}:/SamsungBrowser/i.test(e)?i={name:"Samsung Internet for Android",samsungBrowser:t,version:w||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(e)?i={name:"NAVER Whale browser",whale:t,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(e)?i={name:"MZ Browser",mzbrowser:t,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(e)?i={name:"Opera Coast",coast:t,version:w||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(e)?i={name:"Focus",focus:t,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:t,version:w||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?i={name:"UC Browser",ucbrowser:t,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?i={name:"Maxthon",maxthon:t,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?i={name:"Epiphany",epiphany:t,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?i={name:"Puffin",puffin:t,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?i={name:"Sleipnir",sleipnir:t,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?i={name:"K-Meleon",kMeleon:t,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:t},b?(i.msedge=t,i.version=b):(i.msie=t,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:u?i={name:"Chrome",osname:"Chrome OS",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?i={name:"Microsoft Edge",msedge:t,version:b}:/vivaldi/i.test(e)?i={name:"Vivaldi",vivaldi:t,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||w}:f?i={name:"Sailfish",osname:"Sailfish OS",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(i={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=t,i.osname="Firefox OS")):d?i={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?i={name:"SlimerJS",slimer:t,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:t,version:w||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(i={name:"WebOS",osname:"WebOS",webos:t,version:w||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=t)):/bada/i.test(e)?i={name:"Bada",osname:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",osname:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(e)?i={name:"QupZilla",qupzilla:t,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(e)?i={name:"Chromium",chromium:t,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?i={name:"Android",version:w}:/safari|applewebkit/i.test(e)?(i={name:"Safari",safari:t},w&&(i.version=w)):a?(i={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},w&&(i.version=w)):i=/googlebot/i.test(e)?{name:"Googlebot",googlebot:t,version:n(/googlebot\/(\d+(\.\d+))/i)||w}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(i.name=i.name||"Blink",i.blink=t):(i.name=i.name||"Webkit",i.webkit=t),!i.version&&w&&(i.version=w)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=t,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!s&&!i.silk?!i.windowsphone&&a?(i[a]=t,i.ios=t,i.osname="iOS"):v?(i.mac=t,i.osname="macOS"):S?(i.xbox=t,i.osname="Xbox"):m?(i.windows=t,i.osname="Windows"):y&&(i.linux=t,i.osname="Linux"):(i.android=t,i.osname="Android");var C="";i.windows?C=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?C=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?C=(C=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):a?C=(C=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?C=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?C=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?C=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?C=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(C=n(/tizen[\/\s](\d+(\.\d+)*)/i)),C&&(i.osversion=C);var E=!i.windows&&C.split(".")[0];return _||c||"ipad"==a||s&&(3==E||E>=4&&!x)||i.silk?i.tablet=t:(x||"iphone"==a||"ipod"==a||s||l||i.blackberry||i.webos||i.bada)&&(i.mobile=t),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===o([i.version,"1.0"])||i.mzbrowser&&1===o([i.version,"6.0"])||i.focus&&1===o([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=t:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=t:i.x=t,i}var n=e("undefined"!=typeof navigator&&navigator.userAgent||"");function r(t){return t.split(".").length}function i(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n++)r.push(e(t[n]));return r}function o(t){for(var e=Math.max(r(t[0]),r(t[1])),n=i(t,function(t){var n=e-r(t);return i((t+=new Array(n+1).join(".0")).split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--e>=0;){if(n[0][e]>n[1][e])return 1;if(n[0][e]!==n[1][e])return-1;if(0===e)return 0}}function a(t,r,i){var a=n;"string"==typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(a=e(i));var s=""+a.version;for(var l in t)if(t.hasOwnProperty(l)&&a[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return o([s,t[l]])<0}return r}return n.test=function(t){for(var e=0;e<t.length;++e){var r=t[e];if("string"==typeof r&&r in n)return!0}return!1},n.isUnsupportedBrowser=a,n.compareVersions=o,n.check=function(t,e,n){return!a(t,e,n)},n._detect=e,n.detect=e,n})},function(t,e,n){
/*!
 * clipboard.js v2.0.1
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
!function(e,n){t.exports=n()}(0,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){var r,i,o;i=[t,n(7)],void 0===(o="function"==typeof(r=function(t,e){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return i(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=o})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){var r=n(6),i=n(5);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(r.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}(t,e,n);if(r.string(t))return function(t,e,n){return i(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},t.exports=n},function(t,e,n){var r,i,o;i=[t,n(0),n(2),n(1)],void 0===(o="function"==typeof(r=function(t,e,n,r){"use strict";var i=s(e),o=s(n),a=s(r);function s(t){return t&&t.__esModule?t:{default:t}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.resolveOptions(n),r.listenClick(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),c(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===l(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,a.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return d("action",t)}},{key:"defaultTarget",value:function(t){var e=d("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return d("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(o.default);function d(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=u})?r.apply(e,i):r)||(t.exports=o)},function(t,e){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==n;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){var r=n(4);function i(t,e,n,i,o){var a=function(t,e,n,i){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&i.call(t,n)}}.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}t.exports=function(t,e,n,r,o){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,r,o)}))}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(t),r.removeAllRanges(),r.addRange(i),e=r.toString()}return e}}])})},function(t,e,n){var r=n(1313),i=n(1330),o=n(715);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(375),i=n(507),o=1,a=2;t.exports=function(t,e,n,s){var l=n.length,c=l,u=!s;if(null==t)return!c;for(t=Object(t);l--;){var d=n[l];if(u&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++l<c;){var f=(d=n[l])[0],p=t[f],h=d[1];if(u&&d[2]){if(void 0===p&&!(f in t))return!1}else{var g=new r;if(s)var m=s(p,h,f,t,e,g);if(!(void 0===m?i(h,p,o|a,s,g):m))return!1}}return!0}},function(t,e,n){var r=n(372);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(372),i=n(503),o=n(502),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(375),i=n(703),o=n(1322),a=n(1323),s=n(181),l=n(17),c=n(249),u=n(308),d=1,f="[object Arguments]",p="[object Array]",h="[object Object]",g=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,v,y){var b=l(t),w=l(e),_=b?p:s(t),x=w?p:s(e),S=(_=_==f?h:_)==h,C=(x=x==f?h:x)==h,E=_==x;if(E&&c(t)){if(!c(e))return!1;b=!0,S=!1}if(E&&!S)return y||(y=new r),b||u(t)?i(t,e,n,m,v,y):o(t,e,_,n,m,v,y);if(!(n&d)){var T=S&&g.call(t,"__wrapped__"),M=C&&g.call(e,"__wrapped__");if(T||M){var k=T?t.value():t,A=M?e.value():e;return y||(y=new r),v(k,A,n,m,y)}}return!!E&&(y||(y=new r),a(t,e,n,m,v,y))}},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(248),i=n(705),o=n(213),a=n(703),s=n(706),l=n(508),c=1,u=2,d="[object Boolean]",f="[object Date]",p="[object Error]",h="[object Map]",g="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",x=r?r.prototype:void 0,S=x?x.valueOf:void 0;t.exports=function(t,e,n,r,x,C,E){switch(n){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!C(new i(t),new i(e)));case d:case f:case g:return o(+t,+e);case p:return t.name==e.name&&t.message==e.message;case m:case y:return t==e+"";case h:var T=s;case v:var M=r&c;if(T||(T=l),t.size!=e.size&&!M)return!1;var k=E.get(t);if(k)return k==e;r|=u,E.set(t,e);var A=a(T(t),T(e),r,x,C,E);return E.delete(t),A;case b:if(S)return S.call(t)==S.call(e)}return!1}},function(t,e,n){var r=n(707),i=1,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,s,l){var c=n&i,u=r(t),d=u.length;if(d!=r(e).length&&!c)return!1;for(var f=d;f--;){var p=u[f];if(!(c?p in e:o.call(e,p)))return!1}var h=l.get(t);if(h&&l.get(e))return h==e;var g=!0;l.set(t,e),l.set(e,t);for(var m=c;++f<d;){var v=t[p=u[f]],y=e[p];if(a)var b=c?a(y,v,p,e,t,l):a(v,y,p,t,e,l);if(!(void 0===b?v===y||s(v,y,n,a,l):b)){g=!1;break}m||(m="constructor"==p)}if(g&&!m){var w=t.constructor,_=e.constructor;w!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _)&&(g=!1)}return l.delete(t),l.delete(e),g}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(128),i=n(504),o=n(80),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(711)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(212)(n(79),"DataView");t.exports=r},function(t,e,n){var r=n(212)(n(79),"Promise");t.exports=r},function(t,e,n){var r=n(714),i=n(44);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(507),i=n(2),o=n(510),a=n(501),s=n(714),l=n(715),c=n(157),u=1,d=2;t.exports=function(t,e){return a(t)&&s(e)?l(c(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,u|d)}}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(716),i=n(1334),o=n(501),a=n(157);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e,n){var r=n(306);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},,,,,,,,,,function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}},,,,function(t,e,n){t.exports=n(1352)},function(t,e,n){var r=n(28).isFactory,i=n(1353),o=n(720),a=n(1355),s=n(1356);e.create=function(t){if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var e=[],n=[],l=o.mixin({});l.type={},l.expression={transform:{},mathWithTransform:{}},l.typed=i.create(l.type);var c={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function u(t){if(!r(t))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var i,o=e.indexOf(t);return-1===o?(i=!0===t.math?t.factory(l.type,c,u,l.typed,l):t.factory(l.type,c,u,l.typed),e.push(t),n.push(i)):i=n[o],i}return l.import=u(a),l.config=u(s),l.expression.mathWithTransform.config=l.config,t&&l.config(t),l}},function(t,e,n){var r=n(1354),i=n(13).digits,o=n(515),a=n(382),s=function(){return s=r.create,r};e.create=function(t){t.isNumber=function(t){return"number"==typeof t},t.isComplex=function(e){return t.Complex&&e instanceof t.Complex||!1},t.isBigNumber=o,t.isFraction=function(e){return t.Fraction&&e instanceof t.Fraction||!1},t.isUnit=function(t){return t&&t.constructor.prototype.isUnit||!1},t.isString=function(t){return"string"==typeof t},t.isArray=Array.isArray,t.isMatrix=a,t.isDenseMatrix=function(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix||!1},t.isSparseMatrix=function(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix||!1},t.isRange=function(t){return t&&t.constructor.prototype.isRange||!1},t.isIndex=function(t){return t&&t.constructor.prototype.isIndex||!1},t.isBoolean=function(t){return"boolean"==typeof t},t.isResultSet=function(t){return t&&t.constructor.prototype.isResultSet||!1},t.isHelp=function(t){return t&&t.constructor.prototype.isHelp||!1},t.isFunction=function(t){return"function"==typeof t},t.isDate=function(t){return t instanceof Date},t.isRegExp=function(t){return t instanceof RegExp},t.isObject=function(t){return"object"==typeof t},t.isNull=function(t){return null===t},t.isUndefined=function(t){return void 0===t},t.isAccessorNode=function(t){return t&&t.isAccessorNode&&t.constructor.prototype.isNode||!1},t.isArrayNode=function(t){return t&&t.isArrayNode&&t.constructor.prototype.isNode||!1},t.isAssignmentNode=function(t){return t&&t.isAssignmentNode&&t.constructor.prototype.isNode||!1},t.isBlockNode=function(t){return t&&t.isBlockNode&&t.constructor.prototype.isNode||!1},t.isConditionalNode=function(t){return t&&t.isConditionalNode&&t.constructor.prototype.isNode||!1},t.isConstantNode=function(t){return t&&t.isConstantNode&&t.constructor.prototype.isNode||!1},t.isFunctionAssignmentNode=function(t){return t&&t.isFunctionAssignmentNode&&t.constructor.prototype.isNode||!1},t.isFunctionNode=function(t){return t&&t.isFunctionNode&&t.constructor.prototype.isNode||!1},t.isIndexNode=function(t){return t&&t.isIndexNode&&t.constructor.prototype.isNode||!1},t.isNode=function(t){return t&&t.isNode&&t.constructor.prototype.isNode||!1},t.isObjectNode=function(t){return t&&t.isObjectNode&&t.constructor.prototype.isNode||!1},t.isOperatorNode=function(t){return t&&t.isOperatorNode&&t.constructor.prototype.isNode||!1},t.isParenthesisNode=function(t){return t&&t.isParenthesisNode&&t.constructor.prototype.isNode||!1},t.isRangeNode=function(t){return t&&t.isRangeNode&&t.constructor.prototype.isNode||!1},t.isSymbolNode=function(t){return t&&t.isSymbolNode&&t.constructor.prototype.isNode||!1},t.isChain=function(t){return t&&t.constructor.prototype.isChain||!1};var e=s();return e.types=[{name:"number",test:t.isNumber},{name:"Complex",test:t.isComplex},{name:"BigNumber",test:t.isBigNumber},{name:"Fraction",test:t.isFraction},{name:"Unit",test:t.isUnit},{name:"string",test:t.isString},{name:"Array",test:t.isArray},{name:"Matrix",test:t.isMatrix},{name:"DenseMatrix",test:t.isDenseMatrix},{name:"SparseMatrix",test:t.isSparseMatrix},{name:"Range",test:t.isRange},{name:"Index",test:t.isIndex},{name:"boolean",test:t.isBoolean},{name:"ResultSet",test:t.isResultSet},{name:"Help",test:t.isHelp},{name:"function",test:t.isFunction},{name:"Date",test:t.isDate},{name:"RegExp",test:t.isRegExp},{name:"Object",test:t.isObject},{name:"null",test:t.isNull},{name:"undefined",test:t.isUndefined},{name:"OperatorNode",test:t.isOperatorNode},{name:"ConstantNode",test:t.isConstantNode},{name:"SymbolNode",test:t.isSymbolNode},{name:"ParenthesisNode",test:t.isParenthesisNode},{name:"FunctionNode",test:t.isFunctionNode},{name:"FunctionAssignmentNode",test:t.isFunctionAssignmentNode},{name:"ArrayNode",test:t.isArrayNode},{name:"AssignmentNode",test:t.isAssignmentNode},{name:"BlockNode",test:t.isBlockNode},{name:"ConditionalNode",test:t.isConditionalNode},{name:"IndexNode",test:t.isIndexNode},{name:"RangeNode",test:t.isRangeNode},{name:"Node",test:t.isNode}],e.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(i(e)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t.BigNumber(e)}},{from:"number",to:"Complex",convert:function(e){return new t.Complex(e,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(e){return new t.Complex(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return new t.Complex(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){if(new t.Fraction(e).valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return new t.Fraction(e)}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(e){try{return new t.BigNumber(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){try{return new t.Fraction(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){try{return new t.Complex(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(e){return new t.BigNumber(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return new t.Fraction(+e)}},{from:"boolean",to:"string",convert:function(t){return+t}},{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new t.BigNumber(0)}},{from:"null",to:"Fraction",convert:function(){return new t.Fraction(0)}},{from:"Array",to:"Matrix",convert:function(e){return new t.DenseMatrix(e)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],e}},function(t,e,n){"use strict";var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){return function t(){function e(t){for(var e,n=0;n<m.types.length;n++){var r=m.types[n];if(r.name===t){e=r.test;break}}if(!e){var i;for(n=0;n<m.types.length;n++)if((r=m.types[n]).name.toLowerCase()==t.toLowerCase()){i=r.name;break}throw new Error('Unknown type "'+t+'"'+(i?'. Did you mean "'+i+'"?':""))}return e}function n(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(r.signatures&&""!=r.name)if(""==e)e=r.name;else if(e!=r.name){var i=new Error("Function names do not match (expected: "+e+", actual: "+r.name+")");throw i.data={actual:r.name,expected:e},i}}return e}function r(t,e,n,r,i){var o,a=c(r),s=i?i.split(","):null,l=t||"unnamed",d=s&&u(s,"any"),f={fn:t,index:n,actual:a,expected:s};o=s?e>n&&!d?"Unexpected type of argument in function "+l+" (expected: "+s.join(" or ")+", actual: "+a+", index: "+n+")":"Too few arguments in function "+l+" (expected: "+s.join(" or ")+", index: "+n+")":"Too many arguments in function "+l+" (expected: "+n+", actual: "+e+")";var p=new TypeError(o);return p.data=f,p}function i(t){this.name=t||"refs",this.categories={}}function o(t,e){if("string"==typeof t){var n=t.trim(),r="..."===n.substr(0,3);if(r&&(n=n.substr(3)),""===n)this.types=["any"];else{this.types=n.split("|");for(var i=0;i<this.types.length;i++)this.types[i]=this.types[i].trim()}}else{if(!Array.isArray(t)){if(t instanceof o)return t.clone();throw new Error("String or Array expected")}this.types=t}this.conversions=[],this.varArgs=r||e||!1,this.anyType=-1!==this.types.indexOf("any")}function a(t,e){var n;if("string"==typeof t)n=""!==t?t.split(","):[];else{if(!Array.isArray(t))throw new Error("string or Array expected");n=t}this.params=new Array(n.length),this.anyType=!1,this.varArgs=!1;for(var r=0;r<n.length;r++){var i=new o(n[r]);if(this.params[r]=i,i.anyType&&(this.anyType=!0),r===n.length-1)this.varArgs=i.varArgs;else if(i.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."')}this.fn=e}function s(t,e,n,r){this.path=t||[],this.param=t[t.length-1]||null,this.signature=e||null,this.childs=n||[],this.fallThrough=r||!1}function l(t,e){var n=new i,l=function(t){var e,n,r={},i=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];if((e=new a(o,s)).ignore())continue;var l=e.expand();for(n=0;n<l.length;n++){var c=l[n],d=c.toString(),f=r[d];if(f){var p=a.compare(c,f);if(p<0)r[d]=c;else if(0===p)throw new Error('Signature "'+d+'" is defined twice')}else r[d]=c}}for(d in r)r.hasOwnProperty(d)&&i.push(r[d]);for(i.sort(function(t,e){return a.compare(t,e)}),n=0;n<i.length;n++)if((e=i[n]).varArgs)for(var h=e.params.length-1,g=e.params[h],m=0;m<g.types.length;){if(g.conversions[m])for(var v=g.types[m],y=0;y<i.length;y++){var b=i[y],w=b.params[h];if(b!==e&&w&&u(w.types,v)&&!w.conversions[h]){g.types.splice(m,1),g.conversions.splice(m,1),m--;break}}m++}return i}(e);if(0==l.length)throw new Error("No signatures provided");var c=function(t){for(var e=[],n=0;n<t.length;n++)t[n].anyType&&e.push(t[n]);return e}(l),d=function t(e,n,r){var i,a,l,c=n.length,d=[];for(i=0;i<e.length;i++)(a=e[i]).params.length!==c||l||(l=a),void 0!=a.params[c]&&d.push(a);d.sort(function(t,e){return o.compare(t.params[c],e.params[c])});var f=[];for(i=0;i<d.length;i++){var p=(a=d[i]).params[c],h=f.filter(function(t){return t.param.overlapping(p)})[0];if(h){if(h.param.varArgs)throw new Error('Conflicting types "'+h.param+'" and "'+p+'"');h.signatures.push(a)}else f.push({param:p,signatures:[a]})}var g=[];for(i=0;i<r.length;i++)r[i].paramsStartWith(n)&&g.push(r[i]);var m=!1;for(i=0;i<g.length;i++)if(!u(e,g[i])){m=!0;break}var v=new Array(f.length);for(i=0;i<f.length;i++){var y=f[i];v[i]=t(y.signatures,n.concat(y.param),g)}return new s(n,l,v,m)}(l,[],c),f=[],p=(t||"").replace(/[^a-zA-Z0-9_$]/g,"_"),h=function(t){for(var e=[],n=0;n<t;n++)e[n]="arg"+n;return e}(function(t){for(var e=0,n=0;n<t.length;n++){var r=t[n].params.length;r>e&&(e=r)}return e}(l));f.push("function "+p+"("+h.join(", ")+") {"),f.push('  "use strict";'),f.push("  var name = "+JSON.stringify(t||"")+";"),f.push(d.toCode(n,"  ",!1)),f.push("}");var g=[n.toCode(),"return "+f.join("\n")].join("\n"),m=new Function(n.name,"createError",g),v=m(n,r);return v.signatures=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];if(r.fn&&!r.hasConversions()){var i=r.params.join(",");e[i]=r.fn}}return e}(l),v}function c(t){for(var e,n=0;n<m.types.length;n++){var r=m.types[n];if("Object"===r.name)e=r;else if(r.test(t))return r.name}return e&&e.test(t)?e.name:"unknown"}function u(t,e){return-1!==t.indexOf(e)}function d(t){return t[t.length-1]}i.prototype.add=function(t,e){var n=e||"fn";this.categories[n]||(this.categories[n]=[]);var r=this.categories[n].indexOf(t);return-1==r&&(r=this.categories[n].length,this.categories[n].push(t)),n+r},i.prototype.toCode=function(){var t=[],e=this.name+".categories",n=this.categories;for(var r in n)if(n.hasOwnProperty(r))for(var i=n[r],o=0;o<i.length;o++)t.push("var "+r+o+" = "+e+"['"+r+"']["+o+"];");return t.join("\n")},o.compare=function(t,e){if(t.anyType)return 1;if(e.anyType)return-1;if(u(t.types,"Object"))return 1;if(u(e.types,"Object"))return-1;if(t.hasConversions()){if(e.hasConversions()){var n,r,i;for(n=0;n<t.conversions.length;n++)if(void 0!==t.conversions[n]){r=t.conversions[n];break}for(n=0;n<e.conversions.length;n++)if(void 0!==e.conversions[n]){i=e.conversions[n];break}return m.conversions.indexOf(r)-m.conversions.indexOf(i)}return 1}if(e.hasConversions())return-1;var o,a;for(n=0;n<m.types.length;n++)if(m.types[n].name===t.types[0]){o=n;break}for(n=0;n<m.types.length;n++)if(m.types[n].name===e.types[0]){a=n;break}return o-a},o.prototype.overlapping=function(t){for(var e=0;e<this.types.length;e++)if(u(t.types,this.types[e]))return!0;return!1},o.prototype.matches=function(t){return this.anyType||t.anyType||this.overlapping(t)},o.prototype.clone=function(){var t=new o(this.types.slice(),this.varArgs);return t.conversions=this.conversions.slice(),t},o.prototype.hasConversions=function(){return this.conversions.length>0},o.prototype.contains=function(t){for(var e=0;e<this.types.length;e++)if(t[this.types[e]])return!0;return!1},o.prototype.toString=function(t){for(var e=[],n={},r=0;r<this.types.length;r++){var i=this.conversions[r],o=t&&i?i.to:this.types[r];o in n||(n[o]=!0,e.push(o))}return(this.varArgs?"...":"")+e.join("|")},a.prototype.clone=function(){return new a(this.params.slice(),this.fn)},a.prototype.expand=function(){var t=[];return function e(n,r){if(r.length<n.params.length){var i,s,l,c=n.params[r.length];if(c.varArgs){for(s=c.clone(),i=0;i<m.conversions.length;i++)if(l=m.conversions[i],!u(c.types,l.from)&&u(c.types,l.to)){var d=s.types.length;s.types[d]=l.from,s.conversions[d]=l}e(n,r.concat(s))}else{for(i=0;i<c.types.length;i++)e(n,r.concat(new o(c.types[i])));for(i=0;i<m.conversions.length;i++)l=m.conversions[i],!u(c.types,l.from)&&u(c.types,l.to)&&((s=new o(l.from)).conversions[0]=l,e(n,r.concat(s)))}}else t.push(new a(r,n.fn))}(this,[]),t},a.compare=function(t,e){if(t.params.length>e.params.length)return 1;if(t.params.length<e.params.length)return-1;var n,r=t.params.length,i=0,a=0;for(n=0;n<r;n++)t.params[n].hasConversions()&&i++,e.params[n].hasConversions()&&a++;if(i>a)return 1;if(i<a)return-1;for(n=0;n<t.params.length;n++){var s=o.compare(t.params[n],e.params[n]);if(0!==s)return s}return 0},a.prototype.hasConversions=function(){for(var t=0;t<this.params.length;t++)if(this.params[t].hasConversions())return!0;return!1},a.prototype.ignore=function(){for(var t={},e=0;e<m.ignore.length;e++)t[m.ignore[e]]=!0;for(e=0;e<this.params.length;e++)if(this.params[e].contains(t))return!0;return!1},a.prototype.paramsStartWith=function(t){if(0===t.length)return!0;for(var e=d(this.params),n=d(t),r=0;r<t.length;r++){var i=this.params[r]||(e.varArgs?e:null),o=t[r]||(n.varArgs?n:null);if(!i||!o||!i.matches(o))return!1}return!0},a.prototype.toCode=function(t,e){for(var n=new Array(this.params.length),r=0;r<this.params.length;r++){var i=this.params[r],o=i.conversions[0];i.varArgs?n[r]="varArgs":n[r]=o?t.add(o.convert,"convert")+"(arg"+r+")":"arg"+r}var a=this.fn?t.add(this.fn,"signature"):void 0;return a?e+"return "+a+"("+n.join(", ")+"); // signature: "+this.params.join(", "):[].join("\n")},a.prototype.toString=function(){return this.params.join(", ")},s.prototype.toCode=function(t,n){var r=[];if(this.param){var i=this.path.length-1,o=this.param.conversions[0],a="// type: "+(o?o.from+" (convert to "+o.to+")":this.param);if(this.param.varArgs)if(this.param.anyType)r.push(n+"if (arguments.length > "+i+") {"),r.push(n+"  var varArgs = [];"),r.push(n+"  for (var i = "+i+"; i < arguments.length; i++) {"),r.push(n+"    varArgs.push(arguments[i]);"),r.push(n+"  }"),r.push(this.signature.toCode(t,n+"  ")),r.push(n+"}");else{for(var s=function(n,r){for(var i=[],o=0;o<n.length;o++)i[o]=t.add(e(n[o]),"test")+"("+r+")";return i.join(" || ")}.bind(this),l=this.param.types,c=[],u=0;u<l.length;u++)void 0===this.param.conversions[u]&&c.push(l[u]);r.push(n+"if ("+s(l,"arg"+i)+") { "+a),r.push(n+"  var varArgs = [arg"+i+"];"),r.push(n+"  for (var i = "+(i+1)+"; i < arguments.length; i++) {"),r.push(n+"    if ("+s(c,"arguments[i]")+") {"),r.push(n+"      varArgs.push(arguments[i]);");for(var u=0;u<l.length;u++){var d=this.param.conversions[u];if(d){var f=t.add(e(l[u]),"test"),p=t.add(d.convert,"convert");r.push(n+"    }"),r.push(n+"    else if ("+f+"(arguments[i])) {"),r.push(n+"      varArgs.push("+p+"(arguments[i]));")}}r.push(n+"    } else {"),r.push(n+"      throw createError(name, arguments.length, i, arguments[i], '"+c.join(",")+"');"),r.push(n+"    }"),r.push(n+"  }"),r.push(this.signature.toCode(t,n+"  ")),r.push(n+"}")}else if(this.param.anyType)r.push(n+"// type: any"),r.push(this._innerCode(t,n));else{var h=this.param.types[0],f="any"!==h?t.add(e(h),"test"):null;r.push(n+"if ("+f+"(arg"+i+")) { "+a),r.push(this._innerCode(t,n+"  ")),r.push(n+"}")}}else r.push(this._innerCode(t,n));return r.join("\n")},s.prototype._innerCode=function(t,e){var n,r=[];for(this.signature&&(r.push(e+"if (arguments.length === "+this.path.length+") {"),r.push(this.signature.toCode(t,e+"  ")),r.push(e+"}")),n=0;n<this.childs.length;n++)r.push(this.childs[n].toCode(t,e));if(!this.fallThrough||this.param&&this.param.anyType){var i=this._exceptions(t,e);i&&r.push(i)}return r.join("\n")},s.prototype._exceptions=function(t,e){var n=this.path.length;if(0===this.childs.length)return[e+"if (arguments.length > "+n+") {",e+"  throw createError(name, arguments.length, "+n+", arguments["+n+"]);",e+"}"].join("\n");for(var r={},i=[],o=0;o<this.childs.length;o++){var a=this.childs[o];if(a.param)for(var s=0;s<a.param.types.length;s++){var l=a.param.types[s];l in r||a.param.conversions[s]||(r[l]=!0,i.push(l))}}return e+"throw createError(name, arguments.length, "+n+", arguments["+n+"], '"+i.join(",")+"');"};var f=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"==typeof t}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],p={},h=[],g=[],m={config:p,types:f,conversions:h,ignore:g};return(m=l("typed",{Object:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(t[r]);var i=n(e);return l(i,t)},"string, Object":l,"...Function":function(t){for(var e,r=n(t),i={},o=0;o<t.length;o++){var a=t[o];if("object"!=typeof a.signatures)throw(e=new TypeError("Function is no typed-function (index: "+o+")")).data={index:o},e;for(var s in a.signatures)if(a.signatures.hasOwnProperty(s))if(i.hasOwnProperty(s)){if(a.signatures[s]!==i[s])throw(e=new Error('Signature "'+s+'" is defined twice')).data={signature:s},e}else i[s]=a.signatures[s]}return l(r,i)}})).config=p,m.types=f,m.conversions=h,m.ignore=g,m.create=t,m.find=function(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var n;if("string"==typeof e){n=e.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");n=e}var i=n.join(","),o=t.signatures[i];if(o)return o;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+n.join(", ")+"))")},m.convert=function(t,e){var n=c(t);if(e===n)return t;for(var r=0;r<m.conversions.length;r++){var i=m.conversions[r];if(i.from===n&&i.to===e)return i.convert(t)}throw new Error("Cannot convert from "+n+" to "+e)},m.addType=function(t){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");m.types.push(t)},m.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");m.conversions.push(t)},m}()})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";var r=n(28).lazy,i=n(28).isFactory,o=n(28).traverse,a=n(251);e.math=!0,e.name="import",e.factory=function(t,e,n,s,l){function c(t,e,n){if(n.wrap&&"function"==typeof e&&(e=function(t){var e=function(){for(var e=[],n=0,r=arguments.length;n<r;n++){var i=arguments[n];e[n]=i&&i.valueOf()}return t.apply(l,e)};return t.transform&&(e.transform=t.transform),e}(e)),p(l[t])&&p(e))return e=n.override?s(t,e.signatures):s(l[t],e),l[t]=e,u(t,e),void l.emit("import",t,function(){return e});if(void 0===l[t]||n.override)return l[t]=e,u(t,e),void l.emit("import",t,function(){return e});if(!n.silent)throw new Error('Cannot import "'+t+'": already exists')}function u(t,e){e&&"function"==typeof e.transform?(l.expression.transform[t]=e.transform,h(t)&&(l.expression.mathWithTransform[t]=e.transform)):(delete l.expression.transform[t],h(t)&&(l.expression.mathWithTransform[t]=e))}function d(t,e){if("string"==typeof t.name){var i=t.name,a=i in l.expression.transform,c=t.path?o(l,t.path):l,u=c.hasOwnProperty(i)?c[i]:void 0,d=function(){var r=n(t);if(r&&"function"==typeof r.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(p(u)&&p(r))return e.override||(r=s(u,r)),r;if(void 0===u||e.override)return r;if(!e.silent)throw new Error('Cannot import "'+i+'": already exists')};!1!==t.lazy?(r(c,i,d),a||("expression.transform"===t.path||g(t))&&r(l.expression.mathWithTransform,i,d)):(c[i]=d(),a||("expression.transform"===t.path||g(t))&&(l.expression.mathWithTransform[i]=d())),l.emit("import",i,d,t.path)}else n(t)}function f(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||e&&t.isUnit(e)||e&&t.isComplex(e)||e&&t.isBigNumber(e)||e&&t.isFraction(e)||e&&t.isMatrix(e)||e&&Array.isArray(e)}function p(t){return"function"==typeof t&&"object"==typeof t.signatures}function h(t){return!m.hasOwnProperty(t)}function g(t){return void 0===t.path&&!m.hasOwnProperty(t.name)}var m={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return function t(e,n){var r=arguments.length;if(1!==r&&2!==r)throw new a("import",r,1,2);if(n||(n={}),i(e))d(e,n);else if(Array.isArray(e))e.forEach(function(e){t(e,n)});else if("object"==typeof e){for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];f(s)?c(o,s,n):i(e)?d(e,n):t(s,n)}}else if(!n.silent)throw new TypeError("Factory, Object, or Array expected")}},e.lazy=!0},function(t,e,n){"use strict";var r=n(28);function i(t,e,n){if(void 0!==t[e]&&!function(t,e){return-1!==t.indexOf(e)}(n,t[e])){var r=function(t,e){return t.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())}(n,t[e]);-1!==r?(console.warn('Warning: Wrong casing for configuration option "'+e+'", should be "'+n[r]+'" instead of "'+t[e]+'".'),t[e]=n[r]):console.warn('Warning: Unknown value "'+t[e]+'" for configuration option "'+e+'". Available options: '+n.map(JSON.stringify).join(", ")+".")}}e.name="config",e.math=!0,e.factory=function(t,e,n,o,a){var s=["Matrix","Array"],l=["number","BigNumber","Fraction"];function c(t){if(t){var n=r.map(e,r.clone);i(t,"matrix",s),i(t,"number",l),r.deepExtend(e,t);var o=r.map(e,r.clone),c=r.map(t,r.clone);return a.emit("config",o,n,c),o}return r.map(e,r.clone)}return c.MATRIX=s,c.NUMBER=l,c}},function(t,e,n){t.exports=[n(1358),n(1390),n(1392),n(1604),n(1743),n(1745)]},function(t,e,n){t.exports=[n(1359),n(1363),n(1364),n(1368),n(1371),n(1374),n(518),n(1382),n(1383),n(1384)]},function(t,e,n){t.exports=[n(1360),n(1362)]},function(t,e,n){var r=n(1361);e.name="BigNumber",e.path="type",e.factory=function(t,e,n,i,o){var a=r.clone({precision:e.precision});return a.prototype.type="BigNumber",a.prototype.isBigNumber=!0,a.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},a.fromJSON=function(t){return new a(t.value)},o.on("config",function(t,e){t.precision!==e.precision&&a.config({precision:t.precision})}),a},e.math=!0},function(t,e,n){var r;/*! decimal.js v9.0.1 https://github.com/MikeMcl/decimal.js/LICENCE */!function(i){"use strict";var o,a,s,l=9e15,c=1e9,u="0123456789abcdef",d="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",f="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},h=!0,g="[DecimalError] ",m=g+"Invalid argument: ",v=g+"Precision limit exceeded",y=g+"crypto unavailable",b=Math.floor,w=Math.pow,_=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,x=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,C=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,T=7,M=d.length-1,k=f.length-1,A={name:"[object Decimal]"};function I(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",(n=T-r.length)&&(o+=z(n)),o+=r;a=t[e],(n=T-(r=a+"").length)&&(o+=z(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function O(t,e,n){if(t!==~~t||t<e||t>n)throw Error(m+t)}function P(t,e,n,r){var i,o,a,s;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=T,i=0):(i=Math.ceil((e+1)/T),e%=T),o=w(10,T-e),s=t[i]%o|0,null==r?e<3?(0==e?s=s/100|0:1==e&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(t[i+1]/o/100|0)==w(10,e-2)-1||(s==o/2||0==s)&&0==(t[i+1]/o/100|0):e<4?(0==e?s=s/1e3|0:1==e?s=s/100|0:2==e&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==o||!r&&n>3&&s+1==o/2)&&(t[i+1]/o/1e3|0)==w(10,e-3)-1,a}function L(t,e,n){for(var r,i,o=[0],a=0,s=t.length;a<s;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=u.indexOf(t.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}A.absoluteValue=A.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),N(t)},A.ceil=function(){return N(new this.constructor(this),this.e+1,2)},A.comparedTo=A.cmp=function(t){var e,n,r,i,o=this,a=o.d,s=(t=new o.constructor(t)).d,l=o.s,c=t.s;if(!a||!s)return l&&c?l!==c?l:a===s?0:!a^l<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?l:s[0]?-c:0;if(l!==c)return l;if(o.e!==t.e)return o.e>t.e^l<0?1:-1;for(e=0,n=(r=a.length)<(i=s.length)?r:i;e<n;++e)if(a[e]!==s[e])return a[e]>s[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},A.cosine=A.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+T,r.rounding=1,n=function(t,e){var n,r,i=e.d.length;i<32?(n=Math.ceil(i/3),r=Math.pow(4,-n).toString()):(n=16,r="2.3283064365386962890625e-10");t.precision+=n,e=X(t,1,e.times(r),new t(1));for(var o=n;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}(r,Q(r,n)),r.precision=t,r.rounding=e,N(2==s||3==s?n.neg():n,t,e,!0)):new r(1):new r(NaN)},A.cubeRoot=A.cbrt=function(){var t,e,n,r,i,o,a,s,l,c,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(h=!1,(o=u.s*Math.pow(u.s*u,1/3))&&Math.abs(o)!=1/0?r=new d(o.toString()):(n=I(u.d),(o=((t=u.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=Math.pow(n,1/3),t=b((t+1)/3)-(t%3==(t<0?-1:2)),(r=new d(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=u.s),a=(t=d.precision)+3;;)if(c=(l=(s=r).times(s).times(s)).plus(u),r=D(c.plus(u).times(s),c.plus(l),a+2,1),I(s.d).slice(0,a)===(n=I(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(N(r,t+1,1),e=!r.times(r).times(r).eq(u));break}if(!i&&(N(s,t+1,0),s.times(s).times(s).eq(u))){r=s;break}a+=4,i=1}return h=!0,N(r,t,d.rounding,e)},A.decimalPlaces=A.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=((t=e.length-1)-b(this.e/T))*T,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},A.dividedBy=A.div=function(t){return D(this,new this.constructor(t))},A.dividedToIntegerBy=A.divToInt=function(t){var e=this.constructor;return N(D(this,new e(t),0,1,1),e.precision,e.rounding)},A.equals=A.eq=function(t){return 0===this.cmp(t)},A.floor=function(){return N(new this.constructor(this),this.e+1,3)},A.greaterThan=A.gt=function(t){return this.cmp(t)>0},A.greaterThanOrEqualTo=A.gte=function(t){var e=this.cmp(t);return 1==e||0===e},A.hyperbolicCosine=A.cosh=function(){var t,e,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?(t=Math.ceil(i/3),e=Math.pow(4,-t).toString()):(t=16,e="2.3283064365386962890625e-10"),o=X(a,1,o.times(e),new a(1),!0);for(var l,c=t,u=new a(8);c--;)l=o.times(o),o=s.minus(l.times(u.minus(l.times(u))));return N(o,a.precision=n,a.rounding=r,!0)},A.hyperbolicSine=A.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=X(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,i=X(o,2,i=i.times(Math.pow(5,-t)),i,!0);for(var a,s=new o(5),l=new o(16),c=new o(20);t--;)a=i.times(i),i=i.times(s.plus(a.times(l.times(a).plus(c))))}return o.precision=e,o.rounding=n,N(i,e,n,!0)},A.hyperbolicTangent=A.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,D(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)},A.inverseCosine=A.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?e.isNeg()?j(n,i,o):new n(0):new n(NaN):e.isZero()?j(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=j(n,i+4,o).times(.5),n.precision=i,n.rounding=o,t.minus(e))},A.inverseHyperbolicCosine=A.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,h=!1,n=n.times(n).minus(1).sqrt().plus(n),h=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)},A.inverseHyperbolicSine=A.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,h=!1,n=n.times(n).plus(1).sqrt().plus(n),h=!0,r.precision=t,r.rounding=e,n.ln())},A.inverseHyperbolicTangent=A.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?N(new o(i),t,e,!0):(o.precision=n=r-i.e,i=D(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)},A.inverseSine=A.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==e?0===e?((t=j(o,n+4,r).times(.5)).s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},A.inverseTangent=A.atan=function(){var t,e,n,r,i,o,a,s,l,c=this,u=c.constructor,d=u.precision,f=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&d+4<=k)return(a=j(u,d+4,f).times(.25)).s=c.s,a}else{if(!c.s)return new u(NaN);if(d+4<=k)return(a=j(u,d+4,f).times(.5)).s=c.s,a}for(u.precision=s=d+10,u.rounding=1,t=n=Math.min(28,s/T+2|0);t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(h=!1,e=Math.ceil(s/T),r=1,l=c.times(c),a=new u(c),i=c;-1!==t;)if(i=i.times(l),o=a.minus(i.div(r+=2)),i=i.times(l),void 0!==(a=o.plus(i.div(r+=2))).d[e])for(t=e;a.d[t]===o.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),h=!0,N(a,u.precision=d,u.rounding=f,!0)},A.isFinite=function(){return!!this.d},A.isInteger=A.isInt=function(){return!!this.d&&b(this.e/T)>this.d.length-2},A.isNaN=function(){return!this.s},A.isNegative=A.isNeg=function(){return this.s<0},A.isPositive=A.isPos=function(){return this.s>0},A.isZero=function(){return!!this.d&&0===this.d[0]},A.lessThan=A.lt=function(t){return this.cmp(t)<0},A.lessThanOrEqualTo=A.lte=function(t){return this.cmp(t)<1},A.logarithm=A.log=function(t){var e,n,r,i,o,a,s,l,c=this.constructor,u=c.precision,d=c.rounding;if(null==t)t=new c(10),e=!0;else{if(n=(t=new c(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(h=!1,a=W(this,s=u+5),r=e?B(c,s+10):W(t,s),P((l=D(a,r,s,1)).d,i=u,d))do{if(a=W(this,s+=10),r=e?B(c,s+10):W(t,s),l=D(a,r,s,1),!o){+I(l.d).slice(i+1,i+15)+1==1e14&&(l=N(l,u+1,0));break}}while(P(l.d,i+=10,d));return h=!0,N(l,u,d)},A.minus=A.sub=function(t){var e,n,r,i,o,a,s,l,c,u,d,f,p=this,g=p.constructor;if(t=new g(t),!p.d||!t.d)return p.s&&t.s?p.d?t.s=-t.s:t=new g(t.d||p.s!==t.s?p:NaN):t=new g(NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(c=p.d,f=t.d,s=g.precision,l=g.rounding,!c[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!c[0])return new g(3===l?-0:0);t=new g(p)}return h?N(t,s,l):t}if(n=b(t.e/T),u=b(p.e/T),c=c.slice(),o=u-n){for((d=o<0)?(e=c,o=-o,a=f.length):(e=f,n=u,a=c.length),o>(r=Math.max(Math.ceil(s/T),a)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((d=(r=c.length)<(a=f.length))&&(a=r),r=0;r<a;r++)if(c[r]!=f[r]){d=c[r]<f[r];break}o=0}for(d&&(e=c,c=f,f=e,t.s=-t.s),a=c.length,r=f.length-a;r>0;--r)c[a++]=0;for(r=f.length;r>o;){if(c[--r]<f[r]){for(i=r;i&&0===c[--i];)c[i]=E-1;--c[i],c[r]+=E}c[r]-=f[r]}for(;0===c[--a];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=F(c,n),h?N(t,s,l):t):new g(3===l?-0:0)},A.modulo=A.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?N(new r(n),r.precision,r.rounding):(h=!1,9==r.modulo?(e=D(n,t.abs(),0,3,1)).s*=t.s:e=D(n,t,0,r.modulo,1),e=e.times(t),h=!0,n.minus(e))},A.naturalExponential=A.exp=function(){return H(this)},A.naturalLogarithm=A.ln=function(){return W(this)},A.negated=A.neg=function(){var t=new this.constructor(this);return t.s=-t.s,N(t)},A.plus=A.add=function(t){var e,n,r,i,o,a,s,l,c,u,d=this,f=d.constructor;if(t=new f(t),!d.d||!t.d)return d.s&&t.s?d.d||(t=new f(t.d||d.s===t.s?d:NaN)):t=new f(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(c=d.d,u=t.d,s=f.precision,l=f.rounding,!c[0]||!u[0])return u[0]||(t=new f(d)),h?N(t,s,l):t;if(o=b(d.e/T),r=b(t.e/T),c=c.slice(),i=o-r){for(i<0?(n=c,i=-i,a=u.length):(n=u,r=o,a=c.length),i>(a=(o=Math.ceil(s/T))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=c.length)-(i=u.length)<0&&(i=a,n=u,u=c,c=n),e=0;i;)e=(c[--i]=c[i]+u[i]+e)/E|0,c[i]%=E;for(e&&(c.unshift(e),++r),a=c.length;0==c[--a];)c.pop();return t.d=c,t.e=F(c,r),h?N(t,s,l):t},A.precision=A.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(m+t);return n.d?(e=q(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},A.round=function(){var t=this,e=t.constructor;return N(new e(t),t.e+1,e.rounding)},A.sine=A.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+T,r.rounding=1,n=function(t,e){var n,r=e.d.length;if(r<3)return X(t,2,e,e);n=(n=1.4*Math.sqrt(r))>16?16:0|n,e=e.times(Math.pow(5,-n)),e=X(t,2,e,e);for(var i,o=new t(5),a=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(a.times(i).minus(s))));return e}(r,Q(r,n)),r.precision=t,r.rounding=e,N(s>2?n.neg():n,t,e,!0)):new r(NaN)},A.squareRoot=A.sqrt=function(){var t,e,n,r,i,o,a=this,s=a.d,l=a.e,c=a.s,u=a.constructor;if(1!==c||!s||!s[0])return new u(!c||c<0&&(!s||s[0])?NaN:s?a:1/0);for(h=!1,0==(c=Math.sqrt(+a))||c==1/0?(((e=I(s)).length+l)%2==0&&(e+="0"),c=Math.sqrt(e),l=b((l+1)/2)-(l<0||l%2),r=new u(e=c==1/0?"1e"+l:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+l)):r=new u(c.toString()),n=(l=u.precision)+3;;)if(r=(o=r).plus(D(a,o,n+2,1)).times(.5),I(o.d).slice(0,n)===(e=I(r.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(N(r,l+1,1),t=!r.times(r).eq(a));break}if(!i&&(N(o,l+1,0),o.times(o).eq(a))){r=o;break}n+=4,i=1}return h=!0,N(r,l,u.rounding,t)},A.tangent=A.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(n=n.sin()).s=1,n=D(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,N(2==s||4==s?n.neg():n,t,e,!0)):new r(NaN)},A.times=A.mul=function(t){var e,n,r,i,o,a,s,l,c,u=this,d=u.constructor,f=u.d,p=(t=new d(t)).d;if(t.s*=u.s,!(f&&f[0]&&p&&p[0]))return new d(!t.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:f&&p?0*t.s:t.s/0);for(n=b(u.e/T)+b(t.e/T),(l=f.length)<(c=p.length)&&(o=f,f=p,p=o,a=l,l=c,c=a),o=[],r=a=l+c;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+p[r]*f[i-r-1]+e,o[i--]=s%E|0,e=s/E|0;o[i]=(o[i]+e)%E|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=F(o,n),h?N(t,d.precision,d.rounding):t},A.toBinary=function(t,e){return Z(this,2,t,e)},A.toDecimalPlaces=A.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(O(t,0,c),void 0===e?e=r.rounding:O(e,0,8),N(n,t+n.e+1,e))},A.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=R(r,!0):(O(t,0,c),void 0===e?e=i.rounding:O(e,0,8),n=R(r=N(new i(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n},A.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?n=R(i):(O(t,0,c),void 0===e?e=o.rounding:O(e,0,8),n=R(r=N(new o(i),t+i.e+1,e),!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},A.toFraction=function(t){var e,n,r,i,o,a,s,l,c,u,d,f,p=this,g=p.d,v=p.constructor;if(!g)return new v(p);if(c=n=new v(1),a=(o=(e=new v(r=l=new v(0))).e=q(g)-p.e-1)%T,e.d[0]=w(10,a<0?T+a:a),null==t)t=o>0?e:c;else{if(!(s=new v(t)).isInt()||s.lt(c))throw Error(m+s);t=s.gt(e)?o>0?e:c:s}for(h=!1,s=new v(I(g)),u=v.precision,v.precision=o=g.length*T*2;d=D(s,e,0,1,1),1!=(i=n.plus(d.times(r))).cmp(t);)n=r,r=i,i=c,c=l.plus(d.times(i)),l=i,i=e,e=s.minus(d.times(i)),s=i;return i=D(t.minus(n),r,0,1,1),l=l.plus(i.times(c)),n=n.plus(i.times(r)),l.s=c.s=p.s,f=D(c,r,o,1).minus(p).abs().cmp(D(l,n,o,1).minus(p).abs())<1?[c,r]:[l,n],v.precision=u,h=!0,f},A.toHexadecimal=A.toHex=function(t,e){return Z(this,16,t,e)},A.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),null==t){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0!==e&&O(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(h=!1,e<4&&(e=[4,5,7,8][e]),n=D(n,t,0,e,1).times(t),h=!0,N(n)):(t.s=n.s,n=t),n},A.toNumber=function(){return+this},A.toOctal=function(t,e){return Z(this,8,t,e)},A.toPower=A.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,c=+(t=new l(t));if(!(s.d&&t.d&&s.d[0]&&t.d[0]))return new l(w(+s,c));if((s=new l(s)).eq(1))return s;if(r=l.precision,o=l.rounding,t.eq(1))return N(s,r,o);if((e=b(t.e/T))>=t.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=U(l,s,n,r),t.s<0?new l(1).div(i):N(i,r,o);if((a=s.s)<0){if(e<t.d.length-1)return new l(NaN);if(0==(1&t.d[e])&&(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(e=0!=(n=w(+s,c))&&isFinite(n)?new l(n+"").e:b(c*(Math.log("0."+I(s.d))/Math.LN10+s.e+1)))>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(h=!1,l.rounding=s.s=1,n=Math.min(12,(e+"").length),(i=H(t.times(W(s,r+n)),r)).d&&P((i=N(i,r+5,1)).d,r,o)&&(e=r+10,+I((i=N(H(t.times(W(s,e+n)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=N(i,r+1,0))),i.s=a,h=!0,l.rounding=o,N(i,r,o))},A.toPrecision=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=R(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(O(t,1,c),void 0===e?e=i.rounding:O(e,0,8),n=R(r=N(new i(r),t,e),t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n},A.toSignificantDigits=A.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(O(t,1,c),void 0===e?e=n.rounding:O(e,0,8)),N(new n(this),t,e)},A.toString=function(){var t=this,e=t.constructor,n=R(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},A.truncated=A.trunc=function(){return N(new this.constructor(this),this.e+1,1)},A.valueOf=A.toJSON=function(){var t=this,e=t.constructor,n=R(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var D=function(){function t(t,e,n){var r,i=0,o=t.length;for(t=t.slice();o--;)r=t[o]*e+i,t[o]=r%n|0,i=r/n|0;return i&&t.unshift(i),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,s,l,c){var u,d,f,p,h,g,m,v,y,w,_,x,S,C,M,k,A,I,O,P,L=r.constructor,D=r.s==i.s?1:-1,R=r.d,F=i.d;if(!(R&&R[0]&&F&&F[0]))return new L(r.s&&i.s&&(R?!F||R[0]!=F[0]:F)?R&&0==R[0]||!F?0*D:D/0:NaN);for(c?(h=1,d=r.e-i.e):(c=E,h=T,d=b(r.e/h)-b(i.e/h)),O=F.length,A=R.length,w=(y=new L(D)).d=[],f=0;F[f]==(R[f]||0);f++);if(F[f]>(R[f]||0)&&d--,null==o?(C=o=L.precision,s=L.rounding):C=l?o+(r.e-i.e)+1:o,C<0)w.push(1),g=!0;else{if(C=C/h+2|0,f=0,1==O){for(p=0,F=F[0],C++;(f<A||p)&&C--;f++)M=p*c+(R[f]||0),w[f]=M/F|0,p=M%F|0;g=p||f<A}else{for((p=c/(F[0]+1)|0)>1&&(F=t(F,p,c),R=t(R,p,c),O=F.length,A=R.length),k=O,x=(_=R.slice(0,O)).length;x<O;)_[x++]=0;(P=F.slice()).unshift(0),I=F[0],F[1]>=c/2&&++I;do{p=0,(u=e(F,_,O,x))<0?(S=_[0],O!=x&&(S=S*c+(_[1]||0)),(p=S/I|0)>1?(p>=c&&(p=c-1),1==(u=e(m=t(F,p,c),_,v=m.length,x=_.length))&&(p--,n(m,O<v?P:F,v,c))):(0==p&&(u=p=1),m=F.slice()),(v=m.length)<x&&m.unshift(0),n(_,m,x,c),-1==u&&(u=e(F,_,O,x=_.length))<1&&(p++,n(_,O<x?P:F,x,c)),x=_.length):0===u&&(p++,_=[0]),w[f++]=p,u&&_[0]?_[x++]=R[k]||0:(_=[R[k]],x=1)}while((k++<A||void 0!==_[0])&&C--);g=void 0!==_[0]}w[0]||w.shift()}if(1==h)y.e=d,a=g;else{for(f=1,p=w[0];p>=10;p/=10)f++;y.e=f+d*h-1,N(y,l?o+y.e+1:o,s,g)}return y}}();function N(t,e,n,r){var i,o,a,s,l,c,u,d,f,p=t.constructor;t:if(null!=e){if(!(d=t.d))return t;for(i=1,s=d[0];s>=10;s/=10)i++;if((o=e-i)<0)o+=T,a=e,l=(u=d[f=0])/w(10,i-a-1)%10|0;else if((f=Math.ceil((o+1)/T))>=(s=d.length)){if(!r)break t;for(;s++<=f;)d.push(0);u=l=0,i=1,a=(o%=T)-T+1}else{for(u=s=d[f],i=1;s>=10;s/=10)i++;l=(a=(o%=T)-T+i)<0?0:u/w(10,i-a-1)%10|0}if(r=r||e<0||void 0!==d[f+1]||(a<0?u:u%w(10,i-a-1)),c=n<4?(l||r)&&(0==n||n==(t.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(o>0?a>0?u/w(10,i-a):0:d[f-1])%10&1||n==(t.s<0?8:7)),e<1||!d[0])return d.length=0,c?(e-=t.e+1,d[0]=w(10,(T-e%T)%T),t.e=-e||0):d[0]=t.e=0,t;if(0==o?(d.length=f,s=1,f--):(d.length=f+1,s=w(10,T-o),d[f]=a>0?(u/w(10,i-a)%w(10,a)|0)*s:0),c)for(;;){if(0==f){for(o=1,a=d[0];a>=10;a/=10)o++;for(a=d[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(t.e++,d[0]==E&&(d[0]=1));break}if(d[f]+=s,d[f]!=E)break;d[f--]=0,s=1}for(o=d.length;0===d[--o];)d.pop()}return h&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function R(t,e,n){if(!t.isFinite())return G(t);var r,i=t.e,o=I(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+z(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+z(-i-1)+o,n&&(r=n-a)>0&&(o+=z(r))):i>=a?(o+=z(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+z(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=z(r))),o}function F(t,e){var n=t[0];for(e*=T;n>=10;n/=10)e++;return e}function B(t,e,n){if(e>M)throw h=!0,n&&(t.precision=n),Error(v);return N(new t(d),e,1,!0)}function j(t,e,n){if(e>k)throw Error(v);return N(new t(f),e,n,!0)}function q(t){var e=t.length-1,n=e*T+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function z(t){for(var e="";t--;)e+="0";return e}function U(t,e,n,r){var i,o=new t(1),a=Math.ceil(r/T+4);for(h=!1;;){if(n%2&&J((o=o.times(e)).d,a)&&(i=!0),0===(n=b(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}J((e=e.times(e)).d,a)}return h=!0,o}function $(t){return 1&t.d[t.d.length-1]}function V(t,e,n){for(var r,i=new t(e[0]),o=0;++o<e.length;){if(!(r=new t(e[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function H(t,e){var n,r,i,o,a,s,l,c=0,u=0,d=0,f=t.constructor,p=f.rounding,g=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(h=!1,l=g):l=e,s=new f(.03125);t.e>-2;)t=t.times(s),d+=5;for(l+=r=Math.log(w(2,d))/Math.LN10*2+5|0,n=o=a=new f(1),f.precision=l;;){if(o=N(o.times(t),l,1),n=n.times(++u),I((s=a.plus(D(o,n,l,1))).d).slice(0,l)===I(a.d).slice(0,l)){for(i=d;i--;)a=N(a.times(a),l,1);if(null!=e)return f.precision=g,a;if(!(c<3&&P(a.d,l-r,p,c)))return N(a,f.precision=g,p,h=!0);f.precision=l+=10,n=o=s=new f(1),u=0,c++}a=s}}function W(t,e){var n,r,i,o,a,s,l,c,u,d,f,p=1,g=t,m=g.d,v=g.constructor,y=v.rounding,b=v.precision;if(g.s<0||!m||!m[0]||!g.e&&1==m[0]&&1==m.length)return new v(m&&!m[0]?-1/0:1!=g.s?NaN:m?0:g);if(null==e?(h=!1,u=b):u=e,v.precision=u+=10,r=(n=I(m)).charAt(0),!(Math.abs(o=g.e)<15e14))return c=B(v,u+2,b).times(o+""),g=W(new v(r+"."+n.slice(1)),u-10).plus(c),v.precision=b,null==e?N(g,b,y,h=!0):g;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=I((g=g.times(t)).d)).charAt(0),p++;for(o=g.e,r>1?(g=new v("0."+n),o++):g=new v(r+"."+n.slice(1)),d=g,l=a=g=D(g.minus(1),g.plus(1),u,1),f=N(g.times(g),u,1),i=3;;){if(a=N(a.times(f),u,1),I((c=l.plus(D(a,new v(i),u,1))).d).slice(0,u)===I(l.d).slice(0,u)){if(l=l.times(2),0!==o&&(l=l.plus(B(v,u+2,b).times(o+""))),l=D(l,new v(p),u,1),null!=e)return v.precision=b,l;if(!P(l.d,u-10,y,s))return N(l,v.precision=b,y,h=!0);v.precision=u+=10,c=a=g=D(d.minus(1),d.plus(1),u,1),f=N(g.times(g),u,1),i=s=1}l=c,i+=2}}function G(t){return String(t.s*t.s/0)}function Y(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%T,n<0&&(r+=T),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=T;r<i;)t.d.push(+e.slice(r,r+=T));e=e.slice(r),r=T-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),h&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function K(t,e){var n,r,i,a,s,l,c,u,d;if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(x.test(e))n=16,e=e.toLowerCase();else if(_.test(e))n=2;else{if(!S.test(e))throw Error(m+e);n=8}for((a=e.search(/p/i))>0?(c=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),s=(a=e.indexOf("."))>=0,r=t.constructor,s&&(a=(l=(e=e.replace(".","")).length)-a,i=U(r,new r(n),a,2*a)),a=d=(u=L(e,n,E)).length-1;0===u[a];--a)u.pop();return a<0?new r(0*t.s):(t.e=F(u,d),t.d=u,h=!1,s&&(t=D(t,i,4*l)),c&&(t=t.times(Math.abs(c)<54?Math.pow(2,c):o.pow(2,c))),h=!0,t)}function X(t,e,n,r,i){var o,a,s,l,c=t.precision,u=Math.ceil(c/T);for(h=!1,l=n.times(n),s=new t(r);;){if(a=D(s.times(l),new t(e++*e++),c,1),s=i?r.plus(a):r.minus(a),r=D(a.times(l),new t(e++*e++),c,1),void 0!==(a=s.plus(r)).d[u]){for(o=u;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=r,r=a,a=o,0}return h=!0,a.d.length=u+1,a}function Q(t,e){var n,r=e.s<0,i=j(t,t.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return s=r?4:1,e;if((n=e.divToInt(i)).isZero())s=r?3:2;else{if((e=e.minus(n.times(i))).lte(o))return s=$(n)?r?2:3:r?4:1,e;s=$(n)?r?1:4:r?3:2}return e.minus(i).abs()}function Z(t,e,n,r){var i,o,s,l,d,f,p,h,g,m=t.constructor,v=void 0!==n;if(v?(O(n,1,c),void 0===r?r=m.rounding:O(r,0,8)):(n=m.precision,r=m.rounding),t.isFinite()){for(s=(p=R(t)).indexOf("."),v?(i=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):i=e,s>=0&&(p=p.replace(".",""),(g=new m(1)).e=p.length-s,g.d=L(R(g),10,i),g.e=g.d.length),o=d=(h=L(p,10,i)).length;0==h[--d];)h.pop();if(h[0]){if(s<0?o--:((t=new m(t)).d=h,t.e=o,h=(t=D(t,g,n,r,0,i)).d,o=t.e,f=a),s=h[n],l=i/2,f=f||void 0!==h[n+1],f=r<4?(void 0!==s||f)&&(0===r||r===(t.s<0?3:2)):s>l||s===l&&(4===r||f||6===r&&1&h[n-1]||r===(t.s<0?8:7)),h.length=n,f)for(;++h[--n]>i-1;)h[n]=0,n||(++o,h.unshift(1));for(d=h.length;!h[d-1];--d);for(s=0,p="";s<d;s++)p+=u.charAt(h[s]);if(v){if(d>1)if(16==e||8==e){for(s=16==e?4:3,--d;d%s;d++)p+="0";for(d=(h=L(p,i,e)).length;!h[d-1];--d);for(s=1,p="1.";s<d;s++)p+=u.charAt(h[s])}else p=p.charAt(0)+"."+p.slice(1);p=p+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)p="0"+p;p="0."+p}else if(++o>d)for(o-=d;o--;)p+="0";else o<d&&(p=p.slice(0,o)+"."+p.slice(o))}else p=v?"0p+0":"0";p=(16==e?"0x":2==e?"0b":8==e?"0o":"")+p}else p=G(t);return t.s<0?"-"+p:p}function J(t,e){if(t.length>e)return t.length=e,!0}function tt(t){return new this(t).abs()}function et(t){return new this(t).acos()}function nt(t){return new this(t).acosh()}function rt(t,e){return new this(t).plus(e)}function it(t){return new this(t).asin()}function ot(t){return new this(t).asinh()}function at(t){return new this(t).atan()}function st(t){return new this(t).atanh()}function lt(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?j(this,r,i):new this(0)).s=t.s:!t.d||e.isZero()?(n=j(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(D(t,e,o,1)),e=j(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(D(t,e,o,1)):(n=j(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function ct(t){return new this(t).cbrt()}function ut(t){return N(t=new this(t),t.e+1,2)}function dt(t){if(!t||"object"!=typeof t)throw Error(g+"Object expected");var e,n,r,i=!0===t.defaults,o=["precision",1,c,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],i&&(this[n]=p[n]),void 0!==(r=t[n])){if(!(b(r)===r&&r>=o[e+1]&&r<=o[e+2]))throw Error(m+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=p[n]),void 0!==(r=t[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(m+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[n]=!0}else this[n]=!1}return this}function ft(t){return new this(t).cos()}function pt(t){return new this(t).cosh()}function ht(t,e){return new this(t).div(e)}function gt(t){return new this(t).exp()}function mt(t){return N(t=new this(t),t.e+1,3)}function vt(){var t,e,n=new this(0);for(h=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return h=!0,new this(1/0);n=e}return h=!0,n.sqrt()}function yt(t){return t instanceof o||t&&"[object Decimal]"===t.name||!1}function bt(t){return new this(t).ln()}function wt(t,e){return new this(t).log(e)}function _t(t){return new this(t).log(2)}function xt(t){return new this(t).log(10)}function St(){return V(this,arguments,"lt")}function Ct(){return V(this,arguments,"gt")}function Et(t,e){return new this(t).mod(e)}function Tt(t,e){return new this(t).mul(e)}function Mt(t,e){return new this(t).pow(e)}function kt(t){var e,n,r,i,o=0,a=new this(1),s=[];if(void 0===t?t=this.precision:O(t,1,c),r=Math.ceil(t/T),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(y);for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(s.push(i%1e7),o+=4);o=r/4}else for(;o<r;)s[o++]=1e7*Math.random()|0;for(r=s[--o],t%=T,r&&t&&(i=w(10,T-t),s[o]=(r/i|0)*i);0===s[o];o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=T)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<T&&(n-=T-r)}return a.e=n,a.d=s,a}function At(t){return N(t=new this(t),t.e+1,this.rounding)}function It(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Ot(t){return new this(t).sin()}function Pt(t){return new this(t).sinh()}function Lt(t){return new this(t).sqrt()}function Dt(t,e){return new this(t).sub(e)}function Nt(t){return new this(t).tan()}function Rt(t){return new this(t).tanh()}function Ft(t){return N(t=new this(t),t.e+1,1)}(o=function t(e){var n,r,i;function o(t){var e,n,r,i=this;if(!(i instanceof o))return new o(t);if(i.constructor=o,t instanceof o)return i.s=t.s,i.e=t.e,void(i.d=(t=t.d)?t.slice():t);if("number"==(r=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return i.e=e,void(i.d=[t])}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):Y(i,t.toString())}if("string"!==r)throw Error(m+t);return 45===t.charCodeAt(0)?(t=t.slice(1),i.s=-1):i.s=1,C.test(t)?Y(i,t):K(i,t)}if(o.prototype=A,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=dt,o.clone=t,o.isDecimal=yt,o.abs=tt,o.acos=et,o.acosh=nt,o.add=rt,o.asin=it,o.asinh=ot,o.atan=at,o.atanh=st,o.atan2=lt,o.cbrt=ct,o.ceil=ut,o.cos=ft,o.cosh=pt,o.div=ht,o.exp=gt,o.floor=mt,o.hypot=vt,o.ln=bt,o.log=wt,o.log10=xt,o.log2=_t,o.max=St,o.min=Ct,o.mod=Et,o.mul=Tt,o.pow=Mt,o.random=kt,o.round=At,o.sign=It,o.sin=Ot,o.sinh=Pt,o.sqrt=Lt,o.sub=Dt,o.tan=Nt,o.tanh=Rt,o.trunc=Ft,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(p)).default=o.Decimal=o,d=new o(d),f=new o(f),void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){"use strict";var r=n(9);e.name="bignumber",e.factory=function(t,e,n,i){var o=i("bignumber",{"":function(){return new t.BigNumber(0)},number:function(e){return new t.BigNumber(e+"")},string:function(e){return new t.BigNumber(e)},BigNumber:function(t){return t},Fraction:function(e){return new t.BigNumber(e.n).div(e.d)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={0:"0",1:"\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="boolean",e.factory=function(t,e,n,i){var o=i("bool",{"":function(){return!1},boolean:function(t){return t},number:function(t){return!!t},BigNumber:function(t){return!t.isZero()},string:function(t){var e=t.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;var n=Number(t);if(""!=t&&!isNaN(n))return!!n;throw new Error('Cannot convert "'+t+'" to a boolean')},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){t.exports=[n(1365),n(1367)]},function(t,e,n){"use strict";var r=n(45).format,i=n(28).lazy;e.name="Chain",e.path="type",e.factory=function(t,e,n,o,a){function s(e){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");t.isChain(e)?this.value=e.value:this.value=e}function l(t,e){"function"==typeof e&&(s.prototype[t]=c(e))}function c(t){return function(){for(var e=[this.value],n=0;n<arguments.length;n++)e[n+1]=arguments[n];return new s(t.apply(t,e))}}return s.prototype.type="Chain",s.prototype.isChain=!0,s.prototype.done=function(){return this.value},s.prototype.valueOf=function(){return this.value},s.prototype.toString=function(){return r(this.value)},s.createProxy=function(t,e){if("string"==typeof t)l(t,e);else for(var n in t)t.hasOwnProperty(n)&&l(n,t[n])},s.createProxy(a),a.on("import",function(t,e,n){void 0===n&&function(t,e){i(s.prototype,t,function(){var t=e();if("function"==typeof t)return c(t)})}(t,e)}),s},e.math=!0,e.lazy=!1},function(t,e){e.format=function(t,n){if("function"==typeof n)return n(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",i=void 0;switch(void 0!==n&&(n.notation&&(r=n.notation),"number"==typeof n?i=n:n.precision&&(i=n.precision)),r){case"fixed":return e.toFixed(t,i);case"exponential":return e.toExponential(t,i);case"auto":var o=.001,a=1e5;n&&n.exponential&&(void 0!==n.exponential.lower&&(o=n.exponential.lower),void 0!==n.exponential.upper&&(a=n.exponential.upper));t.constructor.toExpNeg,t.constructor.toExpPos;if(t.constructor.config({toExpNeg:Math.round(Math.log(o)/Math.LN10),toExpPos:Math.round(Math.log(a)/Math.LN10)}),t.isZero())return"0";var s=t.abs();return(s.gte(o)&&s.lt(a)?t.toSignificantDigits(i).toFixed():e.toExponential(t,i)).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}},e.toExponential=function(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()},e.toFixed=function(t,e){return t.toFixed(e||0)}},function(t,e,n){"use strict";e.name="chain",e.factory=function(t,e,n,r){return r("chain",{"":function(){return new t.Chain},any:function(e){return new t.Chain(e)}})}},function(t,e,n){t.exports=[n(722),n(1370)]},function(t,e,n){var r;
/**
 * @license Complex.js v2.0.3 11/02/2016
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license Complex.js v2.0.3 11/02/2016
 *
 * Copyright (c) 2016, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
!function(n){"use strict";var i={re:0,im:0},o=function(t){return.5*(Math.exp(t)+Math.exp(-t))},a=function(t){return.5*(Math.exp(t)-Math.exp(-t))},s=function(){throw SyntaxError("Invalid Param")};function l(t,e){var n=Math.abs(t),r=Math.abs(e);return 0===t?Math.log(r):0===e?Math.log(n):n<3e3&&r<3e3?.5*Math.log(t*t+e*e):Math.log(t/Math.cos(Math.atan2(e,t)))}var c=function(t,e){if(void 0===t||null===t)i.re=i.im=0;else if(void 0!==e)i.re=t,i.im=e;else switch(typeof t){case"object":"im"in t&&"re"in t?(i.re=t.re,i.im=t.im):"abs"in t&&"arg"in t?(i.re=t.abs*Math.cos(t.arg),i.im=t.abs*Math.sin(t.arg)):"r"in t&&"phi"in t?(i.re=t.r*Math.cos(t.phi),i.im=t.r*Math.sin(t.phi)):2===t.length?(i.re=t[0],i.im=t[1]):s();break;case"string":i.im=i.re=0;var n=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),r=1,o=0;null===n&&s();for(var a=0;a<n.length;a++){var l=n[a];" "===l||"\t"===l||"\n"===l||("+"===l?r++:"-"===l?o++:"i"===l||"I"===l?(r+o===0&&s()," "===n[a+1]||isNaN(n[a+1])?i.im+=parseFloat((o%2?"-":"")+"1"):(i.im+=parseFloat((o%2?"-":"")+n[a+1]),a++),r=o=0):((r+o===0||isNaN(l))&&s(),"i"===n[a+1]||"I"===n[a+1]?(i.im+=parseFloat((o%2?"-":"")+l),a++):i.re+=parseFloat((o%2?"-":"")+l),r=o=0))}r+o>0&&s();break;case"number":i.im=0,i.re=t;break;default:s()}isNaN(i.re)||isNaN(i.im)};function u(t,e){if(!(this instanceof u))return new u(t,e);c(t,e),this.re=i.re,this.im=i.im}u.prototype={re:0,im:0,sign:function(){var t=this.abs();return new u(this.re/t,this.im/t)},add:function(t,e){return c(t,e),new u(this.re+i.re,this.im+i.im)},sub:function(t,e){return c(t,e),new u(this.re-i.re,this.im-i.im)},mul:function(t,e){return c(t,e),0===i.im&&0===this.im?new u(this.re*i.re,0):new u(this.re*i.re-this.im*i.im,this.re*i.im+this.im*i.re)},div:function(t,e){c(t,e),t=this.re,e=this.im;var n,r,o=i.re,a=i.im;return 0===a?0===o?new u(0!==t?t/0:0,0!==e?e/0:0):new u(t/o,e/o):Math.abs(o)<Math.abs(a)?new u((t*(r=o/a)+e)/(n=o*r+a),(e*r-t)/n):new u((t+e*(r=a/o))/(n=a*r+o),(e-t*r)/n)},pow:function(t,e){if(c(t,e),t=this.re,e=this.im,0===t&&0===e)return u.ZERO;if(0===i.im){if(0===e&&t>=0)return new u(Math.pow(t,i.re),0);if(0===t)switch((i.re%4+4)%4){case 0:return new u(Math.pow(e,i.re),0);case 1:return new u(0,Math.pow(e,i.re));case 2:return new u(-Math.pow(e,i.re),0);case 3:return new u(0,-Math.pow(e,i.re))}}var n=Math.atan2(e,t),r=l(t,e);return t=Math.exp(i.re*r-i.im*n),e=i.im*r+i.re*n,new u(t*Math.cos(e),t*Math.sin(e))},sqrt:function(){var t,e,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new u(Math.sqrt(n),0);t=.5*Math.sqrt(2*(i+n))}else t=Math.abs(r)/Math.sqrt(2*(i-n));return e=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new u(t,r<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new u(t*Math.cos(this.im),t*Math.sin(this.im))},log:function(){var t=this.re,e=this.im;return new u(l(t,e),Math.atan2(e,t))},abs:function(){return function(t,e){var n=Math.abs(t),r=Math.abs(e);return n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=t/e):r=e/t,n*Math.sqrt(1+r*r))}(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new u(Math.sin(t)*o(e),Math.cos(t)*a(e))},cos:function(){var t=this.re,e=this.im;return new u(Math.cos(t)*o(e),-Math.sin(t)*a(e))},tan:function(){var t=2*this.re,e=2*this.im,n=Math.cos(t)+o(e);return new u(Math.sin(t)/n,a(e)/n)},cot:function(){var t=2*this.re,e=2*this.im,n=Math.cos(t)-o(e);return new u(-Math.sin(t)/n,a(e)/n)},sec:function(){var t=this.re,e=this.im,n=.5*o(2*e)+.5*Math.cos(2*t);return new u(Math.cos(t)*o(e)/n,Math.sin(t)*a(e)/n)},csc:function(){var t=this.re,e=this.im,n=.5*o(2*e)-.5*Math.cos(2*t);return new u(Math.sin(t)*o(e)/n,-Math.cos(t)*a(e)/n)},asin:function(){var t=this.re,e=this.im,n=new u(e*e-t*t+1,-2*t*e).sqrt(),r=new u(n.re-e,n.im+t).log();return new u(r.im,-r.re)},acos:function(){var t=this.re,e=this.im,n=new u(e*e-t*t+1,-2*t*e).sqrt(),r=new u(n.re-e,n.im+t).log();return new u(Math.PI/2-r.im,r.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new u(0,1/0);if(-1===e)return new u(0,-1/0)}var n=t*t+(1-e)*(1-e),r=new u((1-e*e-t*t)/n,-2*t/n).log();return new u(-.5*r.im,.5*r.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new u(Math.atan2(1,t),0);var n=t*t+e*e;return 0!==n?new u(t/n,-e/n).atan():new u(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new u(0,1/0);var n=t*t+e*e;return 0!==n?new u(t/n,-e/n).acos():new u(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new u(Math.PI/2,1/0);var n=t*t+e*e;return 0!==n?new u(t/n,-e/n).asin():new u(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new u(a(t)*Math.cos(e),o(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new u(o(t)*Math.cos(e),a(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,n=o(t)+Math.cos(e);return new u(a(t)/n,Math.sin(e)/n)},coth:function(){var t=2*this.re,e=2*this.im,n=o(t)-Math.cos(e);return new u(a(t)/n,-Math.sin(e)/n)},csch:function(){var t=this.re,e=this.im,n=Math.cos(2*e)-o(2*t);return new u(-2*a(t)*Math.cos(e)/n,2*o(t)*Math.sin(e)/n)},sech:function(){var t=this.re,e=this.im,n=Math.cos(2*e)+o(2*t);return new u(2*o(t)*Math.cos(e)/n,-2*a(t)*Math.sin(e)/n)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t,e=this.acos();return e.im<=0?(t=e.re,e.re=-e.im,e.im=t):(t=e.im,e.im=-e.re,e.re=t),e},atanh:function(){var t=this.re,e=this.im,n=t>1&&0===e,r=1-t,i=1+t,o=r*r+e*e,a=0!==o?new u((i*r-e*e)/o,(e*r+i*e)/o):new u(-1!==t?t/0:0,0!==e?e/0:0),s=a.re;return a.re=l(a.re,a.im)/2,a.im=Math.atan2(a.im,s)/2,n&&(a.im=-a.im),a},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new u(0,Math.PI/2);var n=t*t+e*e;return 0!==n?new u(t/n,-e/n).atanh():new u(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new u(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var n=t*t+e*e;return 0!==n?new u(t/n,-e/n).asinh():new u(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new u(1/0,0);var n=t*t+e*e;return 0!==n?new u(t/n,-e/n).acosh():new u(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){var t=this.re,e=this.im,n=t*t+e*e;return new u(0!==t?t/n:0,0!==e?-e/n:0)},conjugate:function(){return new u(this.re,-this.im)},neg:function(){return new u(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new u(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new u(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new u(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){return c(t,e),Math.abs(i.re-this.re)<=u.EPSILON&&Math.abs(i.im-this.im)<=u.EPSILON},clone:function(){return new u(this.re,this.im)},toString:function(){var t=this.re,e=this.im,n="";return isNaN(t)||isNaN(e)?"NaN":(0!==t&&(n+=t),0!==e&&(0!==t?n+=e<0?" - ":" + ":e<0&&(n+="-"),1!==(e=Math.abs(e))&&(n+=e),n+="i"),n||"0")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)}},u.ZERO=new u(0,0),u.ONE=new u(1,0),u.I=new u(0,1),u.PI=new u(Math.PI,0),u.E=new u(Math.E,0),u.EPSILON=1e-16,void 0===(r=function(){return u}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){"use strict";var r=n(9);e.name="complex",e.factory=function(t,e,i,o){var a=n(27),s=o("complex",{"":function(){return t.Complex.ZERO},number:function(e){return new t.Complex(e,0)},"number, number":function(e,n){return new t.Complex(e,n)},"BigNumber, BigNumber":function(e,n){return new t.Complex(e.toNumber(),n.toNumber())},Complex:function(t){return t.clone()},string:function(e){return t.Complex(e)},Object:function(e){if("re"in e&&"im"in e)return new t.Complex(e.re,e.im);if("r"in e&&"phi"in e)return new t.Complex(e);throw new Error("Expected object with either properties re and im, or properties r and phi.")},"Array | Matrix":function(t){return r(t,s)}});return s.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+"+a.symbols.i+"\\cdot\\left(${args[1]}\\right)\\right)"},s}},function(t,e,n){t.exports=[n(1372),n(724)]},function(t,e,n){var r=n(1373);r.prototype.type="Fraction",r.prototype.isFraction=!0,r.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},r.fromJSON=function(t){return new r(t)},e.name="Fraction",e.path="type",e.factory=function(t,e,n,i){return r}},function(t,e,n){var r;
/**
 * @license Fraction.js v4.0.4 09/09/2015
 * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license Fraction.js v4.0.4 09/09/2015
 * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
!function(n){"use strict";var i={s:1,n:0,d:1};function o(t){var e=function(){var e=Error.apply(this,arguments);e.name=this.name=t,this.stack=e.stack,this.message=e.message},n=function(){};return n.prototype=Error.prototype,e.prototype=new n,e}var a=f.DivisionByZero=o("DivisionByZero"),s=f.InvalidParameter=o("InvalidParameter");function l(t,e){return isNaN(t=parseInt(t,10))&&c(),t*e}function c(){throw new s}var u=function(t,e){var n,r=0,o=1,s=1,u=0,d=0,f=0,p=1,h=1,g=0,m=1,v=1,y=1,b=1e7;if(void 0===t||null===t);else if(void 0!==e)s=(r=t)*(o=e);else switch(typeof t){case"object":"d"in t&&"n"in t?(r=t.n,o=t.d,"s"in t&&(r*=t.s)):0 in t?(r=t[0],1 in t&&(o=t[1])):c(),s=r*o;break;case"number":if(t<0&&(s=t,t=-t),t%1==0)r=t;else if(t>0){for(t>=1&&(t/=h=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));m<=b&&y<=b;){if(t===(n=(g+v)/(m+y))){m+y<=b?(r=g+v,o=m+y):y>m?(r=v,o=y):(r=g,o=m);break}t>n?(g+=v,m+=y):(v+=g,y+=m),m>b?(r=v,o=y):(r=g,o=m)}r*=h}else(isNaN(t)||isNaN(e))&&(o=r=NaN);break;case"string":if(null===(m=t.match(/\d+|./g))&&c(),"-"===m[g]?(s=-1,g++):"+"===m[g]&&g++,m.length===g+1?d=l(m[g++],s):"."===m[g+1]||"."===m[g]?("."!==m[g]&&(u=l(m[g++],s)),(++g+1===m.length||"("===m[g+1]&&")"===m[g+3]||"'"===m[g+1]&&"'"===m[g+3])&&(d=l(m[g],s),p=Math.pow(10,m[g].length),g++),("("===m[g]&&")"===m[g+2]||"'"===m[g]&&"'"===m[g+2])&&(f=l(m[g+1],s),h=Math.pow(10,m[g+1].length)-1,g+=3)):"/"===m[g+1]||":"===m[g+1]?(d=l(m[g],s),p=l(m[g+2],1),g+=3):"/"===m[g+3]&&" "===m[g+1]&&(u=l(m[g],s),d=l(m[g+2],s),p=l(m[g+4],1),g+=5),m.length<=g){s=r=f+(o=p*h)*u+h*d;break}default:c()}if(0===o)throw new a;i.s=s<0?-1:1,i.n=Math.abs(r),i.d=Math.abs(o)},d=function(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}};function f(t,e){if(!(this instanceof f))return new f(t,e);u(t,e),t=f.REDUCE?d(i.d,i.n):1,this.s=i.s,this.n=i.n/t,this.d=i.d/t}f.REDUCE=1,f.prototype={s:1,n:0,d:1,abs:function(){return new f(this.n,this.d)},neg:function(){return new f(-this.s*this.n,this.d)},add:function(t,e){return u(t,e),new f(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(t,e){return u(t,e),new f(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(t,e){return u(t,e),new f(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(t,e){return u(t,e),new f(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return new f(this)},mod:function(t,e){return isNaN(this.n)||isNaN(this.d)?new f(NaN):void 0===t?new f(this.s*this.n%this.d,1):(u(t,e),0===i.n&&0===this.d&&f(0,0),new f(this.s*i.d*this.n%(i.n*this.d),i.d*this.d))},gcd:function(t,e){return u(t,e),new f(d(i.n,this.n),i.d*this.d/d(i.d,this.d))},lcm:function(t,e){return u(t,e),0===i.n&&0===this.n?new f:new f(i.n*this.n/d(i.n,this.n),d(i.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):new f(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):new f(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):new f(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return new f(this.s*this.d,this.n)},pow:function(t){return t<0?new f(Math.pow(this.s*this.d,-t),Math.pow(this.n,-t)):new f(Math.pow(this.s*this.n,t),Math.pow(this.d,t))},equals:function(t,e){return u(t,e),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(t,e){u(t,e);var n=this.s*this.n*i.d-i.s*i.n*this.d;return(0<n)-(n<0)},divisible:function(t,e){return u(t,e),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(t&&(e=Math.floor(r/i))>0&&(n+=e,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(t){var e,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(t&&(e=Math.floor(r/i))>0&&(n+=e,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,r=[];do{r.push(Math.floor(e/n)),t=e%n,e=n,n=t}while(1!==e);return r},toString:function(){var t,e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";f.REDUCE||(e/=t=d(e,n),n/=t);var r=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var n=10%e,r=1;1!==n;r++)if(n=10*n%e,r>2e3)return 0;return r}(0,n),i=function(t,e,n){for(var r=1,i=function(t,e,n){for(var r=1;e>0;t=t*t%n,e>>=1)1&e&&(r=r*t%n);return r}(10,n,e),o=0;o<300;o++){if(r===i)return o;r=10*r%e,i=10*i%e}return 0}(0,n,r),o=-1===this.s?"-":"";if(o+=e/n|0,e%=n,(e*=10)&&(o+="."),r){for(var a=i;a--;)o+=e/n|0,e%=n,e*=10;o+="(";for(a=r;a--;)o+=e/n|0,e%=n,e*=10;o+=")"}else for(a=15;e&&a--;)o+=e/n|0,e%=n,e*=10;return o}},void 0===(r=function(){return f}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){t.exports=[n(516),n(252),n(1376),n(1377),n(1378),n(1379),n(144),n(725),n(1380),n(7),n(1381)]},function(t,e,n){"use strict";e.isBoolean=function(t){return"boolean"==typeof t}},function(t,e,n){"use strict";var r=n(142),i=n(65),o=r.array,a=r.object,s=r.string,l=r.number,c=Array.isArray,u=l.isNumber,d=l.isInteger,f=s.isString,p=o.validateIndex;e.name="SparseMatrix",e.path="type",e.factory=function(t,e,h,g){var m=h(n(516)),v=h(n(61));function y(e,n){if(!(this instanceof y))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!f(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e))b(this,e,n);else if(e&&c(e.index)&&c(e.ptr)&&c(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=n||e.datatype;else if(c(e))w(this,e,n);else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=n}}var b=function(t,e,n){"SparseMatrix"===e.type?(t._values=e._values?a.clone(e._values):void 0,t._index=a.clone(e._index),t._ptr=a.clone(e._ptr),t._size=a.clone(e._size),t._datatype=n||e._datatype):w(t,e.valueOf(),n||e._datatype)},w=function(t,e,n){t._values=[],t._index=[],t._ptr=[],t._datatype=n;var r=e.length,i=0,o=v,a=0;if(f(n)&&(o=g.find(v,[n,n])||v,a=g.convert(0,n)),r>0){var s=0;do{t._ptr.push(t._index.length);for(var l=0;l<r;l++){var u=e[l];if(c(u)){if(0===s&&i<u.length&&(i=u.length),s<u.length){var d=u[s];o(d,a)||(t._values.push(d),t._index.push(l))}}else 0===s&&i<1&&(i=1),o(u,a)||(t._values.push(u),t._index.push(l))}s++}while(s<i)}t._ptr.push(t._index.length),t._size=[r,i]};y.prototype=new m,y.prototype.type="SparseMatrix",y.prototype.isSparseMatrix=!0,y.prototype.storage=function(){return"sparse"},y.prototype.datatype=function(){return this._datatype},y.prototype.create=function(t,e){return new y(t,e)},y.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},y.prototype.subset=function(t,e,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return _(this,t);case 2:case 3:return x(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}};var _=function(e,n){if(!t.isIndex(n))throw new TypeError("Invalid index");if(n.isScalar())return e.get(n.min());var r,o,a,s,l=n.size();if(l.length!=e._size.length)throw new i(l.length,e._size.length);var c=n.min(),u=n.max();for(r=0,o=e._size.length;r<o;r++)p(c[r],e._size[r]),p(u[r],e._size[r]);var d=e._values,f=e._index,h=e._ptr,g=n.dimension(0),m=n.dimension(1),v=[],b=[];g.forEach(function(t,e){b[t]=e[0],v[t]=!0});var w=d?[]:void 0,_=[],x=[];return m.forEach(function(t){for(x.push(_.length),a=h[t],s=h[t+1];a<s;a++)r=f[a],!0===v[r]&&(_.push(b[r]),w&&w.push(d[a]))}),x.push(_.length),new y({values:w,index:_,ptr:x,size:l,datatype:e._datatype})},x=function(e,n,r,s){if(!n||!0!==n.isIndex)throw new TypeError("Invalid index");var l,c=n.size(),u=n.isScalar();if(t.isMatrix(r)?(l=r.size(),r=r.toArray()):l=o.size(r),u){if(0!==l.length)throw new TypeError("Scalar expected");e.set(n.min(),r,s)}else{if(1!==c.length&&2!==c.length)throw new i(c.length,e._size.length,"<");if(l.length<c.length){for(var d=0,f=0;1===c[d]&&1===l[d];)d++;for(;1===c[d];)f++,d++;r=o.unsqueeze(r,c.length,f,l)}if(!a.deepEqual(c,l))throw new i(c,l,">");for(var p=n.min()[0],h=n.min()[1],g=l[0],m=l[1],v=0;v<g;v++)for(var y=0;y<m;y++){var b=r[v][y];e.set([v+p,y+h],b,s)}}return e};y.prototype.get=function(t){if(!c(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],n=t[1];p(e,this._size[0]),p(n,this._size[1]);var r=S(e,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===e?this._values[r]:0},y.prototype.set=function(t,e,n){if(!c(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var r=t[0],o=t[1],a=this._size[0],s=this._size[1],l=v,u=0;f(this._datatype)&&(l=g.find(v,[this._datatype,this._datatype])||v,u=g.convert(0,this._datatype)),(r>a-1||o>s-1)&&(T(this,Math.max(r+1,a),Math.max(o+1,s),n),a=this._size[0],s=this._size[1]),p(r,a),p(o,s);var d=S(r,this._ptr[o],this._ptr[o+1],this._index);return d<this._ptr[o+1]&&this._index[d]===r?l(e,u)?C(d,o,this._values,this._index,this._ptr):this._values[d]=e:E(d,r,o,e,this._values,this._index,this._ptr),this};var S=function(t,e,n,r){if(n-e==0)return n;for(var i=e;i<n;i++)if(r[i]===t)return i;return e},C=function(t,e,n,r,i){n.splice(t,1),r.splice(t,1);for(var o=e+1;o<i.length;o++)i[o]--},E=function(t,e,n,r,i,o,a){i.splice(t,0,r),o.splice(t,0,e);for(var s=n+1;s<a.length;s++)a[s]++};y.prototype.resize=function(t,e,n){if(!c(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");t.forEach(function(e){if(!l.isNumber(e)||!l.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+s.format(t)+")")});var r=n?this.clone():this;return T(r,t[0],t[1],e)};var T=function(t,e,n,r){var i=r||0,o=v,a=0;f(t._datatype)&&(o=g.find(v,[t._datatype,t._datatype])||v,a=g.convert(0,t._datatype),i=g.convert(i,t._datatype));var s,l,c,u=!o(i,a),d=t._size[0],p=t._size[1];if(n>p){for(l=p;l<n;l++)if(t._ptr[l]=t._values.length,u)for(s=0;s<d;s++)t._values.push(i),t._index.push(s);t._ptr[n]=t._values.length}else n<p&&(t._ptr.splice(n+1,p-n),t._values.splice(t._ptr[n],t._values.length),t._index.splice(t._ptr[n],t._index.length));if(p=n,e>d){if(u){var h=0;for(l=0;l<p;l++){t._ptr[l]=t._ptr[l]+h,c=t._ptr[l+1]+h;var m=0;for(s=d;s<e;s++,m++)t._values.splice(c+m,0,i),t._index.splice(c+m,0,s),h++}t._ptr[p]=t._values.length}}else if(e<d){var y=0;for(l=0;l<p;l++){t._ptr[l]=t._ptr[l]-y;var b=t._ptr[l],w=t._ptr[l+1]-y;for(c=b;c<w;c++)(s=t._index[c])>e-1&&(t._values.splice(c,1),t._index.splice(c,1),y++)}t._ptr[l]=t._values.length}return t._size[0]=e,t._size[1]=n,t};y.prototype.reshape=function(t,e){if(!c(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(t.forEach(function(e){if(!l.isNumber(e)||!l.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+s.format(t)+")")}),this._size[0]*this._size[1]!=t[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var o=0;o<n._ptr[i+1]-n._ptr[i];o++)r.push(i);var a=n._values.slice(),u=n._index.slice();for(i=0;i<n._index.length;i++){var d=u[i],f=r[i],p=d*n._size[1]+f;r[i]=p%t[1],u[i]=Math.floor(p/t[1])}for(n._values.length=0,n._index.length=0,n._ptr.length=t[1]+1,n._size=t.slice(),i=0;i<n._ptr.length;i++)n._ptr[i]=0;for(var h=0;h<a.length;h++){i=u[h],o=r[h];var g=a[h],m=S(i,n._ptr[o],n._ptr[o+1],n._index);E(m,i,o,g,n._values,n._index,n._ptr)}return n},y.prototype.clone=function(){return new y({values:this._values?a.clone(this._values):void 0,index:a.clone(this._index),ptr:a.clone(this._ptr),size:a.clone(this._size),datatype:this._datatype})},y.prototype.size=function(){return this._size.slice(0)},y.prototype.map=function(t,e){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var n=this,r=this._size[0],i=this._size[1];return M(this,0,r-1,0,i-1,function(e,r,i){return t(e,[r,i],n)},e)};var M=function(t,e,n,r,i,o,a){var s=[],l=[],c=[],u=v,d=0;f(t._datatype)&&(u=g.find(v,[t._datatype,t._datatype])||v,d=g.convert(0,t._datatype));for(var p=function(t,e,n){t=o(t,e,n),u(t,d)||(s.push(t),l.push(e))},h=r;h<=i;h++){c.push(s.length);for(var m=t._ptr[h],b=t._ptr[h+1],w=e,_=m;_<b;_++){var x=t._index[_];if(x>=e&&x<=n){if(!a)for(var S=w;S<x;S++)p(0,S-e,h-r);p(t._values[_],x-e,h-r)}w=x+1}if(!a)for(var C=w;C<=n;C++)p(0,C-e,h-r)}return c.push(s.length),new y({values:s,index:l,ptr:c,size:[n-e+1,i-r+1]})};y.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){for(var o=this._ptr[i],a=this._ptr[i+1],s=0,l=o;l<a;l++){var c=this._index[l];if(!e)for(var u=s;u<c;u++)t(0,[u,i],this);t(this._values[l],[c,i],this),s=c+1}if(!e)for(var d=s;d<n;d++)t(0,[d,i],this)}},y.prototype.toArray=function(){return k(this._values,this._index,this._ptr,this._size,!0)},y.prototype.valueOf=function(){return k(this._values,this._index,this._ptr,this._size,!1)};var k=function(t,e,n,r,i){var o,s,l=r[0],c=r[1],u=[];for(o=0;o<l;o++)for(u[o]=[],s=0;s<c;s++)u[o][s]=0;for(s=0;s<c;s++)for(var d=n[s],f=n[s+1],p=d;p<f;p++)u[o=e[p]][s]=t?i?a.clone(t[p]):t[p]:1;return u};return y.prototype.format=function(t){for(var e=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+s.format(e,t)+" x "+s.format(n,t)+"] density: "+s.format(r,t)+"\n",o=0;o<n;o++)for(var a=this._ptr[o],l=this._ptr[o+1],c=a;c<l;c++){var u=this._index[c];i+="\n    ("+s.format(u,t)+", "+s.format(o,t)+") ==> "+(this._values?s.format(this._values[c],t):"X")}return i},y.prototype.toString=function(){return s.format(this.toArray())},y.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},y.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!u(e)||!d(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var n=e>0?e:0,r=e<0?-e:0,i=this._size[0],o=this._size[1],a=Math.min(i-r,o-n),s=[],l=[],c=[];c[0]=0;for(var f=n;f<o&&s.length<a;f++)for(var p=this._ptr[f],h=this._ptr[f+1],g=p;g<h;g++){var m=this._index[g];if(m===f-n+r){s.push(this._values[g]),l[s.length-1]=m-r;break}}return c.push(s.length),new y({values:s,index:l,ptr:c,size:[a,1]})},y.fromJSON=function(t){return new y(t)},y.diagonal=function(e,n,r,i,o){if(!c(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!u(e)||!d(e)||e<1)throw new Error("Size values must be positive integers");return e}),r){if(t.isBigNumber(r)&&(r=r.toNumber()),!u(r)||!d(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a=v,s=0;f(o)&&(a=g.find(v,[o,o])||v,s=g.convert(0,o));var l,p=r>0?r:0,h=r<0?-r:0,m=e[0],b=e[1],w=Math.min(m-h,b-p);if(c(n)){if(n.length!==w)throw new Error("Invalid value array length");l=function(t){return n[t]}}else if(t.isMatrix(n)){var _=n.size();if(1!==_.length||_[0]!==w)throw new Error("Invalid matrix length");l=function(t){return n.get([t])}}else l=function(){return n};for(var x=[],S=[],C=[],E=0;E<b;E++){C.push(x.length);var T=E-p;if(T>=0&&T<w){var M=l(T);a(M,s)||(S.push(T+h),x.push(M))}}return C.push(x.length),new y({values:x,index:S,ptr:C,size:[m,b]})},y.prototype.swapRows=function(t,e){if(!(u(t)&&d(t)&&u(e)&&d(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return p(t,this._size[0]),p(e,this._size[0]),y._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},y._forEachRow=function(t,e,n,r,i){for(var o=r[t],a=r[t+1],s=o;s<a;s++)i(n[s],e[s])},y._swapRows=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=o[a],l=o[a+1],c=S(t,s,l,i),u=S(e,s,l,i);if(c<l&&u<l&&i[c]===t&&i[u]===e){if(r){var d=r[c];r[c]=r[u],r[u]=d}}else if(c<l&&i[c]===t&&(u>=l||i[u]!==e)){var f=r?r[c]:void 0;i.splice(u,0,e),r&&r.splice(u,0,f),i.splice(u<=c?c+1:c,1),r&&r.splice(u<=c?c+1:c,1)}else if(u<l&&i[u]===e&&(c>=l||i[c]!==t)){var p=r?r[u]:void 0;i.splice(c,0,t),r&&r.splice(c,0,p),i.splice(c<=u?u+1:u,1),r&&r.splice(c<=u?u+1:u,1)}}},t.Matrix._storage.sparse=y,y},e.lazy=!1},function(t,e,n){"use strict";e.name="Spa",e.path="type",e.factory=function(t,e,r){var i=r(n(105)),o=r(n(61));function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new t.FibonacciHeap}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var n=this._heap.insert(t,e);this._values[t]=n}},a.prototype.get=function(t){var e=this._values[t];return e?e.value:0},a.prototype.accumulate=function(t,e){var n=this._values[t];n?n.value=i(n.value,e):(n=this._heap.insert(t,e),this._values[t]=n)},a.prototype.forEach=function(t,e,n){var r=this._heap,i=this._values,a=[],s=r.extractMinimum();for(s&&a.push(s);s&&s.key<=e;)s.key>=t&&(o(s.value,0)||n(s.key,s.value,this)),(s=r.extractMinimum())&&a.push(s);for(var l=0;l<a.length;l++){var c=a[l];i[(s=r.insert(c.key,c.value)).key]=s}},a.prototype.swap=function(t,e){var n=this._values[t],r=this._values[e];if(!n&&r)n=this._heap.insert(t,r.value),this._heap.remove(r),this._values[t]=n,this._values[e]=void 0;else if(n&&!r)r=this._heap.insert(e,n.value),this._heap.remove(n),this._values[e]=r,this._values[t]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},a}},function(t,e,n){"use strict";e.name="FibonacciHeap",e.path="type",e.factory=function(t,e,r,i){var o=r(n(217)),a=r(n(184)),s=1/Math.log((1+Math.sqrt(5))/2);function l(){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}l.prototype.type="FibonacciHeap",l.prototype.isFibonacciHeap=!0,l.prototype.insert=function(t,e){var n={key:t,value:e,degree:0};if(this._minimum){var r=this._minimum;n.left=r,n.right=r.right,r.right=n,n.right.left=n,o(t,r.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},l.prototype.size=function(){return this._size},l.prototype.clear=function(){this._minimum=null,this._size=0},l.prototype.isEmpty=function(){return 0===this._size},l.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var e=this._minimum,n=t.degree,r=t.child;n>0;){var i=r.right;r.left.right=r.right,r.right.left=r.left,r.left=e,r.right=e.right,e.right=r,r.right.left=r,r.parent=null,r=i,n--}return t.left.right=t.right,t.right.left=t.left,t==t.right?e=null:(e=t.right,e=p(e,this._size)),this._size--,this._minimum=e,t},l.prototype.remove=function(t){this._minimum=c(this._minimum,t,-1),this.extractMinimum()};var c=function(t,e,n){e.key=n;var r=e.parent;return r&&o(e.key,r.key)&&(u(t,e,r),d(t,r)),o(e.key,t.key)&&(t=e),t},u=function(t,e,n){e.left.right=e.right,e.right.left=e.left,n.degree--,n.child==e&&(n.child=e.right),0===n.degree&&(n.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1},d=function(t,e){var n=e.parent;n&&(e.mark?(u(t,e,n),d(n)):e.mark=!0)},f=function(t,e){t.left.right=t.right,t.right.left=t.left,t.parent=e,e.child?(t.left=e.child,t.right=e.child.right,e.child.right=t,t.right.left=t):(e.child=t,t.right=t,t.left=t),e.degree++,t.mark=!1},p=function(t,e){var n,r=Math.floor(Math.log(e)*s)+1,i=new Array(r),l=0,c=t;if(c)for(l++,c=c.right;c!==t;)l++,c=c.right;for(;l>0;){for(var u=c.degree,d=c.right;n=i[u];){if(a(c.key,n.key)){var p=n;n=c,c=p}f(n,c),i[u]=null,u++}i[u]=c,c=d,l--}t=null;for(var h=0;h<r;h++)(n=i[h])&&(t?(n.left.right=n.right,n.right.left=n.left,n.left=t,n.right=t.right,t.right=n,n.right.left=n,o(n.key,t.key)&&(t=n)):t=n);return t};return l}},function(t,e,n){"use strict";var r=n(142),i=r.string,o=r.object,a=Array.isArray,s=i.isString;e.name="ImmutableDenseMatrix",e.path="type",e.factory=function(t,e,i){var l=i(n(252)),c=i(n(217));function u(e,n){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(n&&!s(n))throw new Error("Invalid datatype: "+n);if(t.isMatrix(e)||a(e)){var i=new l(e,n);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&a(e.data)&&a(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+r.types.type(e)+")");this._data=[],this._size=[0],this._datatype=n,this._min=null,this._max=null}}return u.prototype=new l,u.prototype.type="ImmutableDenseMatrix",u.prototype.isImmutableDenseMatrix=!0,u.prototype.subset=function(e){switch(arguments.length){case 1:var n=l.prototype.subset.call(this,e);return t.isMatrix(n)?new u({data:n._data,size:n._size,datatype:n._datatype}):n;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},u.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},u.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},u.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},u.prototype.clone=function(){return new u({data:o.clone(this._data),size:o.clone(this._size),datatype:this._datatype})},u.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},u.fromJSON=function(t){return new u(t)},u.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},u.prototype.min=function(){if(null===this._min){var t=null;this.forEach(function(e){(null===t||c(e,t))&&(t=e)}),this._min=null!==t?t:void 0}return this._min},u.prototype.max=function(){if(null===this._max){var t=null;this.forEach(function(e){(null===t||c(t,e))&&(t=e)}),this._max=null!==t?t:void 0}return this._max},u}},function(t,e,n){"use strict";e.name="index",e.factory=function(t,e,n,r){return r("index",{"...number | string | BigNumber | Range | Array | Matrix":function(e){var n=e.map(function(e){return t.isBigNumber(e)?e.toNumber():Array.isArray(e)||t.isMatrix(e)?e.map(function(e){return t.isBigNumber(e)?e.toNumber():e}):e}),r=new t.Index;return t.Index.apply(r,n),r}})}},function(t,e,n){"use strict";e.name="sparse",e.factory=function(t,e,n,r){var i=t.SparseMatrix,o=r("sparse",{"":function(){return new i([])},string:function(t){return new i([],t)},"Array | Matrix":function(t){return new i(t)},"Array | Matrix, string":function(t,e){return new i(t,e)}});return o.toTex={0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},o}},function(t,e,n){t.exports=[n(726)]},function(t,e,n){"use strict";var r=n(9),i=n(13);e.name="string",e.factory=function(t,e,n,o){var a=o("string",{"":function(){return""},number:i.format,null:function(t){return"null"},boolean:function(t){return t+""},string:function(t){return t},"Array | Matrix":function(t){return r(t,a)},any:function(t){return String(t)}});return a.toTex={0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},a}},function(t,e,n){t.exports=[n(1385),n(1386),n(1387),n(1388),n(1389)]},function(t,e,n){"use strict";var r=n(45).endsWith,i=n(28).clone,o=n(727);e.name="Unit",e.path="type",e.factory=function(t,e,a,s,l){var c,u,d,f=a(n(91)),p=a(n(106)),h=a(n(107)),g=a(n(82)),m=a(n(253)),v=a(n(145)),y=a(n(728)),b=a(n(729)),w=a(n(160)),_=a(n(519)),x=a(n(730)),S=a(n(520)),C=a(n(518)),E=a(n(722));function T(e,n){if(!(this instanceof T))throw new Error("Constructor must be called with the new operator");if(void 0!=e&&!_(e)&&!t.isComplex(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!=n&&("string"!=typeof n||""===n))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!=n){var r=T.parse(n);this.units=r.units,this.dimensions=r.dimensions}else{this.units=[{unit:q,prefix:R.NONE,power:0}],this.dimensions=[];for(var i=0;i<B.length;i++)this.dimensions[i]=0}this.value=void 0!=e?this._normalize(e):null,this.fixPrefix=!1,this.isUnitListSimplified=!0}function M(){for(;" "==d||"\t"==d;)A()}function k(t){return t>="0"&&t<="9"}function A(){u++,d=c.charAt(u)}function I(t){u=t,d=c.charAt(u)}function O(){var t,e="";if(t=u,"+"==d?A():"-"==d&&(e+=d,A()),!function(t){return t>="0"&&t<="9"||"."==t}(d))return I(t),null;if("."==d){if(e+=d,A(),!k(d))return I(t),null}else{for(;k(d);)e+=d,A();"."==d&&(e+=d,A())}for(;k(d);)e+=d,A();if("E"==d||"e"==d){var n="",r=u;if(n+=d,A(),"+"!=d&&"-"!=d||(n+=d,A()),!k(d))return I(r),e;for(e+=n;k(d);)e+=d,A()}return e}function P(){for(var t="",e=c.charCodeAt(u);e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122;)t+=d,A(),e=c.charCodeAt(u);return((e=t.charCodeAt(0))>=65&&e<=90||e>=97&&e<=122)&&t||null}function L(t){return d===t?(A(),t):null}function D(t){if(z.hasOwnProperty(t))return{unit:i=z[t],prefix:n=i.prefixes[""]};for(var e in z)if(z.hasOwnProperty(e)&&r(t,e)){var n,i=z[e],o=t.length-e.length,a=t.substring(0,o);if(void 0!==(n=i.prefixes.hasOwnProperty(a)?i.prefixes[a]:void 0))return{unit:i,prefix:n}}return null}T.prototype.type="Unit",T.prototype.isUnit=!0,T.parse=function(n,r){if(r=r||{},u=-1,d="","string"!=typeof(c=n))throw new TypeError("Invalid argument in Unit.parse, string expected");var i=new T;i.units=[],A(),M();var o=O(),a=null;o&&(a="BigNumber"===e.number?new t.BigNumber(o):"Fraction"===e.number?new t.Fraction(o):parseFloat(o)),M();for(var s=1,l=!1,f=[],p=1;;){for(M();"("===d;)f.push(s),p*=s,s=1,A(),M();if(!d)break;var h=d,g=P();if(null==g)throw new SyntaxError('Unexpected "'+h+'" in "'+c+'" at index '+u.toString());var m=D(g);if(null==m)throw new SyntaxError('Unit "'+g+'" not found.');var v=s*p;if(M(),L("^")){M();var y=O();if(null==y)throw new SyntaxError('In "'+n+'", "^" must be followed by a floating-point number');v*=y}i.units.push({unit:m.unit,prefix:m.prefix,power:v});for(var b=0;b<B.length;b++)i.dimensions[b]+=(m.unit.dimensions[b]||0)*v;for(M();")"===d;){if(0===f.length)throw new SyntaxError('Unmatched ")" in "'+c+'" at index '+u.toString());p/=f.pop(),A(),M()}if(l=!1,L("*")?(s=1,l=!0):L("/")?(s=-1,l=!0):s=1,m.unit.base){var w=m.unit.base.key;V.auto[w]={unit:m.unit,prefix:m.prefix}}}if(M(),d)throw new SyntaxError('Could not parse: "'+n+'"');if(l)throw new SyntaxError('Trailing characters: "'+n+'"');if(0!==f.length)throw new SyntaxError('Unmatched "(" in "'+c+'"');if(0==i.units.length&&!r.allowNoUnits)throw new SyntaxError('"'+n+'" contains no units');return i.value=void 0!=a?i._normalize(a):null,i},T.prototype.clone=function(){var t=new T;t.fixPrefix=this.fixPrefix,t.isUnitListSimplified=this.isUnitListSimplified,t.value=i(this.value),t.dimensions=this.dimensions.slice(0),t.units=[];for(var e=0;e<this.units.length;e++)for(var n in t.units[e]={},this.units[e])this.units[e].hasOwnProperty(n)&&(t.units[e][n]=this.units[e][n]);return t},T.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},T.prototype._normalize=function(t){var e,n,r,i,o;if(null==t||0===this.units.length)return t;if(this._isDerived()){var a=t;o=T._getNumberConverter(S(t));for(var s=0;s<this.units.length;s++)e=o(this.units[s].unit.value),i=o(this.units[s].prefix.value),r=o(this.units[s].power),a=h(a,m(h(e,i),r));return a}return e=(o=T._getNumberConverter(S(t)))(this.units[0].unit.value),n=o(this.units[0].unit.offset),i=o(this.units[0].prefix.value),h(f(t,n),h(e,i))},T.prototype._denormalize=function(t,e){var n,r,i,o,a;if(null==t||0===this.units.length)return t;if(this._isDerived()){var s=t;a=T._getNumberConverter(S(t));for(var l=0;l<this.units.length;l++)n=a(this.units[l].unit.value),o=a(this.units[l].prefix.value),i=a(this.units[l].power),s=g(s,m(h(n,o),i));return s}return n=(a=T._getNumberConverter(S(t)))(this.units[0].unit.value),o=a(this.units[0].prefix.value),r=a(this.units[0].unit.offset),p(g(g(t,n),void 0==e?o:e),r)},T.isValuelessUnit=function(t){return null!=D(t)},T.prototype.hasBase=function(t){if("string"==typeof t&&(t=j[t]),!t)return!1;for(var e=0;e<B.length;e++)if(Math.abs((this.dimensions[e]||0)-(t.dimensions[e]||0))>1e-12)return!1;return!0},T.prototype.equalBase=function(t){for(var e=0;e<B.length;e++)if(Math.abs((this.dimensions[e]||0)-(t.dimensions[e]||0))>1e-12)return!1;return!0},T.prototype.equals=function(t){return this.equalBase(t)&&w(this.value,t.value)},T.prototype.multiply=function(t){for(var e=this.clone(),n=0;n<B.length;n++)e.dimensions[n]=(this.dimensions[n]||0)+(t.dimensions[n]||0);for(n=0;n<t.units.length;n++){var r={};for(var i in t.units[n])r[i]=t.units[n][i];e.units.push(r)}if(null!=this.value||null!=t.value){var o=null==this.value?this._normalize(1):this.value,a=null==t.value?t._normalize(1):t.value;e.value=h(o,a)}else e.value=null;return e.isUnitListSimplified=!1,N(e)},T.prototype.divide=function(t){for(var e=this.clone(),n=0;n<B.length;n++)e.dimensions[n]=(this.dimensions[n]||0)-(t.dimensions[n]||0);for(n=0;n<t.units.length;n++){var r={};for(var i in t.units[n])r[i]=t.units[n][i];r.power=-r.power,e.units.push(r)}if(null!=this.value||null!=t.value){var o=null==this.value?this._normalize(1):this.value,a=null==t.value?t._normalize(1):t.value;e.value=g(o,a)}else e.value=null;return e.isUnitListSimplified=!1,N(e)},T.prototype.pow=function(t){for(var e=this.clone(),n=0;n<B.length;n++)e.dimensions[n]=(this.dimensions[n]||0)*t;for(n=0;n<e.units.length;n++)e.units[n].power*=t;return null!=e.value?e.value=m(e.value,t):e.value=null,e.isUnitListSimplified=!1,N(e)};var N=function(t){return t.equalBase(j.NONE)&&null!==t.value&&!e.predictable?t.value:t};T.prototype.abs=function(){var t=this.clone();for(var e in t.value=v(t.value),t.units)"VA"!==t.units[e].unit.name&&"VAR"!==t.units[e].unit.name||(t.units[e].unit=z.W);return t},T.prototype.to=function(e){var n,r=null==this.value?this._normalize(1):this.value;if("string"==typeof e){if(n=T.parse(e),!this.equalBase(n))throw new Error("Units do not match");if(null!==n.value)throw new Error("Cannot convert to a unit with a value");return n.value=i(r),n.fixPrefix=!0,n.isUnitListSimplified=!0,n}if(t.isUnit(e)){if(!this.equalBase(e))throw new Error("Units do not match");if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return(n=e.clone()).value=i(r),n.fixPrefix=!0,n.isUnitListSimplified=!0,n}throw new Error("String or Unit expected as parameter")},T.prototype.toNumber=function(t){return C(this.toNumeric(t))},T.prototype.toNumeric=function(t){var e=this;return t&&(e=this.to(t)),e.simplifyUnitListLazy(),e._isDerived()?e._denormalize(e.value):e._denormalize(e.value,e.units[0].prefix.value)},T.prototype.toString=function(){return this.format()},T.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},T.fromJSON=function(t){var e=new T(t.value,t.unit);return e.fixPrefix=t.fixPrefix||!1,e},T.prototype.valueOf=T.prototype.toString,T.prototype.simplifyUnitListLazy=function(){if(!this.isUnitListSimplified&&null!=this.value){var t,e,n=[];for(var r in H)if(this.hasBase(j[r])){t=r;break}if("NONE"===t)this.units=[];else if(t&&H.hasOwnProperty(t)&&(e=H[t]),e)this.units=[{unit:e.unit,prefix:e.prefix,power:1}];else{for(var i=!1,o=0;o<B.length;o++){var a=B[o];Math.abs(this.dimensions[o]||0)>1e-12&&(H.hasOwnProperty(a)?n.push({unit:H[a].unit,prefix:H[a].prefix,power:this.dimensions[o]||0}):i=!0)}n.length<this.units.length&&!i&&(this.units=n)}this.isUnitListSimplified=!0}},T.prototype.toSI=function(){for(var t=this.clone(),e=[],n=0;n<B.length;n++){var r=B[n];if(Math.abs(t.dimensions[n]||0)>1e-12){if(!V.si.hasOwnProperty(r))throw new Error("Cannot express custom unit "+r+" in SI units");e.push({unit:V.si[r].unit,prefix:V.si[r].prefix,power:t.dimensions[n]||0})}}return t.units=e,t.isUnitListSimplified=!0,t},T.prototype.formatUnits=function(){this.simplifyUnitListLazy();for(var t="",e="",n=0,r=0,i=0;i<this.units.length;i++)this.units[i].power>0?(n++,t+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(t+="^"+this.units[i].power)):this.units[i].power<0&&r++;if(r>0)for(i=0;i<this.units.length;i++)this.units[i].power<0&&(n>0?(e+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power+1)>1e-15&&(e+="^"+-this.units[i].power)):(e+=" "+this.units[i].prefix.name+this.units[i].unit.name,e+="^"+this.units[i].power));t=t.substr(1),e=e.substr(1),n>1&&r>0&&(t="("+t+")"),r>1&&n>0&&(e="("+e+")");var o=t;return n>0&&r>0&&(o+=" / "),o+=e},T.prototype.format=function(e){this.simplifyUnitListLazy();var n=!1;for(var r in void 0!==this.value&&null!==this.value&&t.isComplex(this.value)&&(n=Math.abs(this.value.re)<1e-14,Math.abs(this.value.im)),this.units)this.units[r].unit&&("VA"===this.units[r].unit.name&&n?this.units[r].unit=z.VAR:"VAR"!==this.units[r].unit.name||n||(this.units[r].unit=z.VA));1!==this.units.length||this.fixPrefix||Math.abs(this.units[0].power-Math.round(this.units[0].power))<1e-14&&(this.units[0].prefix=this._bestPrefix());var i=this._denormalize(this.value),o=null!==this.value?x(i,e||{}):"",a=this.formatUnits();return this.value&&t.isComplex(this.value)&&(o="("+o+")"),a.length>0&&o.length>0&&(o+=" "),o+=a},T.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var t=v(this.value),e=v(this.units[0].unit.value),n=this.units[0].prefix;if(0===t)return n;var r=this.units[0].power,i=Math.log(t/Math.pow(n.value*e,r))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return n;i=Math.abs(i);var o=this.units[0].unit.prefixes;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];if(s.scientific){var l=Math.abs(Math.log(t/Math.pow(s.value*e,r))/Math.LN10-1.2);(l<i||l===i&&s.name.length<n.name.length)&&(n=s,i=l)}}return n},T.prototype.splitUnit=function(t){for(var e=this.clone(),n=[],r=0;r<t.length&&(e=e.to(t[r]),r!=t.length-1);r++){var i=e.toNumeric(),o=b(i),a=new T(w(o,i)?o:y(e.toNumeric()),t[r].toString());n.push(a),e=p(e,a)}var s=0;for(r=0;r<n.length;r++)s=f(s,n[r].value);return w(s,this.value)&&(e.value=0),n.push(e),n};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}},SHORTLONG:{}};for(var F in R.SHORT)R.SHORT.hasOwnProperty(F)&&(R.SHORTLONG[F]=R.SHORT[F]);for(var F in R.LONG)R.LONG.hasOwnProperty(F)&&(R.SHORTLONG[F]=R.LONG[F]);var B=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],j={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var F in j)j[F].key=F;var q={name:"",base:{},value:1,offset:0,dimensions:[0,0,0,0,0,0,0,0,0]},z={meter:{name:"meter",base:j.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:j.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:j.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:j.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:j.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:j.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:j.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},chain:{name:"chain",base:j.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:j.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:j.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:j.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:j.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:j.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:j.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:j.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:j.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:j.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:j.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:j.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:j.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:j.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:j.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:j.SURFACE,prefixes:R.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:j.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:j.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:j.SURFACE,prefixes:R.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:j.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:j.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:j.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:j.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:j.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:j.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:j.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:j.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:j.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:j.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:j.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:j.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:j.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:j.VOLUME,prefixes:R.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:j.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:j.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:j.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:j.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:j.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:j.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:j.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:j.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:j.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:j.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:j.VOLUME,prefixes:R.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:j.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:j.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:j.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:j.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:j.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:j.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:j.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:j.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},obl:{name:"obl",base:j.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},g:{name:"g",base:j.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:j.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:j.MASS,prefixes:R.SHORT,value:907.18474,offset:0},tonne:{name:"tonne",base:j.MASS,prefixes:R.SHORT,value:1e3,offset:0},grain:{name:"grain",base:j.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:j.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:j.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:j.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:j.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:j.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:j.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:j.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:j.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:j.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:j.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:j.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:j.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:j.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:j.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:j.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:j.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:j.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:j.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:j.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:j.TIME,prefixes:R.NONE,value:604800,offset:0},month:{name:"month",base:j.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:j.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"year",base:j.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:j.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:j.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:j.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:j.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:j.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:j.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:j.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:j.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:j.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:j.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:j.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:j.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:j.TEMPERATURE,prefixes:R.NONE,value:1,offset:0},degC:{name:"degC",base:j.TEMPERATURE,prefixes:R.NONE,value:1,offset:273.15},degF:{name:"degF",base:j.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:j.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:j.TEMPERATURE,prefixes:R.NONE,value:1,offset:0},celsius:{name:"celsius",base:j.TEMPERATURE,prefixes:R.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:j.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:j.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:j.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:j.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:j.LUMINOUS_INTENSITY,prefixes:R.NONE,value:1,offset:0},candela:{name:"candela",base:j.LUMINOUS_INTENSITY,prefixes:R.NONE,value:1,offset:0},N:{name:"N",base:j.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:j.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:j.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:j.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:j.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:j.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:j.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},J:{name:"J",base:j.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:j.ENERGY,prefixes:R.SHORT,value:1,offset:0},erg:{name:"erg",base:j.ENERGY,prefixes:R.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:j.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:j.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:j.ENERGY,prefixes:R.SHORT,value:1.602176565e-19,offset:0},electronvolt:{name:"electronvolt",base:j.ENERGY,prefixes:R.LONG,value:1.602176565e-19,offset:0},W:{name:"W",base:j.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"W",base:j.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:j.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:j.POWER,prefixes:R.SHORT,value:E.I,offset:0},VA:{name:"VA",base:j.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:j.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:j.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:j.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:j.PRESSURE,prefixes:R.NONE,value:1e5,offset:0},torr:{name:"torr",base:j.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:j.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:j.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:j.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:j.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:j.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:j.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:j.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:j.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:j.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:j.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:j.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:j.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:j.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:j.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:j.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:j.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:j.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:j.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:j.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:j.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:j.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:j.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},U={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",hertz:"hertz",radians:"rad",degree:"deg",degrees:"deg",gradian:"grad",gradians:"grad",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole"};function $(e){if("BigNumber"===e.number){var n=o.pi(t.BigNumber);z.rad.value=new t.BigNumber(1),z.deg.value=n.div(180),z.grad.value=n.div(200),z.cycle.value=n.times(2),z.arcsec.value=n.div(648e3),z.arcmin.value=n.div(10800)}else z.rad.value=1,z.deg.value=Math.PI/180,z.grad.value=Math.PI/200,z.cycle.value=2*Math.PI,z.arcsec.value=Math.PI/648e3,z.arcmin.value=Math.PI/10800}$(e),l.on("config",function(t,e){t.number!==e.number&&$(t)});var V={si:{NONE:{unit:q,prefix:R.NONE[""]},LENGTH:{unit:z.m,prefix:R.SHORT[""]},MASS:{unit:z.g,prefix:R.SHORT.k},TIME:{unit:z.s,prefix:R.SHORT[""]},CURRENT:{unit:z.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:z.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:z.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:z.mol,prefix:R.SHORT[""]},ANGLE:{unit:z.rad,prefix:R.SHORT[""]},BIT:{unit:z.bit,prefix:R.SHORT[""]},FORCE:{unit:z.N,prefix:R.SHORT[""]},ENERGY:{unit:z.J,prefix:R.SHORT[""]},POWER:{unit:z.W,prefix:R.SHORT[""]},PRESSURE:{unit:z.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:z.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:z.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:z.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:z.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:z.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:z.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:z.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:z.T,prefix:R.SHORT[""]},FREQUENCY:{unit:z.Hz,prefix:R.SHORT[""]}}};V.cgs=JSON.parse(JSON.stringify(V.si)),V.cgs.LENGTH={unit:z.m,prefix:R.SHORT.c},V.cgs.MASS={unit:z.g,prefix:R.SHORT[""]},V.cgs.FORCE={unit:z.dyn,prefix:R.SHORT[""]},V.cgs.ENERGY={unit:z.erg,prefix:R.NONE[""]},V.us=JSON.parse(JSON.stringify(V.si)),V.us.LENGTH={unit:z.ft,prefix:R.NONE[""]},V.us.MASS={unit:z.lbm,prefix:R.NONE[""]},V.us.TEMPERATURE={unit:z.degF,prefix:R.NONE[""]},V.us.FORCE={unit:z.lbf,prefix:R.NONE[""]},V.us.ENERGY={unit:z.BTU,prefix:R.BTU[""]},V.us.POWER={unit:z.hp,prefix:R.NONE[""]},V.us.PRESSURE={unit:z.psi,prefix:R.NONE[""]},V.auto=JSON.parse(JSON.stringify(V.si));var H=V.auto;for(var F in T.setUnitSystem=function(t){if(!V.hasOwnProperty(t))throw new Error("Unit system "+t+" does not exist. Choices are: "+Object.keys(V).join(", "));H=V[t]},T.getUnitSystem=function(){for(var t in V)if(V[t]===H)return t},T.typeConverters={BigNumber:function(e){return new t.BigNumber(e+"")},Fraction:function(e){return new t.Fraction(e)},Complex:function(t){return t},number:function(t){return t}},T._getNumberConverter=function(t){if(!T.typeConverters[t])throw new TypeError('Unsupported type "'+t+'"');return T.typeConverters[t]},z)(G=z[F]).dimensions=G.base.dimensions;for(var W in U)if(U.hasOwnProperty(W)){var G=z[U[W]],Y={};for(var F in G)G.hasOwnProperty(F)&&(Y[F]=G[F]);Y.name=W,z[W]=Y}return T.createUnit=function(t,e){if("object"!=typeof t)throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(e&&e.override)for(var n in t)if(t.hasOwnProperty(n)&&T.deleteUnit(n),t[n].aliases)for(var r=0;r<t[n].aliases.length;r++)T.deleteUnit(t[n].aliases[r]);var i;for(var n in t)t.hasOwnProperty(n)&&(i=T.createUnitSingle(n,t[n]));return i},T.createUnitSingle=function(t,e,n){if(void 0!==e&&null!==e||(e={}),"string"!=typeof t)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(z.hasOwnProperty(t))throw new Error('Cannot create unit "'+t+'": a unit with that name already exists');!function(t){for(var e=0;e<t.length;e++){var n=t.charAt(e),r=function(t){return/^[a-zA-Z]$/.test(t)};if(0===e&&!r(n))throw new Error('Invalid unit name (must begin with alpha character): "'+t+'"');if(e>0&&!r(n)&&!function(t){return t>="0"&&t<="9"}(n))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+t+'"')}}(t);var r,i,o=null,a=[],s=0;if(e&&"Unit"===e.type)o=e.clone();else if("string"==typeof e)""!==e&&(r=e);else{if("object"!=typeof e)throw new TypeError('Cannot create unit "'+t+'" from "'+e.toString()+'": expecting "string" or "Unit" or "Object"');r=e.definition,i=e.prefixes,s=e.offset,e.aliases&&(a=e.aliases.valueOf())}if(a)for(var l=0;l<a.length;l++)if(z.hasOwnProperty(a[l]))throw new Error('Cannot create alias "'+a[l]+'": a unit with that name already exists');if(r&&"string"==typeof r&&!o)try{o=T.parse(r,{allowNoUnits:!0})}catch(e){throw e.message='Could not create unit "'+t+'" from "'+r+'": '+e.message,e}else r&&"Unit"===r.type&&(o=r.clone());a=a||[],s=s||0,i=i&&i.toUpperCase&&R[i.toUpperCase()]||R.NONE;var c={};if(o){c={name:t,value:o.value,dimensions:o.dimensions.slice(0),prefixes:i,offset:s};var u=!1;for(var l in j)if(j.hasOwnProperty(l)){for(var d=!0,f=0;f<B.length;f++)if(Math.abs((c.dimensions[f]||0)-(j[l].dimensions[f]||0))>1e-12){d=!1;break}if(d){u=!0;break}}u||(p=t+"_STUFF",(g={dimensions:o.dimensions.slice(0)}).key=p,j[p]=g,H[p]={unit:c,prefix:R.NONE[""]},c.base=p)}else{var p=t+"_STUFF";if(B.indexOf(p)>=0)throw new Error('Cannot create new base unit "'+t+'": a base unit with that name already exists (and cannot be overridden)');for(var h in B.push(p),j)j.hasOwnProperty(h)&&(j[h].dimensions[B.length-1]=0);var g={dimensions:[]};for(l=0;l<B.length;l++)g.dimensions[l]=0;g.dimensions[B.length-1]=1,g.key=p,j[p]=g,c={name:t,value:1,dimensions:j[p].dimensions.slice(0),prefixes:i,offset:s,base:p},H[p]={unit:c,prefix:R.NONE[""]}}for(T.UNITS[t]=c,l=0;l<a.length;l++){var m=a[l],v={};for(var y in c)c.hasOwnProperty(y)&&(v[y]=c[y]);v.name=m,T.UNITS[m]=v}return new T(null,t)},T.deleteUnit=function(t){delete T.UNITS[t]},T.PREFIXES=R,T.BASE_DIMENSIONS=B,T.BASE_UNITS=j,T.UNIT_SYSTEMS=V,T.UNITS=z,T},e.math=!0},function(t,e,n){"use strict";var r=n(9);e.name="unit",e.factory=function(t,e,n,i){var o=i("unit",{Unit:function(t){return t.clone()},string:function(e){return t.Unit.isValuelessUnit(e)?new t.Unit(null,e):t.Unit.parse(e)},"number | BigNumber | Fraction | Complex, string":function(e,n){return new t.Unit(e,n)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},o}},function(t,e,n){"use strict";n(9);e.name="createUnit",e.factory=function(t,e,n,r){return r("createUnit",{"Object, Object":function(e,n){return t.Unit.createUnit(e,n)},Object:function(e){return t.Unit.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,n,r){var i={};return i[e]=n,t.Unit.createUnit(i,r)},"string, Unit | string | Object":function(e,n){var r={};return r[e]=n,t.Unit.createUnit(r,{})},string:function(e){var n={};return n[e]={},t.Unit.createUnit(n,{})}})}},function(t,e,n){"use strict";n(9);e.name="splitUnit",e.factory=function(t,e,n,r){return r("splitUnit",{"Unit, Array":function(t,e){return t.splitUnit(e)}})}},function(t,e,n){var r=n(28).lazy;function i(t,e,n){r(t,e,n),r(t.expression.mathWithTransform,e,n)}e.factory=function(t,e,n,r,o){function a(e){var n=t.Unit.parse(e);return n.fixPrefix=!0,n}i(o,"speedOfLight",function(){return a("299792458 m s^-1")}),i(o,"gravitationConstant",function(){return a("6.6738480e-11 m^3 kg^-1 s^-2")}),i(o,"planckConstant",function(){return a("6.626069311e-34 J s")}),i(o,"reducedPlanckConstant",function(){return a("1.05457172647e-34 J s")}),i(o,"magneticConstant",function(){return a("1.2566370614e-6 N A^-2")}),i(o,"electricConstant",function(){return a("8.854187817e-12 F m^-1")}),i(o,"vacuumImpedance",function(){return a("376.730313461 ohm")}),i(o,"coulomb",function(){return a("8.9875517873681764e9 N m^2 C^-2")}),i(o,"elementaryCharge",function(){return a("1.60217656535e-19 C")}),i(o,"bohrMagneton",function(){return a("9.2740096820e-24 J T^-1")}),i(o,"conductanceQuantum",function(){return a("7.748091734625e-5 S")}),i(o,"inverseConductanceQuantum",function(){return a("12906.403721742 ohm")}),i(o,"magneticFluxQuantum",function(){return a("2.06783375846e-15 Wb")}),i(o,"nuclearMagneton",function(){return a("5.0507835311e-27 J T^-1")}),i(o,"klitzing",function(){return a("25812.807443484 ohm")}),i(o,"bohrRadius",function(){return a("5.291772109217e-11 m")}),i(o,"classicalElectronRadius",function(){return a("2.817940326727e-15 m")}),i(o,"electronMass",function(){return a("9.1093829140e-31 kg")}),i(o,"fermiCoupling",function(){return a("1.1663645e-5 GeV^-2")}),i(o,"fineStructure",function(){return.007297352569824}),i(o,"hartreeEnergy",function(){return a("4.3597443419e-18 J")}),i(o,"protonMass",function(){return a("1.67262177774e-27 kg")}),i(o,"deuteronMass",function(){return a("3.3435830926e-27 kg")}),i(o,"neutronMass",function(){return a("1.6749271613e-27 kg")}),i(o,"quantumOfCirculation",function(){return a("3.636947552024e-4 m^2 s^-1")}),i(o,"rydberg",function(){return a("10973731.56853955 m^-1")}),i(o,"thomsonCrossSection",function(){return a("6.65245873413e-29 m^2")}),i(o,"weakMixingAngle",function(){return.222321}),i(o,"efimovFactor",function(){return 22.7}),i(o,"atomicMass",function(){return a("1.66053892173e-27 kg")}),i(o,"avogadro",function(){return a("6.0221412927e23 mol^-1")}),i(o,"boltzmann",function(){return a("1.380648813e-23 J K^-1")}),i(o,"faraday",function(){return a("96485.336521 C mol^-1")}),i(o,"firstRadiation",function(){return a("3.7417715317e-16 W m^2")}),i(o,"loschmidt",function(){return a("2.686780524e25 m^-3")}),i(o,"gasConstant",function(){return a("8.314462175 J K^-1 mol^-1")}),i(o,"molarPlanckConstant",function(){return a("3.990312717628e-10 J s mol^-1")}),i(o,"molarVolume",function(){return a("2.241396820e-10 m^3 mol^-1")}),i(o,"sackurTetrode",function(){return-1.164870823}),i(o,"secondRadiation",function(){return a("1.438777013e-2 m K")}),i(o,"stefanBoltzmann",function(){return a("5.67037321e-8 W m^-2 K^-4")}),i(o,"wienDisplacement",function(){return a("2.897772126e-3 m K")}),i(o,"molarMass",function(){return a("1e-3 kg mol^-1")}),i(o,"molarMassC12",function(){return a("1.2e-2 kg mol^-1")}),i(o,"gravity",function(){return a("9.80665 m s^-2")}),i(o,"planckLength",function(){return a("1.61619997e-35 m")}),i(o,"planckMass",function(){return a("2.1765113e-8 kg")}),i(o,"planckTime",function(){return a("5.3910632e-44 s")}),i(o,"planckCharge",function(){return a("1.87554595641e-18 C")}),i(o,"planckTemperature",function(){return a("1.41683385e+32 K")})},e.lazy=!1,e.math=!0},function(t,e,n){"use strict";var r=n(28),i=n(727);function o(t,e,n){t[e]=n,t.expression.mathWithTransform[e]=n}function a(t,e,n){r.lazy(t,e,n),r.lazy(t.expression.mathWithTransform,e,n)}e.factory=function t(e,r,s,l,c){c.on("config",function(n,i){n.number!==i.number&&t(e,r,s,l,c)}),o(c,"true",!0),o(c,"false",!1),o(c,"null",null),o(c,"uninitialized",n(11).UNINITIALIZED),"BigNumber"===r.number?(o(c,"Infinity",new e.BigNumber(1/0)),o(c,"NaN",new e.BigNumber(NaN)),a(c,"pi",function(){return i.pi(e.BigNumber)}),a(c,"tau",function(){return i.tau(e.BigNumber)}),a(c,"e",function(){return i.e(e.BigNumber)}),a(c,"phi",function(){return i.phi(e.BigNumber)}),a(c,"E",function(){return c.e}),a(c,"LN2",function(){return new e.BigNumber(2).ln()}),a(c,"LN10",function(){return new e.BigNumber(10).ln()}),a(c,"LOG2E",function(){return new e.BigNumber(1).div(new e.BigNumber(2).ln())}),a(c,"LOG10E",function(){return new e.BigNumber(1).div(new e.BigNumber(10).ln())}),a(c,"PI",function(){return c.pi}),a(c,"SQRT1_2",function(){return new e.BigNumber("0.5").sqrt()}),a(c,"SQRT2",function(){return new e.BigNumber(2).sqrt()})):(o(c,"Infinity",1/0),o(c,"NaN",NaN),o(c,"pi",Math.PI),o(c,"tau",2*Math.PI),o(c,"e",Math.E),o(c,"phi",1.618033988749895),o(c,"E",c.e),o(c,"LN2",Math.LN2),o(c,"LN10",Math.LN10),o(c,"LOG2E",Math.LOG2E),o(c,"LOG10E",Math.LOG10E),o(c,"PI",c.pi),o(c,"SQRT1_2",Math.SQRT1_2),o(c,"SQRT2",Math.SQRT2)),o(c,"i",e.Complex.I),o(c,"version",n(1391))},e.lazy=!1,e.math=!0},function(t,e){t.exports="3.20.2"},function(t,e,n){t.exports=[n(731),n(1585),n(1590),n(1592),n(1603),n(219),n(744)]},function(t,e){t.exports={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]}},function(t,e){t.exports={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]}},function(t,e){t.exports={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]}},function(t,e){t.exports={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]}},function(t,e){t.exports={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]}},function(t,e){t.exports={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]}},function(t,e){t.exports={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]}},function(t,e){t.exports={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]}},function(t,e){t.exports={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]}},function(t,e){t.exports={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]}},function(t,e){t.exports={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]}},function(t,e){t.exports={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]}},function(t,e){t.exports={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]}},function(t,e){t.exports={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]}},function(t,e){t.exports={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]}},function(t,e){t.exports={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]}},function(t,e){t.exports={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]}},function(t,e){t.exports={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]}},function(t,e){t.exports={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]}},function(t,e){t.exports={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]}},function(t,e){t.exports={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]}},function(t,e){t.exports={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]}},function(t,e){t.exports={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]}},function(t,e){t.exports={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]}},function(t,e){t.exports={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]}},function(t,e){t.exports={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]}},function(t,e){t.exports={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]}},function(t,e){t.exports={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.eval({x: 3})"],seealso:["simplify","parse","eval"]}},function(t,e){t.exports={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lup","lusolve","usolve","matrix","sparse"]}},function(t,e){t.exports={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]}},function(t,e){t.exports={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]}},function(t,e){t.exports={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.eval({x: 2})"],seealso:["derivative","parse","eval"]}},function(t,e){t.exports={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]}},function(t,e){t.exports={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]}},function(t,e){t.exports={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["lup","lusolve","lsolve","matrix","sparse"]}},function(t,e){t.exports={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]}},function(t,e){t.exports={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]}},function(t,e){t.exports={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]}},function(t,e){t.exports={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]}},function(t,e){t.exports={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]}},function(t,e){t.exports={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]}},function(t,e){t.exports={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]}},function(t,e){t.exports={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]}},function(t,e){t.exports={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]}},function(t,e){t.exports={name:"dotpow",category:"Operators",syntax:["x .^ y","dotpow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]}},function(t,e){t.exports={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["pow","log"]}},function(t,e){t.exports={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]}},function(t,e){t.exports={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]}},function(t,e){t.exports={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]}},function(t,e){t.exports={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]}},function(t,e){t.exports={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]}},function(t,e){t.exports={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log10"]}},function(t,e){t.exports={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]}},function(t,e){t.exports={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]}},function(t,e){t.exports={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]}},function(t,e){t.exports={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']}},function(t,e){t.exports={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["sqrt","pow"]}},function(t,e){t.exports={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply"]}},function(t,e){t.exports={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]}},function(t,e){t.exports={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]}},function(t,e){t.exports={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","multiply"]}},function(t,e){t.exports={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]}},function(t,e){t.exports={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]}},function(t,e){t.exports={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]}},function(t,e){t.exports={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]}},function(t,e){t.exports={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]}},function(t,e){t.exports={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(t,e){t.exports={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(t,e){t.exports={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]}},function(t,e){t.exports={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]}},function(t,e){t.exports={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]}},function(t,e){t.exports={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]}},function(t,e){t.exports={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]}},function(t,e){t.exports={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]}},function(t,e){t.exports={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]}},function(t,e){t.exports={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]}},function(t,e){t.exports={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]}},function(t,e){t.exports={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]}},function(t,e){t.exports={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]}},function(t,e){t.exports={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]}},function(t,e){t.exports={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]}},function(t,e){t.exports={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]}},function(t,e){t.exports={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]}},function(t,e){t.exports={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]}},function(t,e){t.exports={name:"eval",category:"Expression",syntax:["eval(expression)","eval([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['eval("2 + 3")','eval("sqrt(" + 4 + ")")'],seealso:[]}},function(t,e){t.exports={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]}},function(t,e){t.exports={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]}},function(t,e){t.exports={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]}},function(t,e){t.exports={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]}},function(t,e){t.exports={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]}},function(t,e){t.exports={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]}},function(t,e){t.exports={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]}},function(t,e){t.exports={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]}},function(t,e){t.exports={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","eye","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]}},function(t,e){t.exports={name:"eye",category:"Matrix",syntax:["eye(n)","eye(m, n)","eye([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["eye(3)","eye(3, 5)","a = [1, 2, 3; 4, 5, 6]","eye(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]}},function(t,e){t.exports={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]}},function(t,e){t.exports={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]}},function(t,e){t.exports={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","eye","ones","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]}},function(t,e){t.exports={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]}},function(t,e){t.exports={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","eye","inv","range","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]}},function(t,e){t.exports={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","eye","inv","ones","size","squeeze","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]}},function(t,e){t.exports={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]}},function(t,e){t.exports={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","eye","inv","ones","range","squeeze","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]}},function(t,e){t.exports={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","eye","inv","ones","range","size","subset","trace","transpose","zeros"]}},function(t,e){t.exports={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","trace","transpose","zeros"]}},function(t,e){t.exports={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","transpose","zeros"]}},function(t,e){t.exports={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","trace","zeros"]}},function(t,e){t.exports={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","subset","trace","transpose"]}},function(t,e){t.exports={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["permutations","factorial"]}},function(t,e){t.exports={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","permutations","gamma"]}},function(t,e){t.exports={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]}},function(t,e){t.exports={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]}},function(t,e){t.exports={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]}},function(t,e){t.exports={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","factorial"]}},function(t,e){t.exports={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]}},function(t,e){t.exports={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]}},function(t,e){t.exports={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]}},function(t,e){t.exports={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 if x is larger than y, -1 if x is smaller than y, and 0 if x and y are equal.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural"]}},function(t,e){t.exports={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]}},function(t,e){t.exports={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]}},function(t,e){t.exports={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}},function(t,e){t.exports={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]}},function(t,e){t.exports={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]}},function(t,e){t.exports={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]}},function(t,e){t.exports={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]}},function(t,e){t.exports={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]}},function(t,e){t.exports={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]}},function(t,e){t.exports={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]}},function(t,e){t.exports={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]}},function(t,e){t.exports={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]}},function(t,e){t.exports={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]}},function(t,e){t.exports={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]}},function(t,e){t.exports={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]}},function(t,e){t.exports={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]}},function(t,e){t.exports={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]}},function(t,e){t.exports={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]}},function(t,e){t.exports={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]}},function(t,e){t.exports={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]}},function(t,e){t.exports={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","var"]}},function(t,e){t.exports={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","var"]}},function(t,e){t.exports={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","var","quantileSeq"]}},function(t,e){t.exports={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","var"]}},function(t,e){t.exports={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","var"]}},function(t,e){t.exports={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","var"]}},function(t,e){t.exports={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","var"]}},function(t,e){t.exports={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(var(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","sum","var"]}},function(t,e){t.exports={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","var"]}},function(t,e){t.exports={name:"var",category:"Statistics",syntax:["var(a, b, c, ...)","var(A)","var(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["var(2, 4, 6)","var([2, 4, 6, 8])",'var([2, 4, 6, 8], "uncorrected")','var([2, 4, 6, 8], "biased")',"var([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]}},function(t,e){t.exports={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]}},function(t,e){t.exports={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]}},function(t,e){t.exports={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]}},function(t,e){t.exports={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]}},function(t,e){t.exports={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]}},function(t,e){t.exports={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]}},function(t,e){t.exports={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]}},function(t,e){t.exports={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]}},function(t,e){t.exports={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]}},function(t,e){t.exports={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]}},function(t,e){t.exports={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]}},function(t,e){t.exports={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]}},function(t,e){t.exports={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]}},function(t,e){t.exports={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]}},function(t,e){t.exports={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]}},function(t,e){t.exports={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]}},function(t,e){t.exports={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]}},function(t,e){t.exports={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]}},function(t,e){t.exports={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]}},function(t,e){t.exports={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]}},function(t,e){t.exports={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]}},function(t,e){t.exports={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]}},function(t,e){t.exports={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]}},function(t,e){t.exports={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]}},function(t,e){t.exports={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]}},function(t,e){t.exports={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]}},function(t,e){t.exports={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]}},function(t,e){t.exports={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]}},function(t,e){t.exports={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]}},function(t,e){t.exports={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]}},function(t,e){t.exports={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]}},function(t,e){t.exports={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)","isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))",'isNumeric("3")',"isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN"]}},function(t,e){t.exports={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}},function(t,e){t.exports={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]}},function(t,e){t.exports={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]}},function(t,e){t.exports={name:"typeof",category:"Utils",syntax:["typeof(x)"],description:"Get the type of a variable.",examples:["typeof(3.5)","typeof(2 - 4i)","typeof(45 deg)",'typeof("hello world")'],seealso:[]}},function(t,e,n){t.exports=[n(1586),n(1588),n(1589),n(742),n(743)]},function(t,e,n){"use strict";var r=n(9);e.name="compile",e.factory=function(t,e,i,o){var a=i(n(219));return o("compile",{string:function(t){return a(t).compile()},"Array | Matrix":function(t){return r(t,function(t){return a(t).compile()})}})}},function(t,e,n){"use strict";var r=n(220).transform,i=n(81).setSafeProperty;e.factory=function(t,e,o,a){var s=o(n(112)),l=o(n(7));return function(t,e,n){try{if(Array.isArray(t))return l(t).subset(e,n).valueOf();if(t&&"function"==typeof t.subset)return t.subset(e,n);if("string"==typeof t)return s(t,e,n);if("object"==typeof t){if(!e.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return i(t,e.getObjectProperty(),n),t}throw new TypeError("Cannot apply index: unsupported type of object")}catch(t){throw r(t)}}}},function(t,e,n){"use strict";var r=n(9);e.name="eval",e.factory=function(t,e,i,o){var a=i(n(219));return o("compile",{string:function(t){return a(t).compile().eval({})},"string, Object":function(t,e){return a(t).compile().eval(e)},"Array | Matrix":function(t){var e={};return r(t,function(t){return a(t).compile().eval(e)})},"Array | Matrix, Object":function(t,e){return r(t,function(t){return a(t).compile().eval(e)})}})}},function(t,e,n){"use strict";var r=n(81).getSafeProperty;e.math=!0,e.name="help",e.factory=function(t,e,i,o,a){var s=i(n(731));return o("help",{any:function(e){var n,i=e;if("string"!=typeof e)for(n in a)if(a.hasOwnProperty(n)&&e===a[n]){i=n;break}var o=r(s,i);if(!o)throw new Error('No documentation found on "'+i+'"');return new t.Help(o)}})}},function(t,e,n){t.exports=[n(734),n(524),n(736),n(737),n(738),n(254),n(522),n(739),n(314),n(83),n(741),n(313),n(386),n(523),n(186),n(1591)]},function(t,e,n){"use strict";e.name="UpdateNode",e.path="expression.node",e.factory=function(t,e,n,r){return function(){throw new Error("UpdateNode is deprecated. Use AssignmentNode instead.")}}},function(t,e,n){t.exports=[n(1593),n(1594),n(1595),n(1596),n(1597),n(1598),n(1599),n(1600),n(1601),n(1602)]},function(t,e,n){"use strict";var r=n(220).transform;e.name="concat",e.path="expression.transform",e.factory=function(t,e,i,o){var a=i(n(387));return o("concat",{"...any":function(e){var n=e.length-1,i=e[n];t.isNumber(i)?e[n]=i-1:t.isBigNumber(i)&&(e[n]=i.minus(1));try{return a.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(11).filter,i=n(11).filterRegExp,o=n(182).maxArgumentCount;function a(t,e){var n=o(e);return r(t,function(t,r,i){return 1===n?e(t):2===n?e(t,[r+1]):e(t,[r+1],i)})}e.name="filter",e.path="expression.transform",e.factory=function(t,e,r,o){var s=r(n(525)),l=r(n(7));function c(e,n,r){var i,o;return e[0]&&(i=e[0].compile().eval(r)),e[1]&&(o=t.isSymbolNode(e[1])||t.isFunctionAssignmentNode(e[1])?e[1].compile().eval(r):s(e[1],n,r)),u(i,o)}c.rawArgs=!0;var u=o("filter",{"Array, function":a,"Matrix, function":function(t,e){return l(a(t.toArray(),e))},"Array, RegExp":i,"Matrix, RegExp":function(t,e){return l(i(t.toArray(),e))}});return u.toTex=void 0,c}},function(t,e,n){"use strict";var r=n(182).maxArgumentCount,i=n(11).forEach;e.name="forEach",e.path="expression.transform",e.factory=function(t,e,o,a){var s=o(n(525));function l(e,n,r){var i,o;return e[0]&&(i=e[0].compile().eval(r)),e[1]&&(o=t.isSymbolNode(e[1])||t.isFunctionAssignmentNode(e[1])?e[1].compile().eval(r):s(e[1],n,r)),c(i,o)}l.rawArgs=!0;var c=a("forEach",{"Array | Matrix, function":function(t,e){var n=r(e),o=function(r,a){Array.isArray(r)?i(r,function(t,e){o(t,a.concat(e+1))}):1===n?e(r):2===n?e(r,a):e(r,a,t)};o(t.valueOf(),[])}});return l}},function(t,e,n){"use strict";e.name="index",e.path="expression.transform",e.factory=function(t,e,n){return function(){for(var e=[],n=0,r=arguments.length;n<r;n++){var i=arguments[n];if(t.isRange(i))i.start--,i.end-=i.step>0?0:2;else if(i&&!0===i.isSet)i=i.map(function(t){return t-1});else if(t.isArray(i)||t.isMatrix(i))i=i.map(function(t){return t-1});else if(t.isNumber(i))i--;else if(t.isBigNumber(i))i=i.toNumber()-1;else if("string"!=typeof i)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[n]=i}var o=new t.Index;return t.Index.apply(o,e),o}}},function(t,e,n){"use strict";var r=n(182).maxArgumentCount,i=n(11).map;function o(t,e,n){var o=r(e);return function t(r,a){return Array.isArray(r)?i(r,function(e,n){return t(e,a.concat(n+1))}):1===o?e(r):2===o?e(r,a):e(r,a,n)}(t,[])}e.name="map",e.path="expression.transform",e.factory=function(t,e,r,i){var a=r(n(525)),s=r(n(7));function l(e,n,r){var i,o;return e[0]&&(i=e[0].compile().eval(r)),e[1]&&(o=t.isSymbolNode(e[1])||t.isFunctionAssignmentNode(e[1])?e[1].compile().eval(r):a(e[1],n,r)),c(i,o)}l.rawArgs=!0;var c=i("map",{"Array, function":function(t,e){return o(t,e,t)},"Matrix, function":function(t,e){return s(o(t.valueOf(),e,t))}});return l}},function(t,e,n){"use strict";var r=n(220).transform,i=n(255);e.name="max",e.path="expression.transform",e.factory=function(t,e,o,a){var s=o(n(745));return a("max",{"...any":function(e){if(2==e.length&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return s.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(220).transform,i=n(255);e.name="mean",e.path="expression.transform",e.factory=function(t,e,o,a){var s=o(n(746));return a("mean",{"...any":function(e){if(2==e.length&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return s.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(220).transform,i=n(255);e.name="min",e.path="expression.transform",e.factory=function(t,e,o,a){var s=o(n(749));return a("min",{"...any":function(e){if(2==e.length&&i(e[0])){var n=e[1];t.isNumber(n)?e[1]=n-1:t.isBigNumber(n)&&(e[1]=n.minus(1))}try{return s.apply(null,e)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";e.name="range",e.path="expression.transform",e.factory=function(t,e,r,i){var o=r(n(750));return i("range",{"...any":function(t){return"boolean"!=typeof t[t.length-1]&&t.push(!0),o.apply(null,t)}})}},function(t,e,n){"use strict";var r=n(220).transform;e.name="subset",e.path="expression.transform",e.factory=function(t,e,i,o){var a=i(n(112));return o("subset",{"...any":function(t){try{return a.apply(null,t)}catch(t){throw r(t)}}})}},function(t,e,n){"use strict";var r=n(28),i=n(45);e.name="Help",e.path="type",e.factory=function(t,e,o,a){var s=o(n(743))();function l(t){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");if(!t)throw new Error('Argument "doc" missing');this.doc=t}return l.prototype.type="Help",l.prototype.isHelp=!0,l.prototype.toString=function(){var e=this.doc||{},n="\n";if(e.name&&(n+="Name: "+e.name+"\n\n"),e.category&&(n+="Category: "+e.category+"\n\n"),e.description&&(n+="Description:\n    "+e.description+"\n\n"),e.syntax&&(n+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){n+="Examples:\n";for(var r=0;r<e.examples.length;r++){var o,a=e.examples[r];n+="    "+a+"\n";try{o=s.eval(a)}catch(t){o=t}void 0===o||t.isHelp(o)||(n+="        "+i.format(o,{precision:14})+"\n")}n+="\n"}return e.seealso&&e.seealso.length&&(n+="See also: "+e.seealso.join(", ")+"\n"),n},l.prototype.toJSON=function(){var t=r.clone(this.doc);return t.mathjs="Help",t},l.fromJSON=function(t){var e={};for(var n in t)"mathjs"!==n&&(e[n]=t[n]);return new l(e)},l.prototype.valueOf=l.prototype.toString,l}},function(t,e,n){t.exports=[n(1605),n(1625),n(1644),n(1657),n(1661),n(1665),n(1668),n(1672),n(1684),n(1692),n(1695),n(1703),n(1705),n(1711),n(1713),n(1738),n(1740)]},function(t,e,n){t.exports=[n(1606),n(526),n(1608),n(1609),n(758),n(759),n(764),n(1623),n(765)]},function(t,e,n){"use strict";e.name="derivative",e.factory=function(t,e,r,i){var o=r(n(219)),a=r(n(526)),s=r(n(254)),l=r(n(314)),c=r(n(313)),u=r(n(386)),d=r(n(186)),f=i("derivative",{"Node, SymbolNode, Object":function(t,e,n){var r={};h(r,t,e.name);var i=g(t,r);return n.simplify?a(i):i},"Node, SymbolNode":function(t,e){return f(t,e,{simplify:!0})},"string, SymbolNode":function(t,e){return f(o(t),e)},"string, SymbolNode, Object":function(t,e,n){return f(o(t),e,n)},"string, string":function(t,e){return f(o(t),o(e))},"string, string, Object":function(t,e,n){return f(o(t),o(e),n)},"Node, string":function(t,e){return f(t,o(e))},"Node, string, Object":function(t,e,n){return f(t,o(e),n)}});f._simplify=!0,f.toTex=function(t){return p.apply(null,t.args)};var p=i("_derivTex",{"Node, SymbolNode":function(t,e){return p(t.toString(),e.toString(),1)},"Node, SymbolNode, ConstantNode":function(t,e,n){return p(t.toString(),e.name,n.value)},"string, string, number":function(t,e,n){return(1===n?"{d\\over d"+e+"}":"{d^{"+n+"}\\over d"+e+"^{"+n+"}}")+"\\left["+t+"\\right]"}}),h=i("constTag",{"Object, ConstantNode, string":function(t,e){return t[e]=!0},"Object, SymbolNode, string":function(t,e,n){return e.name!=n&&(t[e]=!0)},"Object, ParenthesisNode, string":function(t,e,n){return h(t,e.content,n)},"Object, FunctionAssignmentNode, string":function(t,e,n){return-1==e.params.indexOf(n)?t[e]=!0:h(t,e.expr,n)},"Object, FunctionNode | OperatorNode, string":function(t,e,n){if(0!=e.args.length){for(var r=h(t,e.args[0],n),i=1;i<e.args.length;++i)r=h(t,e.args[i],n)&&r;if(r)return t[e]=!0}return!1}}),g=i("_derivative",{"ConstantNode, Object":function(t){return new s("0",t.valueType)},"SymbolNode, Object":function(t,n){return void 0!==n[t]?new s("0",e.number):new s("1",e.number)},"ParenthesisNode, Object":function(t,e){return new u(g(t.content,e))},"FunctionAssignmentNode, Object":function(t,n){return void 0!==n[t]?new s("0",e.number):g(t.expr,n)},"FunctionNode, Object":function(t,n){if(1!=t.args.length&&function(t){if("log"!=t.name&&"nthRoot"!=t.name||2!=t.args.length){for(var e=0;e<t.args.length;++e)t.args[e]=new s(0);throw t.compile().eval(),new Error("Expected TypeError, but none found")}}(t),void 0!==n[t])return new s("0",e.number);var r,i,o,a,u=t.args[0],f=!1,p=!1;switch(t.name){case"cbrt":f=!0,i=new c("*","multiply",[new s("3",e.number),new c("^","pow",[u,new c("/","divide",[new s("2",e.number),new s("3",e.number)])])]);break;case"sqrt":case"nthRoot":if(1==t.args.length){f=!0,i=new c("*","multiply",[new s("2",e.number),new l("sqrt",[u])]);break}return n[r=new c("/","divide",[new s("1",e.number),t.args[1]])]=n[t.args[1]],g(new c("^","pow",[u,r]),n);case"log10":r=new s("10",e.number);case"log":if(r||1!=t.args.length){if(!r&&void 0===n[t.args[1]])return g(new c("/","divide",[new l("log",[u]),new l("log",[t.args[1]])]),n);i=new c("*","multiply",[u.clone(),new l("log",[r||t.args[1]])])}else i=u.clone();f=!0;break;case"exp":i=new l("exp",[u.clone()]);break;case"sin":i=new l("cos",[u.clone()]);break;case"cos":i=new c("-","unaryMinus",[new l("sin",[u.clone()])]);break;case"tan":i=new c("^","pow",[new l("sec",[u.clone()]),new s("2",e.number)]);break;case"sec":i=new c("*","multiply",[t,new l("tan",[u.clone()])]);break;case"csc":p=!0,i=new c("*","multiply",[t,new l("cot",[u.clone()])]);break;case"cot":p=!0,i=new c("^","pow",[new l("csc",[u.clone()]),new s("2",e.number)]);break;case"asin":f=!0,i=new l("sqrt",[new c("-","subtract",[new s("1",e.number),new c("^","pow",[u.clone(),new s("2",e.number)])])]);break;case"acos":f=!0,p=!0,i=new l("sqrt",[new c("-","subtract",[new s("1",e.number),new c("^","pow",[u.clone(),new s("2",e.number)])])]);break;case"atan":f=!0,i=new c("+","add",[new c("^","pow",[u.clone(),new s("2",e.number)]),new s("1",e.number)]);break;case"asec":f=!0,i=new c("*","multiply",[new l("abs",[u.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[u.clone(),new s("2",e.number)]),new s("1",e.number)])])]);break;case"acsc":f=!0,p=!0,i=new c("*","multiply",[new l("abs",[u.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[u.clone(),new s("2",e.number)]),new s("1",e.number)])])]);break;case"acot":f=!0,p=!0,i=new c("+","add",[new c("^","pow",[u.clone(),new s("2",e.number)]),new s("1",e.number)]);break;case"sinh":i=new l("cosh",[u.clone()]);break;case"cosh":i=new l("sinh",[u.clone()]);break;case"tanh":i=new c("^","pow",[new l("sech",[u.clone()]),new s("2",e.number)]);break;case"sech":p=!0,i=new c("*","multiply",[t,new l("tanh",[u.clone()])]);break;case"csch":p=!0,i=new c("*","multiply",[t,new l("coth",[u.clone()])]);break;case"coth":p=!0,i=new c("^","pow",[new l("csch",[u.clone()]),new s("2",e.number)]);break;case"asinh":f=!0,i=new l("sqrt",[new c("+","add",[new c("^","pow",[u.clone(),new s("2",e.number)]),new s("1",e.number)])]);break;case"acosh":f=!0,i=new l("sqrt",[new c("-","subtract",[new c("^","pow",[u.clone(),new s("2",e.number)]),new s("1",e.number)])]);break;case"atanh":f=!0,i=new c("-","subtract",[new s("1",e.number),new c("^","pow",[u.clone(),new s("2",e.number)])]);break;case"asech":f=!0,p=!0,i=new c("*","multiply",[u.clone(),new l("sqrt",[new c("-","subtract",[new s("1",e.number),new c("^","pow",[u.clone(),new s("2",e.number)])])])]);break;case"acsch":f=!0,p=!0,i=new c("*","multiply",[new l("abs",[u.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[u.clone(),new s("2",e.number)]),new s("1",e.number)])])]);break;case"acoth":f=!0,p=!0,i=new c("-","subtract",[new s("1",e.number),new c("^","pow",[u.clone(),new s("2",e.number)])]);break;case"abs":i=new c("/","divide",[new l(new d("abs"),[u.clone()]),u.clone()]);break;case"gamma":default:throw new Error('Function "'+t.name+'" not supported by derivative')}f?(o="/",a="divide"):(o="*",a="multiply");var h=g(u,n);return p&&(h=new c("-","unaryMinus",[h])),new c(o,a,[h,i])},"OperatorNode, Object":function(n,r){if(void 0!==r[n])return new s("0",e.number);var i=n.args[0],o=n.args[1];switch(n.op){case"+":return new c(n.op,n.fn,n.args.map(function(t){return g(t,r)}));case"-":return 1==n.args.length?new c(n.op,n.fn,[g(i,r)]):new c(n.op,n.fn,[g(i,r),g(o,r)]);case"*":var a=n.args.filter(function(t){return void 0!==r[t]});if(a.length>0){var u=n.args.filter(function(t){return void 0===r[t]}),d=1===u.length?u[0]:new c("*","multiply",u),f=a.concat(g(d,r));return new c("*","multiply",f)}return new c("+","add",n.args.map(function(t){return new c("*","multiply",n.args.map(function(e){return e===t?g(e,r):e.clone()}))}));case"/":return void 0!==r[o]?new c("/","divide",[g(i,r),o]):void 0!==r[i]?new c("*","multiply",[new c("-","unaryMinus",[i]),new c("/","divide",[g(o,r),new c("^","pow",[o.clone(),new s("2",e.number)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[g(i,r),o.clone()]),new c("*","multiply",[i.clone(),g(o,r)])]),new c("^","pow",[o.clone(),new s("2",e.number)])]);case"^":if(void 0!==r[i])return!t.isConstantNode(i)||"0"!==i.value&&"1"!==i.value?new c("*","multiply",[n,new c("*","multiply",[new l("log",[i.clone()]),g(o.clone(),r)])]):new s("0",e.number);if(void 0!==r[o]){if(t.isConstantNode(o)){var p=o.value;if("0"===p)return new s("0",e.number);if("1"===p)return g(i,r)}var h=new c("^","pow",[i.clone(),new c("-","subtract",[o,new s("1",e.number)])]);return new c("*","multiply",[o.clone(),new c("*","multiply",[g(i,r),h])])}return new c("*","multiply",[new c("^","pow",[i.clone(),o.clone()]),new c("+","add",[new c("*","multiply",[g(i,r),new c("/","divide",[o.clone(),i.clone()])]),new c("*","multiply",[g(o,r),new l("log",[i.clone()])])])]);case"%":case"mod":default:throw new Error('Operator "'+n.op+'" not supported by derivative')}}});return f}},function(t,e,n){"use strict";e.math=!0,e.name="resolve",e.path="algebra.simplify",e.factory=function(t,e,n,r,i){var o=i.expression.node.Node,a=i.expression.node.OperatorNode,s=i.expression.node.FunctionNode,l=i.expression.node.ParenthesisNode;return function e(n,r){if(!r)return n;if(t.isSymbolNode(n)){var c=r[n.name];if(c instanceof o)return e(c,r);if("number"==typeof c)return i.parse(String(c))}else{if(t.isOperatorNode(n)){var u=n.args.map(function(t){return e(t,r)});return new a(n.op,n.fn,u)}if(t.isParenthesisNode(n))return new l(e(n.content,r));if(t.isFunctionNode(n))return u=n.args.map(function(t){return e(t,r)}),new s(n.name,u)}return n}}},function(t,e,n){"use strict";e.name="rationalize",e.factory=function(t,e,r,i){var o=r(n(526)),a=r(n(753)),s=r(n(751)),l=n(251),c=r(n(742)),u=n(13),d=r(n(254)),f=r(n(313)),p=r(n(186)),h=i("rationalize",{string:function(t){return h(c(t),{},!1)},"string, boolean":function(t,e){return h(c(t),{},e)},"string, Object":function(t,e){return h(c(t),e,!1)},"string, Object, boolean":function(t,e,n){return h(c(t),e,n)},Node:function(t){return h(t,{},!1)},"Node, boolean":function(t,e){return h(t,{},e)},"Node, Object":function(t,e){return h(t,e,!1)},"Node, Object, boolean":function(t,e,n){var r=function(t,e,n){var r=[],i=o(t,e),a="+-*"+((n=!!n)?"/":"");!function t(e){var n=e.type;if("FunctionNode"===n)throw new l("There is an unsolved function call");if("OperatorNode"===n)if("^"===e.op){if("ConstantNode"!==e.args[1].type||!u.isInteger(parseFloat(e.args[1].value)))throw new l("There is a non-integer exponent");t(e.args[0])}else{if(-1===a.indexOf(e.op))throw new l("Operator "+e.op+" invalid in polynomial expression");for(var i=0;i<e.args.length;i++)t(e.args[i])}else if("SymbolNode"===n){var o=e.name,s=r.indexOf(o);-1===s&&r.push(o)}else if("ParenthesisNode"===n)t(e.content);else if("ConstantNode"!==n)throw new l("type "+n+" is not allowed in polynomial expression")}(i);var s={};return s.expression=i,s.variables=r,s}(t,e,!0),i=r.variables.length;if(t=r.expression,i>=1){var c=function(){var t=[a,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},s,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],e=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],n=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],r={};return r.firstRules=t.concat(e,n),r.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],r.sucDivRules=n,r.firstRulesAgain=t.concat(e),r.finalRules=[a,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},s,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],r}();t=function t(e,n,r){var i=e.type,o=arguments.length>1;if("OperatorNode"===i){var a=!1;if("^"===e.op&&("ParenthesisNode"===e.args[0].type||"OperatorNode"===e.args[0].type)&&"ConstantNode"===e.args[1].type){var s=parseFloat(e.args[1].value);a=s>=2&&u.isInteger(s)}if(a){if(s>2){var l=e.args[0],c=new f("^","pow",[e.args[0].cloneDeep(),new d(s-1)]);e=new f("*","multiply",[l,c])}else e=new f("*","multiply",[e.args[0],e.args[0].cloneDeep()]);o&&("content"===r?n.content=e:n.args[r]=e)}}if("ParenthesisNode"===i)t(e.content,e,"content");else if("ConstantNode"!==i&&"SymbolNode"!==i)for(var p=0;p<e.args.length;p++)t(e.args[p],e,p);if(!o)return e}(t);var p,h,m=!0,v="",y=!0;for(v=(t=o(t,c.firstRules)).toString();h=y?c.distrDivRules:c.sucDivRules,y=!y,(v=(t=o(t,h)).toString())!==p;)m=!0,p=v;m&&(t=o(t,c.firstRulesAgain)),t=o(t,c.finalRules)}var b=[],w={};return"OperatorNode"===t.type&&"/"===t.op?(1==i&&(t.args[0]=g(t.args[0],b),t.args[1]=g(t.args[1])),n&&(w.numerator=t.args[0],w.denominator=t.args[1])):(1==i&&(t=g(t,b)),n&&(w.numerator=t,w.denominator=null)),n?(w.coefficients=b,w.variables=r.variables,w.expression=t,w):t}});function g(t,e){var n;void 0===e&&(e=[]),e[0]=0;var r={cte:1,oper:"+",fire:""},i=0,o="";!function t(n,r,a){var s=n.type;if("FunctionNode"===s)throw new l("There is an unsolved function call");if("OperatorNode"===s){if(-1==="+-*^".indexOf(n.op))throw new l("Operator "+n.op+" invalid");if(null!==r){if(("unaryMinus"===n.fn||"pow"===n.fn)&&"add"!==r.fn&&"subtract"!==r.fn&&"multiply"!==r.fn)throw new l("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"multiply"===n.fn)&&"add"!==r.fn&&"subtract"!==r.fn)throw new l("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"unaryMinus"===n.fn)&&0!==a.noFil)throw new l("Invalid "+n.op+" placing")}"^"!==n.op&&"*"!==n.op||(a.fire=n.op);for(var c=0;c<n.args.length;c++)"unaryMinus"===n.fn&&(a.oper="-"),"+"!==n.op&&"subtract"!==n.fn||(a.fire="",a.cte=1,a.oper=0===c?"+":n.op),a.noFil=c,t(n.args[c],n,a)}else if("SymbolNode"===s){if(n.name!==o&&""!==o)throw new l("There is more than one variable");if(o=n.name,null===r)return void(e[1]=1);if("^"===r.op&&0!==a.noFil)throw new l("In power the variable should be the first parameter");if("*"===r.op&&1!==a.noFil)throw new l("In multiply the variable should be the second parameter");""!==a.fire&&"*"!==a.fire||(i<1&&(e[1]=0),e[1]+=a.cte*("+"===a.oper?1:-1),i=Math.max(1,i))}else{if("ConstantNode"!==s)throw new l("Type "+s+" is not allowed");var d=parseFloat(n.value);if(null===r)return void(e[0]=d);if("^"===r.op){if(1!==a.noFil)throw new l("Constant cannot be powered");if(!u.isInteger(d)||d<=0)throw new l("Non-integer exponent is not allowed");for(var c=i+1;c<d;c++)e[c]=0;return d>i&&(e[d]=0),e[d]+=a.cte*("+"===a.oper?1:-1),void(i=Math.max(d,i))}a.cte=d,""===a.fire&&(e[0]+=a.cte*("+"===a.oper?1:-1))}}(t,null,r);var a=!0;for(n=i=e.length-1;n>=0;n--)if(0!==e[n]){var s,c=new d(a?e[n]:Math.abs(e[n])),h=e[n]<0?"-":"+";if(n>0){var g=new p(o);if(n>1){var m=new d(n);g=new f("^","pow",[g,m])}c=-1===e[n]&&a?new f("-","unaryMinus",[g]):1===Math.abs(e[n])?g:new f("*","multiply",[c,g])}s=a?c:"+"===h?new f("+","add",[s,c]):new f("-","subtract",[s,c]),a=!1}return a?new d(0):s}return h}},function(t,e,n){"use strict";e.name="qr",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(218)),s=r(n(385)),l=(r(n(754)),r(n(527))),c=(r(n(315)),r(n(755))),u=(r(n(145)),r(n(756))),d=r(n(257)),f=r(n(757)),p=r(n(185)),h=r(n(91)),g=r(n(82)),m=r(n(107)),v=r(n(106)),y=i("qr",{DenseMatrix:function(t){return b(t)},SparseMatrix:function(t){return w(t)},Array:function(t){var e=o(t),n=b(e);return{Q:n.Q.valueOf(),R:n.R.valueOf()}}}),b=function(t){var e,n,r,i=t._size[0],o=t._size[1],y=s([i],"dense"),b=y._data,w=t.clone(),_=w._data,x=a([i],"");for(r=0;r<Math.min(o,i);++r){var S=_[r][r],C=p(u(S)),E=f(C),T=0;for(e=r;e<i;e++)T=h(T,m(_[e][r],f(_[e][r])));var M=m(C,d(T));if(!l(M)){var k=v(S,M);for(x[r]=1,e=r+1;e<i;e++)x[e]=g(_[e][r],k);var A,I=p(f(g(k,M)));for(n=r;n<o;n++){for(A=0,e=r;e<i;e++)A=h(A,m(f(x[e]),_[e][n]));for(A=m(A,I),e=r;e<i;e++)_[e][n]=m(v(_[e][n],m(x[e],A)),E)}for(e=0;e<i;e++){for(A=0,n=r;n<i;n++)A=h(A,m(b[e][n],x[n]));for(A=m(A,I),n=r;n<i;++n)b[e][n]=g(v(b[e][n],m(A,f(x[n]))),E)}}}for(e=0;e<i;++e)for(n=0;n<e&&n<o;++n){if(c(0,g(_[e][n],1e5)))throw new Error("math.qr(): unknown error - R is not lower triangular (element ("+e+", "+n+")  = "+_[e][n]+")");_[e][n]=m(_[e][n],0)}return{Q:y,R:w,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}},w=function(t){throw new Error("qr not implemented for sparse matrices yet")};return y}},function(t,e,n){"use strict";e.name="cs_sqr",e.path="sparse",e.factory=function(t,e,r){var i=r(n(1611)),o=r(n(1613)),a=r(n(1614)),s=r(n(1615)),l=r(n(1616)),c=function(t,e){var n=t._ptr,r=t._index,i=t._size,o=i[0],a=i[1];e.pinv=[],e.leftmost=[];var s,l,c,u,d,f=e.parent,p=e.pinv,h=e.leftmost,g=[],m=o,v=o+a,y=o+2*a;for(l=0;l<a;l++)g[m+l]=-1,g[v+l]=-1,g[y+l]=0;for(s=0;s<o;s++)h[s]=-1;for(l=a-1;l>=0;l--)for(u=n[l],d=n[l+1],c=u;c<d;c++)h[r[c]]=l;for(s=o-1;s>=0;s--)p[s]=-1,-1!=(l=h[s])&&(0==g[y+l]++&&(g[v+l]=s),g[0+s]=g[m+l],g[m+l]=s);for(e.lnz=0,e.m2=o,l=0;l<a;l++)if(s=g[m+l],e.lnz++,s<0&&(s=e.m2++),p[s]=l,!(--y[l]<=0)){e.lnz+=g[y+l];var b=f[l];-1!=b&&(0===g[y+b]&&(g[v+b]=g[v+l]),g[0+g[v+l]]=g[m+b],g[m+b]=g[0+s],g[y+b]+=g[y+l])}for(s=0;s<o;s++)p[s]<0&&(p[s]=l++);return!0};return function(t,e,n){var r,u=e._ptr,d=e._size[1],f={};if(f.q=i(t,e),t&&!f.q)return null;if(n){var p=t?o(e,null,f.q,0):e;f.parent=a(p,1);var h=s(f.parent,d);if(f.cp=l(p,f.parent,h,1),p&&f.parent&&f.cp&&c(p,f))for(f.unz=0,r=0;r<d;r++)f.unz+=f.cp[r]}else f.unz=4*u[d]+d,f.lnz=f.unz;return f}}},function(t,e,n){"use strict";e.name="cs_amd",e.path="sparse",e.factory=function(t,e,r){var i=r(n(528)),o=r(n(1612)),a=r(n(760)),s=r(n(105)),l=r(n(66)),c=r(n(390)),u=function(t,e,n,r,i){var o=c(e);if(1===t&&r===n)return s(e,o);if(2==t){for(var a=o._index,u=o._ptr,d=0,f=0;f<n;f++){var p=u[f];if(u[f]=d,!(u[f+1]-p>i))for(var h=u[f+1];p<h;p++)a[d++]=a[p]}return u[n]=d,e=c(o),l(o,e)}return l(o,e)},d=function(t,e,n,r,i,o,a,s,l,c,u,d){for(var f=0;f<t;f++)n[r+f]=e[f+1]-e[f];n[r+t]=0;for(var h=0;h<=t;h++)n[i+h]=-1,o[h]=-1,n[a+h]=-1,n[s+h]=-1,n[l+h]=1,n[c+h]=1,n[u+h]=0,n[d+h]=n[r+h];var g=p(0,0,n,c,t);return n[u+t]=-2,e[t]=-1,n[c+t]=0,g},f=function(t,e,n,r,o,a,s,l,c,u,d){for(var f=0,p=0;p<t;p++){var h=n[r+p];if(0===h)n[o+p]=-2,f++,e[p]=-1,n[a+p]=0;else if(h>s)n[l+p]=0,n[o+p]=-1,f++,e[p]=i(t),n[l+t]++;else{var g=n[c+h];-1!=g&&(u[g]=p),n[d+p]=n[c+h],n[c+h]=p}}return f},p=function(t,e,n,r,i){if(t<2||t+e<0){for(var o=0;o<i;o++)0!==n[r+o]&&(n[r+o]=1);t=2}return t},h=function(t,e){return t!=e};return function(t,e){if(!e||t<=0||t>3)return null;var n=e._size,r=n[0],s=n[1],l=0,c=Math.max(16,10*Math.sqrt(s));c=Math.min(s-2,c);var g=u(t,e,r,s,c);o(g,h,null);for(var m,v,y,b,w,_,x,S,C,E,T,M,k,A,I,O,P=g._index,L=g._ptr,D=L[s],N=[],R=[],F=s+1,B=2*(s+1),j=3*(s+1),q=4*(s+1),z=5*(s+1),U=6*(s+1),$=7*(s+1),V=N,H=d(s,L,R,0,j,V,B,$,F,U,q,z),W=f(s,L,R,z,q,U,c,F,j,V,B),G=0;W<s;){for(y=-1;G<s&&-1==(y=R[j+G]);G++);-1!=R[B+y]&&(V[R[B+y]]=-1),R[j+G]=R[B+y];var Y=R[q+y],K=R[F+y];W+=K;var X=0;R[F+y]=-K;var Q=L[y],Z=0===Y?Q:D,J=Z;for(b=1;b<=Y+1;b++){for(b>Y?(_=y,x=Q,S=R[0+y]-Y):(x=L[_=P[Q++]],S=R[0+_]),w=1;w<=S;w++)(C=R[F+(m=P[x++])])<=0||(X+=C,R[F+m]=-C,P[J++]=m,-1!=R[B+m]&&(V[R[B+m]]=V[m]),-1!=V[m]?R[B+V[m]]=R[B+m]:R[j+R[z+m]]=R[B+m]);_!=y&&(L[_]=i(y),R[U+_]=0)}for(0!==Y&&(D=J),R[z+y]=X,L[y]=Z,R[0+y]=J-Z,R[q+y]=-2,H=p(H,l,R,U,s),E=Z;E<J;E++)if(!((T=R[q+(m=P[E])])<=0)){var tt=H-(C=-R[F+m]);for(Q=L[m],M=L[m]+T-1;Q<=M;Q++)R[U+(_=P[Q])]>=H?R[U+_]-=C:0!==R[U+_]&&(R[U+_]=R[z+_]+tt)}for(E=Z;E<J;E++){for(k=(M=L[m=P[E]])+R[q+m]-1,A=M,I=0,O=0,Q=M;Q<=k;Q++)if(0!==R[U+(_=P[Q])]){var et=R[U+_]-H;et>0?(O+=et,P[A++]=_,I+=_):(L[_]=i(y),R[U+_]=0)}R[q+m]=A-M+1;var nt=A,rt=M+R[0+m];for(Q=k+1;Q<rt;Q++){var it=R[F+(v=P[Q])];it<=0||(O+=it,P[A++]=v,I+=v)}0===O?(L[m]=i(y),X-=C=-R[F+m],K+=C,W+=C,R[F+m]=0,R[q+m]=-1):(R[z+m]=Math.min(R[z+m],O),P[A]=P[nt],P[nt]=P[M],P[M]=y,R[0+m]=A-M+1,I=(I<0?-I:I)%s,R[B+m]=R[$+I],R[$+I]=m,V[m]=I)}for(R[z+y]=X,l=Math.max(l,X),H=p(H+l,l,R,U,s),E=Z;E<J;E++)if(!(R[F+(m=P[E])]>=0))for(m=R[$+(I=V[m])],R[$+I]=-1;-1!=m&&-1!=R[B+m];m=R[B+m],H++){for(S=R[0+m],T=R[q+m],Q=L[m]+1;Q<=L[m]+S-1;Q++)R[U+P[Q]]=H;var ot=m;for(v=R[B+m];-1!=v;){var at=R[0+v]===S&&R[q+v]===T;for(Q=L[v]+1;at&&Q<=L[v]+S-1;Q++)R[U+P[Q]]!=H&&(at=0);at?(L[v]=i(m),R[F+m]+=R[F+v],R[F+v]=0,R[q+v]=-1,v=R[B+v],R[B+ot]=v):(ot=v,v=R[B+v])}}for(Q=Z,E=Z;E<J;E++)(C=-R[F+(m=P[E])])<=0||(R[F+m]=C,O=R[z+m]+X-C,-1!=R[j+(O=Math.min(O,s-W-C))]&&(V[R[j+O]]=m),R[B+m]=R[j+O],V[m]=-1,R[j+O]=m,G=Math.min(G,O),R[z+m]=O,P[Q++]=m);R[F+y]=K,0==(R[0+y]=Q-Z)&&(L[y]=-1,R[U+y]=0),0!==Y&&(D=Q)}for(m=0;m<s;m++)L[m]=i(L[m]);for(v=0;v<=s;v++)R[j+v]=-1;for(v=s;v>=0;v--)R[F+v]>0||(R[B+v]=R[j+L[v]],R[j+L[v]]=v);for(_=s;_>=0;_--)R[F+_]<=0||-1!=L[_]&&(R[B+_]=R[j+L[_]],R[j+L[_]]=_);for(y=0,m=0;m<=s;m++)-1==L[m]&&(y=a(m,y,R,j,B,N,U));return N.splice(N.length-1,1),N}}},function(t,e,n){"use strict";e.name="cs_fkeep",e.path="sparse",e.factory=function(){return function(t,e,n){for(var r=t._values,i=t._index,o=t._ptr,a=t._size[1],s=0,l=0;l<a;l++){var c=o[l];for(o[l]=s;c<o[l+1];c++)e(i[c],l,r?r[c]:1,n)&&(i[s]=i[c],r&&(r[s]=r[c]),s++)}return o[a]=s,i.splice(s,i.length-s),r&&r.splice(s,r.length-s),s}}},function(t,e,n){"use strict";e.name="cs_permute",e.path="sparse",e.factory=function(t){var e=t.SparseMatrix;return function(t,n,r,i){for(var o=t._values,a=t._index,s=t._ptr,l=t._size,c=t._datatype,u=l[0],d=l[1],f=i&&t._values?[]:null,p=[],h=[],g=0,m=0;m<d;m++){h[m]=g;for(var v=r?r[m]:m,y=s[v],b=s[v+1],w=y;w<b;w++){var _=n?n[a[w]]:a[w];p[g]=_,f&&(f[g]=o[w]),g++}}return h[d]=g,new e({values:f,index:p,ptr:h,size:[u,d],datatype:c})}}},function(t,e,n){"use strict";e.name="cs_etree",e.path="sparse",e.factory=function(){return function(t,e){if(!t)return null;var n,r,i=t._index,o=t._ptr,a=t._size,s=a[0],l=a[1],c=[],u=[],d=l;if(e)for(n=0;n<s;n++)u[d+n]=-1;for(var f=0;f<l;f++){c[f]=-1,u[0+f]=-1;for(var p=o[f],h=o[f+1],g=p;g<h;g++){var m=i[g];for(n=e?u[d+m]:m;-1!=n&&n<f;n=r)r=u[0+n],u[0+n]=f,-1==r&&(c[n]=f);e&&(u[d+m]=f)}}return c}}},function(t,e,n){"use strict";e.name="cs_post",e.path="sparse",e.factory=function(t,e,r){var i=r(n(760));return function(t,e){if(!t)return null;var n,r=0,o=[],a=[],s=e,l=2*e;for(n=0;n<e;n++)a[0+n]=-1;for(n=e-1;n>=0;n--)-1!=t[n]&&(a[s+n]=a[0+t[n]],a[0+t[n]]=n);for(n=0;n<e;n++)-1==t[n]&&(r=i(n,r,a,0,s,o,l));return o}}},function(t,e,n){"use strict";e.name="cs_counts",e.path="sparse",e.factory=function(t,e,r){var i=r(n(390)),o=r(n(1617));return function(t,e,n,r){if(!t||!e||!n)return null;var a,s,l,c,u,d,f,p=t._size,h=p[0],g=p[1],m=4*g+(r?g+h+1:0),v=[],y=g,b=2*g,w=3*g,_=4*g,x=5*g+1;for(l=0;l<m;l++)v[l]=-1;var S=[],C=i(t),E=C._index,T=C._ptr;for(l=0;l<g;l++)for(S[s=n[l]]=-1==v[w+s]?1:0;-1!=s&&-1==v[w+s];s=e[s])v[w+s]=l;if(r){for(l=0;l<g;l++)v[n[l]]=l;for(a=0;a<h;a++){for(l=g,d=T[a],f=T[a+1],u=d;u<f;u++)l=Math.min(l,v[E[u]]);v[x+a]=v[_+l],v[_+l]=a}}for(a=0;a<g;a++)v[0+a]=a;for(l=0;l<g;l++){for(-1!=e[s=n[l]]&&S[e[s]]--,c=r?v[_+l]:s;-1!=c;c=r?v[x+c]:-1)for(u=T[c];u<T[c+1];u++){a=E[u];var M=o(a,s,v,w,y,b,0);M.jleaf>=1&&S[s]++,2==M.jleaf&&S[M.q]--}-1!=e[s]&&(v[0+s]=e[s])}for(s=0;s<g;s++)-1!=e[s]&&(S[e[s]]+=S[s]);return S}}},function(t,e,n){"use strict";e.name="cs_leaf",e.path="sparse",e.factory=function(){return function(t,e,n,r,i,o,a){var s,l,c,u,d=0;if(t<=e||n[r+e]<=n[i+t])return-1;if(n[i+t]=n[r+e],c=n[o+t],n[o+t]=e,-1===c)d=1,u=t;else{for(d=2,u=c;u!=n[a+u];u=n[a+u]);for(s=c;s!=u;s=l)l=n[a+s],n[a+s]=u}return{jleaf:d,q:u}}}},function(t,e,n){"use strict";e.name="cs_lu",e.path="sparse",e.factory=function(t,e,r){var i=r(n(145)),o=r(n(82)),a=r(n(66)),s=r(n(184)),l=r(n(761)),c=r(n(1619)),u=t.SparseMatrix;return function(t,e,n){if(!t)return null;var r,d=t._size[1],f=100,p=100;e&&(r=e.q,f=e.lnz||f,p=e.unz||p);var h,g,m=[],v=[],y=[],b=new u({values:m,index:v,ptr:y,size:[d,d]}),w=[],_=[],x=[],S=new u({values:w,index:_,ptr:x,size:[d,d]}),C=[],E=[],T=[];for(h=0;h<d;h++)E[h]=0,C[h]=-1,y[h+1]=0;f=0,p=0;for(var M=0;M<d;M++){y[M]=f,x[M]=p;var k=r?r[M]:M,A=c(b,t,k,T,E,C,1),I=-1,O=-1;for(g=A;g<d;g++)if(C[h=T[g]]<0){var P=i(E[h]);s(P,O)&&(O=P,I=h)}else _[p]=C[h],w[p++]=E[h];if(-1==I||O<=0)return null;C[k]<0&&l(i(E[k]),a(O,n))&&(I=k);var L=E[I];for(_[p]=M,w[p++]=L,C[I]=M,v[f]=I,m[f++]=1,g=A;g<d;g++)C[h=T[g]]<0&&(v[f]=h,m[f++]=o(E[h],L)),E[h]=0}for(y[d]=f,x[d]=p,g=0;g<f;g++)v[g]=C[v[g]];return m.splice(f,m.length-f),v.splice(f,v.length-f),w.splice(p,w.length-p),_.splice(p,_.length-p),{L:b,U:S,pinv:C}}}},function(t,e,n){"use strict";e.name="cs_spsolve",e.path="sparse",e.factory=function(t,e,r){var i=r(n(82)),o=r(n(66)),a=r(n(106)),s=r(n(1620));return function(t,e,n,r,l,c,u){var d,f,p,h,g=t._values,m=t._index,v=t._ptr,y=t._size[1],b=e._values,w=e._index,_=e._ptr,x=s(t,e,n,r,c);for(d=x;d<y;d++)l[r[d]]=0;for(f=_[n],p=_[n+1],d=f;d<p;d++)l[w[d]]=b[d];for(var S=x;S<y;S++){var C=r[S],E=c?c[C]:C;if(!(E<0))for(f=v[E],p=v[E+1],l[C]=i(l[C],g[u?f:p-1]),d=u?f+1:f,h=u?p:p-1;d<h;d++){var T=m[d];l[T]=a(l[T],o(g[d],l[C]))}}return x}}},function(t,e,n){"use strict";e.name="cs_reach",e.path="sparse",e.factory=function(t,e,r){var i=r(n(1621)),o=r(n(762)),a=r(n(763));return function(t,e,n,r,s){var l,c,u,d=t._ptr,f=t._size,p=e._index,h=e._ptr,g=f[1],m=g;for(c=h[n],u=h[n+1],l=c;l<u;l++){var v=p[l];o(d,v)||(m=i(v,t,m,r,s))}for(l=m;l<g;l++)a(d,r[l]);return m}}},function(t,e,n){"use strict";e.name="cs_dfs",e.path="sparse",e.factory=function(t,e,r){var i=r(n(762)),o=r(n(763)),a=r(n(1622));return function(t,e,n,r,s){var l,c,u,d=e._index,f=e._ptr,p=e._size[1],h=0;for(r[0]=t;h>=0;){t=r[h];var g=s?s[t]:t;i(f,t)||(o(f,t),r[p+h]=g<0?0:a(f[g]));var m=1;for(c=r[p+h],u=g<0?0:a(f[g+1]);c<u;c++)if(l=d[c],!i(f,l)){r[p+h]=c,r[++h]=l,m=0;break}m&&(h--,r[--n]=t)}return n}}},function(t,e,n){"use strict";e.name="cs_unflip",e.path="sparse",e.factory=function(t,e,r){var i=r(n(528));return function(t){return t<0?i(t):t}}},function(t,e,n){"use strict";var r=Array.isArray;e.name="lusolve",e.factory=function(t,e,i,o){var a=i(n(7)),s=i(n(758)),l=i(n(759)),c=i(n(1624)),u=i(n(529)),d=i(n(765)),f=i(n(764)),p=o("lusolve",{"Array, Array | Matrix":function(t,e){t=a(t);var n=s(t);return g(n.L,n.U,n.p,null,e).valueOf()},"DenseMatrix, Array | Matrix":function(t,e){var n=s(t);return g(n.L,n.U,n.p,null,e)},"SparseMatrix, Array | Matrix":function(t,e){var n=s(t);return g(n.L,n.U,n.p,null,e)},"SparseMatrix, Array | Matrix, number, number":function(t,e,n,r){var i=l(t,n,r);return g(i.L,i.U,i.p,i.q,e)},"Object, Array | Matrix":function(t,e){return g(t.L,t.U,t.p,t.q,e)}}),h=function(e){if(t.isMatrix(e))return e;if(r(e))return a(e);throw new TypeError("Invalid Matrix LU decomposition")},g=function(t,e,n,r,i){t=h(t),e=h(e),i=u(t,i,!1),n&&(i._data=c(n,i._data));var o=f(t,i),a=d(e,o);return r&&(a._data=c(r,a._data)),a};return p}},function(t,e,n){"use strict";e.name="cs_ipvec",e.path="sparse",e.factory=function(){return function(t,e,n){n=e.length;var r,i=[];if(t)for(r=0;r<n;r++)i[t[r]]=e[r];else for(r=0;r<n;r++)i[r]=e[r];return i}}},function(t,e,n){t.exports=[n(145),n(105),n(91),n(1626),n(1627),n(1628),n(256),n(766),n(1629),n(1630),n(1631),n(728),n(1632),n(1633),n(1634),n(1635),n(768),n(1637),n(1638),n(66),n(1639),n(1640),n(253),n(729),n(756),n(257),n(1641),n(106),n(185),n(1642),n(1643)]},function(t,e,n){"use strict";var r=n(9);var i=Math.cbrt||function(t){if(0===t)return t;var e,n=t<0;return n&&(t=-t),e=isFinite(t)?(t/((e=Math.exp(Math.log(t)/3))*e)+2*e)/3:t,n?-e:e};e.name="cbrt",e.factory=function(t,e,o,a){var s=o(n(185)),l=o(n(316)),c=o(n(7)),u=a("cbrt",{number:i,Complex:d,"Complex, boolean":d,BigNumber:function(t){return t.cbrt()},Unit:function(e){if(e.value&&t.isComplex(e.value)){var n=e.clone();return n.value=1,(n=n.pow(1/3)).value=d(e.value),n}var r,i=l(e.value);i&&(e.value=s(e.value)),r=t.isBigNumber(e.value)?new t.BigNumber(1).div(3):t.isFraction(e.value)?new t.Fraction(1,3):1/3;var n=e.pow(r);return i&&(n.value=s(n.value)),n},"Array | Matrix":function(t){return r(t,u,!0)}});function d(n,r){var o=n.arg()/3,a=n.abs(),s=new t.Complex(i(a),0).mul(new t.Complex(0,o).exp());if(r){var l=[s,new t.Complex(i(a),0).mul(new t.Complex(0,o+2*Math.PI/3).exp()),new t.Complex(i(a),0).mul(new t.Complex(0,o-2*Math.PI/3).exp())];return"Array"===e.matrix?l:c(l)}return s}return u.toTex={1:"\\sqrt[3]{${args[0]}}"},u}},function(t,e,n){"use strict";var r=n(9);e.name="ceil",e.factory=function(t,e,n,i){var o=i("ceil",{number:Math.ceil,Complex:function(t){return t.ceil()},BigNumber:function(t){return t.ceil()},Fraction:function(t){return t.ceil()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\left\\lceil${args[0]}\\right\\rceil"},o}},function(t,e,n){"use strict";var r=n(9);e.name="cube",e.factory=function(t,e,n,i){var o=i("cube",{number:function(t){return t*t*t},Complex:function(t){return t.mul(t).mul(t)},BigNumber:function(t){return t.times(t).times(t)},Fraction:function(t){return t.pow(3)},"Array | Matrix":function(t){return r(t,o,!0)},Unit:function(t){return t.pow(3)}});return o.toTex={1:"\\left(${args[0]}\\right)^3"},o}},function(t,e,n){"use strict";e.name="dotMultiply",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(107)),s=n(27),l=r(n(131)),c=r(n(767)),u=r(n(94)),d=r(n(41)),f=r(n(35)),p=i("dotMultiply",{"any, any":a,"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,a,!1);break;default:n=l(e,t,a,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,a,!1);break;default:n=d(t,e,a)}}return n},"Array, Array":function(t,e){return p(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return p(o(t),e)},"Matrix, Array":function(t,e){return p(t,o(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,a,!1);break;default:n=f(t,e,a,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=u(e,t,a,!0);break;default:n=f(e,t,a,!0)}return n},"Array, any":function(t,e){return f(o(t),e,a,!1).valueOf()},"any, Array":function(t,e){return f(o(e),t,a,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+s.operators.dotMultiply+"${args[1]}\\right)"},p}},function(t,e,n){"use strict";e.name="dotPow",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(253)),s=n(27),l=r(n(92)),c=r(n(143)),u=r(n(94)),d=r(n(93)),f=r(n(41)),p=r(n(35)),h=i("dotPow",{"any, any":a,"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,a,!1);break;default:n=l(e,t,a,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,a,!1);break;default:n=f(t,e,a)}}return n},"Array, Array":function(t,e){return h(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return h(o(t),e)},"Matrix, Array":function(t,e){return h(t,o(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,h,!1);break;default:n=p(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=d(e,t,h,!0);break;default:n=p(e,t,h,!0)}return n},"Array, any":function(t,e){return p(o(t),e,h,!1).valueOf()},"any, Array":function(t,e){return p(o(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+s.operators.dotPow+"${args[1]}\\right)"},h}},function(t,e,n){"use strict";var r=n(9);e.name="exp",e.factory=function(t,e,n,i){var o=i("exp",{number:Math.exp,Complex:function(t){return t.exp()},BigNumber:function(t){return t.exp()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\exp\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="floor",e.factory=function(t,e,n,i){var o=i("floor",{number:Math.floor,Complex:function(t){return t.floor()},BigNumber:function(t){return t.floor()},Fraction:function(t){return t.floor()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\left\\lfloor${args[0]}\\right\\rfloor"},o}},function(t,e,n){"use strict";var r=n(13).isInteger;function i(t,e){if(!r(t)||!r(e))throw new Error("Parameters in function gcd must be integer numbers");for(var n;0!=e;)n=t%e,t=e,e=n;return t<0?-t:t}e.name="gcd",e.factory=function(t,e,r,o){var a=r(n(7)),s=r(n(183)),l=r(n(517)),c=r(n(216)),u=r(n(41)),d=r(n(35)),f=o("gcd",{"number, number":i,"BigNumber, BigNumber":function(e,n){if(!e.isInt()||!n.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var r=new t.BigNumber(0);!n.isZero();){var i=e.mod(n);e=n,n=i}return e.lt(r)?e.neg():e},"Fraction, Fraction":function(t,e){return t.gcd(e)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=l(t,e,f);break;default:n=s(e,t,f,!0)}break;default:switch(e.storage()){case"sparse":n=s(t,e,f,!1);break;default:n=u(t,e,f)}}return n},"Array, Array":function(t,e){return f(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return f(a(t),e)},"Matrix, Array":function(t,e){return f(t,a(e))},"Matrix, number | BigNumber":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,f,!1);break;default:n=d(t,e,f,!1)}return n},"number | BigNumber, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,f,!0);break;default:n=d(e,t,f,!0)}return n},"Array, number | BigNumber":function(t,e){return d(a(t),e,f,!1).valueOf()},"number | BigNumber, Array":function(t,e){return d(a(e),t,f,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(t,e,n){for(var r=f(t,e),i=0;i<n.length;i++)r=f(r,n[i]);return r}});return f.toTex="\\gcd\\left(${args}\\right)",f}},function(t,e,n){"use strict";var r=n(11).flatten;e.name="hypot",e.factory=function(t,e,i,o){var a=i(n(145)),s=i(n(91)),l=i(n(82)),c=i(n(107)),u=i(n(257)),d=i(n(217)),f=i(n(315)),p=o("hypot",{"... number | BigNumber":function(t){for(var e=0,n=0,r=0;r<t.length;r++){var i=a(t[r]);d(n,i)?(e=c(e,c(l(n,i),l(n,i))),e=s(e,1),n=i):e=s(e,f(i)?c(l(i,n),l(i,n)):i)}return c(n,u(e))},Array:function(t){return p.apply(p,r(t))},Matrix:function(t){return p.apply(p,r(t.toArray()))}});return p.toTex="\\hypot\\left(${args}\\right)",p}},function(t,e,n){"use strict";var r=n(13).isInteger;function i(t,e){if(!r(t)||!r(e))throw new Error("Parameters in function lcm must be integer numbers");if(0==t||0==e)return 0;for(var n,i=t*e;0!=e;)e=t%(n=e),t=n;return Math.abs(i/t)}e.name="lcm",e.factory=function(t,e,r,o){var a=r(n(7)),s=r(n(131)),l=r(n(391)),c=r(n(94)),u=r(n(41)),d=r(n(35)),f=o("lcm",{"number, number":i,"BigNumber, BigNumber":function(e,n){if(!e.isInt()||!n.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero()||n.isZero())return new t.BigNumber(0);for(var r=e.times(n);!n.isZero();){var i=n;n=e.mod(i),e=i}return r.div(e).abs()},"Fraction, Fraction":function(t,e){return t.lcm(e)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=l(t,e,f);break;default:n=s(e,t,f,!0)}break;default:switch(e.storage()){case"sparse":n=s(t,e,f,!1);break;default:n=u(t,e,f)}}return n},"Array, Array":function(t,e){return f(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return f(a(t),e)},"Matrix, Array":function(t,e){return f(t,a(e))},"Matrix, number | BigNumber":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,f,!1);break;default:n=d(t,e,f,!1)}return n},"number | BigNumber, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,f,!0);break;default:n=d(e,t,f,!0)}return n},"Array, number | BigNumber":function(t,e){return d(a(t),e,f,!1).valueOf()},"number | BigNumber, Array":function(t,e){return d(a(e),t,f,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(t,e,n){for(var r=f(t,e),i=0;i<n.length;i++)r=f(r,n[i]);return r}});return f.toTex=void 0,f}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s,l,c,u){var d,f,p,h,g=t._values,m=t._index,v=t._ptr,y=a._index;if(r)for(f=v[e],p=v[e+1],d=f;d<p;d++)n[h=m[d]]!==o?(n[h]=o,y.push(h),c?(r[h]=l?s(g[d],u):s(u,g[d]),i[h]=o):r[h]=g[d]):(r[h]=l?s(g[d],r[h]):s(r[h],g[d]),i[h]=o);else for(f=v[e],p=v[e+1],d=f;d<p;d++)n[h=m[d]]!==o?(n[h]=o,y.push(h)):i[h]=o}},function(t,e,n){"use strict";var r=n(9);var i=Math.log10||function(t){return Math.log(t)/Math.LN10};e.name="log10",e.factory=function(t,e,n,o){var a=o("log10",{number:function(n){return n>=0||e.predictable?i(n):new t.Complex(n,0).log().div(Math.LN10)},Complex:function(e){return new t.Complex(e).log().div(Math.LN10)},BigNumber:function(n){return!n.isNegative()||e.predictable?n.log():new t.Complex(n.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={1:"\\log_{10}\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";e.name="mod",e.factory=function(t,e,r,i){var o=r(n(7)),a=n(27),s=r(n(131)),l=r(n(92)),c=r(n(384)),u=r(n(94)),d=r(n(93)),f=r(n(41)),p=r(n(35)),h=i("mod",{"number, number":function(t,e){if(e>0)return t-e*Math.floor(t/e);if(0===e)return t;throw new Error("Cannot calculate mod for a negative divisor")},"BigNumber, BigNumber":function(t,e){return e.isZero()?t:t.mod(e)},"Fraction, Fraction":function(t,e){return t.mod(e)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,h,!1);break;default:n=s(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,h,!1);break;default:n=f(t,e,h)}}return n},"Array, Array":function(t,e){return h(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return h(o(t),e)},"Matrix, Array":function(t,e){return h(t,o(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,h,!1);break;default:n=p(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=d(e,t,h,!0);break;default:n=p(e,t,h,!0)}return n},"Array, any":function(t,e){return p(o(t),e,h,!1).valueOf()},"any, Array":function(t,e){return p(o(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+a.operators.mod+"${args[1]}\\right)"},h}},function(t,e,n){"use strict";e.name="norm",e.factory=function(t,e,r,i){var o=r(n(145)),a=r(n(105)),s=r(n(253)),l=r(n(257)),c=r(n(66)),u=r(n(61)),d=r(n(184)),f=r(n(217)),p=r(n(7)),h=r(n(769)),g=r(n(390)),m=i("norm",{number:Math.abs,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},"boolean | null":function(t){return Math.abs(t)},Array:function(t){return v(p(t),2)},Matrix:function(t){return v(t,2)},"number | Complex | BigNumber | boolean | null, number | BigNumber | string":function(t){return m(t)},"Array, number | BigNumber | string":function(t,e){return v(p(t),e)},"Matrix, number | BigNumber | string":function(t,e){return v(t,e)}});function v(t,e){var n=t.size();if(1==n.length){if(e===Number.POSITIVE_INFINITY||"inf"===e){var r=0;return t.forEach(function(t){var e=o(t);d(e,r)&&(r=e)},!0),r}var i;if(e===Number.NEGATIVE_INFINITY||"-inf"===e)return t.forEach(function(t){var e=o(t);i&&!f(e,i)||(i=e)},!0),i||0;if("fro"===e)return v(t,2);if("number"==typeof e&&!isNaN(e)){if(!u(e,0)){var p=0;return t.forEach(function(t){p=a(s(o(t),e),p)},!0),s(p,1/e)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}if(2==n.length){if(1===e){var m=[],y=0;return t.forEach(function(t,e){var n=e[1],r=a(m[n]||0,o(t));d(r,y)&&(y=r),m[n]=r},!0),y}if(e===Number.POSITIVE_INFINITY||"inf"===e){var b=[],w=0;return t.forEach(function(t,e){var n=e[0],r=a(b[n]||0,o(t));d(r,w)&&(w=r),b[n]=r},!0),w}if("fro"===e)return l(h(c(g(t),t)));if(2===e)throw new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition");throw new Error("Unsupported parameter value")}}return m.toTex={1:"\\left\\|${args[0]}\\right\\|",2:void 0},m}},function(t,e,n){"use strict";function r(t,e){var n=e<0;if(n&&(e=-e),0===e)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!=1)throw new Error("Root must be odd when a is negative.");if(0==t)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}function i(t,e){if(e<0)throw new Error("Root must be greater than zero");if(0===e)throw new Error("Root must be non-zero");if(e%1!=0)throw new Error("Root must be an integer");for(var n=t.arg(),r=t.abs(),i=[],o=Math.pow(r,1/e),a=0;a<e;a++)i.push({r:o,phi:(n+2*Math.PI*a)/e});return i}e.name="nthRoot",e.factory=function(t,e,o,a){var s=o(n(7)),l=o(n(183)),c=o(n(131)),u=o(n(391)),d=o(n(94)),f=o(n(41)),p=o(n(35)),h=a("nthRoot",{number:function(t){return r(t,2)},"number, number":r,BigNumber:function(e){return g(e,new t.BigNumber(2))},Complex:function(t){return i(t,2)},"Complex, number":i,"BigNumber, BigNumber":g,"Array | Matrix":function(t){return h(t,2)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":if(1!==e.density())throw new Error("Root must be non-zero");n=u(t,e,h);break;default:n=c(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":if(1!==e.density())throw new Error("Root must be non-zero");n=l(t,e,h,!1);break;default:n=f(t,e,h)}}return n},"Array, Array":function(t,e){return h(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return h(s(t),e)},"Matrix, Array":function(t,e){return h(t,s(e))},"Matrix, number | BigNumber":function(t,e){var n;switch(t.storage()){case"sparse":n=d(t,e,h,!1);break;default:n=p(t,e,h,!1)}return n},"number | BigNumber, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":if(1!==e.density())throw new Error("Root must be non-zero");n=d(e,t,h,!0);break;default:n=p(e,t,h,!0)}return n},"Array, number | BigNumber":function(t,e){return h(s(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return h(t,s(e)).valueOf()}});return h.toTex={2:"\\sqrt[${args[1]}]{${args[0]}}"},h;function g(e,n){var r=t.BigNumber.precision,i=t.BigNumber.clone({precision:r+2}),o=new t.BigNumber(0),a=new i(1),s=n.isNegative();if(s&&(n=n.neg()),n.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!n.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return s?new i(1/0):0;if(!e.isFinite())return s?o:e;var l=e.abs().pow(a.div(n));return l=e.isNeg()?l.neg():l,new t.BigNumber((s?a.div(l):l).toPrecision(r))}}},function(t,e,n){"use strict";var r=n(9);e.name="square",e.factory=function(t,e,n,i){var o=i("square",{number:function(t){return t*t},Complex:function(t){return t.mul(t)},BigNumber:function(t){return t.times(t)},Fraction:function(t){return t.mul(t)},"Array | Matrix":function(t){return r(t,o,!0)},Unit:function(t){return t.pow(2)}});return o.toTex={1:"\\left(${args[0]}\\right)^2"},o}},function(t,e,n){"use strict";var r=n(9);e.name="unaryPlus",e.factory=function(t,e,i,o){var a=n(27),s=o("unaryPlus",{number:function(t){return t},Complex:function(t){return t},BigNumber:function(t){return t},Fraction:function(t){return t},Unit:function(t){return t.clone()},"Array | Matrix":function(t){return r(t,s,!0)},"boolean | string | null":function(n){return"BigNumber"==e.number?new t.BigNumber(+n):+n}});return s.toTex={1:a.operators.unaryPlus+"\\left(${args[0]}\\right)"},s}},function(t,e,n){"use strict";var r=n(13).isInteger;e.name="xgcd",e.factory=function(t,e,i,o){var a=i(n(7)),s=o("xgcd",{"number, number":function(t,n){var i,o,s,l,c=0,u=1,d=1,f=0;if(!r(t)||!r(n))throw new Error("Parameters in function xgcd must be integer numbers");for(;n;)o=Math.floor(t/n),s=t-o*n,i=c,c=u-o*c,u=i,i=d,d=f-o*d,f=i,t=n,n=s;return l=t<0?[-t,-u,-f]:[t,t?u:0,f],"Array"===e.matrix?l:a(l)},"BigNumber, BigNumber":function(n,r){var i,o,s,l,c=new t.BigNumber(0),u=new t.BigNumber(1),d=c,f=u,p=u,h=c;if(!n.isInt()||!r.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!r.isZero();)o=n.div(r).floor(),s=n.mod(r),i=d,d=f.minus(o.times(d)),f=i,i=p,p=h.minus(o.times(p)),h=i,n=r,r=s;return l=n.lt(c)?[n.neg(),f.neg(),h.neg()]:[n,n.isZero()?0:f,h],"Array"===e.matrix?l:a(l)}});return s.toTex=void 0,s}},function(t,e,n){t.exports=[n(1645),n(1647),n(1648),n(1650),n(1652),n(1654),n(1656)]},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(1646);e.name="bitAnd",e.factory=function(t,e,o,a){var s=n(27),l=o(n(7)),c=o(n(131)),u=o(n(391)),d=o(n(94)),f=o(n(41)),p=o(n(35)),h=a("bitAnd",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function bitAnd");return t&e},"BigNumber, BigNumber":i,"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,h,!1);break;default:n=c(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=c(t,e,h,!1);break;default:n=f(t,e,h)}}return n},"Array, Array":function(t,e){return h(l(t),l(e)).valueOf()},"Array, Matrix":function(t,e){return h(l(t),e)},"Matrix, Array":function(t,e){return h(t,l(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=d(t,e,h,!1);break;default:n=p(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=d(e,t,h,!0);break;default:n=p(e,t,h,!0)}return n},"Array, any":function(t,e){return p(l(t),e,h,!1).valueOf()},"any, Array":function(t,e){return p(l(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+s.operators.bitAnd+"${args[1]}\\right)"},h}},function(t,e,n){var r=n(530);t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()==e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return r(t,e,function(t,e){return t&e})}},function(t,e,n){"use strict";var r=n(9),i=n(531),o=n(13).isInteger;e.name="bitNot",e.factory=function(t,e,a,s){var l=n(27),c=s("bitNot",{number:function(t){if(!o(t))throw new Error("Integer expected in function bitNot");return~t},BigNumber:i,"Array | Matrix":function(t){return r(t,c)}});return c.toTex={1:l.operators.bitNot+"\\left(${args[0]}\\right)"},c}},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(1649);e.name="bitOr",e.factory=function(t,e,o,a){var s=n(27),l=o(n(7)),c=o(n(183)),u=o(n(517)),d=o(n(216)),f=o(n(41)),p=o(n(35)),h=a("bitOr",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function bitOr");return t|e},"BigNumber, BigNumber":i,"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,h);break;default:n=c(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=c(t,e,h,!1);break;default:n=f(t,e,h)}}return n},"Array, Array":function(t,e){return h(l(t),l(e)).valueOf()},"Array, Matrix":function(t,e){return h(l(t),e)},"Matrix, Array":function(t,e){return h(t,l(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=d(t,e,h,!1);break;default:n=p(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=d(e,t,h,!0);break;default:n=p(e,t,h,!0)}return n},"Array, any":function(t,e){return p(l(t),e,h,!1).valueOf()},"any, Array":function(t,e){return p(l(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+s.operators.bitOr+"${args[1]}\\right)"},h}},function(t,e,n){var r=n(530);t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var i=new n(-1);return t.isZero()||e.eq(i)||t.eq(e)?e:e.isZero()||t.eq(i)?t:t.isFinite()&&e.isFinite()?r(t,e,function(t,e){return t|e}):!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?i:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t}},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(1651);e.name="bitXor",e.factory=function(t,e,o,a){var s=n(27),l=o(n(7)),c=o(n(92)),u=o(n(143)),d=o(n(93)),f=o(n(41)),p=o(n(35)),h=a("bitXor",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function bitXor");return t^e},"BigNumber, BigNumber":i,"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,h);break;default:n=c(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=c(t,e,h,!1);break;default:n=f(t,e,h)}}return n},"Array, Array":function(t,e){return h(l(t),l(e)).valueOf()},"Array, Matrix":function(t,e){return h(l(t),e)},"Matrix, Array":function(t,e){return h(t,l(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=d(t,e,h,!1);break;default:n=p(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=d(e,t,h,!0);break;default:n=p(e,t,h,!0)}return n},"Array, any":function(t,e){return p(l(t),e,h,!1).valueOf()},"any, Array":function(t,e){return p(l(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+s.operators.bitXor+"${args[1]}\\right)"},h}},function(t,e,n){var r=n(530),i=n(531);t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var o=new n(-1);return t.eq(o)?i(e):e.eq(o)?i(t):t.isFinite()&&e.isFinite()?r(t,e,function(t,e){return t^e}):t.isFinite()||e.isFinite()?new n(t.isNegative()==e.isNegative()?1/0:-1/0):o}},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(1653);e.name="leftShift",e.factory=function(t,e,o,a){var s=n(27),l=o(n(7)),c=o(n(61)),u=o(n(218)),d=o(n(183)),f=o(n(131)),p=o(n(532)),h=o(n(216)),g=o(n(94)),m=o(n(41)),v=o(n(35)),y=a("leftShift",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function leftShift");return t<<e},"BigNumber, BigNumber":i,"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=p(t,e,y,!1);break;default:n=f(e,t,y,!0)}break;default:switch(e.storage()){case"sparse":n=d(t,e,y,!1);break;default:n=m(t,e,y)}}return n},"Array, Array":function(t,e){return y(l(t),l(e)).valueOf()},"Array, Matrix":function(t,e){return y(l(t),e)},"Matrix, Array":function(t,e){return y(t,l(e))},"Matrix, number | BigNumber":function(t,e){if(!c(e,0)){var n;switch(t.storage()){case"sparse":n=g(t,e,y,!1);break;default:n=v(t,e,y,!1)}return n}return t.clone()},"number | BigNumber, Matrix":function(t,e){if(!c(t,0)){var n;switch(e.storage()){case"sparse":n=h(e,t,y,!0);break;default:n=v(e,t,y,!0)}return n}return u(e.size(),e.storage())},"Array, number | BigNumber":function(t,e){return y(l(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return y(t,l(e)).valueOf()}});return y.toTex={2:"\\left(${args[0]}"+s.operators.leftShift+"${args[1]}\\right)"},y}},function(t,e){t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:t.isFinite()||e.isFinite()?e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e)):new n(NaN)}},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(1655);e.name="rightArithShift",e.factory=function(t,e,o,a){var s=n(27),l=o(n(7)),c=o(n(61)),u=o(n(218)),d=o(n(183)),f=o(n(131)),p=o(n(532)),h=o(n(216)),g=o(n(94)),m=o(n(41)),v=o(n(35)),y=a("rightArithShift",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function rightArithShift");return t>>e},"BigNumber, BigNumber":i,"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=p(t,e,y,!1);break;default:n=f(e,t,y,!0)}break;default:switch(e.storage()){case"sparse":n=d(t,e,y,!1);break;default:n=m(t,e,y)}}return n},"Array, Array":function(t,e){return y(l(t),l(e)).valueOf()},"Array, Matrix":function(t,e){return y(l(t),e)},"Matrix, Array":function(t,e){return y(t,l(e))},"Matrix, number | BigNumber":function(t,e){if(!c(e,0)){var n;switch(t.storage()){case"sparse":n=g(t,e,y,!1);break;default:n=v(t,e,y,!1)}return n}return t.clone()},"number | BigNumber, Matrix":function(t,e){if(!c(t,0)){var n;switch(e.storage()){case"sparse":n=h(e,t,y,!0);break;default:n=v(e,t,y,!0)}return n}return u(e.size(),e.storage())},"Array, number | BigNumber":function(t,e){return y(l(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return y(t,l(e)).valueOf()}});return y.toTex={2:"\\left(${args[0]}"+s.operators.rightArithShift+"${args[1]}\\right)"},y}},function(t,e){t.exports=function(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}},function(t,e,n){"use strict";var r=n(13).isInteger;e.name="rightLogShift",e.factory=function(t,e,i,o){var a=n(27),s=i(n(7)),l=i(n(61)),c=i(n(218)),u=i(n(183)),d=i(n(131)),f=i(n(532)),p=i(n(216)),h=i(n(94)),g=i(n(41)),m=i(n(35)),v=o("rightLogShift",{"number, number":function(t,e){if(!r(t)||!r(e))throw new Error("Integers expected in function rightLogShift");return t>>>e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=f(t,e,v,!1);break;default:n=d(e,t,v,!0)}break;default:switch(e.storage()){case"sparse":n=u(t,e,v,!1);break;default:n=g(t,e,v)}}return n},"Array, Array":function(t,e){return v(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return v(s(t),e)},"Matrix, Array":function(t,e){return v(t,s(e))},"Matrix, number | BigNumber":function(t,e){if(!l(e,0)){var n;switch(t.storage()){case"sparse":n=h(t,e,v,!1);break;default:n=m(t,e,v,!1)}return n}return t.clone()},"number | BigNumber, Matrix":function(t,e){if(!l(t,0)){var n;switch(e.storage()){case"sparse":n=p(e,t,v,!0);break;default:n=m(e,t,v,!0)}return n}return c(e.size(),e.storage())},"Array, number | BigNumber":function(t,e){return v(s(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return v(t,s(e)).valueOf()}});return v.toTex={2:"\\left(${args[0]}"+a.operators.rightLogShift+"${args[1]}\\right)"},v}},function(t,e,n){t.exports=[n(1658),n(1659),n(770),n(1660)]},function(t,e,n){"use strict";e.name="bellNumbers",e.factory=function(t,e,r,i){var o=r(n(105)),a=r(n(770)),s=r(n(316)),l=r(n(258)),c=i("bellNumbers",{"number | BigNumber":function(t){if(!l(t)||s(t))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var e=0,n=0;n<=t;n++)e=o(e,a(t,n));return e}});return c.toTex={1:"\\mathrm{B}_{${args[0]}}"},c}},function(t,e,n){"use strict";e.name="composition",e.factory=function(t,e,r,i){var o=r(n(393)),a=r(n(91)),s=r(n(315)),l=r(n(258)),c=r(n(184)),u=i("composition",{"number | BigNumber, number | BigNumber":function(t,e){if(!(l(t)&&s(t)&&l(e)&&s(e)))throw new TypeError("Positive integer value expected in function composition");if(c(e,t))throw new TypeError("k must be less than or equal to n in function composition");return o(a(t,-1),a(e,-1))}});return u.toTex=void 0,u}},function(t,e,n){"use strict";e.name="catalan",e.factory=function(t,e,r,i){var o=r(n(105)),a=r(n(256)),s=r(n(66)),l=r(n(393)),c=r(n(316)),u=r(n(258)),d=i("catalan",{"number | BigNumber":function(t){if(!u(t)||c(t))throw new TypeError("Non-negative integer value expected in function catalan");return a(l(s(t,2),t),o(t,1))}});return d.toTex={1:"\\mathrm{C}_{${args[0]}}"},d}},function(t,e,n){t.exports=[n(1662),n(757),n(1663),n(1664)]},function(t,e,n){"use strict";var r=n(9);e.name="arg",e.factory=function(t,e,n,i){var o=i("arg",{number:function(t){return Math.atan2(0,t)},BigNumber:function(e){return t.BigNumber.atan2(0,e)},Complex:function(t){return t.arg()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\arg\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="im",e.factory=function(t,e,n,i){var o=i("im",{number:function(t){return 0},BigNumber:function(e){return new t.BigNumber(0)},Complex:function(t){return t.im},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},o}},function(t,e,n){"use strict";var r=n(9);e.name="re",e.factory=function(t,e,n,i){var o=i("re",{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.re},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},o}},function(t,e,n){t.exports=[n(1666),n(1667)]},function(t,e,n){"use strict";e.name="intersect",e.factory=function(t,e,r,i){var o=r(n(145)),a=r(n(105)),s=r(n(91)),l=r(n(7)),c=r(n(66)),u=r(n(107)),d=r(n(82)),f=r(n(106)),p=r(n(217)),h=r(n(61)),g=i("intersect",{"Array, Array, Array":function(t,e,n){if(!y(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!y(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(t){return 4===t.length&&m(t[0])&&m(t[1])&&m(t[2])&&m(t[3])}(n))throw new TypeError("Array with 4 numbers expected as third argument");return function(t,e,n,r,i,o,a,l,c,p){var h=u(t,a),g=u(r,a),m=u(e,l),v=u(i,l),y=u(n,c),b=u(o,c),w=d(f(f(f(p,h),m),y),f(f(f(s(s(g,v),b),h),m),y)),_=s(t,u(w,f(r,t))),x=s(e,u(w,f(i,e))),S=s(n,u(w,f(o,n)));return[_,x,S]}(t[0],t[1],t[2],e[0],e[1],e[2],n[0],n[1],n[2],n[3])},"Array, Array, Array, Array":function(t,n,r,i){if(2===t.length){if(!v(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!v(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!v(r))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!v(i))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(t,n,r,i){var l=t,h=r,g=f(l,n),m=f(h,i),v=f(u(g[0],m[1]),u(m[0],g[1]));if(p(o(v),e.epsilon))return null;var y=u(m[0],l[1]),b=u(m[1],l[0]),w=u(m[0],h[1]),_=u(m[1],h[0]),x=d(s(f(f(y,b),w),_),v);return a(c(g,x),l)}(t,n,r,i)}if(3===t.length){if(!y(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!y(n))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!y(r))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!y(i))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return function(t,e,n,r,i,o,a,l,c,p,g,m){var v=b(t,a,p,a,e,l,g,l,n,c,m,c),y=b(p,a,r,t,g,l,i,e,m,c,o,n),w=b(t,a,r,t,e,l,i,e,n,c,o,n),_=b(p,a,p,a,g,l,g,l,m,c,m,c),x=b(r,t,r,t,i,e,i,e,o,n,o,n),S=d(f(u(v,y),u(w,_)),f(u(x,_),u(y,y))),C=d(s(v,u(S,y)),_),E=s(t,u(S,f(r,t))),T=s(e,u(S,f(i,e))),M=s(n,u(S,f(o,n))),k=s(a,u(C,f(p,a))),A=s(l,u(C,f(g,l))),I=s(c,u(C,f(m,c)));return h(E,k)&&h(T,A)&&h(M,I)?[E,T,M]:null}(t[0],t[1],t[2],n[0],n[1],n[2],r[0],r[1],r[2],i[0],i[1],i[2])}throw new TypeError("Arrays with two or thee dimensional points expected")},"Matrix, Matrix, Matrix":function(t,e,n){return l(g(t.valueOf(),e.valueOf(),n.valueOf()))},"Matrix, Matrix, Matrix, Matrix":function(t,e,n,r){return l(g(t.valueOf(),e.valueOf(),n.valueOf(),r.valueOf()))}});function m(e){return"number"==typeof e||t.isBigNumber(e)}function v(t){return 2===t.length&&m(t[0])&&m(t[1])}function y(t){return 3===t.length&&m(t[0])&&m(t[1])&&m(t[2])}function b(t,e,n,r,i,o,a,l,c,d,p,h){var g=u(f(t,e),f(n,r)),m=u(f(i,o),f(a,l)),v=u(f(c,d),f(p,h));return s(s(g,m),v)}return g}},function(t,e,n){"use strict";e.name="distance",e.factory=function(t,e,r,i){r(n(7));var o=r(n(91)),a=r(n(106)),s=r(n(107)),l=r(n(82)),c=r(n(185)),u=r(n(257)),d=r(n(145));function f(e){return"number"==typeof e||t.isBigNumber(e)}function p(t){return t.constructor!==Array&&(t=m(t)),f(t[0])&&f(t[1])}function h(t){return t.constructor!==Array&&(t=m(t)),f(t[0])&&f(t[1])&&f(t[2])}function g(t){return t.constructor!==Array&&(t=m(t)),f(t[0])&&f(t[1])&&f(t[2])&&f(t[3])&&f(t[4])&&f(t[5])}function m(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n}function v(t,e,n,r,i){var a=d(o(o(s(n,t),s(r,e)),i)),c=u(o(s(n,n),s(r,r)));return l(a,c)}function y(t,e,n,r,i,c,d,f,p){var h=[a(s(a(i,e),p),s(a(c,n),f)),a(s(a(c,n),d),s(a(r,t),p)),a(s(a(r,t),f),s(a(i,e),d))];h=u(o(o(s(h[0],h[0]),s(h[1],h[1])),s(h[2],h[2])));var g=u(o(o(s(d,d),s(f,f)),s(p,p)));return l(h,g)}function b(t,e,n,r){var i=a(r,e),l=a(n,t),c=o(s(i,i),s(l,l));return u(c)}function w(t,e,n,r,i,l){var c=a(l,n),d=a(i,e),f=a(r,t),p=o(o(s(c,c),s(d,d)),s(f,f));return u(p)}return i("distance",{"Array, Array, Array":function(t,e,n){if(2==t.length&&2==e.length&&2==n.length){if(!p(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!p(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!p(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var r=l(a(n[1],n[0]),a(e[1],e[0])),i=s(s(r,r),e[0]),o=c(s(r,e[0])),u=t[1];return v(t[0],t[1],i,o,u)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(t,e,n){if(2==Object.keys(t).length&&2==Object.keys(e).length&&2==Object.keys(n).length){if(!p(t))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!p(e))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!p(n))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(t.hasOwnProperty("pointX")&&t.hasOwnProperty("pointY")&&e.hasOwnProperty("lineOnePtX")&&e.hasOwnProperty("lineOnePtY")&&n.hasOwnProperty("lineTwoPtX")&&n.hasOwnProperty("lineTwoPtY")){var r=l(a(n.lineTwoPtY,n.lineTwoPtX),a(e.lineOnePtY,e.lineOnePtX)),i=s(s(r,r),e.lineOnePtX),o=c(s(r,e.lineOnePtX)),u=t.pointX;return v(t.pointX,t.pointY,i,o,u)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(t,e){if(2==t.length&&3==e.length){if(!p(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return v(t[0],t[1],e[0],e[1],e[2])}if(3==t.length&&6==e.length){if(!h(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(e))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(t[0],t[1],t[2],e[0],e[1],e[2],e[3],e[4],e[5])}if(2==t.length&&2==e.length){if(!p(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!p(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");return b(t[0],t[1],e[0],e[1])}if(3==t.length&&3==e.length){if(!h(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return w(t[0],t[1],t[2],e[0],e[1],e[2])}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(t,e){if(2==Object.keys(t).length&&3==Object.keys(e).length){if(!p(t))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(e))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if(t.hasOwnProperty("pointX")&&t.hasOwnProperty("pointY")&&e.hasOwnProperty("xCoeffLine")&&e.hasOwnProperty("yCoeffLine")&&e.hasOwnProperty("constant"))return v(t.pointX,t.pointY,e.xCoeffLine,e.yCoeffLine,e.constant);throw new TypeError("Key names do not match")}if(3==Object.keys(t).length&&6==Object.keys(e).length){if(!h(t))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!g(e))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if(t.hasOwnProperty("pointX")&&t.hasOwnProperty("pointY")&&e.hasOwnProperty("x0")&&e.hasOwnProperty("y0")&&e.hasOwnProperty("z0")&&e.hasOwnProperty("a")&&e.hasOwnProperty("b")&&e.hasOwnProperty("c"))return y(t.pointX,t.pointY,t.pointZ,e.x0,e.y0,e.z0,e.a,e.b,e.c);throw new TypeError("Key names do not match")}if(2==Object.keys(t).length&&2==Object.keys(e).length){if(!p(t))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!p(e))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if(t.hasOwnProperty("pointOneX")&&t.hasOwnProperty("pointOneY")&&e.hasOwnProperty("pointTwoX")&&e.hasOwnProperty("pointTwoY"))return b(t.pointOneX,t.pointOneY,e.pointTwoX,e.pointTwoY);throw new TypeError("Key names do not match")}if(3==Object.keys(t).length&&3==Object.keys(e).length){if(!h(t))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(e))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if(t.hasOwnProperty("pointOneX")&&t.hasOwnProperty("pointOneY")&&t.hasOwnProperty("pointOneZ")&&e.hasOwnProperty("pointTwoX")&&e.hasOwnProperty("pointTwoY")&&e.hasOwnProperty("pointTwoZ"))return w(t.pointOneX,t.pointOneY,t.pointOneZ,e.pointTwoX,e.pointTwoY,e.pointTwoZ);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(t){if(!function(t){if(2==t[0].length&&f(t[0][0])&&f(t[0][1])){for(var e in t)if(2!=t[e].length||!f(t[e][0])||!f(t[e][1]))return!1}else{if(!(3==t[0].length&&f(t[0][0])&&f(t[0][1])&&f(t[0][2])))return!1;for(var e in t)if(3!=t[e].length||!f(t[e][0])||!f(t[e][1])||!f(t[e][2]))return!1}return!0}(t))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(t){for(var e=[],n=0;n<t.length-1;n++)for(var r=n+1;r<t.length;r++)2==t[0].length?e.push(b(t[n][0],t[n][1],t[r][0],t[r][1])):3==t[0].length&&e.push(w(t[n][0],t[n][1],t[n][2],t[r][0],t[r][1],t[r][2]));return e}(t)}})}},function(t,e,n){t.exports=[n(1669),n(772),n(1670),n(1671)]},function(t,e,n){"use strict";e.name="and",e.factory=function(t,e,r,i){var o=n(27),a=r(n(7)),s=r(n(218)),l=r(n(772)),c=(r(n(527)),r(n(131))),u=r(n(391)),d=r(n(94)),f=r(n(41)),p=r(n(35)),h=i("and",{"number, number":function(t,e){return!(!t||!e)},"Complex, Complex":function(t,e){return!(0===t.re&&0===t.im||0===e.re&&0===e.im)},"BigNumber, BigNumber":function(t,e){return!(t.isZero()||e.isZero()||t.isNaN()||e.isNaN())},"Unit, Unit":function(t,e){return h(t.value,e.value)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=u(t,e,h,!1);break;default:n=c(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=c(t,e,h,!1);break;default:n=f(t,e,h)}}return n},"Array, Array":function(t,e){return h(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return h(a(t),e)},"Matrix, Array":function(t,e){return h(t,a(e))},"Matrix, any":function(t,e){if(l(e))return s(t.size(),t.storage());var n;switch(t.storage()){case"sparse":n=d(t,e,h,!1);break;default:n=p(t,e,h,!1)}return n},"any, Matrix":function(t,e){if(l(t))return s(t.size(),t.storage());var n;switch(e.storage()){case"sparse":n=d(e,t,h,!0);break;default:n=p(e,t,h,!0)}return n},"Array, any":function(t,e){return h(a(t),e).valueOf()},"any, Array":function(t,e){return h(t,a(e)).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+o.operators.and+"${args[1]}\\right)"},h}},function(t,e,n){"use strict";e.name="or",e.factory=function(t,e,r,i){var o=n(27),a=r(n(7)),s=r(n(92)),l=r(n(384)),c=r(n(93)),u=r(n(41)),d=r(n(35)),f=i("or",{"number, number":function(t,e){return!(!t&&!e)},"Complex, Complex":function(t,e){return 0!==t.re||0!==t.im||0!==e.re||0!==e.im},"BigNumber, BigNumber":function(t,e){return!t.isZero()&&!t.isNaN()||!e.isZero()&&!e.isNaN()},"Unit, Unit":function(t,e){return f(t.value,e.value)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=l(t,e,f);break;default:n=s(e,t,f,!0)}break;default:switch(e.storage()){case"sparse":n=s(t,e,f,!1);break;default:n=u(t,e,f)}}return n},"Array, Array":function(t,e){return f(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return f(a(t),e)},"Matrix, Array":function(t,e){return f(t,a(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,f,!1);break;default:n=d(t,e,f,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,f,!0);break;default:n=d(e,t,f,!0)}return n},"Array, any":function(t,e){return d(a(t),e,f,!1).valueOf()},"any, Array":function(t,e){return d(a(e),t,f,!0).valueOf()}});return f.toTex={2:"\\left(${args[0]}"+o.operators.or+"${args[1]}\\right)"},f}},function(t,e,n){"use strict";e.name="xor",e.factory=function(t,e,r,i){var o=n(27),a=r(n(7)),s=r(n(92)),l=r(n(143)),c=r(n(93)),u=r(n(41)),d=r(n(35)),f=i("xor",{"number, number":function(t,e){return!!t!=!!e},"Complex, Complex":function(t,e){return(0!==t.re||0!==t.im)!=(0!==e.re||0!==e.im)},"BigNumber, BigNumber":function(t,e){return(!t.isZero()&&!t.isNaN())!=(!e.isZero()&&!e.isNaN())},"Unit, Unit":function(t,e){return f(t.value,e.value)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=l(t,e,f);break;default:n=s(e,t,f,!0)}break;default:switch(e.storage()){case"sparse":n=s(t,e,f,!1);break;default:n=u(t,e,f)}}return n},"Array, Array":function(t,e){return f(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return f(a(t),e)},"Matrix, Array":function(t,e){return f(t,a(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,f,!1);break;default:n=d(t,e,f,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=c(e,t,f,!0);break;default:n=d(e,t,f,!0)}return n},"Array, any":function(t,e){return d(a(t),e,f,!1).valueOf()},"any, Array":function(t,e){return d(a(e),t,f,!0).valueOf()}});return f.toTex={2:"\\left(${args[0]}"+o.operators.xor+"${args[1]}\\right)"},f}},function(t,e,n){t.exports=[n(387),n(1673),n(748),n(1674),n(1675),n(385),n(1676),n(1677),n(1678),n(747),n(1679),n(773),n(1680),n(533),n(750),n(1681),n(1682),n(146),n(774),n(1683),n(112),n(769),n(390),n(218)]},function(t,e,n){"use strict";var r=n(11);e.name="cross",e.factory=function(t,e,i,o){var a=i(n(7)),s=i(n(106)),l=i(n(66)),c=o("cross",{"Matrix, Matrix":function(t,e){return a(u(t.toArray(),e.toArray()))},"Matrix, Array":function(t,e){return a(u(t.toArray(),e))},"Array, Matrix":function(t,e){return a(u(t,e.toArray()))},"Array, Array":u});return c.toTex={2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},c;function u(t,e){var n=Math.max(r.size(t).length,r.size(e).length);t=r.squeeze(t),e=r.squeeze(e);var i=r.size(t),o=r.size(e);if(1!=i.length||1!=o.length||3!=i[0]||3!=o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+i.join(", ")+"], B = ["+o.join(", ")+"])");var a=[s(l(t[1],e[2]),l(t[2],e[1])),s(l(t[2],e[0]),l(t[0],e[2])),s(l(t[0],e[1]),l(t[1],e[0]))];return n>1?[a]:a}}},function(t,e,n){"use strict";var r=n(11),i=(n(28).clone,n(13).isInteger);e.name="diag",e.factory=function(t,e,o,a){var s=o(n(7)),l=a("diag",{Array:function(t){return c(t,0,r.size(t),null)},"Array, number":function(t,e){return c(t,e,r.size(t),null)},"Array, BigNumber":function(t,e){return c(t,e.toNumber(),r.size(t),null)},"Array, string":function(t,e){return c(t,0,r.size(t),e)},"Array, number, string":function(t,e,n){return c(t,e,r.size(t),n)},"Array, BigNumber, string":function(t,e,n){return c(t,e.toNumber(),r.size(t),n)},Matrix:function(t){return c(t,0,t.size(),t.storage())},"Matrix, number":function(t,e){return c(t,e,t.size(),t.storage())},"Matrix, BigNumber":function(t,e){return c(t,e.toNumber(),t.size(),t.storage())},"Matrix, string":function(t,e){return c(t,0,t.size(),e)},"Matrix, number, string":function(t,e,n){return c(t,e,t.size(),n)},"Matrix, BigNumber, string":function(t,e,n){return c(t,e.toNumber(),t.size(),n)}});return l.toTex=void 0,l;function c(e,n,r,o){if(!i(n))throw new TypeError("Second parameter in function diag must be an integer");var a=n>0?n:0,l=n<0?-n:0;switch(r.length){case 1:return function(e,n,r,i,o,a){var s=[i+o,i+a],l=t.Matrix.storage(r||"dense").diagonal(s,e,n);return null!==r?l:l.valueOf()}(e,n,o,r[0],l,a);case 2:return function(e,n,r,i,o,a){if(t.isMatrix(e)){var l=e.diagonal(n);return null!==r?r!==l.storage()?s(l,r):l:l.valueOf()}for(var c=Math.min(i[0]-o,i[1]-a),u=[],d=0;d<c;d++)u[d]=e[d+o][d+a];return null!==r?s(u):u}(e,n,o,r,l,a)}throw new RangeError("Matrix for function diag must be 2 dimensional")}}},function(t,e,n){"use strict";var r=n(11).size;e.name="dot",e.factory=function(t,e,i,o){var a=i(n(105)),s=i(n(66)),l=o("dot",{"Matrix, Matrix":function(t,e){return c(t.toArray(),e.toArray())},"Matrix, Array":function(t,e){return c(t.toArray(),e)},"Array, Matrix":function(t,e){return c(t,e.toArray())},"Array, Array":c});return l.toTex={2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},l;function c(t,e){var n=r(t),i=r(e),o=n[0];if(1!==n.length||1!==i.length)throw new RangeError("Vector expected");if(n[0]!=i[0])throw new RangeError("Vectors must have equal length ("+n[0]+" != "+i[0]+")");if(0==o)throw new RangeError("Cannot calculate the dot product of empty vectors");for(var l=0,c=0;c<o;c++)l=a(l,s(t[c],e[c]));return l}}},function(t,e,n){"use strict";var r=n(11).filter,i=n(11).filterRegExp,o=n(182).maxArgumentCount;function a(t,e){var n=o(e);return r(t,function(t,r,i){return 1===n?e(t):2===n?e(t,[r]):e(t,[r],i)})}e.name="filter",e.factory=function(t,e,r,o){var s=r(n(7)),l=o("filter",{"Array, function":a,"Matrix, function":function(t,e){return s(a(t.toArray(),e))},"Array, RegExp":i,"Matrix, RegExp":function(t,e){return s(i(t.toArray(),e))}});return l.toTex=void 0,l}},function(t,e,n){"use strict";var r=n(28).clone,i=n(11).flatten;e.name="flatten",e.factory=function(t,e,o,a){var s=o(n(7)),l=a("flatten",{Array:function(t){return i(r(t))},Matrix:function(t){var e=i(r(t.toArray()));return s(e)}});return l.toTex=void 0,l}},function(t,e,n){"use strict";var r=n(182).maxArgumentCount,i=n(11).forEach;function o(t,e){var n=r(e),o=function(r,a){Array.isArray(r)?i(r,function(t,e){o(t,a.concat(e))}):1===n?e(r):2===n?e(r,a):e(r,a,t)};o(t,[])}e.name="forEach",e.factory=function(t,e,n,r){var i=r("forEach",{"Array, function":o,"Matrix, function":function(t,e){return t.forEach(e)}});return i.toTex=void 0,i}},function(t,e,n){"use strict";var r=n(11).size;e.name="kron",e.factory=function(t,e,i,o){var a=i(n(7)),s=i(n(107));return o("kron",{"Matrix, Matrix":function(t,e){return a(l(t.toArray(),e.toArray()))},"Matrix, Array":function(t,e){return a(l(t.toArray(),e))},"Array, Matrix":function(t,e){return a(l(t,e.toArray()))},"Array, Array":l});function l(t,e){if(1===r(t).length&&(t=[t]),1===r(e).length&&(e=[e]),r(t).length>2||r(e).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(t.length)+", y = "+JSON.stringify(e.length)+")");var n=[],i=[];return t.map(function(t){return e.map(function(e){return t.map(function(t){return e.map(function(e){return i.push(s(t,e))})},n.push(i=[]))})},n=[])&&n}}},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(11).resize;e.name="ones",e.factory=function(t,e,o,a){var s=o(n(7)),l=a("ones",{"":function(){return"Array"===e.matrix?c([]):c([],"default")},"...number | BigNumber | string":function(t){return"string"==typeof t[t.length-1]?c(t,t.pop()):"Array"===e.matrix?c(t):c(t,"default")},Array:c,Matrix:function(t){var e=t.storage();return c(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return c(t.valueOf(),e)}});return l.toTex=void 0,l;function c(e,n){var o=function(e){var n=!1;return e.forEach(function(e,r,i){t.isBigNumber(e)&&(n=!0,i[r]=e.toNumber())}),n}(e)?new t.BigNumber(1):1;if(function(t){t.forEach(function(t){if("number"!=typeof t||!r(t)||t<0)throw new Error("Parameters in function ones must be positive integers")})}(e),n){var a=s(n);return e.length>0?a.resize(e,o):a}var l=[];return e.length>0?i(l,e,o):l}}},function(t,e,n){"use strict";n(65);var r=n(13).isInteger,i=n(11);e.name="reshape",e.factory=function(t,e,o,a){var s=o(n(7)),l=a("reshape",{"Matrix, Array":function(t,e){return t.reshape?t.reshape(e):s(i.reshape(t.valueOf(),e))},"Array, Array":function(t,e){return e.forEach(function(t){if(!r(t))throw new TypeError("Invalid size for dimension: "+t)}),i.reshape(t,e)}});return l.toTex=void 0,l}},function(t,e,n){"use strict";var r=n(65),i=n(251),o=n(13).isInteger,a=n(45).format,s=n(28).clone,l=n(11);e.name="resize",e.factory=function(t,e,c,u){var d=c(n(7)),f=function(n,c,u){if(2!=arguments.length&&3!=arguments.length)throw new i("resize",arguments.length,2,3);if(t.isMatrix(c)&&(c=c.valueOf()),t.isBigNumber(c[0])&&(c=c.map(function(e){return t.isBigNumber(e)?e.toNumber():e})),t.isMatrix(n))return n.resize(c,u,!0);if("string"==typeof n)return function(t,e,n){if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";if(1!==e.length)throw new r(e.length,1);var i=e[0];if("number"!=typeof i||!o(i))throw new TypeError("Invalid size, must contain positive integers (size: "+a(e)+")");if(t.length>i)return t.substring(0,i);if(t.length<i){for(var s=t,l=0,c=i-t.length;l<c;l++)s+=n;return s}return t}(n,c,u);var f=!Array.isArray(n)&&"Array"!==e.matrix;if(0==c.length){for(;Array.isArray(n);)n=n[0];return s(n)}Array.isArray(n)||(n=[n]),n=s(n);var p=l.resize(n,c,u);return f?d(p):p};return f.toTex=void 0,f}},function(t,e,n){"use strict";var r=n(28),i=n(11);e.name="squeeze",e.factory=function(t,e,o,a){var s=o(n(7)),l=a("squeeze",{Array:function(t){return i.squeeze(r.clone(t))},Matrix:function(t){var e=i.squeeze(t.toArray());return Array.isArray(e)?s(e):e},any:function(t){return r.clone(t)}});return l.toTex=void 0,l}},function(t,e,n){t.exports=[n(393),n(392),n(771),n(1685),n(1686),n(1687),n(1688),n(1690),n(1691)]},function(t,e,n){"use strict";e.name="kldivergence",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(256)),s=r(n(776)),l=r(n(66)),c=r(n(766)),u=r(n(768)),d=r(n(519));function f(t,e){var n=e.size().length,r=t.size().length;if(n>1)throw new Error("first object must be one dimensional");if(r>1)throw new Error("second object must be one dimensional");if(n!==r)throw new Error("Length of two vectors must be equal");if(0===s(t))throw new Error("Sum of elements in first object must be non zero");if(0===s(e))throw new Error("Sum of elements in second object must be non zero");var i=a(t,s(t)),o=a(e,s(e)),f=s(l(i,u(c(i,o))));return d(f)?f:Number.NaN}return i("kldivergence",{"Array, Array":function(t,e){return f(o(t),o(e))},"Matrix, Array":function(t,e){return f(t,o(e))},"Array, Matrix":function(t,e){return f(o(t),e)},"Matrix, Matrix":function(t,e){return f(t,e)}})}},function(t,e,n){"use strict";var r=n(221);e.name="multinomial",e.factory=function(t,e,i,o){var a=i(n(105)),s=i(n(66)),l=i(n(256)),c=i(n(392)),u=i(n(258)),d=i(n(315));return o("multinomial",{"Array | Matrix":function(t){var e=0,n=1;return r(t,function(t){if(!u(t)||!d(t))throw new TypeError("Positive integer value expected in function multinomial");e=a(e,t),n=s(n,c(t))}),l(c(e),n)}})}},function(t,e,n){"use strict";var r=n(13).isInteger;function i(t){return t.isInteger()&&t.gte(0)}e.name="permutations",e.factory=function(t,e,o,a){var s=a("permutations",{"number | BigNumber":o(n(392)),"number, number":function(t,e){var n,i;if(!r(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(!r(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(e>t)throw new TypeError("second argument k must be less than or equal to first argument n");for(n=1,i=t-e+1;i<=t;i++)n*=i;return n},"BigNumber, BigNumber":function(e,n){var r,o;if(!i(e)||!i(n))throw new TypeError("Positive integer value expected in function permutations");if(n.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(r=new t.BigNumber(1),o=e.minus(n).plus(1);o.lte(e);o=o.plus(1))r=r.times(o);return r}});return s.toTex=void 0,s}},function(t,e,n){"use strict";e.name="pickRandom",e.factory=function(t,e,r,i){var o=r(n(534))("uniform").pickRandom;return o.toTex=void 0,o}},function(t,e,n){"use strict";var r=n(777),i=r();e.factory=function(t,e,n,o,a){var s;function l(t){s=null===t?i:r(String(t))}return l(e.randomSeed),a.on("config",function(t,e,n){void 0!==n.randomSeed&&l(t.randomSeed)}),function(){return s()}},e.math=!0},function(t,e,n){"use strict";e.name="random",e.factory=function(t,e,r,i){var o=r(n(534))("uniform").random;return o.toTex=void 0,o}},function(t,e,n){"use strict";e.name="randomInt",e.factory=function(t,e,r,i){var o=r(n(534))("uniform").randomInt;return o.toTex=void 0,o}},function(t,e,n){t.exports=[n(259),n(161),n(1693),n(160),n(184),n(761),n(217),n(1694),n(755)]},function(t,e,n){"use strict";e.name="deepEqual",e.factory=function(t,e,r,i){var o=r(n(160)),a=i("deepEqual",{"any, any":function(t,e){return function t(e,n){if(Array.isArray(e)){if(Array.isArray(n)){var r=e.length;if(r!==n.length)return!1;for(var i=0;i<r;i++)if(!t(e[i],n[i]))return!1;return!0}return!1}return!Array.isArray(n)&&o(e,n)}(t.valueOf(),e.valueOf())}});return a.toTex=void 0,a}},function(t,e,n){"use strict";var r=n(13).nearlyEqual,i=n(215);e.name="smallerEq",e.factory=function(t,e,o,a){var s=o(n(7)),l=o(n(92)),c=o(n(143)),u=o(n(93)),d=o(n(41)),f=o(n(35)),p=n(27),h=a("smallerEq",{"boolean, boolean":function(t,e){return t<=e},"number, number":function(t,n){return t<=n||r(t,n,e.epsilon)},"BigNumber, BigNumber":function(t,n){return t.lte(n)||i(t,n,e.epsilon)},"Fraction, Fraction":function(t,e){return 1!==t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return h(t.value,e.value)},"string, string":function(t,e){return t<=e},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=c(t,e,h);break;default:n=l(e,t,h,!0)}break;default:switch(e.storage()){case"sparse":n=l(t,e,h,!1);break;default:n=d(t,e,h)}}return n},"Array, Array":function(t,e){return h(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return h(s(t),e)},"Matrix, Array":function(t,e){return h(t,s(e))},"Matrix, any":function(t,e){var n;switch(t.storage()){case"sparse":n=u(t,e,h,!1);break;default:n=f(t,e,h,!1)}return n},"any, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=u(e,t,h,!0);break;default:n=f(e,t,h,!0)}return n},"Array, any":function(t,e){return f(s(t),e,h,!1).valueOf()},"any, Array":function(t,e){return f(s(e),t,h,!0).valueOf()}});return h.toTex={2:"\\left(${args[0]}"+p.operators.smallerEq+"${args[1]}\\right)"},h}},function(t,e,n){t.exports=[n(1696),n(778),n(1697),n(779),n(1698),n(1699),n(1700),n(1701),n(780),n(1702)]},function(t,e,n){"use strict";var r=n(11).flatten;e.name="setCartesian",e.factory=function(t,e,i,o){var a=i(n(144)),s=i(n(252)),l=i(n(146)),c=i(n(112)),u=i(n(161));return o("setCartesian",{"Array | Matrix, Array | Matrix":function(t,e){if(0===c(l(t),new a(0))||0===c(l(e),new a(0)))var n=[];else for(var i=r(Array.isArray(t)?t:t.toArray()).sort(u),o=r(Array.isArray(e)?e:e.toArray()).sort(u),d=(n=[],0);d<i.length;d++)for(var f=0;f<o.length;f++)n.push([i[d],o[f]]);return Array.isArray(t)&&Array.isArray(e)?n:new s(n)}})}},function(t,e,n){"use strict";var r=n(11).flatten;e.name="setDistinct",e.factory=function(t,e,i,o){var a=i(n(160)),s=i(n(144)),l=i(n(252)),c=i(n(146)),u=i(n(112)),d=i(n(161));return o("setDistinct",{"Array | Matrix":function(t){if(0===u(c(t),new s(0)))var e=[];else{var n=r(Array.isArray(t)?t:t.toArray()).sort(d);(e=[]).push(n[0]);for(var i=1;i<n.length;i++)a(n[i],n[i-1])||e.push(n[i])}return Array.isArray(t)?e:new l(e)}})}},function(t,e,n){"use strict";var r=n(11).flatten,i=n(11).identify;e.name="setIsSubset",e.factory=function(t,e,o,a){var s=o(n(160)),l=o(n(144)),c=o(n(146)),u=o(n(112)),d=o(n(161));return a("setIsSubset",{"Array | Matrix, Array | Matrix":function(t,e){if(0===u(c(t),new l(0)))return!0;if(0===u(c(e),new l(0)))return!1;for(var n,o=i(r(Array.isArray(t)?t:t.toArray()).sort(d)),a=i(r(Array.isArray(e)?e:e.toArray()).sort(d)),f=0;f<o.length;f++){n=!1;for(var p=0;p<a.length;p++)if(s(o[f].value,a[p].value)&&o[f].identifier===a[p].identifier){n=!0;break}if(!1===n)return!1}return!0}})}},function(t,e,n){"use strict";var r=n(11).flatten;e.name="setMultiplicity",e.factory=function(t,e,i,o){var a=i(n(160)),s=i(n(144)),l=i(n(146)),c=i(n(112));return o("setMultiplicity",{"number | BigNumber | Fraction | Complex, Array | Matrix":function(t,e){if(0===c(l(e),new s(0)))return 0;for(var n=r(Array.isArray(e)?e:e.toArray()),i=0,o=0;o<n.length;o++)a(n[o],t)&&i++;return i}})}},function(t,e,n){"use strict";var r=n(11).flatten;e.name="setPowerset",e.factory=function(t,e,i,o){var a=i(n(144)),s=i(n(146)),l=i(n(112)),c=i(n(161));return o("setPowerset",{"Array | Matrix":function(t){if(0===l(s(t),new a(0)))return[];for(var e=r(Array.isArray(t)?t:t.toArray()).sort(c),n=[],i=0;i.toString(2).length<=e.length;)n.push(u(e,i.toString(2).split("").reverse())),i++;return function(t){for(var e=[],n=t.length-1;n>0;n--)for(var r=0;r<n;r++)t[r].length>t[r+1].length&&(e=t[r],t[r]=t[r+1],t[r+1]=e);return t}(n)}});function u(t,e){for(var n=[],r=0;r<e.length;r++)"1"===e[r]&&n.push(t[r]);return n}}},function(t,e,n){"use strict";var r=n(11).flatten;e.name="setSize",e.factory=function(t,e,i,o){var a=i(n(160)),s=i(n(161));return o("setSize",{"Array | Matrix":function(t){return Array.isArray(t)?r(t).length:r(t.toArray()).length},"Array | Matrix, boolean":function(t,e){if(!1===e||0===t.length)return Array.isArray(t)?r(t).length:r(t.toArray()).length;for(var n=r(Array.isArray(t)?t:t.toArray()).sort(s),i=1,o=1;o<n.length;o++)a(n[o],n[o-1])||i++;return i}})}},function(t,e,n){"use strict";var r=n(11).flatten;e.name="setUnion",e.factory=function(t,e,i,o){var a=i(n(144)),s=i(n(387)),l=i(n(146)),c=i(n(112)),u=i(n(779)),d=i(n(780));return o("setUnion",{"Array | Matrix, Array | Matrix":function(t,e){if(0===c(l(t),new a(0)))return r(e);if(0===c(l(e),new a(0)))return r(t);var n=r(t),i=r(e);return s(d(n,i),u(n,i))}})}},function(t,e,n){t.exports=[n(1704)]},function(t,e,n){"use strict";var r=n(9),i=n(13).sign;var o=.46875,a=.5641895835477563,s=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],l=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],c=Math.pow(2,53);e.name="erf",e.factory=function(t,e,n,u){var d=u("erf",{number:function(t){var e=Math.abs(t);return e>=c?i(t):e<=o?i(t)*function(t){var e,n=t*t,r=s[0][4]*n,i=n;for(e=0;e<3;e+=1)r=(r+s[0][e])*n,i=(i+l[0][e])*n;return t*(r+s[0][3])/(i+l[0][3])}(e):e<=4?i(t)*(1-function(t){var e,n=s[1][8]*t,r=t;for(e=0;e<7;e+=1)n=(n+s[1][e])*t,r=(r+l[1][e])*t;var i=(n+s[1][7])/(r+l[1][7]),o=parseInt(16*t)/16,a=(t-o)*(t+o);return Math.exp(-o*o)*Math.exp(-a)*i}(e)):i(t)*(1-function(t){var e,n=1/(t*t),r=s[2][5]*n,i=n;for(e=0;e<4;e+=1)r=(r+s[2][e])*n,i=(i+l[2][e])*n;var o=n*(r+s[2][4])/(i+l[2][4]);o=(a-o)/t,n=parseInt(16*t)/16;var c=(t-n)*(t+n);return Math.exp(-n*n)*Math.exp(-c)*o}(e))},BigNumber:function(e){return new t.BigNumber(d(e.toNumber()))},"Array | Matrix":function(t){return r(t,d)}});return d.toTex={1:"erf\\left(${args[0]}\\right)"},d}},function(t,e,n){t.exports=[n(1706),n(745),n(746),n(781),n(749),n(1707),n(1708),n(1709),n(1710),n(776),n(782)]},function(t,e,n){"use strict";var r=n(11).flatten;e.name="mad",e.factory=function(t,e,i,o){var a=i(n(145)),s=i(n(773)),l=i(n(781)),c=i(n(106)),u=o("mad",{"Array | Matrix":d,"...":function(t){return d(t)}});return u.toTex=void 0,u;function d(t){if(0===(t=r(t.valueOf())).length)throw new Error("Cannot calculate median absolute deviation of an empty array");var e=l(t);return l(s(t,function(t){return a(c(t,e))}))}}},function(t,e,n){"use strict";var r=n(11).flatten;e.name="mode",e.factory=function(t,e,n,i){return i("mode",{"Array | Matrix":o,"...":function(t){return o(t)}});function o(t){if(0==(t=r(t.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");var e={},n=[],i=0;for(var o in t)t[o]in e||(e[t[o]]=0),e[t[o]]++,e[t[o]]==i?n.push(t[o]):e[t[o]]>i&&(i=e[t[o]],n=[t[o]]);return n}}},function(t,e,n){"use strict";var r=n(221);e.name="prod",e.factory=function(t,e,i,o){var a=i(n(107)),s=o("prod",{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(t,e){throw new Error("prod(A, dim) is not yet supported")},"...":function(t){return l(t)}});return s.toTex=void 0,s;function l(t){var e=void 0;if(r(t,function(t){e=void 0===e?t:a(e,t)}),void 0===e)throw new Error("Cannot calculate prod of an empty array");return e}}},function(t,e,n){"use strict";var r=n(13).isInteger,i=n(13).isNumber,o=n(11).flatten,a=n(255);e.name="quantileSeq",e.factory=function(t,e,s,l){var c=s(n(105)),u=s(n(66)),d=s(n(533)),f=s(n(259));function p(t,e,n){var r=o(t),a=r.length;if(0===a)throw new Error("Cannot calculate quantile of an empty sequence");if(i(e)){var s;if(0==(y=(s=e*(a-1))%1)){var l=n?r[s]:d(r,s);return h(l),l}var p=Math.floor(s);if(n)m=r[p],v=r[p+1];else{v=d(r,p+1),m=r[p];for(var g=0;g<p;++g)f(r[g],m)>0&&(m=r[g])}return h(m),h(v),c(u(m,1-y),u(v,y))}if((s=e.times(a-1)).isInteger())return s=s.toNumber(),l=n?r[s]:d(r,s),h(l),l;p=s.floor();var m,v,y=s.minus(p),b=p.toNumber();if(n)m=r[b],v=r[b+1];else for(v=d(r,b+1),m=r[b],g=0;g<b;++g)f(r[g],m)>0&&(m=r[g]);h(m),h(v);var w=new y.constructor(1);return c(u(m,w.minus(y)),u(v,y))}var h=l({"number | BigNumber | Unit":function(t){return t}});return function(e,n,o){var s,l,c;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(a(e)){if("boolean"==typeof(o=o||!1)){if(l=e.valueOf(),i(n)){if(n<0)throw new Error("N/prob must be non-negative");if(n<=1)return p(l,n,o);if(n>1){if(!r(n))throw new Error("N must be a positive integer");var u=n+1;s=new Array(n);for(var d=0;d<n;)s[d]=p(l,++d/u,o);return s}}if(t.isBigNumber(n)){if(n.isNegative())throw new Error("N/prob must be non-negative");if(c=new n.constructor(1),n.lte(c))return p(l,n,o);if(n.gt(c)){if(!n.isInteger())throw new Error("N must be a positive integer");var f=n.toNumber();if(f>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");for(u=new t.BigNumber(f+1),s=new Array(f),d=0;d<f;)s[d]=p(l,new t.BigNumber(++d).div(u),o);return s}}if(Array.isArray(n)){for(s=new Array(n.length),d=0;d<s.length;++d){var h=n[d];if(i(h)){if(h<0||h>1)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!t.isBigNumber(h))throw new TypeError("Unexpected type of argument in function quantileSeq");if(c=new h.constructor(1),h.isNegative()||h.gt(c))throw new Error("Probability must be between 0 and 1, inclusive")}s[d]=p(l,h,o)}return s}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}}},function(t,e,n){"use strict";e.name="std",e.factory=function(t,e,r,i){var o=r(n(257)),a=r(n(782)),s=i("std",{"Array | Matrix":l,"Array | Matrix, string":l,"...":function(t){return l(t)}});return s.toTex=void 0,s;function l(t,e){if(0==t.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");return o(a.apply(null,arguments))}}},function(t,e,n){t.exports=[n(730),n(1712)]},function(t,e,n){"use strict";var r=n(45).isString,i=n(45).format;function o(t,e,n){return t.replace(/\$([\w\.]+)/g,function(t,o){for(var a=o.split("."),s=e[a.shift()];a.length&&void 0!==s;){var l=a.shift();s=l?s[l]:s+"."}return void 0!==s?r(s)?s:i(s,n):t})}e.name="print",e.factory=function(t,e,n,r){var i=r("print",{"string, Object":o,"string, Object, number | Object":o});return i.toTex=void 0,i}},function(t,e,n){t.exports=[n(1714),n(783),n(1715),n(1716),n(1717),n(1718),n(1719),n(1720),n(1721),n(1722),n(1723),n(1724),n(1725),n(1726),n(1727),n(1728),n(1729),n(1730),n(1731),n(1732),n(1733),n(1734),n(1735),n(1736),n(1737)]},function(t,e,n){"use strict";var r=n(9);e.name="acos",e.factory=function(t,e,n,i){var o=i("acos",{number:function(n){return n>=-1&&n<=1||e.predictable?Math.acos(n):new t.Complex(n,0).acos()},Complex:function(t){return t.acos()},BigNumber:function(t){return t.acos()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\cos^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="acot",e.factory=function(t,e,n,i){var o=i("acot",{number:function(t){return Math.atan(1/t)},Complex:function(t){return t.acot()},BigNumber:function(e){return new t.BigNumber(1).div(e).atan()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\cot^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="acoth",e.factory=function(t,e,n,i){var o=i("acoth",{number:function(n){return n>=1||n<=-1||e.predictable?isFinite(n)?(Math.log((n+1)/n)+Math.log(n/(n-1)))/2:0:new t.Complex(n,0).acoth()},Complex:function(t){return t.acoth()},BigNumber:function(e){return new t.BigNumber(1).div(e).atanh()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\coth^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="acsc",e.factory=function(t,e,n,i){var o=i("acsc",{number:function(n){return n<=-1||n>=1||e.predictable?Math.asin(1/n):new t.Complex(n,0).acsc()},Complex:function(t){return t.acsc()},BigNumber:function(e){return new t.BigNumber(1).div(e).asin()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\csc^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="acsch",e.factory=function(t,e,n,i){var o=i("acsch",{number:function(t){return t=1/t,Math.log(t+Math.sqrt(t*t+1))},Complex:function(t){return t.acsch()},BigNumber:function(e){return new t.BigNumber(1).div(e).asinh()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="asec",e.factory=function(t,e,n,i){var o=i("asec",{number:function(n){return n<=-1||n>=1||e.predictable?Math.acos(1/n):new t.Complex(n,0).asec()},Complex:function(t){return t.asec()},BigNumber:function(e){return new t.BigNumber(1).div(e).acos()},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\sec^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="asech",e.factory=function(t,e,i,o){o.find(i(n(783)),["Complex"]);var a=o("asech",{number:function(n){if(n<=1&&n>=-1||e.predictable){n=1/n;var r=Math.sqrt(n*n-1);return n>0||e.predictable?Math.log(r+n):new t.Complex(Math.log(r-n),Math.PI)}return new t.Complex(n,0).asech()},Complex:function(t){return t.asech()},BigNumber:function(e){return new t.BigNumber(1).div(e).acosh()},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(9);e.name="asin",e.factory=function(t,e,n,i){var o=i("asin",{number:function(n){return n>=-1&&n<=1||e.predictable?Math.asin(n):new t.Complex(n,0).asin()},Complex:function(t){return t.asin()},BigNumber:function(t){return t.asin()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\sin^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="asinh",e.factory=function(t,e,n,i){var o=i("asinh",{number:Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},Complex:function(t){return t.asinh()},BigNumber:function(t){return t.asinh()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\sinh^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);e.name="atan",e.factory=function(t,e,n,i){var o=i("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\tan^{-1}\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";e.name="atan2",e.factory=function(t,e,r,i){var o=r(n(7)),a=r(n(131)),s=r(n(92)),l=r(n(767)),c=r(n(94)),u=r(n(93)),d=r(n(41)),f=r(n(35)),p=i("atan2",{"number, number":Math.atan2,"BigNumber, BigNumber":function(e,n){return t.BigNumber.atan2(e,n)},"Matrix, Matrix":function(t,e){var n;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":n=l(t,e,p,!1);break;default:n=a(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":n=s(t,e,p,!1);break;default:n=d(t,e,p)}}return n},"Array, Array":function(t,e){return p(o(t),o(e)).valueOf()},"Array, Matrix":function(t,e){return p(o(t),e)},"Matrix, Array":function(t,e){return p(t,o(e))},"Matrix, number | BigNumber":function(t,e){var n;switch(t.storage()){case"sparse":n=c(t,e,p,!1);break;default:n=f(t,e,p,!1)}return n},"number | BigNumber, Matrix":function(t,e){var n;switch(e.storage()){case"sparse":n=u(e,t,p,!0);break;default:n=f(e,t,p,!0)}return n},"Array, number | BigNumber":function(t,e){return f(o(t),e,p,!1).valueOf()},"number | BigNumber, Array":function(t,e){return f(o(e),t,p,!0).valueOf()}});return p.toTex={2:"\\mathrm{atan2}\\left(${args}\\right)"},p}},function(t,e,n){"use strict";var r=n(9);var i=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2};e.name="atanh",e.factory=function(t,e,n,o){var a=o("atanh",{number:function(n){return n<=1&&n>=-1||e.predictable?i(n):new t.Complex(n,0).atanh()},Complex:function(t){return t.atanh()},BigNumber:function(t){return t.atanh()},"Array | Matrix":function(t){return r(t,a,!0)}});return a.toTex={1:"\\tanh^{-1}\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(9);e.name="cos",e.factory=function(t,e,n,i){var o=i("cos",{number:Math.cos,Complex:function(t){return t.cos()},BigNumber:function(t){return t.cos()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\cos\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);var i=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2};e.name="cosh",e.factory=function(t,e,n,o){var a=o("cosh",{number:i,Complex:function(t){return t.cosh()},BigNumber:function(t){return t.cosh()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return a(e.value)},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={1:"\\cosh\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(9);e.name="cot",e.factory=function(t,e,n,i){var o=i("cot",{number:function(t){return 1/Math.tan(t)},Complex:function(t){return t.cot()},BigNumber:function(e){return new t.BigNumber(1).div(e.tan())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\cot\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);function i(t){var e=Math.exp(2*t);return(e+1)/(e-1)}e.name="coth",e.factory=function(t,e,n,o){var a=o("coth",{number:i,Complex:function(t){return t.coth()},BigNumber:function(e){return new t.BigNumber(1).div(e.tanh())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return a(e.value)},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={1:"\\coth\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(9);e.name="csc",e.factory=function(t,e,n,i){var o=i("csc",{number:function(t){return 1/Math.sin(t)},Complex:function(t){return t.csc()},BigNumber:function(e){return new t.BigNumber(1).div(e.sin())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\csc\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9),i=n(13).sign;function o(t){return 0==t?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*i(t)}e.name="csch",e.factory=function(t,e,n,i){var a=i("csch",{number:o,Complex:function(t){return t.csch()},BigNumber:function(e){return new t.BigNumber(1).div(e.sinh())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return a(e.value)},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={1:"\\mathrm{csch}\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(9);e.name="sec",e.factory=function(t,e,n,i){var o=i("sec",{number:function(t){return 1/Math.cos(t)},Complex:function(t){return t.sec()},BigNumber:function(e){return new t.BigNumber(1).div(e.cos())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o)}});return o.toTex={1:"\\sec\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);function i(t){return 2/(Math.exp(t)+Math.exp(-t))}e.name="sech",e.factory=function(t,e,n,o){var a=o("sech",{number:i,Complex:function(t){return t.sech()},BigNumber:function(e){return new t.BigNumber(1).div(e.cosh())},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return a(e.value)},"Array | Matrix":function(t){return r(t,a)}});return a.toTex={1:"\\mathrm{sech}\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(9);e.name="sin",e.factory=function(t,e,n,i){var o=i("sin",{number:Math.sin,Complex:function(t){return t.sin()},BigNumber:function(t){return t.sin()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\sin\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);var i=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2};e.name="sinh",e.factory=function(t,e,n,o){var a=o("sinh",{number:i,Complex:function(t){return t.sinh()},BigNumber:function(t){return t.sinh()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return a(e.value)},"Array | Matrix":function(t){return r(t,a,!0)}});return a.toTex={1:"\\sinh\\left(${args[0]}\\right)"},a}},function(t,e,n){"use strict";var r=n(9);e.name="tan",e.factory=function(t,e,n,i){var o=i("tan",{number:Math.tan,Complex:function(t){return t.tan()},BigNumber:function(t){return t.tan()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return o(e.value)},"Array | Matrix":function(t){return r(t,o,!0)}});return o.toTex={1:"\\tan\\left(${args[0]}\\right)"},o}},function(t,e,n){"use strict";var r=n(9);var i=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};e.name="tanh",e.factory=function(t,e,n,o){var a=o("tanh",{number:i,Complex:function(t){return t.tanh()},BigNumber:function(t){return t.tanh()},Unit:function(e){if(!e.hasBase(t.Unit.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return a(e.value)},"Array | Matrix":function(t){return r(t,a,!0)}});return a.toTex={1:"\\tanh\\left(${args[0]}\\right)"},a}},function(t,e,n){t.exports=[n(1739)]},function(t,e,n){"use strict";e.name="to",e.factory=function(t,e,r,i){var o=n(27),a=r(n(7)),s=r(n(41)),l=r(n(35)),c=i("to",{"Unit, Unit | string":function(t,e){return t.to(e)},"Matrix, Matrix":function(t,e){return s(t,e,c)},"Array, Array":function(t,e){return c(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return c(a(t),e)},"Matrix, Array":function(t,e){return c(t,a(e))},"Matrix, any":function(t,e){return l(t,e,c,!1)},"any, Matrix":function(t,e){return l(e,t,c,!0)},"Array, any":function(t,e){return l(a(t),e,c,!1).valueOf()},"any, Array":function(t,e){return l(a(e),t,c,!0).valueOf()}});return c.toTex={2:"\\left(${args[0]}"+o.operators.to+"${args[1]}\\right)"},c}},function(t,e,n){t.exports=[n(754),n(258),n(316),n(519),n(315),n(1741),n(527),n(1742),n(520)]},function(t,e,n){"use strict";var r=n(9);e.name="isPrime",e.factory=function(t,e,n,i){var o=i("isPrime",{number:function(t){if(t<2)return!1;if(2==t)return!0;if(t%2==0)return!1;for(var e=3;e*e<=t;e+=2)if(t%e==0)return!1;return!0},BigNumber:function(e){if(e.lt(2))return!1;if(e.equals(2))return!0;if(e.mod(2).isZero())return!1;for(var n=t.BigNumber(3);n.times(n).lte(e);n=n.plus(1))if(e.mod(n).isZero())return!1;return!0},"Array | Matrix":function(t){return r(t,o)}});return o}},function(t,e,n){"use strict";var r=n(9);n(13);e.name="isNaN",e.factory=function(t,e,n,i){return i("isNaN",{number:function(t){return Number.isNaN(t)},BigNumber:function(t){return t.isNaN()},Fraction:function(t){return!1},Complex:function(t){return t.isNaN()},Unit:function(t){return Number.isNaN(t.value)},"Array | Matrix":function(t){return r(t,Number.isNaN)}})}},function(t,e,n){t.exports=[n(1744)]},function(t,e,n){"use strict";e.name="reviver",e.path="json",e.factory=function(t,e,n,r){return function(e,n){var r=t[n&&n.mathjs];return r&&"function"==typeof r.fromJSON?r.fromJSON(n):n}}},function(t,e,n){"use strict";var r=n(251),i=n(65),o=n(311);t.exports=[{name:"ArgumentsError",path:"error",factory:function(){return r}},{name:"DimensionError",path:"error",factory:function(){return i}},{name:"IndexError",path:"error",factory:function(){return o}}]},,,,,,,,,,,,,function(t,e,n){var r=n(1759)("round");t.exports=r},function(t,e,n){var r=n(60),i=n(310),o=n(102),a=Math.min;t.exports=function(t){var e=Math[t];return function(t,n){if(t=i(t),n=null==n?0:a(r(n),292)){var s=(o(t)+"e").split("e"),l=e(s[0]+"e"+(+s[1]+n));return+((s=(o(l)+"e").split("e"))[0]+"e"+(+s[1]-n))}return e(t)}}},,function(t,e,n){var r=n(786),i=n(368),o=n(369),a=n(370),s=n(535),l=n(500),c=Math.ceil;t.exports=function(t,e){var n=(e=void 0===e?" ":i(e)).length;if(n<2)return n?r(e,t):e;var u=r(e,c(t/s(e)));return a(e)?o(l(u),0,t).join(""):u.slice(0,t)}},function(t,e,n){var r=n(716)("length");t.exports=r},function(t,e){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[o+r+"?",r,a,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+u+c,"g");t.exports=function(t){for(var e=d.lastIndex=0;d.test(t);)++e;return e}},,,,,function(t,e,n){var r=n(250);t.exports=function(t,e){for(var n=t.length;n--&&r(e,t[n],0)>-1;);return n}},function(t,e,n){var r=n(250);t.exports=function(t,e){for(var n=-1,i=t.length;++n<i&&r(e,t[n],0)>-1;);return n}},,,,,,,,,,,function(t,e,n){var r=n(791),i=n(792),o=n(104),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e,n){var r=n(71),i=n(309),o=n(1782),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},,,,,function(t,e,n){var r=n(1788),i=n(158),o=n(379),a=o&&o.isRegExp,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(128),i=n(80),o="[object RegExp]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e,n){var r=n(695)(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});t.exports=r},,,,,,,,,,,,,function(t,e,n){var r=n(786),i=n(147),o=n(60),a=n(102);t.exports=function(t,e,n){return e=(n?i(t,e,n):void 0===e)?1:o(e),r(a(t),e)}},,,,,,,,,,function(t,e,n){var r=n(148),i=n(108);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(148),i=n(509);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(148),i=n(798);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(541),i=n(1817),o=n(1818),a=n(1819),s=n(799),l="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",f="[object RegExp]",p="[object Set]",h="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",_="[object Int16Array]",x="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]";t.exports=function(t,e,n){var M=t.constructor;switch(e){case m:return r(t);case l:case c:return new M(+t);case v:return i(t,n);case y:case b:case w:case _:case x:case S:case C:case E:case T:return s(t,n);case u:return new M;case d:case h:return new M(t);case f:return o(t);case p:return new M;case g:return a(t)}}},function(t,e,n){var r=n(541);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(248),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(1821),i=n(158),o=n(379),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(181),i=n(80),o="[object Map]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e,n){var r=n(1823),i=n(158),o=n(379),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(181),i=n(80),o="[object Set]";t.exports=function(t){return i(t)&&r(t)==o}},,,,,,function(t,e,n){var r=n(400),i=n(79),o=1;t.exports=function(t,e,n){var a=e&o,s=r(t);return function e(){return(this&&this!==i&&this instanceof e?s:t).apply(a?n:this,arguments)}}},function(t,e,n){var r=n(163),i=n(400),o=n(803),a=n(806),s=n(263),l=n(223),c=n(79);t.exports=function(t,e,n){var u=i(t);return function i(){for(var d=arguments.length,f=Array(d),p=d,h=s(i);p--;)f[p]=arguments[p];var g=d<3&&f[0]!==h&&f[d-1]!==h?[]:l(f,h);return(d-=g.length)<n?a(t,e,o,i.placeholder,void 0,f,g,void 0,void 0,n-d):r(this&&this!==c&&this instanceof i?u:t,this,f)}}},function(t,e){t.exports=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}},function(t,e){t.exports={}},function(t,e,n){var r=n(542),i=n(545),o=n(543),a=n(17),s=n(80),l=n(1834),c=Object.prototype.hasOwnProperty;function u(t){if(s(t)&&!a(t)&&!(t instanceof r)){if(t instanceof i)return t;if(c.call(t,"__wrapped__"))return l(t)}return new i(t)}u.prototype=o.prototype,u.prototype.constructor=u,t.exports=u},function(t,e,n){var r=n(542),i=n(545),o=n(189);t.exports=function(t){if(t instanceof r)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=o(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},function(t,e){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;t.exports=function(t){var e=t.match(n);return e?e[1].split(r):[]}},function(t,e){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;t.exports=function(t,e){var r=e.length;if(!r)return t;var i=r-1;return e[i]=(r>1?"& ":"")+e[i],e=e.join(r>2?", ":" "),t.replace(n,"{\n/* [wrapped with "+e+"] */\n")}},function(t,e,n){var r=n(317),i=n(401),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];t.exports=function(t,e){return r(o,function(n){var r="_."+n[0];e&n[1]&&!i(t,r)&&t.push(r)}),t.sort()}},function(t,e,n){var r=n(189),i=n(214),o=Math.min;t.exports=function(t,e){for(var n=t.length,a=o(e.length,n),s=r(t);a--;){var l=e[a];t[a]=i(l,n)?s[l]:void 0}return t}},function(t,e,n){var r=n(163),i=n(400),o=n(79),a=1;t.exports=function(t,e,n,s){var l=e&a,c=i(t);return function e(){for(var i=-1,a=arguments.length,u=-1,d=s.length,f=Array(d+a),p=this&&this!==o&&this instanceof e?c:t;++u<d;)f[u]=s[u];for(;a--;)f[u++]=arguments[++i];return r(p,l?n:this,f)}}},function(t,e,n){var r=n(804),i=n(805),o=n(223),a="__lodash_placeholder__",s=1,l=2,c=4,u=8,d=128,f=256,p=Math.min;t.exports=function(t,e){var n=t[1],h=e[1],g=n|h,m=g<(s|l|d),v=h==d&&n==u||h==d&&n==f&&t[7].length<=e[8]||h==(d|f)&&e[7].length<=e[8]&&n==u;if(!m&&!v)return t;h&s&&(t[2]=e[2],g|=n&s?0:c);var y=e[3];if(y){var b=t[3];t[3]=b?r(b,y,e[4]):y,t[4]=b?o(t[3],a):e[4]}return(y=e[5])&&(b=t[5],t[5]=b?i(b,y,e[6]):y,t[6]=b?o(t[5],a):e[6]),(y=e[7])&&(t[7]=y),h&d&&(t[8]=null==t[8]?e[8]:p(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=g,t}},,,function(t,e,n){var r=n(211),i=n(147),o=n(60);t.exports=function(t,e,n){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&i(t,e,n)?(e=0,n=a):(e=null==e?0:o(e),n=void 0===n?a:o(n)),r(t,e,n)):[]}},,,function(t,e,n){var r=n(811),i=n(797),o=n(799),a=n(189),s=n(800),l=n(305),c=n(17),u=n(264),d=n(249),f=n(34),p=n(71),h=n(547),g=n(308),m=n(812),v=n(1847);t.exports=function(t,e,n,y,b,w,_){var x=m(t,n),S=m(e,n),C=_.get(S);if(C)r(t,n,C);else{var E=w?w(x,S,n+"",t,e,_):void 0,T=void 0===E;if(T){var M=c(S),k=!M&&d(S),A=!M&&!k&&g(S);E=S,M||k||A?c(x)?E=x:u(x)?E=a(x):k?(T=!1,E=i(S,!0)):A?(T=!1,E=o(S,!0)):E=[]:h(S)||l(S)?(E=x,l(x)?E=v(x):p(x)&&!f(x)||(E=s(S))):T=!1}T&&(_.set(S,E),b(E,S,y,w,_),_.delete(S)),r(t,n,E)}}},function(t,e,n){var r=n(148),i=n(108);t.exports=function(t){return r(t,i(t))}},,function(t,e,n){t.exports=n(1850)},function(t,e,n){"use strict";var r=n(123),i=n(813),o=n(1852),a=n(548);function s(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var l=s(a);l.Axios=o,l.create=function(t){return s(r.merge(a,t))},l.Cancel=n(817),l.CancelToken=n(1866),l.isCancel=n(816),l.all=function(t){return Promise.all(t)},l.spread=n(1867),t.exports=l,t.exports.default=l},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var r=n(548),i=n(123),o=n(1861),a=n(1862),s=n(1864),l=n(1865);function c(t){this.defaults=t,this.interceptors={request:new o,response:new o}}c.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(r,this.defaults,{method:"get"},t)).method=t.method.toLowerCase(),t.baseURL&&!s(t.url)&&(t.url=l(t.baseURL,t.url));var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head","options"],function(t){c.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){c.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=c},function(t,e,n){"use strict";var r=n(123);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(815);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";var r=n(123);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var a=[];r.forEach(e,function(t,e){null!==t&&void 0!==t&&(r.isArray(t)&&(e+="[]"),r.isArray(t)||(t=[t]),r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))}))}),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(123);t.exports=function(t){var e,n,i,o={};return t?(r.forEach(t.split("\n"),function(t){i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e&&(o[e]=o[e]?o[e]+", "+n:n)}),o):o}},function(t,e,n){"use strict";var r=n(123);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(){this.message="String contains an invalid character"}i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,n,o=String(t),a="",s=0,l=r;o.charAt(0|s)||(l="=",s%1);a+=l.charAt(63&e>>8-s%1*8)){if((n=o.charCodeAt(s+=.75))>255)throw new i;e=e<<8|n}return a}},function(t,e,n){"use strict";var r=n(123);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(123);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,n){"use strict";var r=n(123),i=n(1863),o=n(816),a=n(548);function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return s(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(s(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(123);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(817);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(1894),i=n(5);function o(t,e,n){function o(t){var e=0;n&&(t=t.filter(n));var r=new Array(2*t.size);return t.forEach(function(t,n){r[e++]=n,r[e++]=t}),r}var a=r.map([i.Map,r.makeWriteHandler({tag:function(){return"iM"},rep:o}),i.OrderedMap,r.makeWriteHandler({tag:function(){return"iOM"},rep:o}),i.List,r.makeWriteHandler({tag:function(){return"iL"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),i.Set,r.makeWriteHandler({tag:function(){return"iS"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),i.OrderedSet,r.makeWriteHandler({tag:function(){return"iOS"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),Function,r.makeWriteHandler({tag:function(){return"_"},rep:function(){return null}}),"default",r.makeWriteHandler({tag:function(){return"iM"},rep:function(t){if(!("toMap"in t)){var e="Error serializing unrecognized object "+t.toString();throw new Error(e)}return o(t.toMap())}})]);return Object.keys(e).forEach(function(t){a.set(e[t],function(t){return r.makeWriteHandler({tag:function(){return"iR"},rep:function(e){return{n:t,v:e.toObject()}}})}(t))}),t.forEach(function(t){a.set(t.class,r.makeWriteHandler({tag:function(){return t.tag},rep:t.write}))}),a}function a(t,e){var n=JSON.stringify(t);throw new Error(e.replace("%j",n))}function s(t){throw new Error("Tried to deserialize Record type named `"+t+"`, but no type with that name was passed to withRecords()")}function l(t){var e=t.records||{},n=t.filter||!1,r=t.missingRecordHandler||s,c=t.extras||[];return{read:function(t,e,n){var r={iM:function(t){for(var e=i.Map().asMutable(),n=0;n<t.length;n+=2)e=e.set(t[n],t[n+1]);return e.asImmutable()},iOM:function(t){for(var e=i.OrderedMap().asMutable(),n=0;n<t.length;n+=2)e=e.set(t[n],t[n+1]);return e.asImmutable()},iL:function(t){return i.List(t)},iS:function(t){return i.Set(t)},iOS:function(t){return i.OrderedSet(t)},iR:function(t){var r=e[t.n];return r?new r(t.v):n(t.n,t.v)}};return t.forEach(function(t){r[t.tag]=t.read}),r}(c,e,r),write:o(c,e,n),withExtraHandlers:function(t){return function(t){Array.isArray(t)||a(t,"Expected array of handlers, got %j"),t.forEach(function(t){"string"!=typeof t.tag&&a(t,"Expected %j to have property 'tag' which is a string"),"function"!=typeof t.class&&a(t,"Expected %j to have property 'class' which is a constructor function"),"function"!=typeof t.write&&a(t,"Expected %j to have property 'write' which is a function"),"function"!=typeof t.read&&a(t,"Expected %j to have property 'write' which is a function")})}(t),l({extras:c.concat(t),records:e,filter:n,missingRecordHandler:r})},withFilter:function(t){return l({extras:c,records:e,filter:t,missingRecordHandler:r})},withRecords:function(t,e){var r=function(t){var e={};return t.forEach(function(t){var n=function(t){return t._name||t.constructor.name||"Record"}(new t({}));if(!n||"Record"===n)throw new Error("Cannot (de)serialize Record() without a name");if(e[n])throw new Error("There's already a constructor for a Record named "+n);e[n]=t}),e}(t);return l({extras:c,records:r,filter:n,missingRecordHandler:e})}}}t.exports=function t(e){var n=function(t){return r.reader("json",{mapBuilder:{init:function(){return{}},add:function(t,e,n){return t[e]=n,t},finalize:function(t){return t}},handlers:t})}(e.read),i=function(t){return r.writer("json",{handlers:t})}(e.write);return{toJSON:function(t){return i.write(t)},fromJSON:function(t){return n.read(t)},withExtraHandlers:function(n){return t(e.withExtraHandlers(n))},withFilter:function(n){return t(e.withFilter(n))},withRecords:function(n,r){return t(e.withRecords(n,r))}}}(l({})),t.exports.handlers=l({})},function(module,exports,__webpack_require__){(function(global){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.checkStringArgs=function(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""},$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,r){if(e){for(n=$jscomp.global,t=t.split("."),r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("String.prototype.repeat",function(t){return t||function(t){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var n="";t;)1&t&&(n+=e),(t>>>=1)&&(e+=e);return n}},"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var e=0;return $jscomp.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(t,e){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var n=0,r={next:function(){if(n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},$jscomp.polyfill("Array.prototype.entries",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t,e){return[t,e]})}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6-impl","es3"),$jscomp.polyfill("Array.prototype.values",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t,e){return e})}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(t){return void 0!==t},goog.exportPath_=function(t,e,n){t=t.split("."),n=n||goog.global,t[0]in n||!n.execScript||n.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)!t.length&&goog.isDef(e)?n[r]=e:n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}},goog.define=function(t,e){var n=e;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(n=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,n)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(t){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');goog.constructNamespace_(t)},goog.constructNamespace_=function(t,e){if(!COMPILED){delete goog.implicitNamespaces_[t];for(var n=t;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(t,e)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(!goog.isString(t)||!t||-1==t.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=t,!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t]}},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){if(!COMPILED){if(t in goog.loadedModules_)return goog.loadedModules_[t];if(!goog.implicitNamespaces_[t])return null!=(t=goog.getObjectByName(t))?t:null}return null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},COMPILED||(goog.isProvided_=function(t){return t in goog.loadedModules_||!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(t,e){for(var n,r=t.split("."),i=e||goog.global;n=r.shift();){if(!goog.isDefAndNotNull(i[n]))return null;i=i[n]}return i},goog.globalize=function(t,e){var n,r=e||goog.global;for(n in t)r[n]=t[n]},goog.addDependency=function(t,e,n,r){if(goog.DEPENDENCIES_ENABLED){var i;t=t.replace(/\\/g,"/");var o=goog.dependencies_;r&&"boolean"!=typeof r||(r=r?{module:"goog"}:{});for(var a=0;i=e[a];a++)o.nameToPath[i]=t,o.loadFlags[t]=r;for(r=0;e=n[r];r++)t in o.requires||(o.requires[t]={}),o.requires[t][e]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(t),goog.isProvided_(t)){if(goog.isInModuleLoader_())return goog.module.getInternal_(t)}else if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(!e)throw t="goog.require could not find: "+t,goog.logToConsole_(t),Error(t);goog.writeScripts_(e)}return null}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.instance_=void 0,t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.TRANSPILER="transpile.js",goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return null!=t&&"write"in t},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var t=goog.global.document.getElementsByTagName("SCRIPT"),e=t.length-1;0<=e;--e){var n=t[e].src,r=-1==(r=n.lastIndexOf("?"))?n.length:r;if("base.js"==n.substr(r-7,7)){goog.basePath=n.substr(0,r-7);break}}},goog.importScript_=function(t,e){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(t,e)&&(goog.dependencies_.written[t]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.oldIeWaiting_=!1,goog.importProcessedScript_=function(t,e,n){goog.importScript_("",'goog.retrieveAndExec_("'+t+'", '+e+", "+n+");")},goog.queuedModules_=[],goog.wrapModule_=function(t,e){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+t+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+t+"\n"},goog.loadQueuedModules_=function(){var t=goog.queuedModules_.length;if(0<t){var e=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;n<t;n++)goog.maybeProcessDeferredPath_(e[n])}goog.oldIeWaiting_=!1},goog.maybeProcessDeferredDep_=function(t){goog.isDeferredModule_(t)&&goog.allDepsAreAvailable_(t)&&(t=goog.getPathFromDeps_(t),goog.maybeProcessDeferredPath_(goog.basePath+t))},goog.isDeferredModule_=function(t){var e=(t=goog.getPathFromDeps_(t))&&goog.dependencies_.loadFlags[t]||{},n=e.lang||"es3";return!(!t||"goog"!=e.module&&!goog.needsTranspile_(n))&&goog.basePath+t in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(t){if((t=goog.getPathFromDeps_(t))&&t in goog.dependencies_.requires)for(var e in goog.dependencies_.requires[t])if(!goog.isProvided_(e)&&!goog.isDeferredModule_(e))return!1;return!0},goog.maybeProcessDeferredPath_=function(t){if(t in goog.dependencies_.deferred){var e=goog.dependencies_.deferred[t];delete goog.dependencies_.deferred[t],goog.globalEval(e)}},goog.loadModuleFromUrl=function(t){goog.retrieveAndExec_(t,!0,!1)},goog.writeScriptSrcNode_=function(t){goog.global.document.write('<script type="text/javascript" src="'+t+'"><\/script>')},goog.appendScriptSrcNode_=function(t){var e=goog.global.document,n=e.createElement("script");n.type="text/javascript",n.src=t,n.defer=!1,n.async=!1,e.head.appendChild(n)},goog.writeScriptTag_=function(t,e){if(goog.inHtmlDocument_()){var n=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==n.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}if(void 0===e)if(goog.IS_OLD_IE_){goog.oldIeWaiting_=!0;var r=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";n.write('<script type="text/javascript" src="'+t+'"'+r+"><\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(t):goog.writeScriptSrcNode_(t);else n.write('<script type="text/javascript">'+goog.protectScriptTag_(e)+"<\/script>");return!0}return!1},goog.protectScriptTag_=function(t){return t.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.needsTranspile_=function(t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(goog.requiresTranspilation_||(goog.requiresTranspilation_=goog.createRequiresTranspilation_()),t in goog.requiresTranspilation_)return goog.requiresTranspilation_[t];throw Error("Unknown language mode: "+t)},goog.requiresTranspilation_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(t,e){return"complete"==t.readyState&&goog.lastNonModuleScriptIndex_==e&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(t){var e=[],n={},r=goog.dependencies_;!function t(i){if(!(i in r.written||i in r.visited)){if(r.visited[i]=!0,i in r.requires)for(var o in r.requires[i])if(!goog.isProvided_(o)){if(!(o in r.nameToPath))throw Error("Undefined nameToPath for "+o);t(r.nameToPath[o])}i in n||(n[i]=!0,e.push(i))}}(t);for(var i=0;i<e.length;i++)t=e[i],goog.dependencies_.written[t]=!0;var o=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,i=0;i<e.length;i++){if(!(t=e[i]))throw goog.moduleLoaderState_=o,Error("Undefined script input");var a=r.loadFlags[t]||{},s=goog.needsTranspile_(a.lang||"es3");"goog"==a.module||s?goog.importProcessedScript_(goog.basePath+t,"goog"==a.module,s):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=o},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(t){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(t){return"(function(){"+t+"\n;})();\n"},goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(t))var n=t.call(void 0,{});else{if(!goog.isString(t))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(t=goog.workaroundSafari10EvalBug(t)),n=goog.loadModuleFromSource_.call(void 0,t)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[r]=n}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(t){t=t.split("/");for(var e=0;e<t.length;)"."==t[e]?t.splice(e,1):e&&".."==t[e]&&t[e-1]&&".."!=t[e-1]?t.splice(--e,2):e++;return t.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),0==e.status||200==e.status?e.responseText:null}catch(t){return null}},goog.retrieveAndExec_=function(t,e,n){if(!COMPILED){var r=t;t=goog.normalizePath_(t);var i=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,o=goog.loadFileSync_(t);if(null==o)throw Error('Load of "'+t+'" failed');n&&(o=goog.transpile_.call(goog.global,o,t)),o=e?goog.wrapModule_(t,o):o+"\n//# sourceURL="+t,goog.IS_OLD_IE_&&goog.oldIeWaiting_?(goog.dependencies_.deferred[r]=o,goog.queuedModules_.push(r)):i(t,o)}},goog.transpile_=function(a,b){var c=goog.global.$jscomp;c||(goog.global.$jscomp=c={});var d=c.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,f=goog.loadFileSync_(e);if(f){if(eval(f+"\n//# sourceURL="+e),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,c=goog.global.$jscomp,d=c.transpile}}return d||(d=c.transpile=function(t,e){return goog.logToConsole_(e+" requires transpilation but no transpiler was found."),t}),d(a,b)},goog.typeOf=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){null!==t&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){if("object"==(n=goog.typeOf(t))||"array"==n){if(t.clone)return t.clone();var e,n="array"==n?[]:{};for(e in t)n[e]=goog.cloneObject(t[e]);return n}return t},goog.bindNative_=function(t,e,n){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(t,e){for(var n in e)t[n]=e[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,n=e.createElement("SCRIPT");n.type="text/javascript",n.defer=!1,n.appendChild(e.createTextNode(t)),e.body.appendChild(n),e.body.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(t,e){if("."==String(t).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+t);var n=function(t){return goog.cssNameMapping_[t]||t},r=function(t){t=t.split("-");for(var e=[],r=0;r<t.length;r++)e.push(n(t[r]));return e.join("-")};r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(t){return t},r=e?t+"-"+r(e):r(t);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(r):r},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,e){return e&&(t=t.replace(/\{\$([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,n){goog.exportPath_(t,e,n)},goog.exportProperty=function(t,e,n){t[e]=n},goog.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.base=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}},goog.base=function(t,e,n){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(r.superClass_){for(var i=Array(arguments.length-1),o=1;o<arguments.length;o++)i[o-1]=arguments[o];return r.superClass_.constructor.apply(t,i)}for(i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];o=!1;for(var a=t.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[e]===r)o=!0;else if(o)return a.prototype[e].apply(t,i);if(t[e]===r)return t.constructor.prototype[e].apply(t,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,e){var n=e.constructor,r=e.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,t),t&&goog.inherits(n,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(n.prototype,e),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var n=!goog.defineClass.isUnsealable_(e),r=function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],this.constructor===r&&n&&Object.seal instanceof Function&&Object.seal(e),e};return r},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.createRequiresTranspilation_=function(){function a(t,e){d?c[t]=!0:e()?c[t]=!1:d=c[t]=!0}function b(a){try{return!!eval(a)}catch(t){return!1}}var c={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){var t=e.match(/Edge\/(\d+)(\.\d)*/i);return!(t&&15>Number(t[1]))&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es6-impl",function(){return!0}),a("es7",function(){return b("2 ** 2 == 4")}),a("es8",function(){return b("async () => 1, true")}),c},goog.debug={},goog.debug.Error=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.string={},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:" "},goog.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},goog.string.endsWith=function(t,e){var n=t.length-e.length;return 0<=n&&t.indexOf(e,n)==n},goog.string.caseInsensitiveStartsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(0,e.length))},goog.string.caseInsensitiveEndsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))},goog.string.caseInsensitiveEquals=function(t,e){return t.toLowerCase()==e.toLowerCase()},goog.string.subs=function(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.isEmptyString=function(t){return 0==t.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(t){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return" "==t},goog.string.isUnicodeChar=function(t){return 1==t.length&&" "<=t&&"~">=t||""<=t&&"�">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(t,e){var n=String(t).toLowerCase(),r=String(e).toLowerCase();return n<r?-1:n==r?0:1},goog.string.numberAwareCompare_=function(t,e,n){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var r=t.toLowerCase().match(n),i=e.toLowerCase().match(n),o=Math.min(r.length,i.length),a=0;a<o;a++){n=r[a];var s=i[a];if(n!=s)return t=parseInt(n,10),!isNaN(t)&&(e=parseInt(s,10),!isNaN(e)&&t-e)?t-e:n<s?-1:1}return r.length!=i.length?r.length-i.length:t<e?-1:1},goog.string.intAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.htmlEscape=function(t,e){if(e)t=t.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(t=t.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(t))return t;-1!=t.indexOf("&")&&(t=t.replace(goog.string.AMP_RE_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(goog.string.LT_RE_,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(goog.string.GT_RE_,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(goog.string.QUOT_RE_,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=t.indexOf("e")&&(t=t.replace(goog.string.E_RE_,"&#101;"))}return t},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesWithDocument=function(t,e){return goog.string.contains(t,"&")?goog.string.unescapeEntitiesUsingDom_(t,e):t},goog.string.unescapeEntitiesUsingDom_=function(t,e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=e?e.createElement("div"):goog.global.document.createElement("div");return t.replace(goog.string.HTML_ENTITY_PATTERN_,function(t,e){var i=n[t];if(i)return i;if("#"==e.charAt(0)){var o=Number("0"+e.substr(1));isNaN(o)||(i=String.fromCharCode(o))}return i||(r.innerHTML=t+" ",i=r.firstChild.nodeValue.slice(0,-1)),n[t]=i})},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,function(t,e){switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==e.charAt(0)){var n=Number("0"+e.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return t}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,e){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(t){return t.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=1==n?e:e.charAt(r);if(t.charAt(0)==i&&t.charAt(t.length-1)==i)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,e,n){return n&&(t=goog.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),n&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,e,n,r){if(n&&(t=goog.string.unescapeEntities(t)),r&&t.length>e){r>e&&(r=e);var i=t.length-r;t=t.substring(0,e-r)+"..."+t.substring(i)}else t.length>e&&(r=Math.floor(e/2),i=t.length-r,t=t.substring(0,r+e%2)+"..."+t.substring(i));return n&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){t=String(t);for(var e=['"'],n=0;n<t.length;n++){var r=t.charAt(n),i=r.charCodeAt(0);e[n+1]=goog.string.specialEscapeChars_[r]||(31<i&&127>i?r:goog.string.escapeChar(r))}return e.push('"'),e.join("")},goog.string.escapeString=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=goog.string.escapeChar(t.charAt(n));return e.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var e=t.charCodeAt(0);if(31<e&&127>e)var n=t;else 256>e?(n="\\x",(16>e||256<e)&&(n+="0")):(n="\\u",4096>e&&(n+="0")),n+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[t]=n},goog.string.contains=function(t,e){return-1!=t.indexOf(e)},goog.string.caseInsensitiveContains=function(t,e){return goog.string.contains(t.toLowerCase(),e.toLowerCase())},goog.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},goog.string.removeAt=function(t,e,n){var r=t;return 0<=e&&e<t.length&&0<n&&(r=t.substr(0,e)+t.substr(e+n,t.length-e-n)),r},goog.string.remove=function(t,e){return t.replace(e,"")},goog.string.removeAll=function(t,e){var n=new RegExp(goog.string.regExpEscape(e),"g");return t.replace(n,"")},goog.string.replaceAll=function(t,e,n){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(t,e){return t.repeat(e)}:function(t,e){return Array(e+1).join(t)},goog.string.padNumber=function(t,e,n){return-1==(n=(t=goog.isDef(n)?t.toFixed(n):String(t)).indexOf("."))&&(n=t.length),goog.string.repeat("0",Math.max(0,e-n))+t},goog.string.makeSafe=function(t){return null==t?"":String(t)},goog.string.buildString=function(t){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(t,e){for(var n=0,r=goog.string.trim(String(t)).split("."),i=goog.string.trim(String(e)).split("."),o=Math.max(r.length,i.length),a=0;0==n&&a<o;a++){var s=r[a]||"",l=i[a]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==s[0].length&&0==l[0].length)break;n=0==s[1].length?0:parseInt(s[1],10);var c=0==l[1].length?0:parseInt(l[1],10);n=goog.string.compareElements_(n,c)||goog.string.compareElements_(0==s[2].length,0==l[2].length)||goog.string.compareElements_(s[2],l[2]),s=s[3],l=l[3]}while(0==n)}return n},goog.string.compareElements_=function(t,e){return t<e?-1:t>e?1:0},goog.string.hashCode=function(t){for(var e=0,n=0;n<t.length;++n)e=31*e+t.charCodeAt(n)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var e=Number(t);return 0==e&&goog.string.isEmptyOrWhitespace(t)?NaN:e},goog.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},goog.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,e){var n=goog.isString(e)?goog.string.regExpEscape(e):"\\s";return t.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(t,e,n){return e+n.toUpperCase()})},goog.string.capitalize=function(t){return String(t.charAt(0)).toUpperCase()+String(t.substr(1)).toLowerCase()},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),goog.isString(t)?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.string.splitLimit=function(t,e,n){t=t.split(e);for(var r=[];0<n&&t.length;)r.push(t.shift()),n--;return t.length&&r.push(t.join(e)),r},goog.string.lastComponent=function(t,e){if(!e)return t;"string"==typeof e&&(e=[e]);for(var n=-1,r=0;r<e.length;r++)if(""!=e[r]){var i=t.lastIndexOf(e[r]);i>n&&(n=i)}return-1==n?t:t.slice(n+1)},goog.string.editDistance=function(t,e){var n=[],r=[];if(t==e)return 0;if(!t.length||!e.length)return Math.max(t.length,e.length);for(var i=0;i<e.length+1;i++)n[i]=i;for(i=0;i<t.length;i++){r[0]=i+1;for(var o=0;o<e.length;o++)r[o+1]=Math.min(r[o]+1,n[o+1]+1,n[o]+Number(t[i]!=e[o]));for(o=0;o<n.length;o++)n[o]=r[o]}return r[e.length]},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(t,e){e.unshift(t),goog.debug.Error.call(this,goog.string.subs.apply(null,e)),e.shift(),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(t){throw t},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(t,e,n,r){var i="Assertion failed";if(n){i+=": "+n;var o=r}else t&&(i+=": "+t,o=e);t=new goog.asserts.AssertionError(""+i,o||[]),goog.asserts.errorHandler_(t)},goog.asserts.setErrorHandler=function(t){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=t)},goog.asserts.assert=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(t)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(t)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertFunction=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(t)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertElement=function(t,e,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,e,n,r){return!goog.asserts.ENABLE_ASSERTS||t instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(t)],n,Array.prototype.slice.call(arguments,3)),t},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)goog.asserts.fail(t+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):null===t?"null":typeof t},goog.object={},goog.object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},goog.object.forEach=function(t,e,n){for(var r in t)e.call(n,t[r],r,t)},goog.object.filter=function(t,e,n){var r,i={};for(r in t)e.call(n,t[r],r,t)&&(i[r]=t[r]);return i},goog.object.map=function(t,e,n){var r,i={};for(r in t)i[r]=e.call(n,t[r],r,t);return i},goog.object.some=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return!0;return!1},goog.object.every=function(t,e,n){for(var r in t)if(!e.call(n,t[r],r,t))return!1;return!0},goog.object.getCount=function(t){var e,n=0;for(e in t)n++;return n},goog.object.getAnyKey=function(t){for(var e in t)return e},goog.object.getAnyValue=function(t){for(var e in t)return t[e]},goog.object.contains=function(t,e){return goog.object.containsValue(t,e)},goog.object.getValues=function(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n},goog.object.getKeys=function(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n},goog.object.getValueByKeys=function(t,e){for(var n=(r=goog.isArrayLike(e))?e:arguments,r=r?0:1;r<n.length&&(t=t[n[r]],goog.isDef(t));r++);return t},goog.object.containsKey=function(t,e){return null!==t&&e in t},goog.object.containsValue=function(t,e){for(var n in t)if(t[n]==e)return!0;return!1},goog.object.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},goog.object.findValue=function(t,e,n){return(e=goog.object.findKey(t,e,n))&&t[e]},goog.object.isEmpty=function(t){for(var e in t)return!1;return!0},goog.object.clear=function(t){for(var e in t)delete t[e]},goog.object.remove=function(t,e){var n;return(n=e in t)&&delete t[e],n},goog.object.add=function(t,e,n){if(null!==t&&e in t)throw Error('The object already contains the key "'+e+'"');goog.object.set(t,e,n)},goog.object.get=function(t,e,n){return null!==t&&e in t?t[e]:n},goog.object.set=function(t,e,n){t[e]=n},goog.object.setIfUndefined=function(t,e,n){return e in t?t[e]:t[e]=n},goog.object.setWithReturnValueIfNotSet=function(t,e,n){return e in t?t[e]:(n=n(),t[e]=n)},goog.object.equals=function(t,e){for(var n in t)if(!(n in e)||t[n]!==e[n])return!1;for(n in e)if(!(n in t))return!1;return!0},goog.object.clone=function(t){var e,n={};for(e in t)n[e]=t[e];return n},goog.object.unsafeClone=function(t){if("object"==(n=goog.typeOf(t))||"array"==n){if(goog.isFunction(t.clone))return t.clone();var e,n="array"==n?[]:{};for(e in t)n[e]=goog.object.unsafeClone(t[e]);return n}return t},goog.object.transpose=function(t){var e,n={};for(e in t)n[t[e]]=e;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<goog.object.PROTOTYPE_FIELDS_.length;o++)n=goog.object.PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}},goog.object.create=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var n={},r=0;r<e;r+=2)n[arguments[r]]=arguments[r+1];return n},goog.object.createSet=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},r=0;r<e;r++)n[arguments[r]]=!0;return n},goog.object.createImmutableView=function(t){var e=t;return Object.isFrozen&&!Object.isFrozen(t)&&(e=Object.create(t),Object.freeze(e)),e},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.object.getAllPropertyNames=function(t,e,n){if(!t)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(t);for(var r={};t&&(t!==Object.prototype||e)&&(t!==Function.prototype||n);){for(var i=Object.getOwnPropertyNames(t),o=0;o<i.length;o++)r[i[o]]=!0;t=Object.getPrototypeOf(t)}return goog.object.getKeys(r)},goog.reflect={},goog.reflect.object=function(t,e){return e},goog.reflect.objectProperty=function(t,e){return t},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,e){try{return goog.reflect.sinkValue(t[e]),!0}catch(t){}return!1},goog.reflect.cache=function(t,e,n,r){return r=r?r(e):e,Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=n(e)},goog.math={},goog.math.Long=function(t,e){this.low_=0|t,this.high_=0|e},goog.math.Long.IntCache_={},goog.math.Long.valueCache_={},goog.math.Long.getCachedIntValue_=function(t){return goog.reflect.cache(goog.math.Long.IntCache_,t,function(t){return new goog.math.Long(t,0>t?-1:0)})},goog.math.Long.MAX_VALUE_FOR_RADIX_="  111111111111111111111111111111111111111111111111111111111111111 2021110011022210012102010021220101220221 13333333333333333333333333333333 1104332401304422434310311212 1540241003031030222122211 22341010611245052052300 777777777777777777777 67404283172107811827 9223372036854775807 1728002635214590697 41a792678515120367 10b269549075433c37 4340724c6c71dc7a7 160e2ad3246366807 7fffffffffffffff 33d3d8307b214008 16agh595df825fa7 ba643dci0ffeehh 5cbfjia3fh26ja7 2heiciiie82dh97 1adaibb21dckfa7 i6k448cf4192c2 acd772jnc9l0l7 64ie1focnn5g77 3igoecjbmca687 27c48l5b37oaop 1bk39f3ah3dmq7 q1se8f0m04isb hajppbc1fc207 bm03i95hia437 7vvvvvvvvvvvv 5hg4ck9jd4u37 3tdtk1v8j6tpp 2pijmikexrxp7 1y2p0ij32e8e7".split(" "),goog.math.Long.MIN_VALUE_FOR_RADIX_="  -1000000000000000000000000000000000000000000000000000000000000000 -2021110011022210012102010021220101220222 -20000000000000000000000000000000 -1104332401304422434310311213 -1540241003031030222122212 -22341010611245052052301 -1000000000000000000000 -67404283172107811828 -9223372036854775808 -1728002635214590698 -41a792678515120368 -10b269549075433c38 -4340724c6c71dc7a8 -160e2ad3246366808 -8000000000000000 -33d3d8307b214009 -16agh595df825fa8 -ba643dci0ffeehi -5cbfjia3fh26ja8 -2heiciiie82dh98 -1adaibb21dckfa8 -i6k448cf4192c3 -acd772jnc9l0l8 -64ie1focnn5g78 -3igoecjbmca688 -27c48l5b37oaoq -1bk39f3ah3dmq8 -q1se8f0m04isc -hajppbc1fc208 -bm03i95hia438 -8000000000000 -5hg4ck9jd4u38 -3tdtk1v8j6tpq -2pijmikexrxp8 -1y2p0ij32e8e8".split(" "),goog.math.Long.fromInt=function(t){var e=0|t;return goog.asserts.assert(t===e,"value should be a 32-bit integer"),-128<=e&&128>e?goog.math.Long.getCachedIntValue_(e):new goog.math.Long(e,0>e?-1:0)},goog.math.Long.fromNumber=function(t){return isNaN(t)?goog.math.Long.getZero():t<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMinValue():t+1>=goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMaxValue():0>t?goog.math.Long.fromNumber(-t).negate():new goog.math.Long(t%goog.math.Long.TWO_PWR_32_DBL_|0,t/goog.math.Long.TWO_PWR_32_DBL_|0)},goog.math.Long.fromBits=function(t,e){return new goog.math.Long(t,e)},goog.math.Long.fromString=function(t,e){if(0==t.length)throw Error("number format error: empty string");var n=e||10;if(2>n||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return goog.math.Long.fromString(t.substring(1),n).negate();if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character: '+t);for(var r=goog.math.Long.fromNumber(Math.pow(n,8)),i=goog.math.Long.getZero(),o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),s=parseInt(t.substring(o,o+a),n);8>a?(a=goog.math.Long.fromNumber(Math.pow(n,a)),i=i.multiply(a).add(goog.math.Long.fromNumber(s))):i=(i=i.multiply(r)).add(goog.math.Long.fromNumber(s))}return i},goog.math.Long.isStringInRange=function(t,e){var n=e||10;if(2>n||36<n)throw Error("radix out of range: "+n);return n="-"==t.charAt(0)?goog.math.Long.MIN_VALUE_FOR_RADIX_[n]:goog.math.Long.MAX_VALUE_FOR_RADIX_[n],t.length<n.length||t.length==n.length&&t<=n},goog.math.Long.TWO_PWR_16_DBL_=65536,goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2,goog.math.Long.getZero=function(){return goog.math.Long.getCachedIntValue_(0)},goog.math.Long.getOne=function(){return goog.math.Long.getCachedIntValue_(1)},goog.math.Long.getNegOne=function(){return goog.math.Long.getCachedIntValue_(-1)},goog.math.Long.getMaxValue=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.MAX_VALUE,function(){return goog.math.Long.fromBits(-1,2147483647)})},goog.math.Long.getMinValue=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.MIN_VALUE,function(){return goog.math.Long.fromBits(0,-2147483648)})},goog.math.Long.getTwoPwr24=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.TWO_PWR_24,function(){return goog.math.Long.fromInt(16777216)})},goog.math.Long.prototype.toInt=function(){return this.low_},goog.math.Long.prototype.toNumber=function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},goog.math.Long.prototype.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(goog.math.Long.getMinValue())){var e=goog.math.Long.fromNumber(t),n=this.div(e);return e=n.multiply(e).subtract(this),n.toString(t)+e.toInt().toString(t)}return"-"+this.negate().toString(t)}n=goog.math.Long.fromNumber(Math.pow(t,6)),e=this;for(var r="";;){var i=e.div(n),o=(e.subtract(i.multiply(n)).toInt()>>>0).toString(t);if((e=i).isZero())return o+r;for(;6>o.length;)o="0"+o;r=""+o+r}},goog.math.Long.prototype.getHighBits=function(){return this.high_},goog.math.Long.prototype.getLowBits=function(){return this.low_},goog.math.Long.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_},goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.getMinValue())?64:this.negate().getNumBitsAbs();for(var t=0!=this.high_?this.high_:this.low_,e=31;0<e&&0==(t&1<<e);e--);return 0!=this.high_?e+33:e+1},goog.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},goog.math.Long.prototype.isNegative=function(){return 0>this.high_},goog.math.Long.prototype.isOdd=function(){return 1==(1&this.low_)},goog.math.Long.prototype.equals=function(t){return this.high_==t.high_&&this.low_==t.low_},goog.math.Long.prototype.notEquals=function(t){return this.high_!=t.high_||this.low_!=t.low_},goog.math.Long.prototype.lessThan=function(t){return 0>this.compare(t)},goog.math.Long.prototype.lessThanOrEqual=function(t){return 0>=this.compare(t)},goog.math.Long.prototype.greaterThan=function(t){return 0<this.compare(t)},goog.math.Long.prototype.greaterThanOrEqual=function(t){return 0<=this.compare(t)},goog.math.Long.prototype.compare=function(t){if(this.equals(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.subtract(t).isNegative()?-1:1},goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.getMinValue())?goog.math.Long.getMinValue():this.not().add(goog.math.Long.getOne())},goog.math.Long.prototype.add=function(t){var e=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,i=t.high_>>>16,o=65535&t.high_,a=t.low_>>>16;return r=0+((a=0+((t=(65535&this.low_)+(65535&t.low_)+0)>>>16)+(r+a))>>>16),e=0+((r+=n+o)>>>16)+(e+i)&65535,goog.math.Long.fromBits((65535&a)<<16|65535&t,e<<16|65535&r)},goog.math.Long.prototype.subtract=function(t){return this.add(t.negate())},goog.math.Long.prototype.multiply=function(t){if(this.isZero()||t.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue()))return t.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(t.equals(goog.math.Long.getMinValue()))return this.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(goog.math.Long.getTwoPwr24())&&t.lessThan(goog.math.Long.getTwoPwr24()))return goog.math.Long.fromNumber(this.toNumber()*t.toNumber());var e=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,i=65535&this.low_,o=t.high_>>>16,a=65535&t.high_,s=t.low_>>>16,l=0+i*(t=65535&t.low_),c=0+(l>>>16)+r*t,u=0+(c>>>16);u+=(c=(65535&c)+i*s)>>>16;var d=0+((u+=n*t)>>>16);return d=(d+=(u=(65535&u)+r*s)>>>16)+((u=(65535&u)+i*a)>>>16)+(e*t+n*s+r*a+i*o)&65535,goog.math.Long.fromBits((65535&c)<<16|65535&l,d<<16|65535&u)},goog.math.Long.prototype.div=function(t){if(t.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue())){if(t.equals(goog.math.Long.getOne())||t.equals(goog.math.Long.getNegOne()))return goog.math.Long.getMinValue();if(t.equals(goog.math.Long.getMinValue()))return goog.math.Long.getOne();var e=this.shiftRight(1);if((e=e.div(t).shiftLeft(1)).equals(goog.math.Long.getZero()))return t.isNegative()?goog.math.Long.getOne():goog.math.Long.getNegOne();var n=this.subtract(t.multiply(e));return e.add(n.div(t))}if(t.equals(goog.math.Long.getMinValue()))return goog.math.Long.getZero();if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();var r=goog.math.Long.getZero();for(n=this;n.greaterThanOrEqual(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var i=48>=(i=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,i-48),o=goog.math.Long.fromNumber(e),a=o.multiply(t);a.isNegative()||a.greaterThan(n);)e-=i,a=(o=goog.math.Long.fromNumber(e)).multiply(t);o.isZero()&&(o=goog.math.Long.getOne()),r=r.add(o),n=n.subtract(a)}return r},goog.math.Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_)},goog.math.Long.prototype.and=function(t){return goog.math.Long.fromBits(this.low_&t.low_,this.high_&t.high_)},goog.math.Long.prototype.or=function(t){return goog.math.Long.fromBits(this.low_|t.low_,this.high_|t.high_)},goog.math.Long.prototype.xor=function(t){return goog.math.Long.fromBits(this.low_^t.low_,this.high_^t.high_)},goog.math.Long.prototype.shiftLeft=function(t){if(0==(t&=63))return this;var e=this.low_;return 32>t?goog.math.Long.fromBits(e<<t,this.high_<<t|e>>>32-t):goog.math.Long.fromBits(0,e<<t-32)},goog.math.Long.prototype.shiftRight=function(t){if(0==(t&=63))return this;var e=this.high_;return 32>t?goog.math.Long.fromBits(this.low_>>>t|e<<32-t,e>>t):goog.math.Long.fromBits(e>>t-32,0<=e?0:-1)},goog.math.Long.prototype.shiftRightUnsigned=function(t){if(0==(t&=63))return this;var e=this.high_;return 32>t?goog.math.Long.fromBits(this.low_>>>t|e<<32-t,e>>>t):32==t?goog.math.Long.fromBits(e,0):goog.math.Long.fromBits(e>>>t-32,0)},goog.math.Long.ValueCacheId_={MAX_VALUE:1,MIN_VALUE:2,TWO_PWR_24:6};var com={cognitect:{}};com.cognitect.transit={},com.cognitect.transit.delimiters={},com.cognitect.transit.delimiters.ESC="~",com.cognitect.transit.delimiters.TAG="#",com.cognitect.transit.delimiters.SUB="^",com.cognitect.transit.delimiters.RES="`",com.cognitect.transit.delimiters.ESC_TAG="~#",com.cognitect.transit.caching={},com.cognitect.transit.caching.MIN_SIZE_CACHEABLE=3,com.cognitect.transit.caching.BASE_CHAR_IDX=48,com.cognitect.transit.caching.CACHE_CODE_DIGITS=44,com.cognitect.transit.caching.MAX_CACHE_ENTRIES=com.cognitect.transit.caching.CACHE_CODE_DIGITS*com.cognitect.transit.caching.CACHE_CODE_DIGITS,com.cognitect.transit.caching.MAX_CACHE_SIZE=4096,com.cognitect.transit.caching.isCacheable=function(t,e){if(t.length>com.cognitect.transit.caching.MIN_SIZE_CACHEABLE){if(e)return!0;var n=t.charAt(0),r=t.charAt(1);return n===com.cognitect.transit.delimiters.ESC&&(":"===r||"$"===r||"#"===r)}return!1},com.cognitect.transit.caching.idxToCode=function(t){var e=Math.floor(t/com.cognitect.transit.caching.CACHE_CODE_DIGITS);return t=String.fromCharCode(t%com.cognitect.transit.caching.CACHE_CODE_DIGITS+com.cognitect.transit.caching.BASE_CHAR_IDX),0===e?com.cognitect.transit.delimiters.SUB+t:com.cognitect.transit.delimiters.SUB+String.fromCharCode(e+com.cognitect.transit.caching.BASE_CHAR_IDX)+t},com.cognitect.transit.caching.WriteCache=function(){this.cacheSize=this.gen=this.idx=0,this.cache={}},com.cognitect.transit.caching.WriteCache.prototype.write=function(t,e){if(com.cognitect.transit.caching.isCacheable(t,e)){this.cacheSize===com.cognitect.transit.caching.MAX_CACHE_SIZE?(this.clear(),this.gen=0,this.cache={}):this.idx===com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&this.clear();var n=this.cache[t];return null==n?(this.cache[t]=[com.cognitect.transit.caching.idxToCode(this.idx),this.gen],this.idx++,t):n[1]!=this.gen?(n[1]=this.gen,n[0]=com.cognitect.transit.caching.idxToCode(this.idx),this.idx++,t):n[0]}return t},com.cognitect.transit.caching.WriteCache.prototype.clear=function(){this.idx=0,this.gen++},com.cognitect.transit.caching.writeCache=function(){return new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.caching.isCacheCode=function(t){return t.charAt(0)===com.cognitect.transit.delimiters.SUB&&" "!==t.charAt(1)},com.cognitect.transit.caching.codeToIdx=function(t){return 2===t.length?t.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX:(t.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX)*com.cognitect.transit.caching.CACHE_CODE_DIGITS+(t=t.charCodeAt(2)-com.cognitect.transit.caching.BASE_CHAR_IDX)},com.cognitect.transit.caching.ReadCache=function(){this.idx=0,this.cache=[]},com.cognitect.transit.caching.ReadCache.prototype.write=function(t,e){return this.idx==com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&(this.idx=0),this.cache[this.idx]=t,this.idx++,t},com.cognitect.transit.caching.ReadCache.prototype.read=function(t,e){return this.cache[com.cognitect.transit.caching.codeToIdx(t)]},com.cognitect.transit.caching.ReadCache.prototype.clear=function(){this.idx=0},com.cognitect.transit.caching.readCache=function(){return new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.util={},com.cognitect.transit.util.objectKeys=void 0!==Object.keys?function(t){return Object.keys(t)}:function(t){return goog.object.getKeys(t)},com.cognitect.transit.util.isArray=void 0!==Array.isArray?function(t){return Array.isArray(t)}:function(t){return"array"===goog.typeOf(t)},com.cognitect.transit.util.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",com.cognitect.transit.util.randInt=function(t){return Math.round(Math.random()*t)},com.cognitect.transit.util.randHex=function(){return com.cognitect.transit.util.randInt(15).toString(16)},com.cognitect.transit.util.randomUUID=function(){var t=(8|3&com.cognitect.transit.util.randInt(14)).toString(16);return com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-4"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+t+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()},com.cognitect.transit.util.btoa=function(t){if("undefined"!=typeof btoa)return btoa(t);t=String(t);for(var e,n,r=0,i=com.cognitect.transit.util.chars,o="";t.charAt(0|r)||(i="=",r%1);o+=i.charAt(63&e>>8-r%1*8)){if(255<(n=t.charCodeAt(r+=.75)))throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return o},com.cognitect.transit.util.atob=function(t){if("undefined"!=typeof atob)return atob(t);if(1==(t=String(t).replace(/=+$/,"")).length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,n,r=0,i=0,o="";n=t.charAt(i++);~n&&(e=r%4?64*e+n:n,r++%4)?o+=String.fromCharCode(255&e>>(-2*r&6)):0)n=com.cognitect.transit.util.chars.indexOf(n);return o},com.cognitect.transit.util.Uint8ToBase64=function(t){for(var e,n=0,r=t.length,i="";n<r;)e=t.subarray(n,Math.min(n+32768,r)),i+=String.fromCharCode.apply(null,e),n+=32768;return com.cognitect.transit.util.btoa(i)},com.cognitect.transit.util.Base64ToUint8=function(t){for(var e=(t=com.cognitect.transit.util.atob(t)).length,n=new Uint8Array(e),r=0;r<e;r++){var i=t.charCodeAt(r);n[r]=i}return n},com.cognitect.transit.eq={},com.cognitect.transit.eq.hashCodeProperty="transit$hashCode$",com.cognitect.transit.eq.hashCodeCounter=1,com.cognitect.transit.eq.equals=function(t,e){if(null==t)return null==e;if(t===e)return!0;if("object"==typeof t){if(com.cognitect.transit.util.isArray(t)){if(com.cognitect.transit.util.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!com.cognitect.transit.eq.equals(t[n],e[n]))return!1;return!0}return!1}if(t.com$cognitect$transit$equals)return t.com$cognitect$transit$equals(e);if(null!=e&&"object"==typeof e){if(e.com$cognitect$transit$equals)return e.com$cognitect$transit$equals(t);n=0;var r,i=com.cognitect.transit.util.objectKeys(e).length;for(r in t)if(t.hasOwnProperty(r)&&(n++,!e.hasOwnProperty(r)||!com.cognitect.transit.eq.equals(t[r],e[r])))return!1;return n===i}}return!1},com.cognitect.transit.eq.hashCombine=function(t,e){return t^e+2654435769+(t<<6)+(t>>2)},com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=0,com.cognitect.transit.eq.STR_CACHE_MAX=256,com.cognitect.transit.eq.hashString=function(t){var e=com.cognitect.transit.eq.stringCodeCache[t];if(null!=e)return e;for(var n=e=0;n<t.length;++n)e=31*e+t.charCodeAt(n),e%=4294967296;return com.cognitect.transit.eq.stringCodeCacheSize++,com.cognitect.transit.eq.stringCodeCacheSize>=com.cognitect.transit.eq.STR_CACHE_MAX&&(com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=1),com.cognitect.transit.eq.stringCodeCache[t]=e},com.cognitect.transit.eq.hashMapLike=function(t){var e=0;if(null!=t.forEach)t.forEach(function(t,n,r){e=(e+(com.cognitect.transit.eq.hashCode(n)^com.cognitect.transit.eq.hashCode(t)))%4503599627370496});else for(var n=com.cognitect.transit.util.objectKeys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];e=(e+(com.cognitect.transit.eq.hashCode(i)^com.cognitect.transit.eq.hashCode(o)))%4503599627370496}return e},com.cognitect.transit.eq.hashArrayLike=function(t){var e=0;if(com.cognitect.transit.util.isArray(t))for(var n=0;n<t.length;n++)e=com.cognitect.transit.eq.hashCombine(e,com.cognitect.transit.eq.hashCode(t[n]));else t.forEach&&t.forEach(function(t,n){e=com.cognitect.transit.eq.hashCombine(e,com.cognitect.transit.eq.hashCode(t))});return e},com.cognitect.transit.eq.hashCode=function(t){if(null==t)return 0;switch(typeof t){case"number":return t;case"boolean":return!0===t?1:0;case"string":return com.cognitect.transit.eq.hashString(t);case"function":var e=t[com.cognitect.transit.eq.hashCodeProperty];return e||(e=com.cognitect.transit.eq.hashCodeCounter,void 0!==Object.defineProperty?Object.defineProperty(t,com.cognitect.transit.eq.hashCodeProperty,{value:e,enumerable:!1}):t[com.cognitect.transit.eq.hashCodeProperty]=e,com.cognitect.transit.eq.hashCodeCounter++),e;default:return t instanceof Date?t.valueOf():com.cognitect.transit.util.isArray(t)?com.cognitect.transit.eq.hashArrayLike(t):t.com$cognitect$transit$hashCode?t.com$cognitect$transit$hashCode():com.cognitect.transit.eq.hashMapLike(t)}},com.cognitect.transit.eq.extendToEQ=function(t,e){return t.com$cognitect$transit$hashCode=e.hashCode,t.com$cognitect$transit$equals=e.equals,t},com.cognitect.transit.types={},com.cognitect.transit.types.ITERATOR="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",com.cognitect.transit.types.TaggedValue=function(t,e){this.tag=t,this.rep=e,this.hashCode=-1},com.cognitect.transit.types.TaggedValue.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"},com.cognitect.transit.types.TaggedValue.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.TaggedValue.prototype.equiv=com.cognitect.transit.types.TaggedValue.prototype.equiv,com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&(this.tag===t.tag&&com.cognitect.transit.eq.equals(this.rep,t.rep))},com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCombine(com.cognitect.transit.eq.hashCode(this.tag),com.cognitect.transit.eq.hashCode(this.rep))),this.hashCode},com.cognitect.transit.types.taggedValue=function(t,e){return new com.cognitect.transit.types.TaggedValue(t,e)},com.cognitect.transit.types.isTaggedValue=function(t){return t instanceof com.cognitect.transit.types.TaggedValue},com.cognitect.transit.types.nullValue=function(){return null},com.cognitect.transit.types.boolValue=function(t){return"t"===t},com.cognitect.transit.types.MAX_INT=goog.math.Long.fromString("9007199254740991"),com.cognitect.transit.types.MIN_INT=goog.math.Long.fromString("-9007199254740991"),com.cognitect.transit.types.intValue=function(t){return"number"==typeof t||t instanceof goog.math.Long?t:(t=goog.math.Long.fromString(t,10)).greaterThan(com.cognitect.transit.types.MAX_INT)||t.lessThan(com.cognitect.transit.types.MIN_INT)?t:t.toNumber()},goog.math.Long.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},goog.math.Long.prototype.equiv=goog.math.Long.prototype.equiv,goog.math.Long.prototype.com$cognitect$transit$equals=function(t){return t instanceof goog.math.Long&&this.equals(t)},goog.math.Long.prototype.com$cognitect$transit$hashCode=function(){return this.toInt()},com.cognitect.transit.types.isInteger=function(t){return t instanceof goog.math.Long||"number"==typeof t&&!isNaN(t)&&1/0!==t&&parseFloat(t)===parseInt(t,10)},com.cognitect.transit.types.floatValue=function(t){return parseFloat(t)},com.cognitect.transit.types.bigInteger=function(t){return com.cognitect.transit.types.taggedValue("n",t)},com.cognitect.transit.types.isBigInteger=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"n"===t.tag},com.cognitect.transit.types.bigDecimalValue=function(t){return com.cognitect.transit.types.taggedValue("f",t)},com.cognitect.transit.types.isBigDecimal=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"f"===t.tag},com.cognitect.transit.types.charValue=function(t){return t},com.cognitect.transit.types.Keyword=function(t){this._name=t,this.hashCode=-1},com.cognitect.transit.types.Keyword.prototype.toString=function(){return":"+this._name},com.cognitect.transit.types.Keyword.prototype.namespace=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(0,t):null},com.cognitect.transit.types.Keyword.prototype.name=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(t+1,this._name.length):this._name},com.cognitect.transit.types.Keyword.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.Keyword.prototype.equiv=com.cognitect.transit.types.Keyword.prototype.equiv,com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.Keyword&&this._name==t._name},com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.keyword=function(t){return new com.cognitect.transit.types.Keyword(t)},com.cognitect.transit.types.isKeyword=function(t){return t instanceof com.cognitect.transit.types.Keyword},com.cognitect.transit.types.Symbol=function(t){this._name=t,this.hashCode=-1},com.cognitect.transit.types.Symbol.prototype.namespace=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(0,t):null},com.cognitect.transit.types.Symbol.prototype.name=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(t+1,this._name.length):this._name},com.cognitect.transit.types.Symbol.prototype.toString=function(){return this._name},com.cognitect.transit.types.Symbol.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.Symbol.prototype.equiv=com.cognitect.transit.types.Symbol.prototype.equiv,com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.Symbol&&this._name==t._name},com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.symbol=function(t){return new com.cognitect.transit.types.Symbol(t)},com.cognitect.transit.types.isSymbol=function(t){return t instanceof com.cognitect.transit.types.Symbol},com.cognitect.transit.types.hexFor=function(t,e,n){var r="";n=n||e+1;for(var i=8*(7-e),o=goog.math.Long.fromInt(255).shiftLeft(i);e<n;e++,i-=8,o=o.shiftRightUnsigned(8)){var a=t.and(o).shiftRightUnsigned(i).toString(16);1==a.length&&(a="0"+a),r+=a}return r},com.cognitect.transit.types.UUID=function(t,e){this.high=t,this.low=e,this.hashCode=-1},com.cognitect.transit.types.UUID.prototype.getLeastSignificantBits=function(){return this.low},com.cognitect.transit.types.UUID.prototype.getMostSignificantBits=function(){return this.high},com.cognitect.transit.types.UUID.prototype.toString=function(){var t=this.high,e=this.low,n=com.cognitect.transit.types.hexFor(t,0,4)+"-";return n+=com.cognitect.transit.types.hexFor(t,4,6)+"-",n+=com.cognitect.transit.types.hexFor(t,6,8)+"-",(n+=com.cognitect.transit.types.hexFor(e,0,2)+"-")+com.cognitect.transit.types.hexFor(e,2,8)},com.cognitect.transit.types.UUID.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.UUID.prototype.equiv=com.cognitect.transit.types.UUID.prototype.equiv,com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.UUID&&this.high.equals(t.high)&&this.low.equals(t.low)},com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this.toString())),this.hashCode},com.cognitect.transit.types.UUIDfromString=function(t){var e,n;t=t.replace(/-/g,"");var r=e=0;for(n=24;8>r;r+=2,n-=8)e|=parseInt(t.substring(r,r+2),16)<<n;var i=0;for(r=8,n=24;16>r;r+=2,n-=8)i|=parseInt(t.substring(r,r+2),16)<<n;var o=goog.math.Long.fromBits(i,e);for(e=0,r=16,n=24;24>r;r+=2,n-=8)e|=parseInt(t.substring(r,r+2),16)<<n;for(i=0,n=r=24;32>r;r+=2,n-=8)i|=parseInt(t.substring(r,r+2),16)<<n;return t=goog.math.Long.fromBits(i,e),new com.cognitect.transit.types.UUID(o,t)},com.cognitect.transit.types.uuid=function(t){return com.cognitect.transit.types.UUIDfromString(t)},com.cognitect.transit.types.isUUID=function(t){return t instanceof com.cognitect.transit.types.UUID},com.cognitect.transit.types.date=function(t){return t="number"==typeof t?t:parseInt(t,10),new Date(t)},com.cognitect.transit.types.verboseDate=function(t){return new Date(t)},Date.prototype.com$cognitect$transit$equals=function(t){return t instanceof Date&&this.valueOf()===t.valueOf()},Date.prototype.com$cognitect$transit$hashCode=function(){return this.valueOf()},com.cognitect.transit.types.binary=function(t,e){return e&&!1===e.preferBuffers||void 0===goog.global.Buffer?"undefined"!=typeof Uint8Array?com.cognitect.transit.util.Base64ToUint8(t):com.cognitect.transit.types.taggedValue("b",t):new goog.global.Buffer(t,"base64")},com.cognitect.transit.types.isBinary=function(t){return void 0!==goog.global.Buffer&&t instanceof goog.global.Buffer||("undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t instanceof com.cognitect.transit.types.TaggedValue&&"b"===t.tag)},com.cognitect.transit.types.uri=function(t){return com.cognitect.transit.types.taggedValue("r",t)},com.cognitect.transit.types.isURI=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"r"===t.tag},com.cognitect.transit.types.KEYS=0,com.cognitect.transit.types.VALUES=1,com.cognitect.transit.types.ENTRIES=2,com.cognitect.transit.types.TransitArrayMapIterator=function(t,e){this.entries=t,this.type=e||com.cognitect.transit.types.KEYS,this.idx=0},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=function(){if(this.idx<this.entries.length){var t={value:this.type===com.cognitect.transit.types.KEYS?this.entries[this.idx]:this.type===com.cognitect.transit.types.VALUES?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],done:!1};return this.idx+=2,t}return{value:null,done:!0}},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=com.cognitect.transit.types.TransitArrayMapIterator.prototype.next,com.cognitect.transit.types.TransitArrayMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.TransitMapIterator=function(t,e){this.map=t,this.type=e||com.cognitect.transit.types.KEYS,this.keys=this.map.getKeys(),this.idx=0,this.bucket=null,this.bucketIdx=0},com.cognitect.transit.types.TransitMapIterator.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.bucketIdx<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.bucketIdx=0);var t={value:this.type===com.cognitect.transit.types.KEYS?this.bucket[this.bucketIdx]:this.type===com.cognitect.transit.types.VALUES?this.bucket[this.bucketIdx+1]:[this.bucket[this.bucketIdx],this.bucket[this.bucketIdx+1]],done:!1};return this.idx++,this.bucketIdx+=2,t}return{value:null,done:!0}},com.cognitect.transit.types.TransitMapIterator.prototype.next=com.cognitect.transit.types.TransitMapIterator.prototype.next,com.cognitect.transit.types.TransitMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.mapEquals=function(t,e){if(t instanceof com.cognitect.transit.types.TransitMap&&com.cognitect.transit.types.isMap(e)){if(t.size!==e.size)return!1;for(var n in t.map)for(var r=t.map[n],i=0;i<r.length;i+=2)if(!com.cognitect.transit.eq.equals(r[i+1],e.get(r[i])))return!1;return!0}if(t instanceof com.cognitect.transit.types.TransitArrayMap&&com.cognitect.transit.types.isMap(e)){if(t.size!==e.size)return!1;for(n=t._entries,i=0;i<n.length;i+=2)if(!com.cognitect.transit.eq.equals(n[i+1],e.get(n[i])))return!1;return!0}if(null!=e&&"object"==typeof e&&(n=(i=com.cognitect.transit.util.objectKeys(e)).length,t.size===n)){for(r=0;r<n;r++){var o=i[r];if(!t.has(o)||!com.cognitect.transit.eq.equals(e[o],t.get(o)))return!1}return!0}return!1},com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD=8,com.cognitect.transit.types.ARRAY_MAP_THRESHOLD=32,com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD=32,com.cognitect.transit.types.print=function(t){return null==t?"null":goog.isArray(t)?"["+t.toString()+"]":goog.isString(t)?'"'+t+'"':t.toString()},com.cognitect.transit.types.printMap=function(t){var e=0,n="TransitMap {";return t.forEach(function(r,i){n+=com.cognitect.transit.types.print(i)+" => "+com.cognitect.transit.types.print(r),e<t.size-1&&(n+=", "),e++}),n+"}"},com.cognitect.transit.types.printSet=function(t){var e=0,n="TransitSet {";return t.forEach(function(r){n+=com.cognitect.transit.types.print(r),e<t.size-1&&(n+=", "),e++}),n+"}"},com.cognitect.transit.types.TransitArrayMap=function(t){this._entries=t,this.backingMap=null,this.hashCode=-1,this.size=t.length/2,this.accesses=0},com.cognitect.transit.types.TransitArrayMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitArrayMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitArrayMap.prototype.convert=function(){if(this.backingMap)throw Error("Invalid operation, already converted");return!(this.size<com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD)&&(this.accesses++,this.accesses>com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=[],!0))},com.cognitect.transit.types.TransitArrayMap.prototype.clear=function(){this.hashCode=-1,this.backingMap?this.backingMap.clear():this._entries=[],this.size=0},com.cognitect.transit.types.TransitArrayMap.prototype.clear=com.cognitect.transit.types.TransitArrayMap.prototype.clear,com.cognitect.transit.types.TransitArrayMap.prototype.keys=function(){return this.backingMap?this.backingMap.keys():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitArrayMap.prototype.keys=com.cognitect.transit.types.TransitArrayMap.prototype.keys,com.cognitect.transit.types.TransitArrayMap.prototype.keySet=function(){if(this.backingMap)return this.backingMap.keySet();for(var t=[],e=0,n=0;n<this._entries.length;e++,n+=2)t[e]=this._entries[n];return t},com.cognitect.transit.types.TransitArrayMap.prototype.keySet=com.cognitect.transit.types.TransitArrayMap.prototype.keySet,com.cognitect.transit.types.TransitArrayMap.prototype.entries=function(){return this.backingMap?this.backingMap.entries():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitArrayMap.prototype.entries=com.cognitect.transit.types.TransitArrayMap.prototype.entries,com.cognitect.transit.types.TransitArrayMap.prototype.values=function(){return this.backingMap?this.backingMap.values():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitArrayMap.prototype.values=com.cognitect.transit.types.TransitArrayMap.prototype.values,com.cognitect.transit.types.TransitArrayMap.prototype.forEach=function(t){if(this.backingMap)this.backingMap.forEach(t);else for(var e=0;e<this._entries.length;e+=2)t(this._entries[e+1],this._entries[e])},com.cognitect.transit.types.TransitArrayMap.prototype.forEach=com.cognitect.transit.types.TransitArrayMap.prototype.forEach,com.cognitect.transit.types.TransitArrayMap.prototype.get=function(t,e){if(this.backingMap)return this.backingMap.get(t);if(this.convert())return this.get(t);for(var n=0;n<this._entries.length;n+=2)if(com.cognitect.transit.eq.equals(this._entries[n],t))return this._entries[n+1];return e},com.cognitect.transit.types.TransitArrayMap.prototype.get=com.cognitect.transit.types.TransitArrayMap.prototype.get,com.cognitect.transit.types.TransitArrayMap.prototype.has=function(t){if(this.backingMap)return this.backingMap.has(t);if(this.convert())return this.has(t);for(var e=0;e<this._entries.length;e+=2)if(com.cognitect.transit.eq.equals(this._entries[e],t))return!0;return!1},com.cognitect.transit.types.TransitArrayMap.prototype.has=com.cognitect.transit.types.TransitArrayMap.prototype.has,com.cognitect.transit.types.TransitArrayMap.prototype.set=function(t,e){if(this.hashCode=-1,this.backingMap)this.backingMap.set(t,e),this.size=this.backingMap.size;else{for(var n=0;n<this._entries.length;n+=2)if(com.cognitect.transit.eq.equals(this._entries[n],t))return void(this._entries[n+1]=e);this._entries.push(t),this._entries.push(e),this.size++,this.size>com.cognitect.transit.types.ARRAY_MAP_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=null)}},com.cognitect.transit.types.TransitArrayMap.prototype.set=com.cognitect.transit.types.TransitArrayMap.prototype.set,com.cognitect.transit.types.TransitArrayMap.prototype.delete=function(t){if(this.hashCode=-1,this.backingMap)return t=this.backingMap.delete(t),this.size=this.backingMap.size,t;for(var e=0;e<this._entries.length;e+=2)if(com.cognitect.transit.eq.equals(this._entries[e],t))return t=this._entries[e+1],this._entries.splice(e,2),this.size--,t},com.cognitect.transit.types.TransitArrayMap.prototype.clone=function(){var t=com.cognitect.transit.types.map();return this.forEach(function(e,n){t.set(n,e)}),t},com.cognitect.transit.types.TransitArrayMap.prototype.clone=com.cognitect.transit.types.TransitArrayMap.prototype.clone,com.cognitect.transit.types.TransitArrayMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$hashCode=function(){return this.backingMap?this.backingMap.com$cognitect$transit$hashCode():(-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode)},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$equals=function(t){return this.backingMap?com.cognitect.transit.types.mapEquals(this.backingMap,t):com.cognitect.transit.types.mapEquals(this,t)},com.cognitect.transit.types.TransitMap=function(t,e,n){this.map=e||{},this._keys=t||[],this.size=n||0,this.hashCode=-1},com.cognitect.transit.types.TransitMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitMap.prototype.clear=function(){this.hashCode=-1,this.map={},this._keys=[],this.size=0},com.cognitect.transit.types.TransitMap.prototype.clear=com.cognitect.transit.types.TransitMap.prototype.clear,com.cognitect.transit.types.TransitMap.prototype.getKeys=function(){return null!=this._keys?this._keys:com.cognitect.transit.util.objectKeys(this.map)},com.cognitect.transit.types.TransitMap.prototype.delete=function(t){this.hashCode=-1,this._keys=null;for(var e=com.cognitect.transit.eq.hashCode(t),n=this.map[e],r=0;r<n.length;r+=2)if(com.cognitect.transit.eq.equals(t,n[r]))return t=n[r+1],n.splice(r,2),0===n.length&&delete this.map[e],this.size--,t},com.cognitect.transit.types.TransitMap.prototype.entries=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitMap.prototype.entries=com.cognitect.transit.types.TransitMap.prototype.entries,com.cognitect.transit.types.TransitMap.prototype.forEach=function(t){for(var e=this.getKeys(),n=0;n<e.length;n++)for(var r=this.map[e[n]],i=0;i<r.length;i+=2)t(r[i+1],r[i],this)},com.cognitect.transit.types.TransitMap.prototype.forEach=com.cognitect.transit.types.TransitMap.prototype.forEach,com.cognitect.transit.types.TransitMap.prototype.get=function(t,e){var n=com.cognitect.transit.eq.hashCode(t);if(null==(n=this.map[n]))return e;for(var r=0;r<n.length;r+=2)if(com.cognitect.transit.eq.equals(t,n[r]))return n[r+1]},com.cognitect.transit.types.TransitMap.prototype.get=com.cognitect.transit.types.TransitMap.prototype.get,com.cognitect.transit.types.TransitMap.prototype.has=function(t){var e=com.cognitect.transit.eq.hashCode(t);if(null!=(e=this.map[e]))for(var n=0;n<e.length;n+=2)if(com.cognitect.transit.eq.equals(t,e[n]))return!0;return!1},com.cognitect.transit.types.TransitMap.prototype.has=com.cognitect.transit.types.TransitMap.prototype.has,com.cognitect.transit.types.TransitMap.prototype.keys=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitMap.prototype.keys=com.cognitect.transit.types.TransitMap.prototype.keys,com.cognitect.transit.types.TransitMap.prototype.keySet=function(){for(var t=this.getKeys(),e=[],n=0;n<t.length;n++)for(var r=this.map[t[n]],i=0;i<r.length;i+=2)e.push(r[i]);return e},com.cognitect.transit.types.TransitMap.prototype.keySet=com.cognitect.transit.types.TransitMap.prototype.keySet,com.cognitect.transit.types.TransitMap.prototype.set=function(t,e){this.hashCode=-1;var n=com.cognitect.transit.eq.hashCode(t),r=this.map[n];if(null==r)this._keys&&this._keys.push(n),this.map[n]=[t,e],this.size++;else{n=!0;for(var i=0;i<r.length;i+=2)if(com.cognitect.transit.eq.equals(e,r[i])){n=!1,r[i]=e;break}n&&(r.push(t),r.push(e),this.size++)}},com.cognitect.transit.types.TransitMap.prototype.set=com.cognitect.transit.types.TransitMap.prototype.set,com.cognitect.transit.types.TransitMap.prototype.values=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitMap.prototype.values=com.cognitect.transit.types.TransitMap.prototype.values,com.cognitect.transit.types.TransitMap.prototype.clone=function(){var t=com.cognitect.transit.types.map();return this.forEach(function(e,n){t.set(n,e)}),t},com.cognitect.transit.types.TransitMap.prototype.clone=com.cognitect.transit.types.TransitMap.prototype.clone,com.cognitect.transit.types.TransitMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$equals=function(t){return com.cognitect.transit.types.mapEquals(this,t)},com.cognitect.transit.types.map=function(t,e,n){if(t=t||[],e=!1!==e||e,(!0!==n||!n)&&t.length<=2*com.cognitect.transit.types.ARRAY_MAP_THRESHOLD){if(e){var r=t;for(t=[],e=0;e<r.length;e+=2){var i=!1;for(n=0;n<t.length;n+=2)if(com.cognitect.transit.eq.equals(t[n],r[e])){t[n+1]=r[e+1],i=!0;break}i||(t.push(r[e]),t.push(r[e+1]))}}return new com.cognitect.transit.types.TransitArrayMap(t)}r={},i=[];var o=0;for(e=0;e<t.length;e+=2){var a=r[n=com.cognitect.transit.eq.hashCode(t[e])];if(null==a)i.push(n),r[n]=[t[e],t[e+1]],o++;else{var s=!0;for(n=0;n<a.length;n+=2)if(com.cognitect.transit.eq.equals(a[n],t[e])){a[n+1]=t[e+1],s=!1;break}s&&(a.push(t[e]),a.push(t[e+1]),o++)}}return new com.cognitect.transit.types.TransitMap(i,r,o)},com.cognitect.transit.types.isArrayMap=function(t){return t instanceof com.cognitect.transit.types.TransitArrayMap},com.cognitect.transit.types.isMap=function(t){return t instanceof com.cognitect.transit.types.TransitArrayMap||t instanceof com.cognitect.transit.types.TransitMap},com.cognitect.transit.types.TransitSet=function(t){this.map=t,this.size=t.size},com.cognitect.transit.types.TransitSet.prototype.toString=function(){return com.cognitect.transit.types.printSet(this)},com.cognitect.transit.types.TransitSet.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitSet.prototype.add=function(t){this.map.set(t,t),this.size=this.map.size},com.cognitect.transit.types.TransitSet.prototype.add=com.cognitect.transit.types.TransitSet.prototype.add,com.cognitect.transit.types.TransitSet.prototype.clear=function(){this.map=new com.cognitect.transit.types.TransitMap,this.size=0},com.cognitect.transit.types.TransitSet.prototype.clear=com.cognitect.transit.types.TransitSet.prototype.clear,com.cognitect.transit.types.TransitSet.prototype.delete=function(t){return t=this.map.delete(t),this.size=this.map.size,t},com.cognitect.transit.types.TransitSet.prototype.entries=function(){return this.map.entries()},com.cognitect.transit.types.TransitSet.prototype.entries=com.cognitect.transit.types.TransitSet.prototype.entries,com.cognitect.transit.types.TransitSet.prototype.forEach=function(t,e){var n=this;this.map.forEach(function(e,r,i){t(r,n)})},com.cognitect.transit.types.TransitSet.prototype.forEach=com.cognitect.transit.types.TransitSet.prototype.forEach,com.cognitect.transit.types.TransitSet.prototype.has=function(t){return this.map.has(t)},com.cognitect.transit.types.TransitSet.prototype.has=com.cognitect.transit.types.TransitSet.prototype.has,com.cognitect.transit.types.TransitSet.prototype.keys=function(){return this.map.keys()},com.cognitect.transit.types.TransitSet.prototype.keys=com.cognitect.transit.types.TransitSet.prototype.keys,com.cognitect.transit.types.TransitSet.prototype.keySet=function(){return this.map.keySet()},com.cognitect.transit.types.TransitSet.prototype.keySet=com.cognitect.transit.types.TransitSet.prototype.keySet,com.cognitect.transit.types.TransitSet.prototype.values=function(){return this.map.values()},com.cognitect.transit.types.TransitSet.prototype.values=com.cognitect.transit.types.TransitSet.prototype.values,com.cognitect.transit.types.TransitSet.prototype.clone=function(){var t=com.cognitect.transit.types.set();return this.forEach(function(e){t.add(e)}),t},com.cognitect.transit.types.TransitSet.prototype.clone=com.cognitect.transit.types.TransitSet.prototype.clone,com.cognitect.transit.types.TransitSet.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.values()},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.TransitSet&&(this.size===t.size?com.cognitect.transit.eq.equals(this.map,t.map):void 0)},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$hashCode=function(t){return com.cognitect.transit.eq.hashCode(this.map)},com.cognitect.transit.types.set=function(t){t=t||[];for(var e={},n=[],r=0,i=0;i<t.length;i++){var o=e[a=com.cognitect.transit.eq.hashCode(t[i])];if(null==o)n.push(a),e[a]=[t[i],t[i]],r++;else{for(var a=!0,s=0;s<o.length;s+=2)if(com.cognitect.transit.eq.equals(o[s],t[i])){a=!1;break}a&&(o.push(t[i]),o.push(t[i]),r++)}}return new com.cognitect.transit.types.TransitSet(new com.cognitect.transit.types.TransitMap(n,e,r))},com.cognitect.transit.types.isSet=function(t){return t instanceof com.cognitect.transit.types.TransitSet},com.cognitect.transit.types.quoted=function(t){return com.cognitect.transit.types.taggedValue("'",t)},com.cognitect.transit.types.isQuoted=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"'"===t.tag},com.cognitect.transit.types.list=function(t){return com.cognitect.transit.types.taggedValue("list",t)},com.cognitect.transit.types.isList=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"list"===t.tag},com.cognitect.transit.types.link=function(t){return com.cognitect.transit.types.taggedValue("link",t)},com.cognitect.transit.types.isLink=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"link"===t.tag},com.cognitect.transit.types.specialDouble=function(t){switch(t){case"-INF":return-1/0;case"INF":return 1/0;case"NaN":return NaN;default:throw Error("Invalid special double value "+t)}},com.cognitect.transit.handlers={},com.cognitect.transit.handlers.ctorGuid=0,com.cognitect.transit.handlers.ctorGuidProperty="transit$guid$"+com.cognitect.transit.util.randomUUID(),com.cognitect.transit.handlers.typeTag=function(t){if(null==t)return"null";if(t===String)return"string";if(t===Boolean)return"boolean";if(t===Number)return"number";if(t===Array)return"array";if(t===Object)return"map";var e=t[com.cognitect.transit.handlers.ctorGuidProperty];return null==e&&(void 0!==Object.defineProperty?(e=++com.cognitect.transit.handlers.ctorGuid,Object.defineProperty(t,com.cognitect.transit.handlers.ctorGuidProperty,{value:e,enumerable:!1})):t[com.cognitect.transit.handlers.ctorGuidProperty]=e=++com.cognitect.transit.handlers.ctorGuid),e},com.cognitect.transit.handlers.constructor=function(t){return null==t?null:t.constructor},com.cognitect.transit.handlers.padZeros=function(t,e){for(var n=t.toString(),r=n.length;r<e;r++)n="0"+n;return n},com.cognitect.transit.handlers.stringableKeys=function(t){t=com.cognitect.transit.util.objectKeys(t);for(var e=0;e<t.length;e++);return!0},com.cognitect.transit.handlers.NilHandler=function(){},com.cognitect.transit.handlers.NilHandler.prototype.tag=function(t){return"_"},com.cognitect.transit.handlers.NilHandler.prototype.rep=function(t){return null},com.cognitect.transit.handlers.NilHandler.prototype.stringRep=function(t){return"null"},com.cognitect.transit.handlers.StringHandler=function(){},com.cognitect.transit.handlers.StringHandler.prototype.tag=function(t){return"s"},com.cognitect.transit.handlers.StringHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.StringHandler.prototype.stringRep=function(t){return t},com.cognitect.transit.handlers.NumberHandler=function(){},com.cognitect.transit.handlers.NumberHandler.prototype.tag=function(t){return"i"},com.cognitect.transit.handlers.NumberHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.NumberHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.IntegerHandler=function(){},com.cognitect.transit.handlers.IntegerHandler.prototype.tag=function(t){return"i"},com.cognitect.transit.handlers.IntegerHandler.prototype.rep=function(t){return t.toString()},com.cognitect.transit.handlers.IntegerHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.BooleanHandler=function(){},com.cognitect.transit.handlers.BooleanHandler.prototype.tag=function(t){return"?"},com.cognitect.transit.handlers.BooleanHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.BooleanHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.ArrayHandler=function(){},com.cognitect.transit.handlers.ArrayHandler.prototype.tag=function(t){return"array"},com.cognitect.transit.handlers.ArrayHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.ArrayHandler.prototype.stringRep=function(t){return null},com.cognitect.transit.handlers.MapHandler=function(){},com.cognitect.transit.handlers.MapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.MapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.MapHandler.prototype.stringRep=function(t){return null},com.cognitect.transit.handlers.VerboseDateHandler=function(){},com.cognitect.transit.handlers.VerboseDateHandler.prototype.tag=function(t){return"t"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.rep=function(t){return t.getUTCFullYear()+"-"+com.cognitect.transit.handlers.padZeros(t.getUTCMonth()+1,2)+"-"+com.cognitect.transit.handlers.padZeros(t.getUTCDate(),2)+"T"+com.cognitect.transit.handlers.padZeros(t.getUTCHours(),2)+":"+com.cognitect.transit.handlers.padZeros(t.getUTCMinutes(),2)+":"+com.cognitect.transit.handlers.padZeros(t.getUTCSeconds(),2)+"."+com.cognitect.transit.handlers.padZeros(t.getUTCMilliseconds(),3)+"Z"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.DateHandler=function(){},com.cognitect.transit.handlers.DateHandler.prototype.tag=function(t){return"m"},com.cognitect.transit.handlers.DateHandler.prototype.rep=function(t){return t.valueOf()},com.cognitect.transit.handlers.DateHandler.prototype.stringRep=function(t){return t.valueOf().toString()},com.cognitect.transit.handlers.DateHandler.prototype.getVerboseHandler=function(t){return new com.cognitect.transit.handlers.VerboseDateHandler},com.cognitect.transit.handlers.UUIDHandler=function(){},com.cognitect.transit.handlers.UUIDHandler.prototype.tag=function(t){return"u"},com.cognitect.transit.handlers.UUIDHandler.prototype.rep=function(t){return t.toString()},com.cognitect.transit.handlers.UUIDHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.KeywordHandler=function(){},com.cognitect.transit.handlers.KeywordHandler.prototype.tag=function(t){return":"},com.cognitect.transit.handlers.KeywordHandler.prototype.rep=function(t){return t._name},com.cognitect.transit.handlers.KeywordHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.SymbolHandler=function(){},com.cognitect.transit.handlers.SymbolHandler.prototype.tag=function(t){return"$"},com.cognitect.transit.handlers.SymbolHandler.prototype.rep=function(t){return t._name},com.cognitect.transit.handlers.SymbolHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.TaggedHandler=function(){},com.cognitect.transit.handlers.TaggedHandler.prototype.tag=function(t){return t.tag},com.cognitect.transit.handlers.TaggedHandler.prototype.rep=function(t){return t.rep},com.cognitect.transit.handlers.TaggedHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitSetHandler=function(){},com.cognitect.transit.handlers.TransitSetHandler.prototype.tag=function(t){return"set"},com.cognitect.transit.handlers.TransitSetHandler.prototype.rep=function(t){var e=[];return t.forEach(function(t,n){e.push(t)}),com.cognitect.transit.types.taggedValue("array",e)},com.cognitect.transit.handlers.TransitSetHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitArrayMapHandler=function(){},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitMapHandler=function(){},com.cognitect.transit.handlers.TransitMapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.TransitMapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.TransitMapHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.BufferHandler=function(){},com.cognitect.transit.handlers.BufferHandler.prototype.tag=function(t){return"b"},com.cognitect.transit.handlers.BufferHandler.prototype.rep=function(t){return t.toString("base64")},com.cognitect.transit.handlers.BufferHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.Uint8ArrayHandler=function(){},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.tag=function(t){return"b"},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.rep=function(t){return com.cognitect.transit.util.Uint8ToBase64(t)},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.defaultHandlers=function(t){return t.set(null,new com.cognitect.transit.handlers.NilHandler),t.set(String,new com.cognitect.transit.handlers.StringHandler),t.set(Number,new com.cognitect.transit.handlers.NumberHandler),t.set(goog.math.Long,new com.cognitect.transit.handlers.IntegerHandler),t.set(Boolean,new com.cognitect.transit.handlers.BooleanHandler),t.set(Array,new com.cognitect.transit.handlers.ArrayHandler),t.set(Object,new com.cognitect.transit.handlers.MapHandler),t.set(Date,new com.cognitect.transit.handlers.DateHandler),t.set(com.cognitect.transit.types.UUID,new com.cognitect.transit.handlers.UUIDHandler),t.set(com.cognitect.transit.types.Keyword,new com.cognitect.transit.handlers.KeywordHandler),t.set(com.cognitect.transit.types.Symbol,new com.cognitect.transit.handlers.SymbolHandler),t.set(com.cognitect.transit.types.TaggedValue,new com.cognitect.transit.handlers.TaggedHandler),t.set(com.cognitect.transit.types.TransitSet,new com.cognitect.transit.handlers.TransitSetHandler),t.set(com.cognitect.transit.types.TransitArrayMap,new com.cognitect.transit.handlers.TransitArrayMapHandler),t.set(com.cognitect.transit.types.TransitMap,new com.cognitect.transit.handlers.TransitMapHandler),void 0!==goog.global.Buffer&&t.set(goog.global.Buffer,new com.cognitect.transit.handlers.BufferHandler),"undefined"!=typeof Uint8Array&&t.set(Uint8Array,new com.cognitect.transit.handlers.Uint8ArrayHandler),t},com.cognitect.transit.handlers.Handlers=function(){this.handlers={},com.cognitect.transit.handlers.defaultHandlers(this)},com.cognitect.transit.handlers.Handlers.prototype.get=function(t){return null!=(t="string"==typeof t?this.handlers[t]:this.handlers[com.cognitect.transit.handlers.typeTag(t)])?t:this.handlers.default},com.cognitect.transit.handlers.Handlers.prototype.get=com.cognitect.transit.handlers.Handlers.prototype.get,com.cognitect.transit.handlers.validTag=function(t){switch(t){case"null":case"string":case"boolean":case"number":case"array":case"map":return!1}return!0},com.cognitect.transit.handlers.Handlers.prototype.set=function(t,e){"string"==typeof t&&com.cognitect.transit.handlers.validTag(t)?this.handlers[t]=e:this.handlers[com.cognitect.transit.handlers.typeTag(t)]=e},com.cognitect.transit.impl={},com.cognitect.transit.impl.decoder={},com.cognitect.transit.impl.decoder.Tag=function(t){this.str=t},com.cognitect.transit.impl.decoder.tag=function(t){return new com.cognitect.transit.impl.decoder.Tag(t)},com.cognitect.transit.impl.decoder.isTag=function(t){return t&&t instanceof com.cognitect.transit.impl.decoder.Tag},com.cognitect.transit.impl.decoder.isGroundHandler=function(t){switch(t){case"_":case"s":case"?":case"i":case"d":case"b":case"'":case"array":case"map":return!0}return!1},com.cognitect.transit.impl.decoder.Decoder=function(t){for(var e in this.options=t||{},this.handlers={},this.defaults.handlers)this.handlers[e]=this.defaults.handlers[e];for(e in this.options.handlers){if(com.cognitect.transit.impl.decoder.isGroundHandler(e))throw Error('Cannot override handler for ground type "'+e+'"');this.handlers[e]=this.options.handlers[e]}this.preferStrings=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.preferStrings,this.preferBuffers=null!=this.options.preferBuffers?this.options.preferBuffers:this.defaults.preferBuffers,this.defaultHandler=this.options.defaultHandler||this.defaults.defaultHandler,this.mapBuilder=this.options.mapBuilder,this.arrayBuilder=this.options.arrayBuilder},com.cognitect.transit.impl.decoder.Decoder.prototype.defaults={handlers:{_:function(t,e){return com.cognitect.transit.types.nullValue()},"?":function(t,e){return com.cognitect.transit.types.boolValue(t)},b:function(t,e){return com.cognitect.transit.types.binary(t,e)},i:function(t,e){return com.cognitect.transit.types.intValue(t)},n:function(t,e){return com.cognitect.transit.types.bigInteger(t)},d:function(t,e){return com.cognitect.transit.types.floatValue(t)},f:function(t,e){return com.cognitect.transit.types.bigDecimalValue(t)},c:function(t,e){return com.cognitect.transit.types.charValue(t)},":":function(t,e){return com.cognitect.transit.types.keyword(t)},$:function(t,e){return com.cognitect.transit.types.symbol(t)},r:function(t,e){return com.cognitect.transit.types.uri(t)},z:function(t,e){return com.cognitect.transit.types.specialDouble(t)},"'":function(t,e){return t},m:function(t,e){return com.cognitect.transit.types.date(t)},t:function(t,e){return com.cognitect.transit.types.verboseDate(t)},u:function(t,e){return com.cognitect.transit.types.uuid(t)},set:function(t,e){return com.cognitect.transit.types.set(t)},list:function(t,e){return com.cognitect.transit.types.list(t)},link:function(t,e){return com.cognitect.transit.types.link(t)},cmap:function(t,e){return com.cognitect.transit.types.map(t,!1)}},defaultHandler:function(t,e){return com.cognitect.transit.types.taggedValue(t,e)},preferStrings:!0,preferBuffers:!0},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=function(t,e,n,r){if(null==t)return null;switch(typeof t){case"string":return this.decodeString(t,e,n,r);case"object":return com.cognitect.transit.util.isArray(t)?"^ "===t[0]?this.decodeArrayHash(t,e,n,r):this.decodeArray(t,e,n,r):this.decodeHash(t,e,n,r)}return t},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=com.cognitect.transit.impl.decoder.Decoder.prototype.decode,com.cognitect.transit.impl.decoder.Decoder.prototype.decodeString=function(t,e,n,r){return com.cognitect.transit.caching.isCacheable(t,n)?(t=this.parseString(t,e,!1),e&&e.write(t,n),t):com.cognitect.transit.caching.isCacheCode(t)?e.read(t,n):this.parseString(t,e,n)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeHash=function(t,e,n,r){var i=(n=com.cognitect.transit.util.objectKeys(t))[0];if(r=1==n.length?this.decode(i,e,!1,!1):null,com.cognitect.transit.impl.decoder.isTag(r))return t=t[i],null!=(n=this.handlers[r.str])?n(this.decode(t,e,!1,!0),this):com.cognitect.transit.types.taggedValue(r.str,this.decode(t,e,!1,!1));if(this.mapBuilder){if(n.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD&&this.mapBuilder.fromArray){var o=[];for(i=0;i<n.length;i++)r=n[i],o.push(this.decode(r,e,!0,!1)),o.push(this.decode(t[r],e,!1,!1));return this.mapBuilder.fromArray(o,t)}for(o=this.mapBuilder.init(t),i=0;i<n.length;i++)r=n[i],o=this.mapBuilder.add(o,this.decode(r,e,!0,!1),this.decode(t[r],e,!1,!1),t);return this.mapBuilder.finalize(o,t)}for(o=[],i=0;i<n.length;i++)r=n[i],o.push(this.decode(r,e,!0,!1)),o.push(this.decode(t[r],e,!1,!1));return com.cognitect.transit.types.map(o,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArrayHash=function(t,e,n,r){if(this.mapBuilder){if(t.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD+1&&this.mapBuilder.fromArray){for(r=[],n=1;n<t.length;n+=2)r.push(this.decode(t[n],e,!0,!1)),r.push(this.decode(t[n+1],e,!1,!1));return this.mapBuilder.fromArray(r,t)}for(r=this.mapBuilder.init(t),n=1;n<t.length;n+=2)r=this.mapBuilder.add(r,this.decode(t[n],e,!0,!1),this.decode(t[n+1],e,!1,!1),t);return this.mapBuilder.finalize(r,t)}for(r=[],n=1;n<t.length;n+=2)r.push(this.decode(t[n],e,!0,!1)),r.push(this.decode(t[n+1],e,!1,!1));return com.cognitect.transit.types.map(r,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArray=function(t,e,n,r){if(r){var i=[];for(r=0;r<t.length;r++)i.push(this.decode(t[r],e,n,!1));return i}if(i=e&&e.idx,2===t.length&&"string"==typeof t[0]&&(r=this.decode(t[0],e,!1,!1),com.cognitect.transit.impl.decoder.isTag(r)))return i=t[1],null!=(t=this.handlers[r.str])?i=t(this.decode(i,e,n,!0),this):com.cognitect.transit.types.taggedValue(r.str,this.decode(i,e,n,!1));if(e&&i!=e.idx&&(e.idx=i),this.arrayBuilder){if(32>=t.length&&this.arrayBuilder.fromArray){for(i=[],r=0;r<t.length;r++)i.push(this.decode(t[r],e,n,!1));return this.arrayBuilder.fromArray(i,t)}for(i=this.arrayBuilder.init(t),r=0;r<t.length;r++)i=this.arrayBuilder.add(i,this.decode(t[r],e,n,!1),t);return this.arrayBuilder.finalize(i,t)}for(i=[],r=0;r<t.length;r++)i.push(this.decode(t[r],e,n,!1));return i},com.cognitect.transit.impl.decoder.Decoder.prototype.parseString=function(t,e,n){return t.charAt(0)===com.cognitect.transit.delimiters.ESC?(e=t.charAt(1))===com.cognitect.transit.delimiters.ESC||e===com.cognitect.transit.delimiters.SUB||e===com.cognitect.transit.delimiters.RES?t.substring(1):e===com.cognitect.transit.delimiters.TAG?com.cognitect.transit.impl.decoder.tag(t.substring(2)):null==(n=this.handlers[e])?this.defaultHandler(e,t.substring(2)):n(t.substring(2),this):t},com.cognitect.transit.impl.decoder.decoder=function(t){return new com.cognitect.transit.impl.decoder.Decoder(t)},com.cognitect.transit.impl.reader={},com.cognitect.transit.impl.reader.JSONUnmarshaller=function(t){this.decoder=new com.cognitect.transit.impl.decoder.Decoder(t)},com.cognitect.transit.impl.reader.JSONUnmarshaller.prototype.unmarshal=function(t,e){return this.decoder.decode(JSON.parse(t),e)},com.cognitect.transit.impl.reader.Reader=function(t,e){this.unmarshaller=t,this.options=e||{},this.cache=this.options.cache?this.options.cache:new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.impl.reader.Reader.prototype.read=function(t){return t=this.unmarshaller.unmarshal(t,this.cache),this.cache.clear(),t},com.cognitect.transit.impl.reader.Reader.prototype.read=com.cognitect.transit.impl.reader.Reader.prototype.read,com.cognitect.transit.impl.writer={},com.cognitect.transit.impl.writer.escape=function(t){if(0<t.length){var e=t.charAt(0);return e===com.cognitect.transit.delimiters.ESC||e===com.cognitect.transit.delimiters.SUB||e===com.cognitect.transit.delimiters.RES?com.cognitect.transit.delimiters.ESC+t:t}return t},com.cognitect.transit.impl.writer.JSONMarshaller=function(t){if(this.opts=t||{},this.preferStrings=null==this.opts.preferStrings||this.opts.preferStrings,this.objectBuilder=this.opts.objectBuilder||null,this.transform=this.opts.transform||null,this.handlers=new com.cognitect.transit.handlers.Handlers,t=this.opts.handlers){if(com.cognitect.transit.util.isArray(t)||!t.forEach)throw Error('transit writer "handlers" option must be a map');var e=this;t.forEach(function(t,n){if(void 0===n)throw Error("Cannot create handler for JavaScript undefined");e.handlers.set(n,t)})}this.handlerForForeign=this.opts.handlerForForeign,this.unpack=this.opts.unpack||function(t){return!(!com.cognitect.transit.types.isArrayMap(t)||null!==t.backingMap)&&t._entries},this.verbose=this.opts&&this.opts.verbose||!1},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.handler=function(t){var e=this.handlers.get(com.cognitect.transit.handlers.constructor(t));return null!=e?e:(t=t&&t.transitTag)?this.handlers.get(t):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.registerHandler=function(t,e){this.handlers.set(t,e)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitNil=function(t,e){return t?this.emitString(com.cognitect.transit.delimiters.ESC,"_","",t,e):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitString=function(t,e,n,r,i){return t=t+e+n,i?i.write(t,r):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBoolean=function(t,e,n){return e?this.emitString(com.cognitect.transit.delimiters.ESC,"?",t.toString()[0],e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitInteger=function(t,e,n){return 1/0===t?this.emitString(com.cognitect.transit.delimiters.ESC,"z","INF",e,n):-1/0===t?this.emitString(com.cognitect.transit.delimiters.ESC,"z","-INF",e,n):isNaN(t)?this.emitString(com.cognitect.transit.delimiters.ESC,"z","NaN",e,n):e||"string"==typeof t||t instanceof goog.math.Long?this.emitString(com.cognitect.transit.delimiters.ESC,"i",t.toString(),e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitDouble=function(t,e,n){return e?this.emitString(t.ESC,"d",t,e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBinary=function(t,e,n){return this.emitString(com.cognitect.transit.delimiters.ESC,"b",t,e,n)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitQuoted=function(t,e,n){return t.verbose?((t={})[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,n)]=com.cognitect.transit.impl.writer.marshal(this,e,!1,n),t):[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,n),com.cognitect.transit.impl.writer.marshal(this,e,!1,n)]},com.cognitect.transit.impl.writer.emitObjects=function(t,e,n){var r=[];if(com.cognitect.transit.util.isArray(e))for(var i=0;i<e.length;i++)r.push(com.cognitect.transit.impl.writer.marshal(t,e[i],!1,n));else e.forEach(function(e,i){r.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,n))});return r},com.cognitect.transit.impl.writer.emitArray=function(t,e,n,r){return com.cognitect.transit.impl.writer.emitObjects(t,e,r)},com.cognitect.transit.impl.writer.isStringableKey=function(t,e){if("string"!=typeof e){var n=t.handler(e);return n&&1===n.tag(e).length}return!0},com.cognitect.transit.impl.writer.stringableKeys=function(t,e){var n=t.unpack(e),r=!0;if(n){for(var i=0;i<n.length&&(r=com.cognitect.transit.impl.writer.isStringableKey(t,n[i]));i+=2);return r}if(e.keys&&(i=null,(n=e.keys()).next)){for(i=n.next();!i.done&&(r=com.cognitect.transit.impl.writer.isStringableKey(t,i.value));)i=n.next();return r}if(e.forEach)return e.forEach(function(e,n){r=r&&com.cognitect.transit.impl.writer.isStringableKey(t,n)}),r;throw Error("Cannot walk keys of object type "+com.cognitect.transit.handlers.constructor(e).name)},com.cognitect.transit.impl.writer.isForeignObject=function(t){if(t.constructor.transit$isObject)return!0;var e="Object"==(e=(e=(e=t.constructor.toString()).substr(9)).substr(0,e.indexOf("(")));return void 0!==Object.defineProperty?Object.defineProperty(t.constructor,"transit$isObject",{value:e,enumerable:!1}):t.constructor.transit$isObject=e,e},com.cognitect.transit.impl.writer.emitMap=function(t,e,n,r){var i=null,o=null,a=null;i=null;if(n=0,e.constructor===Object||null!=e.forEach||t.handlerForForeign&&com.cognitect.transit.impl.writer.isForeignObject(e)){if(t.verbose){if(null!=e.forEach)if(com.cognitect.transit.impl.writer.stringableKeys(t,e)){var s={};e.forEach(function(e,n){s[com.cognitect.transit.impl.writer.marshal(t,n,!0,!1)]=com.cognitect.transit.impl.writer.marshal(t,e,!1,r)})}else{if(i=t.unpack(e),o=[],a=t.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,r),i)for(;n<i.length;n+=2)o.push(com.cognitect.transit.impl.writer.marshal(t,i[n],!1,!1)),o.push(com.cognitect.transit.impl.writer.marshal(t,i[n+1],!1,r));else e.forEach(function(e,n){o.push(com.cognitect.transit.impl.writer.marshal(t,n,!1,!1)),o.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))});(s={})[a]=o}else for(i=com.cognitect.transit.util.objectKeys(e),s={};n<i.length;n++)s[com.cognitect.transit.impl.writer.marshal(t,i[n],!0,!1)]=com.cognitect.transit.impl.writer.marshal(t,e[i[n]],!1,r);return s}if(null!=e.forEach){if(com.cognitect.transit.impl.writer.stringableKeys(t,e)){if(i=t.unpack(e),s=["^ "],i)for(;n<i.length;n+=2)s.push(com.cognitect.transit.impl.writer.marshal(t,i[n],!0,r)),s.push(com.cognitect.transit.impl.writer.marshal(t,i[n+1],!1,r));else e.forEach(function(e,n){s.push(com.cognitect.transit.impl.writer.marshal(t,n,!0,r)),s.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))});return s}if(i=t.unpack(e),o=[],a=t.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,r),i)for(;n<i.length;n+=2)o.push(com.cognitect.transit.impl.writer.marshal(t,i[n],!1,r)),o.push(com.cognitect.transit.impl.writer.marshal(t,i[n+1],!1,r));else e.forEach(function(e,n){o.push(com.cognitect.transit.impl.writer.marshal(t,n,!1,r)),o.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))});return[a,o]}for(s=["^ "],i=com.cognitect.transit.util.objectKeys(e);n<i.length;n++)s.push(com.cognitect.transit.impl.writer.marshal(t,i[n],!0,r)),s.push(com.cognitect.transit.impl.writer.marshal(t,e[i[n]],!1,r));return s}if(null!=t.objectBuilder)return t.objectBuilder(e,function(e){return com.cognitect.transit.impl.writer.marshal(t,e,!0,r)},function(e){return com.cognitect.transit.impl.writer.marshal(t,e,!1,r)});throw n=com.cognitect.transit.handlers.constructor(e).name,(i=Error("Cannot write "+n)).data={obj:e,type:n},i},com.cognitect.transit.impl.writer.emitTaggedMap=function(t,e,n,r,i){return t.verbose?((r={})[t.emitString(com.cognitect.transit.delimiters.ESC_TAG,e,"",!0,i)]=com.cognitect.transit.impl.writer.marshal(t,n,!1,i),r):[t.emitString(com.cognitect.transit.delimiters.ESC_TAG,e,"",!0,i),com.cognitect.transit.impl.writer.marshal(t,n,!1,i)]},com.cognitect.transit.impl.writer.emitEncoded=function(t,e,n,r,i,o,a){if(1===n.length){if("string"==typeof r)return t.emitString(com.cognitect.transit.delimiters.ESC,n,r,o,a);if(o||t.preferStrings){if((r=t.verbose&&e.getVerboseHandler())?(n=r.tag(i),r=r.stringRep(i,r)):r=e.stringRep(i,e),null!==r)return t.emitString(com.cognitect.transit.delimiters.ESC,n,r,o,a);throw(t=Error('Tag "'+n+'" cannot be encoded as string')).data={tag:n,rep:r,obj:i},t}}return com.cognitect.transit.impl.writer.emitTaggedMap(t,n,r,o,a)},com.cognitect.transit.impl.writer.marshal=function(t,e,n,r){null!==t.transform&&(e=t.transform(e));var i=t.handler(e)||(t.handlerForForeign?t.handlerForForeign(e,t.handlers):null),o=i?i.tag(e):null,a=i?i.rep(e):null;if(null==i||null==o)throw t=com.cognitect.transit.handlers.constructor(e).name,(n=Error("Cannot write "+t)).data={obj:e,type:t},n;switch(o){case"_":return t.emitNil(n,r);case"s":return t.emitString("","",com.cognitect.transit.impl.writer.escape(a),n,r);case"?":return t.emitBoolean(a,n,r);case"i":return t.emitInteger(a,n,r);case"d":return t.emitDouble(a,n,r);case"b":return t.emitBinary(a,n,r);case"'":return t.emitQuoted(t,a,r);case"array":return com.cognitect.transit.impl.writer.emitArray(t,a,n,r);case"map":return com.cognitect.transit.impl.writer.emitMap(t,a,n,r);default:return com.cognitect.transit.impl.writer.emitEncoded(t,i,o,a,e,n,r)}},com.cognitect.transit.impl.writer.maybeQuoted=function(t,e){if(null!=(n=t.handler(e)||(t.handlerForForeign?t.handlerForForeign(e,t.handlers):null)))return 1===n.tag(e).length?com.cognitect.transit.types.quoted(e):e;var n=com.cognitect.transit.handlers.constructor(e).name,r=Error("Cannot write "+n);throw r.data={obj:e,type:n},r},com.cognitect.transit.impl.writer.marshalTop=function(t,e,n,r){return JSON.stringify(com.cognitect.transit.impl.writer.marshal(t,com.cognitect.transit.impl.writer.maybeQuoted(t,e),n,r))},com.cognitect.transit.impl.writer.Writer=function(t,e){this._marshaller=t,this.options=e||{},this.cache=!1===this.options.cache?null:this.options.cache?this.options.cache:new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=function(){return this._marshaller},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=com.cognitect.transit.impl.writer.Writer.prototype.marshaller,com.cognitect.transit.impl.writer.Writer.prototype.write=function(t,e){var n=e||{},r=n.asMapKey||!1,i=!this._marshaller.verbose&&this.cache;return n=!1===n.marshalTop?com.cognitect.transit.impl.writer.marshal(this._marshaller,t,r,i):com.cognitect.transit.impl.writer.marshalTop(this._marshaller,t,r,i),null!=this.cache&&this.cache.clear(),n},com.cognitect.transit.impl.writer.Writer.prototype.write=com.cognitect.transit.impl.writer.Writer.prototype.write,com.cognitect.transit.impl.writer.Writer.prototype.register=function(t,e){this._marshaller.registerHandler(t,e)},com.cognitect.transit.impl.writer.Writer.prototype.register=com.cognitect.transit.impl.writer.Writer.prototype.register;var TRANSIT_DEV=!0,TRANSIT_NODE_TARGET=!0,TRANSIT_BROWSER_TARGET=!1,TRANSIT_BROWSER_AMD_TARGET=!1;com.cognitect.transit.reader=function(t,e){if("json"===t||"json-verbose"===t||null==t){var n=new com.cognitect.transit.impl.reader.JSONUnmarshaller(e);return new com.cognitect.transit.impl.reader.Reader(n,e)}throw Error("Cannot create reader of type "+t)},com.cognitect.transit.writer=function(t,e){if("json"===t||"json-verbose"===t||null==t){"json-verbose"===t&&(null==e&&(e={}),e.verbose=!0);var n=new com.cognitect.transit.impl.writer.JSONMarshaller(e);return new com.cognitect.transit.impl.writer.Writer(n,e)}throw(n=Error('Type must be "json"')).data={type:t},n},com.cognitect.transit.makeWriteHandler=function(t){var e=function(){};return e.prototype.tag=t.tag,e.prototype.rep=t.rep,e.prototype.stringRep=t.stringRep,e.prototype.getVerboseHandler=t.getVerboseHandler,new e},com.cognitect.transit.makeBuilder=function(t){var e=function(){};return e.prototype.init=t.init,e.prototype.add=t.add,e.prototype.finalize=t.finalize,e.prototype.fromArray=t.fromArray,new e},com.cognitect.transit.date=com.cognitect.transit.types.date,com.cognitect.transit.integer=com.cognitect.transit.types.intValue,com.cognitect.transit.isInteger=com.cognitect.transit.types.isInteger,com.cognitect.transit.uuid=com.cognitect.transit.types.uuid,com.cognitect.transit.isUUID=com.cognitect.transit.types.isUUID,com.cognitect.transit.bigInt=com.cognitect.transit.types.bigInteger,com.cognitect.transit.isBigInt=com.cognitect.transit.types.isBigInteger,com.cognitect.transit.bigDec=com.cognitect.transit.types.bigDecimalValue,com.cognitect.transit.isBigDec=com.cognitect.transit.types.isBigDecimal,com.cognitect.transit.keyword=com.cognitect.transit.types.keyword,com.cognitect.transit.isKeyword=com.cognitect.transit.types.isKeyword,com.cognitect.transit.symbol=com.cognitect.transit.types.symbol,com.cognitect.transit.isSymbol=com.cognitect.transit.types.isSymbol,com.cognitect.transit.binary=com.cognitect.transit.types.binary,com.cognitect.transit.isBinary=com.cognitect.transit.types.isBinary,com.cognitect.transit.uri=com.cognitect.transit.types.uri,com.cognitect.transit.isURI=com.cognitect.transit.types.isURI,com.cognitect.transit.map=com.cognitect.transit.types.map,com.cognitect.transit.isMap=com.cognitect.transit.types.isMap,com.cognitect.transit.set=com.cognitect.transit.types.set,com.cognitect.transit.isSet=com.cognitect.transit.types.isSet,com.cognitect.transit.list=com.cognitect.transit.types.list,com.cognitect.transit.isList=com.cognitect.transit.types.isList,com.cognitect.transit.quoted=com.cognitect.transit.types.quoted,com.cognitect.transit.isQuoted=com.cognitect.transit.types.isQuoted,com.cognitect.transit.tagged=com.cognitect.transit.types.taggedValue,com.cognitect.transit.isTaggedValue=com.cognitect.transit.types.isTaggedValue,com.cognitect.transit.link=com.cognitect.transit.types.link,com.cognitect.transit.isLink=com.cognitect.transit.types.isLink,com.cognitect.transit.hash=com.cognitect.transit.eq.hashCode,com.cognitect.transit.hashMapLike=com.cognitect.transit.eq.hashMapLike,com.cognitect.transit.hashArrayLike=com.cognitect.transit.eq.hashArrayLike,com.cognitect.transit.equals=com.cognitect.transit.eq.equals,com.cognitect.transit.extendToEQ=com.cognitect.transit.eq.extendToEQ,com.cognitect.transit.mapToObject=function(t){var e={};return t.forEach(function(t,n){if("string"!=typeof n)throw Error("Cannot convert map with non-string keys");e[n]=t}),e},com.cognitect.transit.objectToMap=function(t){var e,n=com.cognitect.transit.map();for(e in t)t.hasOwnProperty(e)&&n.set(e,t[e]);return n},com.cognitect.transit.decoder=com.cognitect.transit.impl.decoder.decoder,com.cognitect.transit.readCache=com.cognitect.transit.caching.readCache,com.cognitect.transit.writeCache=com.cognitect.transit.caching.writeCache,com.cognitect.transit.UUIDfromString=com.cognitect.transit.types.UUIDfromString,com.cognitect.transit.randomUUID=com.cognitect.transit.util.randomUUID,com.cognitect.transit.stringableKeys=com.cognitect.transit.impl.writer.stringableKeys,TRANSIT_BROWSER_TARGET&&(goog.exportSymbol("transit.reader",com.cognitect.transit.reader),goog.exportSymbol("transit.writer",com.cognitect.transit.writer),goog.exportSymbol("transit.makeBuilder",com.cognitect.transit.makeBuilder),goog.exportSymbol("transit.makeWriteHandler",com.cognitect.transit.makeWriteHandler),goog.exportSymbol("transit.date",com.cognitect.transit.types.date),goog.exportSymbol("transit.integer",com.cognitect.transit.types.intValue),goog.exportSymbol("transit.isInteger",com.cognitect.transit.types.isInteger),goog.exportSymbol("transit.uuid",com.cognitect.transit.types.uuid),goog.exportSymbol("transit.isUUID",com.cognitect.transit.types.isUUID),goog.exportSymbol("transit.bigInt",com.cognitect.transit.types.bigInteger),goog.exportSymbol("transit.isBigInt",com.cognitect.transit.types.isBigInteger),goog.exportSymbol("transit.bigDec",com.cognitect.transit.types.bigDecimalValue),goog.exportSymbol("transit.isBigDec",com.cognitect.transit.types.isBigDecimal),goog.exportSymbol("transit.keyword",com.cognitect.transit.types.keyword),goog.exportSymbol("transit.isKeyword",com.cognitect.transit.types.isKeyword),goog.exportSymbol("transit.symbol",com.cognitect.transit.types.symbol),goog.exportSymbol("transit.isSymbol",com.cognitect.transit.types.isSymbol),goog.exportSymbol("transit.binary",com.cognitect.transit.types.binary),goog.exportSymbol("transit.isBinary",com.cognitect.transit.types.isBinary),goog.exportSymbol("transit.uri",com.cognitect.transit.types.uri),goog.exportSymbol("transit.isURI",com.cognitect.transit.types.isURI),goog.exportSymbol("transit.map",com.cognitect.transit.types.map),goog.exportSymbol("transit.isMap",com.cognitect.transit.types.isMap),goog.exportSymbol("transit.set",com.cognitect.transit.types.set),goog.exportSymbol("transit.isSet",com.cognitect.transit.types.isSet),goog.exportSymbol("transit.list",com.cognitect.transit.types.list),goog.exportSymbol("transit.isList",com.cognitect.transit.types.isList),goog.exportSymbol("transit.quoted",com.cognitect.transit.types.quoted),goog.exportSymbol("transit.isQuoted",com.cognitect.transit.types.isQuoted),goog.exportSymbol("transit.tagged",com.cognitect.transit.types.taggedValue),goog.exportSymbol("transit.isTaggedValue",com.cognitect.transit.types.isTaggedValue),goog.exportSymbol("transit.link",com.cognitect.transit.types.link),goog.exportSymbol("transit.isLink",com.cognitect.transit.types.isLink),goog.exportSymbol("transit.hash",com.cognitect.transit.eq.hashCode),goog.exportSymbol("transit.hashMapLike",com.cognitect.transit.eq.hashMapLike),goog.exportSymbol("transit.hashArrayLike",com.cognitect.transit.eq.hashArrayLike),goog.exportSymbol("transit.equals",com.cognitect.transit.eq.equals),goog.exportSymbol("transit.extendToEQ",com.cognitect.transit.eq.extendToEQ),goog.exportSymbol("transit.mapToObject",com.cognitect.transit.mapToObject),goog.exportSymbol("transit.objectToMap",com.cognitect.transit.objectToMap),goog.exportSymbol("transit.decoder",com.cognitect.transit.impl.decoder.decoder),goog.exportSymbol("transit.UUIDfromString",com.cognitect.transit.types.UUIDfromString),goog.exportSymbol("transit.randomUUID",com.cognitect.transit.util.randomUUID),goog.exportSymbol("transit.stringableKeys",com.cognitect.transit.impl.writer.stringableKeys),goog.exportSymbol("transit.readCache",com.cognitect.transit.caching.readCache),goog.exportSymbol("transit.writeCache",com.cognitect.transit.caching.writeCache)),TRANSIT_NODE_TARGET&&(module.exports={reader:com.cognitect.transit.reader,writer:com.cognitect.transit.writer,makeBuilder:com.cognitect.transit.makeBuilder,makeWriteHandler:com.cognitect.transit.makeWriteHandler,date:com.cognitect.transit.types.date,integer:com.cognitect.transit.types.intValue,isInteger:com.cognitect.transit.types.isInteger,uuid:com.cognitect.transit.types.uuid,isUUID:com.cognitect.transit.types.isUUID,bigInt:com.cognitect.transit.types.bigInteger,isBigInt:com.cognitect.transit.types.isBigInteger,bigDec:com.cognitect.transit.types.bigDecimalValue,isBigDec:com.cognitect.transit.types.isBigDecimal,keyword:com.cognitect.transit.types.keyword,isKeyword:com.cognitect.transit.types.isKeyword,symbol:com.cognitect.transit.types.symbol,isSymbol:com.cognitect.transit.types.isSymbol,binary:com.cognitect.transit.types.binary,isBinary:com.cognitect.transit.types.isBinary,uri:com.cognitect.transit.types.uri,isURI:com.cognitect.transit.types.isURI,map:com.cognitect.transit.types.map,isMap:com.cognitect.transit.types.isMap,set:com.cognitect.transit.types.set,isSet:com.cognitect.transit.types.isSet,list:com.cognitect.transit.types.list,isList:com.cognitect.transit.types.isList,quoted:com.cognitect.transit.types.quoted,isQuoted:com.cognitect.transit.types.isQuoted,tagged:com.cognitect.transit.types.taggedValue,isTaggedValue:com.cognitect.transit.types.isTaggedValue,link:com.cognitect.transit.types.link,isLink:com.cognitect.transit.types.isLink,hash:com.cognitect.transit.eq.hashCode,hashArrayLike:com.cognitect.transit.eq.hashArrayLike,hashMapLike:com.cognitect.transit.eq.hashMapLike,equals:com.cognitect.transit.eq.equals,extendToEQ:com.cognitect.transit.eq.extendToEQ,mapToObject:com.cognitect.transit.mapToObject,objectToMap:com.cognitect.transit.objectToMap,decoder:com.cognitect.transit.impl.decoder.decoder,UUIDfromString:com.cognitect.transit.types.UUIDfromString,randomUUID:com.cognitect.transit.util.randomUUID,stringableKeys:com.cognitect.transit.impl.writer.stringableKeys,readCache:com.cognitect.transit.caching.readCache,writeCache:com.cognitect.transit.caching.writeCache})}).call(this,__webpack_require__(78))},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),i=n(1898);e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.default.Map,n=Object.keys(t);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e(),o=arguments[1];return r.withMutations(function(e){n.forEach(function(n){var r=(0,t[n])(e.get(n),o);(0,i.validateNextState)(r,n,o),e.set(n,r)})})}},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateNextState=e.getUnexpectedInvocationParameterMessage=e.getStateName=void 0;var r=a(n(823)),i=a(n(1899)),o=a(n(1900));function a(t){return t&&t.__esModule?t:{default:t}}e.getStateName=r.default,e.getUnexpectedInvocationParameterMessage=i.default,e.validateNextState=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(5)),i=o(n(823));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){var o=Object.keys(e);if(!o.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";var a=(0,i.default)(n);if(r.default.isImmutable?!r.default.isImmutable(t):!r.default.Iterable.isIterable(t))return"The "+a+' is of unexpected type. Expected argument to be an instance of Immutable.Collection or Immutable.Record with the following properties: "'+o.join('", "')+'".';var s=t.toSeq().keySeq().toArray().filter(function(t){return!e.hasOwnProperty(t)});return s.length>0?"Unexpected "+(1===s.length?"property":"properties")+' "'+s.join('", "')+'" found in '+a+'. Expected to find one of the known reducer property names instead: "'+o.join('", "')+'". Unexpected properties will be ignored.':null},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw new Error('Reducer "'+e+'" returned undefined when handling "'+n.type+'" action. To ignore an action, you must explicitly return the previous state.')},t.exports=e.default},,,,,,,,,,,function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1911__},function(t,e,n){"use strict";(function(e,r){var i=n(3909);i.default&&(i=i.default);var o=n(1916),a=n(1936),s=n(1938),l=n(1939),c=n(842),u=new(n(1946))({max:20});function d(t){if(!t)throw new Error("forgot to pass buffer");return e.isBuffer(t)?t:t instanceof r.ArrayBuffer?new e(t):t.buffer instanceof r.ArrayBuffer?1===t.BYTES_PER_ELEMENT?new e(t):new e(t.buffer):void 0}function f(t,e){return"string"==typeof t&&u.has(t)?c.resolve(u.get(t)):f.getShapefile(t,e).then(function(e){return"string"==typeof t&&u.set(t,e),e})}f.combine=function(t){for(var e={type:"FeatureCollection",features:[]},n=0,r=t[0].length;n<r;)e.features.push({type:"Feature",geometry:t[0][n],properties:t[1][n]}),n++;return e},f.parseZip=function(t,e){var n;t=d(t);var r=o(t),a=[];for(n in e=e||[],r)-1===n.indexOf("__MACOSX")&&("shp"===n.slice(-3).toLowerCase()?(a.push(n.slice(0,-4)),r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=r[n]):"prj"===n.slice(-3).toLowerCase()?r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=i(r[n]):"json"===n.slice(-4).toLowerCase()||e.indexOf(n.split(".").pop())>-1?a.push(n.slice(0,-3)+n.slice(-3).toLowerCase()):"dbf"!==n.slice(-3).toLowerCase()&&"cpg"!==n.slice(-3).toLowerCase()||(r[n.slice(0,-3)+n.slice(-3).toLowerCase()]=r[n]));if(!a.length)throw new Error("no layers founds");var c=a.map(function(t){var n,i,o=t.lastIndexOf(".");return o>-1&&t.slice(o).indexOf("json")>-1?(n=JSON.parse(r[t])).fileName=t.slice(0,o):e.indexOf(t.slice(o+1))>-1?(n=r[t]).fileName=t:(r[t+".dbf"]&&(i=l(r[t+".dbf"],r[t+".cpg"])),(n=f.combine([s(r[t+".shp"],r[t+".prj"]),i])).fileName=t),n});return 1===c.length?c[0]:c},f.getShapefile=function(t,e){return"string"==typeof t?".zip"===t.slice(-4).toLowerCase()?function(t,e){return a(t).then(function(t){return f.parseZip(t,e)})}(t,e):c.all([c.all([a(t+".shp"),a(t+".prj")]).then(function(t){return s(t[0],!!t[1]&&i(t[1]))}),c.all([a(t+".dbf"),a(t+".cpg")]).then(function(t){return l(t[0],t[1])})]).then(f.combine):new c(function(e){e(f.parseZip(t))})},f.parseShp=function(t,n){return t=d(t),e.isBuffer(n)&&(n=n.toString()),"string"==typeof n?(n=i(n),s(t,n)):s(t)},f.parseDbf=function(t,e){return t=d(t),l(t,e)},t.exports=f}).call(this,n(321).Buffer,n(78))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],a=n[1],s=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,a)),l=0,u=a>0?r-4:r,d=0;d<u;d+=4)e=i[t.charCodeAt(d)]<<18|i[t.charCodeAt(d+1)]<<12|i[t.charCodeAt(d+2)]<<6|i[t.charCodeAt(d+3)],s[l++]=e>>16&255,s[l++]=e>>8&255,s[l++]=255&e;2===a&&(e=i[t.charCodeAt(d)]<<2|i[t.charCodeAt(d+1)]>>4,s[l++]=255&e);1===a&&(e=i[t.charCodeAt(d)]<<10|i[t.charCodeAt(d+1)]<<4|i[t.charCodeAt(d+2)]>>2,s[l++]=e>>8&255,s[l++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(d(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function d(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(u(r));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,f=n?-1:1,p=t[e+d];for(d+=f,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+d],d+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+d],d+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(e*l-1)*Math.pow(2,i),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=h,a/=256,c-=8);t[n+p-h]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=n(1917);t.exports=function(t){var e={};return new r(t).file(/.+/).forEach(function(t){"shp"===t.name.slice(-3).toLowerCase()||"dbf"===t.name.slice(-3).toLowerCase()?e[t.name]=t.asNodeBuffer():e[t.name]=t.asText()}),e}},function(t,e,n){"use strict";var r=n(552);function i(t,e){if(!(this instanceof i))return new i(t,e);this.files={},this.comment=null,this.root="",t&&this.load(t,e),this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}i.prototype=n(553),i.prototype.load=n(1931),i.support=n(266),i.defaults=n(835),i.utils=n(1935),i.base64={encode:function(t){return r.encode(t)},decode:function(t){return r.decode(t)}},i.compressions=n(554),t.exports=i},function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=n(1919);e.uncompressInputType=r?"uint8array":"array",e.compressInputType=r?"uint8array":"array",e.magic="\b\0",e.compress=function(t,e){return i.deflateRaw(t,{level:e.level||-1})},e.uncompress=function(t){return i.inflateRaw(t)}},function(t,e,n){"use strict";var r={};(0,n(191).assign)(r,n(1920),n(1923),n(833)),t.exports=r},function(t,e,n){"use strict";var r=n(1921),i=n(191),o=n(831),a=n(555),s=n(832),l=Object.prototype.toString,c=0,u=-1,d=0,f=8;function p(t){if(!(this instanceof p))return new p(t);this.options=i.assign({level:u,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==c)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var h;if(h="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=r.deflateSetDictionary(this.strm,h))!==c)throw new Error(a[n]);this._dict_set=!0}}function h(t,e){var n=new p(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}p.prototype.push=function(t,e){var n,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=r.deflate(s,a))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==a||(this.onEnd(c),s.avail_out=0,!0)},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=p,e.deflate=h,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,h(t,e)}},function(t,e,n){"use strict";var r,i=n(191),o=n(1922),a=n(829),s=n(830),l=n(555),c=0,u=1,d=3,f=4,p=5,h=0,g=1,m=-2,v=-3,y=-5,b=-1,w=1,_=2,x=3,S=4,C=0,E=2,T=8,M=9,k=15,A=8,I=286,O=30,P=19,L=2*I+1,D=15,N=3,R=258,F=R+N+1,B=32,j=42,q=69,z=73,U=91,$=103,V=113,H=666,W=1,G=2,Y=3,K=4,X=3;function Q(t,e){return t.msg=l[e],e}function Z(t){return(t<<1)-(t>4?9:0)}function J(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function et(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function nt(t,e){t.pending_buf[t.pending++]=e}function rt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function it(t,e,n,r){var o=t.avail_in;return o>r&&(o=r),0===o?0:(t.avail_in-=o,i.arraySet(e,t.input,t.next_in,o,n),1===t.state.wrap?t.adler=a(t.adler,e,o,n):2===t.state.wrap&&(t.adler=s(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)}function ot(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-F?t.strstart-(t.w_size-F):0,c=t.window,u=t.w_mask,d=t.prev,f=t.strstart+R,p=c[o+a-1],h=c[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+a]===h&&c[n+a-1]===p&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<f);if(r=R-(f-o),o=f-R,r>a){if(t.match_start=e,a=r,r>=s)break;p=c[o+a-1],h=c[o+a]}}}while((e=d[e&u])>l&&0!=--i);return a<=t.lookahead?a:t.lookahead}function at(t){var e,n,r,o,a,s=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-F)){i.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=s?r-s:0}while(--n);e=n=s;do{r=t.prev[--e],t.prev[e]=r>=s?r-s:0}while(--n);o+=s}if(0===t.strm.avail_in)break;if(n=it(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=N)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+N-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<N)););}while(t.lookahead<F&&0!==t.strm.avail_in)}function st(t,e){for(var n,r;;){if(t.lookahead<F){if(at(t),t.lookahead<F&&e===c)return W;if(0===t.lookahead)break}if(n=0,t.lookahead>=N&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+N-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-F&&(t.match_length=ot(t,n)),t.match_length>=N)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-N),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=N){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+N-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(et(t,!1),0===t.strm.avail_out))return W}return t.insert=t.strstart<N-1?t.strstart:N-1,e===f?(et(t,!0),0===t.strm.avail_out?Y:K):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?W:G}function lt(t,e){for(var n,r,i;;){if(t.lookahead<F){if(at(t),t.lookahead<F&&e===c)return W;if(0===t.lookahead)break}if(n=0,t.lookahead>=N&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+N-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=N-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-F&&(t.match_length=ot(t,n),t.match_length<=5&&(t.strategy===w||t.match_length===N&&t.strstart-t.match_start>4096)&&(t.match_length=N-1)),t.prev_length>=N&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-N,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-N),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+N-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=N-1,t.strstart++,r&&(et(t,!1),0===t.strm.avail_out))return W}else if(t.match_available){if((r=o._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return W}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<N-1?t.strstart:N-1,e===f?(et(t,!0),0===t.strm.avail_out?Y:K):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?W:G}function ct(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function ut(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=E,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?j:V,t.adler=2===e.wrap?0:1,e.last_flush=c,o._tr_init(e),h):Q(t,m)}function dt(t){var e=ut(t);return e===h&&function(t){t.window_size=2*t.w_size,J(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=N-1,t.match_available=0,t.ins_h=0}(t.state),e}function ft(t,e,n,r,o,a){if(!t)return m;var s=1;if(e===b&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>M||n!==T||r<8||r>15||e<0||e>9||a<0||a>S)return Q(t,m);8===r&&(r=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*L),this.dyn_dtree=new i.Buf16(2*(2*O+1)),this.bl_tree=new i.Buf16(2*(2*P+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(D+1),this.heap=new i.Buf16(2*I+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*I+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+N-1)/N),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,dt(t)}r=[new ct(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),0===t.lookahead&&e===c)return W;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,et(t,!1),0===t.strm.avail_out))return W;if(t.strstart-t.block_start>=t.w_size-F&&(et(t,!1),0===t.strm.avail_out))return W}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Y:K):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),W)}),new ct(4,4,8,4,st),new ct(4,5,16,8,st),new ct(4,6,32,32,st),new ct(4,4,16,16,lt),new ct(8,16,32,32,lt),new ct(8,16,128,128,lt),new ct(8,32,128,256,lt),new ct(32,128,258,1024,lt),new ct(32,258,258,4096,lt)],e.deflateInit=function(t,e){return ft(t,e,T,k,A,C)},e.deflateInit2=ft,e.deflateReset=dt,e.deflateResetKeep=ut,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?m:(t.state.gzhead=e,h):m},e.deflate=function(t,e){var n,i,a,l;if(!t||!t.state||e>p||e<0)return t?Q(t,m):m;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===H&&e!==f)return Q(t,0===t.avail_out?y:m);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===j)if(2===i.wrap)t.adler=0,nt(i,31),nt(i,139),nt(i,8),i.gzhead?(nt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),nt(i,255&i.gzhead.time),nt(i,i.gzhead.time>>8&255),nt(i,i.gzhead.time>>16&255),nt(i,i.gzhead.time>>24&255),nt(i,9===i.level?2:i.strategy>=_||i.level<2?4:0),nt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(nt(i,255&i.gzhead.extra.length),nt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=q):(nt(i,0),nt(i,0),nt(i,0),nt(i,0),nt(i,0),nt(i,9===i.level?2:i.strategy>=_||i.level<2?4:0),nt(i,X),i.status=V);else{var v=T+(i.w_bits-8<<4)<<8;v|=(i.strategy>=_||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(v|=B),v+=31-v%31,i.status=V,rt(i,v),0!==i.strstart&&(rt(i,t.adler>>>16),rt(i,65535&t.adler)),t.adler=1}if(i.status===q)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending!==i.pending_buf_size));)nt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=z)}else i.status=z;if(i.status===z)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,nt(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=U)}else i.status=U;if(i.status===U)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,nt(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=$)}else i.status=$;if(i.status===$&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&tt(t),i.pending+2<=i.pending_buf_size&&(nt(i,255&t.adler),nt(i,t.adler>>8&255),t.adler=0,i.status=V)):i.status=V),0!==i.pending){if(tt(t),0===t.avail_out)return i.last_flush=-1,h}else if(0===t.avail_in&&Z(e)<=Z(n)&&e!==f)return Q(t,y);if(i.status===H&&0!==t.avail_in)return Q(t,y);if(0!==t.avail_in||0!==i.lookahead||e!==c&&i.status!==H){var b=i.strategy===_?function(t,e){for(var n;;){if(0===t.lookahead&&(at(t),0===t.lookahead)){if(e===c)return W;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return W}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Y:K):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?W:G}(i,e):i.strategy===x?function(t,e){for(var n,r,i,a,s=t.window;;){if(t.lookahead<=R){if(at(t),t.lookahead<=R&&e===c)return W;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=N&&t.strstart>0&&(r=s[i=t.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=t.strstart+R;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);t.match_length=R-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=N?(n=o._tr_tally(t,1,t.match_length-N),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(et(t,!1),0===t.strm.avail_out))return W}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Y:K):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?W:G}(i,e):r[i.level].func(i,e);if(b!==Y&&b!==K||(i.status=H),b===W||b===Y)return 0===t.avail_out&&(i.last_flush=-1),h;if(b===G&&(e===u?o._tr_align(i):e!==p&&(o._tr_stored_block(i,0,0,!1),e===d&&(J(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),tt(t),0===t.avail_out))return i.last_flush=-1,h}return e!==f?h:i.wrap<=0?g:(2===i.wrap?(nt(i,255&t.adler),nt(i,t.adler>>8&255),nt(i,t.adler>>16&255),nt(i,t.adler>>24&255),nt(i,255&t.total_in),nt(i,t.total_in>>8&255),nt(i,t.total_in>>16&255),nt(i,t.total_in>>24&255)):(rt(i,t.adler>>>16),rt(i,65535&t.adler)),tt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?h:g)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==j&&e!==q&&e!==z&&e!==U&&e!==$&&e!==V&&e!==H?Q(t,m):(t.state=null,e===V?Q(t,v):h):m},e.deflateSetDictionary=function(t,e){var n,r,o,s,l,c,u,d,f=e.length;if(!t||!t.state)return m;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==j||n.lookahead)return m;for(1===s&&(t.adler=a(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(J(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new i.Buf8(n.w_size),i.arraySet(d,e,f-n.w_size,n.w_size,0),e=d,f=n.w_size),l=t.avail_in,c=t.next_in,u=t.input,t.avail_in=f,t.next_in=0,t.input=e,at(n);n.lookahead>=N;){r=n.strstart,o=n.lookahead-(N-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+N-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=N-1,at(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=N-1,n.match_available=0,t.next_in=c,t.input=u,t.avail_in=l,n.wrap=s,h},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var r=n(191),i=4,o=0,a=1,s=2;function l(t){for(var e=t.length;--e>=0;)t[e]=0}var c=0,u=1,d=2,f=29,p=256,h=p+1+f,g=30,m=19,v=2*h+1,y=15,b=16,w=7,_=256,x=16,S=17,C=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(h+2));l(A);var I=new Array(2*g);l(I);var O=new Array(512);l(O);var P=new Array(256);l(P);var L=new Array(f);l(L);var D,N,R,F=new Array(g);function B(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function j(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function q(t){return t<256?O[t]:O[256+(t>>>7)]}function z(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function U(t,e,n){t.bi_valid>b-n?(t.bi_buf|=e<<t.bi_valid&65535,z(t,t.bi_buf),t.bi_buf=e>>b-t.bi_valid,t.bi_valid+=n-b):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function $(t,e,n){U(t,n[2*e],n[2*e+1])}function V(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function H(t,e,n){var r,i,o=new Array(y+1),a=0;for(r=1;r<=y;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=V(o[s]++,s))}}function W(t){var e;for(e=0;e<h;e++)t.dyn_ltree[2*e]=0;for(e=0;e<g;e++)t.dyn_dtree[2*e]=0;for(e=0;e<m;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*_]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){t.bi_valid>8?z(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function Y(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function K(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&Y(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Y(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function X(t,e,n){var r,i,o,a,s=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===r?$(t,i,e):($(t,(o=P[i])+p+1,e),0!==(a=E[o])&&U(t,i-=L[o],a),$(t,o=q(--r),n),0!==(a=T[o])&&U(t,r-=F[o],a))}while(s<t.last_lit);$(t,_,e)}function Q(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=v,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)K(t,o,n);i=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],K(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,K(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,l=e.dyn_tree,c=e.max_code,u=e.stat_desc.static_tree,d=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,h=e.stat_desc.max_length,g=0;for(o=0;o<=y;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<v;n++)(o=l[2*l[2*(r=t.heap[n])+1]+1]+1)>h&&(o=h,g++),l[2*r+1]=o,r>c||(t.bl_count[o]++,a=0,r>=p&&(a=f[r-p]),s=l[2*r],t.opt_len+=s*(o+a),d&&(t.static_len+=s*(u[2*r+1]+a)));if(0!==g){do{for(o=h-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[h]--,g-=2}while(g>0);for(o=h;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>c||(l[2*i+1]!==o&&(t.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(t,e),H(o,c,t.bl_count)}function Z(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<l&&i===a||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*x]++):s<=10?t.bl_tree[2*S]++:t.bl_tree[2*C]++,s=0,o=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4))}function J(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<l&&i===a)){if(s<c)do{$(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&($(t,i,t.bl_tree),s--),$(t,x,t.bl_tree),U(t,s-3,2)):s<=10?($(t,S,t.bl_tree),U(t,s-3,3)):($(t,C,t.bl_tree),U(t,s-11,7));s=0,o=i,0===a?(l=138,c=3):i===a?(l=6,c=3):(l=7,c=4)}}l(F);var tt=!1;function et(t,e,n,i){U(t,(c<<1)+(i?1:0),3),function(t,e,n,i){G(t),i&&(z(t,n),z(t,~n)),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){tt||(function(){var t,e,n,r,i,o=new Array(y+1);for(n=0,r=0;r<f-1;r++)for(L[r]=n,t=0;t<1<<E[r];t++)P[n++]=r;for(P[n-1]=r,i=0,r=0;r<16;r++)for(F[r]=i,t=0;t<1<<T[r];t++)O[i++]=r;for(i>>=7;r<g;r++)for(F[r]=i<<7,t=0;t<1<<T[r]-7;t++)O[256+i++]=r;for(e=0;e<=y;e++)o[e]=0;for(t=0;t<=143;)A[2*t+1]=8,t++,o[8]++;for(;t<=255;)A[2*t+1]=9,t++,o[9]++;for(;t<=279;)A[2*t+1]=7,t++,o[7]++;for(;t<=287;)A[2*t+1]=8,t++,o[8]++;for(H(A,h+1,o),t=0;t<g;t++)I[2*t+1]=5,I[2*t]=V(t,5);D=new B(A,E,p+1,h,y),N=new B(I,T,0,g,y),R=new B(new Array(0),M,0,m,w)}(),tt=!0),t.l_desc=new j(t.dyn_ltree,D),t.d_desc=new j(t.dyn_dtree,N),t.bl_desc=new j(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,W(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,n,r){var l,c,f=0;t.level>0?(t.strm.data_type===s&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<p;e++)if(0!==t.dyn_ltree[2*e])return a;return o}(t)),Q(t,t.l_desc),Q(t,t.d_desc),f=function(t){var e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),Q(t,t.bl_desc),e=m-1;e>=3&&0===t.bl_tree[2*k[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),l=t.opt_len+3+7>>>3,(c=t.static_len+3+7>>>3)<=l&&(l=c)):l=c=n+5,n+4<=l&&-1!==e?et(t,e,n,r):t.strategy===i||c===l?(U(t,(u<<1)+(r?1:0),3),X(t,A,I)):(U(t,(d<<1)+(r?1:0),3),function(t,e,n,r){var i;for(U(t,e-257,5),U(t,n-1,5),U(t,r-4,4),i=0;i<r;i++)U(t,t.bl_tree[2*k[i]+1],3);J(t,t.dyn_ltree,e-1),J(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,f+1),X(t,t.dyn_ltree,t.dyn_dtree)),W(t),r&&G(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(P[n]+p+1)]++,t.dyn_dtree[2*q(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){U(t,u<<1,3),$(t,_,A),function(t){16===t.bi_valid?(z(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";var r=n(1924),i=n(191),o=n(831),a=n(833),s=n(555),l=n(832),c=n(1927),u=Object.prototype.toString;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function f(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(t,e){var n,s,l,c,d,f,p=this.strm,h=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?p.input=o.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(h),p.next_out=0,p.avail_out=h),(n=r.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(f="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===u.call(g)?new Uint8Array(g):g,n=r.inflateSetDictionary(this.strm,f)),n===a.Z_BUF_ERROR&&!0===m&&(n=a.Z_OK,m=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(p.output,p.next_out),c=p.next_out-l,d=o.buf2string(p.output,l),p.next_out=c,p.avail_out=h-c,c&&i.arraySet(p.output,p.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),p.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=d,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,n){"use strict";var r=n(191),i=n(829),o=n(830),a=n(1925),s=n(1926),l=0,c=1,u=2,d=4,f=5,p=6,h=0,g=1,m=2,v=-2,y=-3,b=-4,w=-5,_=8,x=1,S=2,C=3,E=4,T=5,M=6,k=7,A=8,I=9,O=10,P=11,L=12,D=13,N=14,R=15,F=16,B=17,j=18,q=19,z=20,U=21,$=22,V=23,H=24,W=25,G=26,Y=27,K=28,X=29,Q=30,Z=31,J=32,tt=852,et=592,nt=15;function rt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function it(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=x,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(tt),e.distcode=e.distdyn=new r.Buf32(et),e.sane=1,e.back=-1,h):v}function ot(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,it(t)):v}function at(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?v:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,ot(t))):v}function st(t,e){var n,i;return t?(i=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=i,i.window=null,(n=at(t,e))!==h&&(t.state=null),n):v}var lt,ct,ut=!0;function dt(t){if(ut){var e;for(lt=new r.Buf32(512),ct=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(c,t.lens,0,288,lt,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(u,t.lens,0,32,ct,0,t.work,{bits:5}),ut=!1}t.lencode=lt,t.lenbits=9,t.distcode=ct,t.distbits=5}function ft(t,e,n,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,e,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=ot,e.inflateReset2=at,e.inflateResetKeep=it,e.inflateInit=function(t){return st(t,nt)},e.inflateInit2=st,e.inflate=function(t,e){var n,tt,et,nt,it,ot,at,st,lt,ct,ut,pt,ht,gt,mt,vt,yt,bt,wt,_t,xt,St,Ct,Et,Tt=0,Mt=new r.Buf8(4),kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return v;(n=t.state).mode===L&&(n.mode=D),it=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,ot=t.avail_in,st=n.hold,lt=n.bits,ct=ot,ut=at,St=h;t:for(;;)switch(n.mode){case x:if(0===n.wrap){n.mode=D;break}for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(2&n.wrap&&35615===st){n.check=0,Mt[0]=255&st,Mt[1]=st>>>8&255,n.check=o(n.check,Mt,2,0),st=0,lt=0,n.mode=S;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&st)<<8)+(st>>8))%31){t.msg="incorrect header check",n.mode=Q;break}if((15&st)!==_){t.msg="unknown compression method",n.mode=Q;break}if(lt-=4,xt=8+(15&(st>>>=4)),0===n.wbits)n.wbits=xt;else if(xt>n.wbits){t.msg="invalid window size",n.mode=Q;break}n.dmax=1<<xt,t.adler=n.check=1,n.mode=512&st?O:L,st=0,lt=0;break;case S:for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(n.flags=st,(255&n.flags)!==_){t.msg="unknown compression method",n.mode=Q;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Q;break}n.head&&(n.head.text=st>>8&1),512&n.flags&&(Mt[0]=255&st,Mt[1]=st>>>8&255,n.check=o(n.check,Mt,2,0)),st=0,lt=0,n.mode=C;case C:for(;lt<32;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.head&&(n.head.time=st),512&n.flags&&(Mt[0]=255&st,Mt[1]=st>>>8&255,Mt[2]=st>>>16&255,Mt[3]=st>>>24&255,n.check=o(n.check,Mt,4,0)),st=0,lt=0,n.mode=E;case E:for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.head&&(n.head.xflags=255&st,n.head.os=st>>8),512&n.flags&&(Mt[0]=255&st,Mt[1]=st>>>8&255,n.check=o(n.check,Mt,2,0)),st=0,lt=0,n.mode=T;case T:if(1024&n.flags){for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.length=st,n.head&&(n.head.extra_len=st),512&n.flags&&(Mt[0]=255&st,Mt[1]=st>>>8&255,n.check=o(n.check,Mt,2,0)),st=0,lt=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(1024&n.flags&&((pt=n.length)>ot&&(pt=ot),pt&&(n.head&&(xt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,tt,nt,pt,xt)),512&n.flags&&(n.check=o(n.check,tt,pt,nt)),ot-=pt,nt+=pt,n.length-=pt),n.length))break t;n.length=0,n.mode=k;case k:if(2048&n.flags){if(0===ot)break t;pt=0;do{xt=tt[nt+pt++],n.head&&xt&&n.length<65536&&(n.head.name+=String.fromCharCode(xt))}while(xt&&pt<ot);if(512&n.flags&&(n.check=o(n.check,tt,pt,nt)),ot-=pt,nt+=pt,xt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=A;case A:if(4096&n.flags){if(0===ot)break t;pt=0;do{xt=tt[nt+pt++],n.head&&xt&&n.length<65536&&(n.head.comment+=String.fromCharCode(xt))}while(xt&&pt<ot);if(512&n.flags&&(n.check=o(n.check,tt,pt,nt)),ot-=pt,nt+=pt,xt)break t}else n.head&&(n.head.comment=null);n.mode=I;case I:if(512&n.flags){for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Q;break}st=0,lt=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=L;break;case O:for(;lt<32;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}t.adler=n.check=rt(st),st=0,lt=0,n.mode=P;case P:if(0===n.havedict)return t.next_out=it,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,m;t.adler=n.check=1,n.mode=L;case L:if(e===f||e===p)break t;case D:if(n.last){st>>>=7&lt,lt-=7&lt,n.mode=Y;break}for(;lt<3;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}switch(n.last=1&st,lt-=1,3&(st>>>=1)){case 0:n.mode=N;break;case 1:if(dt(n),n.mode=z,e===p){st>>>=2,lt-=2;break t}break;case 2:n.mode=B;break;case 3:t.msg="invalid block type",n.mode=Q}st>>>=2,lt-=2;break;case N:for(st>>>=7&lt,lt-=7&lt;lt<32;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if((65535&st)!=(st>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Q;break}if(n.length=65535&st,st=0,lt=0,n.mode=R,e===p)break t;case R:n.mode=F;case F:if(pt=n.length){if(pt>ot&&(pt=ot),pt>at&&(pt=at),0===pt)break t;r.arraySet(et,tt,nt,pt,it),ot-=pt,nt+=pt,at-=pt,it+=pt,n.length-=pt;break}n.mode=L;break;case B:for(;lt<14;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(n.nlen=257+(31&st),st>>>=5,lt-=5,n.ndist=1+(31&st),st>>>=5,lt-=5,n.ncode=4+(15&st),st>>>=4,lt-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Q;break}n.have=0,n.mode=j;case j:for(;n.have<n.ncode;){for(;lt<3;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.lens[kt[n.have++]]=7&st,st>>>=3,lt-=3}for(;n.have<19;)n.lens[kt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ct={bits:n.lenbits},St=s(l,n.lens,0,19,n.lencode,0,n.work,Ct),n.lenbits=Ct.bits,St){t.msg="invalid code lengths set",n.mode=Q;break}n.have=0,n.mode=q;case q:for(;n.have<n.nlen+n.ndist;){for(;vt=(Tt=n.lencode[st&(1<<n.lenbits)-1])>>>16&255,yt=65535&Tt,!((mt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(yt<16)st>>>=mt,lt-=mt,n.lens[n.have++]=yt;else{if(16===yt){for(Et=mt+2;lt<Et;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st>>>=mt,lt-=mt,0===n.have){t.msg="invalid bit length repeat",n.mode=Q;break}xt=n.lens[n.have-1],pt=3+(3&st),st>>>=2,lt-=2}else if(17===yt){for(Et=mt+3;lt<Et;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}lt-=mt,xt=0,pt=3+(7&(st>>>=mt)),st>>>=3,lt-=3}else{for(Et=mt+7;lt<Et;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}lt-=mt,xt=0,pt=11+(127&(st>>>=mt)),st>>>=7,lt-=7}if(n.have+pt>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Q;break}for(;pt--;)n.lens[n.have++]=xt}}if(n.mode===Q)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Q;break}if(n.lenbits=9,Ct={bits:n.lenbits},St=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,Ct),n.lenbits=Ct.bits,St){t.msg="invalid literal/lengths set",n.mode=Q;break}if(n.distbits=6,n.distcode=n.distdyn,Ct={bits:n.distbits},St=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ct),n.distbits=Ct.bits,St){t.msg="invalid distances set",n.mode=Q;break}if(n.mode=z,e===p)break t;case z:n.mode=U;case U:if(ot>=6&&at>=258){t.next_out=it,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,a(t,ut),it=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,ot=t.avail_in,st=n.hold,lt=n.bits,n.mode===L&&(n.back=-1);break}for(n.back=0;vt=(Tt=n.lencode[st&(1<<n.lenbits)-1])>>>16&255,yt=65535&Tt,!((mt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(vt&&0==(240&vt)){for(bt=mt,wt=vt,_t=yt;vt=(Tt=n.lencode[_t+((st&(1<<bt+wt)-1)>>bt)])>>>16&255,yt=65535&Tt,!(bt+(mt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}st>>>=bt,lt-=bt,n.back+=bt}if(st>>>=mt,lt-=mt,n.back+=mt,n.length=yt,0===vt){n.mode=G;break}if(32&vt){n.back=-1,n.mode=L;break}if(64&vt){t.msg="invalid literal/length code",n.mode=Q;break}n.extra=15&vt,n.mode=$;case $:if(n.extra){for(Et=n.extra;lt<Et;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.length+=st&(1<<n.extra)-1,st>>>=n.extra,lt-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=V;case V:for(;vt=(Tt=n.distcode[st&(1<<n.distbits)-1])>>>16&255,yt=65535&Tt,!((mt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(0==(240&vt)){for(bt=mt,wt=vt,_t=yt;vt=(Tt=n.distcode[_t+((st&(1<<bt+wt)-1)>>bt)])>>>16&255,yt=65535&Tt,!(bt+(mt=Tt>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}st>>>=bt,lt-=bt,n.back+=bt}if(st>>>=mt,lt-=mt,n.back+=mt,64&vt){t.msg="invalid distance code",n.mode=Q;break}n.offset=yt,n.extra=15&vt,n.mode=H;case H:if(n.extra){for(Et=n.extra;lt<Et;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.offset+=st&(1<<n.extra)-1,st>>>=n.extra,lt-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Q;break}n.mode=W;case W:if(0===at)break t;if(pt=ut-at,n.offset>pt){if((pt=n.offset-pt)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Q;break}pt>n.wnext?(pt-=n.wnext,ht=n.wsize-pt):ht=n.wnext-pt,pt>n.length&&(pt=n.length),gt=n.window}else gt=et,ht=it-n.offset,pt=n.length;pt>at&&(pt=at),at-=pt,n.length-=pt;do{et[it++]=gt[ht++]}while(--pt);0===n.length&&(n.mode=U);break;case G:if(0===at)break t;et[it++]=n.length,at--,n.mode=U;break;case Y:if(n.wrap){for(;lt<32;){if(0===ot)break t;ot--,st|=tt[nt++]<<lt,lt+=8}if(ut-=at,t.total_out+=ut,n.total+=ut,ut&&(t.adler=n.check=n.flags?o(n.check,et,ut,it-ut):i(n.check,et,ut,it-ut)),ut=at,(n.flags?st:rt(st))!==n.check){t.msg="incorrect data check",n.mode=Q;break}st=0,lt=0}n.mode=K;case K:if(n.wrap&&n.flags){for(;lt<32;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Q;break}st=0,lt=0}n.mode=X;case X:St=g;break t;case Q:St=y;break t;case Z:return b;case J:default:return v}return t.next_out=it,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,(n.wsize||ut!==t.avail_out&&n.mode<Q&&(n.mode<Y||e!==d))&&ft(t,t.output,t.next_out,ut-t.avail_out)?(n.mode=Z,b):(ct-=t.avail_in,ut-=t.avail_out,t.total_in+=ct,t.total_out+=ut,n.total+=ut,n.wrap&&ut&&(t.adler=n.check=n.flags?o(n.check,et,ut,t.next_out-ut):i(n.check,et,ut,t.next_out-ut)),t.data_type=n.bits+(n.last?64:0)+(n.mode===L?128:0)+(n.mode===z||n.mode===R?256:0),(0===ct&&0===ut||e===d)&&St===h&&(St=w),St)},e.inflateEnd=function(t){if(!t||!t.state)return v;var e=t.state;return e.window&&(e.window=null),t.state=null,h},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?v:(n.head=e,e.done=!1,h):v},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==P?v:n.mode===P&&i(1,e,r,0)!==n.check?y:ft(t,e,r,r)?(n.mode=Z,b):(n.havedict=1,h):v},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,y,b,w,_,x,S,C,E,T;n=t.state,r=t.next_in,E=t.input,i=r+(t.avail_in-5),o=t.next_out,T=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,g=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),b=g[p&v];e:for(;;){if(p>>>=w=b>>>24,h-=w,0===(w=b>>>16&255))T[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=65535&b,(w&=15)&&(h<w&&(p+=E[r++]<<h,h+=8),_+=p&(1<<w)-1,p>>>=w,h-=w),h<15&&(p+=E[r++]<<h,h+=8,p+=E[r++]<<h,h+=8),b=m[p&y];n:for(;;){if(p>>>=w=b>>>24,h-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=m[(65535&b)+(p&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&b,h<(w&=15)&&(p+=E[r++]<<h,(h+=8)<w&&(p+=E[r++]<<h,h+=8)),(x+=p&(1<<w)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=w,h-=w,x>(w=o-a)){if((w=x-w)>u&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(S=0,C=f,0===d){if(S+=c-w,w<_){_-=w;do{T[o++]=f[S++]}while(--w);S=o-x,C=T}}else if(d<w){if(S+=c+d-w,(w-=d)<_){_-=w;do{T[o++]=f[S++]}while(--w);if(S=0,d<_){_-=w=d;do{T[o++]=f[S++]}while(--w);S=o-x,C=T}}}else if(S+=d-w,w<_){_-=w;do{T[o++]=f[S++]}while(--w);S=o-x,C=T}for(;_>2;)T[o++]=C[S++],T[o++]=C[S++],T[o++]=C[S++],_-=3;_&&(T[o++]=C[S++],_>1&&(T[o++]=C[S++]))}else{S=o-x;do{T[o++]=T[S++],T[o++]=T[S++],T[o++]=T[S++],_-=3}while(_>2);_&&(T[o++]=T[S++],_>1&&(T[o++]=T[S++]))}break}}break}}while(r<i&&o<s);r-=_=h>>3,p&=(1<<(h-=_<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=h}},function(t,e,n){"use strict";var r=n(191),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,u,d,f){var p,h,g,m,v,y,b,w,_,x=f.bits,S=0,C=0,E=0,T=0,M=0,k=0,A=0,I=0,O=0,P=0,L=null,D=0,N=new r.Buf16(16),R=new r.Buf16(16),F=null,B=0;for(S=0;S<=15;S++)N[S]=0;for(C=0;C<l;C++)N[e[n+C]]++;for(M=x,T=15;T>=1&&0===N[T];T--);if(M>T&&(M=T),0===T)return c[u++]=20971520,c[u++]=20971520,f.bits=1,0;for(E=1;E<T&&0===N[E];E++);for(M<E&&(M=E),I=1,S=1;S<=15;S++)if(I<<=1,(I-=N[S])<0)return-1;if(I>0&&(0===t||1!==T))return-1;for(R[1]=0,S=1;S<15;S++)R[S+1]=R[S]+N[S];for(C=0;C<l;C++)0!==e[n+C]&&(d[R[e[n+C]]++]=C);if(0===t?(L=F=d,y=19):1===t?(L=i,D-=257,F=o,B-=257,y=256):(L=a,F=s,y=-1),P=0,C=0,S=E,v=u,k=M,A=0,g=-1,m=(O=1<<M)-1,1===t&&O>852||2===t&&O>592)return 1;for(;;){b=S-A,d[C]<y?(w=0,_=d[C]):d[C]>y?(w=F[B+d[C]],_=L[D+d[C]]):(w=96,_=0),p=1<<S-A,E=h=1<<k;do{c[v+(P>>A)+(h-=p)]=b<<24|w<<16|_|0}while(0!==h);for(p=1<<S-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,C++,0==--N[S]){if(S===T)break;S=e[n+d[C]]}if(S>M&&(P&m)!==g){for(0===A&&(A=M),v+=E,I=1<<(k=S-A);k+A<T&&!((I-=N[k+A])<=0);)k++,I<<=1;if(O+=1<<k,1===t&&O>852||2===t&&O>592)return 1;c[g=P&m]=M<<24|k<<16|v-u|0}}return 0!==P&&(c[v+P]=S-A<<24|64<<16|0),f.bits=M,0}},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){"use strict";var r=n(132),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(t,e){if(void 0===t||!t.length)return 0;var n="string"!==r.getTypeOf(t);void 0===e&&(e=0);var o=0;e^=-1;for(var a=0,s=t.length;a<s;a++)o=n?t[a]:t.charCodeAt(a),e=e>>>8^i[255&(e^o)];return-1^e}},function(t,e,n){"use strict";var r=n(132),i=function(){this.data=[]};i.prototype={append:function(t){t=r.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},t.exports=i},function(t,e,n){"use strict";var r=n(132),i=function(t){this.data=new Uint8Array(t),this.index=0};i.prototype={append:function(t){0!==t.length&&(t=r.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},t.exports=i},function(t,e,n){"use strict";var r=n(552),i=n(837),o=n(132),a=n(1932);t.exports=function(t,e){var n,s,l,c;for((e=o.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode})).base64&&(t=r.decode(t)),n=(s=new a(t,e)).files,l=0;l<n.length;l++)c=n[l],this.file(c.fileNameStr,c.decompressed,{binary:!0,optimizedBinaryString:!0,date:c.date,dir:c.dir,comment:c.fileCommentStr.length?c.fileCommentStr:null,unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions,createFolders:e.createFolders});return s.zipComment.length&&(this.comment=s.zipComment),this}},function(t,e,n){"use strict";var r=n(838),i=n(1933),o=n(840),a=n(841),s=n(132),l=n(834),c=n(1934),u=n(266);n(553);function d(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}d.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(e)+", expected "+s.pretty(t)+")")},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=u.uint8array?"uint8array":"array",n=s.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)(t=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(r>0)this.isSignature(e,l.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){var e=s.getTypeOf(t);if(s.checkSupport(e),"string"!==e||u.uint8array)if("nodebuffer"===e)this.reader=new i(t);else if(u.uint8array)this.reader=new o(s.transformTo("uint8array",t));else{if(!u.array)throw new Error("Unexpected error: unsupported type '"+e+"'");this.reader=new a(s.transformTo("array",t))}else this.reader=new r(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=d},function(t,e,n){"use strict";var r=n(840);function i(t){this.data=t,this.length=this.data.length,this.index=0,this.zero=0}i.prototype=new r,i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=i},function(t,e,n){"use strict";var r=n(838),i=n(132),o=n(836),a=n(553),s=n(266);function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(t,e,n){return function(){var r=t.index;t.setIndex(e);var i=t.readData(n);return t.setIndex(r),i}},prepareContent:function(t,e,n,r,o){return function(){var t=i.transformTo(r.uncompressInputType,this.getCompressedContent()),e=r.uncompress(t);if(e.length!==o)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(e=i.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");if(this.decompressed=new o,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readData(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index;for(this.extraFields=this.extraFields||{};t.index<i+this.extraFieldsLength;)e=t.readInt(2),n=t.readInt(2),r=t.readString(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){var t=s.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:a.crc32(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new r(t.value);return 1!==e.readInt(1)?null:a.crc32(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null}},t.exports=l},function(t,e,n){"use strict";var r=n(132);e.string2binary=function(t){return r.string2binary(t)},e.string2Uint8Array=function(t){return r.transformTo("uint8array",t)},e.uint8Array2String=function(t){return r.transformTo("string",t)},e.string2Blob=function(t){var e=r.transformTo("arraybuffer",t);return r.arrayBuffer2Blob(e)},e.arrayBuffer2Blob=function(t){return r.arrayBuffer2Blob(t)},e.transformTo=function(t,e){return r.transformTo(t,e)},e.getTypeOf=function(t){return r.getTypeOf(t)},e.checkSupport=function(t){return r.checkSupport(t)},e.MAX_VALUE_16BITS=r.MAX_VALUE_16BITS,e.MAX_VALUE_32BITS=r.MAX_VALUE_32BITS,e.pretty=function(t){return r.pretty(t)},e.findCompression=function(t){return r.findCompression(t)},e.isRegExp=function(t){return r.isRegExp(t)}},function(t,e,n){"use strict";(function(e){var r=n(842);t.exports=function(t){return new r(function(n,r){var i=t.slice(-3),o=new XMLHttpRequest;o.open("GET",t,!0),"prj"!==i&&"cpg"!==i&&(o.responseType="arraybuffer"),o.addEventListener("load",function(){return o.status>399?"prj"===i||"cpg"===i?n(!1):r(new Error(o.status)):n("prj"!==i&&"cpg"!==i?new e(o.response):o.response)},!1),o.send()})}}).call(this,n(321).Buffer)},function(t,e,n){"use strict";(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}t.exports=function(t){1!==c.push(t)||r||n()}}).call(this,n(78))},function(t,e,n){"use strict";function r(t,e){return!function(t){for(var e,n,r=0,i=1,o=t.length;i<o;)e=n||t[0],r+=((n=t[i])[0]-e[0])*(n[1]+e[1]),i++;return r>0}(e)&&t.length?t[t.length-1].push(e):t.push([e]),t}o.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}},o.prototype.parseZPoint=function(t){var e=this.parsePoint(t);return e.coordinates.push(this.parseCoord(t,16)),e},o.prototype.parsePointArray=function(t,e,n){for(var r=[],i=0;i<n;)r.push(this.parseCoord(t,e)),e+=16,i++;return r},o.prototype.parseZPointArray=function(t,e,n,r){for(var i=0;i<n;)r[i].push(t.readDoubleLE(e)),i++,e+=8;return r},o.prototype.parseArrayGroup=function(t,e,n,r,i){for(var o,a,s=[],l=0,c=0;l<r;)n+=4,o=c,(a=(c=++l===r?i:t.readInt32LE(n))-o)&&(s.push(this.parsePointArray(t,e,a)),e+=a<<4);return s},o.prototype.parseZArrayGroup=function(t,e,n,r){for(var i=0;i<n;)r[i]=this.parseZPointArray(t,e,r[i].length,r[i]),e+=r[i].length<<3,i++;return r},o.prototype.parseMultiPoint=function(t){var e={},n=this.parseCoord(t,0),r=this.parseCoord(t,16);e.bbox=[n[0],n[1],r[0],r[1]];var i=t.readInt32LE(32,!0);return 1===i?(e.type="Point",e.coordinates=this.parseCoord(t,36)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,36,i)),e},o.prototype.parseZMultiPoint=function(t){var e,n=this.parseMultiPoint(t);if("Point"===n.type)return n.coordinates.push(t.readDoubleLE(72)),n;var r=52+((e=n.coordinates.length)<<4);return n.coordinates=this.parseZPointArray(t,r,e,n.coordinates),n},o.prototype.parsePolyline=function(t){var e={},n=this.parseCoord(t,0),r=this.parseCoord(t,16);e.bbox=[n[0],n[1],r[0],r[1]];var i,o,a=t.readInt32LE(32),s=t.readInt32LE(36);return 1===a?(e.type="LineString",i=44,e.coordinates=this.parsePointArray(t,i,s)):(e.type="MultiLineString",i=40+(a<<2),o=40,e.coordinates=this.parseArrayGroup(t,i,o,a,s)),e},o.prototype.parseZPolyline=function(t){var e,n=this.parsePolyline(t),r=n.coordinates.length;return"LineString"===n.type?(e=60+(r<<4),n.coordinates=this.parseZPointArray(t,e,r,n.coordinates),n):(e=56+(n.coordinates.reduce(function(t,e){return t+e.length},0)<<4)+(r<<2),n.coordinates=this.parseZArrayGroup(t,e,r,n.coordinates),n)},o.prototype.polyFuncs=function(t){return"LineString"===t.type?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=t.coordinates.reduce(r,[]),1===t.coordinates.length?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t))},o.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))},o.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};var i={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function o(t,e){if(!(this instanceof o))return new o(t,e);this.buffer=t,this.shpFuncs(e),this.rows=this.getRows()}o.prototype.shpFuncs=function(t){var e=this.getShpCode();if(e>20&&(e-=20),!(e in i))throw new Error("I don't know that shp type");this.parseFunc=this[i[e]],this.parseCoord=function(t){return t?function(e,n){return t.inverse([e.readDoubleLE(n),e.readDoubleLE(n+8)])}:function(t,e){return[t.readDoubleLE(e),t.readDoubleLE(e+8)]}}(t)},o.prototype.getShpCode=function(){return this.parseHeader().shpCode},o.prototype.parseHeader=function(){var t=this.buffer.slice(0,100);return{length:t.readInt32BE(24),version:t.readInt32LE(28),shpCode:t.readInt32LE(32),bbox:[t.readDoubleLE(36),t.readDoubleLE(44),t.readDoubleLE(52),t.readDoubleLE(52)]}},o.prototype.getRows=function(){for(var t,e=100,n=this.buffer.byteLength,r=[];e<n;)t=this.getRow(e),e+=8,e+=t.len,t.type&&r.push(this.parseFunc(t.data));return r},o.prototype.getRow=function(t){var e=this.buffer.slice(t,t+12),n=e.readInt32BE(4)<<1,r=this.buffer.slice(t+12,t+n+8);return{id:e.readInt32BE(0),len:n,data:r,type:e.readInt32LE(8)}},t.exports=function(t,e){return new o(t,e).rows}},function(t,e,n){var r=n(1940);function i(t,e,n,r,i){var o=i(t.slice(e,e+n));switch(r){case"N":case"F":case"O":return parseFloat(o,10);case"D":return new Date(o.slice(0,4),parseInt(o.slice(4,6),10)-1,o.slice(6,8));case"L":return"y"===o.toLowerCase()||"t"===o.toLowerCase();default:return o}}function o(t,e,n,r){for(var o,a,s={},l=0,c=n.length;l<c;)o=i(t,e,(a=n[l]).len,a.dataType,r),e+=a.len,void 0!==o&&(s[a.name]=o),l++;return s}t.exports=function(t,e){for(var n=r(e),i=function(t){var e={};return e.lastUpdated=new Date(t.readUInt8(1)+1900,t.readUInt8(2),t.readUInt8(3)),e.records=t.readUInt32LE(4),e.headerLen=t.readUInt16LE(8),e.recLen=t.readUInt16LE(10),e}(t),a=function(t,e,n){for(var r=[],i=32;i<e&&(r.push({name:n(t.slice(i,i+11)),dataType:String.fromCharCode(t.readUInt8(i+11)),len:t.readUInt8(i+16),decimal:t.readUInt8(i+17)}),13!==t.readUInt8(i+32));)i+=32;return r}(t,i.headerLen-1,n),s=2+(a.length+1<<5),l=i.recLen,c=i.records,u=[];c;)u.push(o(t,s,a,n)),s+=l,c--;return u}},function(t,e,n){n(1941);var r=n(1944).StringDecoder;function i(t){var e=new r;return(e.write(t)+e.end()).replace(/\0/g,"").trim()}t.exports=function(t){if(!t)return i;try{new TextDecoder(t.trim())}catch(n){var e=o.exec(t);e&&(t="windows-"+e[1])}return function(e){var n=new TextDecoder(t);return(n.decode(e,{stream:!0})+n.decode()).replace(/\0/g,"").trim()}};var o=/^(?:ASNI\s)?(\d+)$/m},function(t,e,n){t.exports=n(1942)},function(t,e,n){!function(e){"use strict";function r(t,e,n){return e<=t&&t<=n}void 0!==t&&t.exports&&!e["encoding-indexes"]&&n(1943);var i=Math.floor;function o(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function a(t){return 0<=t&&t<=127}var s=a,l=-1;function c(t){this.tokens=[].slice.call(t),this.tokens.reverse()}c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():l},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.pop());else this.tokens.push(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.shift());else this.tokens.unshift(t)}};var u=-1;function d(t,e){if(t)throw TypeError("Decoder error");return e||65533}function f(t){throw TypeError("The code point "+t+" could not be encoded.")}function p(t){return t=String(t).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(g,t)?g[t]:null}var h=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],g={};h.forEach(function(t){t.encodings.forEach(function(t){t.labels.forEach(function(e){g[e]=t})})});var m,v,y={},b={};function w(t,e){return e&&e[t]||null}function _(t,e){var n=e.indexOf(t);return-1===n?null:n}function x(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][t]}var S="utf-8";function C(t,e){if(!(this instanceof C))throw TypeError("Called as a function. Did you forget 'new'?");t=void 0!==t?String(t):S,e=o(e),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=p(t);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!b[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");return this._encoding=n,Boolean(e.fatal)&&(this._error_mode="fatal"),Boolean(e.ignoreBOM)&&(this._ignoreBOM=!0),Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase(),this.fatal="fatal"===this._error_mode,this.ignoreBOM=this._ignoreBOM),this}function E(t,n){if(!(this instanceof E))throw TypeError("Called as a function. Did you forget 'new'?");n=o(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){var r=p(t=void 0!==t?String(t):S);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+t);if(!y[r.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=r}else this._encoding=p("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function T(t){var e=t.fatal,n=0,i=0,o=0;this.handler=function(t,s){if(s===l&&0===n&&0===i&&0===o)return u;var c;if(s!==l||0===n&&0===i&&0===o||(n=0,i=0,o=0,d(e)),0!==o){c=null,r(s,48,57)&&(c=function(t){if(t>39419&&t<189e3||t>1237575)return null;if(7457===t)return 59335;var e,n=0,r=0,i=x("gb18030-ranges");for(e=0;e<i.length;++e){var o=i[e];if(!(o[0]<=t))break;n=o[0],r=o[1]}return r+t-n}(10*(126*(10*(n-129)+i-48)+o-129)+s-48));var f=[i,o,s];return n=0,i=0,o=0,null===c?(t.prepend(f),d(e)):c}if(0!==i)return r(s,129,254)?(o=s,null):(t.prepend([i,s]),n=0,i=0,d(e));if(0!==n){if(r(s,48,57))return i=s,null;var p=n,h=null;n=0;var g=s<127?64:65;return(r(s,64,126)||r(s,128,254))&&(h=190*(p-129)+(s-g)),null===(c=null===h?null:w(h,x("gb18030")))&&a(s)&&t.prepend(s),null===c?d(e):c}return a(s)?s:128===s?8364:r(s,129,254)?(n=s,null):d(e)}}function M(t,e){t.fatal;this.handler=function(t,n){if(n===l)return u;if(s(n))return n;if(58853===n)return f(n);if(e&&8364===n)return 128;var r=_(n,x("gb18030"));if(null!==r){var o=r%190;return[i(r/190)+129,o+(o<63?64:65)]}if(e)return f(n);r=function(t){if(59335===t)return 7457;var e,n=0,r=0,i=x("gb18030-ranges");for(e=0;e<i.length;++e){var o=i[e];if(!(o[1]<=t))break;n=o[1],r=o[0]}return r+t-n}(n);var a=i(r/10/126/10),c=i((r-=10*a*126*10)/10/126),d=i((r-=10*c*126)/10);return[a+129,c+48,d+129,r-10*d+48]}}function k(t){t.fatal;this.handler=function(t,e){if(e===l)return u;if(s(e))return e;var n=function(t){var e=v=v||x("big5").map(function(t,e){return e<5024?null:t});return 9552===t||9566===t||9569===t||9578===t||21313===t||21317===t?e.lastIndexOf(t):_(t,e)}(e);if(null===n)return f(e);var r=i(n/157)+129;if(r<161)return f(e);var o=n%157;return[r,o+(o<63?64:98)]}}function A(t){t.fatal;this.handler=function(t,e){if(e===l)return u;if(s(e)||128===e)return e;if(165===e)return 92;if(8254===e)return 126;if(r(e,65377,65439))return e-65377+161;8722===e&&(e=65293);var n=function(t){return(m=m||x("jis0208").map(function(t,e){return r(e,8272,8835)?null:t})).indexOf(t)}(e);if(null===n)return f(e);var o=i(n/188),a=n%188;return[o+(o<31?129:193),a+(a<63?64:65)]}}function I(t,e){var n=t>>8,r=255&t;return e?[n,r]:[r,n]}function O(t,e){var n=e.fatal,i=null,o=null;this.handler=function(e,a){if(a===l&&(null!==i||null!==o))return d(n);if(a===l&&null===i&&null===o)return u;if(null===i)return i=a,null;var s;if(s=t?(i<<8)+a:(a<<8)+i,i=null,null!==o){var c=o;return o=null,r(s,56320,57343)?65536+1024*(c-55296)+(s-56320):(e.prepend(I(s,t)),d(n))}return r(s,55296,56319)?(o=s,null):r(s,56320,57343)?d(n):s}}function P(t,e){e.fatal;this.handler=function(e,n){if(n===l)return u;if(r(n,0,65535))return I(n,t);var i=I(55296+(n-65536>>10),t),o=I(56320+(n-65536&1023),t);return i.concat(o)}}Object.defineProperty&&(Object.defineProperty(C.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(C.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(C.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),C.prototype.decode=function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=o(e),this._do_not_flush||(this._decoder=b[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(e.stream);for(var r,i=new c(n),a=[];;){var s=i.read();if(s===l)break;if((r=this._decoder.handler(i,s))===u)break;null!==r&&(Array.isArray(r)?a.push.apply(a,r):a.push(r))}if(!this._do_not_flush){do{if((r=this._decoder.handler(i,i.read()))===u)break;null!==r&&(Array.isArray(r)?a.push.apply(a,r):a.push(r))}while(!i.endOfStream());this._decoder=null}return function(t){return!function(t,e){return-1!==t.indexOf(e)}(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(t.length>0&&65279===t[0]?(this._BOMseen=!0,t.shift()):t.length>0&&(this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(t)}.call(this,a)},Object.defineProperty&&Object.defineProperty(E.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),E.prototype.encode=function(t,e){t=void 0===t?"":String(t),e=o(e),this._do_not_flush||(this._encoder=y[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(e.stream);for(var n,r=new c(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var a=e.charCodeAt(r+1);if(56320<=a&&a<=57343){var s=1023&o,l=1023&a;i.push(65536+(s<<10)+l),r+=1}else i.push(65533)}r+=1}return i}(t)),i=[];;){var a=r.read();if(a===l)break;if((n=this._encoder.handler(r,a))===u)break;Array.isArray(n)?i.push.apply(i,n):i.push(n)}if(!this._do_not_flush){for(;(n=this._encoder.handler(r,r.read()))!==u;)Array.isArray(n)?i.push.apply(i,n):i.push(n);this._encoder=null}return new Uint8Array(i)},y["UTF-8"]=function(t){return new function(t){t.fatal,this.handler=function(t,e){if(e===l)return u;if(s(e))return e;var n,i;r(e,128,2047)?(n=1,i=192):r(e,2048,65535)?(n=2,i=224):r(e,65536,1114111)&&(n=3,i=240);for(var o=[(e>>6*n)+i];n>0;){var a=e>>6*(n-1);o.push(128|63&a),n-=1}return o}}(t)},b["UTF-8"]=function(t){return new function(t){var e=t.fatal,n=0,i=0,o=0,a=128,s=191;this.handler=function(t,c){if(c===l&&0!==o)return o=0,d(e);if(c===l)return u;if(0===o){if(r(c,0,127))return c;if(r(c,194,223))o=1,n=31&c;else if(r(c,224,239))224===c&&(a=160),237===c&&(s=159),o=2,n=15&c;else{if(!r(c,240,244))return d(e);240===c&&(a=144),244===c&&(s=143),o=3,n=7&c}return null}if(!r(c,a,s))return n=o=i=0,a=128,s=191,t.prepend(c),d(e);if(a=128,s=191,n=n<<6|63&c,(i+=1)!==o)return null;var f=n;return n=o=i=0,f}}(t)},"encoding-indexes"in e&&h.forEach(function(t){"Legacy single-byte encodings"===t.heading&&t.encodings.forEach(function(t){var e=t.name,n=x(e.toLowerCase());b[e]=function(t){return new function(t,e){var n=e.fatal;this.handler=function(e,r){if(r===l)return u;if(a(r))return r;var i=t[r-128];return null===i?d(n):i}}(n,t)},y[e]=function(t){return new function(t,e){e.fatal,this.handler=function(e,n){if(n===l)return u;if(s(n))return n;var r=_(n,t);return null===r&&f(n),r+128}}(n,t)}})}),b.GBK=function(t){return new T(t)},y.GBK=function(t){return new M(t,!0)},y.gb18030=function(t){return new M(t)},b.gb18030=function(t){return new T(t)},y.Big5=function(t){return new k(t)},b.Big5=function(t){return new function(t){var e=t.fatal,n=0;this.handler=function(t,i){if(i===l&&0!==n)return n=0,d(e);if(i===l&&0===n)return u;if(0!==n){var o=n,s=null;n=0;var c=i<127?64:98;switch((r(i,64,126)||r(i,161,254))&&(s=157*(o-129)+(i-c)),s){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var f=null===s?null:w(s,x("big5"));return null===f&&a(i)&&t.prepend(i),null===f?d(e):f}return a(i)?i:r(i,129,254)?(n=i,null):d(e)}}(t)},y["EUC-JP"]=function(t){return new function(t){t.fatal,this.handler=function(t,e){if(e===l)return u;if(s(e))return e;if(165===e)return 92;if(8254===e)return 126;if(r(e,65377,65439))return[142,e-65377+161];8722===e&&(e=65293);var n=_(e,x("jis0208"));return null===n?f(e):[i(n/94)+161,n%94+161]}}(t)},b["EUC-JP"]=function(t){return new function(t){var e=t.fatal,n=!1,i=0;this.handler=function(t,o){if(o===l&&0!==i)return i=0,d(e);if(o===l&&0===i)return u;if(142===i&&r(o,161,223))return i=0,65216+o;if(143===i&&r(o,161,254))return n=!0,i=o,null;if(0!==i){var s=i;i=0;var c=null;return r(s,161,254)&&r(o,161,254)&&(c=w(94*(s-161)+(o-161),x(n?"jis0212":"jis0208"))),n=!1,r(o,161,254)||t.prepend(o),null===c?d(e):c}return a(o)?o:142===o||143===o||r(o,161,254)?(i=o,null):d(e)}}(t)},y["ISO-2022-JP"]=function(t){return new function(t){t.fatal;var e=0,n=1,r=2,o=e;this.handler=function(t,a){if(a===l&&o!==e)return t.prepend(a),o=e,[27,40,66];if(a===l&&o===e)return u;if(!(o!==e&&o!==n||14!==a&&15!==a&&27!==a))return f(65533);if(o===e&&s(a))return a;if(o===n&&(s(a)&&92!==a&&126!==a||165==a||8254==a)){if(s(a))return a;if(165===a)return 92;if(8254===a)return 126}if(s(a)&&o!==e)return t.prepend(a),o=e,[27,40,66];if((165===a||8254===a)&&o!==n)return t.prepend(a),o=n,[27,40,74];8722===a&&(a=65293);var c=_(a,x("jis0208"));return null===c?f(a):o!==r?(t.prepend(a),o=r,[27,36,66]):[i(c/94)+33,c%94+33]}}(t)},b["ISO-2022-JP"]=function(t){return new function(t){var e=t.fatal,n=0,i=1,o=2,a=3,s=4,c=5,f=6,p=n,h=n,g=0,m=!1;this.handler=function(t,v){switch(p){default:case n:return 27===v?(p=c,null):r(v,0,127)&&14!==v&&15!==v&&27!==v?(m=!1,v):v===l?u:(m=!1,d(e));case i:return 27===v?(p=c,null):92===v?(m=!1,165):126===v?(m=!1,8254):r(v,0,127)&&14!==v&&15!==v&&27!==v&&92!==v&&126!==v?(m=!1,v):v===l?u:(m=!1,d(e));case o:return 27===v?(p=c,null):r(v,33,95)?(m=!1,65344+v):v===l?u:(m=!1,d(e));case a:return 27===v?(p=c,null):r(v,33,126)?(m=!1,g=v,p=s,null):v===l?u:(m=!1,d(e));case s:if(27===v)return p=c,d(e);if(r(v,33,126)){p=a;var y=w(94*(g-33)+v-33,x("jis0208"));return null===y?d(e):y}return v===l?(p=a,t.prepend(v),d(e)):(p=a,d(e));case c:return 36===v||40===v?(g=v,p=f,null):(t.prepend(v),m=!1,p=h,d(e));case f:var b=g;g=0;var _=null;if(40===b&&66===v&&(_=n),40===b&&74===v&&(_=i),40===b&&73===v&&(_=o),36!==b||64!==v&&66!==v||(_=a),null!==_){p=p=_;var S=m;return m=!0,S?d(e):null}return t.prepend([b,v]),m=!1,p=h,d(e)}}}(t)},y.Shift_JIS=function(t){return new A(t)},b.Shift_JIS=function(t){return new function(t){var e=t.fatal,n=0;this.handler=function(t,i){if(i===l&&0!==n)return n=0,d(e);if(i===l&&0===n)return u;if(0!==n){var o=n,s=null;n=0;var c=i<127?64:65,f=o<160?129:193;if((r(i,64,126)||r(i,128,252))&&(s=188*(o-f)+i-c),r(s,8836,10715))return 48508+s;var p=null===s?null:w(s,x("jis0208"));return null===p&&a(i)&&t.prepend(i),null===p?d(e):p}return a(i)||128===i?i:r(i,161,223)?65216+i:r(i,129,159)||r(i,224,252)?(n=i,null):d(e)}}(t)},y["EUC-KR"]=function(t){return new function(t){t.fatal,this.handler=function(t,e){if(e===l)return u;if(s(e))return e;var n=_(e,x("euc-kr"));return null===n?f(e):[i(n/190)+129,n%190+65]}}(t)},b["EUC-KR"]=function(t){return new function(t){var e=t.fatal,n=0;this.handler=function(t,i){if(i===l&&0!==n)return n=0,d(e);if(i===l&&0===n)return u;if(0!==n){var o=n,s=null;n=0,r(i,65,254)&&(s=190*(o-129)+(i-65));var c=null===s?null:w(s,x("euc-kr"));return null===s&&a(i)&&t.prepend(i),null===c?d(e):c}return a(i)?i:r(i,129,254)?(n=i,null):d(e)}}(t)},y["UTF-16BE"]=function(t){return new P(!0,t)},b["UTF-16BE"]=function(t){return new O(!0,t)},y["UTF-16LE"]=function(t){return new P(!1,t)},b["UTF-16LE"]=function(t){return new O(!1,t)},y["x-user-defined"]=function(t){return new function(t){t.fatal,this.handler=function(t,e){return e===l?u:s(e)?e:r(e,63360,63487)?e-63360+128:f(e)}}(t)},b["x-user-defined"]=function(t){return new function(t){t.fatal,this.handler=function(t,e){return e===l?u:a(e)?e:63360+e-128}}(t)},e.TextEncoder||(e.TextEncoder=E),e.TextDecoder||(e.TextDecoder=C),void 0!==t&&t.exports&&(t.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})}(this||{})},function(t,e){},function(t,e,n){"use strict";var r=n(1945).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=u,this.end=d,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function u(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=a(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){var r=n(321),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e){!function(){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n(){return 1}"object"==typeof t&&t.exports?t.exports=o:this.LRUCache=o;var r=!1;function i(t){r||"string"==typeof t||"number"==typeof t||(r=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof t).stack))}function o(t){if(!(this instanceof o))return new o(t);"number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||n,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=n),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,this.reset()}function a(t,e,n){i(e);var r=t._cache[e];return r&&(s(t,r)?(u(t,r),t._allowStale||(r=void 0)):n&&function(t,e){c(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}(t,r),r&&(r=r.value)),r}function s(t,e){if(!e||!e.maxAge&&!t._maxAge)return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t._maxAge&&n>t._maxAge}function l(t){for(;t._lru<t._mru&&t._length>t._max;)u(t,t._lruList[t._lru])}function c(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function u(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],c(t,e))}Object.defineProperty(o.prototype,"max",{set:function(t){(!t||"number"!=typeof t||t<=0)&&(t=1/0),this._max=t,this._length>this._max&&l(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(o.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t)for(var e in this._lengthCalculator=n,this._length=this._itemCount,this._cache)this._cache[e].length=1;else for(var e in this._lengthCalculator=t,this._length=0,this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length;this._length>this._max&&l(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(o.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),o.prototype.forEach=function(t,e){e=e||this;for(var n=0,r=this._itemCount,i=this._mru-1;i>=0&&n<r;i--)if(this._lruList[i]){n++;var o=this._lruList[i];s(this,o)&&(u(this,o),this._allowStale||(o=void 0)),o&&t.call(e,o.value,o.key,this)}},o.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];t[e++]=r.key}return t},o.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];t[e++]=r.value}return t},o.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},o.prototype.dump=function(){for(var t=[],e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];s(this,r)||(++e,t.push({k:r.key,v:r.value,e:r.now+(r.maxAge||0)}))}return t},o.prototype.dumpLru=function(){return this._lruList},o.prototype.set=function(t,n,r){r=r||this._maxAge,i(t);var o=r?Date.now():0,a=this._lengthCalculator(n);if(e(this._cache,t))return a>this._max?(u(this,this._cache[t]),!1):(this._dispose&&this._dispose(t,this._cache[t].value),this._cache[t].now=o,this._cache[t].maxAge=r,this._cache[t].value=n,this._length+=a-this._cache[t].length,this._cache[t].length=a,this.get(t),this._length>this._max&&l(this),!0);var s=new function(t,e,n,r,i,o){this.key=t,this.value=e,this.lu=n,this.length=r,this.now=i,o&&(this.maxAge=o)}(t,n,this._mru++,a,o,r);return s.length>this._max?(this._dispose&&this._dispose(t,n),!1):(this._length+=s.length,this._lruList[s.lu]=this._cache[t]=s,this._itemCount++,this._length>this._max&&l(this),!0)},o.prototype.has=function(t){return i(t),!!e(this._cache,t)&&!s(this,this._cache[t])},o.prototype.get=function(t){return i(t),a(this,t,!0)},o.prototype.peek=function(t){return i(t),a(this,t,!1)},o.prototype.pop=function(){var t=this._lruList[this._lru];return u(this,t),t||null},o.prototype.del=function(t){i(t),u(this,this._cache[t])},o.prototype.load=function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var r=t[n];i(r.k);var o=r.e||0;if(0===o)this.set(r.k,r.v);else{var a=o-e;a>0&&this.set(r.k,r.v,a)}}}}()},,,function(t,e,n){var r,i=n(1950);(t.exports={}).model=function(t){return t=t||new Date,r||(r=new i),r.getTimedModel(t)}},function(t,e,n){n(1951);var r=n(843),i=(n(844),n(1955)),o=n(1956);function a(t){t=t||n(1957),this.epoch=t.epoch,this.start_date=new Date(t.start_date),this.end_date=new Date(t.end_date),this.name=t.name||"",this.main_field_coeff_g=t.main_field_coeff_g||[0],this.main_field_coeff_h=t.main_field_coeff_h||[0],this.secular_var_coeff_g=t.secular_var_coeff_g||[0],this.secular_var_coeff_h=t.secular_var_coeff_h||[0],this.n_max=t.n_max||0,this.n_max_sec_var=t.n_max_sec_var||0,this.num_terms=this.n_max*(this.n_max+1)/2+this.n_max}t.exports=a,a.prototype.getTimedModel=function(t){var e=t.getFullYear(),n=new Date(e,0,1),r=e+(t.valueOf()-n.valueOf())/31536e6-this.epoch;if(t<this.start_date||t>this.end_date)throw new RangeError("Model is only valid from "+this.start_date.toDateString()+" to "+this.end_date.toDateString());for(var i=new a({epoch:this.epoch,n_max:this.n_max,n_max_sec_var:this.n_max_sec_var,name:this.name}),o=i.n_max_sec_var,s=o*(o+1)/2+o,l=1;l<=this.n_max;l++)for(var c=0;c<=l;c++){var u=l*(l+1)/2+c,d=this.main_field_coeff_h[u],f=this.main_field_coeff_g[u],p=this.secular_var_coeff_h[u],h=this.secular_var_coeff_g[u];u<=s?(i.main_field_coeff_h[u]=d+r*p,i.main_field_coeff_g[u]=f+r*h,i.secular_var_coeff_h[u]=p,i.secular_var_coeff_g[u]=h):(i.main_field_coeff_h[u]=d,i.main_field_coeff_g[u]=f)}return i},a.prototype.getSummation=function(t,e,n){var r,i,a,s,l=0,c=0,u=0,d=e.relative_radius_power,f=e.cos_mlambda,p=e.sin_mlambda,h=this.main_field_coeff_g,g=this.main_field_coeff_h;for(r=1;r<=this.n_max;r++)for(i=0;i<=r;i++)a=r*(r+1)/2+i,u-=d[r]*(h[a]*f[i]+g[a]*p[i])*(r+1)*t.pcup[a],c+=d[r]*(h[a]*p[i]-g[a]*f[i])*i*t.pcup[a],l-=d[r]*(h[a]*f[i]+g[a]*p[i])*t.dpcup[a];var m=Math.cos(Math.PI/180*n.phig);if(Math.abs(m)>1e-10)c/=m;else{c=0;var v,y,b=1,w=[1],_=Math.sin(Math.PI/180*n.phig);for(r=1;r<=this.n_max;r++)a=r*(r+1)/2+1,y=(v=b*(2*r-1)/r)*Math.sqrt(2*r/(r+1)),b=v,1==r?w[r]=w[r-1]:(s=((r-1)*(r-1)-1)/((2*r-1)*(2*r-3)),w[r]=_*w[r-1]-s*w[r-2]),c+=d[r]*(h[a]*p[1]-g[a]*f[1])*w[r]*y}return new o({bx:l,by:c,bz:u})},a.prototype.point=function(t){var e=new r({lat:t[0],lon:t[1]}),n=e.toSpherical(),o=n.getLegendreFunction(this.n_max),a=n.getHarmonicVariables(e.ellipsoid,this.n_max),s=this.getSummation(o,a,n).rotate(n,e);return i.fromGeoMagneticVector(s)}},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return r.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=n(o(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),i="/"===a(t,-1);return(t=n(o(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&i&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var c=[];for(l=s;l<i.length;l++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return i(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(402))},function(t,e,n){var r=n(1953),i=n(1954);function o(t){this.lambda=t.lambda,this.phig=t.phig,this.r=t.r}t.exports=o,o.prototype.toCartesian=function(){var t=this.phig*Math.PI/180,e=this.lambda*Math.PI/180;return new r({x:this.r*cos(t)*cos(e),y:this.r*cos(t)*sin(e),z:this.r*sin(t)})},o.prototype.toGeodetic=function(t){return this.toCartesian().toGeodetic(t)},o.prototype.getHarmonicVariables=function(t,e){var n,r,i=Math.cos(Math.PI/180*this.lambda),o=Math.sin(Math.PI/180*this.lambda),a=[1,i],s=[0,o],l=[t.re/this.r*(t.re/this.r)];for(r=1;r<=e;r++)l[r]=l[r-1]*(t.re/this.r);for(n=2;n<=e;n++)a[n]=a[n-1]*i-s[n-1]*o,s[n]=a[n-1]*o+s[n-1]*i;return{relative_radius_power:l,cos_mlambda:a,sin_mlambda:s}},o.prototype.getLegendreFunction=function(t){return new i(this,t)}},function(t,e,n){var r=n(843);function i(t){this.x=t.x,this.y=t.y,this.z=t.z}t.exports=i,i.prototype.toGeodetic=function(t){var e,n=this.z<0?-t.b:t.b,i=this.x,o=this.y,a=this.z,s=Math.sqr(i*i+o*o),l=(n*a-(t.a*t.a-n*n))/(t.a*s),c=(n*a+(t.a*t.a-n*n))/(t.a*s),u=4/3*(l*c+1),d=2*(l*l+c*c),f=u*u*u+d*d;(e=f>0?Math.pow(Math.sqrt(f)-d,1/3)-Math.pow(Math.sqrt(f)+d,1/3):2*Math.sqrt(-u)*Math.cos(Math.acos(d/(u*Math.sqrt(-u)))/3))*e<Math.abs(u)&&(e=-(e*e*e+2*d)/3*u);var p=(Math.sqrt(l*l+e)+l)/2,h=Math.sqrt(p*p+(c-e*p)/(2*p-l))-p,g=Math.atan(t.a*(1-h*h)/(2*n*h)),m=Math.atan2(o,i);m<0&&(m+=2*Math.PI);var v=(s-t.a*h)*Math.cos(g)+(a-n)*Math.sin(g),y=m*Math.PI/180;return y>180&&(y-=360),new r({lambda:y,phi:g*Math.PI/180,height_above_ellipsoid:v,ellipsoid:t})}},function(t,e){t.exports=function(t,e){var n,r=Math.sin(Math.PI/180*t.phig);n=e<=16||1-Math.abs(r)<1e-10?function(t,e){var n,r,i,o,a,s,l,c=[1],u=[1],d=[0];for(r=Math.sqrt((1-t)*(1+t)),(e+1)*(e+2)/2,i=1;i<=e;i++)for(o=0;o<=i;o++)a=i*(i+1)/2+o,i==o?(s=(i-1)*i/2+o-1,u[a]=r*u[s],d[a]=r*d[s]+t*u[s]):1==i&&0==o?(s=(i-1)*i/2+o,u[a]=t*u[s],d[a]=t*d[s]-r*u[s]):i>1&&i!=o&&(s=(i-2)*(i-1)/2+o,l=(i-1)*i/2+o,o>i-2?(u[a]=t*u[l],d[a]=t*d[l]-r*u[l]):(n=((i-1)*(i-1)-o*o)/((2*i-1)*(2*i-3)),u[a]=t*u[l]-n*u[s],d[a]=t*d[l]-r*u[l]-n*d[s]));for(i=1;i<=e;i++)for(s=(i-1)*i/2,c[a=i*(i+1)/2]=c[s]*(2*i-1)/i,o=1;o<=i;o++)s=i*(i+1)/2+o-1,c[a=i*(i+1)/2+o]=c[s]*Math.sqrt((i-o+1)*(1==o?2:1)/(i+o));for(i=1;i<=e;i++)for(o=0;o<=i;o++)u[a=i*(i+1)/2+o]*=c[a],d[a]*=-c[a];return{pcup:u,dpcup:d}}(r,e):function(t,e){if(1==Math.abs(t))throw new Error("Error in PcupHigh: derivative cannot be calculated at poles");var n,r,i=[],o=[],a=[];for(n=0;n<=2*e+1;++n)a[n]=Math.sqrt(n);for(r=2,n=0;n<=e;n++){for(i[++r]=(2*n-1)/n,o[r]=(n-1)/n,m=1;m<=n-2;m++)i[++r]=(2*n-1)/a[n+m]/a[n-m],o[r]=a[n-m-1]*a[n+m-1]/a[n+m]/a[n-m];r+=2}var s,l=Math.sqrt((1-t)*(1+t)),c=t,u=1,d=[1,c],f=[0,l];if(0==e)throw new Error("Error in PcupHigh: n_max must be greater than 0");for(r=1,n=2;n<=e;n++)s=i[r+=n]*t*c-o[r]*u,d[r]=s,f[r]=n*(c-t*s)/l,u=c,c=s;for(var p=1e-280*a[2],h=1e280,g=0,m=1;m<=e-1;++m)for(h*=l,g=g+m+1,p=p*a[2*m+1]/a[2*m],d[g]=p*h/a[2*m+1],f[g]=-m*t*d[g]/l,u=p/a[2*m+1],r=g+m+1,c=t*a[2*m+1]*u,d[r]=c*h,f[r]=(u*h*a[2*m+1]-t*(m+1)*d[r])/l,n=m+2;n<=e;++n)s=t*i[r+=n]*c-o[r]*u,d[r]=s*h,f[r]=(a[n+m]*a[n-m]*c*h-n*t*d[r])/l,u=c,c=s;return h*=l,g=g+m+1,p/=a[2*e],d[g]=p*h,f[g]=-e*t*d[g]/l,{pcup:d,dpcup:f}}(r,e);this.pcup=n.pcup,this.dpcup=n.dpcup}},function(t,e){function n(t){this.x=t.x,this.y=t.y,this.z=t.z,this.h=t.h,this.f=t.f,this.incl=t.incl,this.decl=t.decl,this.gv=t.gv,this.xdot=t.xdot,this.ydot=t.ydot,this.zdot=t.zdot,this.hdot=t.hdot,this.fdot=t.fdot,this.incldot=t.incldot,this.decldot=t.decldot,this.gvdot=t.gvdot}t.exports=n,n.prototype.clone=function(){return new n(this)},n.prototype.scale=function(t){return new n({x:this.x*t,y:this.y*t,z:this.z*t,h:this.h*t,f:this.f*t,incl:this.incl*t,decl:this.decl*t,gv:this.gv*t,xdot:this.xdot*t,ydot:this.ydot*t,zdot:this.zdot*t,hdot:this.hdot*t,fdot:this.fdot*t,incldot:this.incldot*t,decldot:this.decldot*t,gvdot:this.gvdot*t})},n.prototype.subtract=function(t){return new n({x:this.x-t.x,y:this.y-t.y,z:this.z-t.z,h:this.h-t.h,f:this.f-t.f,incl:this.incl-t.incl,decl:this.decl-t.decl,gv:this.gv-t.gv,xdot:this.xdot-t.xdot,ydot:this.ydot-t.ydot,zdot:this.zdot-t.zdot,hdot:this.hdot-t.hdot,fdot:this.fdot-t.fdot,incldot:this.incldot-t.incldot,decldot:this.decldot-t.decldot,gvdot:this.gvdot-t.gvdot})},n.fromGeoMagneticVector=function(t){var e=t.bx,r=t.by,i=t.bz,o=Math.sqrt(e*e+r*r);return new n({x:e,y:r,z:i,h:o,f:Math.sqrt(o*o+i*i),decl:180/Math.PI*Math.atan2(r,e),incl:180/Math.PI*Math.atan2(i,o)})},n.fromSecularVariationVector=function(t){var e=t.bx,r=t.by,i=t.bz;return new n({xdot:e,ydot:r,zdot:i,hdot:(this.x*e+this.y*r)/this.h,fdot:(this.x*e+this.y*r+this.z*i)/this.f,decldot:180/Math.PI*(this.x*this.ydot-this.y*this.xdot)/(this.h*this.h),incldot:180/Math.PI*(this.h*this.zdot-this.z*this.hdot)/(this.f*this.f),gvdot:this.decldot})}},function(t,e){function n(t){this.bx=t.bx,this.by=t.by,this.bz=t.bz}t.exports=n,n.prototype.rotate=function(t,e){var r=Math.PI/180*(t.phig-e.phi);return new n({bz:this.bx*Math.sin(r)+this.bz*Math.cos(r),bx:this.bx*Math.cos(r)-this.bz*Math.sin(r),by:this.by})}},function(t){t.exports={main_field_coeff_g:[0,-29438.5,-1501.1,-2445.3,3012.5,1676.6,1351.1,-2352.3,1225.6,581.9,907.2,813.7,120.3,-335,70.3,-232.6,360.1,192.4,-141,-157.4,4.3,69.5,67.4,72.8,-129.8,-29,13.2,-70.9,81.6,-76.1,-6.8,51.9,15,9.3,-2.8,6.7,24,8.6,-16.9,-3.2,-20.6,13.3,11.7,-16,-2,5.4,8.8,3.1,-3.1,.6,-13.3,-.1,8.7,-9.1,-10.5,-1.9,-6.5,.2,.6,-.6,1.7,-.7,2.1,2.3,-1.8,-3.6,3.1,-1.5,-2.3,2.1,-.9,.6,-.7,.2,1.7,-.2,.4,3.5,-2,-.3,.4,1.3,-.9,.9,.1,.5,-.4,-.4,.2,-.9,0],main_field_coeff_h:[0,0,4796.2,0,-2845.6,-642,0,-115.3,245,-538.3,0,283.4,-188.6,180.9,-329.5,0,47.4,196.9,-119.4,16.1,100.1,0,-20.7,33.2,58.8,-66.5,7.3,62.5,0,-54.1,-19.4,5.6,24.4,3.3,-27.5,-2.3,0,10.2,-18.1,13.2,-14.6,16.2,5.7,-9.1,2.2,0,-21.6,10.8,11.7,-6.8,-6.9,7.8,1,-3.9,8.5,0,3.3,-.3,4.6,4.4,-7.9,-.6,-4.1,-2.8,-1.1,-8.7,0,-.1,2.1,-.7,-1.1,.7,-.2,-2.1,-1.5,-2.5,-2,-2.3,0,-1,.5,1.8,-2.2,.3,.7,-.1,.3,.2,-.9,-.2,.7],secular_var_coeff_g:[0,10.7,17.9,-8.6,-3.3,2.4,3.1,-6.2,-.4,-10.4,-.4,.8,-9.2,4,-4.2,-.2,.1,-1.4,0,1.3,3.8,-.5,-.2,-.6,2.4,-1.1,.3,1.5,.2,-.2,-.4,1.3,.2,-.4,-.9,.3,0,.1,-.5,.5,-.2,.4,.2,-.4,.3,0,-.1,-.1,.4,-.5,-.2,.1,0,-.2,-.1,0,0,-.1,.3,-.1,-.1,-.1,0,-.2,-.1,-.2,0,0,-.1,.1,0,0,0,0,0,0,-.1,-.1,.1,0,0,.1,-.1,0,.1,0,0,0,0,0,0],secular_var_coeff_h:[0,0,-26.8,0,-27.1,-13.3,0,8.4,-.4,2.3,0,-.6,5.3,3,-5.3,0,.4,1.6,-1.1,3.3,.1,0,0,-2.2,-.7,.1,1,1.3,0,.7,.5,-.2,-.1,-.7,.1,.1,0,-.3,.3,.3,.6,-.1,-.2,.3,0,0,-.2,-.1,-.2,.1,.1,0,-.2,.4,.3,0,.1,-.1,0,0,-.2,.1,-.1,-.2,.1,-.1,0,0,.1,0,.1,0,0,.1,0,-.1,0,-.1,0,0,0,-.1,0,0,0,0,0,0,0,0,0],n_max:12,n_max_sec_var:12,epoch:2015,name:"WMM-2015",start_date:"2014-12-15T07:00:00.000Z",end_date:"2019-12-15T07:00:00.000Z"}},,,,,,function(t,e,n){var r=n(248),i=n(305),o=n(17),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},,,,,,function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1969__},,,function(t,e,n){var r=n(163),i=n(51),o=n(563),a=i(function(t,e){try{return r(t,void 0,e)}catch(t){return o(t)?t:new Error(t)}});t.exports=a},function(t,e,n){var r=n(213),i=Object.prototype,o=i.hasOwnProperty;t.exports=function(t,e,n,a){return void 0===t||r(t,i[n])&&!o.call(a,n)?e:t}},function(t,e){var n={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+n[t]}},function(t,e,n){var r=n(1976),i={escape:n(1978),evaluate:n(1979),interpolate:n(857),variable:"",imports:{_:{escape:r}}};t.exports=i},function(t,e,n){var r=n(1977),i=n(102),o=/[&<>"']/g,a=RegExp(o.source);t.exports=function(t){return(t=i(t))&&a.test(t)?t.replace(o,r):t}},function(t,e,n){var r=n(697)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=r},function(t,e){t.exports=/<%-([\s\S]+?)%>/g},function(t,e){t.exports=/<%([\s\S]+?)%>/g},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r,i;void 0===(i="function"==typeof(r=function(){if("undefined"==typeof window)return null;var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)};function e(t,e){var n=Object.prototype.toString.call(t),r="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,i=0,o=t.length;if(r)for(;i<o;i++)e(t[i]);else e(t)}var n=function(r,i){function o(e,n){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(n)}else e.resizedAttached=new function(){var t,e,n=[];this.add=function(t){n.push(t)},this.call=function(){for(t=0,e=n.length;t<e;t++)n[t].call()},this.remove=function(r){var i=[];for(t=0,e=n.length;t<e;t++)n[t]!==r&&i.push(n[t]);n=i},this.length=function(){return n.length}},e.resizedAttached.add(n);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var r="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",i="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=r,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+r+'"><div style="'+i+'"></div></div><div class="resize-sensor-shrink" style="'+r+'"><div style="'+i+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),"static"==function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(e,"position")&&(e.style.position="relative");var o,a,s,l,c=e.resizeSensor.childNodes[0],u=c.childNodes[0],d=e.resizeSensor.childNodes[1],f=e.offsetWidth,p=e.offsetHeight,h=function(){u.style.width="100000px",u.style.height="100000px",c.scrollLeft=1e5,c.scrollTop=1e5,d.scrollLeft=1e5,d.scrollTop=1e5};h();var g=function(){a=0,o&&(f=s,p=l,e.resizedAttached&&e.resizedAttached.call())},m=function(){s=e.offsetWidth,l=e.offsetHeight,(o=s!=f||l!=p)&&!a&&(a=t(g)),h()},v=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)};v(c,"scroll",m),v(d,"scroll",m)}e(r,function(t){o(t,i)}),this.detach=function(t){n.detach(r,t)}};return n.detach=function(t,n){e(t,function(t){t.resizedAttached&&"function"==typeof n&&(t.resizedAttached.remove(n),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)})},n})?r.call(e,n,e,t):r)||(t.exports=i)},,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(882),o=n(2056),a=n(405),s=n(899),l=n(882);e.LiveManager=l.LiveManager,r.module("stealth.live",[i.default,o.default,a.default.name,s.default.name])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(23),o=n(53),a=n(64),s=n(18),l=n(46),c=n(14),u=n(4),d=n(30),f=n(85),p=n(16),h=n(15),g=n(192),m=n(72),v=n(24),y=n(892),b=n(893),w=["timelapse","live"],_={cql:{value:""}},x=[0,2,5,10,30,60,120,300],S=function(){function t(t,e,n,r,i){var o=this;this.$filter=t,this.cqlHelper=e,this.ol3Map=n,this.pollingManager=r,this.stateManager=p.StateManager.getInstance(),this.layerManager=g.LayerManager.getInstance(),this.addMapLayer=function(t,e,n,r){r?o.ol3Map.addLayerOverlay(t):o.ol3Map.addLayer(t),o.updateViewDisplayStatus(e,n,{isOnMap:!0,isVisible:t.getMapLayer().getVisible()}),o.refreshMapLayer(e,n),t.activate()};var s=h.config.get("timelapse.refreshInterval",10);this.pollingOptions=h.config.get("timelapse.refreshIntervals",x),this.LiveWmsLayerWithStyle=y.KeywordStyle(i),this.lastState=this.getState(),v.DataSourceManager.getObservable().subscribe({next:function(){o.checkDataSources()}}),this.checkDataSources(),this.layerManager.addLayerProvider("LiveLayer",function(t){var e=o.getViews().find(function(e){return e.mapLayerId===t.id});return e?o.buildMapLayer(e,e.cqlFilter):void 0}),this.stateManager.getObservable(b.LIVE_PATH).subscribe({next:function(t){o.onStateChange(t)}}),this.stateManager.dispatch({type:b.LiveActions.TypeKeys.SET_INTERVAL,interval:a(this.pollingOptions,s)?s:this.pollingOptions[0]})}return t.prototype.buildView=function(t,e,n,r,i){var o=d({},_,i),a=new b.ViewRecord({id:e,dataSourceId:n.id,name:r||n.title,options:o,workspaceId:t});return this.stateManager.dispatch({type:b.LiveActions.TypeKeys.ADD_VIEW,view:a.with({cqlFilter:this.buildCqlFilter(a)})}),a},t.prototype.cloneView=function(t,e){var n=this.getView(t,e);if(n){var r=v.DataSourceManager.getDataSourcesById(n.dataSourceId).first();return this.buildView(t,m.uuid.generate(),r,n.name,n.options)}},t.prototype.getGoogleEarthLink=function(t,e){var n=this.getView(t,e);if(n){var r=v.DataSourceManager.getDataSourcesById(n.dataSourceId).first(),i=["service=WFS","version=1.0.0","request=GetFeature","typeName="+encodeURIComponent(r.name),"srsName=EPSG:4326","outputFormat=nlkml"];return s(n.cqlFilter)||i.push("cql_filter="+encodeURIComponent(n.cqlFilter)),r.wfsUrl+"?"+i.join("&")}},t.prototype.getPollingOptions=function(){return this.pollingOptions},t.prototype.getView=function(t,e){return this.getState().workspaces.get(t,r.List()).find(function(t){return t.id===e})},t.prototype.getViews=function(){return this.getState().workspaces.toList().flatten(1)},t.prototype.refreshAllViews=function(){var t=this;this.getViews().forEach(function(e){t.refreshMapLayer(e.workspaceId,e.id)})},t.prototype.removeView=function(t,e){var n=this.getView(t,e);if(n&&n.displayStatus.isRemovable){if(!s(n.mapLayerId)){var r=this.layerManager.getLayer(n.mapLayerId);n.displayStatus.isOnMap&&this.toggleView(n.workspaceId,n.id),this.layerManager.removeLayer(n.mapLayerId),r.onDestroy()}this.stateManager.dispatch({type:b.LiveActions.TypeKeys.REMOVE_VIEW,viewId:n.id,workspaceId:n.workspaceId})}},t.prototype.setPollingInterval=function(t){this.pollingManager.setPollingInterval(1e3*t),this.stateManager.dispatch({type:b.LiveActions.TypeKeys.SET_INTERVAL,interval:t})},t.prototype.toggleLive=function(){this.stateManager.dispatch({type:b.LiveActions.TypeKeys.SET_IS_LIVE_ON,isLiveOn:!this.stateManager.getState([b.LIVE_PATH]).isLiveOn})},t.prototype.toggleView=function(t,e){var n=this.getView(t,e);if(n)if(n.displayStatus.isOnMap)this.ol3Map.removeLayerById(n.mapLayerId),this.layerManager.getLayer(n.mapLayerId).inactivate(),this.updateViewDisplayStatus(n.workspaceId,n.id,{isOnMap:!1,isVisible:!1});else{var r=void 0;s(n.mapLayerId)?(r=this.buildMapLayer(n,n.cqlFilter),this.updateView(n.workspaceId,n.id,{mapLayerId:r.id})):r=this.layerManager.getLayer(n.mapLayerId),this.addMapLayer(r,n.workspaceId,n.id,!1)}},t.prototype.updateView=function(t,e,n){var r=this.getView(t,e);r&&(this.stateManager.dispatch({type:b.LiveActions.TypeKeys.UPDATE_VIEW,viewId:e,workspaceId:t,view:n}),o(n,"name")&&!s(r.mapLayerId)&&this.layerManager.getLayer(r.mapLayerId).setName(n.name))},t.prototype.updateViewCql=function(t,e){var n=this.getView(t,e);if(n){var r=this.buildCqlFilter(n);this.updateView(t,e,{cqlFilter:r})}},t.prototype.updateViewDisplayStatus=function(t,e,n){this.stateManager.dispatch({type:b.LiveActions.TypeKeys.UPDATE_DISPLAY_STATUS,workspaceId:t,viewId:e,displayStatus:n})},t.prototype.buildMapLayer=function(t,e,n,r){var i=this,o=v.DataSourceManager.getDataSourcesById(t.dataSourceId).first();if(o){var a={LAYERS:o.name,CQL_FILTER:s(e)?"INCLUDE":e};!1===s(n)&&(a.STYLES=n);var l=void 0;l=s(r)?s(t.mapLayerId)?m.uuid.generate():t.mapLayerId:r;var c=new this.LiveWmsLayerWithStyle(l,t.name,a,v.DataSourceManager.buildLegacyLayer(o,t.workspaceId),!0,void 0,this),u=c.styleDirectiveScope.$on(c.id+":isLoading",function(e){i.updateViewDisplayStatus(t.workspaceId,t.id,{isLoading:!0}),e.stopPropagation()}),d=c.styleDirectiveScope.$on(c.id+":finishedLoading",function(e){i.updateViewDisplayStatus(t.workspaceId,t.id,{isLoading:!1}),e.stopPropagation()}),f=c.styleDirectiveScope.$on("$destroy",function(){u(),d(),f()});return c.getMapLayer().on("change:visible",function(e){i.updateViewDisplayStatus(t.workspaceId,t.id,{isVisible:e.target.get(e.key)})}),t.displayStatus.isOnMap&&(c.refresh(a),c.activate()),c}},t.prototype.buildCqlFilter=function(t){var e=v.DataSourceManager.getDataSourcesById(t.dataSourceId).first();if(e){var n=e.keywordConfig.getIn(w.concat([t.workspaceId,"prefilter"]),""),i=t.options.attrs,o=e.keywordConfig.getIn(["search","text","field"],r.Map()).keySeq(),a="";if(c(i)||(a=u(i,function(t){var e=t.choices,n=f(e,function(e,n){var r="";return n.isSelected&&(""!==e&&(r=" OR "),r+=t.name+" = "+n.value),e+r},"");return""!==n?"("+n+")":n})),a.length>0){a=f(a,function(t,e){var n="";return""!==t&&""!==e&&(n=" AND "),t+(n+=e)},"")}if(null!==t.options.cql.value&&""!==t.options.cql.value&&(""!==a?a+=" AND "+t.options.cql.value:a=t.options.cql.value),l(t.options.cql.freeText)&&!s(t.options.cql.freeText.trim())&&!o.isEmpty()){var d=this.cqlHelper.buildFreeTextFilter(t.options.cql.freeText,o.toJS(),!0);a=this.cqlHelper.combine(this.cqlHelper.operator.AND,a,d)}return n&&(a=this.cqlHelper.combine(this.cqlHelper.operator.AND,n,a)),a}},t.prototype.checkDataSources=function(){var t=this,e=v.DataSourceManager.getDataSourcesByKeyword(w);e.forEach(function(e){e.keywordConfig.getIn(w).keySeq().forEach(function(n){var r=n+";"+e.id;if(!t.getView(n,r)){var o={Name:e.name,Workspace:n,serverUrl:e.serverUrl},a=i(h.config.get("map.initLayers",[]),o);t.buildView(n,r,e),t.updateViewDisplayStatus(n,r,{isRemovable:!1}),a&&t.toggleView(n,r)}})}),this.fixDuplicateTitles(e)},t.prototype.fixDuplicateTitles=function(t){var e=this,n=t.reduce(function(t,e){return t.set(e.id,e)},r.Map());this.getState().workspaces.valueSeq().flatten(!0).filter(function(t){return!t.displayStatus.isRemovable}).groupBy(function(t){return n.get(t.dataSourceId).title}).filter(function(t){return t.size>1}).forEach(function(t){t.forEach(function(t){var r=n.get(t.dataSourceId);if(r&&t.name===r.title){var i=v.DataSourceManager.getOgcConfigById(r.ogcId).title;e.updateView(t.workspaceId,t.id,{name:r.title+" ("+i+")"})}})})},t.prototype.getState=function(){return this.stateManager.getState(b.LIVE_PATH)},t.prototype.onStateChange=function(t){var e=this;if(t.isLiveOn!==this.lastState.isLiveOn){var n=t.workspaces.toList().flatten(1).filter(function(t){return t.displayStatus.isOnMap});t.isLiveOn?n.forEach(function(t){var n=e.layerManager.getLayer(t.mapLayerId);n&&(n.getMapLayer().setVisible(!0),n.activate())}):n.forEach(function(t){var n=e.layerManager.getLayer(t.mapLayerId);n&&(n.getMapLayer().setVisible(!1),n.inactivate())})}t.workspaces.forEach(function(t,n){t.forEach(function(t){var i=e.lastState.workspaces.get(n,r.List()).find(function(e){return e.id===t.id});i&&i.cqlFilter!==t.cqlFilter&&e.refreshMapLayer(n,t.id)})}),this.lastState=t},t.prototype.refreshMapLayer=function(t,e){var n=this.getView(t,e);if(n.displayStatus.isOnMap){var r=v.DataSourceManager.getDataSourcesById(n.dataSourceId).first(),i=this.layerManager.getLayer(n.mapLayerId),o={LAYERS:r.name,CQL_FILTER:"INCLUDE"};s(n.cqlFilter)||(o.CQL_FILTER=n.cqlFilter),i.refresh(o)}},t.$inject=["$filter","cqlHelper","ol3Map","pollingManager","stealth.timelapse.geo.ol3.layers.LiveWmsLayer"],t}();e.LiveManager=S},,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),i=n(71),o=n(44),a=n(4),s=n(85),l=n(887),c=n(5),u=n(15),d=u.config.get("app.context"),f=/(.*)\.{(.*)}/;function p(t){var e=t.indexOf("=");return-1===e?[t]:[t.slice(0,e),t.slice(e+1)]}function h(t){return s(o(t),function(e,n){if(i(t[n])){var r=h(t[n]);e.push.apply(e,a(r,function(t){return n+"."+t}))}else e.push(n+"="+t[n]);return e},[])}function g(t){if(-1===t.indexOf("=")&&f.test(t)){var e=f.exec(t),n=["ogc","keywords",e[2]];if(u.config.has(n))return a(h(u.config.get(n)),function(t){return e[1]+"."+t})}return[t]}function m(t,e){return e.reduce(function(n,i,o){if(r(n)){var a=e.slice(0,o+1);if(o+1>=e.length&&t.hasIn(a)&&c.Map.isMap(t.getIn(a)))return"Keyword path "+e.join(".")+" would overwrite more specific keywords.";if(t.hasIn(a)&&!c.Map.isMap(t.getIn(a)))return"Keyword path "+a.join(".")+" already exists as a leaf."}return n},"")}function v(t,e){var n=p(e),i=n.length>1?n[1]:c.Map(),o=a(n[0].split("."),function(t){return t.replace("%2E",".")}),s=m(t.keywordConfig,o);if(!r(s))return t.errors=t.errors.push("Bad keyword: "+e+". "+s),t;switch(o[0]){case"stealth":if(t.keywordConfig.hasIn(l(o)))return t;case d:t.keywordConfig=t.keywordConfig.setIn(l(o),i);default:return t}}e.splitKeyword=p,e.flattenConfig=h,e.expandKeyword=g,e.checkPath=m,e.buildKeywordMap=v,e.parseKeywordConfig=function(t){return s(t,function(t,e){var n=g(e);return s(n,v,t)},{keywordConfig:c.Map(),errors:c.List()})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(){function t(){}return t.addKeywordExtender=function(t){this.extenders=this.extenders.add(t)},t.extendKeywords=function(t){return this.extenders.reduce(function(t,e){return e(t)},t)},t.extenders=r.Set(),t}();e.KeywordExtender=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(889);e.reducer=function(t,e){var n;switch(void 0===t&&(t=r.List()),e.type){case i.TypeKeys.ADD_DATA_SOURCE:return-1!==(n=t.findIndex(function(t){return t.id===e.dataSource.id}))?t.set(n,e.dataSource):t.push(e.dataSource);case i.TypeKeys.UPDATE_DATA_SOURCE:return-1!==(n=t.findIndex(function(t){return t.id===e.dataSourceId}))?t.set(n,t.get(n).with(e.dataSource)):t;case i.TypeKeys.REMOVE_DATA_SOURCE:return-1!==(n=t.findIndex(function(t){return t.id===e.dataSourceId}))?t.splice(n,1).toList():t;case i.TypeKeys.CLEAR_DATA_SOURCES:return t.clear();default:return t}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({id:"",keywordConfig:i.Map(),maxZoom:0,minZoom:0,name:"",ogcId:"",originalProjection:void 0,queryable:!1,serverUrl:"",tileSize:[],title:"",wfsUrl:"",wmsUrl:"",wpsUrl:"",wrapX:!1,xyz:!1},"DataSourceRecord"));e.DataSourceRecord=o},function(t,e,n){var r=n(891)(!0);t.exports=r},function(t,e){t.exports='<div style="padding:4px;">\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.visibilityName\'"></ui-include>\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.opacitySlider\'"></ui-include>\n    <div class="layerStyleRow" style="margin: 8px 0 0 0">\n        <div ng-repeat="(key, checkbox) in layerState.checkboxes"\n             class="cell clickable" style="padding-right:8px;"\n             ng-click="$ctrl.toggleCheckbox(key)"\n        >\n            <i class="fa fa-lg fa-fw"\n               ng-class="checkbox.value ? \'fa-check-square-o\' : \'fa-square-o\'"\n            ></i>\n            {{::checkbox.label}}\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=function(){function t(t){this.$scope=t}return t.prototype.toggleCheckbox=function(t){var e=r(this.$scope.layerState.checkboxes,t);e&&(e.value=!e.value,this.$scope.updateCheckboxes())},t.$inject=["$scope"],t}();e.StyleController=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(53),a=n(4),s=n(30),l=n(85),c=n(192);e.KeywordStyle=function(t){return function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,e)||this;if(o(r.layerThisBelongsTo.KeywordConfig,"style")){var u=function(t){return l(t,function(t,e,n){var r=e.split(";;");return t[n]={label:r[0],value:!(r.length>1)||"true"===r[1]},t},{})}(i(r.layerThisBelongsTo.KeywordConfig,"style.checkboxes",{})),d=r.onLayerStateUpdate;r.styleDirective="stealth.geo.style.keyword-widget",r.setDefaultStyle("checkboxes",u),r.styleDirectiveScope.updateCheckboxes=function(){r.stateManager.dispatch({type:c.MapLayerActions.TypeKeys.SET_STYLE,id:r.id,style:r.styleMap.set("checkboxes",s({},r.styleDirectiveScope.layerState.checkboxes))})},r.styleDirectiveScope.refreshStyleEnv=function(){var t={ENV:function(t){return a(t,function(t,e){return e+":"+t.value}).join(";")}(r.styleDirectiveScope.layerState.checkboxes)};r.updateRequestParams?r.updateRequestParams(t):r.refresh(t)},r.onLayerStateUpdate=function(t,e){d(t,e),e.opacity===t.opacity&&r.styleDirectiveScope.refreshStyleEnv()}}return r}return r(e,t),e}(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(894),o=n(895);e.reducer=function(t,e){var n,a;switch(void 0===t&&(t=new o.LiveState),e.type){case i.TypeKeys.SET_INTERVAL:return t.with({pollingInterval:e.interval});case i.TypeKeys.SET_IS_LIVE_ON:return t.with({isLiveOn:e.isLiveOn});case i.TypeKeys.ADD_VIEW:var s=e.view.workspaceId;return n=t.workspaces.get(s,r.List()),t.with({workspaces:t.workspaces.set(s,n.push(e.view))});case i.TypeKeys.REMOVE_VIEW:return n=(n=t.workspaces.get(e.workspaceId,r.List())).filter(function(t){return t.id!==e.viewId}).toList(),t.with({workspaces:t.workspaces.set(e.workspaceId,n)});case i.TypeKeys.UPDATE_VIEW:if(-1!==(a=(n=t.workspaces.get(e.workspaceId,r.List())).findIndex(function(t){return t.id===e.viewId}))){var l=n.get(a);n=n.set(a,l.with(e.view))}return t.with({workspaces:t.workspaces.set(e.workspaceId,n)});case i.TypeKeys.UPDATE_DISPLAY_STATUS:if(-1!==(a=(n=t.workspaces.get(e.workspaceId,r.List())).findIndex(function(t){return t.id===e.viewId}))){var c=n.get(a).displayStatus.with(e.displayStatus);n=n.set(a,n.get(a).with({displayStatus:c}))}return t.with({workspaces:t.workspaces.set(e.workspaceId,n)});default:return t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2057),o=n(2058);e.default=r.module("stealth.live.category").directive("stLiveCategory",[function(){return{restrict:"E",template:o,scope:{},controller:i.CategoryController,controllerAs:"ctrl",bindToController:!0}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(53),i=n(16),o=n(15),a=n(24),s=n(893),l=function(){function t(t,e,n){var r=this;this.$scope=t,this.liveWizard=e,this.liveManager=n,this.stateManager=i.StateManager.getInstance(),this.hideLiveNetlink=o.config.get("timelapse.hideLiveNetlink",!0),this.menuOptionsCache={},this.isLiveOn=!0,this.workspaces={},this.viewNames={};var a=this.stateManager.getObservable(s.LIVE_PATH).subscribe({next:function(t){r.onStateUpdate(t)}});this.onStateUpdate(this.stateManager.getState(s.LIVE_PATH)),this.pollingOptions=n.getPollingOptions(),t.$on("$destroy",function(){a.unsubscribe()})}return t.prototype.onStateUpdate=function(t){var e=this;this.$scope.$evalAsync(function(){e.isLiveOn=t.isLiveOn,e.pollingInterval=t.pollingInterval,e.workspaces=t.workspaces.map(function(t){return t.filter(function(t){var e=a.DataSourceManager.getDataSourcesById(t.dataSourceId).first();return e?t.displayStatus.isRemovable||!e.keywordConfig.hasIn(["timelapse","hideRoot"]):void 0}).groupBy(function(t){return t.dataSourceId})}).toJS(),e.updateViewNames(t)})},t.prototype.updateViewNames=function(t){var e=this;t.workspaces.toList().flatten(1).forEach(function(t){t.id!==e.viewNameFocused&&(e.viewNames[t.id]=t.name)})},t.prototype.sendToGoogleEarth=function(t,e){var n=this.liveManager.getGoogleEarthLink(t,e);n&&window.open(n)},t.prototype.cloneFilter=function(t){var e=this.liveManager.cloneView(t.workspaceId,t.id);e&&this.expandView(e)},t.prototype.removeView=function(t){this.liveManager.removeView(t.workspaceId,t.id)},t.prototype.toggleLive=function(){this.liveManager.toggleLive()},t.prototype.launchQueryWizard=function(){this.liveWizard.launchWizard()},t.prototype.refreshNow=function(){this.liveManager.refreshAllViews()},t.prototype.pollingLabel=function(t){return 0===t?"off":t+" s"},t.prototype.updatePollingInterval=function(){this.liveManager.setPollingInterval(this.pollingInterval)},t.prototype.expandView=function(t){this.liveManager.updateViewDisplayStatus(t.workspaceId,t.id,{isExpanded:!t.displayStatus.isExpanded})},t.prototype.toggleView=function(t,e){this.liveManager.toggleView(t,e)},t.prototype.updateViewName=function(t,e,n){this.liveManager.updateView(t,e,{name:n})},t.prototype.updateViewCql=function(t){this.liveManager.updateViewCql(t.workspaceId,t.id)},t.prototype.getViewTextSearch=function(t){var e=a.DataSourceManager.getDataSourcesById(t).first();return!!e&&e.keywordConfig.hasIn(["search","text","field"])},t.prototype.getViewMenu=function(t){var e=this,n=[];return r(this.menuOptionsCache,t.id)||(this.hideLiveNetlink||n.push({label:'<i class="fa fa-fw fa-globe"></i> Send to Google Earth',onClick:function(){e.sendToGoogleEarth(t.workspaceId,t.id)}}),n.push({label:'<i class="fa fa-fw fa-copy"></i> Create a new copy',onClick:function(){e.cloneFilter(t)}}),t&&t.displayStatus.isRemovable&&n.push({label:'<i class="fa fa-fw fa-remove"></i> Remove',onClick:function(){e.removeView(t)}}),this.menuOptionsCache[t.id]=n),this.menuOptionsCache[t.id]},t.prototype.onViewNameFocus=function(t){this.viewNameFocused=t},t.prototype.onViewNameBlur=function(){this.viewNameFocused=""},t.$inject=["$scope","liveWizard","stealth.live.manager.Manager"],t}();e.CategoryController=l},function(t,e){t.exports='<div class="categoryCell">\n    <i class="fa fa-fw clickable"\n       ng-class="ctrl.isLiveOn ? \'fa-check-square-o\' : \'fa-square-o\'"\n       ng-click="ctrl.toggleLive(ctrl.isLiveOn)"\n    ></i>\n</div>\n<div class="categoryCell"><b>Live</b></div>\n<div class="categoryCell" style="width:100%;">\n    <span class="btn btn-default fa-stack toggleButton"\n          ng-click="ctrl.launchQueryWizard()"\n          uib-tooltip="Add layer"\n          tooltip-class="nowrap"\n          tooltip-placement="right"\n          tooltip-animation="false"\n          tooltip-popup-delay="500"\n          tooltip-trigger="mouseenter"\n    >\n        <i class="fa fa-fw fa-plus fa-stack-1x text-primary"></i>\n    </span>\n    <span class="btn btn-default fa-stack toggleButton"\n          ng-click="ctrl.refreshNow()"\n          uib-tooltip="Refresh now"\n          tooltip-class="nowrap"\n          tooltip-placement="right"\n          tooltip-animation="false"\n          tooltip-popup-delay="500"\n          tooltip-trigger="mouseenter"\n          tooltip-append-to-body="true"\n    >\n        <i class="fa fa-fw fa-repeat fa-stack-1x text-primary"></i>\n    </span>\n</div>\n<div class="categoryCell text-secondary">Refresh:</div>\n<div class="categoryCell">\n    <ccri-angular-utils-select class="input-xs-select transparent-dd"\n                               style="width: 60px;"\n                               st-int-input\n                               ng-model="ctrl.pollingInterval"\n                               label-fn="ctrl.pollingLabel"\n                               from-list="::ctrl.pollingOptions"\n                               ng-change="ctrl.updatePollingInterval()"\n                               dropdown-style="{\'font-size\': \'14px\'}"\n    ></ccri-angular-utils-select>\n</div>\n<div ng-repeat="workspace in ctrl.workspaces | lodash:\'keys\' | orderBy track by workspace"\n     class="layerGroup"\n     ng-class="{\'ng-hide\': !ctrl.isLiveOn}"\n>\n    <div ng-repeat="ds in ctrl.workspaces[workspace] | lodash:\'keys\' | orderBy track by ds"\n         class="categoryGrouping"\n    >\n        <div ng-repeat="view in ctrl.workspaces[workspace][ds] track by view.id"\n             ng-class="{\'buf-xs-mb\': !$last}"\n             class="flex-row menu-triggerContainer"\n        >\n            <div class="clickable" ng-click="ctrl.expandView(view)">\n                <i class="fa fa-fw"\n                   ng-class="{\'fa-caret-down\': view.displayStatus.isExpanded, \'fa-caret-right\': !view.displayStatus.isExpanded}"\n                ></i>\n            </div>\n            <st-toggle-map-layer visible="view.displayStatus.isOnMap"\n                                 loading="view.displayStatus.isLoading"\n                                 toggle="ctrl.toggleView(workspace, view.id)"\n            ></st-toggle-map-layer>\n            <div class="flex-1">\n                <input type="text"\n                       ng-focus="ctrl.onViewNameFocus(view.id)"\n                       ng-blur="ctrl.onViewNameBlur()"\n                       ng-model="ctrl.viewNames[view.id]"\n                       class="form-control input-xs"\n                       ccri-angular-utils-change="ctrl.updateViewName(workspace, view.id, ctrl.viewNames[view.id])"\n                >\n                <div style="padding: 4px 0;" ng-class="{\'ng-hide\': !view.displayStatus.isExpanded}">\n                    <div ng-if="::ctrl.getViewTextSearch(view.dataSourceId)">\n                        <ccri-angular-utils-typeahead\n                            use-textarea="true"\n                            placeholder="Enter search term(s)"\n                            ccri-angular-utils-change="ctrl.updateViewCql(view)"\n                            ccri-angular-utils-change-delay="1000"\n                            ng-model="view.options.cql.freeText"\n                            memory-num="5"\n                            localstorage-prefix="{{::view.name}}.freeText"\n                            typeahead-editable="true"\n                        ></ccri-angular-utils-typeahead>\n                    </div>\n                    <div ng-if="::!ctrl.getViewTextSearch(view.dataSourceId)">\n                        <ccri-angular-utils-typeahead\n                            use-textarea="true"\n                            placeholder="Enter CQL"\n                            ccri-angular-utils-change="ctrl.updateViewCql(view)"\n                            ccri-angular-utils-change-delay="1000"\n                            ng-model="view.options.cql.value"\n                            memory-num="5"\n                            localstorage-prefix="{{::view.name}}.cql"\n                            typeahead-editable="true"\n                        ></ccri-angular-utils-typeahead>\n                    </div>\n                </div>\n            </div>\n            <ccri-angular-utils-menu-trigger menu-options="ctrl.getViewMenu(view)"\n                                             class="buf-md-ml buf-sm-mr"\n            >\n                <i class="fa fa-ellipsis-v fa-lg"></i>\n            </ccri-angular-utils-menu-trigger>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),i=n(15),o=function(){function t(t,e,n){this.cqlHelper=t,this.clickSearchHelper=e,this.wfs=n}return t.prototype.searchPoint=function(t,e,n,o){var a=this,s=function(t){o(t)},l=t.layerThisBelongsTo;t.getGeomField().then(function(t){var n=e[0],o=e[1],c={cql_filter:a.cqlHelper.buildBboxFilter(t,[n-10,o-10,n+10,o+10])},u=l.Name,d=l.wfsUrl||i.config.get("geoserver.defaultUrl")+"/wfs";a.wfs.getFeature(d,u,r({},c),"text",!0).then(function(t){var n=a.clickSearchHelper.sortAndTrimFeatures(e,t.data.features,null);s(n)},function(t){s([])})},function(t){return null})},t.prototype.searchPointWms=function(t,e,n,r){var i={cql_filter:this.getBoundingBoxFilter(t,e)},o=function(t){r(t)};t.searchPoint(e,n,i).then(function(t){o(t.records)},function(t){o([])})},t.prototype.searchExtent=function(t,e,n){var o=this,a=function(t){n(t)},s=t.layerThisBelongsTo;t.getGeomField().then(function(t){var n={cql_filter:o.cqlHelper.buildBboxFilter(t,[e[0],e[1],e[2],e[3]])},l=s.Name,c=s.wfsUrl||i.config.get("geoserver.defaultUrl")+"/wfs";o.wfs.getFeature(c,l,r({},n),"text",!0).then(function(t){a(t.data.features)},function(t){a([])})},function(t){return null})},t.prototype.getBoundingBoxFilter=function(t,e){var n=this;t.getGeomField().then(function(t){var r=e[0],i=e[1];return n.cqlHelper.buildBboxFilter(t,[r-1e-4,i-1e-4,r+1e-4,i+1e-4])},function(t){return null})},t.$inject=["cqlHelper","clickSearchHelper","wfs"],t}();e.SearchService=o},function(t,e){t.exports='<div class="btn action-btn bar-btn bar-color2 bar-btn-toggle"  ng-click="toggle()"\n     ng-class="{\'bar-btn-toggle-on\': isToggledOn}"\n     uib-tooltip="Select Features" tooltip-class="nowrap"\n     tooltip-placement="bottom-right" tooltip-animation="true"\n     tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n     tooltip-class="inspect-tooltip">\n    <i class="fa fa-lg" ng-class="baseIconClass"></i>    \n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(2),o=n(6),a=n(565),s=function(){function t(t,e,n,r,i,s,l,c,u){var d=this;this.$rootScope=t,this.modeManager=e,this.$scope=n,this.ol3Map=r,this.searchService=i,this.selectService=s,this.liveManager=l,this.colors=c,this.toastr=u,this.enabled=!1,this.map=this.ol3Map.getMap(),this.destroy=function(t){d.selectMode.name===t.name&&d.$scope.isToggledOn&&(d.$scope.isToggledOn=!1,d.enableRectTool(!1))},this.activate=function(t){d.selectMode.name!==t.name||d.$scope.isToggledOn||(d.$scope.isToggledOn=!0,d.enableRectTool(!0))},this.enablePointTool=function(t){t!==d.enabled&&(t?d.listenerKey=d.ol3Map.on("singleclick",d._clickListener):d.listenerKey&&(d.ol3Map.unByKey(d.listenerKey),d.listenerKey=null),d.enabled=t)},this.getFirstVisibleLayer=function(){var t=d.liveManager.getViews().filter(function(t){return t.displayStatus.isVisible}).last(),e=null;return t&&(e=d.ol3Map.getLayerById(t.mapLayerId)),e},this._clickListener=function(t){var e=d.getFirstVisibleLayer();d.searchService.searchPoint(e,t.coordinate,d.ol3Map.getView().getResolution(),function(t){d.selectFeatures(e,t)})},this.enableRectTool=function(t){t!==d.enabled&&(t?(d._draw=new o.interaction.Draw({type:"LineString",style:d.colors.draw,geometryFunction:function(t,e){e||(e=new o.geom.Polygon(null));var n=t[0],r=t[1]||[0,0];return e.setCoordinates([[n,[n[0],r[1]],r,[r[0],n[1]],n]]),e},maxPoints:2}),d.map.addInteraction(d._draw),d._draw.on("drawend",d.onDrawEnd,d)):(d._draw&&(d.map&&d.map.removeInteraction(d._draw),d._draw.un("drawend",d.onDrawEnd,d)),d._draw=null),d.enabled=t)},this.addSelectLayer=function(t){d.ol3Map.addLayerOverlay(t)},this.selectMode=a.SelectService.SELECT_MODE,this.modeManager.addMode(this.selectMode),n.isToggledOn=this.selectMode.name===e.getMode().name,this.enablePointTool(n.isToggledOn),t.$on("map.mode.activated",function(t,e){d.activate(e)}),t.$on("map.mode.deactivated",function(t,e){d.destroy(e)}),n.toggle=function(){n.isToggledOn||e.activate(d.selectMode.name)},e.getMode().name===e.noMode.name&&this.selectMode.name===e.defaultMode.name&&n.toggle(),n.baseIconClass=this.selectMode.iconClassMedium}return t.prototype.onDrawEnd=function(t){var e=this,n=t.feature.getGeometry().clone(),r=this.getFirstVisibleLayer();if(r){this.selectService.removeSelectLayer(this.ol3Map),this.searchService.searchExtent(r,n.getExtent(),function(t){t.length>0?e.selectFeatures(r,t):e.toastr.info("No features were selected.")})}else this.toastr.warning("No visible Live layers were available to select from.")},t.prototype.selectFeatures=function(t,e){var n=t.layerThisBelongsTo,r=["timelapse","live",n.stealthWorkspace,"idField"],o=i(n.KeywordConfig,r),a=this.getFeatureIds(e,o);if(this.selectMapLayer=this.selectService.selectByIds(t,o,a,this.liveManager),this.$scope.selectMapLayer=this.selectMapLayer,this.selectMapLayer){var s=this.selectMapLayer.getMapLayer();s&&this.addSelectLayer(s)}t.setSelectLayer(this.selectMapLayer),this.selectMapLayer.setSelectSourceLayer(t)},t.prototype.getFeatureIds=function(t,e){return r(t,function(t){return t.properties[e]})},t.$inject=["$rootScope","stealth.core.geo.controls.mapMode.modeManager","$scope","ol3Map","stealth.live.select.SearchService","stealth.live.select.SelectService","stealth.live.manager.Manager","ccri.area-definition.colors","toastr"],t}();e.SelectToolController=s},function(t,e){t.exports='<div \n    class="fa-stack btn action-btn bar-btn bar-color2"\n    ng-click="click()"\n    ng-disabled="isDisabled"\n    uib-tooltip="Clear Selection" tooltip-class="nowrap"\n    tooltip-placement="bottom-right" tooltip-animation="true"\n    tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n    tooltip-class="inspect-tooltip"\n    style="margin-top:-4px">\n    <i class="fa fa-lg fa-stack-1x" ng-class="baseIconClass"></i>\n    <i class="fa fa-times-circle fa-lg fa-stack-1x" style="font-size:10px;margin-top:-2px"></i>       \n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(565),i=n(900),o=function(){function t(t,e,n,o,a){var s=this;this.$rootScope=t,this.modeManager=e,this.$scope=n,this.ol3Map=o,this.selectService=a,this.onClick=function(){s.selectService.removeSelectLayer(s.$scope.ol3Map)},this.selectionUpdatedListener=function(t){s.$scope.isDisabled=!(t.selection&&t.selection.length>0)},this.$scope.baseIconClass=r.SelectService.SELECT_MODE.iconClassMedium,this.$scope.ol3Map=this.ol3Map,this.$scope.click=this.onClick,this.$scope.isDisabled=!0,i&&(i.Service.on(i.selectionUpdated,this.selectionUpdatedListener),n.$on("$destroy",function(){i.Service.removeListener(i.selectionUpdated,s.selectionUpdatedListener)}))}return t.$inject=["$rootScope","stealth.core.geo.controls.mapMode.modeManager","$scope","ol3Map","stealth.live.select.SelectService"],t}();e.SelectClearController=o},function(t,e){t.exports='<div ng-if="totalLength > 200">\n    <i class="fa fa-warning"></i>&nbsp;\n        List/search limited to <strong>200</strong> of\n        <strong>{{totalLength}}</strong> available items.\n</div>\n\x3c!-- Checkbox for filtering list to items visible in the map view extent --\x3e\n<span class="clickable" ng-click="tb.toggleExtentFiltering(!tb.extentFilter.enabled)">\n    <i class="fa fa-fw" ng-class="tb.extentFilter.enabled ? \'fa-check-square-o\' : \'fa-square-o\'"></i>\n    Only list items visible within map extent\n</span>\n'},function(t,e){t.exports='<div class="truncate-text">\n    {{record.titleProperties.title}} /\n    <span style="font-size: 12px">{{record.titleProperties.subTitle}}</span>\n    <span ng-if="!(recordStates[record[idField]] | lodash:\'isUndefined\') && recordStates[record[idField]].followCapability.following"\n          style="color:#006e8c">\n        <i class="fa fa-lg fa-crosshairs" />\n    </span>\n</div>\n'},function(t,e){t.exports="<div>{{ record.classification }}</div>\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(1),o=n(39),a=function(){function t(t,e,n,a,s,l,c){var u=this;this.$scope=t,this.$log=e,this.ol3Map=n,this.popupManager=a,this.widgetDef=s,this.sidebarButtons=l,this.VectorOverlay=c,this.onDestroy=function(){u.$scope.toolbarWidget=u.$scope.decorateCard=u.$scope.menuResolver=u.$scope.filterResolver=u.$scope.onMouseEnter=u.$scope.onMouseLeave=null,u._highlightLayer.clear(),u._sidebarButton.setOpen(!1),u._sidebarButton=null,u._highlightLayer.removeFromMap(),u._highlightLayer=u._highlightFeature=null},this.menuResolver=function(t){var e=u.$scope.liveLayer.getCapabilities(),n=[];return e.follow=u.$scope.listPopupCoord.getFollowCapability(t),u.$scope.arrayStore.getById(t).then(function(t){n.unshift.apply(n,i.compact(i.map(e,function(e){return!e.onClick||e.checkValidity&&!e.checkValidity(t)?null:{name:e.toolTipText,onClick:function(t){u.$scope.arrayStore.getById(t).then(function(n){e.onClick("Live list record "+t,n,e,{source:n.sourceFeature})})}}})))}),n.push({name:"Pan to",onClick:function(t){u.$scope.arrayStore.getById(t).then(function(t){u.ol3Map.getView().animate({duration:1e3,center:t.geom.getFirstCoordinate()})})}}),n.push({name:"Open popup",onClick:function(t){u.$scope.arrayStore.getById(t).then(function(e){var n=e.sourceFeature.geometry.coordinates,r=u.$scope.listPopupCoord.getRecordState(e,n);if(i.isEmpty(r.popups))u.$scope.listPopupCoord.openPopup(e);else{var o=i.map(r.popups,"popupId"),a=i.find(o,function(t){return!i.isUndefined(t)});if(!i.isUndefined(a)){var s=i.find(u.popupManager.getPopups(),{id:a}),l=s.contentDef.scope.tabs;u.popupManager.focusPopup(a),!i.isUndefined(l)&&l.length>1&&i.forEach(l,function(e,n){if("st-live-air-wms-layer-popup"===e.widgetDef.tag&&e.widgetDef.scope.record[u.$scope.arrayStore.getIdField()]===t)return s.contentDef.scope.setActiveTabIdx(n),!1})}}})}}),n},this.decorateCard=function(t){t.scope.idField=u.$scope.arrayStore.getIdField(),t.scope.recordStates=u.$scope.listPopupCoord.recordStates,t.titleWidget=new o.WidgetDef({tag:"stealth-live-list-title",attrs:'record="record" record-states="recordStates" id-field="idField"',scope:t.scope}),t.collapsedWidget=new o.WidgetDef({tag:"stealth-live-list-collapsed",attrs:'record="record"',scope:t.scope}),t.contentWidget=new o.WidgetDef({tag:u.contentWidgetTag,attrs:'record="record"',scope:t.scope})},this.filterResolver=function(t){var e=t.toLowerCase();return function(t){return i.some(u.$scope.searchFields,function(n){var r=!1;return i.isString(t[n])&&!i.isEmpty(t[n])&&(r=-1!==t[n].toLowerCase().indexOf(e)),r})}},this.onMouseEnter=function(t){u.$scope.arrayStore.getById(t).then(function(t){u._highlightFeature?u._highlightFeature.setGeometry(t.geom):u._highlightFeature=new r.Feature(t.geom),i.includes(u._highlightLayer.getFeatures().getArray(),u._highlightFeature)||u._highlightLayer.addFeature(u._highlightFeature)})},this.onMouseLeave=function(){u._highlightFeature&&u._highlightLayer.getFeatures().remove(u._highlightFeature)},t.$on("$destroy",this.onDestroy),this._sidebarButton=l.getByName(t.buttonName),this._sidebarButton.setOpen(!0),this._highlightLayer=this.makeHighlightLayer(),this._highlightLayer.addToMap(),t.toolbarWidget=this.makeToolbarWidget(),t.decorateCard=this.decorateCard,t.menuResolver=this.menuResolver,t.filterResolver=this.filterResolver,t.onMouseEnter=this.onMouseEnter,t.onMouseLeave=this.onMouseLeave}return t.prototype.makeToolbarWidget=function(){return new o.WidgetDef({tag:"stealth-live-list-toolbar",scope:this.$scope})},t.prototype.makeHighlightLayer=function(){var t=[new r.style.Style({image:new r.style.RegularShape({fill:new r.style.Fill({color:"rgba(0,0,0,0)"}),points:4,radius:20,stroke:new r.style.Stroke({color:"rgb(255,255,255)",width:4})})}),new r.style.Style({image:new r.style.RegularShape({fill:new r.style.Fill({color:"rgba(0,0,0,0)"}),points:4,radius:20,stroke:new r.style.Stroke({color:"rgba(255,82,64,1)",width:2})})})];return new this.VectorOverlay({styleBuilder:function(){return t}})},Object.defineProperty(t.prototype,"contentWidgetTag",{get:function(){return"stealth-live-list-contents"},enumerable:!0,configurable:!0}),t.$inject=["$scope","$log","ol3Map","ccri.popup.manager","ccri.angular-utils.WidgetDef","sidebarButtons","stealth.core.geo.ol3.overlays.Vector"],t}();e.EntityListController=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.$scope=t;var e=t.extentFilterState;this.extentFilter=e,this._toggleExtentFiltering=this.toggleExtentFiltering}return t.prototype.toggleExtentFiltering=function(t){this.extentFilter.setEnabled(!!t)},t.$inject=["$scope"],t}();e.EntityListToolbarController=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(903),o=n(2084),a=n(2087),s=n(903);e.ContextManager=s.ContextManager,r.module("stealth.context",[i.default,o.default,a.default])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(23),o=n(2),a=n(18),s=n(15),l=n(16),c=n(192),u=n(2071),d=n(24),f=n(892),p=n(566),h=["context"],g=function(){function t(t,e,n,i,o,a,p,h){var g=this;this.$location=t,this.$timeout=e,this.cqlHelper=n,this.ol3Map=i,this.MapLayer=o,this.XYZLayer=h,this.stateManager=l.StateManager.getInstance(),this.layerManager=c.LayerManager.getInstance(),this.localLayers=r.Map(),this.WmsLayerWithKeywordStyle=f.KeywordStyle(p),this.PollingImageWmsLayerWithKeywordStyle=f.KeywordStyle(a),s.config.get("map.countriesOff",!1)||(this.localLayers=this.localLayers.set(u.countriesConfigLayer.Name,u.countriesOlLayer)),d.DataSourceManager.getObservable().subscribe({next:function(){g.checkDataSources()}}),this.checkDataSources(),this.layerManager.addLayerProvider("ContextLayer",function(t){var e=g.getState().workspaces.valueSeq().map(function(t){return t.views.valueSeq()}).flatten(1).find(function(e){return e.mapLayerId===t.id});return e?g.buildMapLayer(e):void 0})}return t.prototype.toggleView=function(t,e){var n=this,r=this.getView(t,e);if(r.displayStatus.isOnMap&&r.mapLayerId){var i=this.layerManager.getLayer(r.mapLayerId),o=1;if(this.ol3Map.removeLayerById(r.mapLayerId),i&&(o=i.getMapLayer().getOpacity(),i.onDestroy()),this.updateView(t,e,{mapLayerId:""}),this.updateViewDisplayStatus(t,e,{isOnMap:!1,isVisible:!1,lastOpacity:o}),"Base"===t&&this.getState().workspaces.get("Base").views.every(function(t){return!t.displayStatus.isOnMap})){var a=this.getState().workspaces.get("Base").views.find(function(t){return t.default});a&&this.toggleView("Base",a.id)}}else{(i=this.buildMapLayer(r))&&(this.updateView(t,e,{mapLayerId:i.id}),this.updateViewDisplayStatus(t,e,{isOnMap:!0,isVisible:!0}),this.ol3Map.addLayer(i),"Base"===t&&this.getState().workspaces.get("Base").views.forEach(function(t,r){t.id!==e&&t.displayStatus.isOnMap&&n.toggleView("Base",t.id)}))}},t.prototype.toggleViewVisibility=function(t,e){var n=this.getState().workspaces.get(t).views.get(e);if(n.displayStatus.isOnMap&&n.mapLayerId){var r=this.layerManager.getLayer(n.mapLayerId);if(r){var i=!r.getMapLayer().getVisible();r.getMapLayer().setVisible(i),this.updateViewDisplayStatus(t,e,{isVisible:i})}}},t.prototype.updateViewCql=function(t,e){var n,i=this.getState().workspaces.get(t).views.get(e),o=d.DataSourceManager.getDataSourcesById(i.dataSourceId).first(),s=o.keywordConfig.getIn([h,t,"prefilter"],""),l=o.keywordConfig.getIn(["search","text","field"],r.Map()).keySeq();if(n=l.isEmpty()?i.options.cql.value:a(i.options.cql.freeTextFilter.trim())?"":this.cqlHelper.buildFreeTextFilter(i.options.cql.freeTextFilter,l.toJS(),!0),i.displayStatus.isOnMap&&i.mapLayerId){var c=this.layerManager.getLayer(i.mapLayerId);c&&c.applyCql(this.cqlHelper.combine(this.cqlHelper.operator.AND,s,n))}this.updateView(t,e,{cqlFilter:n})},t.prototype.addWorkspace=function(t){this.getState().workspaces.has(t)||this.stateManager.dispatch({type:p.ContextActions.TypeKeys.ADD_WORKSPACE,workspace:new p.WorkspaceRecord({id:t})})},t.prototype.addView=function(t){this.stateManager.dispatch({type:p.ContextActions.TypeKeys.ADD_VIEW,view:t})},t.prototype.buildMapLayer=function(t){var e=this,n=d.DataSourceManager.getDataSourcesById(t.dataSourceId).first();if(n){var r=n.keywordConfig.getIn(h.concat(t.workspaceId,"prefilter")),i="Base"===t.workspaceId,o=i?-20:-10,a=void 0;if(this.localLayers.has(n.name))a=new this.MapLayer(t.id,t.name,this.localLayers.get(n.name),n.queryable,o);else if(n.xyz)a=new this.XYZLayer({id:t.id,name:t.name,opacity:t.displayStatus.lastOpacity,zIndexHint:o,serverUrl:n.serverUrl,originalProjection:n.originalProjection,tileSize:n.tileSize,wrapX:n.wrapX,minZoom:n.minZoom,maxZoom:n.maxZoom});else{var s={LAYERS:n.name},l=n.keywordConfig.hasIn(["capability","tiled"]);(a=n.keywordConfig.hasIn(["capability","poll"])?new this.PollingImageWmsLayerWithKeywordStyle({id:t.id,name:t.name,requestParams:s,queryable:n.queryable,opacity:t.displayStatus.lastOpacity,zIndexHint:o,wmsUrl:n.wmsUrl,isTiled:l,wfsUrl:n.wfsUrl,layerThisBelongsTo:d.DataSourceManager.buildLegacyLayer(n,t.workspaceId),interval:parseInt(n.keywordConfig.getIn(["capability","poll","intervalSeconds"],"300"),10)}):new this.WmsLayerWithKeywordStyle({id:t.id,name:t.name,requestParams:s,queryable:n.queryable,opacity:t.displayStatus.lastOpacity,zIndexHint:o,wmsUrl:n.wmsUrl,isTiled:l,wfsUrl:n.wfsUrl,layerThisBelongsTo:d.DataSourceManager.buildLegacyLayer(n,t.workspaceId)})).applyCql(this.cqlHelper.combine(this.cqlHelper.operator.AND,r,t.cqlFilter))}a.setType("ContextLayer"),a.styleDirectiveScope.styleVars.iconClass="fa fa-fw fa-lg "+(i?"fa-globe":"fa-compass"),a.getMapLayer().on("change:visible",function(n){e.$timeout(function(){e.updateViewDisplayStatus(t.workspaceId,t.id,{isVisible:n.target.get(n.key)})})});var c=a.styleDirectiveScope.$on(a.id+":isLoading",function(n){e.updateViewDisplayStatus(t.workspaceId,t.id,{isLoading:!0}),n.stopPropagation()}),u=a.styleDirectiveScope.$on(a.id+":finishedLoading",function(n){e.updateViewDisplayStatus(t.workspaceId,t.id,{isLoading:!1}),n.stopPropagation()}),f=a.styleDirectiveScope.$on("$destroy",function(){c(),u(),f()});return a}},t.prototype.buildView=function(t,e,n){var r="Base"===t,a={Name:n.name,Workspace:t,serverUrl:n.serverUrl},l=n.keywordConfig.has("filterFromUrl")?o(this.$location.search(),"cqlFilter",""):"",c=new p.ViewRecord({id:e,cqlFilter:l,dataSourceId:n.id,default:n.keywordConfig.hasIn(h.concat([t,"default"])),name:n.title||n.name,options:{cql:{value:l,freeTextFilter:""}},workspaceId:t});(this.addView(c),n.name)&&((i(s.config.get("map.initLayers",[]),a)||r&&c.default)&&this.toggleView(t,e))},t.prototype.checkDataSources=function(){var t=this;d.DataSourceManager.getDataSourcesByKeyword(h).forEach(function(e){var n=t.getState();e.keywordConfig.getIn(h).keySeq().forEach(function(r){var i=r+";"+e.id;n.workspaces.has(r)?n.workspaces.get(r).views.has(i)||t.buildView(r,i,e):(t.addWorkspace(r),t.buildView(r,i,e))})})},t.prototype.getState=function(){return this.stateManager.getState(p.CONTEXT_PATH)},t.prototype.getView=function(t,e){return this.getState().workspaces.get(t).views.get(e)},t.prototype.updateView=function(t,e,n){this.stateManager.dispatch({type:p.ContextActions.TypeKeys.UPDATE_VIEW,workspaceId:t,viewId:e,view:n})},t.prototype.updateViewDisplayStatus=function(t,e,n){this.stateManager.dispatch({type:p.ContextActions.TypeKeys.UPDATE_DISPLAY_STATUS,workspaceId:t,viewId:e,displayStatus:n})},t.$inject=["$location","$timeout","cqlHelper","ol3Map","stealth.core.geo.ol3.layers.MapLayer","stealth.core.geo.ol3.layers.PollingImageWmsLayer","stealth.core.geo.ol3.layers.WmsLayer","stealth.core.geo.ol3.layers.XYZLayer"],t}();e.ContextManager=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(15),o=n(2072);e.countries=o.countries;var a=n(24),s=new r.format.GeoJSON,l=new r.source.Vector({overlaps:!1,strategy:r.loadingstrategy.bbox,features:s.readFeatures(o.countries.ALL)}),c=new r.layer.Vector({source:l,style:new r.style.Style({stroke:new r.style.Stroke({color:"#999"}),fill:new r.style.Fill({color:"#202020"})})});e.countriesOlLayer=c;var u={BoundingBox:[],CRS:[],EX_GeographicBoundingBox:[],KeywordList:["stealth.context.Base.default"],Name:"local:countries",Style:[],Title:"Countries",ogcId:"local",ogcTitle:"Local",queryable:!1,serverUrl:"local",wfsUrl:"",wmsUrl:"",wpsUrl:""};e.countriesConfigLayer=u,i.config.get("map.countriesOff")||a.DataSourceManager.addDataSources(u)},,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(909),i=n(910);e.reducer=function(t,e){var n,o,a,s;switch(void 0===t&&(t=new i.ContextState),e.type){case r.TypeKeys.ADD_WORKSPACE:return t.with({workspaces:t.workspaces.set(e.workspace.id,e.workspace)});case r.TypeKeys.ADD_VIEW:return o=(n=t.workspaces.get(e.view.workspaceId)).with({views:n.views.set(e.view.id,e.view)}),t.with({workspaces:t.workspaces.set(n.id,o)});case r.TypeKeys.UPDATE_WORKSPACE:return o=(n=t.workspaces.get(e.workspaceId)).with(e.workspace),t.with({workspaces:t.workspaces.set(e.workspaceId,o)});case r.TypeKeys.UPDATE_VIEW:return s=(a=(n=t.workspaces.get(e.workspaceId)).views.get(e.viewId)).with(e.view),o=n.with({views:n.views.set(e.viewId,s)}),t.with({workspaces:t.workspaces.set(e.workspaceId,o)});case r.TypeKeys.UPDATE_DISPLAY_STATUS:return s=(a=(n=t.workspaces.get(e.workspaceId)).views.get(e.viewId)).with({displayStatus:a.displayStatus.with(e.displayStatus)}),o=n.with({views:n.views.set(e.viewId,s)}),t.with({workspaces:t.workspaces.set(e.workspaceId,o)});default:return t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2085),o=n(2086);e.default=r.module("stealth.context.category").directive("stContextCategory",[function(){return{restrict:"E",template:o,scope:{},controller:i.CategoryController,controllerAs:"$ctrl",bindToController:!0}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(24),o=n(566),a=function(){function t(t,e){var n=this;this.$scope=t,this.contextManager=e,this.stateManager=r.StateManager.getInstance(),this.workspaces={};var i=this.stateManager.getObservable(o.CONTEXT_PATH).subscribe({next:function(t){n.onStateUpdate(t)}});this.onStateUpdate(this.stateManager.getState(o.CONTEXT_PATH)),t.$on("$destroy",function(){i.unsubscribe()})}return t.prototype.onStateUpdate=function(t){var e=this;this.$scope.$evalAsync(function(){e.workspaces=t.workspaces.filter(function(t,e){return"Base"!==e}).map(function(t,e){return{isExpanded:t.isExpanded,views:t.views.toList().sortBy(function(t){return t.id}).toJS()}}).toJS()})},t.prototype.getTitleStyle=function(t){return this.getViewQueryable(t)?{"max-width":"50%"}:{}},t.prototype.getViewTextSearch=function(t){var e=i.DataSourceManager.getDataSourcesById(t).first();return!!e&&e.keywordConfig.hasIn(["search","text","field"])},t.prototype.getViewQueryable=function(t){return i.DataSourceManager.getDataSourcesById(t).first().queryable},t.prototype.getLegendUrl=function(t){var e=i.DataSourceManager.getDataSourcesById(t).first();return e.serverUrl+"/wms?REQUEST=GetLegendGraphic&FORMAT=image/png&WIDTH=16&HEIGHT=16&TRANSPARENT=TRUE&LAYER="+e.name},t.prototype.toggleWorkspace=function(t){this.stateManager.dispatch({type:o.ContextActions.TypeKeys.UPDATE_WORKSPACE,workspaceId:t,workspace:{isExpanded:!this.workspaces[t].isExpanded}})},t.prototype.toggleView=function(t,e){this.contextManager.toggleView(t,e)},t.prototype.toggleViewVisibility=function(t,e){this.contextManager.toggleViewVisibility(t,e)},t.prototype.updateViewCql=function(t,e){this.contextManager.updateViewCql(t,e)},t.$inject=["$scope","stealth.context.manager.Manager"],t}();e.CategoryController=a},function(t,e){t.exports='<div>\n    <div ng-if="$ctrl.workspaces | lodash:\'isEmpty\'" class="categoryGrouping">\n        <i>None</i>\n    </div>\n    <div ng-repeat="workspace in $ctrl.workspaces | lodash:\'keys\' | orderBy track by workspace" class="categoryGrouping">\n        <div class="categoryCell clickable ellipsis" ng-click="$ctrl.toggleWorkspace(workspace)">\n            <i class="fa fa-fw"\n               ng-class="{\'fa-caret-down\': $ctrl.workspaces[workspace].isExpanded, \'fa-caret-right\': !$ctrl.workspaces[workspace].isExpanded}">\n            </i>\n            <b>{{::workspace}}</b>\n        </div>\n        <div ng-repeat="view in $ctrl.workspaces[workspace].views track by view.id" class="categoryGrouping flex-row"\n             ng-if="$ctrl.workspaces[workspace].isExpanded">\n            <div class="flex-row ellipsis" ng-style="::$ctrl.getTitleStyle(view.dataSourceId)">\n                <div class="legendIconContainer cropIcon">\n                    <img ng-src="{{::$ctrl.getLegendUrl(view.dataSourceId)}}"\n                         ng-if="::$ctrl.getViewQueryable(view.dataSourceId)"/>\n                </div>\n                <st-toggle-map-layer visible="view.displayStatus.isOnMap"\n                                     loading="view.displayStatus.isLoading"\n                                     toggle="$ctrl.toggleView(view.workspaceId, view.id)"\n                ></st-toggle-map-layer>\n                <div class="ellipsis flex-1" ng-class="{\'layerNotVisible\' : !view.displayStatus.toggledOn}"\n                     ccri-angular-utils-tooltip-overflow\n                     uib-tooltip="{{::view.name}}"\n                     tooltip-enable="false"\n                     tooltip-class="wrap"\n                     tooltip-placement="bottom-left"\n                     tooltip-animation="true"\n                     tooltip-popup-delay="900">\n                    {{::view.name}}\n                </div>\n            </div>\n            <div class="flex-1" style="margin-left:4px;" ng-if="::$ctrl.getViewQueryable(view.dataSourceId)">\n                <ccri-angular-utils-typeahead\n                    ng-if="::!$ctrl.getViewTextSearch(view.dataSourceId)"\n                    ng-model="view.options.cql.value"\n                    memory-num="5"\n                    localstorage-prefix="{{::view.name}}.cql"\n                    placeholder="Enter CQL filter"\n                    typeahead-editable="true"\n                    ccri-angular-utils-change="$ctrl.updateViewCql(view.workspaceId, view.id)"\n                    ccri-angular-utils-change-delay="1000"\n                ></ccri-angular-utils-typeahead>\n                <ccri-angular-utils-typeahead\n                    ng-if="::$ctrl.getViewTextSearch(view.dataSourceId)"\n                    ng-model="view.options.cql.freeTextFilter"\n                    memory-num="5"\n                    localstorage-prefix="{{::view.name}}.cql"\n                    placeholder="Enter search term(s)"\n                    typeahead-editable="true"\n                    ccri-angular-utils-change="$ctrl.updateViewCql(view.workspaceId, view.id)"\n                    ccri-angular-utils-change-delay="1000"\n                ></ccri-angular-utils-typeahead>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2088),o=n(2089);e.default=r.module("stealth.context.base").directive("stContextBaseSelector",[function(){return{restrict:"E",template:o,scope:{},controller:i.BaseSelectorController,controllerAs:"$ctrl",bindToController:!0}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=n(566),o=function(){function t(t,e){var n=this;this.$scope=t,this.contextManager=e,this.stateManager=r.StateManager.getInstance(),this.views=[],this.status={isOpen:!1};var o=this.stateManager.getObservable(i.CONTEXT_PATH).subscribe({next:function(t){n.onStateUpdate(t)}});t.$on("$destroy",function(){o.unsubscribe()})}return t.prototype.onStateUpdate=function(t){var e=this;this.$scope.$evalAsync(function(){e.views=t.workspaces.get("Base").views.toList().sortBy(function(t){return t.name}).toJS()})},t.prototype.toggleView=function(t){this.contextManager.toggleView("Base",t)},t.$inject=["$scope","stealth.context.manager.Manager"],t}();e.BaseSelectorController=o},function(t,e){t.exports='<div uib-dropdown auto-close="outsideClick" is-open="$ctrl.status.isOpen">\n    <div uib-dropdown-toggle class="btn action-btn bar-btn bar-color2"\n        uib-tooltip="Base Map" tooltip-class="nowrap"\n        tooltip-placement="bottom-right" tooltip-animation="true"\n        tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n        <i class="fa fa-globe fa-lg"></i>\n    </div>\n    <ul uib-dropdown-menu class="dropdown-menu-left bar-dropdown" role="menu">\n        <li ng-repeat="view in $ctrl.views track by view.id">\n            <a href="" ng-click="$ctrl.toggleView(view.id); $ctrl.status.isOpen = false;">\n                <i class="fa fa-fw"\n                   ng-class="{\'fa-check\': view.displayStatus.isOnMap}"\n                   style="color: white;"></i>\n                {{::view.name}}\n            </a>\n        </li>\n    </ul>\n</div>\n'},,,,,,,,,,function(t,e,n){"use strict";t.exports=Math.log10||function(t){return Math.log(t)*Math.LOG10E}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2102),o=n(2110),a=n(568),s=n(2121),l=n(2123),c=n(2127),u=n(568);e.configuration=u.configuration,r.module("stealth.query-edit",["ccri.angular-utils",i.default,o.default]).service("stealth.query-edit.configuration",a.configuration).directive("stQueryDetailsDisplay",s.factory).directive("stDynamicOptions",l.factory).directive("stDynamicOptionsLegacy",c.factory)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2103),o=n(2104),a=n(2106),s=n(2108);e.default=r.module("stealth.query-edit.components").factory("stealth.query-edit.HighlightOnHover",i.factory).directive("stQueryEditKeyDisplay",o.factory).directive("stQueryEditSourceTimeDisplay",a.factory).directive("stQueryEditAddCqlDisplay",s.factory).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(4),o=n(150),a=function(){return function(t,e){this.features=t,this.highlightLayer=e,this.highlightBounds=function(){i(this.highlightFeatures,this.highlightLayer.addFeature)},this.unhighlightBounds=function(){i(this.highlightFeatures,this.highlightLayer.removeFeature)},this.highlightFeatures=i(t,function(t){if("LineString"===t.getGeometry().getType()){var e=t.clone(),n=e.getGeometry(),a=n.getCoordinates();return a=o(i(a,function(t,e,n){if(n.length===e+1)return[t];var i=r.distanceVincenty([t,n[e+1]]),o=r.vincentyInitialBearing([t,n[e+1]]);return Geo.getVincentyPathDirect(t,o,i)})),n.setCoordinates(a),e}return t})}}();function s(t){return r=t,a}e.HighlightOnHover=a,s.$inject=["ol3Geodetics"],e.factory=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2105);e.factory=function(){return{restrict:"E",replace:!0,scope:{key:"="},template:r}}},function(t,e){t.exports='<span class="property-label">\n    <div class="ellipsis" uib-tooltip="{{::key | attributeLabel}}"\n        tooltip-enable="false" tooltip-placement="top-left"\n        tooltip-animation="false" tooltip-popup-delay="500"\n        ccri-angular-utils-tooltip-overflow="watch">\n        {{::key | attributeLabel}}\n    </div>\n</span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),i=n(2),o=n(50),a=n(2107);function s(t){return{restrict:"E",replace:!0,scope:{editMode:"=",display:"=?",timeBounds:"=?",formError:"=?"},template:a,controller:["$scope",function(e){var n,a,s=e.$on("$destroy",function(){s(),s=null,n=a=l=null,e.editMode=e.display=e.timeBounds=e.formError=e.errorStart=e.errorEnd=e.errorStartMsg=e.errorEndMsg=e.validateTimeRange=e=null}),l=i(e.display,"timeBounds.maxTimeDuration");e.formError=e.errorStart=e.errorEnd=!1,e.errorStartMsg=e.errorEndMsg=null,e.validateTimeRange=function(){if(n=i(e.timeBounds,"start"),a=i(e.timeBounds,"end"),e.formError=e.errorStart=e.errorEnd=!1,e.errorStartMsg=e.errorEndMsg=null,n&&r.isMoment(n)){if(!n.isValid())return e.formError=e.errorStart=!0,void(e.errorStartMsg="Start time is not valid");if(a&&r.isMoment(a)){if(!a.isValid())return e.formError=e.errorEnd=!0,void(e.errorEndMsg="End time is not valid");var s=a.diff(n);if(s<1)return e.formError=e.errorStart=e.errorEnd=!0,void(e.errorStartMsg=e.errorEndMsg="Start time is not before the end time");if(o(l)&&s>l)return e.formError=e.errorStart=e.errorEnd=!0,void(e.errorStartMsg=e.errorEndMsg="Range must be less than "+t("millisToDHMS")(l,!0))}else e.formError=e.errorEnd=!0,e.errorEndMsg="End time is required."}else e.formError=e.errorStart=!0,e.errorStartMsg="Start time is required."}}]}}s.$inject=["$filter"],e.factory=s},function(t,e){t.exports='<div class="sourceTimeDisplay">\n    <div ng-if="!editMode" class="property-group" ng-class="{\'ng-hide\': !display.source}">\n        <span class="property-label">Source</span>\n        <span class="property-value">{{::display.source}}</span>\n    </div>\n    <div ng-if="editMode" class="property-group" ng-class="{\'ng-hide\': !display.source}">\n        <span class="property-label">Source</span>\n        <span class="property-value sourceDisplay colSpanThree">{{::display.source}}</span>\n        <span class="property-value fauxColumn"></span>\n        <span class="property-value fauxColumn"></span>\n    </div>\n    <div ng-if="!editMode" class="property-group" ng-class="{\'ng-hide\': !display.timeBounds.start}">\n        <span class="property-label">Start</span>\n        <span class="property-value">\n            <st-datetime date="::display.timeBounds.start"></st-datetime>\n        </span>\n    </div>\n    <div ng-if="editMode" class="property-group" ng-class="{\'ng-hide\': !timeBounds.start}">\n        <span class="property-label">Start</span>\n        <span class="property-value colSpanThree"\n            ng-class="{\'formError\': errorStart}"\n            uib-tooltip="{{ errorStartMsg }}" tooltip-enable="errorStart"\n            tooltip-append-to-body="true" tooltip-placement="right" tooltip-popup-delay="500">\n            <input name="start" class="form-control input-xs"\n                placeholder="Enter start time"\n                ccri-angular-utils-select-text-on-focus\n                ng-model="timeBounds.start"\n                ng-change="validateTimeRange()"\n                ccri-angular-utils-datetimepicker\n                ccri-angular-utils-utc-moment-format="YYYY-MM-DD HH:mm:ss">\n        </span>\n        <span class="property-value fauxColumn"></span>\n        <span class="property-value fauxColumn"></span>\n    </div>\n    <div ng-if="!editMode" class="property-group" ng-class="{\'ng-hide\': !display.timeBounds.end}">\n        <span class="property-label">End</span>\n        <span class="property-value">\n            <st-datetime date="::display.timeBounds.end"></st-datetime>\n        </span>\n    </div>\n    <div ng-if="editMode" class="property-group" ng-class="{\'ng-hide\': !timeBounds.end}">\n        <span class="property-label">End</span>\n        <span class="property-value colSpanThree"\n            ng-class="{\'formError\': errorEnd}"\n            uib-tooltip="{{ errorEndMsg }}" tooltip-enable="errorEnd"\n            tooltip-append-to-body="true" tooltip-placement="right" tooltip-popup-delay="500">\n            <input name="end" class="form-control input-xs"\n                placeholder="Enter end time"\n                ccri-angular-utils-select-text-on-focus\n                ng-model="timeBounds.end"\n                ng-change="validateTimeRange()"\n                ccri-angular-utils-datetimepicker\n                ccri-angular-utils-utc-moment-format="YYYY-MM-DD HH:mm:ss">\n        </span>\n        <span class="property-value fauxColumn"></span>\n        <span class="property-value fauxColumn"></span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2109);e.factory=function(){return{restrict:"E",replace:!0,scope:{editMode:"=",cql:"=?",cqlBuilder:"=?"},template:r}}},function(t,e){t.exports='<div class="additionalCql">\n    <div ng-if="editMode" class="property-group">\n        <span class="property-label">Add\'l CQL</span>\n        <span class="property-value colSpanThree">\n            <input class="form-control input-xs"\n               placeholder="Enter any additional CQL to apply"\n               ng-change="cqlBuilder.build()"\n               ccri-angular-utils-select-text-on-focus\n               ng-model="cqlBuilder.params.additionalCql">\n        </span>\n        <span class="property-value fauxColumn"></span>\n        <span class="property-value fauxColumn"></span>\n    </div>\n    <div ng-if="!editMode" class="property-group" ng-class="{\'ng-hide\': !cql}">\n        <span class="property-label">Add\'l CQL</span>\n        <span class="property-value">{{::cql}}</span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2111),o=n(2113),a=n(2115),s=n(2117),l=n(2119);e.default=r.module("stealth.query-edit.fieldTypes").directive("stQueryEditBoolean",i.editFactory).directive("stQueryEditDatetime",o.editFactory).directive("stQueryEditEnum",a.editFactory).directive("stQueryEditNumber",s.editFactory).directive("stQueryEditString",l.editFactory).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2112);e.editFactory=function(){return{restrict:"E",replace:!0,scope:{editMode:"=",params:"=?",cqlBuilder:"=?",twoColTable:"=?"},template:r}}},function(t,e){t.exports='<div class="booleanEdit">\n    <div ng-if="!editMode" class="property-group"\n        ng-repeat="(field, value) in params">\n        <st-query-edit-key-display key="field"></st-query-edit-key-display>\n        <span class="property-value" ng-if="value === \' = true\'">True</span>\n        <span class="property-value" ng-if="value === \' = false\'">False</span>\n    </div>\n    <div ng-if="editMode && (!twoColTable || $even)" class="property-group"\n        ng-repeat="field in cqlBuilder.params.bools | lodash:\'keys\' as booleanKeys">\n        <st-query-edit-key-display key="booleanKeys[$index]"></st-query-edit-key-display>\n        <span class="property-value" ng-class="{\'colSpanThree\': !twoColTable}">\n            <ccri-angular-utils-select\n                ng-model="cqlBuilder.params.bools[booleanKeys[$index]]"\n                ng-change="cqlBuilder.build()"\n                from-list="cqlBuilder.booleanOptions"\n                label-fn="cqlBuilder.booleanLabelFn">\n            </ccri-angular-utils-select>\n        </span>\n        <st-query-edit-key-display ng-if="twoColTable" key="booleanKeys[$index + 1]"></st-query-edit-key-display>\n        <span ng-if="twoColTable" class="property-value">\n            <ccri-angular-utils-select\n                ng-class="{\'ng-hide\': !booleanKeys[$index + 1]}"\n                ng-model="cqlBuilder.params.bools[booleanKeys[$index + 1]]"\n                ng-change="cqlBuilder.build()"\n                from-list="cqlBuilder.booleanOptions"\n                label-fn="cqlBuilder.booleanLabelFn">\n            </ccri-angular-utils-select>\n        </span>\n        <span ng-if="!twoColTable" class="property-value fauxColumn"></span>\n        <span ng-if="!twoColTable" class="property-value fauxColumn"></span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2114);e.editFactory=function(){return{restrict:"E",replace:!0,scope:{editMode:"=",params:"=?",cqlBuilder:"=?"},template:r}}},function(t,e){t.exports='<div class="datetimeEdit">\n    <div ng-if="!editMode" class="property-group"\n        ng-repeat="(field, value) in params">\n        <st-query-edit-key-display key="field"></st-query-edit-key-display>\n        <span class="property-value">\n            <span ng-class="{\'ng-hide\': !value.min}">\n                &nbsp;&ge;&nbsp;<st-datetime date="::value.min"></st-datetime>\n            </span>\n            <span ng-class="{\'ng-hide\': !(value.min && value.max)}"><br></span>\n            <span ng-class="{\'ng-hide\': !value.max}">\n                &nbsp;&le;&nbsp;<st-datetime date="::value.max"></st-datetime>\n            </span>\n        </span>\n    </div>\n    <div ng-if="editMode" class="property-group"\n        ng-repeat="field in cqlBuilder.params.datetimes | lodash:\'keys\'">\n        <st-query-edit-key-display key="field"></st-query-edit-key-display>\n        <span class="property-value">\n            <div class="flex-row flex-align-items-center">\n                <input field="start" class="form-control input-xs"\n                    placeholder="Enter start time"\n                    ccri-angular-utils-select-text-on-focus\n                    ng-model="cqlBuilder.params.datetimes[field].min"\n                    ng-change="cqlBuilder.build()"\n                    ccri-angular-utils-datetimepicker\n                    ccri-angular-utils-utc-moment-format="YYYY-MM-DD HH:mm">\n                <div>&nbsp;Z</div>\n            </div>\n        </span>\n        <span class="property-value mathColumn">\n            to\n        </span>\n        <span class="property-value">\n            <div class="flex-row flex-align-items-center">\n                <input field="end" class="form-control input-xs"\n                    placeholder="Enter end time"\n                    ccri-angular-utils-select-text-on-focus\n                    ng-model="cqlBuilder.params.datetimes[field].max"\n                    ng-change="cqlBuilder.build()"\n                    ccri-angular-utils-datetimepicker\n                    ccri-angular-utils-utc-moment-format="YYYY-MM-DD HH:mm">\n                <div>&nbsp;Z</div>\n            </div>\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2116);e.editFactory=function(){return{restrict:"E",replace:!0,scope:{editMode:"=",params:"=?",cqlBuilder:"=?",tagList:"=?"},template:r}}},function(t,e){t.exports='<div class="enumEdit">\n    <div ng-if="!editMode" class="property-group"\n        ng-repeat="(field, value) in params">\n        <st-query-edit-key-display key="field"></st-query-edit-key-display>\n        <span class="property-value">\n            <span ng-repeat="val in value.selected">\n                {{::val}}&nbsp;\n            </span>\n        </span>\n    </div>\n    <div ng-if="editMode" class="property-group"\n        ng-repeat="field in cqlBuilder.params.enums | lodash:\'keys\'">\n        <st-query-edit-key-display key="field"></st-query-edit-key-display>\n        <span ng-if="!tagList" class="property-value colSpanThree">\n            <span class="enumChoice" ng-repeat="choice in ::cqlBuilder.params.enums[field].choices"\n                ng-click="cqlBuilder.updateEnumSelection(cqlBuilder.params.enums[field].selected, choice)">\n                <i class="fa" ng-class="(cqlBuilder.params.enums[field].selected | lodash:\'includes\':choice) ? \'fa-check-square-o\' : \'fa-square-o\'"></i>\n                    {{::choice}}\n            </span>\n        </span>\n        <span ng-if="tagList" class="property-value colSpanThree">\n            <ccri-angular-utils-tag-list\n                items="cqlBuilder.params.enums[field].selected"\n                typeahead-options="cqlBuilder.params.enums[field].choices"\n                on-item-change="cqlBuilder.build()">\n            </ccri-angular-utils-tag-list>\n        </span>\n        <span class="property-value fauxColumn"></span>\n        <span class="property-value fauxColumn"></span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2118);e.editFactory=function(){return{restrict:"E",replace:!0,scope:{editMode:"=",params:"=?",cqlBuilder:"=?"},template:r}}},function(t,e){t.exports='<div class="numberEdit">\n    <div ng-if="!editMode" class="property-group"\n        ng-repeat="(field, value) in params">\n        <st-query-edit-key-display key="field"></st-query-edit-key-display>\n        <span class="property-value" ng-if="value.min && value.max">\n            {{::value.min | numberTrim}}&nbsp;&le;&nbsp;{{::value.unitLabel || \'value\'}}&nbsp;&le;&nbsp;{{::value.max | numberTrim}}\n        </span>\n        <span class="property-value" ng-if="!(value.min && value.max)">\n            <span ng-class="{\'ng-hide\': value.max}">\n                &nbsp;&ge;&nbsp;{{::value.min | numberTrim}}&nbsp;\n            </span>\n            <span ng-class="{\'ng-hide\': value.min}">\n                &nbsp;&le;&nbsp;{{::value.max | numberTrim}}&nbsp;\n            </span>\n            {{::value.unitLabel}}\n        </span>\n    </div>\n    <div ng-if="editMode" class="property-group"\n        ng-repeat="field in cqlBuilder.params.numbers | lodash:\'keys\'">\n        <st-query-edit-key-display key="field"></st-query-edit-key-display>\n        <span class="property-value">\n            <input class="form-control input-xs"\n                type="number" step="any"\n                placeholder="{{::cqlBuilder.numberMinPlaceholder}}"\n                ng-change="cqlBuilder.build()"\n                ng-model="cqlBuilder.params.numbers[field].min">\n        </span>\n        <span class="property-value mathColumn">\n            &le;&nbsp;{{::(cqlBuilder.params.numbers[field].unitLabel || \'value\')}}&nbsp;&le;\n        </span>\n        <span class="property-value">\n            <input class="form-control input-xs"\n                type="number" step="any"\n                placeholder="{{::cqlBuilder.numberMaxPlaceholder}}"\n                ng-change="cqlBuilder.build()"\n                ng-model="cqlBuilder.params.numbers[field].max">\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2120);e.editFactory=function(){return{restrict:"E",replace:!0,scope:{editMode:"=",params:"=?",cqlBuilder:"=?",twoColTable:"=?"},template:r}}},function(t,e){t.exports='<div class="stringEdit">\n    <div ng-if="!editMode" class="property-group"\n        ng-repeat="(field, value) in params">\n        <st-query-edit-key-display key="field"></st-query-edit-key-display>\n        <span class="property-value">{{::value}}</span>\n    </div>\n    <div ng-if="editMode && (!twoColTable || $even)" class="property-group"\n        ng-repeat="field in cqlBuilder.params.strings | lodash:\'keys\' as stringKeys">\n        <st-query-edit-key-display key="stringKeys[$index]"></st-query-edit-key-display>\n        <span class="property-value" ng-class="{\'colSpanThree\': !twoColTable}">\n            <input class="form-control input-xs"\n                type="text"\n                placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                ccri-angular-utils-select-text-on-focus\n                ng-change="cqlBuilder.build()"\n                ng-model="cqlBuilder.params.strings[stringKeys[$index]]">\n        </span>\n        <st-query-edit-key-display ng-if="twoColTable" key="stringKeys[$index + 1]"></st-query-edit-key-display>\n        <span ng-if="twoColTable" class="property-value">\n            <input type="text"\n                class="form-control input-xs"\n                ng-class="{\'ng-hide\': !stringKeys[$index + 1]}"\n                placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                ccri-angular-utils-select-text-on-focus\n                ng-change="cqlBuilder.build()"\n                ng-model="cqlBuilder.params.strings[stringKeys[$index + 1]]">\n        </span>\n        <span ng-if="!twoColTable" class="property-value fauxColumn"></span>\n        <span ng-if="!twoColTable" class="property-value fauxColumn"></span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),i=n(397),o=n(14),a=n(34),s=n(30),l=n(2),c=n(122),u=n(2122);function d(t,e,n){return{restrict:"E",template:u,scope:{queryDetails:"=",highlightLayer:"=?",saveEdits:"=?",register:"=?registerWith"},controller:["$scope",function(u){var d,f,p=u.$on("$destroy",function(){p(),p=null,h=f=m=null,d&&(d(),d=null),u.queryDetails=u.highlightLayer=u.saveEdits=u.register=u.filteredCqlParams=u.highlightService=u.editMode=u.hasChanged=u.editFields=u.cqlBuilder=u.save=u.cancel=u=null}),h=!0,g=function(t){i(u)||(u.queryDetails=t,u.filteredCqlParams=e.filterEmptyCqlParams(o(u.queryDetails.customCqlParams)?e.cloneCqlParams(u.queryDetails.cqlParams):s({},u.queryDetails.customCqlParams,e.cloneCqlParams(u.queryDetails.cqlParams))))},m=function(e){e?(u.editFields={timeBounds:{start:r.isMoment(l(u.queryDetails,"timeBounds.start"))?u.queryDetails.timeBounds.start.clone():void 0,end:r.isMoment(l(u.queryDetails,"timeBounds.end"))?u.queryDetails.timeBounds.end.clone():void 0},cqlParams:u.filteredCqlParams,cql:""},u.hasChanged=!1,u.formError=!1,h=!0,u.cqlBuilder=new t(u.editFields.cqlParams,function(t,e){i(u)||(h&&(f=t,h=!1),u.editFields.cql=t,u.editFields.cqlParams=e)}),u.cqlBuilder.build(),v(),u.editMode=!0):(d&&(d(),d=null),u.editMode=!1)},v=function(){d=u.$watchGroup(["editFields.cql","editFields.timeBounds.start","editFields.timeBounds.end"],function(){h||(u.hasChanged=f!==u.editFields.cql||!!r.isMoment(l(u.queryDetails,"timeBounds.start"))&&!u.queryDetails.timeBounds.start.isSame(u.editFields.timeBounds.start)||!!r.isMoment(l(u.queryDetails,"timeBounds.end"))&&!u.queryDetails.timeBounds.end.isSame(u.editFields.timeBounds.end))})};g(u.queryDetails),a(u.register)&&c(function(){u&&u.register({setInlineEdit:m,updateDisplay:g})}),u.queryDetails.geometry&&u.highlightLayer&&(u.highlightService=new n(u.queryDetails.geometry,u.highlightLayer)),u.editMode=!1,u.save=function(){u.hasChanged&&!u.formError&&u.saveEdits(u.editFields)},u.cancel=function(){m(!1)}}]}}d.$inject=["CqlFormBuilder","cqlHelper","stealth.query-edit.HighlightOnHover"],e.factory=d},function(t,e){t.exports='<div ng-class="editMode ? \'queryEditor layerManager\' : \'queryDetails\'">\n    <ng-form name="queryEditor">\n        <div class="query-properties"\n            ng-mouseenter="highlightService.highlightBounds()"\n            ccri-angular-utils-mouseleave="highlightService.unhighlightBounds()">\n            <st-query-edit-source-time-display\n                edit-mode="editMode"\n                display="queryDetails"\n                time-bounds="editFields.timeBounds"\n                form-error="formError">\n            </st-query-edit-source-time-display>\n            <st-query-edit-string\n                edit-mode="editMode"\n                params="filteredCqlParams.strings"\n                cql-builder="cqlBuilder">\n            </st-query-edit-string>\n            <st-query-edit-boolean\n                edit-mode="editMode"\n                params="filteredCqlParams.bools"\n                cql-builder="cqlBuilder">\n            </st-query-edit-boolean>\n            <st-query-edit-enum\n                edit-mode="editMode"\n                params="filteredCqlParams.enums"\n                cql-builder="cqlBuilder"\n                tag-list="true">\n            </st-query-edit-enum>\n            <st-query-edit-number\n                edit-mode="editMode"\n                params="filteredCqlParams.numbers"\n                cql-builder="cqlBuilder">\n            </st-query-edit-number>\n            <st-query-edit-datetime\n                edit-mode="editMode"\n                params="filteredCqlParams.datetimes"\n                cql-builder="cqlBuilder">\n            </st-query-edit-datetime>\n            <st-query-edit-add-cql-display\n                edit-mode="editMode"\n                cql="filteredCqlParams.additionalCql"\n                cql-builder="cqlBuilder">\n            </st-query-edit-add-cql-display>\n        </div>\n    </ng-form>\n    <div ng-if="editMode" class="editorButtons flex-row flex-justify-content-flex-end">\n        <div class="editBtns" ng-click="cancel()">\n            <i class="fa fa-fw fa-times"></i>\n            <span>&nbsp;Cancel&nbsp;</span>\n        </div>\n        <div class="editBtns saveBtn" ng-click="save()" ng-class="{\'saveBtnActive\': hasChanged}">\n            <span>&nbsp;Save&nbsp;</span>\n            <i class="fa fa-fw fa-save"></i>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(14),a=n(327),s=n(328),l=n(4),c=n(22),u=n(30),d=n(407),f=n(64),p=n(2126);function h(t,e,n,h){return{restrict:"E",template:p,scope:{selections:"=",featureTypeProperties:"=",onNameChange:"=",updateSelections:"=",saveQuerySelections:"=",saveQueryOptions:"=",hasNameBeenEdited:"=",getCqlLength:"=",cqlMaxLength:"="},controller:["$scope",function(p){var g=function(){p.manageHeight={"max-height":r.element(t).find(".primaryDisplay").height()-250+"px"}},m=r.element(e);m.on("resize",g),g();var v=p.selections.selectedSource,y=h.getCustomParameters(v.name);if(o(y)){y={strings:{},numbers:{},bools:{},datetimes:{},enums:{},additionalCql:null};var b=a(s(p.featureTypeProperties,"localType"),function(t){return l(t,"name")});c(b,function(t,e){c(t,function(t){switch(e.toLowerCase()){case"string":y.strings[t]=null;break;case"int":case"number":y.numbers[t]={};break;case"boolean":y.bools[t]="both";break;case"date-time":t!==i(p.selections,"dtgField")&&(y.datetimes[t]={})}})})}var w=l(p.featureTypeProperties,"name");y=a(u(y,p.selections.cqlParams),function(t,e){return"additionalCql"===e?t:d(t,function(t,e){return f(w,e)})}),p.cqlBuilder=new n(y,function(t,e){p.selections.cql=t,p.selections.cqlParams=e}),p.cqlBuilder.build(),p.$on("$destroy",function(){m.off("resize",g)})}]}}h.$inject=["$document","$window","CqlFormBuilder","stealth.query-edit.configuration"],e.factory=h},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}},function(t,e,n){var r=n(187);t.exports=function(t,e,n,i){return r(t,function(t,r,o){e(i,t,n(t),o)}),i}},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="queryEditor wizardStep" ng-style="manageHeight">\n        <p class="directions" ng-bind-html="::cqlBuilder.freeTextDirections"></p>\n        <div class="query-properties">\n            <st-query-edit-string\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.strings | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder"\n                two-col-table="true">\n            </st-query-edit-string>\n            <st-query-edit-boolean\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.bools | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder"\n                two-col-table="true">\n            </st-query-edit-boolean>\n            <st-query-edit-enum\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.enums | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder">\n            </st-query-edit-enum>\n            <st-query-edit-number\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.numbers | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder">\n            </st-query-edit-number>\n            <st-query-edit-datetime\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.datetimes | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder">\n            </st-query-edit-datetime>\n            <st-query-edit-add-cql-display\n                class="typeSeparator"\n                edit-mode="true"\n                cql-builder="cqlBuilder">\n            </st-query-edit-add-cql-display>\n            <div class="typeSeparator">\n                <div class="property-group finalCql">\n                    <span class="property-label">Final CQL</span>\n                    <span class="property-value colSpanThree">\n                        <div ng-init="showFullBounds = false"\n                            ng-style="{height: (showFullBounds) ? \'auto\' : \'50px\'}"\n                            ng-click="showFullBounds = !showFullBounds">\n                            {{selections.cql}}\n                        </div>\n                    </span>\n                    <span class="property-value fauxColumn"></span>\n                    <span class="property-value fauxColumn"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <st-geo-store-name-form\n        preselected-name="selections.storeName"\n        on-change="onNameChange"\n        wizard-form="wizardForm"\n    ></st-geo-store-name-form>\n    <st-geo-save-query-form\n        preselected-selections="saveQuerySelections"\n        on-change="updateSelections"\n        options="saveQueryOptions"\n        name-edited="hasNameBeenEdited"\n    ></st-geo-save-query-form>\n    <st-wiz-cql-length\n        name="cqlTotalLength"\n        ng-model="getCqlLength"\n        ng-model-options="{getterSetter:true}"\n        cql-maxlength="{{cqlMaxLength}}"\n    ></st-wiz-cql-length>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(14),a=n(327),s=n(328),l=n(4),c=n(22),u=n(30),d=n(407),f=n(64),p=n(2128);function h(t,e,n,h){return{restrict:"E",template:p,scope:{query:"=",cqlTotalLength:"=",cqlMaxLength:"="},controller:["$scope",function(p){var g=function(){p.manageHeight={"max-height":r.element(t).find(".primaryDisplay").height()-250+"px"}},m=r.element(e);m.on("resize",g),g();var v=h.getCustomParameters(i(p.query,"layerData.currentLayer.Name"));if(o(v)){v={strings:{},numbers:{},bools:{},datetimes:{},enums:{},additionalCql:null};var y=a(s(p.query.featureTypeData.featureTypes[0].properties,"localType"),function(t,e){return l(t,"name")});c(y,function(t,e){c(t,function(t){switch(e.toLowerCase()){case"string":v.strings[t]=null;break;case"int":case"number":v.numbers[t]={};break;case"boolean":v.bools[t]="both";break;case"date-time":t!==i(p.query,"params.dtgField.name")&&(v.datetimes[t]={})}})})}var b=l(p.query.featureTypeData.featureTypes[0].properties,"name");v=a(u(v,p.query.params.cqlParams),function(t,e){return"additionalCql"===e?t:d(t,function(t,e){return f(b,e)})}),p.cqlBuilder=new n(v,function(t,e){p.query.params.cql=t,p.query.params.cqlParams=e}),p.cqlBuilder.build(),p.$on("$destroy",function(){m.off("resize",g)})}]}}h.$inject=["$document","$window","CqlFormBuilder","stealth.query-edit.configuration"],e.factory=h},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="queryEditor wizardStep" ng-style="manageHeight">\n        <p class="directions" ng-bind-html="::cqlBuilder.freeTextDirections"></p>\n        <div class="query-properties">\n            <st-query-edit-string\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.strings | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder"\n                two-col-table="true">\n            </st-query-edit-string>\n            <st-query-edit-boolean\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.bools | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder"\n                two-col-table="true">\n            </st-query-edit-boolean>\n            <st-query-edit-enum\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.enums | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder">\n            </st-query-edit-enum>\n            <st-query-edit-number\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.numbers | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder">\n            </st-query-edit-number>\n            <st-query-edit-datetime\n                ng-class="{\'typeSeparator\': !(cqlBuilder.params.datetimes | lodash:\'isEmpty\')}"\n                edit-mode="true"\n                cql-builder="cqlBuilder">\n            </st-query-edit-datetime>\n            <st-query-edit-add-cql-display\n                class="typeSeparator"\n                edit-mode="true"\n                cql-builder="cqlBuilder">\n            </st-query-edit-add-cql-display>\n            <div class="typeSeparator">\n                <div class="property-group finalCql">\n                    <span class="property-label">Final CQL</span>\n                    <span class="property-value colSpanThree">\n                        <div ng-init="showFullBounds = false"\n                            ng-style="{height: (showFullBounds) ? \'auto\' : \'50px\'}"\n                            ng-click="showFullBounds = !showFullBounds">\n                            {{query.params.cql}}\n                        </div>\n                    </span>\n                    <span class="property-value fauxColumn"></span>\n                    <span class="property-value fauxColumn"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n    <st-tl-query-name query="query" wizard-form="wizardForm"></st-tl-query-name>\n    <st-tl-save-query query="query"></st-tl-save-query>\n    <st-wiz-cql-length name="cqlTotalLength" ng-model="cqlTotalLength" ng-model-options="{getterSetter:true}"\n        cql-maxlength="{{cqlMaxLength}}"\n    ></st-wiz-cql-length>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2130),i=n(2134);angular.module("stealth.air",[r.default,i.default,"stealth.air.edit","stealth.air.geo.ol3.layers","stealth.air.lookup","stealth.air.profile","stealth.air.wizard"])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2131),o=n(2132),a=n(2133),s=n(901),l=n(902);e.default=r.module("stealth.air.list",[]).factory("stealth.air.list.AirPanel",i.factory).factory("stealth.air.list.AirCoordinator",a.factory).directive("stealthAirListList",[function(){return{restrict:"E",template:s,controller:o.AirListController}}]).directive("stealthAirListContents",[function(){return{restrict:"E",scope:{record:"="},template:l}}]).name},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(405);function o(t,e,n,r,i,o,s,l,c,u,d,f){return function(p,h,g,m,v,y,b,w){return new a(t,e,n,r,i,o,s,l,c,u,d,f,p,h,g,m,v,y,b,w)}}o.$inject=["$log","$q","$rootScope","ccri.angular-utils.WidgetDef","cqlHelper","ol3Map","stealth.live.select.SelectService","sidebarManager","sidebarButtons","stealth.core.geo.ol3.format.GeoJson","stealth.live.list.ExtentFilterState","wfs"],e.factory=o;var a=function(t){function e(e,n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,y,b,w){return t.call(this,e,n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,y,b,w)||this}return r(e,t),Object.defineProperty(e.prototype,"widgetDefTag",{get:function(){return"stealth-air-list-list"},enumerable:!0,configurable:!0}),e}(i.Panel);e.AirPanel=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,r,i,o,a,s){return t.call(this,e,n,r,i,o,a,s)||this}return r(e,t),Object.defineProperty(e.prototype,"contentWidgetTag",{get:function(){return"stealth-air-list-contents"},enumerable:!0,configurable:!0}),e.$inject=["$scope","$log","ol3Map","ccri.popup.manager","ccri.angular-utils.WidgetDef","sidebarButtons","stealth.core.geo.ol3.overlays.Vector"],e}(n(405).EntityListController);e.AirListController=i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(6),a=n(405);function s(t,e,n,r,i,o,a){return function(s,c,u,d){return new l(t,e,n,r,i,o,a,s,c,u,d)}}s.$inject=["$q","$rootScope","mapFollowManager","ccri.popup.manager","wfs","stealth.core.geo.ol3.format.GeoJson","ccri.angular-utils.WidgetDef"],e.factory=s;var l=function(t){function e(e,n,r,i,o,a,s,l,c,u,d){return t.call(this,e,n,r,i,o,a,s,l,c,u,d)||this}return r(e,t),e.prototype.altitudeProfileTrackRemoved=function(e){var n=this.getRecordState(e);n.altitudeProfile.open=!1,n.altitudeProfile.visible=!1,t.prototype.checkHighlight.call(this,e),i.isEmpty(n.popups)&&delete this._recordStates[e[this._idField]]},e.prototype.getRecordState=function(t,e){var n=t[this._idField];if(i.isUndefined(this._recordStates[n])){var r=t.lat?t.lat:e?e[1]:0,a=t.lon?t.lon:e?e[0]:0;this._recordStates[n]={record:t,popups:[],highlightFeature:new o.Feature(new o.geom.Point([a,r])),displayState:{highlight:{"border-style":"solid","border-width":"2px 0px","border-color":"white"},trackEnded:!1},followCapability:this.getFollowCapability(t[this._idField]),altitudeProfile:{open:!1,visible:!1}}}return this._recordStates[n]},e.prototype.removePopup=function(e,n){this.getRecordState(e).altitudeProfile.open||t.prototype.removePopup.call(this,e,n)},e.prototype.checkHighlight=function(e){var n=this.getRecordState(e);i.any(i.pluck(n.popups,"tabFocused")&&!n.followCapability.following&&!n.altitudeProfile.visible)||t.prototype.checkHighlight.call(this,e)},Object.defineProperty(e.prototype,"buttonIconName",{get:function(){return"fa-plane"},enumerable:!0,configurable:!0}),e}(a.ListPopupCoordinator);e.AirCoordinator=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(549);var i=n(2135),o=n(2136),a=n(2137);e.default=r.module("stealth.air.popup",["ccri.buttons"]).component("stealthAirPopupEvidenceIndicator",{template:a,bindings:i.evidenceIndicatorBindings,controller:o.EvidenceIndicatorController}).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.evidenceIndicatorBindings={value:"<"}},function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),o=function(){function t(){}return t.prototype.$onInit=function(){this.iconClassMap=r({EXPLICIT:"fa-circle",INFERRED:"fa-adjust fa-rotate-270",LOOKUP:"fa-circle-o"},i.config.get("air.evidenceTypeIconMap"))},t}();e.EvidenceIndicatorController=o},function(t,e){t.exports='<ccri-buttons-indicator\n    ng-if="::$ctrl.value"\n    value="$ctrl.value"\n    icon-class-map="::$ctrl.iconClassMap"\n    default-icon-class="fa-user"\n></ccri-buttons-indicator>\n'},function(t,e,n){var r=n(915),i=n(2139);angular.module("stealth.air.edit",["stealth.core.geo.ows"]).directive("stAirfieldEditor",[function(){return{restrict:"E",template:i,controller:"airfieldEditorController"}}]).controller("airfieldEditorController",["$scope","$http","$uibModal","$q","toastr","sidebarManager","getClassificationClass","stealth.air.skylightApi.service",function(t,e,n,i,o,a,s,l){if(!_.get(t,"init.done")){var c=t.$on("$destroy",function(){c(),c=null,f(),f=null,u=d=null,t.init=t.countries=t.classifications=t.newAlternativeNameObj=t.editorForm=null,t.feature=t.properties=null,t.originalAirfield=t.editedAirfield=null,t.originalAob=t.editedAob=null,t.originalAltNames=t.editedAltNames=null,t.originalNotes=t.editedNotes=null,t.record=t.source=t.opts=null,t.getClassificationClass=t.save=t.delete=t.revert=t.addToAob=t.removeFromAob=null,t.addToNotes=t.removeFromNotes=t.searchCountries=null,t=null}),u=ccriCoreconfig.config.get("skylight.apiUrl").trim().replace(/\/$/,""),d=t.record.skylightId;t.showErrors=!1,t.dataLoaded=!1,t.getClassificationClass=s,t.save=function(){if(t.editorForm.$invalid)return void(t.showErrors=!0);var n=function(){var e={};return _.forEach([["nationality.id","countryId"],["iata.iata","iata"],["affiliation","affiliation"],["icao.icao","icao"],["boundary.radius.meters","boundaryRadius"],["affiliationAmp","affiliationAmp"],["boundary.height.meters","boundaryHeight"],["elevation.meters","elevation"]],function(n){var r=_.get(t.originalAirfield,n[0]),i=_.get(t.editedAirfield,n[0]);r!==i&&(e[n[1]]=""===i||_.isUndefined(i)?null:i)}),e}(),r=g(t.originalAltNames,t.editedAltNames,[["classification","classification"],["value","value"]]),i=g(t.originalAob,t.editedAob,[["classification","classification"],["equipmentType.id","equipmentTypeId"],["count","count"]]),a=g(t.originalNotes,t.editedNotes,[["classification","classification"],["note","note"]]),s=!1,l={Airfield:{id:t.originalAirfield.id},change:{effectiveDate:moment.utc().format("YYYY-MM-DD"),classification:_.last(t.classifications),type:"Airfield",action:"modify",sources:{legacy:!1,sourceUrns:[{type:"nonstandard",value:"thresher"}]}}};_.isEmpty(n)||(l.Airfield=_.merge(l.Airfield,n),s=!0);_.isEmpty(r)||(l.Airfield.alternativeNames=r,s=!0);_.isEmpty(i)||(l.Airfield.equipmentCounts=i,s=!0);_.isEmpty(a)||(l.Airfield.notes=a,s=!0);s&&(t.saving=!0,e.put(u+"/editor",l).then(function(t){m([t.data.searchResult]),v(t.data.related),o.success("Airfield saved")},function(){o.error("Airfield save failed")}).finally(function(){t.saving=!1}))},t.delete=function(){var i=t.$new();i.objectType="Airfield",n.open({size:"sm",scope:i,template:r,controller:["$scope",function(n){n.delete=function(){e.put(u+"/editor",{Airfield:{id:d},change:{effectiveDate:moment().format("YYYY-MM-DD"),classification:_.last(t.classifications),action:"delete",type:i.objectType}}).then(function(){o.success(i.objectType+" deleted"),t.opts.mapLayer.updateRequestParams(),a.removeButton(t.opts.sidebarButtonId)},function(){o.error("Failed to delete "+i.objectType)})}}],backdrop:"static",backdropClass:"wizardMask"})},t.revert=function(){t.editedAirfield=_.cloneDeep(t.originalAirfield),t.editedAltNames=_.cloneDeep(t.originalAltNames),t.editedAob=_.cloneDeep(t.originalAob),t.editedNotes=_.cloneDeep(t.originalNotes),t.showErrors=!1},t.addToAob=function(){t.editedAob.unshift({count:0,equipmentType:void 0,classification:t.classifications[0]})},t.removeFromAob=function(e){_.pullAt(t.editedAob,e)},t.addToNotes=function(){t.editedNotes.unshift({classification:t.classifications[0],note:""})},t.removeFromNotes=function(e){_.pullAt(t.editedNotes,e)},t.skylightApi=l;var f=t.$watch("editorForm.$valid",function(e){e&&(t.showErrors=!1)}),p={airfield:e.get(u+"/query?type=Airfield&id="+d),related:e.get(u+"/query/airfield/"+d+"/related")};i.all(p).then(function(e){m(_.get(e,"airfield.data.Airfield")),v(_.get(e,"related.data")),t.newAlternativeNameObj={value:"",classification:_.get(t.originalAirfield,"classification",_.last(t.classifications))},t.dataLoaded=!0});var h=function(t){return!_.isEmpty(t)};t.classifications=ccriUtils.defaultIf(h,ccriCoreconfig.config.get("air.classifications"),ccriUtils.defaultIf(h,ccriCoreconfig.config.get("classification.options"),["UNCLASSIFIED"])),t.init={done:!0}}function g(t,e,n){var r=[];return _.forEach(e,function(e){var i={};if(_.has(e,"id")){var o=_.find(t,{id:e.id});_.forEach(n,function(t){var n=_.get(o,t[0]),r=_.get(e,t[0]);n!==r&&(i[t[1]]=r)}),_.isEmpty(i)||(i.id=e.id,i.action="modify",r.push(i))}else _.forEach(n,function(t){var n=_.get(e,t[0]);i[t[1]]=n}),i.action="add",r.push(i)}),_.forEach(t,function(t){_.find(e,{id:t.id})||r.push({action:"delete",id:t.id})}),r}function m(n){if(_.isArray(n)&&!_.isEmpty(n)&&(t.originalAirfield=n[0].entity,t.originalAirfield.pnab=n[0].otherProps.pnab,t.editedAirfield=_.cloneDeep(t.originalAirfield),_.has(t.editedAirfield,"countryId"))){var r=t.editedAirfield.countryId;e.get(u+"/query/country/"+r).then(function(e){e.data&&(t.originalAirfield.nationality=e.data,t.editedAirfield.nationality=e.data)})}}function v(e){if(_.isArray(e)&&!_.isEmpty(e)){_.forEach([["Aob","equipmentcounts"],["Notes","notes"],["AltNames","alternativenames"]],function(n){var r=_.find(e,function(t){return t.meta.relName.toLowerCase()===n[1]});_.isUndefined(r)||(t["original"+n[0]]=r.entities,t["edited"+n[0]]=_.cloneDeep(t["original"+n[0]]))})}}}])},function(t,e){t.exports='<div class="editor airfieldEditor side-panel-content"\n        ng-form="editorForm" ng-class="{\'show-errors\': showErrors}">\n    <div ng-if="dataLoaded">\n        <div class="editorHeader flex-row">\n            <div class="editorTitle flex-1 ellipsis">{{::originalAirfield.name}}</div>\n            <div class="btn action-btn"\n                uib-tooltip="Delete" tooltip-class="nowrap"\n                tooltip-placement="left" tooltip-animation="false"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                ng-click="saving || delete()" ng-disabled="saving">\n                <i class="fa fa-lg fa-trash-o"></i>\n            </div>\n            <div class="btn action-btn"\n                uib-tooltip="Revert Changes" tooltip-class="nowrap"\n                tooltip-placement="left" tooltip-animation="false"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                ng-click="saving || revert()" ng-disabled="saving">\n                <i class="fa fa-lg fa-undo"></i>\n            </div>\n            <div class="btn action-btn"\n                uib-tooltip="Save" tooltip-class="nowrap"\n                tooltip-placement="left" tooltip-animation="false"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                ng-click="save()">\n                <i class="fa fa-lg fa-save"></i>\n            </div>\n        </div>\n        <div class="form-error">\n            Please fix the form errors below\n        </div>\n        <div class="classBanner" style="margin-bottom:10px;"\n            ng-class="::getClassificationClass(originalAirfield.classification)">\n            {{::originalAirfield.classification}}\n        </div>\n        <div class="editorReadOnly airfield-inner">\n            <label class="control-label">MIDB:</label>\n            {{::originalAirfield.wcrNumber}}&nbsp;&nbsp;&nbsp;\n            <label class="control-label">AAFIF:</label>\n            {{::originalAirfield.aafifName}}&nbsp;&nbsp;&nbsp;\n            <label class="control-label">PNAB:</label>\n            {{::originalAirfield.pnab}}\n        </div>\n        <div class="editorReadOnly airfield-inner">\n            <label class="control-label">Lat:</label>\n            {{::originalAirfield.pt.lat < 0 ? \'S\' : \'N\'}}&nbsp;{{::originalAirfield.pt.lat | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;&nbsp;&nbsp;&nbsp;\n            <label class="control-label">Lon:</label>\n            {{::originalAirfield.pt.lon < 0 ? \'W\' : \'E\'}}&nbsp;{{::originalAirfield.pt.lon | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;\n        </div>\n        <hr>\n        <div class="editorReadOnly airfield-inner" style="margin-bottom:2px;">\n            <label class="control-label">Alt Names:</label>\n            <ccri-angular-utils-tag-list\n                items="editedAltNames" prop-name="value"\n                new-obj="newAlternativeNameObj"\n                class="editor-taglist"\n            ></ccri-angular-utils-tag-list>\n        </div>\n        <table class="airfield-editor-form-table airfield-inner">\n            <tr>\n                <td><label class="control-label">Nationality:</label></td>\n                <td>\n                    <ccri-angular-utils-typeahead\n                        dropdown-max-width="100"\n                        ng-model="editedAirfield.nationality"\n                        select-clause="value as value.name for value in $parent.skylightApi.getCountrySuggestions($viewValue)"\n                    ></ccri-angular-utils-typeahead>\n                </td>\n                <td><label class="control-label">IATA:</label></td>\n                <td>\n                    <input class="form-control input-xs" ng-model="editedAirfield.iata.iata">\n                </td>\n            </tr>\n            <tr>\n                <td><label class="control-label">Affiliation:</label></td>\n                <td>\n                    <ccri-angular-utils-select ng-model="editedAirfield.affiliation"\n                            from-list="::[\'Civ\', \'Mil\', \'MilCiv\', \'Unk\']"></ccri-angular-utils-select>\n                </td>\n                <td><label class="control-label">ICAO:</label></td>\n                <td>\n                    <input class="form-control input-xs" ng-model="editedAirfield.icao.icao">\n                </td>\n            </tr>\n            <tr>\n                <td><label class="control-label">Radius (km):</label></td>\n                <td>\n                    <input type="number" step="any" class="form-control input-xs" ng-model="editedAirfield.boundary.radius.meters"\n                        st-km-to-meters-format>\n                </td>\n                <td><label class="control-label">Type:</label></td>\n                <td>\n                    <ccri-angular-utils-select ng-model="editedAirfield.affiliationAmp"\n                            from-list="::[\'International\', \'Domestic\', \'Unknown\']"></ccri-angular-utils-select>\n                </td>\n            </tr>\n            <tr>\n                <td><label class="control-label">Max Alt (ft):</label></td>\n                <td>\n                    <input type="number" step="any" class="form-control input-xs" ng-model="editedAirfield.boundary.height.meters"\n                        st-ft-to-meters-format st-round-format>\n                </td>\n                <td><label class="control-label">Elev (ft):</label></td>\n                <td>\n                    <input type="number" step="any" class="form-control input-xs" ng-model="editedAirfield.elevation.meters"\n                        st-ft-to-meters-format st-round-format>\n                </td>\n            </tr>\n        </table>\n        \x3c!--<div class="airfield-inner">\n            <label style="margin-bottom: 0">Comments:</label>\n            <textarea class="form-control input-xs" ng-model="jsonObj[\'comments\']"></textarea>\n        </div>--\x3e\n        <div style="margin-top:5px;text-align:center;">\n            <strong>Air Order of Battle</strong>\n            <div class="btn action-btn"\n                uib-tooltip="Add" tooltip-class="nowrap"\n                tooltip-placement="bottom" tooltip-animation="false"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                ng-click="addToAob()">\n                <i class="fa fa-lg fa-plus text-primary"></i>\n            </div>\n        </div>\n        <table ng-repeat="c in editedAob" class="aobItem">\n            <tr>\n                <td>\n                    <div class="pointNumColorless">{{$index + 1}}</div>\n                </td>\n                <td colspan="2" style="width:100%;">\n                    <ccri-angular-utils-typeahead\n                            ng-model="c.equipmentType" name="equipmentTypeId" required\n                            select-clause="value as value.name for value in $parent.skylightApi.getAircraftTypeSuggestions($viewValue)"\n                            typeahead-min-length="2"\n                    ></ccri-angular-utils-typeahead>\n                </td>\n            </tr>\n            <tr>\n                <td></td>\n                <td colspan="2" style="width:100%;">\n                    <ccri-angular-utils-typeahead\n                            ng-model="c.classification" name="classification" required\n                            ccri-angular-utils-typeahead-options="classification for classification in $parent.classifications"\n                    ></ccri-angular-utils-typeahead>\n                </td>\n            </tr>\n            <tr>\n                <td></td>\n                <td>\n                    <label class="control-label">Count:</label>\n                    <input class="form-control input-xs" type="number" step="1" ng-required="true"\n                            min="0" ng-model="c.count" style="width:60px;display:inline;">\n                </td>\n                <td style="text-align:right;">\n                    <ccri-angular-utils-close-btn style="padding:2px;"\n                        uib-tooltip="Delete" tooltip-class="nowrap"\n                        tooltip-placement="left" tooltip-animation="false"\n                        tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                        ng-click="removeFromAob($index)">\n                    </ccri-angular-utils-close-btn>\n                </td>\n            </tr>\n        </table>\n        <div style="margin-top:5px;text-align:center;">\n            <strong>Installation Notes</strong>\n            <div class="btn action-btn"\n                uib-tooltip="Add" tooltip-class="nowrap"\n                tooltip-placement="bottom" tooltip-animation="false"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                ng-click="addToNotes()">\n                <i class="fa fa-lg fa-plus text-primary"></i>\n            </div>\n        </div>\n        <table ng-repeat="c in editedNotes" class="aobItem">\n            <tr>\n                <td>\n                    <div class="pointNumColorless">{{$index + 1}}</div>\n                </td>\n                <td colspan="2" style="width:100%;">\n                    <ccri-angular-utils-typeahead\n                            ng-model="c.classification" name="classification" ng-required="true"\n                            ccri-angular-utils-typeahead-options="classification for classification in $parent.classifications"\n                    ></ccri-angular-utils-typeahead>\n                </td>\n            </tr>\n            <tr>\n                <td></td>\n                <td style="display: flex">\n                    <label class="control-label" style="margin-right: 3px">Note:</label>\n                    <textarea ng-model="c.note"\n                              class="form-control input-xs"\n                              style="flex: 1 1 auto; margin-bottom: 5px"\n                              ng-required="true"\n                    ></textarea>\n                </td>\n                <td style="text-align:right;">\n                    <ccri-angular-utils-close-btn style="padding:2px;"\n                        uib-tooltip="Delete" tooltip-class="nowrap"\n                        tooltip-placement="left" tooltip-animation="false"\n                        tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                        ng-click="removeFromNotes($index)">\n                    </ccri-angular-utils-close-btn>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>\n'},function(t,e,n){var r=n(2141),i=n(915),o=n(2142);angular.module("stealth.air.edit",["stealth.geoarea","ccri.area-definition"]).run(["airspaceService","stealth.geoarea.areaActions",function(t,e){e.register("Create Airspace","fa-plane",function(e){if(0!==e.length){var n=[];e.forEach(function(t){var e=t.getGeometry();switch(e.getType()){case"Polygon":n.push(e);break;case"MultiPolygon":e.getPolygons().forEach(function(t){n.push(t)});break;default:throw new Error("Expects Polygon/MultiPolygon geometries only")}});var r=new ol.geom.MultiPolygon([]);n.forEach(function(t){r.appendPolygon(t)}),t.createNew(new ol.Feature({geometry:r}))}},{onlyGeometries:["Polygon","MultiPolygon"]})}]).service("stealth.air.userRoles",[function(){this.userCanEdit=function(t){if(t){var e=t.keywordConfig.getIn(["capability","edit","role"],Immutable.Map()).toJS();return!(!_.isEmpty(e)&&_.isEmpty(_.intersection(_.keys(e),ccriCoreconfig.config.get("userRoles"))))}}}]).service("airspaceService",["$rootScope","ccri.angular-utils.WidgetDef","sidebarManager","stealth.core.geo.ol3.format.GeoJson",function(t,e,n,r){var i=new r,o=new ol.format.WKT;this.createNew=function(r){var a={geometry:o.writeFeature(r),name:"",airspaceType:null,minAltitude:null,maxAltitude:null,minSpeed:null,maxSpeed:null,headings:[{minHeading:null,maxHeading:null},{minHeading:null,maxHeading:null}],activeTimes:[{timeOfDay:{start:null,end:null},dayOfWeek:{su:!1,mo:!1,tu:!1,we:!1,th:!1,fr:!1,sa:!1},timeOfYear:{start:null,end:null}}],squawk2:[],squawk3:[],metricGroups:[{name:"affiliation",metrics:[]},{name:"nationality",metrics:[]},{name:"aircraftType",metrics:[]},{name:"originAirfield",metrics:[]},{name:"destinationAirfield",metrics:[]}],tag:null,tLastModified:null,classification:null,userLastModified:null,comments:""},s={id:null,name:a.name,classification:a.classification,userLastModified:a.userLastModified,tLastModified:a.tLastModified,minAltitude:a.minAltitude,maxAltitude:a.maxAltitude,comments:a.comments,serializedJson:JSON.stringify(a),bbox:r.getGeometry().getExtent()};r.setProperties(s);var l=i.writeFeature(r),c=t.$new();c.record=s,c.source=l,c.opts={},n.toggleButton(c.opts.sidebarButtonId=n.addButton("","fa-edit",300,new e({tag:"st-airspace-editor",scope:c,attrs:"record='record' source='source' opts='opts'"}),null,!1,function(){c.$destroy()}),!0)},this.userCanEdit=!1}]).directive("stAirspaceEditor",[function(){return{restrict:"E",template:r,controller:"airspaceEditorController"}}]).controller("airspaceEditorController",["$scope","$controller","$http","$uibModal","ol3Map","airspaceService","AirspaceSuggestions","toastr","sidebarManager","getClassificationClass","stealth.air.userRoles",function(t,e,n,r,o,a,s,l,c,u,d){if(!_.get(t,"init.done")){e("wfstEditorController",{$scope:t}),t.init.done=!1,t.jsonObj=angular.fromJson(t.originalFeature.get("serializedJson")),t.jsonObj=function(t){var e;if(t.headings.length<2)for(e=t.headings.length;e<2;e++)t.headings.push({});if(t.activeTimes.length<1)for(e=t.activeTimes.length;e<1;e++)t.activeTimes.push({});_.forEach(t.activeTimes,function(t){_.get(t,"timeOfDay.start")&&(t.timeOfDay.start+=" Z"),_.get(t,"timeOfDay.end")&&(t.timeOfDay.end+=" Z")}),t.metricGroups||(t.metricGroups=[{name:"affiliation",metrics:t.affiliationMetrics},{name:"nationality",metrics:t.nationalityMetrics},{name:"aircraftType",metrics:t.aircraftTypeMetrics},{name:"originAirfield",metrics:t.originAirfieldMetrics},{name:"destinationAirfield",metrics:t.destinationAirfieldMetrics}]);return t}(t.jsonObj),t.prevJsonObj=angular.copy(t.jsonObj),t.showErrors=!1;var f=function(t){return!_.isEmpty(t)};t.classifications=ccriUtils.defaultIf(f,ccriCoreconfig.config.get("air.classifications"),ccriUtils.defaultIf(f,ccriCoreconfig.config.get("classification.options"),["UNCLASSIFIED"]));var p=t.originalFeature.getId(),h=ccriCoreconfig.config.get("air.editorBaseUrl","").trim().replace(/\/$/,"")+"/airspaces/",g=h+p;t.isNew=!p;var m=DataSourceManager.getDataSourcesByKeyword("air.airspace").first();t.canSave=d.userCanEdit(m),t.sugTimePeriod=ccriCoreconfig.config.get("air.airspaceSuggestions.period"),t.sugTimeStart=null,t.sugTimeEnd=null,t.save=function(){if(t.editorForm.$invalid)return void(t.showErrors=!0);t.saving=!0,t.jsonObj.affiliationMetrics=t.jsonObj.metricGroups[0].metrics,t.jsonObj.nationalityMetrics=t.jsonObj.metricGroups[1].metrics,t.jsonObj.nationalityMetrics.length>0&&_.each(t.jsonObj.nationalityMetrics,function(t){_.isObject(t.name)&&(t.name=t.name.isoDigraph)});t.jsonObj.aircraftTypeMetrics=t.jsonObj.metricGroups[2].metrics,t.jsonObj.aircraftTypeMetrics.length>0&&_.each(t.jsonObj.aircraftTypeMetrics,function(t){_.isObject(t.name)&&(t.id=t.name.id,t.name=t.name.name)});t.jsonObj.originAirfieldMetrics=t.jsonObj.metricGroups[3].metrics,t.jsonObj.originAirfieldMetrics.length>0&&_.each(t.jsonObj.originAirfieldMetrics,function(t){_.isObject(t.name)&&(t.id=t.name.id,t.name=t.name.name)});t.jsonObj.destinationAirfieldMetrics=t.jsonObj.metricGroups[4].metrics,t.jsonObj.destinationAirfieldMetrics.length>0&&_.each(t.jsonObj.destinationAirfieldMetrics,function(t){_.isObject(t.name)&&(t.id=t.name.id,t.name=t.name.name)});var e=angular.copy(t.jsonObj.metricGroups);delete t.jsonObj.metricGroups;var r,i=angular.toJson(y(t.jsonObj));t.jsonObj.metricGroups=e,t.isNew?(r=n.post(h,$.param({feature:i}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).then(function(e){t.isNew=!1,p=e.data,g=h+p,_.each(o.getLayersReversed(),function(t){if("Airspaces"===t.name)return t.updateRequestParams({_ts:Date.now()}),!1})}):r=n.post(g,$.param({feature:i}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});r.then(function(){t.prevJsonObj=angular.copy(t.jsonObj),l.success("Airspace saved")},function(){l.error("Airspace save failed")}).finally(function(){t.saving=!1})},t.delete=function(){var e=t.$new();e.objectType="Airspace",r.open({size:"sm",scope:e,template:i,controller:["$scope",function(r){r.delete=function(){n.delete(g).then(function(){l.success(e.objectType+" deleted"),_.isUndefined(t.opts.mapLayer)?_.each(o.getLayersReversed(),function(t){if("Airspaces"===t.name)return t.updateRequestParams(),!1}):t.opts.mapLayer.updateRequestParams(),c.removeButton(t.opts.sidebarButtonId)},function(){l.error("Failed to delete "+e.objectType)})}}],backdrop:"static",backdropClass:"wizardMask"})},t.revert=function(){t.jsonObj=angular.copy(t.prevJsonObj),t.sugTimeStart=null,t.sugTimeEnd=null,t.showErrors=!1},t.suggest=function(){if(!t.suggestionState.enabled)return;if(t.suggestionState.pending)v.cancel(),t.sugTimeStart=null,t.sugTimeEnd=null,t.suggestionState.pending=!1;else{if(t.editorForm.$invalid)return void(t.showErrors=!0);t.sugTimeStart=moment.utc().subtract(t.sugTimePeriod.number,t.sugTimePeriod.units),t.sugTimeEnd=moment.utc(),v.fromServer(y(t.jsonObj),t.sugTimeStart,t.sugTimeEnd).then(b,w),t.suggestionState.pending=!0}},t.getClassificationClass=u,t.getSuggestionTooltip=function(){return t.suggestionState.enabled?t.suggestionState.pending?"Cancel Suggestions Request":"Get Suggestions":"Enter Name, Classification, and Type to get suggestions"},t.init.done=!0;var v=new s;t.suggestionsAllowed=!1,t.suggestionState={enabled:!0,pending:!1},v.areAllowed.then(function(e){t.suggestionsAllowed=!!e}),t.$watch("editorForm.$valid",function(e){e&&(t.showErrors=!1),t.suggestionState.enabled=!!(t.jsonObj.airspaceType&&t.jsonObj.classification&&t.jsonObj.name)}),t.squawkOctalTest=function(t){return/^[0-7]*$/.test(t)&&1!==t.length&&t.length<5}}function y(t){var e=angular.copy(t);return _.isNumber(e.minAltitude)||delete e.minAltitude,_.isNumber(e.maxAltitude)||delete e.maxAltitude,e.headings=_.filter(e.headings,function(t){return _.isNumber(t.minHeading)&&_.isNumber(t.maxHeading)}),_.forEach(e.headings,function(t){360===t.minHeading&&(t.minHeading=0),360===t.maxHeading&&(t.maxHeading=0)}),_.forEach(e.activeTimes,function(t){!t.timeOfDay||t.timeOfDay.start&&t.timeOfDay.end||delete t.timeOfDay,!t.timeOfYear||t.timeOfYear.start&&t.timeOfYear.end&&_.isNumber(t.timeOfYear.start.month)&&_.isNumber(t.timeOfYear.start.day)&&_.isNumber(t.timeOfYear.end.month)&&_.isNumber(t.timeOfYear.end.day)||delete t.timeOfYear,_.some(t.dayOfWeek)&&!_.every(t.dayOfWeek)||delete t.dayOfWeek}),e.activeTimes=_.filter(e.activeTimes,function(t){return!!t.timeOfDay||(!!t.dayOfWeek||!!t.timeOfYear)}),_.forEach(e.activeTimes,function(t){t.timeOfDay&&(t.timeOfDay.start=t.timeOfDay.start.replace(/\s*Z?$/,""),t.timeOfDay.end=t.timeOfDay.end.replace(/\s*Z?$/,""))}),e}function b(e){t.suggestionState.pending=!1,_.each(t.jsonObj.metricGroups,function(t){t.metrics.length=0}),e&&(t.jsonObj.classification=e.classification,_.forEach(t.jsonObj.metricGroups,function(t){t.metrics=_.get(e.airspace,t.name+"Metrics",[])})),t.$broadcast("suggestions:arrived")}function w(){t.suggestionState.pending=!1,t.sugTimeStart=null,t.sugTimeEnd=null}}]).service("stealth.air.edit.metricGroupDefs",["stealth.air.skylightApi.service",function(t){var e={affiliation:{label:"Affiliation",namedef:{attach_directives:[["ccri-angular-utils-typeahead-options","aff for aff in namedef.values"]],placeholder:"",values:["CIV","MIL"],useTypeahead:!0}},nationality:{label:"Nationality",namedef:{attach_directives:[["select-clause","value as value.isoDigraph + '-' + value.name for value in $parent.skylightApi.getCountrySuggestions($viewValue)"],["typeahead-append-to-body","false"]],placeholder:"",useTypeahead:!0}},aircraftType:{label:"Aircraft Type",namedef:{attach_directives:[["select-clause","value as value.name for value in $parent.skylightApi.getAircraftTypeSuggestions($viewValue)"],["typeahead-min-length","2"]],placeholder:"",useTypeahead:!0}},originAirfield:{label:"Origin Airfield",namedef:{attach_directives:[["select-clause","value as value.name for value in $parent.skylightApi.getAirfieldSuggestions($viewValue)"],["typeahead-min-length","3"]],placeholder:"",useTypeahead:!0}},destinationAirfield:{label:"Destination Airfield",namedef:{attach_directives:[["select-clause","value as value.name for value in $parent.skylightApi.getAirfieldSuggestions($viewValue)"],["typeahead-min-length","3"]],placeholder:"",useTypeahead:!0}}};return e}]).directive("stAirspaceMetric",["stealth.air.edit.metricGroupDefs",function(t){return{restrict:"E",template:o,scope:{metricGroup:"=metric"},controller:["$scope","stealth.air.skylightApi.service",function(e,n){e.skylightApi=n;var r={name:null,count:null,probability:null};e.metricGroupDef=t[e.metricGroup.name],e.unknownProbability=null,e.$watchCollection(function(){return _.pluck(e.metricGroup.metrics,"probability")},function(t){t&&0!==t.length?e.unknownProbability=100-_.sum(t):e.unknownProbability=100}),e.isExpanded=!!_.get(e,"metricGroup.metrics.length");var i=e.$on("suggestions:arrived",function(){a.length=0,e.isExpanded=!!_.get(e,"metricGroup.metrics.length"),s()});e.showingMore=!1;var o=5;e.visibleList=[];var a=[];function s(){e.showingMore=!0,l()}function l(){var t=o;e.showingMore&&(t=e.metricGroup.metrics.length),e.visibleList=e.metricGroup.metrics.slice(0,t)}l(),e.showMore=s,e.showLess=function(){e.showingMore=!1,l()},e.canShowLess=function(){var t=e.metricGroup.metrics.length,n=a.length;return t-n>o},e.addMetric=function(){var t=angular.copy(r);e.metricGroup.metrics.push(t),e.visibleList.push(t),a.push(t)},e.delMetric=function(t){var n=e.metricGroup.metrics[t];_.pull(e.visibleList,n),_.pull(a,n),_.pullAt(e.metricGroup.metrics,[t])},e.$on("$destroy",function(){i()})}]}}])},function(t,e){t.exports='<div class="editor airspaceEditor side-panel-content"\n     ng-form="editorForm" ng-class="{\'show-errors\': showErrors}">\n    <div class="editorHeader flex-row" style="margin-bottom: 6px">\n        <div class="editorTitle flex-1">\n            <input name="name" class="form-control input-xs" ng-model="jsonObj.name" placeholder="Enter Airspace Name" required>\n        </div>\n        <div class="btn action-btn" ng-class="{\'ng-hide\': isNew || !canSave}"\n             uib-tooltip="Delete" tooltip-class="nowrap"\n             tooltip-placement="top" tooltip-append-to-body="true"\n             tooltip-popup-delay="600" tooltip-animation="false"\n             ng-click="saving || delete()" ng-disabled="saving">\n            <i class="fa fa-lg fa-trash-o"></i>\n        </div>\n        <div class="btn action-btn"\n             uib-tooltip="Revert Changes" tooltip-class="nowrap"\n             tooltip-placement="top" tooltip-append-to-body="true"\n             tooltip-popup-delay="600" tooltip-animation="false"\n             ng-click="saving || revert()" ng-disabled="saving">\n            <i class="fa fa-lg fa-undo"></i>\n        </div>\n        <div class="btn action-btn"\n             ng-class="{\'ng-hide\': !canSave}"\n             uib-tooltip="Save" tooltip-class="nowrap"\n             tooltip-placement="top" tooltip-append-to-body="true"\n             tooltip-popup-delay="600" tooltip-animation="false"\n             ng-click="save()">\n            <i class="fa fa-lg fa-save"></i>\n        </div>\n        \x3c!-- Get Suggestions --\x3e\n        <div class="btn action-btn"\n             ng-class="{disabled: !suggestionState.enabled, pending: suggestionState.pending}"\n             uib-tooltip="{{getSuggestionTooltip()}}"\n             tooltip-placement="top" tooltip-append-to-body="true"\n             tooltip-popup-delay="600" tooltip-animation="false"\n             ng-click="suggest()">\n            <i class="fa fa-lg fa-lightbulb-o" style="width: 1em"></i>\n        </div>\n    </div>\n    <div class="form-error">\n        Please fix form errors\n    </div>\n    <p class="text-warning text-center" ng-class="{\'ng-hide\': canSave}">\n        Saving is disabled: Insufficient privileges\n    </p>\n    <div class="classBanner" style="margin-bottom:10px;"\n         ng-class="getClassificationClass(jsonObj.classification)">\n        {{jsonObj.classification}}\n    </div>\n\n    <div style="padding: 0 3px;">\n        <div class="flex-row flex-full editor-form-row">\n            <label class="control-label" style="flex: 0 0 85px;">Classification:</label>\n            <ccri-angular-utils-select\n                ng-model="jsonObj.classification"\n                from-list="::classifications" required\n            ></ccri-angular-utils-select>\n        </div>\n\n        <div class="flex-row flex-full editor-form-row">\n            <label class="control-label" style="flex: 0 0 85px;">Type:</label>\n            <ccri-angular-utils-select ng-model="jsonObj.airspaceType"\n                from-list="::[\'Waypoint\', \'Segment\', \'Special Use\']" required\n            ></ccri-angular-utils-select>\n        </div>\n\n        <hr>\n\n        <div class="flex-row flex-full editor-form-row">\n            <label class="control-label" style="flex: 0 0 85px;">\n                Altitude Min:\n            </label>\n            <input type="number" step="any" name="minAlt" class="form-control input-xs" ng-model="jsonObj.minAltitude"\n                    placeholder="ft"\n                    st-ft-to-meters-format\n                    ccri-angular-utils-strip-units ccri-angular-utils-format-units="{{\' ft\'}}"\n                    ccri-angular-utils-number-trim="0"\n                    ccri-angular-utils-num-up-down\n                    style="flex: 1 1 70px;"\n            >\n            <label class="control-label text-center" style="flex: 0 0 30px">\n                Max:\n            </label>\n            <input type="number" step="any" name="maxAlt" class="form-control input-xs" ng-model="jsonObj.maxAltitude"\n                    placeholder="ft"\n                    st-ft-to-meters-format min="{{jsonObj.minAltitude}}"\n                    ccri-angular-utils-strip-units ccri-angular-utils-format-units="{{\' ft\'}}"\n                    ccri-angular-utils-number-trim="0"\n                    ccri-angular-utils-num-up-down\n                    style="flex: 1 1 70px;"\n            >\n        </div>\n\n        <div class="flex-row flex-full editor-form-row">\n            <label class="control-label" style="flex: 0 0 85px;">\n                Speed Min:\n            </label>\n            <input type="number" step="any" name="minSpd" class="form-control input-xs" ng-model="jsonObj.minSpeed"\n                   placeholder="kts"\n                   st-mps-to-knots-format\n                   ccri-angular-utils-strip-units ccri-angular-utils-format-units="{{\' kts\'}}"\n                   ccri-angular-utils-number-trim="0"\n                   ccri-angular-utils-num-up-down\n                   style="flex: 1 1 70px;"\n            >\n            <label class="control-label text-center" style="flex: 0 0 30px">\n                Max:\n            </label>\n            <input type="number" step="any" name="maxSpd" class="form-control input-xs" ng-model="jsonObj.maxSpeed"\n                   placeholder="kts"\n                   st-mps-to-knots-format\n                   ccri-angular-utils-strip-units ccri-angular-utils-format-units="{{\' kts\'}}"\n                   ccri-angular-utils-number-trim="0"\n                   ccri-angular-utils-num-up-down\n                   style="flex: 1 1 70px;"\n            >\n        </div>\n\n        <div class="flex-row flex-full editor-form-row">\n            <label class="control-label" style="flex: 0 0 85px;">\n                IFF Mode 3:\n            </label>\n            <ccri-angular-utils-tag-list\n                items="jsonObj.squawk3"\n                only-initial-empty="true"\n                validation-test="squawkOctalTest"\n                class="editor-taglist airspace-editor-taglist"\n            ></ccri-angular-utils-tag-list>\n        </div>\n\n        <div class="flex-row flex-full editor-form-row">\n            <label class="control-label" style="flex: 0 0 85px;">\n                IFF Mode 2:\n            </label>\n            <ccri-angular-utils-tag-list\n                items="jsonObj.squawk2"\n                only-initial-empty="true"\n                validation-test="squawkOctalTest"\n                class="editor-taglist airspace-editor-taglist"\n            ></ccri-angular-utils-tag-list>\n        </div>\n\n        <hr>\n\n        <div class="flex-row flex-full editor-form-row" ng-repeat="heading in jsonObj.headings">\n            <label class="control-label" style="flex: 0 0 55px;">\n                Heading:\n            </label>\n            <div style="flex: 0 0 25px;">\n                <ccri-angular-utils-heading-plot\n                        min="heading.minHeading"\n                        max="heading.maxHeading"\n                        style="width: 22px; height: 22px; margin-bottom: -3px;"\n                ></ccri-angular-utils-heading-plot>\n            </div>\n            <input type="number" step="any" name="minHead" class="form-control input-xs" ng-model="heading.minHeading"\n                    ng-model-options="{debounce: {default: 200, updown: 0}}"\n                    placeholder="&deg;"\n                    min="0" max="360" ng-required="!(heading.maxHeading | isEmpty)"\n                    ccri-angular-utils-strip-units ccri-angular-utils-format-units="&deg;"\n                    ccri-angular-utils-number-trim="1"\n                    ccri-angular-utils-num-up-down\n                    style="flex: 1 1 70px;"\n            >\n            <label class="text-center" style="flex: 0 0 30px;">&ndash;</label>\n            <input type="number" step="any" name="maxHead" class="form-control input-xs" ng-model="heading.maxHeading"\n                    ng-model-options="{debounce: {default: 200, updown: 0}}"\n                    placeholder="&deg;"\n                    min="0" max="360" ng-required="!(heading.minHeading | isEmpty)"\n                    ccri-angular-utils-strip-units ccri-angular-utils-format-units="&deg;"\n                    ccri-angular-utils-number-trim="1"\n                    ccri-angular-utils-num-up-down\n                    style="flex: 1 1 70px;"\n            >\n        </div>\n\n        <hr>\n\n        \x3c!-- Active Days, Active Times, Active Dates --\x3e\n        <div style="margin-bottom: 12px;">\n            <div ng-repeat="activeTime in jsonObj.activeTimes">\n                \x3c!-- Day of Week --\x3e\n                <div class="flex-row flex-full editor-form-row">\n                    <label class="control-label" style="flex: 0 0 85px;">\n                        Active Days:\n                    </label>\n                    <span class="flex-row weekday-selector">\n                        <label><span>S</span><ccri-angular-utils-checkbox ng-model="activeTime.dayOfWeek.su"></ccri-angular-utils-checkbox></label>\n                        <label><span>M</span><ccri-angular-utils-checkbox ng-model="activeTime.dayOfWeek.mo"></ccri-angular-utils-checkbox></label>\n                        <label><span>T</span><ccri-angular-utils-checkbox ng-model="activeTime.dayOfWeek.tu"></ccri-angular-utils-checkbox></label>\n                        <label><span>W</span><ccri-angular-utils-checkbox ng-model="activeTime.dayOfWeek.we"></ccri-angular-utils-checkbox></label>\n                        <label><span>T</span><ccri-angular-utils-checkbox ng-model="activeTime.dayOfWeek.th"></ccri-angular-utils-checkbox></label>\n                        <label><span>F</span><ccri-angular-utils-checkbox ng-model="activeTime.dayOfWeek.fr"></ccri-angular-utils-checkbox></label>\n                        <label><span>S</span><ccri-angular-utils-checkbox ng-model="activeTime.dayOfWeek.sa"></ccri-angular-utils-checkbox></label>\n                    </span>\n                </div>\n                \x3c!-- Time of Day --\x3e\n                <div class="flex-row flex-full editor-form-row">\n                    <label class="control-label" style="flex: 0 0 85px;">\n                        Active Times:\n                    </label>\n                    <input class="form-control input-xs" style="flex: 1 1 70px;" name="timeOfDayStart"\n                        ng-model="activeTime.timeOfDay.start" ng-required="!(activeTime.timeOfDay.end | isEmpty)"\n                        ccri-angular-utils-valid-time\n                        placeholder="HH:MM:SS Z"\n                    >\n                    <span class="text-center" style="flex: 0 0 30px;">&ndash;</span>\n                    <input class="form-control input-xs" style="flex: 1 1 70px;" name="timeOfDayEnd"\n                        ng-model="activeTime.timeOfDay.end" ng-required="!(activeTime.timeOfDay.start | isEmpty)"\n                        ccri-angular-utils-valid-time\n                        placeholder="HH:MM:SS Z"\n                    >\n                </div>\n                \x3c!-- Time of Year --\x3e\n                <div class="flex-row flex-full editor-form-row">\n                    <label class="control-label" style="flex: 0 0 85px;">\n                        Active Dates:\n                    </label>\n                    <input class="form-control input-xs" style="flex: 1 1 70px;" name="timeOfYearStart"\n                            placeholder="MM/DD"\n                            ng-model="activeTime.timeOfYear.start" ng-required="!(activeTime.timeOfYear.end.month | isEmpty)"\n                            ccri-angular-utils-month-day-date\n                    >\n                    <span class="text-center" style="flex: 0 0 30px;">&ndash;</span>\n                    <input class="form-control input-xs" style="flex: 1 1 70px;" name="timeOfYearEnd"\n                            placeholder="MM/DD"\n                            ng-model="activeTime.timeOfYear.end" ng-required="!(activeTime.timeOfYear.start.month | isEmpty)"\n                            ccri-angular-utils-month-day-date\n                    >\n                </div>\n            </div>\n        </div>\n\n        <hr>\n\n        \x3c!-- Get Suggestions --\x3e\n        <div class="flex-row flex-justify-content-content-end"\n             ng-if="suggestionsAllowed && isNew">\n            <div class="flex-1" style="margin-right: 8px">\n                <span class="btn btn-default btn-sm"\n                      ng-class="{\'disabled\': !suggestionState.enabled, \'pending\': suggestionState.pending}"\n                      uib-tooltip="{{getSuggestionTooltip()}}"\n                      tooltip-placement="top-left"\n                      tooltip-popup-delay="600" tooltip-animation="false"\n                      ng-click="suggest()">\n                        <i class="fa fa-fw fa-md fa-lightbulb-o" style="width: 0.5em; margin-right: 4px"\n                           ng-class="{\'ng-hide\': suggestionState.pending}"></i>\n                        <i class="fa fa-fw fa-md fa-spin fa-circle-o-notch" style="width: 1em"\n                           ng-class="{\'ng-hide\': !suggestionState.pending}"></i>\n                    <span class="txt">{{ suggestionState.pending ? \'Cancel\' : \'Get Suggestions\' }}</span>\n                </span>\n            </div>\n            <p class="small nowrap" style="line-height: 1.3">\n                Suggestions based on data from:<br>\n                <span class="nowrap" ng-class="{\'ng-hide\': !!sugTimeStart}">\n                    last {{sugTimePeriod.number}} {{sugTimePeriod.units}}\n                </span>\n                <st-date-range\n                    ng-class="{\'ng-hide\': !sugTimeStart}"\n                    start-date="sugTimeStart" sep="-" end-date="sugTimeEnd"\n                    moment-date-format="MM-DD" moment-time-format="HH:mm[Z]"\n                    utc="true"\n                ></st-date-range>\n            </p>\n        </div>\n    </div>\n\n    \x3c!-- Metric Groups list --\x3e\n    <ng-form name="metricGroupsForm">\n        <div ng-repeat="metricGroup in jsonObj.metricGroups" style="margin-bottom:6px">\n            <st-airspace-metric metric="metricGroup"></st-airspace-metric>\n        </div>\n    </ng-form>\n\n    <hr>\n\n    \x3c!-- Comments --\x3e\n    <div style="padding: 0 3px;">\n        <div>\n            <label class="control-label">Comments:</label>\n            <br>\n            <textarea name="comments" class="form-control input-xs" ng-model="jsonObj[\'comments\']" placeholder="Comments"></textarea>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='\n\x3c!-- group name --\x3e\n<div class="flex-row flex-full">\n    <b ng-click="isExpanded=!isExpanded" class="clickable" style="flex:1 0 auto">\n        <span class="ico-square">\n            <i class="fa fa-caret-down" ng-class="{\'fa-caret-down\': isExpanded, \'fa-caret-right\': !isExpanded}"></i>\n        </span>\n        {{::(metricGroupDef.label || metricGroup.name)}}\n    </b>\n    \x3c!-- "add item" button --\x3e\n    <a class="clickable click-padded" ng-click="isExpanded=true;addMetric()">\n        <i class="fa fa-plus text-primary"></i>\n    </a>\n    <span style="flex-basis:100%">\n        <span class="form-error text-right" ng-class="{\'ng-hide\': !metricProbabilitySumForm.unknownProbability.$error.min}"\n        >Probability exceeds 100%</span>\n    </span>\n    <span style="flex:0 0 24px"></span>\n</div>\n\n<div ng-class="{\'ng-hide\': !isExpanded}" style="margin-top:-4px; max-height: 200px; overflow-y: auto;">\n    <table class="row-margin">\n        <tr>\n            \x3c!-- header rows --\x3e\n            <th class="text-muted" style="width:50%">Name</th>\n            <th class="text-muted" style="width:22%">Count</th>\n            <th class="text-muted nowrap" style="width:22%">Prob. (%)</th>\n            <th style="width:21px"></th>\n        </tr>\n        <tr ng-repeat="metric in visibleList" ng-form="metricForm"\n            ng-init="namedef=metricGroupDef.namedef">\n            <td style="max-width:133px">\n                \x3c!-- name --\x3e\n                \x3c!-- text input --\x3e\n                <input ng-if="!metricGroupDef.namedef.useTypeahead"\n                       type="text" class="form-control input-xs" ng-model="metric.name" name="metricName"\n                       required\n                       ccri-angular-utils-attach-directives="metricGroupDef.namedef.attach_directives"\n                >\n                \x3c!-- or typeahead --\x3e\n                \x3c!-- Uses pre-supplied list (no ajax) --\x3e\n                <ccri-angular-utils-typeahead ng-if="metricGroupDef.namedef.values && metricGroupDef.namedef.useTypeahead"\n                        ng-model="metric.name" name="metricName" required\n                        ccri-angular-utils-typeahead-options="namedef.selectFn(value) as namedef.labelFn(value) for value in namedef.values"\n                        placeholder="{{namedef.placeholder}}"\n                        ccri-angular-utils-attach-directives="metricGroupDef.namedef.attach_directives"\n                ></ccri-angular-utils-typeahead>\n\n                \x3c!-- Fetches list dynamically (ajax) --\x3e\n                <ccri-angular-utils-typeahead ng-if="!metricGroupDef.namedef.values && metricGroupDef.namedef.useTypeahead"\n                                              ng-model="metric.name" name="metricName" required\n                                              placeholder="{{namedef.placeholder}}"\n                                              ccri-angular-utils-attach-directives="metricGroupDef.namedef.attach_directives"\n                ></ccri-angular-utils-typeahead>\n\n                <span class="form-error"\n                      ng-repeat="(err_name, err_msg) in metricGroupDef.namedef.validation_errors"\n                      ng-class="{\'ng-hide\': !metricForm.metricName.$error[err_name]}">\n                    {{err_msg}}\n                </span>\n            </td>\n            <td>\n                \x3c!-- count --\x3e\n                <input type="number" step="1" class="form-control input-xs" ng-model="metric.count"\n                       min="0">\n            </td>\n            <td>\n                \x3c!-- probability --\x3e\n                <input type="number" step="any" class="form-control input-xs" ng-model="metric.probability"\n                       min="0" max="100" required>\n            </td>\n            <td style="padding-left: 0">\n                \x3c!-- Delete item --\x3e\n                <ccri-angular-utils-close-btn class="clickable click-padded text-muted hover-red" ng-click="delMetric($index)"></ccri-angular-utils-close-btn>\n            </td>\n        </tr>\n        <tr ng-class="{\'ng-hide\': !canShowLess()}">\n            <td colspan="3">\n                <a ng-click="showMore()" class="clickable more-less-label" ng-class="{\'ng-hide\': showingMore}">Show More</a>\n                <a ng-click="showLess()" class="clickable more-less-label" ng-class="{\'ng-hide\': !showingMore}">Show Less</a>\n            </td>\n        </tr>\n        <tr ng-form="metricProbabilitySumForm">\n            <td>\n                \x3c!-- name --\x3e\n                <input type="text" class="form-control input-xs disabled-gray" disabled value="Unknown">\n            </td>\n            <td>\n                \x3c!-- count --\x3e\n                <input type="number" step="1" class="form-control input-xs disabled-gray" disabled>\n            </td>\n            <td>\n                \x3c!-- probability --\x3e\n                <input type="number" step="any" name="unknownProbability"  disabled\n                       class="form-control input-xs disabled-gray immediate-error"\n                       ng-model="unknownProbability" min="0" max="100">\n            </td>\n            <td></td>\n        </tr>\n    </table>\n</div>\n'},function(t,e){angular.module("stealth.air.edit",["stealth.geoarea","ccri.area-definition"]).service("stealth.air.skylightApi.service",[function(){var t=ccriCoreconfig.config.get("skylight.apiUrl","").trim().replace(/\/$/,"");this.getSuggestions=function(e,n){return ccriCorehttp.http.request({url:t+"/query/autosuggest",method:"GET",params:{type:e,name:n}}).then(function(t){return _.pluck(t.data.suggestions,"result.entity")})},this.getAirfieldSuggestions=_.partial(this.getSuggestions,"Airfield"),this.getAircraftTypeSuggestions=_.partial(this.getSuggestions,"AircraftType"),this.getCountrySuggestions=_.partial(this.getSuggestions,"Country"),this.getById=function(e,n){return ccriCorehttp.http.request({url:t+"/query/"+e+"/"+(n||"")}).then(function(t){return t.data})}}])},function(t,e){angular.module("stealth.air.edit",["stealth.core.utils","toastr"]).factory("AirspaceSuggestions",["$filter","$http","$interval","$log","$q","CONFIG","toastr","wfs",function(t,e,n,r,i,o,a,s){var l,c,u=t("uriCat")(o.air.editorWorkflowUrl,"airspace-suggestions/"),d=i.defer(),f="airspace suggestions job cancelled";return p.prototype.fromServer=function(t,n,o){return h(),d=i.defer(),function(t,n,i){r.debug("> creating airspace suggestions job...");var o=$.param({feature:angular.toJson({status:"Submitted",dateRangeStart:n.toISOString(),dateRangeEnd:i.toISOString(),classification:t.classification,airspace:t})});return e.post(u,o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(y,b("failed to create airspace suggestions job"))}(t,n,o).then(g).then(m)},p.prototype.cancel=h,p;function p(){this.areAllowed=DataSourceManager.loadDataSources().then(function(){var t=DataSourceManager.getDataSourcesByKeyword("air.airspace-suggestions");return c=t.isEmpty()?c||i.reject("Airspace Suggestions not supported on wfs server"):i.when(t.first())}).then(function(){return!0},function(){return!1})}function h(){return d.reject(f),v(l)}function g(t){if(!t)return i.reject("cannot poll since airspace suggestions job was not created");var e=l=t.data;return r.debug("> polling airspace suggestions feature..."),w({done:function(t){return _.get(t,"data.features[0].properties")?i.when(e):i.reject()},interval:500,maxTimes:60,name:"airspace suggestions feature",task:function(){return r.debug("\n\t|airspace-suggestion> "+e),c.then(function(t){return s.getFeature(t.wfsUrl,t.name,{featureID:e},void 0,!0)})}}).then(y,b("Unable to find feature related to Airspace Suggestions on server"))}function m(t){if(!t)return i.reject("cannot poll airspace suggestions job since cannot find corresponding feature");var e=d.promise;return l=t,e.then(function(){v(t)}),r.debug("> polling airspace suggestions job..."),w({done:function(t){var e=_.get(t,"data.features[0].properties");if(e){if("Submitted"===e.status||"Running"===e.status)return i.reject();if("Complete"===e.status){var n=angular.fromJson(e.serializedJson);return d.resolve(),a.success("Airspace editor populated with suggested values","Airspace Editor"),i.when(n)}if("Failed"===e.status)return d.reject("Server was unable to provide Airspace Suggestions"),a.error("Server was unable to suggest values","Airspace Editor"),i.when()}return d.reject("Problem communicating with server"),i.when()},guard:e,interval:3e3,maxTimes:0,name:"airspace suggestions job",task:function(){return r.debug("\n\t|airspace-suggestion> "+t),c.then(function(e){return s.getFeature(e.wfsUrl,e.name,{featureID:t},void 0,!0)})}}).then(y,b("failure while polling airspace suggestions job"))}function v(n){return r.debug("> deleting airspace suggestions job..."),n?e({method:"DELETE",url:t("uriCat")(u,n)}).then(y,b("failed to delete airspace suggestions job")):i.reject("declined to delete airspace suggestions job")}function y(t){return t}function b(t){return function(e){return c.then(function(){d.reject(t),r.error(t),e&&e.status&&e.statusText?r.error(e.status+" "+e.statusText):e&&r.error(e),e!==f&&a.error(t,"Airspace Editor")},function(e){d.reject(e),r.error(t),r.error(e),a.error(t,"Airspace Editor")})}}function w(t){var e={done:t.done,guard:t.guard||i.defer().promise,interval:t.interval||1e3,maxTimes:t.maxTimes||0,name:t.name,task:t.task},r=i.defer(),o=n(function(){i.race([e.task(),e.guard]).then(function(t){return t||i.reject("task already completed")},function(t){r.reject(t)}).then(e.done).then(function(t){n.cancel(o),t?r.resolve(t):r.reject()})},e.interval,e.maxTimes);return o.then(function(){var t='polling for "'+(e.name||"<anonymous>")+'" timed out.';a.error(t,"Airspace Editor"),r.reject(t)}),r.promise}}])},function(t,e,n){var r=n(2146);angular.module("stealth.air.edit").directive("stAirTrackEditor",[function(){return{restrict:"E",template:r,controller:"airTrackEditorController"}}]).controller("airTrackEditorController",["$scope","$controller","$http","getClassificationClass","toastr","stealth.air.skylightApi.service",function(t,e,n,r,i,o){t.skylightApi=o;var a=ccriCoreconfig.config.get("air.kafka.restUrl"),s=ccriCoreconfig.config.get("air.kafka.topics.trackEdit");if(!_.get(t,"init.done")){e("wfstEditorController",{$scope:t}),t.init.done=!1,t.showErrors=!1,t.$watch("editorForm.$valid",function(e){e&&(t.showErrors=!1)}),t.activities=ccriCoreconfig.config.get("air.aircraftActivities"),t.getClassificationClass=r;var l=function(t){return!_.isEmpty(t)};t.classifications=ccriUtils.defaultIf(l,ccriCoreconfig.config.get("air.classifications"),ccriUtils.defaultIf(l,ccriCoreconfig.config.get("classification.options"),["UNCLASSIFIED"])),t.save=function(){if(t.editorForm.$invalid)t.showErrors=!0;else{t.saving=!0;var e={featureId:t.originalFeature.getId(),thresherId:t.properties.thresherId,aircraftType:_.get(t.properties,"aircraftType.name"),aircraftTypeId:_.get(t.properties,"aircraftType.id"),nationality:_.get(t.properties.nationality,"isoDigraph",t.properties.nationality),affiliation:t.properties.affiliation,callsign:t.properties.callsign,identity:t.properties.identity,airline:t.properties.airline,classification:t.properties.classification,userLabel:t.properties.userLabel,comments:t.properties.comments,tLastModified:moment().utc().toISOString(),userLastModified:ccriCoreconfig.config.get("userDn"),bort:t.properties.bort};t.properties.activity&&(e.activity=t.properties.activity);var r=function(t){return _.isNumber(t)||_.isString(t)},o=_.get(t.properties,"origin.id");r(o)&&(e.origin=o);var l=_.get(t.properties,"destination.id");r(l)&&(e.destination=l);var c=angular.toJson(e);n.post(a,$.param({topic:s,data:c}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){t.feature.setProperties(t.properties),i.success("Info saved")},function(){i.error("Save failed")}).finally(function(){t.saving=!1})}},t.revert=function(){t.properties=t.feature.getProperties(),t.showErrors=!1},t.userIsFilterManager=function(){return _.any(ccriCoreconfig.config.get("userRoles"),function(t){return t.toUpperCase().indexOf("FILTERMANAGER")>-1})},t.init.done=!0}}])},function(t,e){t.exports='<div class="editor airTrackEditor side-panel-content"\n     ng-form="editorForm" ng-class="{\'show-errors\': showErrors}">\n    <div class="editorHeader flex-row">\n        <div class="editorTitle flex-1 ellipsis">\n            <strong>{{::properties.label}}</strong>\n            {{::(properties.subLabel | lodash:\'isEmpty\') ? \'\' : \'&nbsp;/&nbsp;\' + properties.subLabel}}\n        </div>\n        <span class="icon-btn secondary-action"\n             uib-tooltip="Revert Changes" tooltip-class="nowrap"\n             tooltip-placement="left" tooltip-animation="false"\n             tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n             ng-click="saving || revert()" ng-disabled="saving">\n            <i class="fa fa-lg fa-undo"></i>\n        </span>\n        <span class="icon-btn secondary-action"\n             uib-tooltip="Save" tooltip-class="nowrap"\n             tooltip-placement="left" tooltip-animation="false"\n             tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n             ng-click="save()">\n            <i class="fa fa-lg fa-save"></i>\n        </span>\n    </div>\n    <div class="form-error">\n        Please fix the form errors below\n    </div>\n    <hr>\n    <table>\n        <tr>\n            <td><label class="control-label">Aircraft Type:</label></td>\n            <td style="width:100%;">\n                <ccri-angular-utils-typeahead\n                    ng-model="properties.aircraftType" name="aircraftType"\n                    select-clause="value as value.name for value in $parent.skylightApi.getSuggestions(\'AircraftType\', $viewValue)"\n                    typeahead-min-length="2"\n                ></ccri-angular-utils-typeahead>\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">Nationality:</label></td>\n            <td style="width:100%;">\n                <ccri-angular-utils-typeahead\n                    ng-model="properties.nationality" name="nationality"\n                    select-clause="value as value.isoDigraph + \'-\' + value.name for value in $parent.skylightApi.getSuggestions(\'Country\', $viewValue)"\n                ></ccri-angular-utils-typeahead>\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">Affiliation:</label></td>\n            <td style="width:100%;">\n                <ccri-angular-utils-select\n                    ng-model="properties.affiliation" from-list="::[\'CIV\', \'MIL\', \'UNK\']"\n                ></ccri-angular-utils-select>\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">Callsign:</label></td>\n            <td style="width:100%;">\n                <input class="form-control input-xs" ng-model="properties.callsign">\n            </td>\n        </tr>\n        <tr ng-if="::userIsFilterManager()">\n            <td><label class="control-label">L16 Identity:</label></td>\n            <td style="width:100%;">\n                <ccri-angular-utils-select\n                    ng-model="properties.identity"\n                    from-list="::[\'FRIEND\', \'ASSUMED FRIEND\', \'PENDING\', \'NEUTRAL\', \'SUSPECT\', \'UNKNOWN\']"\n                ></ccri-angular-utils-select>\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">Airline:</label></td>\n            <td style="width:100%;">\n                <input class="form-control input-xs" ng-model="properties.airline">\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">BORT:</label></td>\n            <td style="width:100%;">\n                <input class="form-control input-xs" ng-model="properties.bort">\n            </td>\n        </tr>\n        <tr ng-if="activities && activities.length">\n            <td><label class="control-label">Activity:</label></td>\n            <td style="width:100%;">\n                <ccri-angular-utils-select placeholder="Select Activity"\n                        ng-model="properties.activity" from-list="::activities"\n                ></ccri-angular-utils-select>\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">Origin:</label></td>\n            <td style="width:100%;">\n                <ccri-angular-utils-typeahead\n                    ng-model="properties.origin" name="origin"\n                    select-clause="value as value.name for value in $parent.skylightApi.getSuggestions(\'Airfield\', $viewValue)"\n                    typeahead-min-length="3"\n                ></ccri-angular-utils-typeahead>\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">Destination:</label></td>\n            <td style="width:100%;">\n                <ccri-angular-utils-typeahead\n                    ng-model="properties.destination" name="destination"\n                    select-clause="value as value.name for value in $parent.skylightApi.getSuggestions(\'Airfield\', $viewValue)"\n                    typeahead-min-length="3"\n                ></ccri-angular-utils-typeahead>\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">Classification:</label></td>\n            <td style="width:100%;">\n                <ccri-angular-utils-select\n                    ng-model="properties.classification" from-list="::classifications" required\n                ></ccri-angular-utils-select>\n            </td>\n        </tr>\n        <tr>\n            <td><label class="control-label">User Label:</label></td>\n            <td style="width:100%;">\n                <input class="form-control input-xs" ng-model="properties.userLabel">\n            </td>\n        </tr>\n        <tr>\n            <td colspan="2">\n                <label class="control-label">Comments:</label>\n            </td>\n        </tr>\n        <tr>\n            <td colspan="2">\n                <textarea class="form-control input-xs" ng-model="properties.comments"></textarea>\n            </td>\n        </tr>\n    </table>\n</div>\n'},function(t,e,n){var r=n(2148);angular.module("stealth.air.geo.ol3.layers",["ccri.angular-utils","stealth.air.lookup"]).directive("stAirfieldLayerPopup",[function(){return{restrict:"E",scope:{response:"=",record:"=",index:"="},controller:"stealth.air.geo.ol3.layers.airfieldPopupController",controllerAs:"airfieldPopCtrl",template:r}}]).controller("stealth.air.geo.ol3.layers.airfieldPopupController",["$scope","getClassificationClass","stealth.air.lookup.aircraft.service",function(t,e,n){t.capabilities=t.response.capabilities,t.metadata=t.response.metadata[t.index],t.jsonObj=angular.fromJson(t.metadata.source.properties.serializedJson),t.name=t.jsonObj.name,t.aob=_.indexBy(_.map(t.jsonObj.aob,function(t){return n.get(t.acftTypeId)}),"skylightId"),t.getClassificationClass=e,t.group1={open:!1}}])},function(t,e){t.exports='<div class="airCard airPopup" ng-class="{\'lightTheme\': themeToggle}">\n    <div class="airCardHeader flex-row horiz-slide">\n        <ccri-popup-components-capabilities-list\n            capabilities="capabilities" name="name" record="record" metadata="metadata"\n            identifier="$parent.$parent.$parent.$parent.popupId" button-limit="8"\n        ></ccri-popup-components-capabilities-list>\n        <div class="title flex-1 ellipsis clickable" ng-click="themeToggle = !themeToggle"\n             uib-tooltip="Click to toggle style" tooltip-class="nowrap"\n             tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="600"\n             tooltip-trigger="mouseenter" tooltip-append-to-body="true">\n            {{::jsonObj.name}}\n        </div>\n        <ccri-angular-utils-close-btn\n              ng-if="$parent.$parent.removeTab && $parent.$parent.tabs.length > 1"\n              ng-click="$parent.$parent.removeTab($parent.$parent.tab)">\n        </ccri-angular-utils-close-btn>\n    </div>\n    <div class="horiz-slide classBanner"\n         ng-class="::getClassificationClass(jsonObj.classification)">\n        {{::jsonObj.classification}}\n    </div>\n    <div class="airCardBody">\n        <table class="altTable">\n            <tr>\n                <td>MIDB:</td>\n                <td><label>{{::jsonObj.midbIdent}}</label></td>\n                <td>ICAO:</td>\n                <td><label>{{::jsonObj.icao}}</label></td>\n                <td>IATA:</td>\n                <td><label>{{::jsonObj.iata}}</label></td>\n            </tr>\n            <tr>\n                <td>Lat:</td>\n                <td><label>{{::jsonObj.pt.lat < 0 ? \'S\' : \'N\'}}&nbsp;{{::jsonObj.pt.lat | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;</label></td>\n                <td>Lon:</td>\n                <td><label>{{::jsonObj.pt.lon < 0 ? \'W\' : \'E\'}}&nbsp;{{::jsonObj.pt.lon | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;</label></td>\n                <td>Elev:</td>\n                <td><label>{{::(jsonObj.elevation / 0.3048) | numberTrim:0}} ft</label></td>\n            </tr>\n            <tr>\n                <td>Radius:</td>\n                <td>\n                    <i ng-class="::{\'ng-hide\': (jsonObj.radius | lodash:\'isNumber\')}">None</i>\n                    <span ng-class="::{\'ng-hide\': !(jsonObj.radius | lodash:\'isNumber\')}">\n                        <label>{{::jsonObj.radius | formatMeters}}</label>\n                    </span>\n                </td>\n                <td>Max Alt:</td>\n                <td colspan="3">\n                    <i ng-class="::{\'ng-hide\': (jsonObj.maxAltitude | lodash:\'isNumber\')}">None</i>\n                    <span ng-class="::{\'ng-hide\': !(jsonObj.maxAltitude | lodash:\'isNumber\')}">\n                        <label>{{::(jsonObj.maxAltitude / 0.3048) | numberTrim:0}} ft</label>\n                    </span>\n                </td>\n            </tr>\n            <tr>\n                <td>Nationality:</td>\n                <td><label>{{::jsonObj.nationality}}</label></td>\n                <td>Affiliation:</td>\n                <td colspan="3"><label>{{::jsonObj.affiliation}}</label></td>\n            </tr>\n            <tr>\n                <td>Type:</td>\n                <td><label>{{::jsonObj.affiliationAmp}}</label></td>\n                <td>AAFIF:</td>\n                <td><label>{{::jsonObj.aafifName}}</label></td>\n                <td>PNAB:</td>\n                <td><label>{{::jsonObj.pnab}}</label></td>\n            </tr>\n            <tr>\n                <td colspan="6">\n                    <div style="max-width:365px;word-break:break-all;">\n                        Alt Names:\n                        <i ng-class="::{\'ng-hide\': !(jsonObj.alternativeNames | lodash:\'isEmpty\')}">None</i>\n                        <span ng-repeat="a in ::jsonObj.alternativeNames" class="label-like">{{!$first ? \', \' : \'\'}}{{::a.altName}}</span>\n                    </div>\n                </td>\n            </tr>\n            <tr>\n                <td colspan="6">\n                    <div style="max-width:365px;" ng-class="::{\'ng-hide\': (jsonObj.comments | lodash:\'isEmpty\')}">\n                        <span>Comments:</span> <span class="label-like">{{::jsonObj.comments}}</span>\n                    </div>\n                </td>\n            </tr>\n            <tr ng-class="::{\'ng-hide\': !record.tLastModified}">\n                <td colspan="6">\n                    <div>\n                        <span>Last Mod: </span>\n                        <span class="nowrap datetime">\n                            <label><st-datetime date="::record.tLastModified" moment-time-format="HH:mm[Z]"></st-datetime></label>\n                        </span>\n                    </div>\n                    <div>\n                        <label>{{::record.userLastModified}}</label>\n                    </div>\n                </td>\n            </tr>\n            <tr ng-class="::{\'ng-hide\': (jsonObj.aob | lodash:\'isEmpty\')}">\n                <td colspan="6">\n                    <div style="margin-bottom:3px;">\n                        Air Order of Battle:\n                    </div>\n                    <div ng-repeat="c in ::jsonObj.aob">\n                        <div class="flex-row">\n                            <div style="width:30px;"><label>{{::c.count}}</label>&nbsp;</div>\n                            <div class="flex-1 ellipsis"><label>{{::aob[c.acftTypeId].specificType}} / {{::aob[c.acftTypeId].platform}} / {{::aob[c.acftTypeId].midbCode}}</label></div>\n                        </div>\n                        <div style="padding-left:5px;padding-bottom:5px;font-size:12px;line-height:1.1em;">\n                            <div>\n                                <span class="airCardLabel">Classification: </span>\n                                <label>{{::c.classification}}</label>\n                            </div>\n                            <div>\n                                <span class="airCardLabel">Last Mod: </span>\n                                <span class="nowrap datetime">\n                                    <label><st-datetime date="::record.tLastModified" moment-time-format="HH:mm[Z]"></st-datetime></label>\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>\n'},function(t,e,n){var r=n(2150);angular.module("stealth.air.geo.ol3.layers",["ccri.angular-utils"]).directive("stAirspaceLayerPopup",[function(){return{restrict:"E",scope:{response:"=",record:"=",index:"="},controller:"stealth.air.geo.ol3.layers.airspacePopupController",controllerAs:"airspacePopCtrl",template:r}}]).controller("stealth.air.geo.ol3.layers.airspacePopupController",["$scope","stealth.air.edit.metricGroupDefs","getClassificationClass",function(t,e,n){t.capabilities=t.response.capabilities,t.metadata=t.response.metadata[t.index],t.jsonObj=angular.fromJson(t.metadata.source.properties.serializedJson),t.name=t.jsonObj.name,t.getClassificationClass=n,t.metricGroups=function(){var n=[];return _.each(e,function(e,r){var i=r.concat("Metrics");t.jsonObj[i]&&n.push({name:e.label,metrics:t.jsonObj[i]})}),n}(),t.metricGroupDefs=e,t.getUnknownProb=function(t){return 100-_.sum(_.pluck(t.metrics,"probability"))},t.allValuesMatch=function(t){return 1===_.uniq(_.values(t)).length},t.converter=MathUtils.converter.convert}])},function(t,e){t.exports='<div class="airCard airPopup" ng-class="{\'lightTheme\': themeToggle}">\n    <div class="airCardHeader flex-row horiz-slide">\n        <ccri-popup-components-capabilities-list\n            capabilities="capabilities" name="name" record="record" metadata="metadata"\n            identifier="$parent.$parent.$parent.$parent.popupId" button-limit="8"\n        ></ccri-popup-components-capabilities-list>\n        <div class="title flex-1 ellipsis clickable" ng-click="themeToggle = !themeToggle"\n             uib-tooltip="Click to toggle style" tooltip-class="nowrap"\n             tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="600"\n             tooltip-trigger="mouseenter" tooltip-append-to-body="true">\n            {{::jsonObj.name}}\n        </div>\n        <ccri-angular-utils-close-btn\n              ng-if="$parent.$parent.removeTab && $parent.$parent.tabs.length > 1"\n              ng-click="$parent.$parent.removeTab($parent.$parent.tab)">\n        </ccri-angular-utils-close-btn>\n    </div>\n    <div class="horiz-slide classBanner"\n         ng-class="::getClassificationClass(jsonObj.classification)">\n        {{::jsonObj.classification}}\n    </div>\n    <div class="airCardBody">\n        <table class="altTable">\n            <tr>\n                <td>Type:</td>\n                <td ng-class="::{\'ng-hide\': jsonObj.airspaceType}"><i>Not specified</i></td>\n                <td ng-class="::{\'ng-hide\': !jsonObj.airspaceType}"><label>{{::jsonObj.airspaceType}}</label></td>\n            </tr>\n            <tr>\n                <td>Min Altitude:</td>\n                <td ng-class="::{\'ng-hide\': (jsonObj.minAltitude | lodash:\'isNumber\')}"><i>None</i></td>\n                <td ng-class="::{\'ng-hide\': !(jsonObj.minAltitude | lodash:\'isNumber\')}"><label>{{::(converter(jsonObj.minAltitude, \'m\', \'ft\')) | numberTrim:0}} ft</label></td>\n            </tr>\n            <tr>\n                <td>Max Altitude:</td>\n                <td ng-class="::{\'ng-hide\': (jsonObj.maxAltitude | lodash:\'isNumber\')}"><i>None</i></td>\n                <td ng-class="::{\'ng-hide\': !(jsonObj.maxAltitude | lodash:\'isNumber\')}"><label>{{::(converter(jsonObj.maxAltitude, \'m\', \'ft\')) | numberTrim:0}} ft</label></td>\n            </tr>\n            <tr>\n                <td>Min Speed:</td>\n                <td ng-class="::{\'ng-hide\': (jsonObj.minSpeed | lodash:\'isNumber\')}"><i>None</i></td>\n                <td ng-class="::{\'ng-hide\': !(jsonObj.minSpeed | lodash:\'isNumber\')}"><label>{{::(converter(jsonObj.minSpeed, \'mps\', \'knots\')) | numberTrim:0}} kts</label></td>\n            </tr>\n            <tr>\n                <td>Max Speed:</td>\n                <td ng-class="::{\'ng-hide\': (jsonObj.maxSpeed | lodash:\'isNumber\')}"><i>None</i></td>\n                <td ng-class="::{\'ng-hide\': !(jsonObj.maxSpeed | lodash:\'isNumber\')}"><label>{{::(converter(jsonObj.maxSpeed, \'mps\', \'knots\')) | numberTrim:0}} kts</label></td>\n            </tr>\n            <tr>\n                <td>IFF Mode 3:</td>\n                <td ng-class="{\'ng-hide\': jsonObj.squawk3.length}"><i>(none)</i></td>\n                <td ng-class="{\'ng-hide\': !jsonObj.squawk3.length}">\n                    <span ng-repeat="squawk in ::jsonObj.squawk3">\n                        <label>{{::squawk}}{{$last ? \'\' : \', \'}}</label>\n                    </span>\n                </td>\n            </tr>\n            <tr>\n                <td>IFF Mode 2:</td>\n                <td ng-class="{\'ng-hide\': jsonObj.squawk2.length}"><i>(none)</i></td>\n                <td ng-class="{\'ng-hide\': !jsonObj.squawk2.length}">\n                    <span ng-repeat="squawk in ::jsonObj.squawk2">\n                        <label>{{::squawk}}{{$last ? \'\' : \', \'}}</label>\n                    </span>\n                </td>\n            </tr>\n            \x3c!-- Headings list--\x3e\n            <tr ng-class="::{\'ng-hide\': !jsonObj.headings.length}" ng-repeat="heading in jsonObj.headings">\n                <td>Heading:</td>\n                <td ng-class="::{\'ng-hide\': jsonObj.headings.length}"><i>None</i></td>\n                <td>\n                    <ccri-angular-utils-heading-plot\n                            min="heading.minHeading"\n                            max="heading.maxHeading"\n                            style="width: 12px; height: 12px;"\n                            ></ccri-angular-utils-heading-plot>\n                    <label>{{::heading.minHeading | number:0 | lodash:\'padLeft\':3:\'0\'}}&deg; &ndash;\n                    {{::heading.maxHeading | number:0 | lodash:\'padLeft\':3:\'0\'}}&deg;</label>\n                </td>\n            </tr>\n            \x3c!-- Active Times list--\x3e\n            <tr ng-class="::{\'ng-hide\': !jsonObj.activeTimes.length}" ng-repeat="activeTime in jsonObj.activeTimes">\n                <td>\n                    <table>\n                        <tr ng-if="activeTime.dayOfWeek && !allValuesMatch(activeTime.dayOfWeek)">\n                            <td>Active Days:</td>\n                        </tr>\n                        <tr ng-if="activeTime.timeOfDay.start && activeTime.timeOfDay.end">\n                            <td>Active Times:</td>\n                        </tr>\n                        <tr ng-if="activeTime.timeOfYear.start && activeTime.timeOfYear.end">\n                            <td>Active Dates:</td>\n                        </tr>\n                    </table>\n                </td>\n                <td>\n                    <table>\n                        <tr ng-if="activeTime.dayOfWeek && !allValuesMatch(activeTime.dayOfWeek)">\n                            <td>\n                                <span ng-repeat="(day, dayActive) in activeTime.dayOfWeek" ng-class="::{\'ng-hide\': !dayActive}"\n                                      style="text-transform: capitalize;">\n                                    <label>{{day}}</label>\n                                </span>\n                            </td>\n                        </tr>\n                        <tr ng-if="activeTime.timeOfDay.start && activeTime.timeOfDay.end">\n                            <td><label>{{::activeTime.timeOfDay.start}} Z &ndash; {{::activeTime.timeOfDay.end}} Z</label></td>\n                        </tr>\n                        <tr ng-if="activeTime.timeOfYear.start && activeTime.timeOfYear.end">\n                            <td>\n                                <label>{{::activeTime.timeOfYear.start.month}}/{{::activeTime.timeOfYear.start.day}} &ndash;\n                                {{::activeTime.timeOfYear.end.month}}/{{::activeTime.timeOfYear.end.day}}</label>\n                            </td>\n                        </tr>\n                    </table>\n                </td>\n            </tr>\n            <tr ng-repeat="metricGroup in metricGroups">\n                <td colspan="2">\n                    \x3c!-- group name --\x3e\n                    {{::(metricGroupDefs[metricGroup.name].label || metricGroup.name)}}\n                    <i ng-class="{\'ng-hide\': metricGroup.metrics.length}">(none)</i>\n\n                    <table class="dark pad-cells metricTable" ng-class="{\'ng-hide\': !metricGroup.metrics.length}" style="margin-left: 15px;">\n                        <tr ng-repeat="metric in ::metricGroup.metrics | orderBy:\'-probability\' | limitTo: 10">\n                            <td class="metricCell ellipsis" style="max-width: 145px;">\n                                <span class="label-like" uib-tooltip="{{::metric.name}}"\n                                    tooltip-popup-delay="500" tooltip-placement="top-left">{{::metric.name}}</span>\n                            </td>\n                            <td class="metricCell text-right">{{::metric.count}}</td>\n                            <td class="metricCell text-right" ccri-angular-utils-align-decimals="1">{{::metric.probability | numberTrim:1}}%</td>\n                        </tr>\n                        <tr class="metricUnknown">\n                            <td class="metricCell label-like">Unknown</td>\n                            <td class="metricCell"></td>\n                            <td class="metricCell text-right" ccri-angular-utils-align-decimals="1">{{::getUnknownProb(metricGroup) | numberTrim:1}}%</td>\n                        </tr>\n                    </table>\n                </td>\n            </tr>\n            <tr>\n                <td>Comments:</td>\n                <td ng-class="::{\'ng-hide\': jsonObj.comments}"><i>None</i></td>\n                <td ng-class="::{\'ng-hide\': !jsonObj.comments}"><label>{{::jsonObj.comments}}</label></td>\n            </tr>\n            <tr>\n                <td>Last Mod:</td>\n                <td ng-class="::{\'ng-hide\': record.tLastModified}"><i>None</i></td>\n                <td>\n                    <span class="nowrap datetime" ng-class="::{\'ng-hide\': !record.tLastModified}">\n                        <label><st-datetime date="::record.tLastModified" moment-time-format="HH:mm[Z]"></st-datetime></label>\n                    </span>\n                    <div>\n                        <label>{{::record.userLastModified}}</label>\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>\n'},function(t,e,n){var r=n(2152);angular.module("stealth.air.geo.ol3.layers").directive("stDetailsTab",[function(){return{template:r}}])},function(t,e){t.exports='<div class="summary">\n    <table>\n        <tr>\n            <td class="keyColumn">Old</td>\n            <td>{{record.isOld}}</td>\n        </tr>\n    </table>\n</div>\n'},function(t,e,n){var r=n(2154);angular.module("stealth.air.geo.ol3.layers",["stealth.core.popup"]).directive("stEvidenceTab",["TabPopupHelper",function(t){return{template:r,scope:{record:"=",response:"=",properties:"="},controller:["$scope",function(e){var n=new t(e,function(t){t.data.features.length>0&&(e.record.evidenceByAttribute=_.groupBy(_.sortBy(_.pluck(t.data.features,"properties"),"priority"),"attribute"),e.record.attributesWithEvidence=_.sortBy(_.keys(e.record.evidenceByAttribute)))});e.$on("$destroy",function(){n.destroy(),n=null}),e.getPriorityString=function(t){switch(t){case 1:return"High";case 2:return"Med";case 3:return"Low";default:return""}}}]}}])},function(t,e){t.exports='<div class="attributeEvidence">\n    <div ng-if="loading && !tabHasBeenFocused" style="text-align:center">\n        <b>Loading ...</b>\n    </div>\n    <div ng-if="!loading || tabHasBeenFocused">\n        <table>\n            <tbody ng-repeat="attribute in record.attributesWithEvidence">\n                <tr class="evidenceHeader">\n                    <td colspan="6">{{::attribute}}</td>\n                </tr>\n                <tr class="evidenceData">\n                    <td class="keyColumn">Weight</td>\n                    <td class="keyColumn" style="font-weight:bold;letter-spacing:0.25px">Value</td>\n                    <td class="keyColumn">Reason</td>\n                    <td class="keyColumn">Time</td>\n                </tr >\n                <tr class="evidenceData"\n                    ng-repeat="evidence in record.evidenceByAttribute[attribute]">\n                    <td>{{::getPriorityString(evidence.priority)}}</td>\n                    <td style="font-weight:bold;letter-spacing:0.25px">{{::evidence.value}}</td>\n                    <td>{{::evidence.reason}}</td>\n                    <td class="dateTime">\n                        <span ng-class="{\'ng-hide\': !evidence.tRecent}">\n                            {{::evidence.tRecent | momentFormat:\'YYYY-MM-DD\'}}<br>{{::evidence.tRecent | momentFormat:\'HH:mm:ss\'}}Z\n                        </span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n'},function(t,e,n){var r=n(2156),i=n(2157),o=n(2158);angular.module("stealth.air.geo.ol3.layers",["stealth.core.popup"]).directive("stFlightScheduleDisplay",[function(){return{restrict:"E",scope:{flightSchedule:"=",waypoints:"="},controller:"stealth.air.geo.ol3.layers.flightScheduleDisplayController",template:r}}]).controller("stealth.air.geo.ol3.layers.flightScheduleDisplayController",["$scope","getClassificationClass",function(t,e){t.getClassificationClass=e,t.wpShowAll=!1}]).directive("stFlightSchedulePopup",[function(){return{restrict:"E",scope:{response:"=",record:"=",index:"="},controller:"stealth.air.geo.ol3.layers.flightSchedulePopupController",template:i}}]).controller("stealth.air.geo.ol3.layers.flightSchedulePopupController",["$scope",function(t){t.capabilities=t.response.capabilities,t.record.lat=t.response.metadata[t.index].source.geometry.coordinates[1],t.record.lon=t.response.metadata[t.index].source.geometry.coordinates[0],t.metadata=t.response.metadata[t.index],t.name=t.response.name,t.waypoints=JSON.parse(t.record.scheduleSerializedJson).waypoints}]).directive("stFlightScheduleTab",[function(){return{restrict:"E",scope:{record:"=",response:"=",properties:"="},controller:"stealth.air.geo.ol3.layers.flightScheduleTabController",template:o}}]).controller("stealth.air.geo.ol3.layers.flightScheduleTabController",["$scope","TabPopupHelper",function(t,e){if(_.has(t.properties,"trkIdField")){var n=t.record[t.properties.trkIdField];if(!_.isUndefined(n)&&!_.isEmpty(n)){t.scheduleAvailable=!0;var r=new e(t,function(e){e.data.features.length>0&&(t.schedule=e.data.features[0].properties,t.schedule.lat=e.data.features[0].geometry.coordinates[1],t.schedule.lon=e.data.features[0].geometry.coordinates[0],t.waypoints=_.get(JSON.parse(_.get(t.schedule,"scheduleSerializedJson")),"waypoints"))});t.$on("$destroy",function(){r.destroy(),r=null})}}}])},function(t,e){t.exports='<div class="fsCardBody">\n    <div class="classBanner" ng-class="::getClassificationClass(flightSchedule.classification)">\n        {{flightSchedule.classification}}\n    </div>\n    <table class="attrTable">\n        <tr>\n            <td class="labelBox">{{::\'lat\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.lat < 0 ? \'S\' : \'N\'}}&nbsp;{{flightSchedule.lat | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;</td>\n            <td class="labelBox">{{::\'lon\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.lon < 0 ? \'W\' : \'E\'}}&nbsp;{{flightSchedule.lon | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;</td>\n        </tr>\n        <tr>\n            <td class="labelBox">{{::\'speed\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.speed | convertUnit:\'m/s\':\'knots\' | numberTrim:0}}&nbsp;kts</td>\n            <td class="labelBox">{{::\'alt\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.alt | convertUnit:\'m\':\'ft\' | numberTrim:0}}&nbsp;ft</td>\n        </tr>\n        <tr>\n            <td class="labelBox">{{::\'heading\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.heading | numberTrim:0 | lodash:\'padLeft\':3:\'0\'}}&deg;</td>\n            <td class="labelBox">{{::\'dtg\' | attributeLabel}}</td>\n            <td class="valueBox"><st-datetime date="flightSchedule.dtg"></st-datetime></td>\n        </tr>\n        <tr style="height: 20px;">\n            <td colspan="4"></td>\n        </tr>\n        <tr>\n            <td class="labelBox">{{::\'scheduleId\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.scheduleId}}</td>\n            <td class="labelBox">{{::\'label\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.label}}</td>\n        </tr>\n        <tr>\n            <td class="labelBox">{{::\'origin\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.origin}}</td>\n            <td class="labelBox">{{::\'destination\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.destination}}</td>\n        </tr>\n        <tr>\n            <td class="labelBox">{{::\'platform\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.platform}}</td>\n            <td class="labelBox">{{::\'aircraftType\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.aircraftType}}</td>\n        </tr>\n        <tr>\n            <td class="labelBox">{{::\'nationality\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.nationality}}</td>\n            <td class="labelBox">{{::\'count\' | attributeLabel}}</td>\n            <td class="valueBox">{{flightSchedule.count}}</td>\n        </tr>\n    </table>\n    <div class="tableTitle">\n        Waypoints:\n    </div>\n    <div  class="expandable" ng-click="wpShowAll = !wpShowAll" ng-class="{\'expand\': (waypoints.length < 10 || wpShowAll)}">\n        <table>\n            <tr>\n                <td class="labelBox">{{::\'lat\' | attributeLabel}}</td>\n                <td class="labelBox">{{::\'lon\' | attributeLabel}}</td>\n                <td class="labelBox">{{::\'speed\' | attributeLabel}}</td>\n                <td class="labelBox">{{::\'alt\' | attributeLabel}}</td>\n                <td class="labelBox">{{::\'dtg\' | attributeLabel}}</td>\n            </tr>\n            <tr ng-repeat="waypoint in waypoints">\n                <td class="valueBox">{{waypoint.lat < 0 ? \'S\' : \'N\'}}&nbsp;{{waypoint.lat | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;</td>\n                <td class="valueBox">{{waypoint.lon < 0 ? \'W\' : \'E\'}}&nbsp;{{waypoint.lon | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;</td>\n                <td class="valueBox">{{waypoint.speed | convertUnit:\'m/s\':\'knots\' | numberTrim:0}}&nbsp;kts</td>\n                <td class="valueBox">{{waypoint.alt | convertUnit:\'m\':\'ft\' | numberTrim:0}}&nbsp;ft</td>\n                <td class="valueBox"><st-datetime date="waypoint.dtg"></st-datetime></td>\n            </tr>\n        </table>\n    </div>\n    <div class="expandable-ellipsis text-right" ng-click="wpShowAll = !wpShowAll" ng-hide="(waypoints.length < 10 || wpShowAll)"><span>...</span></div>\n    <div class="tableTitle">{{::\'comments\' | attributeLabel}}:</div>\n    <div class="commentSection"><pre>{{flightSchedule.comments}}</pre></div>\n</div>\n'},function(t,e){t.exports='<div class="airCard fsPopup">\n    <div class="airCardHeader flex-row flex-align-items-center">\n        <ccri-popup-components-capabilities-list\n            capabilities="capabilities" name="name" record="record" metadata="metadata"\n            identifier="$parent.$parent.$parent.$parent.popupId" button-limit="8"\n        ></ccri-popup-components-capabilities-list>\n        <div class="title flex-1 ellipsis"><b>{{record.label}}</b></div>\n        <ccri-angular-utils-close-btn\n              ng-if="$parent.$parent.removeTab && $parent.$parent.tabs.length > 1"\n              ng-click="$parent.$parent.removeTab($parent.$parent.tab)">\n        </ccri-angular-utils-close-btn>\n    </div>\n    <div ccri-popup-components-paged-table-scroll-link\n         ccri-popup-components-paged-table-resize class="fsDisplay">\n        <st-flight-schedule-display flight-schedule="record" waypoints="waypoints"></st-flight-schedule-display>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="fsTab">\n    <div ng-if="!scheduleAvailable" style="text-align:center">\n        <b>Flight Schedule not available for this track.</b>\n    </div>\n    <div ng-if="scheduleAvailable && loading && !tabHasBeenFocused" style="text-align:center">\n        <b>Loading ...</b>\n    </div>\n    <div ng-if="scheduleAvailable && (!loading || tabHasBeenFocused)">\n        <st-flight-schedule-display flight-schedule="schedule" waypoints="waypoints"></st-flight-schedule-display>\n    </div>\n</div>\n\n'},function(t,e,n){var r=n(2160),i=n(2161);angular.module("stealth.air.geo.ol3.layers",["ccri.angular-utils","stealth.air.profile","stealth.core.geo.ol3.follow","stealth.core.geo.ol3.format","stealth.core.geo.ol3.layers","stealth.core.geo.ows","stealth.core.popup.capabilities","stealth.core.utils","stealth.live.list"]).factory("stealth.air.geo.ol3.layers.LiveWmsLayerConstructorFactory",["$rootScope","$q","toastr","colors","cqlHelper","wfs","mapFollowManager","ccri.angular-utils.WidgetDef","stealth.live.list.Panel","stealth.air.list.AirPanel","stealth.live.list.ListPopupCoordinator","stealth.air.list.AirCoordinator","stealth.air.profile.profileBuilder","stealth.core.geo.ol3.layers.defaultPopup","stealth.timelapse.geo.ol3.layers.liveStyleEnvHolder",function(t,e,n,r,i,o,a,s,l,c,u,d,f,p,h){return{getConstructor:function(g){var m=function(m,v,y,b,w,x,S){var C,E,T,M,k,A,I,O,P,L,D,N,R=this,F=ccriMap.base.LayerManager.getInstance(),B=_.clone(y);if(_.has(b.KeywordConfig,"air.live")){this.layerLabels={label1:"label",label2:"subLabel",label3:"altFt"},_.has(b.KeywordConfig,"air.live.FlightAware")&&(this.layerLabels={label1:"callsign_icao",label2:"hexid",label3:"squawk"}),B.ENV=function(t){return _.isEmpty(t)?null:_.map(t,function(t,e){return e+":"+t}).join(";")}(_.merge({},h.env,this.layerLabels))}g.apply(this,[m,v,B,b,w,S]);var j,q={onDestroy:this.onDestroy,getBaseCapabilities:this.getBaseCapabilities,activate:this.activate,inactivate:this.inactivate,refresh:this.refresh,updateRequestParams:this.updateRequestParams,getStyleEnv:this.styleDirectiveScope.getStyleEnv,onLayerStateUpdate:this.onLayerStateUpdate};function z(t){var n=_.last(t.split(/\s*;\s*/));if("INCLUDE"===n)return e.resolve("INCLUDE;INCLUDE");var r={LAYERS:b.Name,cql_filter:n};return o.getFeature(b.wfsUrl,b.Name,r,void 0,!0).then(function(t){return 0===t.data.features.length?e.reject():_.map(t.data.features,function(t){return"(scheduleId='"+t.properties.scheduleId+"')"}).join(" OR ")+";"+n}).catch(function(){return"EXCLUDE; "+n})}this.onDestroy=function(){y=b=x=null,R.removeRefreshListener(D),R.removeRefreshListener(I),O&&(O(),O=null);R=null,P=_.noop,L=null,E&&(E.hideButton(),E.onDestroy(),E=null);T&&(T.onDestroy(),T=null);q.onDestroy(),q=null},this.activate=function(){q.activate(),j=!0,E&&E.showButton()},this.inactivate=function(){q.inactivate(),j=!1,E&&E.hideButton()},C=_.get(b.KeywordConfig,["timelapse","live",b.stealthWorkspace,"idField"]),M=b.wfsUrl,k=_.get(b.KeywordConfig,"click.search.customPopup.directive",p.tabs),a.setBuffer(92600),P=function(){var t=F.getLayer(R.id);t&&t.refresh()},_.isUndefined(C)?n.error("No ID field specified for "+b.Name+". Popups and list view will not work.","Live Layer Error",{timeOut:15e3}):_.has(b.KeywordConfig,"air.live")?(T=new d(C,this,b,M),_.has(b.KeywordConfig,["timelapse","live",b.stealthWorkspace,"list"])&&(E=new c(C,M,this,b,B,P,T,S))):(T=new u(C,this,b,M),_.has(b.KeywordConfig,["timelapse","live",b.stealthWorkspace,"list"])&&(E=new l(C,M,this,b,B,P,T,S))),o.getFeatureTypeDescription(M,b.Name,!1,!0),this.buildSearchPointWidgetsForResponse=function(e,n){return e.isError||!_.isArray(e.records)||_.isEmpty(e.records)||_.isUndefined(C)?null:_.map(e.records,function(r,i){var o=(n||t).$new(),a=e.metadata[i].source,l=a.geometry.coordinates,c=T.getRecordState(r,l);o.response=e,o.record=c.record,o.record.name=e.name+" ("+r[_.get(b.KeywordConfig,"capability.live.field.displayId","label")]+")",o.record.sourceFeature=a,o.index=i,o.metadata=e.metadata[i],o.metadata.dataSource=e.dataSource,o.displayState=c.displayState,o.tabFocused=!1;var u=function(t,e){var n=angular.element("div[data-popup-id="+t+"]");if(n){var r=n.find(".popupHeader");r&&(_.isEmpty(e)?r.css("border",""):r.css("border","1px solid "+e))}},d=o.$on("PopupCollapsed",function(){if(o.tabFocused){var t=_.get(c,"displayState.highlight");t&&u(o.popupId,t["border-color"])}}),p=o.$on("PopupExpanded",function(){o.tabFocused&&u(o.popupId)});return o.$on("$destroy",function(){T&&T.removePopup(r,o),_.isFunction(d)&&d(),_.isFunction(p)&&p(),u=d=p=null}),o.response.capabilities.follow=c.followCapability,T.addPopup(r,o),!_.isUndefined(o.response.capabilities.altitudeProfile)&&_.isString(o.response.capabilities.altitudeProfile.layerName)&&_.isString(o.response.capabilities.altitudeProfile.trkIdField)&&(o.response.capabilities.altitudeProfile=_.merge(o.response.capabilities.altitudeProfile,{toolTipText:"Get Altitude Profile",iconClass:"ccri-icon ccri-icon-point-chart",onClick:function(t,e,n,r){if(!_.isNull(T)){var i=T.getRecordState(e);n.color=i.displayState.highlight["border-color"],i.altitudeProfile.open=!0,i.altitudeProfile.visible=!0,A?f.addToProfile(A,t,e,n):A=f.createProfile(t,e,n,r.dataSource)}}})),{level:_.padLeft(R.reverseZIndex,4,"0")+"_"+_.padLeft(i,4,"0"),iconClass:R.styleDirectiveScope.styleVars.iconClass,tooltipText:o.record.name,widgetDef:new s({tag:k,scope:o,attrs:'response="response" record="record" index="index" metadata="metadata" display-state="displayState"'}),onTabFocus:function(){o.tabFocused=!0,_.isNull(T)||T.checkHighlight(r)},onTabBlur:function(){o.tabFocused=!1,_.isNull(T)||T.checkHighlight(r)}}})},_.has(b.KeywordConfig,"timelapse.live.flightSchedule.waypointLayerName")?(N=[],D=function(){if(0===N.length)return e.when();var n={LAYERS:b.Name};return n.cql_filter=_.map(N,function(t){return"(scheduleId='"+t.scheduleId+"')"}).join(" OR "),o.getFeature(b.wfsUrl,b.Name,n,void 0,!0).then(function(n){var r=e.defer();return n.data.features.length>0?t.$applyAsync(function(){_.each(N,function(t){var e=_.find(n.data.features,function(e){return t.scheduleId===e.properties.scheduleId});_.isUndefined(e)||(_.merge(t,e.properties),t.lat=e.geometry.coordinates[1],t.lon=e.geometry.coordinates[0])}),r.resolve()}):r.resolve(),r.promise})},R.addRefreshListener(D),this.popupOptions.onTabFocus=function(t){N.push(t)},this.popupOptions.onTabBlur=function(t){_.pull(N,t)},this.getSearchPointCql=function(t,e,n){var r=_.last(t.split(/\s*;\s*/));return"EXCLUDE; "+i.combine(i.operator.AND,r,i.combine(i.operator.OR,_.map(e,function(t){return i.buildBboxFilter(n,t)})))},this.refresh=function(t){_.isUndefined(t)||_.isEmpty(t)?q.refresh(L):(t.LAYERS=b.KeywordConfig.timelapse.live.flightSchedule.waypointLayerName+","+b.Name,z(t.CQL_FILTER).then(function(e){t.CQL_FILTER=e,L=_.clone(t),q.refresh(t)}))},this.addRefreshListener(function(t){return j&&_.isEmpty(t)?z(L.CQL_FILTER).then(function(t){L.CQL_FILTER!==t&&(L.CQL_FILTER=t,q.updateRequestParams(L))}):e.when()})):_.has(b.KeywordConfig,"air.live")&&(this.styleDirective="stealth.air.geo.ol3.layers.live-style",this.styleDirectiveScope.styleVars.iconClass="fa fa-fw fa-lg fa-plane",this.setDefaultStyle("showHalo",!!x),this.setDefaultStyle("haloColor",x||r.getColor()),this.setDefaultStyle("labels",this.layerLabels),this.setDefaultStyle("constantAttr",this.layerLabels.label1),this.setDefaultStyle("showLabels",!0),this.setDefaultStyle("showL16Id",!0),this.styleDirectiveScope.toggleShow=function(t){var e=!R.styleDirectiveScope.layerState[t];R.stateManager.dispatch({type:ccriMap.base.MapLayerActions.TypeKeys.SET_STYLE,id:R.id,style:R.styleMap.set(t,e)})},this.styleDirectiveScope.updateHaloColor=function(){R.stateManager.dispatch({type:ccriMap.base.MapLayerActions.TypeKeys.SET_STYLE,id:R.id,style:R.styleMap.set("haloColor",R.styleDirectiveScope.layerState.haloColor)})},this.onLayerStateUpdate=function(t,e){q.onLayerStateUpdate(t,e),e.opacity===t.opacity&&R.styleDirectiveScope.refreshStyleEnv()},o.getFeatureTypeDescription(M,b.Name,!1,!0).then(function(t){for(var e=[],n=t.featureTypes[0].properties,r=n.length;r--;){var i=n[r];e.unshift(i.name)}R.styleDirectiveScope.layerAttributes=e,R.styleDirectiveScope.selectLabelFn=function(t,e){var n=_.clone(R.styleDirectiveScope.layerState.labels);n[t]=e,R.stateManager.dispatch({type:ccriMap.base.MapLayerActions.TypeKeys.SET_STYLE,id:R.id,style:R.styleMap.set("labels",n)})},R.setAllLabels=function(t){R.stateManager.dispatch({type:ccriMap.base.MapLayerActions.TypeKeys.SET_STYLE,id:R.id,style:R.styleMap.set("labels",_.transform(t,function(t,e,n){t[n]=-1!==R.styleDirectiveScope.layerAttributes.indexOf(e)?e:null}))})}}),this.styleDirectiveScope.setAllLayers=function(){R.layerManager.layers.forEach(function(t){t.styleDirective===R.styleDirective&&_.isFunction(t.setAllLabels)&&t.setAllLabels(R.styleDirectiveScope.layerState.labels)})},this.styleDirectiveScope.getStyleEnv=function(){return _.merge({},q.getStyleEnv(),R.styleDirectiveScope.layerState.showHalo?{showHalos:!0,shapeStrokeColor:R.styleDirectiveScope.layerState.haloColor.slice(1)}:{},{label1:R.styleDirectiveScope.layerState.labels.label1,label2:R.styleDirectiveScope.layerState.labels.label2,label3:R.styleDirectiveScope.layerState.labels.label3,constantAttr:R.styleDirectiveScope.layerState.constantAttr},R.styleDirectiveScope.layerState.showLabels?{}:{showLabels:!1},R.styleDirectiveScope.layerState.showL16Id?{}:{showL16Id:!1})},this.styleDirectiveScope.refreshStyleEnv(),I=function(){A&&t.$emit("stealth.air.profile.popup.updateData:"+A,!1)},R.addRefreshListener(I),O=t.$on("stealth.air.geo.ol3.layers.live.altitudeProfileEvent",function(t,e,n){if(A===e)switch(n.eventType){case"trackRemoved":T.altitudeProfileTrackRemoved(n.record);break;case"trackVisibilityChange":T.getRecordState(n.record).altitudeProfile.visible=n.visible,T.checkHighlight(n.record);break;case"profileClosed":A=null}}))};return m.prototype=Object.create(g.prototype),m}}}]).controller("liveAirPopupController",["$scope",function(t){t.name=t.record.name,t.capabilities=t.response.capabilities}]).directive("stealth.air.geo.ol3.layers.liveStyle",[function(){return{template:r}}]).directive("stLiveFaPopup",[function(){return{restrict:"E",scope:{response:"=",record:"=",index:"=",metadata:"=?",displayState:"=?"},controller:"liveAirPopupController",controllerAs:"liveAirPopCtrl",template:i}}])},function(t,e){t.exports='<div style="padding:4px;">\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.visibilityName\'"></ui-include>\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.opacitySlider\'"></ui-include>\n    <div class="layerStyleRow" ng-if="viewState.thresholdFilter">\n        <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.thresholdFilterSlider\'"></ui-include>\n    </div>\n    <div class="layerStyleRow" style="margin:8px 0 0 0">\n        <div class="cell clickable" style="padding-right:8px"\n             ng-click="toggleShow(\'showLabels\')">\n            <i class="fa fa-lg fa-fw"\n               ng-class="layerState.showLabels ? \'fa-check-square-o\' : \'fa-square-o\'"\n            ></i>\n            Show labels\n        </div>\n        <div class="cell clickable" style="padding-right:8px"\n             ng-click="toggleShow(\'showL16Id\')">\n            <i class="fa fa-lg fa-fw"\n               ng-class="layerState.showL16Id ? \'fa-check-square-o\' : \'fa-square-o\'"\n            ></i>\n            Show L16 Id\n        </div>\n        <div class="cell clickable"\n             ng-click="toggleShow(\'showHalo\')">\n            <i class="fa fa-lg fa-fw"\n               ng-class="layerState.showHalo ? \'fa-check-square-o\' : \'fa-square-o\'"\n            ></i>\n            Show halos\n        </div>\n        <div class="cell" ng-class="{\'ng-hide\': !layerState.showHalo}">\n            <div class="cell">Color</div>\n            <div class="cell">\n                <span class="fa fa-lg fa-square clickable colorpickerSquare"\n                      ng-style="{color: layerState.haloColor}"\n                      colorpicker colorpicker-position="bottom"\n                      ng-model="layerState.haloColor"\n                      ccri-angular-utils-change="updateHaloColor()"\n                      uib-tooltip="Change halo color" tooltip-class="nowrap"\n                      tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n                      tooltip-trigger="mouseenter" tooltip-append-to-body="true">\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class="layerStyleRow" ng-if="layerAttributes" style="margin:8px 0 0 2px">\n        <div class="labelEdit">Labels:\n            <span ng-show="!labelEdit" ng-repeat="(key, value) in layerState.labels track by $index" ng-if="value">{{value}}{{$last ? \'\' : \', \'}}</span>\n            <i class="fa fa-fw fa-pencil" ng-click="labelEdit = !labelEdit"></i>\n            <div ng-show="labelEdit" class="labelAll action-listing clickable" ng-click="setAllLayers()">\n                <i class="fa fa-refresh"></i> <span class="action-text">Sync Labels</span>\n            </div>\n        </div>\n       <div ng-show="labelEdit">\n            <ccri-angular-utils-typeahead\n                    ng-repeat="(key, value) in layerState.labels track by $index"\n                    ng-model="layerState.labels[key]" name="{{key}}"\n                    ng-change="selectLabelFn(key, layerState.labels[key])"\n                    ccri-angular-utils-typeahead-options="attr as attr for attr in layerAttributes"\n                    placeholder="Label {{$index}}"\n            ></ccri-angular-utils-typeahead>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="airCard nmpPopup">\n    <div class="airCardHeader flex-row" ng-style="displayState.highlight">\n        <ccri-popup-components-capabilities-list\n            capabilities="capabilities" name="name" record="record" metadata="metadata"\n            identifier="$parent.$parent.$parent.$parent.popupId" button-limit="8"\n        ></ccri-popup-components-capabilities-list>\n        <div class="flex-1 ellipsis">\n            {{record.label}}&nbsp;{{(record.subLabel | lodash:\'isEmpty\') ? \'\' : \'/&nbsp;\' + record.subLabel}}\n        </div>\n        <ccri-angular-utils-close-btn\n             ng-if="$parent.$parent.removeTab && $parent.$parent.tabs.length > 1"\n             ng-click="$parent.$parent.removeTab($parent.$parent.tab)">\n        </ccri-angular-utils-close-btn>\n    </div>\n    <div class="ng-hide text-warning" ng-class="{\'ng-hide\': !displayState.trackEnded}"><strong>Track no longer active</strong></div>\n    <div class="nmpCardBody">\n        <table>\n            <tr>\n                <td class="keyColumn">Date/Time</td>\n                <td><st-datetime date="record.dtg"></st-datetime></td>\n            </tr>\n            <tr>\n                <td class="keyColumn">Alt MSL</td>\n                <td>\n                    <span ng-class="{\'ng-hide\' : !record.altitude}">\n                        {{record.altitude | numberTrim:0}}&nbsp;ft\n                    </span>\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">Heading</td>\n                <td>{{record.heading | numberTrim:0 | lodash:\'padLeft\':3:\'0\'}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">Callsign</td>\n                <td>{{record.callsign_icao}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">Hex ID</td>\n                <td>{{record.hexid}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">Registration</td>\n                <td>{{record.registration}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">Squawk</td>\n                <td>{{record.squawk}}</td>\n            </tr>\n        </table>\n    </div>\n</div>\n'},function(t,e,n){var r=n(2163);angular.module("stealth.air.geo.ol3.layers").directive("stNmpLayerPopup",[function(){return{restrict:"E",scope:{response:"=",record:"=",index:"=",metadata:"=?",displayState:"=?"},controller:"nmpPopupController",template:r}}]).controller("nmpPopupController",["$scope",function(t){t.name=t.record.name,t.capabilities=t.response.capabilities}])},function(t,e){t.exports='<div class="airCard nmpPopup" ng-class="{\'lightTheme\': !themeToggle}">\n    <div class="airCardHeader flex-row horiz-slide"  ng-style="displayState.highlight">\n        <ccri-popup-components-capabilities-list\n            capabilities="capabilities" name="name" record="record" metadata="metadata"\n            identifier="$parent.$parent.$parent.$parent.popupId" button-limit="8"\n        ></ccri-popup-components-capabilities-list>\n        <div class="title flex-1 ellipsis clickable" ng-click="themeToggle = !themeToggle"\n            uib-tooltip="Click to toggle style" tooltip-class="nowrap"\n            tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="600"\n            tooltip-trigger="mouseenter">\n            {{record.label}}&nbsp;{{(record.subLabel | lodash:\'isEmpty\') ? \'\' : \'/&nbsp;\' + record.subLabel}}\n        </div>\n        <ccri-angular-utils-close-btn\n              ng-if="$parent.$parent.removeTab && $parent.$parent.tabs.length > 1"\n              ng-click="$parent.$parent.removeTab($parent.$parent.tab)">\n        </ccri-angular-utils-close-btn>\n    </div>\n    <div class="ng-hide text-warning" ng-class="{\'ng-hide\': !displayState.trackEnded}">\n        <strong>Track no longer active</strong>\n    </div>\n    <div class="ng-hide text-warning horiz-slide"\n         ng-class="{\'ng-hide\': !displayState.trackEnded}"\n         id="inactive{{$id}}"><strong>Track no longer active</strong></div>\n    <div class="nmpCardBody">\n        <table>\n            <tr>\n                <td class="keyColumn">{{::\'classification\' | attributeLabel}}</td>\n                <td colspan="3">{{record.classification}}</td>\n            </tr>\n            <tr class="blueUnderline">\n                <td class="keyColumn">{{::\'dtg\' | attributeLabel}}</td>\n                <td colspan="3"><st-datetime date="record.dtg"></st-datetime></td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'lat\' | attributeLabel}}</td>\n                <td>\n                    <span ng-class="{\'ng-hide\' : !record.lat}">\n                        {{record.lat < 0 ? \'S\' : \'N\'}}&nbsp;{{record.lat | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;\n                    </span>\n                </td>\n                <td class="keyColumn">{{::\'state_ellipse_semMaj\' | attributeLabel}}</td>\n                <td>\n                    <span ng-class="{\'ng-hide\' : !record.state_ellipse_semMaj || !record.state_ellipse_semMin || !record.state_ellipse_t}">\n                        {{(record.state_ellipse_semMaj * 0.000539957) | numberTrim:1}}&nbsp;nm x {{(record.state_ellipse_semMin * 0.000539957) | numberTrim:1}}&nbsp;nm {{record.state_ellipse_t | numberTrim:0}}&deg;\n                    </span>\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'lon\' | attributeLabel}}</td>\n                <td>\n                    <span ng-class="{\'ng-hide\' : !record.lon}">\n                        {{record.lon < 0 ? \'W\' : \'E\'}}&nbsp;{{record.lon | numberTrim:4 | lodash:\'trimLeft\':\'-\'}}&deg;\n                    </span>\n                </td>\n                <td class="keyColumn">{{::\'alt\' | attributeLabel}}</td>\n                <td>\n                    <span ng-class="{\'ng-hide\' : !record.alt}">\n                        {{(record.alt * 3.28) | numberTrim:0}}&nbsp;ft\n                    </span>\n                </td>\n            </tr>\n            <tr class="blueUnderline">\n                <td class="keyColumn">{{::\'course\' | attributeLabel}}</td>\n                <td>\n                    <span ng-class="{\'ng-hide\' : !record.course}">\n                        {{record.course  | numberTrim:0 | lodash:\'padLeft\':3:\'0\'}}&deg;\n                    </span>\n                </td>\n                <td class="keyColumn">{{::\'speed\' | attributeLabel}}</td>\n                <td>\n                    <span ng-class="{\'ng-hide\' : !record.speed}">\n                        {{(record.speed * 1.9438) | numberTrim:0}}&nbsp;kts\n                    </span>\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'callsign\' | attributeLabel}}</td>\n                <td>{{record.callsign}}</td>\n                <td class="keyColumn">{{::\'flightNumber\' | attributeLabel}}</td>\n                <td>{{record.flightNumber}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'airline\' | attributeLabel}}</td>\n                <td>{{record.airline}}</td>\n                <td class="keyColumn">{{::\'nationality\' | attributeLabel}}</td>\n                <td>{{record.nationality}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'aircraftType\' | attributeLabel}}</td>\n                <td>{{record.aircraftType}}</td>\n                <td class="keyColumn">{{::\'affiliation\' | attributeLabel}}</td>\n                <td>{{record.affiliation}}</td>\n            </tr>\n            <tr class="blueUnderline">\n                <td class="keyColumn">{{::\'tailNumber\' | attributeLabel}}</td>\n                <td>{{record.tailNumber}}</td>\n                <td class="keyColumn">{{::\'platform\' | attributeLabel}}</td>\n                <td>{{record.platform}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'icao3a\' | attributeLabel}}</td>\n                <td>{{record.icao3a}}</td>\n                <td class="keyColumn">{{::\'modeS\' | attributeLabel}}</td>\n                <td>{{record.modeS}}</td>\n            </tr>\n            <tr class="blueUnderline">\n                <td class="keyColumn">{{::\'iffMode2\' | attributeLabel}}</td>\n                <td>{{record.iffMode2}}</td>\n                <td class="keyColumn">{{::\'iffMode4\' | attributeLabel}}</td>\n                <td>{{record.iffMode4}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'linkTrackNumber\' | attributeLabel}}</td>\n                <td>{{record.linkTrackNumber}}</td>\n                <td class="keyColumn">{{::\'linkReportingUnit\' | attributeLabel}}</td>\n                <td>{{record.linkReportingUnit}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'strength\' | attributeLabel}}</td>\n                <td>{{record.strength}}</td>\n                <td class="keyColumn">{{::\'identity\' | attributeLabel}}</td>\n                <td>{{record.identity}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'linkTrackGUID\' | attributeLabel}}</td>\n                <td>{{record.linkTrackGUID}}</td>\n                <td class="keyColumn">{{::\'linkSensorId\' | attributeLabel}}</td>\n                <td>{{record.linkSensorId}}</td>\n            </tr>\n            <tr class="blueUnderline">\n                <td class="keyColumn">{{::\'linkPPLI\' | attributeLabel}}</td>\n                <td colspan="3">{{record.linkPPLI}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'origin\' | attributeLabel}}</td>\n                <td>{{record.origin}}</td>\n                <td class="keyColumn">{{::\'destination\' | attributeLabel}}</td>\n                <td>{{record.destination}}</td>\n            </tr>\n            <tr class="blueUnderline">\n                <td class="keyColumn">{{::\'activity\' | attributeLabel}}</td>\n                <td>{{record.activity}}</td>\n                <td class="keyColumn">{{::\'emergencyAlert\' | attributeLabel}}</td>\n                <td ng-class="{\'alerts\': !!record.emergencyAlert}">{{record.emergencyAlert}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'thresherId\' | attributeLabel}}</td>\n                <td colspan="3">{{record.thresherId}}</td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'processTime\' | attributeLabel}}</td>\n                <td colspan="3"><st-datetime date="record.processTime"></st-datetime></td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'theaterNetworkMatches\' | attributeLabel}}</td>\n                <td colspan="3">{{record.theaterNetworkMatches}}</td>\n            </tr>\n        </table>\n    </div>\n</div>\n'},function(t,e,n){var r=n(2165);angular.module("stealth.air.geo.ol3.layers").directive("stRecentObsTab",[function(){return{template:r}}])},function(t,e){t.exports='<div class="summary">\n    <table>\n        <tr>\n            <td class="keyColumn" style="background-color:#E0F0FF;">Label</td>\n             <td ng-class="{positiveBool: record.label}">{{record.label}}</td>\n            <td class="keyColumn" style="background-color:#FFBC59;">Sub-label</td>\n            <td ng-class="{positiveBool: record.subLabel}">{{record.subLabel}}</td>\n        </tr>\n    </table>\n</div>\n'},function(t,e,n){var r=n(2167);angular.module("stealth.air.geo.ol3.layers",["stealth.core.popup"]).directive("stSourcesTab",["TabPopupHelper",function(t){return{template:r,scope:{record:"=",response:"=",properties:"="},controller:["$scope",function(e){var n=new t(e,function(t){t.data.features.length>0&&(e.record.sensorsBySource=_.groupBy(_.sortByOrder(_.pluck(t.data.features,"properties"),"lastSeen",["desc"]),"dataSource"),e.record.dataSources=_.keys(e.record.sensorsBySource),e.record.totalObs={},e.record.maxLastSeen={},_.each(e.record.dataSources,function(t){e.record.totalObs[t]=_.sum(e.record.sensorsBySource[t],"numObs"),e.record.maxLastSeen[t]=_.max(e.record.sensorsBySource[t],function(t){return moment(t.lastSeen).valueOf()})}))});e.$on("$destroy",function(){n.destroy(),n=null}),e.record.expandedList=[],e.toggleExpand=function(t){e.record.expandedList=_.xor(e.record.expandedList,[t])}}]}}])},function(t,e){t.exports='<div class="dataSources">\n    <div ng-if="loading && !tabHasBeenFocused" style="text-align:center">\n        <b>Loading ...</b>\n    </div>\n    <div ng-if="!loading || tabHasBeenFocused">\n        <table>\n            <tbody ng-repeat="source in record.dataSources">\n                <tr class="sourceHeader clickable" ng-click="toggleExpand(source)">\n                    <td>\n                        <i class="fa fa-fw" ng-class="(record.expandedList | lodash:\'includes\':source) ? \'fa-caret-down\' : \'fa-caret-right\'"></i>\n                        {{::source}}\n                    </td>\n                    <td class="sourceInfo">{{record.totalObs[source]}}&nbsp;obs</td>\n                    <td class="sourceInfo"><st-datetime date="record.maxLastSeen[source].lastSeen"></st-datetime></td>\n                </tr>\n                <tr ng-if="record.expandedList | lodash:\'includes\':source">\n                    <td class="sourceData" colspan="4">\n                        <div>\n                            <table>\n                                <tr>\n                                    <td class="keyColumn">Sensor Id</td>\n                                    <td class="keyColumn">Obs</td>\n                                    <td class="keyColumn">First Seen</td>\n                                    <td class="keyColumn">Last Seen</td>\n                                    <td class="keyColumn">Sensor Track Id</td>\n                                    <td class="keyColumn">Latency</td>\n                                    <td class="keyColumn">Update Rate</td>\n                                    <td class="keyColumn">More Details</td>\n                                </tr>\n                                <tr ng-repeat="sensor in record.sensorsBySource[source]">\n                                    <td>{{::sensor.sensorId}}</td>\n                                    <td>{{::sensor.numObs}}</td>\n                                    <td class="dateTime">\n                                        <st-datetime\n                                            ng-class="{\'ng-hide\': !sensor.firstSeen}"\n                                            date="::sensor.firstSeen" sep="<br>"\n                                        ></st-datetime>\n                                    </td>\n                                    <td class="dateTime">\n                                        <st-datetime\n                                            ng-class="{\'ng-hide\': !sensor.lastSeen}"\n                                            date="::sensor.lastSeen" sep="<br>"\n                                        ></st-datetime>\n                                    </td>\n                                    <td>{{::sensor.sensorTrackNumber}}</td>\n                                    <td>\n                                        <span ng-class="{\'ng-hide\': !sensor.latency}">\n                                            {{::sensor.latency}}&nbsp;s\n                                        </span>\n                                    </td>\n                                    <td>\n                                        <span ng-class="{\'ng-hide\': !sensor.updateRate}">\n                                            {{::sensor.updateRate}}&nbsp;s\n                                        </span>\n                                    </td>\n                                    <td>{{::sensor.moreDetails}}</td>\n                                </tr>\n                            </table>\n                        </div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n'},function(t,e){angular.module("stealth.air.lookup.aircraft").run(["stealth.air.lookup.aircraft.service",function(t){ccriCoreconfig.config.get("air.lookupCacheEnabled")&&t.init()}]).service("stealth.air.lookup.aircraft.service",["$q","stealth.air.userRoles","toastr","wfs",function(t,e,n,r){var i,o={},a=[],s=[],l=[];this.init=function(){a.length=0,s.length=0,l.length=0,DataSourceManager.loadDataSources().then(function(){var c=DataSourceManager.getDataSourcesByKeyword("air.aircraft");if(i=c.first(),e.userCanEdit(i)){if(c.isEmpty())return n.error("No aircraft data source"),t.reject("No aircraft data source");r.getFeature(i.wfsUrl,i.name,void 0,void 0,!0).then(function(t){o=_.indexBy(_.pluck(t.data.features,"properties"),"skylightId"),Array.prototype.push.apply(a,_(o).values().sortBy("specificType").value()),Array.prototype.push.apply(s,_(a).pluck("specificType").unique().sort().value()),Array.prototype.push.apply(l,_(a.filter(function(t){return t.isPlatformType})).pluck("specificType").unique().sort().value())})}},function(){n.error("Unable to retrieve aircraft data")})},this.getAll=function(){return o},this.get=function(t){return o[t]},this.getSortedArray=function(){return a},this.getTypeArray=function(){return s},this.getPlatformArray=function(){return l}}])},function(t,e){angular.module("stealth.air.lookup.airfield").run(["stealth.air.lookup.airfield.service",function(t){ccriCoreconfig.config.get("air.lookupCacheEnabled")&&t.init()}]).service("stealth.air.lookup.airfield.service",["$q","stealth.air.userRoles","toastr","wfs",function(t,e,n,r){var i,o={},a=[];this.init=function(){a.length=0,DataSourceManager.loadDataSources().then(function(){var s=DataSourceManager.getDataSourcesByKeyword("air.airfield");if(i=s.first(),e.userCanEdit(i)){if(s.isEmpty())return n.error("No airfield data source"),t.reject("No airfield data source");r.getFeature(i.wfsUrl,i.name,void 0,void 0,!0).then(function(t){o=_.indexBy(_.map(_.pluck(t.data.features,"properties"),function(t){return t.jsonObj=angular.fromJson(t.serializedJson),t}),"jsonObj.skylightId"),Array.prototype.push.apply(a,_(o).values().sortBy("jsonObj.name").value())})}},function(){n.error("Unable to retrieve airfield data")})},this.getAll=function(){return o},this.get=function(t){return o[t]},this.getSortedArray=function(){return a}}])},function(t,e){angular.module("stealth.air.lookup.country").run(["stealth.air.lookup.country.service",function(t){ccriCoreconfig.config.get("air.lookupCacheEnabled")&&t.init()}]).service("stealth.air.lookup.country.service",["$q","stealth.air.userRoles","toastr","wfs",function(t,e,n,r){var i,o={},a=[];this.init=function(){a.length=0,e&&DataSourceManager.loadDataSources().then(function(){var s=DataSourceManager.getDataSourcesByKeyword("air.country");if(i=s.first(),e.userCanEdit(i)){if(s.isEmpty())return n.error("No country data source"),t.reject("No country data source");var l=i.keywordConfig.getIn(["air","country","field","iso2"],"ISO2"),c=i.keywordConfig.getIn(["air","country","field","name"],"NAME");r.getFeature(i.wfsUrl,i.name,void 0,void 0,!0).then(function(t){o=_.indexBy(_.pluck(t.data.features,"properties"),l),Array.prototype.push.apply(a,_(o).values().sortBy(l).value().map(function(t){return{ISO2:t[l],NAME:t[c]}}))})}},function(){n.error("Unable to retrieve country data")})},this.getAll=function(){return o},this.get=function(t){return o[t]},this.getSortedArray=function(){return a}}])},function(t,e){angular.module("stealth.air.lookup",["stealth.air.lookup.aircraft","stealth.air.lookup.airfield","stealth.air.lookup.country"])},function(t,e){angular.module("stealth.air.profile",[]).service("stealth.air.profile.activeAltitudeProfiles",["$rootScope","stealth.air.profile.profileBuilder",function(t,e){this.showProfile=function(t,r,i,o,a){if(r&&n[r])e.addToProfile(n[r],i,t,o);else{var s=e.createProfile(i,t,o,a);r&&(n[r]=s)}};var n={};t.$on("stealth.air.geo.ol3.layers.live.altitudeProfileEvent",function(t,e,r){"profileClosed"===r.eventType&&_.each(_.keys(n),function(t){n[t]===e&&delete n[t]})})}])},function(t,e){angular.module("stealth.air.profile",["stealth.timelapse.stores"]).run(["queryBinStoreExtender","stealth.air.profile.activeAltitudeProfiles",function(t,e){t.addCapabilitiesExtender(function(t){var n=t.altitudeProfile;n&&n.layerName&&n.trkIdField&&(n.toolTipText="Get Altitude Profile",n.iconClass="ccri-icon ccri-icon-point-chart",n.onClick=function(t,n,r,i){e.showProfile(n,i.mapLayerId,t,r,i.dataSource)});return t})}])},function(t,e){angular.module("stealth.air.profile",["ccri.angular-utils","ccri.popup","stealth.core.geo.ol3.layers","stealth.core.geo.ows"]).service("stealth.air.profile.openRecordPopup",["$q","$rootScope","toastr","wfs","ccri.angular-utils.WidgetDef","ccri.popup.manager","stealth.core.geo.ol3.layers.mapLayerPopup","stealth.core.popup.components.fieldFormat",function(t,e,n,r,i,o,a,s){var l,c,u,d,f=angular.element(".primaryDisplay > ccri-popup-container"),p=f.data("ccri.popup.containerId"),h=o.getViewportDim(p);f=null,this.timelapsePopup=function(f,g,m){t.all({response:r.getFeature(g.wfsUrl,g.name,f),layerDescription:r.getFeatureTypeDescription(g.wfsUrl,g.name)}).then(function(t){if(0!==t.response.data.features.length){var r=DataSourceManager.buildLegacyLayer(g);if(r){(l=_.get(r,"KeywordConfig"))||n.error("Unable to open popup. No keywords found."),c=function(t,n){var i=t+"="+(angular.isString(n)?"'"+n+"'":n);e.$emit("Launch Timelapse Wizard",{currentLayer:r,storeName:r.Title+"("+i+")",cql:i})},u=_.merge({name:r.Name,getLayerLegendStyle:function(){return{color:m}},metadata:_.map(t.response.data.features,function(t){return{source:t}}),capabilities:l.capability,fieldTypes:t.layerDescription.featureTypes[0].properties,isFilterable:!0,filterHandler:c,popupOptionsOverrides:_.get(l,"click.search.customPopup")},s.formatFromKeywords(_.pluck(t.response.data.features,"properties"),l)),d={level:"0000",iconClass:"ccri-icon ccri-icon-point-chart",tooltipText:r.Title,onTabFocus:null,onTabBlur:null,directive:"ccri-popup-components-paged-table",type:"table"};var f=e.$new();f.results=_.flatten([a.buildWidgetsForResponse(u,f,d)]),f.popupId=o.displayPopup(p,"Point Details","Details","fa-circle",new i({tag:"ccri-popup-components-tab-container",scope:f,attrs:'results="results" active-tab-idx="activeTabIdx" popup-id="popupId"'}),{offsets:[h[0]/2,h[1]/2],onClose:function(){f.$destroy(),f=null}}),l=c=u=d=null}else n.error("Unable to open popup. Matching layer not found.")}},function(){n.error("Unable to open popup")})}}])},function(t,e,n){var r=n(2176),i=n(2177);angular.module("stealth.air.profile",["ccri.popup","stealth.core.geo.ows","stealth.core.utils"]).service("stealth.air.profile.profileBuilder",["$rootScope","$interpolate","colors","toastr","ccri.angular-utils.WidgetDef","ccri.popup.manager",function(t,e,n,r,i,o){var a,s=angular.element(".primaryDisplay > ccri-popup-container"),l=[];this.addToProfile=function(i,a,s,c){if(_.isEmpty(c.layerName)||_.isEmpty(c.trkIdField)||_.isEmpty(s[c.trkIdField]))r.error(a+" is missing information required to show Altitude Profile.");else{var u=_.find(l,"popupId",i);_.isUndefined(u)||(_.some(u.popupScope.chartProperties.tracks,"trkId",s[c.trkIdField])?o.focusPopup(u.popupId):(u.popupScope.chartProperties.tracks.push({liveRecord:s,trkId:s[c.trkIdField],color:_.isUndefined(c.color)||"white"===c.color?n.getColor():c.color,title:_.isUndefined(c.title)?null:e(c.title)(s),showHistory:u.popupScope.showAllHistory,visible:u.popupScope.showAll}),t.$emit("stealth.air.profile.popup.updateData:"+u.popupId,!0)))}},this.createProfile=function(c,u,d,f){if(_.isEmpty(d.layerName)||_.isEmpty(d.trkIdField)||_.isEmpty(u[d.trkIdField]))return r.error(c+" is missing information required to show Altitude Profile."),null;_.isUndefined(a)&&(a=s.data("ccri.popup.containerId"),s=null);var p=o.getViewportDim(a),h=t.$new(),g=d.layerName,m=DataSourceManager.getDataSourceByLayerName(g);if(m){h.chartProperties={layerName:m.name,layerType:d.layerType||"obs",historicalLayerName:d.historicalLayerName,historicalLayerDtgField:d.historicalLayerDtgField||"dtg",trkIdField:d.trkIdField||"trkId",dtgField:d.dtgField||"dtg",altitudeField:d.altitudeField||"altitude",altitudeUnits:d.altitudeUnits||"meter",dataSource:m,tracks:[{liveRecord:u,trkId:u[d.trkIdField],color:_.isUndefined(d.color)||"white"===d.color?n.getColor():d.color,title:_.isUndefined(d.title)?null:e(d.title)(u),showHistory:!1,visible:!0}]};var v=o.displayPopup(a,"Altitude Profile","altitudeProfile","ccri-icon ccri-icon-point-chart",new i({tag:"st-attr-profile-popup",scope:h}),{offsets:[p[0]-10*l.length,50*l.length],positioning:Popup.Positioning.TopRight,contentWidth:600,contentHeight:300,contentMinWidth:400,contentMinHeight:200,onClose:function(){var t=_.find(l,"popupScope",h);_.pull(l,t),h.popupClosed(),h.$destroy(),h=null,t=null,p=null}});return l.push({popupScope:h,popupId:v}),v}r.error("No matching data source found for "+g,"Altitude Profile Error")}}]).run(["$templateCache",function(t){t.put("air/profile/popup.tpl.html",r)}]).directive("stAttrProfilePopup",["$compile","$document","$filter","$rootScope","$timeout","cqlHelper","stealth.air.profile.openRecordPopup","stealth.core.geo.ol3.overlays.Vector","toastr","wfs","CONFIG",function(t,e,n,r,i,o,a,s,l,c,u){return{templateUrl:"air/profile/popup.tpl.html",link:function(d,f){var p,h,g,m,v,y;d.isLoading=!0,d.autoRefresh=!1,d.showAll=!0,d.showAllHistory=!1,d.updateData=_.partial(L,null,!0);var b=d.chartProperties.layerName,w=d.chartProperties.trkIdField,x=d.chartProperties.dtgField,S=d.chartProperties.altitudeField,C=f.find(".scatterplot").get(0),E=parseInt(f.closest(".popupWindow").attr("data-popup-id"),10),T=!1,M=new ol.format.WKT,k=new s,A=new s,I=new s;function O(t,e){e[S]=_.isFinite(e[S])?Math.round(MathUtils.converter.convert(e[S],d.chartProperties.altitudeUnits,"foot")):null,t[e[w]].values.splice(_.sortedIndex(t[e[w]].values,{x:e[x]},"x"),0,{id:e.id,x:e[x],y:e[S],coord:e.coord,trkId:e[w],color:t[e[w]].color,opacity:_.isNull(e[S])?0:1})}function P(){var t=d.chartProperties.dataSource.wfsUrl;return c.getDefaultGeometryFieldName(t,b).then(function(e){return y={outputFormat:"csv",LAYERS:b,cql_filter:o.combine(o.operator.OR,_.map(d.chartProperties.tracks,function(t){return w+"='"+t.trkId+"'"})),propertyName:[w,x,S,e].join()},c.getFeature(t,b,y).then(function(t){var n=d3.csv.parse(t.data);"summary"===d.chartProperties.layerType.toLowerCase()&&(n=_(n).sortByOrder([function(t){return moment.utc(_.last(t[x].replace(/[\[\]]/g,"").split(",")),"ddd MMM DD HH:mm:ss UTC YYYY").unix()}],["desc"]).uniq(w).value()),h=_.cloneDeep(_.indexBy(d.chartProperties.tracks,"trkId")),_.each(h,function(t){t.values=[]}),_.each(n,function(t){if("summary"===d.chartProperties.layerType.toLowerCase()){var n=M.readGeometry(t[e]),r=JSON.parse(t[S]),i=_(t[x].replace(/[\[\]]/g,"").split(",")).map(function(t){var e=moment.utc(t,"ddd MMM DD HH:mm:ss UTC YYYY");return e.isValid()?e.toDate():null}).compact().value();n.getCoordinates().length===r.length&&r.length===i.length&&_.each(n.getCoordinates(),function(e,n){var o={id:angular.toJson({CQL_FILTER:w+"='"+t[w]+"' AND "+d.chartProperties.historicalLayerDtgField+"='"+i[n].toISOString()+"'"}),coord:e};o[S]=parseInt(r[n],10),o[x]=i[n],o[w]=t[w],O(h,o)})}else t.id=angular.toJson({featureID:t.FID}),t[S]=parseInt(t[S],10),t[x]=moment.utc(t[x]).toDate(),t.coord=M.readGeometry(t[e]).getCoordinates(),O(h,t)});var r=0;g=_.map(d.chartProperties.tracks,function(t){return r+=h[t.trkId].values.length,{key:t.trkId,values:h[t.trkId].visible?h[t.trkId].values:[]}}),!T&&r>_.get(u,"air.altitudeProfile.warningThreshold",5e3)&&(T=!0,l.warning("Altitude Profile performance can degrade with large amounts of data."))})})}function L(t,e){(e||d.autoRefresh)&&d.chartProperties.tracks.length>0&&(d.isLoading=!0,P().then(function(){D(),d.isLoading=!1},function(){l.error("An error occurred retrieving data for the Altitude Profile"),d.isLoading=!1}))}function D(){var t=N();p.updateAxis({id:"xAxis"},{pad:{min:t,max:t}}).data(g),F(),v.off("click",R),(v=f.find(".sonic-point-set")).on("click",R)}function N(){var t=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY;return _.each(g,function(n){t=Math.min(_.get(_.first(n.values),"x"),t),e=Math.max(_.get(_.last(n.values),"x"),e)}),Math.max(0,.05*(e-t))||0}function R(n){var r=n.target.__data__,o=_.find(d.chartProperties.tracks,"trkId",r.trkId),s=d.$new();s.style={top:n.clientY+"px",left:n.clientX+"px"},s.trackProps=o,s.toggleTrackHistory=function(){o.showHistory=!o.showHistory,F()},s.toggleTrackVisibility=function(){o.visible=!o.visible,B(o)},s.openBBCard=function(){var t="summary"===d.chartProperties.layerType.toLowerCase()?DataSourceManager.getDataSourceByLayerName(d.chartProperties.historicalLayerName):d.chartProperties.dataSource;a.timelapsePopup(angular.fromJson(r.id),t,r.color)};var l=t("<altitude-profile-point-menu></altitude-profile-point-menu>")(s);e.find("body").append(l),i(function(){var t=function(){i(function(){e.off("click",t),s.$destroy(),s=null,l.remove(),l=null})};e.one("click",t)})}function F(){I.clear(),_.each(d.chartProperties.tracks,function(t){if(t.showHistory&&t.visible){var e=new ol.style.Style({image:new ol.style.Circle({radius:3,fill:new ol.style.Fill({color:t.color})})});_.each(h[t.trkId].values,function(t){var n=new ol.Feature(new ol.geom.Point(t.coord));n.setStyle(e),I.addFeature(n)})}})}function B(t,e){r.$emit("stealth.air.geo.ol3.layers.live.altitudeProfileEvent",E,{eventType:"trackVisibilityChange",record:t.liveRecord,visible:t.visible}),_.find(g,"key",t.trkId).values=t.visible?h[t.trkId].values:[],e||D()}k.addToMap(),A.setOpacity(.5),A.addToMap(),I.setOpacity(.5),I.addToMap(),P().then(function(){var t=N();(p=sonic.viz(C,g,{padding:{left:60,bottom:60,top:15},noContentMessage:"No altitude history available."})).addXAxis({id:"xAxis",type:"time",label:{text:"Time"},ticks:{formatFn:function(t){return t.toISOString().replace(/T/,"\n").replace(".000Z","Z")},minHorizSpacing:120},pad:{min:t,max:t}}).addYAxis({min:0,label:{text:"Altitude (ft)"}}),p.addPoints({size:16,zoom:!0,closestPointBy:"x",tooltip:{renderFn:function(t){return function(t){d.removeHighlight(),_.each(t,function(t){var e=h[t.key].values,n=_.find(e,"id",t.point.id),r=_.indexOf(e,n),i=new ol.Feature(new ol.geom.Point(n.coord)),o=_.find(d.chartProperties.tracks,"trkId",t.key);if(i.setStyle(new ol.style.Style({image:new ol.style.Circle({radius:4,fill:new ol.style.Fill({color:o.color})})})),k.addFeature(i),!o.showHistory)for(var a=new ol.style.Style({image:new ol.style.Circle({radius:3,fill:new ol.style.Fill({color:o.color})})}),s=r-3;s<r;s++)if(s>=0){var l=new ol.Feature(new ol.geom.Point(e[s].coord));l.setStyle(a),A.addFeature(l)}})}(t),_.map(t,function(t){var e='<svg height="10px" width="10px"><circle cx="5" cy="7" r="2" fill="'+_.find(d.chartProperties.tracks,"trkId",t.key).color+'"/></svg>',r=t.point.x.toISOString().split("T"),i=n("numberTrim")(t.point.y);return r[1]=r[1].replace(".000Z","Z"),"<div>"+e+r[0]+" "+r[1]+(_.isNull(i)?"":" / "+i+" ft")+"</div>"}).join("")},buffer:{type:"pixel",amount:20}}}),m=r.$on("stealth.air.profile.popup.updateData:"+E,L),(v=f.find(".sonic-point-set")).on("click",R),d.isLoading=!1},function(){l.error("An error occurred retrieving data for the Altitude Profile"),d.isLoading=!1}),d.removeHighlight=function(){k.clear(),A.clear()},d.removeFromProfile=function(t){r.$emit("stealth.air.geo.ol3.layers.live.altitudeProfileEvent",E,{eventType:"trackRemoved",record:t.liveRecord}),_.pull(d.chartProperties.tracks,t),_.remove(g,"key",t.trkId),delete h[t.trkId],D()},d.popupClosed=function(){_.each(d.chartProperties.tracks,function(t){r.$emit("stealth.air.geo.ol3.layers.live.altitudeProfileEvent",E,{eventType:"trackRemoved",record:t.liveRecord})}),r.$emit("stealth.air.geo.ol3.layers.live.altitudeProfileEvent",E,{eventType:"profileClosed"})},d.toggleAllTracksVisibility=function(){var t=!1;d.showAll=!d.showAll,_.each(d.chartProperties.tracks,function(e){e.visible!==d.showAll&&(e.visible=d.showAll,B(e,!0),t=!0)}),t&&D()},d.toggleAllTrackHistory=function(){d.showAllHistory=!d.showAllHistory,_.each(d.chartProperties.tracks,function(t){t.showHistory=d.showAllHistory}),F()},d.$on("$destroy",function(){_.isFunction(m)&&(m(),m=null),v&&v.off("click",R),p=h=g=v=y=C=M=null,k.removeFromMap(),A.removeFromMap(),I.removeFromMap(),k=A=I=null})}}}]).directive("altitudeProfilePointMenu",[function(){return{restrict:"E",template:i}}])},function(t,e){t.exports='<div class="popupFillSpace attributeProfile flex-column">\n    <div class="header flex-row">\n        <div class="flex-1 ellipsis"></div>\n        <div class="header-buttons">\n            <span class="btn action-btn"\n                  ng-class="{\'fa-spin\': isLoading}"\n                  ng-click="updateData()"\n                  uib-tooltip="Refresh"\n                  tooltip-class="nowrap"\n                  tooltip-placement="top-right"\n                  tooltip-animation="false">\n                <i class="fa fa-fw fa-refresh"></i>\n            </span>\n            <span class="btn action-btn"\n                  ng-click="toggleAllTracksVisibility()"\n                  uib-tooltip="{{showAll ? \'Hide All Tracks\' : \'Show All Tracks\'}}"\n                  tooltip-class="nowrap"\n                  tooltip-placement="top-right"\n                  tooltip-animation="false">\n                <i class="fa fa-fw" ng-class="showAll ? \'fa-eye\' : \'fa-eye-slash\'"></i>\n            </span>\n            <span class="btn action-btn"\n                  ng-class="{\'text-primary\': showAllHistory}"\n                  ng-click="toggleAllTrackHistory()"\n                  uib-tooltip="{{showAllHistory ? \'Hide All Track History\' : \'Show All Track History\'}}"\n                  tooltip-class="nowrap"\n                  tooltip-placement="top-right"\n                  tooltip-animation="false">\n                <i class="fa fa-fw fa-history"></i>\n            </span>\n        </div>\n    </div>\n    <div class="scatterplot flex-1" ccri-angular-utils-mouseleave="removeHighlight()"></div>\n    <div class="legend">\n        <span class="legendItem" ng-repeat="track in chartProperties.tracks">\n            <svg height="10px" width="10px">\n                <circle cx="5" cy="6" r="3" ng-style="{\'fill\': track.color}"/>\n            </svg>\n            <span class="legendLabel" ng-if="track.title"\n                  ng-class="{\'hiddenTrack\' : !track.visible}">\n                {{::track.title}}\n            </span>\n            <span class="legendLabel" ng-if="!track.title"\n                  ng-class="{\'hiddenTrack\' : !track.visible}">\n                {{::track.trkId}}\n            </span>\n            <ccri-angular-utils-close-btn ng-click="removeFromProfile(track)"\n                  uib-tooltip="Remove Track" tooltip-class="nowrap"\n                  tooltip-placement="top-right" tooltip-animation="false">\n            </ccri-angular-utils-close-btn>\n        </span>\n    </div>\n</div>\n'},function(t,e){t.exports='<ul class="menu-options point-menu" ng-style="style">\n    <li class="menu-option" ng-click="toggleTrackHistory()">\n        <span ng-class="{\'ng-hide\': trackProps.showHistory}">\n            Show Track History\n        </span>\n        <span ng-class="{\'ng-hide\': !trackProps.showHistory}">\n            Hide Track History\n        </span>\n    </li>\n    <li class="menu-option" ng-click="toggleTrackVisibility()">\n        Hide Track\n    </li>\n    <li class="menu-option" ng-click="openBBCard()">\n        Show Details\n    </li>\n</ul>\n'},function(t,e,n){var r=n(2179),i=n(2180);angular.module("stealth.air.wizard",["stealth.core.utils"]).directive("stWizNmpOptionsLegacy",["$document","$window","CqlFormBuilder",function(t,e,n){return{restrict:"E",scope:{query:"=",cqlTotalLength:"=",cqlMaxLength:"="},controller:["$scope",function(r){var i=function(){r.manageHeight={"max-height":angular.element(t).find(".primaryDisplay").height()-250+"px"}};angular.element(e).bind("resize",i),i(),r.cqlBuilder=new n(_.merge({strings:{aircraftType:null,identity:null,callsign:null,platform:null,modeS:null,nationality:null,activity:null,icao3a:null,flightNumber:null,origin:null,destination:null,linkTrackNumber:null,thresherId:null,linkReportingUnit:null,airline:null,tailNumber:null},numbers:{alt:{convert:_.partial(MathUtils.converter.convert,_,"foot","meter"),unitLabel:"feet"},course:{unitLabel:"degs"},speed:{convert:_.partial(MathUtils.converter.convert,_,"knot","mps"),unitLabel:"knots"}},enums:{affiliation:{choices:["CIVILIAN","MILITARY","UNKNOWN"],selected:[]}},additionalCql:null},r.query.params.cqlParams),function(t,e){r.query.params.cql=t,r.query.params.cqlParams=e})}],template:i}}]).directive("stWizNmpOptions",["$document","$window","CqlFormBuilder",function(t,e,n){return{restrict:"E",scope:{selections:"=",featureTypeProperties:"=",onNameChange:"=",saveQueryOptions:"=",updateSelections:"=",hasNameBeenEdited:"=",saveQuerySelections:"=",getCqlLength:"=",cqlMaxLength:"="},controller:["$scope",function(r){var i=function(){r.manageHeight={"max-height":angular.element(t).find(".primaryDisplay").height()-250+"px"}};angular.element(e).bind("resize",i),i(),r.cqlBuilder=new n(_.merge({strings:{aircraftType:null,identity:null,callsign:null,platform:null,modeS:null,nationality:null,activity:null,icao3a:null,flightNumber:null,origin:null,destination:null,linkTrackNumber:null,thresherId:null,linkReportingUnit:null,airline:null,tailNumber:null},numbers:{alt:{convert:_.partial(MathUtils.converter.convert,_,"foot","meter"),fromUnit:"foot",toUnit:"meter",unitLabel:"feet"},course:{unitLabel:"degs"},speed:{convert:_.partial(MathUtils.converter.convert,_,"knot","mps"),fromUnit:"knot",toUnit:"mps",unitLabel:"knots"}},enums:{affiliation:{choices:["CIVILIAN","MILITARY","UNKNOWN"],selected:[]}},additionalCql:null},r.selections.cqlParams),function(t,e){r.selections.cql=t,r.selections.cqlParams=e})}],template:r}}])},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="cqlInputForm" ng-style="manageHeight">\n        <p class="directions" ng-bind-html="::cqlBuilder.freeTextDirections"></p>\n        <table>\n            <tr>\n                <td class="keyColumn">{{::\'nationality\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.nationality">\n                </td>\n                <td class="keyColumn">{{::\'platform\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.platform">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'aircraftType\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.aircraftType">\n                </td>\n                <td class="keyColumn">{{::\'callsign\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.callsign">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'airline\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.airline">\n                </td>\n                <td class="keyColumn">{{::\'thresherId\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.thresherId">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'origin\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.origin">\n                </td>\n                <td class="keyColumn">{{::\'destination\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.destination">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'flightNumber\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.flightNumber">\n                </td>\n                <td class="keyColumn">{{::\'identity\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.identity">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'modeS\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.modeS">\n                </td>\n                <td class="keyColumn">{{::\'activity\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.activity">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'icao3a\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.icao3a">\n                </td>\n                <td class="keyColumn">{{::\'tailNumber\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.tailNumber">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'linkTrackNumber\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.linkTrackNumber">\n                </td>\n                <td class="keyColumn">{{::\'linkReportingUnit\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.linkReportingUnit">\n                </td>\n            </tr>\n        </table>\n        <table>\n            <tr class="affilRow">\n                <td class="keyColumn">{{::\'affiliation\' | attributeLabel}}</td>\n                <td colspan="3">\n                    <span class="clickable" ng-repeat="choice in ::cqlBuilder.params.enums.affiliation.choices"\n                        ng-click="cqlBuilder.updateEnumSelection(cqlBuilder.params.enums.affiliation.selected, choice)">\n                        <i class="fa" style="width:12px;margin:0 0 0 10px;"\n                            ng-class="(cqlBuilder.params.enums.affiliation.selected | lodash:\'includes\':choice) ? \'fa-check-square-o\' : \'fa-square-o\'"\n                            ></i>\n                            {{::choice}}\n                    </span>\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'alt\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMinPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.alt.min">\n                </td>\n                <td class="mathColumn">\n                    &nbsp;&le;&nbsp;{{::cqlBuilder.params.numbers.alt.unitLabel}}&nbsp;&le;&nbsp;\n                </td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMaxPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.alt.max">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'course\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMinPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.course.min">\n                </td>\n                <td class="mathColumn">\n                    &nbsp;&le;&nbsp;{{::cqlBuilder.params.numbers.course.unitLabel}}&nbsp;&le;&nbsp;\n                </td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMaxPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.course.max">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'speed\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMinPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.speed.min">\n                </td>\n                <td class="mathColumn">\n                    &nbsp;&le;&nbsp;{{::cqlBuilder.params.numbers.speed.unitLabel}}&nbsp;&le;&nbsp;\n                </td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMaxPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.speed.max">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">Add\'l CQL</td>\n                <td colspan="3">\n                    <input class="form-control input-xs"\n                       placeholder="Enter any additional CQL to apply"\n                       ng-change="cqlBuilder.build()"\n                       ccri-angular-utils-select-text-on-focus\n                       ng-model="cqlBuilder.params.additionalCql">\n                </td>\n            </tr>\n        </table>\n        <table class="finalCql">\n            <tr>\n                <td class="keyColumn">Final CQL</td>\n                <td>\n                    <div ng-init="showFullBounds = false"\n                        ng-style="{height: (showFullBounds) ? \'auto\' : \'50px\'}"\n                        ng-click="showFullBounds = !showFullBounds">\n                        {{selections.cql}}\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n    <st-geo-store-name-form\n        preselected-name="selections.storeName"\n        on-change="onNameChange"\n        wizard-form="wizardForm"\n    ></st-geo-store-name-form>\n    <st-geo-save-query-form\n        preselected-selections="saveQuerySelections"\n        on-change="updateSelections"\n        options="saveQueryOptions"\n        name-edited="hasNameBeenEdited"\n    ></st-geo-save-query-form>\n    <st-wiz-cql-length\n        name="cqlTotalLength"\n        ng-model="getCqlLength"\n        ng-model-options="{getterSetter:true}"\n        cql-maxlength="{{cqlMaxLength}}"\n    ></st-wiz-cql-length>\n</ng-form>\n'},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="cqlInputForm" ng-style="manageHeight">\n        <p class="directions" ng-bind-html="::cqlBuilder.freeTextDirections"></p>\n        <table>\n            <tr>\n                <td class="keyColumn">{{::\'nationality\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.nationality">\n                </td>\n                <td class="keyColumn">{{::\'platform\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.platform">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'aircraftType\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.aircraftType">\n                </td>\n                <td class="keyColumn">{{::\'callsign\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.callsign">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'airline\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.airline">\n                </td>\n                <td class="keyColumn">{{::\'thresherId\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.thresherId">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'origin\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.origin">\n                </td>\n                <td class="keyColumn">{{::\'destination\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.destination">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'flightNumber\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.flightNumber">\n                </td>\n                <td class="keyColumn">{{::\'identity\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.identity">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'modeS\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.modeS">\n                </td>\n                <td class="keyColumn">{{::\'activity\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.activity">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'icao3a\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.icao3a">\n                </td>\n                <td class="keyColumn">{{::\'tailNumber\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.tailNumber">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'linkTrackNumber\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.linkTrackNumber">\n                </td>\n                <td class="keyColumn">{{::\'linkReportingUnit\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="text"\n                        placeholder="{{::cqlBuilder.stringPlaceholder}}"\n                        ccri-angular-utils-select-text-on-focus\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.strings.linkReportingUnit">\n                </td>\n            </tr>\n        </table>\n        <table>\n            <tr class="affilRow">\n                <td class="keyColumn">{{::\'affiliation\' | attributeLabel}}</td>\n                <td colspan="3">\n                    <span class="clickable" ng-repeat="choice in ::cqlBuilder.params.enums.affiliation.choices"\n                        ng-click="cqlBuilder.updateEnumSelection(cqlBuilder.params.enums.affiliation.selected, choice)">\n                        <i class="fa" style="width:12px;margin:0 0 0 10px;"\n                            ng-class="(cqlBuilder.params.enums.affiliation.selected | lodash:\'includes\':choice) ? \'fa-check-square-o\' : \'fa-square-o\'"\n                            ></i>\n                            {{::choice}}\n                    </span>\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'alt\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMinPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.alt.min">\n                </td>\n                <td class="mathColumn">\n                    &nbsp;&le;&nbsp;{{::cqlBuilder.params.numbers.alt.unitLabel}}&nbsp;&le;&nbsp;\n                </td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMaxPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.alt.max">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'course\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMinPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.course.min">\n                </td>\n                <td class="mathColumn">\n                    &nbsp;&le;&nbsp;{{::cqlBuilder.params.numbers.course.unitLabel}}&nbsp;&le;&nbsp;\n                </td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMaxPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.course.max">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">{{::\'speed\' | attributeLabel}}</td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMinPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.speed.min">\n                </td>\n                <td class="mathColumn">\n                    &nbsp;&le;&nbsp;{{::cqlBuilder.params.numbers.speed.unitLabel}}&nbsp;&le;&nbsp;\n                </td>\n                <td>\n                    <input class="form-control input-xs"\n                        type="number" step="1"\n                        placeholder="{{::cqlBuilder.numberMaxPlaceholder}}"\n                        ng-change="cqlBuilder.build()"\n                        ng-model="cqlBuilder.params.numbers.speed.max">\n                </td>\n            </tr>\n            <tr>\n                <td class="keyColumn">Add\'l CQL</td>\n                <td colspan="3">\n                    <input class="form-control input-xs"\n                       placeholder="Enter any additional CQL to apply"\n                       ng-change="cqlBuilder.build()"\n                       ccri-angular-utils-select-text-on-focus\n                       ng-model="cqlBuilder.params.additionalCql">\n                </td>\n            </tr>\n        </table>\n        <table class="finalCql">\n            <tr>\n                <td class="keyColumn">Final CQL</td>\n                <td>\n                    <div ng-init="showFullBounds = false"\n                        ng-style="{height: (showFullBounds) ? \'auto\' : \'50px\'}"\n                        ng-click="showFullBounds = !showFullBounds">\n                        {{query.params.cql}}\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n    <st-tl-query-name query="query" wizard-form="wizardForm"></st-tl-query-name>\n    <st-tl-save-query query="query"></st-tl-save-query>\n    <st-wiz-cql-length name="cqlTotalLength" ng-model="cqlTotalLength" ng-model-options="{getterSetter:true}"\n        cql-maxlength="{{cqlMaxLength}}">\n    </st-wiz-cql-length>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=[n(2182).default];r.module("stealth.maritime",i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2183),o=n(2220);e.default=r.module("stealth.maritime.popup").directive("stMaritimeSummaryTab",i.StealthMaritimeSummaryTabDirective.factory()).directive("stMaritimeDetailsTab",o.StealthMaritimeDetailsTabDirective.factory()).name},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2184),o=n(2185),a=function(t){function e(){var e=t.call(this)||this;return e.controller=o.StealthMaritimeSummaryTabController,e.template=i,e}return r(e,t),e.factory=function(){return function(){return new e}},e}(n(934).StealthMaritimeBaseTabDirective);e.StealthMaritimeSummaryTabDirective=a},function(t,e){t.exports='<div class="maritimeCard">\n    <table class="maritimeCardTable">\n        <tr ng-if="$ctrl.maritimeRecord.shipImg" class="backgroundColorInitial">\n            <td class="removeBorder">\n                <table class="maritimeRow shipAndFlag">\n                    <tr class="backgroundColorInitial">\n                        <td rowspan="2" class="shipImg">\n                            <img ng-if="$ctrl.maritimeRecord.shipImg && $ctrl.maritimeRecord.shipImg.length > 0" ng-src"{{ $ctrl.maritimeRecord.shipImg }}" height="50px" width="100px"/>\n                        </td>\n                        <td class="flagAndDtg dtg" ng-if="$ctrl.dtg">\n                            {{ $ctrl.dtg.format("DDMMMYY").toUpperCase() }}\n                        </td>\n                    </tr>\n                    <tr class="backgroundColorInitial" ng-if="$ctrl.maritimeRecord.flagImg">\n                        <td class="flagAndDtg flag">\n                            <img ng-if="$ctrl.maritimeRecord.flagImg && $ctrl.maritimeRecord.flagImg.length > 0" ng-src"{{ $ctrl.maritimeRecord.flagImg }}" height="20px" width="20px"/>\n                        </td>\n                    </tr>\n                    \x3c!-- Saving for when we bring back the origin -> destination table tr>\n                                <td>\n                                    <table class="originDestinationTable">\n                                        <tr>\n                                            <td class="maritimeLabel originDestinationLabel originText">\n                                                Origin:\n                                            </td>\n                                            <td class="maritimeLabel originDestinationLabel destinationText">\n                                                Destination:\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="maritimeValue originText">\n                                                {{ $ctrl.maritimeRecord.origin }}\n                                            </td>\n                                            <td class="maritimeValue destinationText">\n                                                {{ $ctrl.maritimeRecord.destination }}\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </td>\n                            </tr --\x3e\n                </table>\n            </td>\n        </tr>\n        <tr ng-repeat="attributesArray in $ctrl.attributes" class="backgroundColorInitial">\n            <td class="removeBorder">\n                <table class="maritimeRow">\n                    <tr ng-repeat="singleAttrObj in attributesArray">\n                        <td class="keyColumn maritimeLabel"\n                            ng-if="$ctrl.hideBlankKeys === false || ($ctrl.hideBlankKeys && $ctrl.maritimeRecord[singleAttrObj.dataName])"\n                        >\n                            {{ singleAttrObj.baseballCardName }}\n                        </td>\n                        <td class="maritimeValue"\n                            ng-if="$ctrl.hideBlankKeys === false || ($ctrl.hideBlankKeys && $ctrl.maritimeRecord[singleAttrObj.dataName] && $ctrl.maritimeRecord[singleAttrObj.dataName].toString().length > 0)"\n                        >\n                            <span id="{{ singleAttrObj.dataName + \'-\' + $ctrl.id }}">\n                                {{ $ctrl.maritimeRecord[singleAttrObj.dataName] }}\n                            </span>\n                            <ccri-angular-utils-clipboard-copy\n                                class="clickable copyButton"\n                                data-clipboard-target="#{{ singleAttrObj.dataName + \'-\' + $ctrl.id }}"\n                                ccri-angular-utils-clipboard-feedback\n                                copied="Content copied!"\n                                hover="Copy value" position="right"\n                            >\n                                <i class="fa fa-clipboard fa-1 fa-xs" aria-hidden="true"></i>\n                            </ccri-angular-utils-clipboard-copy>\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n</div>\n'},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(21),o=n(15),a=n(916),s=n(47),l=function(t){function e(e){var n=t.call(this,e)||this;return n.$scope=e,n.name="",n}return r(e,t),e.prototype.$onInit=function(){var t=this;if(this.id=this.$scope.index,this.metadata=this.$scope.response.metadata?this.$scope.response.metadata[this.id]:{},this.metadata.dataSource.name?this.name=this.metadata.dataSource.name:this.metadata.dataSource.Name&&(this.name=this.metadata.dataSource.Name),this.name.length>0){var e="maritime."+this.name,n=e+".shipId",r=e+".shipImgUrl",a=e+".flagId",l=e+".flagImgUrl",c=e+".attributes",u=e+".dtgField",d=e+".dtgFieldFormat";if(this.hideBlankKeys="true"===this.lookupKeyword(this.metadata.dataSource,"hideBlankKeys",["popup"]),this.$scope.record&&o.config.has(e)&&o.config.has(c)){if(this.attributes=o.config.get(c),this.record=this.$scope.record,o.config.has(u)){var f=o.config.get(d,"");this.dtg=i(this.record[o.config.get(u)],f)}else this.metadata.dataSource.keywordConfig&&s.KeywordHelper.getDefaultTimelapseFieldNames(this.metadata.dataSource).dtgField&&(this.dtg=i(this.record[s.KeywordHelper.getDefaultTimelapseFieldNames(this.metadata.dataSource).dtgField]));var p=this.record["Lat-Lon"]?this.record["Lat-Lon"].split(","):["",""],h=p[0],g=p[1],m="flag_country",v="mmsi",y=void 0,b=void 0;o.config.get(n)&&(v=o.config.get(n)),o.config.get(r)&&(b=o.config.get(r).replace(/{{ship_id}}/,this.record[v])),o.config.get(a)&&(m=o.config.get(a)),o.config.get(l)&&(y=o.config.get(l).replace(/{{flag_id}}/,this.record[m])),this.maritimeRecord={lat:h||"",lon:g||"",flagImg:y,shipImg:b},this.attributes.forEach(function(e,n){e.forEach(function(e,r){t.attributes[n][r].baseballCardName||(t.attributes[n][r].baseballCardName=e.dataName.split("_").map(function(t){return t.charAt(0).toUpperCase()+t.substr(1)}).join(" "));var o=e.type.toLowerCase();t.record[e.dataName]?"string"===o?t.maritimeRecord[e.dataName]=t.record[e.dataName]:"number"===o?e.units?t.maritimeRecord[e.dataName]=t.record[e.dataName]+" "+e.units:t.maritimeRecord[e.dataName]=t.record[e.dataName]:"date"===o&&(e.dtgParseFormat?t.maritimeRecord[e.dataName]=i.utc(t.record[e.dataName],e.dtgParseFormat):t.maritimeRecord[e.dataName]=i.utc(t.record[e.dataName]),e.dtgRenderFormat&&(t.maritimeRecord[e.dataName]=t.maritimeRecord[e.dataName].format(e.dtgRenderFormat))):t.maritimeRecord[e.dataName]=""})})}}},e}(a.StealthMaritimeBaseTabController);e.StealthMaritimeSummaryTabController=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(408),o=n(409),a=n(23),s=n(2),l=n(917),c=n(64),u=n(18),d=n(44),f=n(4),p=n(918),h=n(30),g=n(85),m=n(124),v=n(134),y=n(271),b=n(2195),w=n(55),_=n(57),x=n(167),S=n(24),C=n(135),E={trkId:"idField",dtg:"dtgField",geom:"geomField",startDtg:"startDtgField",endDtg:"endDtgField"},T=function(){function t(){}return t.getDefaultStoreType=function(t){switch(t.keywordConfig.getIn(["timelapse","queryTypes"],"").split(",")[0]){case"arrow":return C.StoreTypes.Arrow;case"json":return C.StoreTypes.JSON;default:return C.StoreTypes.Binary}},t.getArrowFieldProperties=function(t){var e=t.keywordConfig.getIn(["timelapse","queryTypes"],"").split(","),n={dataSourceSupportsArrow:c(e,"arrow"),default:"arrow"===e[0]};if(n.dataSourceSupportsArrow){var r=y(i(t.keywordConfig.getIn(["timelapse","whitelistedArrowFields"],"").split(","))),o=y(i(t.keywordConfig.getIn(["timelapse","requiredArrowFields"],"").split(","))),a=y(i(t.keywordConfig.getIn(["timelapse","arrowFields"],"").split(",")));n.requiredFields=o,n.suggestedFields=r.length?l(a,r):a,n.fieldOptions=r.length?r:null}return n},t.getDefaultTimelapseFieldNames=function(t){var e=t.keywordConfig.getIn(["timelapse","historical","field"],r.Map()).toJS();return p(h({trkId:"trkId",geom:"geom",dtg:"dtg"},e),function(t,e){return E[e]||e})},t.isLineQuery=function(e){return m(t.getLineQueryConditions(e),Boolean)},t.isValidLineQuery=function(e){return o(t.getLineQueryConditions(e),Boolean)},t.getLineQueryConditions=function(t){return[!!s(t,"startDtgField"),!!s(t,"endDtgField"),"string"===s(t.dtgField,"localType"),"LineString"===s(t.geomField,"localType")]},t.getFeatureProperties=function(t){return x.WfsManager.getFeatureTypeDescription(t.wfsUrl,t.name).then(function(e){var n=s(e,"featureTypes[0].properties",[]);if(u(n))throw new Error("Feature type properties missing for "+t.serverUrl+" "+t.name);return n}).catch(function(t){return w.alerter.errorMsg(t),Promise.reject(t)})},t.getFeaturePropertiesByName=function(t,e){return g(t,function(t,n){var r=a(e,{name:n});return r&&(t[n]=r),t},{})},t.getLayersThatMatchFeatureProperties=function(e,n){var r=S.DataSourceManager.getDataSourcesByKeyword(n),i={currentLayer:null,layers:v(r.toArray(),"title")};return u(i.layers)||(i.currentLayer=i.currentLayer||i.layers[0]),t.getFeatureProperties(e).then(function(e){var n=f(e,"name"),r=f(i.layers,function(e){return{layer:e,featureProperties:t.getFeatureProperties(e)}});return g(r,function(t,e){return t.then(function(t){return e.featureProperties.then(function(r){var i=f(r,"name");return u(b(i,n))?(t.push(e.layer),t):t}).catch(function(e){return _.log.error(e),t})}).catch(function(t){return _.log.error(t),Promise.reject(t)})},Promise.resolve([]))}).then(function(t){if(u(t))throw new Error("No valid layers found that match properties.");return t}).catch(function(t){return _.log.error(t),Promise.reject(t)})},t.getFieldByName=function(t,e,n){void 0===n&&(n=["timelapse","historical","field"]);var r=n.concat(e);return t.keywordConfig.getIn(r)},t.getColorByMultiplier=function(t){return parseInt(t.keywordConfig.getIn(["timelapse","colorByMultiplier"]),10)||1},t.getColorMode=function(t){return parseInt(t.keywordConfig.getIn(["timelapse","colorMode"]),10)||void 0},t.formatFromKeywords=function(t){var e=d(s(t,"field.escape")),n=s(t,"field.format"),r=s(t,"field.putFirst");return r&&(r=r.split(",")),{omitKeys:d(s(t,"field.hide")),escapedKeys:e,fieldFormat:n,sortOrder:s(t,"field.order"),frontList:r}},t}();e.KeywordHelper=T},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}},function(t,e,n){var r=n(187);t.exports=function(t,e){var n=!0;return r(t,function(t,r,i){return n=!!e(t,r,i)}),n}},function(t,e,n){var r=n(376),i=n(401),o=n(569),a=n(103),s=n(158),l=n(377),c=Math.min;t.exports=function(t,e,n){for(var u=n?o:i,d=t[0].length,f=t.length,p=f,h=Array(f),g=1/0,m=[];p--;){var v=t[p];p&&e&&(v=a(v,s(e))),g=c(v.length,g),h[p]=!n&&(e||d>=120&&v.length>=120)?new r(p&&v):void 0}v=t[0];var y=-1,b=h[0];t:for(;++y<d&&m.length<g;){var w=v[y],_=e?e(w):w;if(w=n||0!==w?w:0,!(b?l(b,_):u(m,_,n))){for(p=f;--p;){var x=h[p];if(!(x?l(x,_):u(t[p],_,n)))continue t}b&&b.push(_),m.push(w)}}return m}},function(t,e,n){var r=n(264);t.exports=function(t){return r(t)?t:[]}},function(t,e,n){var r=n(187);t.exports=function(t,e){var n;return r(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(850);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,l=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(712),i=n(190),o=n(508),a=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=a},function(t,e,n){var r=n(307),i=n(51),o=n(2196),a=n(264),s=i(function(t){return o(r(t,a))});t.exports=s},function(t,e,n){var r=n(571),i=n(166),o=n(570);t.exports=function(t,e,n){var a=t.length;if(a<2)return a?o(t[0]):[];for(var s=-1,l=Array(a);++s<a;)for(var c=t[s],u=-1;++u<a;)u!=s&&(l[s]=r(l[s]||c,t[u],e,n));return o(i(l,1),e,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(573);e.ChunkedView=r.ChunkedView;var i=n(921);e.DictionaryView=i.DictionaryView;var o=n(922);e.ListView=o.ListView,e.FixedSizeListView=o.FixedSizeListView,e.BinaryView=o.BinaryView,e.Utf8View=o.Utf8View;var a=n(924);e.UnionView=a.UnionView,e.DenseUnionView=a.DenseUnionView,e.NestedView=a.NestedView,e.StructView=a.StructView,e.MapView=a.MapView;var s=n(229);e.FlatView=s.FlatView,e.NullView=s.NullView,e.BoolView=s.BoolView,e.ValidityView=s.ValidityView,e.PrimitiveView=s.PrimitiveView,e.FixedSizeView=s.FixedSizeView,e.Float16View=s.Float16View;var l=n(229);e.DateDayView=l.DateDayView,e.DateMillisecondView=l.DateMillisecondView;var c=n(229);e.IntervalYearMonthView=c.IntervalYearMonthView,e.IntervalYearView=c.IntervalYearView,e.IntervalMonthView=c.IntervalMonthView;var u=n(229);e.TimestampDayView=u.TimestampDayView,e.TimestampSecondView=u.TimestampSecondView,e.TimestampMillisecondView=u.TimestampMillisecondView,e.TimestampMicrosecondView=u.TimestampMicrosecondView,e.TimestampNanosecondView=u.TimestampNanosecondView},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(414),o=n(413),a=n(73),s=n(926),l=n(2202),c=n(168),u=n(573),d=function(){function t(){for(var t,e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._columns=[],n[0]instanceof a.Schema?(t=n[0],e=Array.isArray(n[1][0])?n[1][0]:n[1]):t=n[0]instanceof i.RecordBatch?(e=n)[0].schema:(e=n[0])[0].schema,this.schema=t,this.batches=e,this.batchesUnion=0==e.length?new i.RecordBatch(t,0,[]):e.reduce(function(t,e){return t.concat(e)}),this.length=this.batchesUnion.length,this.numCols=this.batchesUnion.numCols}return t.empty=function(){return new t(new a.Schema([]),[])},t.from=function(e){if(e){var n=void 0,i=[];try{for(var o=r.__values(s.read(e)),l=o.next();!l.done;l=o.next()){var c=l.value;n=n||c.schema,i.push(c)}}catch(t){u={error:t}}finally{try{l&&!l.done&&(d=o.return)&&d.call(o)}finally{if(u)throw u.error}}return new t(n||new a.Schema([]),i)}return t.empty();var u,d},t.fromAsync=function(e){return r.__awaiter(this,void 0,void 0,function(){var n,i,o,c,u,d,f,p,h,g;return r.__generator(this,function(m){switch(m.label){case 0:if(!l.isAsyncIterable(e))return[3,14];n=void 0,i=[],m.label=1;case 1:m.trys.push([1,7,8,13]),o=r.__asyncValues(s.readAsync(e)),m.label=2;case 2:return[4,o.next()];case 3:return(c=m.sent()).done?[3,6]:[4,c.value];case 4:u=m.sent(),n=n||u.schema,i.push(u),m.label=5;case 5:return[3,2];case 6:return[3,13];case 7:return d=m.sent(),h={error:d},[3,13];case 8:return m.trys.push([8,,11,12]),c&&!c.done&&(g=o.return)?[4,g.call(o)]:[3,10];case 9:m.sent(),m.label=10;case 10:return[3,12];case 11:if(h)throw h.error;return[7];case 12:return[7];case 13:return[2,new t(n||new a.Schema([]),i)];case 14:return l.isPromise(e)?(p=(f=t).from,[4,e]):[3,16];case 15:return[2,p.apply(f,[m.sent()])];case 16:if(e)return[2,t.from(e)];m.label=17;case 17:return[2,t.empty()]}})})},t.fromStruct=function(e){var n=new a.Schema(e.type.children);return new t((e.view instanceof u.ChunkedView?e.view.chunkVectors:[e]).map(function(t){return new i.RecordBatch(n,t.length,t.view.childData)}))},t.prototype.get=function(t){return this.batchesUnion.get(t)},t.prototype.getColumn=function(t){return this.getColumnAt(this.getColumnIndex(t))},t.prototype.getColumnAt=function(t){return t<0||t>=this.numCols?null:this._columns[t]||(this._columns[t]=this.batchesUnion.getChildAt(t))},t.prototype.getColumnIndex=function(t){return this.schema.fields.findIndex(function(e){return e.name===t})},t.prototype[Symbol.iterator]=function(){return this.batchesUnion[Symbol.iterator]()},t.prototype.filter=function(t){return new f(this.batches,t)},t.prototype.scan=function(t,e){for(var n=this.batches,r=n.length,i=-1;++i<r;){var o=n[i];e&&e(o);for(var a=-1,s=o.length;++a<s;)t(a,o)}},t.prototype.count=function(){return this.length},t.prototype.countBy=function(t){var e=this.batches,n=e.length,r="string"==typeof t?new o.Col(t):t;r.bind(e[n-1]);var i=r.vector;if(!(i instanceof c.DictionaryVector))throw new Error("countBy currently only supports dictionary-encoded columns");for(var a=new Uint32Array(i.dictionary.length),s=-1;++s<n;){var l=e[s];r.bind(l);for(var u=r.vector.indices,d=-1,f=l.length;++d<f;){var h=u.get(d);null!==h&&a[h]++}}return new p(i.dictionary,c.IntVector.from(a))},t.prototype.select=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(this.batches.map(function(t){return t.select.apply(t,r.__spread(e))}))},t.prototype.toString=function(t){var e,n,i="";try{for(var o=r.__values(this.rowsToString(t)),a=o.next();!a.done;a=o.next()){i+=a.value+"\n"}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},t.prototype.rowsToString=function(t){return void 0===t&&(t=" | "),new h(function(t,e){void 0===e&&(e=" | ");var n,i,o,a,s,l,c,u,d;return r.__generator(this,function(f){switch(f.label){case 0:for(n=t.schema.fields,i=r.__spread(["row_id"],n.map(function(t){return""+t})).map(m),o=i.map(function(t){return t.length}),d=-1,a=t.length-1;++d<a;)for(s=void 0,l=r.__spread([d],t.get(d)),c=-1,u=l.length;++c<u;)s=m(l[c]),o[c]=Math.max(o[c],s.length);return[4,i.map(function(t,e){return g(t," ",o[e])}).join(e)];case 1:f.sent(),d=-1,f.label=2;case 2:return++d<t.length?[4,r.__spread([d],t.get(d)).map(function(t){return m(t)}).map(function(t,e){return g(t," ",o[e])}).join(e)]:[3,5];case 3:f.sent(),f.label=4;case 4:return[3,2];case 5:return[2]}})}(this,t))},t}();e.Table=d;var f=function(){function t(t,e){this.batches=t,this.predicate=e}return t.prototype.scan=function(t,e){for(var n=this.batches,r=n.length,i=-1;++i<r;){var o=n[i];e&&e(o);for(var a=this.predicate.bind(o),s=-1,l=o.length;++s<l;)a(s,o)&&t(s,o)}},t.prototype.count=function(){for(var t=0,e=this.batches,n=e.length,r=-1;++r<n;)for(var i=e[r],o=this.predicate.bind(i),a=-1,s=i.length;++a<s;)o(a,i)&&++t;return t},t.prototype.filter=function(e){return new t(this.batches,this.predicate.and(e))},t.prototype.countBy=function(t){var e=this.batches,n=e.length,r="string"==typeof t?new o.Col(t):t;r.bind(e[n-1]);var i=r.vector;if(!(i instanceof c.DictionaryVector))throw new Error("countBy currently only supports dictionary-encoded columns");for(var a=new Uint32Array(i.dictionary.length),s=-1;++s<n;){var l=e[s],u=this.predicate.bind(l);r.bind(l);for(var d=r.vector.indices,f=-1,h=l.length;++f<h;){var g=d.get(f);null!==g&&u(f,l)&&a[g]++}}return new p(i.dictionary,c.IntVector.from(a))},t}(),p=function(t){function e(e,n){return t.call(this,new i.RecordBatch(new a.Schema([new a.Field("values",e.type),new a.Field("counts",n.type)]),n.length,[e,n]))||this}return r.__extends(e,t),e.prototype.toJSON=function(){for(var t=this.getColumnAt(0),e=this.getColumnAt(1),n={},r=-1;++r<this.length;)n[t.get(r)]=e.get(r);return n},e}(d);e.CountByResult=p;var h=function(){function t(t){this.iterator=t}return t.prototype[Symbol.iterator]=function(){return this.iterator},t.prototype.next=function(t){return this.iterator.next(t)},t.prototype.throw=function(t){return this.iterator.throw&&this.iterator.throw(t)||{done:!0,value:""}},t.prototype.return=function(t){return this.iterator.return&&this.iterator.return(t)||{done:!0,value:""}},t.prototype.pipe=function(t){var e,n=this,r=function(){if(t.writable)do{if((e=n.next()).done)break}while(t.write(e.value+"\n","utf8"));e&&e.done?t.isTTY||t.end("\n"):t.once("drain",r)};r()},t}();function g(t,e,n){return(new Array(n+1).join(e)+t).slice(-1*n)}function m(t){return"string"==typeof t?'"'+t+'"':ArrayBuffer.isView(t)?"["+t+"]":JSON.stringify(t)}e.TableToStringIterator=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(572),o=n(574),a=n(273),s=n(925),l=n(923),c=n(411),u=n(73),d=n(73),f=i.flatbuffers.Long;function p(t){return r.__generator(this,function(e){switch(e.label){case 0:return[5,r.__values(t)];case 1:return e.sent(),[2]}})}function h(t){return(t||[]).reduce(function(t,e){return r.__spread(t,e.VALIDITY&&[e.VALIDITY]||[],e.OFFSET&&[e.OFFSET]||[],e.DATA&&[e.DATA]||[],h(e.children))},[])}e.readJSON=function(t){var e,n,i,o,a,s,l,d,f,g,v,y,b,w;return r.__generator(this,function(_){switch(_.label){case 0:e=function(t){var e=new Map;return new u.Schema(M(t.fields,e),k(t.customMetadata),C.V4,e)}(t.schema),n=new Map,_.label=1;case 1:_.trys.push([1,6,7,8]),i=r.__values(t.dictionaries||[]),o=i.next(),_.label=2;case 2:return o.done?[3,5]:(d=o.value,f=function(t){return new c.DictionaryBatch(C.V4,T(t.data),t.id,t.isDelta)}(d),[4,{schema:e,message:f,loader:new m(h(d.data.columns),p(f.nodes),p(f.buffers),n)}]);case 3:_.sent(),_.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return a=_.sent(),v={error:a},[3,8];case 7:try{o&&!o.done&&(y=i.return)&&y.call(i)}finally{if(v)throw v.error}return[7];case 8:_.trys.push([8,13,14,15]),s=r.__values(t.batches||[]),l=s.next(),_.label=9;case 9:return l.done?[3,12]:(d=l.value,f=T(d),[4,{schema:e,message:f,loader:new m(h(d.columns),p(f.nodes),p(f.buffers),n)}]);case 10:_.sent(),_.label=11;case 11:return l=s.next(),[3,9];case 12:return[3,15];case 13:return g=_.sent(),b={error:g},[3,15];case 14:try{l&&!l.done&&(w=s.return)&&w.call(s)}finally{if(b)throw b.error}return[7];case 15:return[2]}})};var g=new l.TextEncoder("utf-8"),m=function(t){function e(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.sources=e,o}return r.__extends(e,t),e.prototype.readNullBitmap=function(t,e,n){var r=(void 0===n?this.getBufferMetadata():n).offset;return e<=0?new Uint8Array(0):a.packBools(this.sources[r])},e.prototype.readOffsets=function(t,e){var n=(void 0===e?this.getBufferMetadata():e).offset;return new Int32Array(this.sources[n])},e.prototype.readTypeIds=function(t,e){var n=(void 0===e?this.getBufferMetadata():e).offset;return new Int8Array(this.sources[n])},e.prototype.readData=function(t,e){var n=(void 0===e?this.getBufferMetadata():e).offset,r=this.sources;return!0===u.DataType.isTimestamp(t)?new Uint8Array(v(r[n])):(u.DataType.isInt(t)||u.DataType.isTime(t))&&64===t.bitWidth?new Uint8Array(v(r[n])):u.DataType.isDate(t)&&t.unit===w.MILLISECOND?new Uint8Array(v(r[n])):!0===u.DataType.isDecimal(t)?new Uint8Array(function(t){for(var e=new Uint32Array(4*t.length),n=-1,r=t.length;++n<r;)s.Int128.fromString(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e.buffer}(r[n])):!0===u.DataType.isBinary(t)?new Uint8Array(function(t){for(var e=t.join(""),n=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)n[r>>1]=parseInt(e.substr(r,2),16);return n.buffer}(r[n])):!0===u.DataType.isBool(t)?new Uint8Array(a.packBools(r[n]).buffer):!0===u.DataType.isUtf8(t)?g.encode(r[n].join("")):E.toTypedArray(t.ArrayType,r[n].map(function(t){return+t}))},e}(o.TypeDataLoader);function v(t){for(var e=new Uint32Array(2*t.length),n=-1,r=t.length;++n<r;)s.Int64.fromString(t[n].toString(),new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e.buffer}e.JSONDataLoader=m;var y=n(329),b=y.org.apache.arrow.flatbuf.Type,w=y.org.apache.arrow.flatbuf.DateUnit,_=y.org.apache.arrow.flatbuf.TimeUnit,x=y.org.apache.arrow.flatbuf.Precision,S=y.org.apache.arrow.flatbuf.IntervalUnit,C=y.org.apache.arrow.flatbuf.MetadataVersion,E=n(330);function T(t){return new c.RecordBatchMetadata(C.V4,t.count,function t(e){return(e||[]).reduce(function(e,n){return r.__spread(e,[new c.FieldMetadata(new f(n.count,0),new f(function(t){return(t||[]).reduce(function(t,e){return t+ +(0===e)},0)}(n.VALIDITY),0))],t(n.children))},[])}(t.columns),function t(e,n){void 0===n&&(n=[]);for(var r=-1,i=(e||[]).length;++r<i;){var o=e[r];o.VALIDITY&&n.push(new c.BufferMetadata(new f(n.length,0),new f(o.VALIDITY.length,0))),o.OFFSET&&n.push(new c.BufferMetadata(new f(n.length,0),new f(o.OFFSET.length,0))),o.DATA&&n.push(new c.BufferMetadata(new f(n.length,0),new f(o.DATA.length,0))),n=t(o.children,n)}return n}(t.columns))}function M(t,e){return(t||[]).map(function(t){return function(t,e){var n,r,i,o,a,s=t.name,l=t.nullable,c=k(t.customMetadata);e&&(a=t.dictionary)?(r=e.has(i=a.id)?e.get(i).type.dictionary:I(t.type,M(t.children,null)))&&(r=new u.Dictionary(r,(o=a.indexType)?O(o):new d.Int32,i,a.isOrdered),n=new u.Field(s,r,l,c),e.has(i)||e.set(i,n)):(r=I(t.type,M(t.children,e)))&&(n=new u.Field(s,r,l,c));return n||null}(t,e)}).filter(function(t){return null!=t})}function k(t){return new Map(Object.entries(t||{}))}var A={NONE:b.NONE,null:b.Null,int:b.Int,floatingpoint:b.FloatingPoint,binary:b.Binary,bool:b.Bool,utf8:b.Utf8,decimal:b.Decimal,date:b.Date,time:b.Time,timestamp:b.Timestamp,interval:b.Interval,list:b.List,struct:b.Struct_,union:b.Union,fixedsizebinary:b.FixedSizeBinary,fixedsizelist:b.FixedSizeList,map:b.Map};function I(t,e){switch(A[t.name]){case b.NONE:return null;case b.Null:return new u.Null;case b.Int:return O(t);case b.FloatingPoint:return function(t){switch(x[t.precision]){case x.HALF:return new d.Float16;case x.SINGLE:return new d.Float32;case x.DOUBLE:return new d.Float64}return null}(t);case b.Binary:return new u.Binary;case b.Utf8:return new u.Utf8;case b.Bool:return new u.Bool;case b.Decimal:return function(t){return new u.Decimal(t.scale,t.precision)}(t);case b.Date:return function(t){return new u.Date_(w[t.unit])}(t);case b.Time:return function(t){return new u.Time(_[t.unit],t.bitWidth)}(t);case b.Timestamp:return function(t){return new u.Timestamp(_[t.unit],t.timezone)}(t);case b.Interval:return function(t){return new u.Interval(S[t.unit])}(t);case b.List:return function(t,e){return new u.List(e)}(0,e||[]);case b.Struct_:return function(t,e){return new u.Struct(e)}(0,e||[]);case b.Union:return function(t,e){return new u.Union(t.mode,t.typeIdsArray||[],e)}(t,e||[]);case b.FixedSizeBinary:return function(t){return new u.FixedSizeBinary(t.byteWidth)}(t);case b.FixedSizeList:return function(t,e){return new u.FixedSizeList(t.listSize,e)}(t,e||[]);case b.Map:return function(t,e){return new u.Map_(t.keysSorted,e)}(t,e||[])}throw new Error("Unrecognized type "+t.name)}function O(t){switch(t.bitWidth){case 8:return t.isSigned?new d.Int8:new d.Uint8;case 16:return t.isSigned?new d.Int16:new d.Uint16;case 32:return t.isSigned?new d.Int32:new d.Uint32;case 64:return t.isSigned?new d.Int64:new d.Uint64}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(572),o=n(574),a=n(411),s=n(73),l=n(73),c=i.flatbuffers.ByteBuffer;e.readBuffers=function(t){var e,n,i,o,a,s,l,c,h,g,m,v,y,b,w,_,x;return r.__generator(this,function(S){switch(S.label){case 0:e=null,n=new Map,i=null,(ArrayBuffer.isView(t)||"string"==typeof t)&&(t=[t]),S.label=1;case 1:S.trys.push([1,12,13,14]),o=r.__values(t),a=o.next(),S.label=2;case 2:if(a.done)return[3,11];if(s=a.value,l=f(s),!e&&(w=p(l),e=w.schema,i=w.readMessages),!e||!i)return[3,10];S.label=3;case 3:S.trys.push([3,8,9,10]),c=r.__values(i(l)),h=c.next(),S.label=4;case 4:return h.done?[3,7]:(g=h.value,[4,{schema:e,message:g,loader:new u(l,d(g.nodes),d(g.buffers),n)}]);case 5:S.sent(),S.label=6;case 6:return h=c.next(),[3,4];case 7:return[3,10];case 8:return m=S.sent(),_={error:m},[3,10];case 9:try{h&&!h.done&&(x=c.return)&&x.call(c)}finally{if(_)throw _.error}return[7];case 10:return a=o.next(),[3,2];case 11:return[3,14];case 12:return v=S.sent(),y={error:v},[3,14];case 13:try{a&&!a.done&&(b=o.return)&&b.call(o)}finally{if(y)throw y.error}return[7];case 14:return[2]}})},e.readBuffersAsync=function(t){return r.__asyncGenerator(this,arguments,function(){var e,n,i,o,a,s,l,c,h,g,m,v,y,b,w,_,x;return r.__generator(this,function(S){switch(S.label){case 0:e=null,n=new Map,i=null,S.label=1;case 1:S.trys.push([1,14,15,20]),o=r.__asyncValues(t),S.label=2;case 2:return[4,r.__await(o.next())];case 3:return(a=S.sent()).done?[3,13]:[4,r.__await(a.value)];case 4:if(s=S.sent(),l=f(s),!e&&(w=p(l),e=w.schema,i=w.readMessages),!e||!i)return[3,12];S.label=5;case 5:S.trys.push([5,10,11,12]),c=r.__values(i(l)),h=c.next(),S.label=6;case 6:return h.done?[3,9]:(g=h.value,[4,{schema:e,message:g,loader:new u(l,d(g.nodes),d(g.buffers),n)}]);case 7:S.sent(),S.label=8;case 8:return h=c.next(),[3,6];case 9:return[3,12];case 10:return m=S.sent(),_={error:m},[3,12];case 11:try{h&&!h.done&&(x=c.return)&&x.call(c)}finally{if(_)throw _.error}return[7];case 12:return[3,2];case 13:return[3,20];case 14:return v=S.sent(),y={error:v},[3,20];case 15:return S.trys.push([15,,18,19]),a&&!a.done&&(b=o.return)?[4,r.__await(b.call(o))]:[3,17];case 16:S.sent(),S.label=17;case 17:return[3,19];case 18:if(y)throw y.error;return[7];case 19:return[7];case 20:return[2]}})})};var u=function(t){function e(e,n,r,i){var o=t.call(this,n,r,i)||this;return o.bytes=e.bytes(),o.messageOffset=e.position(),o}return r.__extends(e,t),e.prototype.readOffsets=function(t,e){return this.readData(t,e)},e.prototype.readTypeIds=function(t,e){return this.readData(t,e)},e.prototype.readData=function(t,e){var n=void 0===e?this.getBufferMetadata():e,r=n.length,i=n.offset;return new Uint8Array(this.bytes.buffer,this.bytes.byteOffset+this.messageOffset+i,r)},e}(o.TypeDataLoader);function d(t){return r.__generator(this,function(e){switch(e.label){case 0:return[5,r.__values(t)];case 1:return e.sent(),[2]}})}function f(t){var e=t||new Uint8Array(0);if("string"==typeof t){e=new Uint8Array(t.length);for(var n=-1,r=t.length;++n<r;)e[n]=t.charCodeAt(n);return new c(e)}return new c(e)}function p(t){var e,n,i;if(i=function(t){var e,n,r=t.capacity();if(r<w||!v(t.bytes(),0)||!v(t.bytes(),r-y)||(e=t.readInt32(n=r-b))<1&&e+w>r)return null;return t.setPosition(n-e),function(t){var e=new Map,n=P.getRootAsFooter(t),r=n.schema();return new a.Footer(function(t){for(var e=[],n=void 0,r=-1,i=t&&t.dictionariesLength();++r<i;)(n=t.dictionaries(r))&&e.push(new a.FileBlock(n.metaDataLength(),n.bodyLength(),n.offset()));return e}(n),function(t){for(var e=[],n=void 0,r=-1,i=t&&t.recordBatchesLength();++r<i;)(n=t.recordBatches(r))&&e.push(new a.FileBlock(n.metaDataLength(),n.bodyLength(),n.offset()));return e}(n),new s.Schema(et(r,e),it(r),n.version(),e))}(t)}(t))e=i.schema,n=function(t){return function(e){var n,i,o;return r.__generator(this,function(r){switch(r.label){case 0:n=-1,i=t.dictionaryBatches,o=i.length,r.label=1;case 1:return++n<o?(e.setPosition(i[n].offset.low),[4,C(e,e.readInt32(e.position()))]):[3,4];case 2:r.sent(),r.label=3;case 3:return[3,1];case 4:n=-1,i=t.recordBatches,o=i.length,r.label=5;case 5:return++n<o?(e.setPosition(i[n].offset.low),[4,C(e,e.readInt32(e.position()))]):[3,8];case 6:r.sent(),r.label=7;case 7:return[3,5];case 8:return[2]}})}}(i);else{if(!(e=_(t)))throw new Error("Invalid Arrow buffer");n=x}return{schema:e,readMessages:n}}e.BinaryDataLoader=u;for(var h=4,g=new Uint8Array("ARROW1".length),m=0;m<"ARROW1".length;m+=1)g[m]="ARROW1".charCodeAt(m);function v(t,e){void 0===e&&(e=0);for(var n=-1,r=g.length;++n<r;)if(g[n]!==t[e+n])return!1;return!0}var y=g.length,b=y+h,w=2*y+h;function _(t){if(!v(t.bytes(),0))try{for(var e=r.__values(S(t)),n=e.next();!n.done;n=e.next()){var i=n.value;if(a.Message.isSchema(i))return i}}catch(t){o={error:t}}finally{try{n&&!n.done&&(s=e.return)&&s.call(e)}finally{if(o)throw o.error}}return null;var o,s}function x(t){var e,n,i,o,s,l;return r.__generator(this,function(c){switch(c.label){case 0:c.trys.push([0,9,10,11]),e=r.__values(S(t)),n=e.next(),c.label=1;case 1:return n.done?[3,8]:(i=n.value,a.Message.isRecordBatch(i)?[4,i]:[3,3]);case 2:return c.sent(),[3,6];case 3:return a.Message.isDictionaryBatch(i)?[4,i]:[3,5];case 4:return c.sent(),[3,6];case 5:return[3,7];case 6:t.setPosition(t.position()+i.bodyLength),c.label=7;case 7:return n=e.next(),[3,1];case 8:return[3,11];case 9:return o=c.sent(),s={error:o},[3,11];case 10:try{n&&!n.done&&(l=e.return)&&l.call(e)}finally{if(s)throw s.error}return[7];case 11:return[2]}})}function S(t){var e,n;return r.__generator(this,function(r){switch(r.label){case 0:return t.position()<t.capacity()&&(e=t.readInt32(t.position()))>0?(n=C(t,e))?[4,n]:[3,2]:[3,3];case 1:r.sent(),r.label=2;case 2:return[3,0];case 3:return[2]}})}function C(t,e){t.setPosition(t.position()+h);var n=function(t){var e=L.getRootAsMessage(t),n=e.headerType(),r=e.version();switch(n){case I.Schema:return function(t,e,n){return new s.Schema(et(e,n),it(e),t,n)}(r,e.header(new D),new Map);case I.RecordBatch:return tt(r,e.header(new N));case I.DictionaryBatch:return function(t,e){return new a.DictionaryBatch(t,tt(t,e.data()),e.id(),e.isDelta())}(r,e.header(new R))}return null}(t);return t.setPosition(t.position()+e),n}var E=n(2201),T=n(329),M=n(920),k=T.org.apache.arrow.flatbuf.Type,A=T.org.apache.arrow.flatbuf.Precision,I=M.org.apache.arrow.flatbuf.MessageHeader,O=T.org.apache.arrow.flatbuf.MetadataVersion,P=E.org.apache.arrow.flatbuf.Footer,L=M.org.apache.arrow.flatbuf.Message,D=T.org.apache.arrow.flatbuf.Schema,N=M.org.apache.arrow.flatbuf.RecordBatch,R=M.org.apache.arrow.flatbuf.DictionaryBatch,F=T.org.apache.arrow.flatbuf.Null,B=T.org.apache.arrow.flatbuf.Int,j=T.org.apache.arrow.flatbuf.FloatingPoint,q=T.org.apache.arrow.flatbuf.Binary,z=T.org.apache.arrow.flatbuf.Bool,U=T.org.apache.arrow.flatbuf.Utf8,$=T.org.apache.arrow.flatbuf.Decimal,V=T.org.apache.arrow.flatbuf.Date,H=T.org.apache.arrow.flatbuf.Time,W=T.org.apache.arrow.flatbuf.Timestamp,G=T.org.apache.arrow.flatbuf.Interval,Y=T.org.apache.arrow.flatbuf.List,K=T.org.apache.arrow.flatbuf.Struct_,X=T.org.apache.arrow.flatbuf.Union,Q=T.org.apache.arrow.flatbuf.FixedSizeBinary,Z=T.org.apache.arrow.flatbuf.FixedSizeList,J=T.org.apache.arrow.flatbuf.Map;function tt(t,e){return new a.RecordBatchMetadata(t,e.length(),function(t){for(var e=[],n=-1,r=t.nodesLength();++n<r;)e.push(ot(t.nodes(n)));return e}(e),function(t,e){for(var n=[],r=-1,i=t.buffersLength();++r<i;){var o=t.buffers(r);e<O.V4&&(o.bb_pos+=8*(r+1)),n.push(at(o))}return n}(e,t))}function et(t,e){for(var n=[],r=-1,i=void 0,o=t&&t.fieldsLength();++r<o;)(i=rt(t.fields(r),e))&&n.push(i);return n}function nt(t,e){for(var n=[],r=-1,i=void 0,o=t&&t.childrenLength();++r<o;)(i=rt(t.children(r),e))&&n.push(i);return n}function rt(t,e){var n,r,i,o,a,c=t.name(),u=t.nullable(),d=it(t);return e&&(a=t.dictionary())?(r=e.has(o=a.id().low)?e.get(o).type.dictionary:st(t,nt(t,null)))&&(r=new s.Dictionary(r,(i=a.indexType())?lt(i):new l.Int32,o,a.isOrdered()),n=new s.Field(c,r,u,d),e.has(o)||e.set(o,n)):(r=st(t,nt(t,e)))&&(n=new s.Field(c,r,u,d)),n||null}function it(t){var e=new Map;if(t)for(var n=void 0,r=void 0,i=-1,o=0|t.customMetadataLength();++i<o;)(n=t.customMetadata(i))&&null!=(r=n.key())&&e.set(r,n.value());return e}function ot(t){return new a.FieldMetadata(t.length(),t.nullCount())}function at(t){return new a.BufferMetadata(t.offset(),t.length())}function st(t,e){switch(t.typeType()){case k.NONE:return null;case k.Null:return t.type(new F),new s.Null;case k.Int:return lt(t.type(new B));case k.FloatingPoint:return function(t){switch(t.precision()){case A.HALF:return new l.Float16;case A.SINGLE:return new l.Float32;case A.DOUBLE:return new l.Float64}return null}(t.type(new j));case k.Binary:return t.type(new q),new s.Binary;case k.Utf8:return t.type(new U),new s.Utf8;case k.Bool:return t.type(new z),new s.Bool;case k.Decimal:return function(t){return new s.Decimal(t.scale(),t.precision())}(t.type(new $));case k.Date:return function(t){return new s.Date_(t.unit())}(t.type(new V));case k.Time:return function(t){return new s.Time(t.unit(),t.bitWidth())}(t.type(new H));case k.Timestamp:return function(t){return new s.Timestamp(t.unit(),t.timezone())}(t.type(new W));case k.Interval:return function(t){return new s.Interval(t.unit())}(t.type(new G));case k.List:return function(t,e){return new s.List(e)}(t.type(new Y),e||[]);case k.Struct_:return function(t,e){return new s.Struct(e)}(t.type(new K),e||[]);case k.Union:return function(t,e){return new s.Union(t.mode(),t.typeIdsArray()||[],e)}(t.type(new X),e||[]);case k.FixedSizeBinary:return function(t){return new s.FixedSizeBinary(t.byteWidth())}(t.type(new Q));case k.FixedSizeList:return function(t,e){return new s.FixedSizeList(t.listSize(),e)}(t.type(new Z),e||[]);case k.Map:return function(t,e){return new s.Map_(t.keysSorted(),e)}(t.type(new J),e||[])}throw new Error("Unrecognized type "+t.typeType())}function lt(t){switch(t.bitWidth()){case 8:return t.isSigned()?new l.Int8:new l.Uint8;case 16:return t.isSigned()?new l.Int16:new l.Uint16;case 32:return t.isSigned()?new l.Int32:new l.Uint32;case 64:return t.isSigned()?new l.Int64:new l.Uint64}return null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(329);!function(t){!function(e){!function(e){!function(e){var n=function(){function e(){this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsFooter=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):r.org.apache.arrow.flatbuf.MetadataVersion.V1},e.prototype.schema=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?(t||new r.org.apache.arrow.flatbuf.Schema).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null},e.prototype.dictionaries=function(e,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+r)+24*e,this.bb):null},e.prototype.dictionariesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.recordBatches=function(e,n){var r=this.bb.__offset(this.bb_pos,10);return r?(n||new t.apache.arrow.flatbuf.Block).__init(this.bb.__vector(this.bb_pos+r)+24*e,this.bb):null},e.prototype.recordBatchesLength=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startFooter=function(t){t.startObject(4)},e.addVersion=function(t,e){t.addFieldInt16(0,e,r.org.apache.arrow.flatbuf.MetadataVersion.V1)},e.addSchema=function(t,e){t.addFieldOffset(1,e,0)},e.addDictionaries=function(t,e){t.addFieldOffset(2,e,0)},e.startDictionariesVector=function(t,e){t.startVector(24,e,8)},e.addRecordBatches=function(t,e){t.addFieldOffset(3,e,0)},e.startRecordBatchesVector=function(t,e){t.startVector(24,e,8)},e.endFooter=function(t){return t.endObject()},e.finishFooterBuffer=function(t,e){t.finish(e)},e}();e.Footer=n}(e.flatbuf||(e.flatbuf={}))}(e.arrow||(e.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={})),function(t){!function(t){!function(t){!function(t){var e=function(){function t(){this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.offset=function(){return this.bb.readInt64(this.bb_pos)},t.prototype.metaDataLength=function(){return this.bb.readInt32(this.bb_pos+8)},t.prototype.bodyLength=function(){return this.bb.readInt64(this.bb_pos+16)},t.createBlock=function(t,e,n,r){return t.prep(8,24),t.writeInt64(r),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()},t}();t.Block=e}(t.flatbuf||(t.flatbuf={}))}(t.arrow||(t.arrow={}))}(t.apache||(t.apache={}))}(e.org||(e.org={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=function(t){return null!=t&&Object(t)===t&&"function"==typeof t.then},e.isObservable=function(t){return null!=t&&Object(t)===t&&"function"==typeof t.subscribe},e.isArrayLike=function(t){return null!=t&&Object(t)===t&&"number"==typeof t.length},e.isIterable=function(t){return null!=t&&Object(t)===t&&void 0!==t[Symbol.iterator]},e.isAsyncIterable=function(t){return null!=t&&Object(t)===t&&void 0!==t[Symbol.asyncIterator]}},,,,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(4),a=n(16),s=n(74),l=n(927),c=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e.prototype.buildCql=function(){var t=this.geomClause?this.geomClause.buildCql():"",e=this.timeClause?this.timeClause.buildCql():"",n=this.additionalCql?this.additionalCql.buildCql():"",r=this.simpleClauses?o(this.simpleClauses.toArray(),function(t){return t?t.buildCql():""}):[];return s.CqlBuilder.combine.apply(s.CqlBuilder,[s.CqlOperator.AND,t,e,n].concat(r))},e}(i.Record({timeClause:void 0,geomClause:void 0,simpleClauses:i.Map(),additionalCql:void 0,requestType:l.GET_FEATURE_REQUEST_TYPE},"GetFeatureDataFilterRecord"));e.GetFeatureDataFilterRecord=c,a.StateManager.getInstance().addRecord(c)},function(t,e,n){var r=n(547);t.exports=function(t){return r(t)?void 0:t}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16),a=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({timeClause:void 0,geomClause:void 0,requestType:"LOCAL_FILE"},"LocalFileSearchDataFilterRecord"));e.LocalFileSearchDataFilterRecord=a,o.StateManager.getInstance().addRecord(a)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16),a=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({includeFids:void 0,dictionaryFields:void 0,useCachedDictionaries:void 0,sortField:void 0,sortReverse:void 0,batchSize:void 0,doublePass:void 0}));e.GeomesaArrowFormatOptionsRecord=a,o.StateManager.getInstance().addRecord(a)},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16),a=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({dtg:"",geom:"",trackId:"",label:void 0,sortOnServer:void 0},"GeomesaBinaryFormatOptionsRecord"));e.GeomesaBinaryFormatOptionsRecord=a,o.StateManager.getInstance().addRecord(a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(272),o=i.vector.IntVector,a=i.vector.DictionaryVector,s=i.predicate.col,l=i.predicate.And,c=i.predicate.Col,u=i.predicate.Literal,d=i.predicate.GTeq,f=i.predicate.LTeq,p=function(t){function e(e,n){var r=t.call(this,e)||this;return r.batches=e,r.primary_key=n,r}return r.__extends(e,t),e.prototype.filter=function(t,e,n){return new m(this.batches,this.primary_key,t,e,n)},e}(i.Table);function h(t,e){return t instanceof d&&t.left instanceof c&&t.right instanceof u&&t.left.name===e?t.right.v:t instanceof f&&t.right instanceof c&&t.left instanceof u&&t.right.name===e?t.left.v:void 0}function g(t,e){return t instanceof d&&t.right instanceof c&&t.left instanceof u&&t.right.name===e?t.left.v:t instanceof f&&t.left instanceof c&&t.right instanceof u&&t.left.name===e?t.right.v:void 0}e.PrimaryKeyTable=p;var m=function(){function t(t,e,n,i,o){this.batches=t,this.primary_key=e,this.predicate=n,this.min=i,this.max=o;var a,s,c=[];if(this.predicate){var u=function t(e){return e instanceof l?t(e.left).concat(t(e.right)):[e]}(this.predicate);try{for(var d=r.__values(u),f=d.next();!f.done;f=d.next()){var p,m=f.value,v=void 0;(p=h(m,this.primary_key))?this.min=void 0===this.min||p>this.min?p:this.min:(v=g(m,this.primary_key))?this.max=void 0===this.max||v<this.max?v:this.max:c.push(m)}}catch(t){a={error:t}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}this.predicate=c.length?c.reduce(function(t,e){return t.and(e)}):void 0}}return t.prototype.scan=function(t,e){for(var n=this.batches,r=n.length,i=-1;++i<r;){var o=n[i],a=o.length,l=s(this.primary_key).bind(o);if(!(l(a-1)<this.min)){0;for(var c=0,u=0,d=a;d>1;){l(c=u+(p=d>>1))<this.min?(u=c,d-=p):d=p}c++;var f=void 0;if(l(a-1)<=this.max)f=a;else for(u=a,d=a;d>1;){var p;l(f=u-(p=d>>1))>this.max?(u=f,d-=p):d=p}if(e&&e(o),this.predicate)for(var h=this.predicate.bind(o);c<f&&!(l(c)>this.max);c++)h(c,o)&&t(c,o);else for(;c<f&&!(l(c)>this.max);c++)t(c,o)}}},t.prototype.count=function(){for(var t=0,e=this.batches,n=e.length,r=-1;++r<n;){var i=e[r],o=i.length,a=s(this.primary_key).bind(i);if(!(a(o-1)<this.min)){0;for(var l=0,c=0,u=o;u>1;){a(l=c+(f=u>>1))<this.min?(c=l,u-=f):u=f}l++;var d=void 0;if(a(o-1)<=this.max)d=o;else for(c=o,u=o;u>1;){var f;a(d=c-(f=u>>1))>this.max?(c=d,u-=f):u=f}if(this.predicate)for(var p=this.predicate.bind(i);l<d&&!(a(l)>this.max);l++)p(l,i)&&++t;else for(;l<d&&!(a(l)>this.max);l++)++t}}return t},t.prototype.countBy=function(t){t instanceof c||(t=s(t));var e=this.batches;if(t.bind(e[e.length-1]),!(t.vector instanceof a))throw new Error("countBy currently only supports dictionary-encoded columns");for(var n=t.vector.dictionary,r=new Uint32Array(n.length),l=e.length,u=-1;++u<l;){var d=e[u],f=d.length,p=s(this.primary_key).bind(d);if(!(p(f-1)<this.min)){0;for(var h=0,g=0,m=f;m>1;){p(h=g+(y=m>>1))<this.min?(g=h,m-=y):m=y}h++;var v=void 0;if(p(f-1)<=this.max)v=f;else for(g=f,m=f;m>1;){var y;p(v=g-(y=m>>1))>this.max?(g=v,m-=y):m=y}t.bind(d);var b=t.vector.indices;if(this.predicate)for(var w=this.predicate.bind(d);h<v&&!(p(h)>this.max);h++){null!==(_=b.get(h))&&w(h,d)&&r[_]++}else for(;h<v&&!(p(h)>this.max);h++){var _;null!==(_=b.get(h))&&r[_]++}}}return new i.CountByResult(n,o.from(r))},t.prototype.filter=function(e,n,r){return new t(this.batches,this.primary_key,e?this.predicate.and(e):this.predicate,this.min<n?this.min:n,this.max>r?this.max:r)},t}();e.PrimaryKeyFilteredDataFrame=m},function(t,e,n){var r=n(2213);t.exports=function(t,e){return t&&t.length&&e&&e.length?r(t,e):t}},function(t,e,n){var r=n(103),i=n(250),o=n(2214),a=n(158),s=n(189),l=Array.prototype.splice;t.exports=function(t,e,n,c){var u=c?o:i,d=-1,f=e.length,p=t;for(t===e&&(e=s(e)),n&&(p=r(t,a(n)));++d<f;)for(var h=0,g=e[d],m=n?n(g):g;(h=u(p,m,h,c))>-1;)p!==t&&l.call(p,h,1),l.call(t,h,1);return t}},function(t,e){t.exports=function(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}},function(t,e,n){var r=n(43),i=n(932);t.exports=function(t,e,n){return i(t,e,r(n,2))}},function(t,e,n){var r,i,o;
/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 */i=[],void 0===(o="function"==typeof(r=function(){"use strict";function t(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}t.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=function(t){return!0===(t&&t.__isLong__)};var e={},n={};t.fromInt=function(r,i){var o,a;return i?0<=(r>>>=0)&&r<256&&(a=n[r])?a:(o=new t(r,(0|r)<0?-1:0,!0),0<=r&&r<256&&(n[r]=o),o):-128<=(r|=0)&&r<128&&(a=e[r])?a:(o=new t(r,r<0?-1:0,!1),-128<=r&&r<128&&(e[r]=o),o)},t.fromNumber=function(e,n){return n=!!n,isNaN(e)||!isFinite(e)?t.ZERO:!n&&e<=-o?t.MIN_VALUE:!n&&e+1>=o?t.MAX_VALUE:n&&e>=i?t.MAX_UNSIGNED_VALUE:e<0?t.fromNumber(-e,n).negate():new t(e%r|0,e/r|0,n)},t.fromBits=function(e,n,r){return new t(e,n,r)},t.fromString=function(e,n,r){if(0===e.length)throw Error("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof n&&(r=n,n=!1),(r=r||10)<2||36<r)throw Error("radix out of range: "+r);var i;if((i=e.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+e);if(0===i)return t.fromString(e.substring(1),n,r).negate();for(var o=t.fromNumber(Math.pow(r,8)),a=t.ZERO,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+l),r);if(l<8){var u=t.fromNumber(Math.pow(r,l));a=a.multiply(u).add(t.fromNumber(c))}else a=(a=a.multiply(o)).add(t.fromNumber(c))}return a.unsigned=n,a},t.fromValue=function(e){return e instanceof t?e:"number"==typeof e?t.fromNumber(e):"string"==typeof e?t.fromString(e):new t(e.low,e.high,e.unsigned)};var r=4294967296,i=r*r,o=i/2,a=t.fromInt(1<<24);return t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*r+(this.low>>>0):this.high*r+(this.low>>>0)},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(t.MIN_VALUE)){var r=t.fromNumber(e),i=this.divide(r);return n=i.multiply(r).subtract(this),i.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=t.fromNumber(Math.pow(e,6),this.unsigned);n=this;for(var a="";;){var s=n.divide(o),l=(n.subtract(s.multiply(o)).toInt()>>>0).toString(e);if((n=s).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(t.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,n=31;n>0&&0==(e&1<<n);n--);return 0!=this.high?n+33:n+1},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isOdd=function(){return 1==(1&this.low)},t.prototype.isEven=function(){return 0==(1&this.low)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.eq=t.prototype.equals,t.prototype.notEquals=function(t){return!this.equals(t)},t.neq=t.prototype.notEquals,t.prototype.lessThan=function(t){return this.compare(t)<0},t.prototype.lt=t.prototype.lessThan,t.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},t.prototype.lte=t.prototype.lessThanOrEqual,t.prototype.greaterThan=function(t){return this.compare(t)>0},t.prototype.gt=t.prototype.greaterThan,t.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},t.prototype.gte=t.prototype.greaterThanOrEqual,t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.equals(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.subtract(e).isNegative()?-1:1},t.prototype.negate=function(){return!this.unsigned&&this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=t.prototype.negate,t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,l=e.low>>>16,c=0,u=0,d=0,f=0;return d+=(f+=o+(65535&e.low))>>>16,f&=65535,u+=(d+=i+l)>>>16,d&=65535,c+=(u+=r+s)>>>16,u&=65535,c+=n+a,c&=65535,t.fromBits(d<<16|f,c<<16|u,this.unsigned)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.negate())},t.prototype.sub=t.prototype.subtract,t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.equals(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(a)&&e.lessThan(a))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,l=65535&e.high,c=e.low>>>16,u=65535&e.low,d=0,f=0,p=0,h=0;return p+=(h+=o*u)>>>16,h&=65535,f+=(p+=i*u)>>>16,p&=65535,f+=(p+=o*c)>>>16,p&=65535,d+=(f+=r*u)>>>16,f&=65535,d+=(f+=i*c)>>>16,f&=65535,d+=(f+=o*l)>>>16,f&=65535,d+=n*u+r*c+i*l+o*s,d&=65535,t.fromBits(p<<16|h,d<<16|f,this.unsigned)},t.prototype.mul=t.prototype.multiply,t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new Error("division by zero");if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,r,i;if(this.equals(t.MIN_VALUE))return e.equals(t.ONE)||e.equals(t.NEG_ONE)?t.MIN_VALUE:e.equals(t.MIN_VALUE)?t.ONE:(n=this.shiftRight(1).divide(e).shiftLeft(1)).equals(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(r=this.subtract(e.multiply(n)),i=n.add(r.divide(e)));if(e.equals(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().divide(e.negate()):this.negate().divide(e).negate();if(e.isNegative())return this.divide(e.negate()).negate();for(i=t.ZERO,r=this;r.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),a=o<=48?1:Math.pow(2,o-48),s=t.fromNumber(n),l=s.multiply(e);l.isNegative()||l.greaterThan(r);)n-=a,l=(s=t.fromNumber(n,this.unsigned)).multiply(e);s.isZero()&&(s=t.ONE),i=i.add(s),r=r.subtract(l)}return i},t.prototype.div=t.prototype.divide,t.prototype.modulo=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.subtract(this.divide(e).multiply(e))},t.prototype.mod=t.prototype.modulo,t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=t.prototype.shiftLeft,t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=t.prototype.shiftRight,t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;if(e<32){var r=this.low;return t.fromBits(r>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?t.fromBits(n,0,this.unsigned):t.fromBits(n>>>e-32,0,this.unsigned)},t.prototype.shru=t.prototype.shiftRightUnsigned,t.prototype.toSigned=function(){return this.unsigned?new t(this.low,this.high,!1):this},t.prototype.toUnsigned=function(){return this.unsigned?this:new t(this.low,this.high,!0)},t})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.sortedBinRec=function(t,e,n,r,i){r|=0;var o,a,s=(i|=0)<<1|0,l=0;if(((n|=0)-(e|=0)|0)<2)return!0;for(o=n*s+r|0,a=0|t[0|(l=e*s+r|0)],l=l+s|0;(0|l)!=(0|o);){if((0|(0|t[0|l]))<(0|a))return!1;l=l+s|0}return!0},t.sortBinRec=function(e,n,r,i,o,a,s,l){i|=0,o|=0,a|=0;var c,u,d=0,f=0,p=0,h=0,g=0,m=0,v=0,y=0,b=0,w=0,_=0,x=0,S=0,C=0;if(u=Date.now(),(0|i)<2)return s(l),null;for(f=0|r[0|(i=i-1|0)],d=0|r[0|(i=i-1|0)],c=a<<1|0;;){if(h=d*c+o|0,g=f*c+o|0,(0|(_=f-d|0))<3){if((0|_)>1&&(0|e[0|h])>(0|e[h+c]))for(S=(x=h-o>>1|0)+a|0,_=0|a;0!=(0|_);_=_-1|0,x=x+1|0,S=S+1|0)C=n[0|x],n[0|x]=n[0|S],n[0|S]=C;if((0|i)<2)return s(l),null;f=0|r[0|(i=i-1|0)],d=0|r[0|(i=i-1|0)]}else{for(m=h+(f-d>>1|0)*c|0,y=0|e[0|h],b=0|e[0|m],w=0|e[g-c|0],(0|y)<(0|b)?(0|b)<(0|w)||(b=(0|y)<(0|w)?w:y):(0|y)<(0|w)?b=y:(0|b)<(0|w)&&(b=w),p=0|d,m=0|h,v=0|g;;){for(;(0|e[0|m])<(0|b);)m=m+c|0,p=p+1|0;for(v=v-c|0;(0|b)<(0|e[0|v]);)v=v-c|0;if((0|m)>=(0|v))break;if((0|e[0|m])!=(0|e[0|v]))for(x=m-o>>1|0,S=v-o>>1|0,_=0|a;0!=(0|_);_=_-1|0,x=x+1|0,S=S+1|0)C=n[0|x],n[0|x]=n[0|S],n[0|S]=C;m=m+c|0,p=p+1|0}(m-h|0)<(g-m|0)?(r[0|i]=0|d,r[0|(i=i+1|0)]=0|p,i=i+1|0,d=p):(r[0|i]=0|p,r[0|(i=i+1|0)]=0|f,i=i+1|0,f=p)}if((f-d|0)>5e4&&Date.now()-u>50)return r[0|i]=0|d,r[0|(i=i+1|0)]=0|f,i=i+1|0,window.setTimeout(t.sortBinRec,0,e,n,r,i,o,a,s,l),0|i}},t}();e.Sorter=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(2219))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(272),i=n(29);e.findArrowDateFields=function(t){var e=i(t.schema.fields,function(t){return t.type instanceof r.type.Int32}),n=i(e,function(t){return"dtg:Date"===t.metadata.get("descriptor")});return n.length>0?n:e},e.findArrowGeomFields=function(t){var e=i(t.schema.fields,function(t){return t.type instanceof r.type.FixedSizeList&&2===t.type.listSize}),n=i(e,function(t){return"*geom:Point"===t.metadata.get("descriptor")});return n.length>0?n:e}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2221),o=n(2222),a=function(t){function e(){var e=t.call(this)||this;return e.controller=o.StealthMaritimeDetailsTabController,e.template=i,e}return r(e,t),e.factory=function(){return function(){return new e}},e}(n(934).StealthMaritimeBaseTabDirective);e.StealthMaritimeDetailsTabDirective=a},function(t,e){t.exports='<div class="maritimeCard detailsTab">\n    <table class="maritimeCardTable additionalDetailsTable">\n        <tr class="maritimeRow" ng-repeat="(attribute, value) in $ctrl.record">\n            <td class="keyColumn maritimeLabel"\n                ng-if="$ctrl.hideBlankKeys === false || ($ctrl.hideBlankKeys && value)"\n            >\n                {{ attribute }}\n            </td>\n            <td class="maritimeValue"\n                ng-if="$ctrl.hideBlankKeys === false || ($ctrl.hideBlankKeys && value && value.toString().length > 0)"\n            >\n                <span id="{{ \'fullData\' + attribute + \'-\' + $ctrl.id }}">{{ value }}</span>\n                <ccri-angular-utils-clipboard-copy\n                    class="clickable copyButton"\n                    data-clipboard-target="#{{ \'fullData\' + attribute + \'-\' + $ctrl.id }}"\n                    ccri-angular-utils-clipboard-feedback\n                    copied="Content copied!"\n                    hover="Copy value" position="right"\n                >\n                    <i class="fa fa-clipboard fa-1 fa-xs" aria-hidden="true"></i>\n                </ccri-angular-utils-clipboard-copy>\n            </td>\n        </tr>\n    </table>\n</div>\n'},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this,e)||this;return n.$scope=e,n}return r(e,t),e.prototype.$onInit=function(){this.id=this.$scope.index,this.metadata=this.$scope.response.metadata?this.$scope.response.metadata[this.id]:{},this.$scope.record&&(this.record=this.$scope.record),this.hideBlankKeys="true"===this.lookupKeyword(this.metadata.dataSource,"hideBlankKeys",["popup"])},e}(n(916).StealthMaritimeBaseTabController);e.StealthMaritimeDetailsTabController=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(22),o=n(44),a=n(15),s=n(936);e.displayConfigs=r.List(a.config.get("display.configs",[])),e.getConfiguredDisplays=function(t,n,r){e.displayConfigs.forEach(function(e){var a=r.$new();i(o(e.widget.scope),function(t){a[t]=e.widget.scope[t]});var l=new n({tag:e.widget.tag,scope:a,attrs:e.widget.attrs}),c=new s.View({id:e.id,name:e.name,type:e.type,widget:l,iconClass:e.iconClass,active:e.active});t.insert(c)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(23),o=n(4),a=n(149),s=function(){function t(t,e,n,s,l){this.$scope=t,this.WidgetDef=e,this.barMgr=n,this.BarWidget=s,this.registry=l,t.views=l.views,t.setActive=function(e,n){if(void 0===n&&(n=!0),!t.view)return t.view=e,l.activate(e.id),void l.select(e.id);e.id!==t.view.id&&(l.deactivate(t.view.id),l.activate(e.id),t.view=e,l.select(e.id))};var c=[new s({widget:new e({tag:"ccri-bars-separator"})}),new s({widget:new e({tag:"stealth-display-list-menu",scope:t,attrs:'views="views" set-active="setActive"'})})];r(c,function(t){n.insert("bottom",t,a.Position.Last,"900")}),t.$watch("views.length",function(e){if(r(c,function(t){t.hidden=e<2}),e>0){var n=l.listActive()[0]||l.views[0].thing;r(o(l.views,"thing"),function(e){e.id===n.id?t.setActive(e):l.deactivate(e.id)})}}),l.on("display.active",function(e){if(e.active){var n=i(l.views,["thing.id",e.id]);n&&t.setActive(n.thing)}}),l.on("show.only",function(t){t.old[0].id!==t.new.id&&(l.deactivate(t.old[0].id),l.activate(t.new.id))}),l.on("show.only.revert",function(t){l.activate(t.old[0].id)})}return t.$inject=["$scope","ccri.angular-utils.WidgetDef","ccri.bars.mgr","ccri.bars.Widget","stealth.display.registry"],t}();e.SingleViewCtrl=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(2226),o=n(22),a=n(29),s=n(23),l=n(64),c=n(46),u=n(4),d=n(2227),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.views=[],e}return r(e,t),e.prototype.insert=function(t,e){return d.orderedInsert(this.views,t,e)},e.prototype.activate=function(t){return this.setActive(t,!0)},e.prototype.deactivate=function(t){return this.setActive(t,!1)},e.prototype.listActive=function(){return u(a(this.views,"thing.active"),"thing")},e.prototype.select=function(t){var e=s(this.views,["thing.id",t]);if(e&&e.thing.active)return this.selected?void(this.selected.id!==t&&(this.emit("display.selected",{type:this.selected.type,id:this.selected.id,selected:!1}),this.selected=e.thing,this.emit("display.selected",{type:e.thing.type,id:t,selected:!0}))):(this.selected=e.thing,void this.emit("display.selected",{type:e.thing.type,id:t,selected:!0}))},e.prototype.setActive=function(t,e){var n=this;void 0===e&&(e=!0),this.views.length<1||(c(t)&&(t=[t.toString()]),o(this.views,function(r){l(t,r.thing.id)&&r.thing.active!==e&&(r.thing.active=e,n.emit("display.active",{type:r.thing.type,id:r.thing.id,active:e}))}))},e}(i.EventEmitter);e.Registry=f},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t,e){var n=i?i+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,s=new Array(a);o<a;o++)s[o]=r[o].fn;return s},s.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,o),!0;case 6:return u.fn.call(u.context,e,n,r,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;case 4:u[c].fn.call(u[c].context,e,n,r);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(t,e,n){var r=new a(e,n||this),o=i?i+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.once=function(t,e,n){var r=new a(e,n||this,!0),o=i?i+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},s.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new o:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||r&&!s[l].once||n&&s[l].context!==n)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new o:delete this._events[a]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new o:delete this._events[e])):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=i,s.EventEmitter=s,t.exports=s},,,,,,,,,,,function(t,e){t.exports='<div uib-dropdown auto-close="disabled" is-open="menuIsOpen"\n     ng-mouseenter="menuIsOpen=true"\n     ng-mouseleave="menuIsOpen=false"\n     class="dropup">\n    <div uib-dropdown-toggle class="btn action-btn bar-btn">\n        <i class="fa fa-lg fa-tv"></i>\n    </div>\n    <ul uib-dropdown-menu class="dropdown-menu-right bar-dropdown" role="menu">\n        <li ng-repeat="view in views track by view.thing.id">\n            <a href="" ng-click="setActive()(view.thing, !view.thing.active)">\n                <span class="bar-color2 fa fa-fw" ng-class="{\'fa-check\': view.thing.active}"></span>\n                <i class="fa fa-fw" ng-class="::view.thing.iconClass"></i>\n                &nbsp; {{::view.thing.name}}\n            </a>\n        </li>\n    </ul>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(149),i=n(15);e.initConfiguredEasyButtons=function(t,e,n,o){var a=i.config.get("display.easyButtons",[]);if(a.length>0){var s=t.$new();s.easyButtons=a,n.insert("top",new o({widget:new e({tag:"stealth-display-easy-buttons",scope:s,attrs:'easy-buttons="easyButtons"'})}),r.Position[r.Position.First],"0"),n.insert("top",new o({widget:new e({tag:"ccri-bars-separator"})}),r.Position[r.Position.First],"1")}};var o=function(){function t(t,e,n){this.$rootScope=t,this.$scope=e,this.easyButtonsService=n;var r=this;e.onClick=function(t){r.easyButtonsService.activateEasyButton(t.id)}}return t.$inject=["$rootScope","$scope","stealth.display.easyButtonsService"],t}();e.EasyButtonCtrl=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(23),o=n(2),a=n(64),s=function(){function t(t,e,n,s){var l=this;this.sidebarManager=t,this.registry=e,this.CONFIG=n,this.toastr=s,this.activateEasyButton=function(t){if(o(l._activeEasyButton,"id")!==t){l._removeListener();var e=o(l.CONFIG,"display.easyButtons");if(e){var n=i(e,function(e){return e.id===t});if(n){l._activeEasyButton=n;var a=l;if(r(n.displays,function(t,e){var n=i(l.registry.views,function(e){return e.thing.id===t});0===e?(a.registry.emit("display.active",{id:n.thing.id,type:n.thing.type,active:!0}),r(a.registry.views,function(e){e.thing.active&&e.thing.id!==t&&a.registry.emit("display.active",{id:e.thing.id,type:e.thing.type,active:!1})})):a.registry.emit("display.active",{id:n.thing.id,type:n.thing.type,active:!0})}),n.sidepanelTitle){var s=i(l.sidebarManager.getButtons(),function(t){return t.panel.title===n.sidepanelTitle});s&&!s.panel.open&&l.sidebarManager.toggleButton(s.id,!0)}else r(l.sidebarManager.getButtons(),function(t){l.sidebarManager.toggleButton(t.id,!1)});l._watchForDisplayChanges()}else l.showLayoutWarning(t)}else l.showLayoutWarning(t)}},this._watchForDisplayChanges=function(){l.registry.on("display.active",l._listener)},this._listener=function(t){l._activeEasyButton&&a(l._activeEasyButton.displays,t.id)!==t.active&&(l._activeEasyButton=void 0,l._removeListener())},this._removeListener=function(){l.registry.removeListener("display.active",l._listener)},this.showLayoutWarning=function(t){l.toastr.error(t+" not found in layout configuration.","Data not found.",{timeOut:15e3})}}return t.$inject=["sidebarManager","stealth.display.registry","CONFIG","toastr"],t}();e.EasyButtonsService=s},function(t,e){t.exports='<div class="btn action-btn bar-btn bar-color2"\n    ng-repeat="easyButton in easyButtons" ng-click="onClick(easyButton)"\n    uib-tooltip="{{ easyButton.tooltipText }}" tooltip-class="nowrap"\n    tooltip-placement="bottom-left" tooltip-animation="true"\n    tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n    <i class="fa " ng-class="easyButton.iconClass"></i>\n</div>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r,i,o;
/*! jQuery UI - v1.11.3 - 2015-02-22
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, selectmenu.js, slider.js, spinner.js, tabs.js, tooltip.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */i=[n(62)],void 0===(o="function"==typeof(r=function(t){function e(e,r){var i,o,a,s=e.nodeName.toLowerCase();return"area"===s?(i=e.parentNode,o=i.name,!(!e.href||!o||"map"!==i.nodeName.toLowerCase())&&!!(a=t("img[usemap='#"+o+"']")[0])&&n(a)):(/^(input|select|textarea|button|object)$/.test(s)?!e.disabled:"a"===s&&e.href||r)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}
/*!
 * jQuery UI Core 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var n=this.css("position"),r="absolute"===n,i=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return(!r||"static"!==e.css("position"))&&i.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,r){return!!t.data(e,r[3])},focusable:function(n){return e(n,!isNaN(t.attr(n,"tabindex")))},tabbable:function(n){var r=t.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&e(n,!i)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,n){var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),o={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};function a(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}t.fn["inner"+n]=function(e){return void 0===e?o["inner"+n].call(this):this.each(function(){t(this).css(i,a(this,e)+"px")})},t.fn["outer"+n]=function(e,r){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){t(this).css(i,a(this,e,!0,r)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(n,r){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),r&&r.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var n,r,i=t(this[0]);i.length&&i[0]!==document;){if(("absolute"===(n=i.css("position"))||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0}}),t.ui.plugin={add:function(e,n,r){var i,o=t.ui[e].prototype;for(i in r)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([n,r[i]])},call:function(t,e,n,r){var i,o=t.plugins[e];if(o&&(r||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(i=0;i<o.length;i++)t.options[o[i][0]]&&o[i][1].apply(t.element,n)}};
/*!
 * jQuery UI Widget 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var r=0,i=Array.prototype.slice;t.cleanData=function(e){return function(n){var r,i,o;for(o=0;null!=(i=n[o]);o++)try{(r=t._data(i,"events"))&&r.remove&&t(i).triggerHandler("remove")}catch(t){}e(n)}}(t.cleanData),t.widget=function(e,n,r){var i,o,a,s,l={},c=e.split(".")[0];return e=e.split(".")[1],i=c+"-"+e,r||(r=n,n=t.Widget),t.expr[":"][i.toLowerCase()]=function(e){return!!t.data(e,i)},t[c]=t[c]||{},o=t[c][e],a=t[c][e]=function(t,e){if(!this._createWidget)return new a(t,e);arguments.length&&this._createWidget(t,e)},t.extend(a,o,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),(s=new n).options=t.widget.extend({},s.options),t.each(r,function(e,r){t.isFunction(r)?l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},i=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=i,e=r.apply(this,arguments),this._super=n,this._superApply=o,e}}():l[e]=r}),a.prototype=t.widget.extend(s,{widgetEventPrefix:o&&s.widgetEventPrefix||e},l,{constructor:a,namespace:c,widgetName:e,widgetFullName:i}),o?(t.each(o._childConstructors,function(e,n){var r=n.prototype;t.widget(r.namespace+"."+r.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var n,r,o=i.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])r=o[a][n],o[a].hasOwnProperty(n)&&void 0!==r&&(t.isPlainObject(r)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],r):t.widget.extend({},r):e[n]=r);return e},t.widget.bridge=function(e,n){var r=n.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,s=i.call(arguments,1),l=this;return a?this.each(function(){var n,i=t.data(this,r);return"instance"===o?(l=i,!1):i?t.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each(function(){var e=t.data(this,r);e?(e.option(o||{}),e._init&&e._init()):t.data(this,r,new n(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var r,i,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},r=e.split("."),e=r.shift(),r.length){for(i=a[e]=t.widget.extend({},this.options[e]),o=0;o<r.length-1;o++)i[r[o]]=i[r[o]]||{},i=i[r[o]];if(e=r.pop(),1===arguments.length)return void 0===i[e]?null:i[e];i[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,r){var i,o=this;"boolean"!=typeof e&&(r=n,n=e,e=!1),r?(n=i=t(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),t.each(r,function(r,a){function s(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=r.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?i.delegate(u,c,s):n.bind(c,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(n).undelegate(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,r){var i,o,a=this.options[e];if(r=r||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(t.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(r,i,o){"string"==typeof i&&(i={effect:i});var a,s=i?!0===i||"number"==typeof i?n:i.effect||n:e;"number"==typeof(i=i||{})&&(i={duration:i}),a=!t.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),a&&t.effects&&t.effects.effect[s]?r[e](i):s!==e&&r[s]?r[s](i.duration,i.easing,o):r.queue(function(n){t(this)[e](),o&&o.call(r[0]),n()})}}),t.widget;var o=!1;
/*!
 * jQuery UI Mouse 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */t(document).mouseup(function(){o=!1}),t.widget("ui.mouse",{version:"1.11.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){if(!0===t.data(n.target,e.widgetName+".preventClickEvent"))return t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,r=1===e.which,i=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(r&&!i&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),o=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),
/*!
 * jQuery UI Position 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
function(){t.ui=t.ui||{};var e,n,r=Math.max,i=Math.abs,o=Math.round,a=/left|center|right/,s=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=t.fn.position;function f(t,e,n){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?n/100:1)]}function p(e,n){return parseInt(t.css(e,n),10)||0}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var n,r,i=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return t("body").append(i),n=o.offsetWidth,i.css("overflow","scroll"),r=o.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),e=n-r},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),r=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),i="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===r||"auto"===r&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:i?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),r=t.isWindow(n[0]),i=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:r,isDocument:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r||i?n.width():n.outerWidth(),height:r||i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);e=t.extend({},e);var u,h,g,m,v,y,b=t(e.of),w=t.position.getWithinInfo(e.within),_=t.position.getScrollInfo(w),x=(e.collision||"flip").split(" "),S={};return y=function(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}(b),b[0].preventDefault&&(e.at="left top"),h=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,r=(e[this]||"").split(" ");1===r.length&&(r=a.test(r[0])?r.concat(["center"]):s.test(r[0])?["center"].concat(r):["center","center"]),r[0]=a.test(r[0])?r[0]:"center",r[1]=s.test(r[1])?r[1]:"center",t=l.exec(r[0]),n=l.exec(r[1]),S[this]=[t?t[0]:0,n?n[0]:0],e[this]=[c.exec(r[0])[0],c.exec(r[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=h:"center"===e.at[0]&&(v.left+=h/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),u=f(S.at,h,g),v.left+=u[0],v.top+=u[1],this.each(function(){var a,s,l=t(this),c=l.outerWidth(),d=l.outerHeight(),y=p(this,"marginLeft"),C=p(this,"marginTop"),E=c+y+p(this,"marginRight")+_.width,T=d+C+p(this,"marginBottom")+_.height,M=t.extend({},v),k=f(S.my,l.outerWidth(),l.outerHeight());"right"===e.my[0]?M.left-=c:"center"===e.my[0]&&(M.left-=c/2),"bottom"===e.my[1]?M.top-=d:"center"===e.my[1]&&(M.top-=d/2),M.left+=k[0],M.top+=k[1],n||(M.left=o(M.left),M.top=o(M.top)),a={marginLeft:y,marginTop:C},t.each(["left","top"],function(n,r){t.ui.position[x[n]]&&t.ui.position[x[n]][r](M,{targetWidth:h,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:a,collisionWidth:E,collisionHeight:T,offset:[u[0]+k[0],u[1]+k[1]],my:e.my,at:e.at,within:w,elem:l})}),e.using&&(s=function(t){var n=m.left-M.left,o=n+h-c,a=m.top-M.top,s=a+g-d,u={target:{element:b,left:m.left,top:m.top,width:h,height:g},element:{element:l,left:M.left,top:M.top,width:c,height:d},horizontal:o<0?"left":n>0?"right":"center",vertical:s<0?"top":a>0?"bottom":"middle"};h<c&&i(n+o)<h&&(u.horizontal="center"),g<d&&i(a+s)<g&&(u.vertical="middle"),r(i(n),i(o))>r(i(a),i(s))?u.important="horizontal":u.important="vertical",e.using.call(this,t,u)}),l.offset(t.extend(M,{using:s}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,s=t.left-e.collisionPosition.marginLeft,l=o-s,c=s+e.collisionWidth-a-o;e.collisionWidth>a?l>0&&c<=0?(n=t.left+l+e.collisionWidth-a-o,t.left+=l-n):t.left=c>0&&l<=0?o:l>c?o+a-e.collisionWidth:o:l>0?t.left+=l:c>0?t.left-=c:t.left=r(t.left-s,t.left)},top:function(t,e){var n,i=e.within,o=i.isWindow?i.scrollTop:i.offset.top,a=e.within.height,s=t.top-e.collisionPosition.marginTop,l=o-s,c=s+e.collisionHeight-a-o;e.collisionHeight>a?l>0&&c<=0?(n=t.top+l+e.collisionHeight-a-o,t.top+=l-n):t.top=c>0&&l<=0?o:l>c?o+a-e.collisionHeight:o:l>0?t.top+=l:c>0?t.top-=c:t.top=r(t.top-s,t.top)}},flip:{left:function(t,e){var n,r,o=e.within,a=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,d=c+e.collisionWidth-s-l,f="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,h=-2*e.offset[0];u<0?((n=t.left+f+p+h+e.collisionWidth-s-a)<0||n<i(u))&&(t.left+=f+p+h):d>0&&((r=t.left-e.collisionPosition.marginLeft+f+p+h-l)>0||i(r)<d)&&(t.left+=f+p+h)},top:function(t,e){var n,r,o=e.within,a=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,d=c+e.collisionHeight-s-l,f="top"===e.my[1],p=f?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,h="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];u<0?((r=t.top+p+h+g+e.collisionHeight-s-a)<0||r<i(u))&&(t.top+=p+h+g):d>0&&((n=t.top-e.collisionPosition.marginTop+p+h+g-l)>0||i(n)<d)&&(t.top+=p+h+g)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,r,i,o,a,s=document.getElementsByTagName("body")[0],l=document.createElement("div");for(a in e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)e.style[a]=i[a];e.appendChild(l),(r=s||document.documentElement).insertBefore(e,r.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=t(l).offset().left,n=o>10&&o<11,e.innerHTML="",r.removeChild(e)}()}(),t.ui.position,
/*!
 * jQuery UI Draggable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
t.widget("ui.draggable",t.ui.mouse,{version:"1.11.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var n=this.options;return this._blurActiveElement(e),!(this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blockFrames(!0===n.iframeFix?"iframe":n.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=this.document[0];if(this.handleElement.is(e.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&t(n.activeElement).blur()}catch(t){}},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(!1===this._trigger("drag",e,r))return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,r=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(r=t.ui.ddmanager.drop(this,e)),this.dropped&&(r=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",e)&&n._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var n=this.options,r=t.isFunction(n.helper),i=r?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,r,i=this.options,o=this.document[0];this.relativeContainer=null,i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=t(i.containment),(r=n[0])&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n)):this.containment=i.containment:this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,r,i,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(i=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-a.grid[1]:i+a.grid[1]:i,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,n,r){return r=r||this._uiHash(),t.ui.plugin.call(this,e,[n,r,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,r){var i=t.extend({},n,{item:r.element});r.sortables=[],t(r.options.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,i))})},stop:function(e,n,r){var i=t.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,t.each(r.sortables,function(){this.isOver?(this.isOver=0,r.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,i))})},drag:function(e,n,r){t.each(r.sortables,function(){var i=!1,o=this;o.positionAbs=r.positionAbs,o.helperProportions=r.helperProportions,o.offset.click=r.offset.click,o._intersectsWith(o.containerCache)&&(i=!0,t.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(i=!1),i})),i?(o.isOver||(o.isOver=1,o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=r.offset.click.top,o.offset.click.left=r.offset.click.left,o.offset.parent.left-=r.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=r.offset.parent.top-o.offset.parent.top,r._trigger("toSortable",e),r.dropped=o.element,t.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,o.fromOutside=r),o.currentItem&&(o._mouseDrag(e),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),r._refreshOffsets(e),n.position=r._generatePosition(e,!0),r._trigger("fromSortable",e),r.dropped=!1,t.each(r.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,r){var i=t("body"),o=r.options;i.css("cursor")&&(o._cursor=i.css("cursor")),i.css("cursor",o.cursor)},stop:function(e,n,r){var i=r.options;i._cursor&&t("body").css("cursor",i._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,r){var i=t(n.helper),o=r.options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(e,n,r){var i=r.options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,r){var i=r.options,o=!1,a=r.scrollParentNotHidden[0],s=r.document[0];a!==s&&"HTML"!==a.tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+a.offsetHeight-e.pageY<i.scrollSensitivity?a.scrollTop=o=a.scrollTop+i.scrollSpeed:e.pageY-r.overflowOffset.top<i.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+a.offsetWidth-e.pageX<i.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+i.scrollSpeed:e.pageX-r.overflowOffset.left<i.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(s).scrollTop()<i.scrollSensitivity?o=t(s).scrollTop(t(s).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<i.scrollSensitivity&&(o=t(s).scrollTop(t(s).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(s).scrollLeft()<i.scrollSensitivity?o=t(s).scrollLeft(t(s).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<i.scrollSensitivity&&(o=t(s).scrollLeft(t(s).scrollLeft()+i.scrollSpeed)))),!1!==o&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(r,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,r){var i=r.options;r.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var e=t(this),n=e.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,r){var i,o,a,s,l,c,u,d,f,p,h=r.options,g=h.snapTolerance,m=n.offset.left,v=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(f=r.snapElements.length-1;f>=0;f--)l=r.snapElements[f].left-r.margins.left,c=l+r.snapElements[f].width,u=r.snapElements[f].top-r.margins.top,d=u+r.snapElements[f].height,v<l-g||m>c+g||b<u-g||y>d+g||!t.contains(r.snapElements[f].item.ownerDocument,r.snapElements[f].item)?(r.snapElements[f].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,e,t.extend(r._uiHash(),{snapItem:r.snapElements[f].item})),r.snapElements[f].snapping=!1):("inner"!==h.snapMode&&(i=Math.abs(u-b)<=g,o=Math.abs(d-y)<=g,a=Math.abs(l-v)<=g,s=Math.abs(c-m)<=g,i&&(n.position.top=r._convertPositionTo("relative",{top:u-r.helperProportions.height,left:0}).top),o&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top),a&&(n.position.left=r._convertPositionTo("relative",{top:0,left:l-r.helperProportions.width}).left),s&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left)),p=i||o||a||s,"outer"!==h.snapMode&&(i=Math.abs(u-y)<=g,o=Math.abs(d-b)<=g,a=Math.abs(l-m)<=g,s=Math.abs(c-v)<=g,i&&(n.position.top=r._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top),a&&(n.position.left=r._convertPositionTo("relative",{top:0,left:l}).left),s&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left)),!r.snapElements[f].snapping&&(i||o||a||s||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,e,t.extend(r._uiHash(),{snapItem:r.snapElements[f].item})),r.snapElements[f].snapping=i||o||a||s||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,r){var i,o=r.options,a=t.makeArray(t(o.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});a.length&&(i=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",i+e)}),this.css("zIndex",i+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,r){var i=t(n.helper),o=r.options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(e,n,r){var i=r.options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}}),t.ui.draggable,
/*!
 * jQuery UI Droppable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */
t.widget("ui.droppable",{version:"1.11.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(r)?r:function(t){return t.is(r)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){if("accept"===e)this.accept=t.isFunction(n)?n:function(t){return t.is(n)};else if("scope"===e){var r=t.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(e,n)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var r=n||t.ui.ddmanager.current,i=!1;return!(!r||(r.currentItem||r.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=t(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===r.options.scope&&n.accept.call(n.element[0],r.currentItem||r.element)&&t.ui.intersect(r,t.extend(n,{offset:n.element.offset()}),n.options.tolerance,e))return i=!0,!1}),!i&&!!this.accept.call(this.element[0],r.currentItem||r.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(r)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,n){return t>=e&&t<e+n}return function(e,n,r,i){if(!n.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,s=o+e.helperProportions.width,l=a+e.helperProportions.height,c=n.offset.left,u=n.offset.top,d=c+n.proportions().width,f=u+n.proportions().height;switch(r){case"fit":return c<=o&&s<=d&&u<=a&&l<=f;case"intersect":return c<o+e.helperProportions.width/2&&s-e.helperProportions.width/2<d&&u<a+e.helperProportions.height/2&&l-e.helperProportions.height/2<f;case"pointer":return t(i.pageY,u,n.proportions().height)&&t(i.pageX,c,n.proportions().width);case"touch":return(a>=u&&a<=f||l>=u&&l<=f||a<u&&l>f)&&(o>=c&&o<=d||s>=c&&s<=d||o<c&&s>d);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,n){var r,i,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=n?n.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(r=0;r<o.length;r++)if(!(o[r].options.disabled||e&&!o[r].accept.call(o[r].element[0],e.currentItem||e.element))){for(i=0;i<s.length;i++)if(s[i]===o[r].element[0]){o[r].proportions().height=0;continue t}o[r].visible="none"!==o[r].element.css("display"),o[r].visible&&("mousedown"===a&&o[r]._activate.call(o[r],n),o[r].offset=o[r].element.offset(),o[r].proportions({width:o[r].element[0].offsetWidth,height:o[r].element[0].offsetHeight}))}},drop:function(e,n){var r=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,n)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,i,o,a=t.ui.intersect(e,this,this.options.tolerance,n),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(i=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===i})).length&&((r=t(o[0]).droppable("instance")).greedyChild="isover"===s)),r&&"isover"===s&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),r&&"isout"===s&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}},t.ui.droppable,
/*!
 * jQuery UI Resizable 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
t.widget("ui.resizable",t.ui.mouse,{version:"1.11.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return e[r]>0||(e[r]=1,i=e[r]>0,e[r]=0,i)},_create:function(){var e,n,r,i,o=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},n=0;n<e.length;n++)r=t.trim(e[n]),(i=t("<div class='ui-resizable-handle ui-resizable-"+r+"'></div>")).css({zIndex:a.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(e){var n,r,i,o;for(n in e=e||this.element,this.handles)this.handles[n].constructor===String&&(this.handles[n]=this.element.children(this.handles[n]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=t(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(i,o),this._proportionallyResize()),t(this.handles[n]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){a.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(e){var n,r,i=!1;for(n in this.handles)((r=t(this.handles[n])[0])===e.target||t.contains(r,e.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(e){var n,r,i,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),o.containment&&(n+=t(o.containment).scrollLeft()||0,r+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===i?this.axis+"-resize":i),a.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var n,r,i=this.originalMousePosition,o=this.axis,a=e.pageX-i.left||0,s=e.pageY-i.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[e,a,s]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var n,r,i,o,a,s,l,c=this.options;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:this.sizeDiff.height,o=r?0:this.sizeDiff.width,a={width:this.helper.width()-o,height:this.helper.height()-i},s=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,c.animate||this.element.css(t.extend(a,{top:l,left:s})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!c.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,n,r,i,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,i=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),r>o.minHeight&&(o.minHeight=r),n<o.maxWidth&&(o.maxWidth=n),i<o.maxHeight&&(o.maxHeight=i)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,r=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===r&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===r&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,r=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,i=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,s=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),r&&(t.width=e.maxWidth),i&&(t.height=e.maxHeight),o&&c&&(t.left=s-e.minWidth),r&&c&&(t.left=s-e.maxWidth),a&&u&&(t.top=l-e.minHeight),i&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,n=[],r=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],i=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)n[e]=parseInt(r[e],10)||0,n[e]+=parseInt(i[e],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,n=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,r=this.originalPosition;return{left:r.left+e,width:n.width-e}},n:function(t,e,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,r){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,r]))},sw:function(e,n,r){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,r]))},ne:function(e,n,r){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,r]))},nw:function(e,n,r){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,r]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,o=i.length&&/textarea/i.test(i[0].nodeName),a=o&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-a},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,u&&c?{top:u,left:c}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&t(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,n,r,i,o,a,s,l=t(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,f=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;f&&(l.containerElement=t(f),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(f),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,r){n[t]=l._num(e.css("padding"+r))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]},r=l.containerOffset,i=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(f,"left")?f.scrollWidth:o,s=l._hasScroll(f)?f.scrollHeight:i,l.parentData={element:f,left:r.left,top:r.top,width:a,height:s}))},resize:function(e){var n,r,i,o,a=t(this).resizable("instance"),s=a.options,l=a.containerOffset,c=a.position,u=a._aspectRatio||e.shiftKey,d={top:0,left:0},f=a.containerElement,p=!0;f[0]!==document&&/static/.test(f.css("position"))&&(d=l),c.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),u&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=s.helper?l.left:0),c.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),u&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),i=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),i&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left)),r=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top)),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,u&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),r+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-r,u&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),n=e.options,r=e.containerOffset,i=e.containerPosition,o=e.containerElement,a=t(e.helper),s=a.offset(),l=a.outerWidth()-e.sizeDiff.width,c=a.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(o.css("position"))&&t(this).css({left:s.left-i.left-r.left,width:l,height:c}),e._helper&&!n.animate&&/static/.test(o.css("position"))&&t(this).css({left:s.left-i.left-r.left,width:l,height:c})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),n=e.options,r=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?r(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):t.each(n.alsoResize,function(t){r(t)})},resize:function(e,n){var r=t(this).resizable("instance"),i=r.options,o=r.originalSize,a=r.originalPosition,s={height:r.size.height-o.height||0,width:r.size.width-o.width||0,top:r.position.top-a.top||0,left:r.position.left-a.left||0},l=function(e,r){t(e).each(function(){var e=t(this),i=t(this).data("ui-resizable-alsoresize"),o={},a=r&&r.length?r:e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(a,function(t,e){var n=(i[e]||0)+(s[e]||0);n&&n>=0&&(o[e]=n||null)}),e.css(o)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?l(i.alsoResize):t.each(i.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),n=e.options,r=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,n=t(this).resizable("instance"),r=n.options,i=n.size,o=n.originalSize,a=n.originalPosition,s=n.axis,l="number"==typeof r.grid?[r.grid,r.grid]:r.grid,c=l[0]||1,u=l[1]||1,d=Math.round((i.width-o.width)/c)*c,f=Math.round((i.height-o.height)/u)*u,p=o.width+d,h=o.height+f,g=r.maxWidth&&r.maxWidth<p,m=r.maxHeight&&r.maxHeight<h,v=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>h;r.grid=l,v&&(p+=c),y&&(h+=u),g&&(p-=c),m&&(h-=u),/^(se|s|e)$/.test(s)?(n.size.width=p,n.size.height=h):/^(ne)$/.test(s)?(n.size.width=p,n.size.height=h,n.position.top=a.top-f):/^(sw)$/.test(s)?(n.size.width=p,n.size.height=h,n.position.left=a.left-d):((h-u<=0||p-c<=0)&&(e=n._getPaddingPlusBorderDimensions(this)),h-u>0?(n.size.height=h,n.position.top=a.top-f):(h=u-e.height,n.size.height=h,n.position.top=a.top+o.height-h),p-c>0?(n.size.width=p,n.position.left=a.left-d):(p=c-e.width,n.size.width=p,n.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.selectable",t.ui.mouse,{version:"1.11.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(e=t(n.options.filter,n.element[0])).addClass("ui-selectee"),e.each(function(){var e=t(this),n=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:n.left,top:n.top,right:n.left+e.outerWidth(),bottom:n.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var n=this,r=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(r.filter,this.element[0]),this._trigger("start",e),t(r.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=t.data(this,"selectable-item");r.startselected=!0,e.metaKey||e.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",e,{unselecting:r.element}))}),t(e.target).parents().addBack().each(function(){var r,i=t.data(this,"selectable-item");if(i)return r=!e.metaKey&&!e.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",e,{selecting:i.element}):n._trigger("unselecting",e,{unselecting:i.element}),!1}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var n,r=this,i=this.options,o=this.opos[0],a=this.opos[1],s=e.pageX,l=e.pageY;return o>s&&(n=s,s=o,o=n),a>l&&(n=l,l=a,a=n),this.helper.css({left:o,top:a,width:s-o,height:l-a}),this.selectees.each(function(){var n=t.data(this,"selectable-item"),c=!1;n&&n.element!==r.element[0]&&("touch"===i.tolerance?c=!(n.left>s||n.right<o||n.top>l||n.bottom<a):"fit"===i.tolerance&&(c=n.left>o&&n.right<s&&n.top>a&&n.bottom<l),c?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",e,{selecting:n.element}))):(n.selecting&&((e.metaKey||e.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",e,{unselecting:n.element}))),n.selected&&(e.metaKey||e.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",e,{unselecting:n.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var r=t.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",e,{unselected:r.element})}),t(".ui-selecting",this.element[0]).each(function(){var r=t.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",e,{selected:r.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),t.widget("ui.sortable",t.ui.mouse,{version:"1.11.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&t<e+n},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||this._isFloating(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var r=null,i=!1,o=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,o.widgetName+"-item")===o)return r=t(this),!1}),t.data(e.target,o.widgetName+"-item")===o&&(r=t(e.target)),!r||this.options.handle&&!n&&(t(this.options.handle,r).find("*").addBack().each(function(){this===e.target&&(i=!0)}),!i)||(this.currentItem=r,this._removeCurrentsFromItems(),0)))},_mouseStart:function(e,n,r){var i,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,r,i,o,a=this.options,s=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),!1!==s&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],(o=this._intersectsWithPointer(r))&&r.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===i||t.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],i))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(e,r),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var r=this,i=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){r._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),r=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&r.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!r.length&&e.key&&r.push(e.key+"="),r.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),r=[];return e=e||{},n.each(function(){r.push(t(e.item||this).attr(e.attribute||"id")||"")}),r},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,o=t.left,a=o+t.width,s=t.top,l=s+t.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||r+c>s&&r+c<l,f="y"===this.options.axis||e+u>o&&e+u<a,p=d&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:o<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=e&&n,i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!r&&(this.floating?o&&"right"===o||"down"===i?2:1:i&&("down"===i?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&e||"up"===r&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n,r,i,o,a=[],s=[],l=this._connectWith();if(l&&e)for(n=l.length-1;n>=0;n--)for(i=t(l[n],this.document[0]),r=i.length-1;r>=0;r--)(o=t.data(i[r],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function c(){a.push(this)}for(s.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(c);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,r,i,o,a,s,l,c,u=this.items,d=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--)for(i=t(f[n],this.document[0]),r=i.length-1;r>=0;r--)(o=t.data(i[r],this.widgetFullName))&&o!==this&&!o.options.disabled&&(d.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(n=d.length-1;n>=0;n--)for(a=d[n][1],s=d[n][0],r=0,c=s.length;r<c;r++)(l=t(s[r])).data(this.widgetName+"-item",a),u.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var n,r,i,o;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(r=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?t(this.options.toleranceElement,r.item):r.item,e||(r.width=i.outerWidth(),r.height=i.outerHeight()),o=i.offset(),r.left=o.left,r.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){var n,r=(e=e||this).options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=e.currentItem[0].nodeName.toLowerCase(),i=t("<"+r+">",e.document[0]).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===r?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)}):"img"===r&&i.attr("src",e.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(t,i){n&&!r.forcePlaceholderSize||(i.height()||i.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(r.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),r.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var n,r,i,o,a,s,l,c,u,d,f=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(i=1e4,o=null,u=f.floating||this._isFloating(this.currentItem),a=u?"left":"top",s=u?"width":"height",d=u?"clientX":"clientY",r=this.items.length-1;r>=0;r--)t.contains(this.containers[p].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(l=this.items[r].item.offset()[a],c=!1,e[d]-l>this.items[r][s]/2&&(c=!0),Math.abs(e[d]-l)<i&&(i=Math.abs(e[d]-l),o=this.items[r],this.direction=c?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var n=this.options,r=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),r[0].style.width&&!n.forceHelperSize||r.width(this.currentItem.width()),r[0].style.height&&!n.forceHelperSize||r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(e=t(i.containment)[0],n=t(i.containment).offset(),r="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var r="absolute"===e?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*r}},_generatePosition:function(e){var n,r,i=this.options,o=e.pageX,a=e.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(t,e,n,r){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,e){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();function i(t,e,n){return function(r){n._trigger(t,r,e._uiHash(e))}}for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(n=0;n<r.length;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}}),t.widget("ui.accordion",{version:"1.11.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),t=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&(this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e))):this._activate(e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var n=t.ui.keyCode,r=this.headers.length,i=this.headers.index(e.target),o=!1;switch(e.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:o=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(e);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[r-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var t=this.headers,e=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),e&&(this._off(t.not(this.headers)),this._off(e.not(this.panels)))},_refresh:function(){var e,n=this.options,r=n.heightStyle,i=this.element.parent();this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var e=t(this),n=e.uniqueId().attr("id"),r=e.next(),i=r.uniqueId().attr("id");e.attr("aria-controls",i),r.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===r?(e=i.height(),this.element.siblings(":visible").each(function(){var n=t(this),r=n.css("position");"absolute"!==r&&"fixed"!==r&&(e-=n.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===r&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var n=this._findActive(e)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var n={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var n=this.options,r=this.active,i=t(e.currentTarget),o=i[0]===r[0],a=o&&n.collapsible,s=a?t():i.next(),l=r.next(),c={oldHeader:r,oldPanel:l,newHeader:a?t():i,newPanel:s};e.preventDefault(),o&&!n.collapsible||!1===this._trigger("beforeActivate",e,c)||(n.active=!a&&this.headers.index(i),this.active=o?t():i,this._toggle(c),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),o||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var n=e.newPanel,r=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,e):(r.hide(),n.show(),this._toggleComplete(e)),r.attr({"aria-hidden":"true"}),r.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&r.length?r.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(t(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(t,e,n){var r,i,o,a=this,s=0,l=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=l&&c.down||c,d=function(){a._toggleComplete(n)};return"number"==typeof u&&(o=u),"string"==typeof u&&(i=u),i=i||u.easing||c.easing,o=o||u.duration||c.duration,e.length?t.length?(r=t.show().outerHeight(),e.animate(this.hideProps,{duration:o,easing:i,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(this.showProps,{duration:o,easing:i,complete:d,step:function(t,n){n.now=Math.round(t),"height"!==n.prop?s+=n.now:"content"!==a.options.heightStyle&&(n.now=Math.round(r-e.outerHeight()-s),s=0)}})):e.animate(this.hideProps,o,i,d):t.animate(this.showProps,o,i,d)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),t.widget("ui.menu",{version:"1.11.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var n=t(e.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var n=t(e.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var n,r,i,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,r=this.previousFilter||"",i=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),i===r?o=!0:i=r+i,n=this._filterMenuItems(i),(n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(i=String.fromCharCode(e.keyCode),n=this._filterMenuItems(i)),n.length?(this.focus(e,n),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(t):this.select(t))},refresh:function(){var e,n,r=this,i=this.options.icons.submenu,o=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),o.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.parent(),r=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),e.attr("aria-labelledby",n.attr("id"))}),e=o.add(this.element),(n=e.find(this.options.items)).not(".ui-menu-item").each(function(){var e=t(this);r._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},focus:function(t,e){var n,r;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),r=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,r,i,o,a,s;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,i=e.offset().top-this.activeMenu.offset().top-n-r,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=e.outerHeight(),i<0?this.activeMenu.scrollTop(o+i):i+s>a&&this.activeMenu.scrollTop(o+i-a+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(e),this.activeMenu=r},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var r;this.active&&(r="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[e]()),this.focus(n,r)},nextPage:function(e){var n,r,i;this.active?this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(n=t(this)).offset().top-r-i<0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var n,r,i;this.active?this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(n=t(this)).offset().top-r+i>0}),this.focus(e,n)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)},_filterMenuItems:function(e){var n=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(t.trim(t(this).text()))})}}),
/*!
 * jQuery UI Autocomplete 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
t.widget("ui.autocomplete",{version:"1.11.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,n,r,i=this.element[0].nodeName.toLowerCase(),o="textarea"===i,a="input"===i;this.isMultiLine=!!o||!a&&this.element.prop("isContentEditable"),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return e=!0,r=!0,void(n=!0);e=!1,r=!1,n=!1;var o=t.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",i);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",i);break;case o.UP:e=!0,this._keyEvent("previous",i);break;case o.DOWN:e=!0,this._keyEvent("next",i);break;case o.ENTER:this.menu.active&&(e=!0,i.preventDefault(),this.menu.select(i));break;case o.TAB:this.menu.active&&this.menu.select(i);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||r.preventDefault());if(!n){var i=t.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}}},input:function(t){if(r)return r=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(r){r.target===e.element[0]||r.target===n||t.contains(n,r.target)||e.close()})})},menufocus:function(e,n){var r,i;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});i=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:i})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(i.value),(r=n.item.attr("aria-label")||i.value)&&t.trim(r).length&&(this.liveRegion.children().hide(),t("<div>").text(r).appendTo(this.liveRegion))},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=t("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,n,r=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(n,r){r(t.ui.autocomplete.filter(e,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(e,i){r.xhr&&r.xhr.abort(),r.xhr=t.ajax({url:n,data:e,dataType:"json",success:function(t){i(t)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),n=this.menu.element.is(":visible"),r=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;e&&(!e||n||r)||(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var n=this.menu.element.empty();this._renderMenu(n,e),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,n){var r=this;t.each(n,function(t,n){r._renderItemData(e,n)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,n){return t("<li>").text(n.label).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,n){var r=new RegExp(t.ui.autocomplete.escapeRegex(n),"i");return t.grep(e,function(t){return r.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(n).appendTo(this.liveRegion))}}),t.ui.autocomplete;var a,s,l="ui-button ui-widget ui-state-default ui-corner-all",c="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",u=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},d=function(e){var n=e.name,r=e.form,i=t([]);return n&&(n=n.replace(/'/g,"\\'"),i=r?t(r).find("[name='"+n+"'][type=radio]"):t("[name='"+n+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),i};
/*!
 * jQuery UI Button 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */function f(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=p(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function p(e){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(n,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",h)}function h(){t.datepicker._isDisabledDatepicker(s.inline?s.dpDiv.parent()[0]:s.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function g(e,n){for(var r in t.extend(e,n),n)null==n[r]&&(e[r]=n[r]);return e}
/*!
 * jQuery UI Spinner 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */
function m(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.button",{version:"1.11.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,u),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,n=this.options,r="checkbox"===this.type||"radio"===this.type,i=r?"":"ui-state-active";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(l).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===a&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||t(this).removeClass(i)}).bind("click"+this.eventNamespace,function(t){n.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var r=e.element[0];d(r).not(r).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(n.disabled)return!1;t(this).addClass("ui-state-active"),a=this,e.document.one("mouseup",function(){a=null})}).bind("mouseup"+this.eventNamespace,function(){if(n.disabled)return!1;t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(n.disabled)return!1;e.keyCode!==t.ui.keyCode.SPACE&&e.keyCode!==t.ui.keyCode.ENTER||t(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(l+" ui-state-active "+c).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),void(e&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")));this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?d(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(c),n=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,o=[];r.primary||r.secondary?(this.options.text&&o.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(o.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(n)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.11.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction"),n=this.element.find(this.options.items),r=n.filter(":ui-button");n.not(":ui-button").button(),r.button("refresh"),this.buttons=n.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),t.ui.button,
/*!
 * jQuery UI Datepicker 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */
t.extend(t.ui,{datepicker:{version:"1.11.3"}}),t.extend(f.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return g(this._defaults,t||{}),this},_attachDatepicker:function(e,n){var r,i,o;r=e.nodeName.toLowerCase(),i="div"===r||"span"===r,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(o=this._newInst(t(e),i)).settings=t.extend({},n||{}),"input"===r?this._connectDatepicker(e,o):i&&this._inlineDatepicker(e,o)},_newInst:function(e,n){var r=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?p(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,n){var r=t(e);n.append=t([]),n.trigger=t([]),r.hasClass(this.markerClassName)||(this._attachments(r,n),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),t.data(e,"datepicker",n),n.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,n){var r,i,o,a=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove(),a&&(n.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[s?"before":"after"](n.append)),e.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),"focus"!==(r=this._get(n,"showOn"))&&"both"!==r||e.focus(this._showDatepicker),"button"!==r&&"both"!==r||(i=this._get(n,"buttonText"),o=this._get(n,"buttonImage"),n.trigger=t(this._get(n,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:i,title:i}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:i,title:i}):i)),e[s?"before":"after"](n.trigger),n.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,r,i,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(n=0,r=0,i=0;i<t.length;i++)t[i].length>n&&(n=t[i].length,r=i);return r},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,n){var r=t(e);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(n.dpDiv),t.data(e,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(e),n.dpDiv.css("display","block"))},_dialogDatepicker:function(e,n,r,i,o){var a,s,l,c,u,d=this._dialogInst;return d||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),(d=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],"datepicker",d)),g(d.settings,i||{}),n=n&&n.constructor===Date?this._formatDate(d,n):n,this._dialogInput.val(n),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(s=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+c,l/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var n,r=t(e),i=t.data(e,"datepicker");r.hasClass(this.markerClassName)&&(n=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===n?(i.append.remove(),i.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==n&&"span"!==n||r.removeClass(this.markerClassName).empty(),s===i&&(s=null))},_enableDatepicker:function(e){var n,r,i=t(e),o=t.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(n=e.nodeName.toLowerCase())?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||((r=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var n,r,i=t(e),o=t.data(e,"datepicker");i.hasClass(this.markerClassName)&&("input"===(n=e.nodeName.toLowerCase())?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||((r=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,n,r){var i,o,a,s,l=this._getInst(e);if(2===arguments.length&&"string"==typeof n)return"defaults"===n?t.extend({},t.datepicker._defaults):l?"all"===n?t.extend({},l.settings):this._get(l,n):null;i=n||{},"string"==typeof n&&((i={})[n]=r),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(l,"min"),s=this._getMinMaxDate(l,"max"),g(l.settings,i),null!==a&&void 0!==i.dateFormat&&void 0===i.minDate&&(l.settings.minDate=this._formatDate(l,a)),null!==s&&void 0!==i.dateFormat&&void 0===i.maxDate&&(l.settings.maxDate=this._formatDate(l,s)),"disabled"in i&&(i.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(e){var n,r,i,o=t.datepicker._getInst(e.target),a=!0,s=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return(i=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv))[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,i[0]),(n=t.datepicker._get(o,"onSelect"))?(r=t.datepicker._formatDate(o),n.apply(o.input?o.input[0]:null,[r,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,s?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var n,r,i=t.datepicker._getInst(e.target);if(t.datepicker._get(i,"constrainInput"))return n=t.datepicker._possibleChars(t.datepicker._get(i,"dateFormat")),r=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(e){var n=t.datepicker._getInst(e.target);if(n.input.val()!==n.lastVal)try{t.datepicker.parseDate(t.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,t.datepicker._getFormatConfig(n))&&(t.datepicker._setDateFromField(n),t.datepicker._updateAlternate(n),t.datepicker._updateDatepicker(n))}catch(t){}return!0},_showDatepicker:function(e){var n,r,i,o,a,s,l;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),t.datepicker._isDisabledDatepicker(e)||t.datepicker._lastInput===e||(n=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==n&&(t.datepicker._curInst.dpDiv.stop(!0,!0),n&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),r=t.datepicker._get(n,"beforeShow"),!1!==(i=r?r.apply(e,[e,n]):{})&&(g(n.settings,i),n.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(n),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),o=!1,t(e).parents().each(function(){return!(o|="fixed"===t(this).css("position"))}),a={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(n),a=t.datepicker._checkOffset(n,a,o),n.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),n.inline||(s=t.datepicker._get(n,"showAnim"),l=t.datepicker._get(n,"duration"),n.dpDiv.css("z-index",function(t){for(var e,n;t.length&&t[0]!==document;){if(("absolute"===(e=t.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(t.css("zIndex"),10),!isNaN(n)&&0!==n))return n;t=t.parent()}return 0}(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[s]?n.dpDiv.show(s,t.datepicker._get(n,"showOptions"),l):n.dpDiv[s||"show"](s?l:null),t.datepicker._shouldFocusInput(n)&&n.input.focus(),t.datepicker._curInst=n)))},_updateDatepicker:function(e){this.maxRows=4,s=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n,r=this._getNumberOfMonths(e),i=r[1],o=e.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&h.apply(o.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),e.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(n=e.yearshtml,setTimeout(function(){n===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),n=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,n,r){var i=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(r?0:t(document).scrollLeft()),c=document.documentElement.clientHeight+(r?0:t(document).scrollTop());return n.left-=this._get(e,"isRTL")?i-a:0,n.left-=r&&n.left===e.input.offset().left?t(document).scrollLeft():0,n.top-=r&&n.top===e.input.offset().top+s?t(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>l&&l>i?Math.abs(n.left+i-l):0),n.top-=Math.min(n.top,n.top+o>c&&c>o?Math.abs(o+s):0),n},_findPos:function(e){for(var n,r=this._getInst(e),i=this._get(r,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];return[(n=t(e).offset()).left,n.top]},_hideDatepicker:function(e){var n,r,i,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(n=this._get(a,"showAnim"),r=this._get(a,"duration"),i=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[n]||t.effects[n])?a.dpDiv.hide(n,t.datepicker._get(a,"showOptions"),r,i):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,(o=this._get(a,"onClose"))&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var n=t(e.target),r=t.datepicker._getInst(n[0]);(n[0].id===t.datepicker._mainDivId||0!==n.parents("#"+t.datepicker._mainDivId).length||n.hasClass(t.datepicker.markerClassName)||n.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!n.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===r)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,n,r){var i=t(e),o=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(o,n+("M"===r?this._get(o,"showCurrentAtPos"):0),r),this._updateDatepicker(o))},_gotoToday:function(e){var n,r=t(e),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(e,n,r){var i=t(e),o=this._getInst(i[0]);o["selected"+("M"===r?"Month":"Year")]=o["draw"+("M"===r?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(i)},_selectDay:function(e,n,r,i){var o,a=t(e);t(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||((o=this._getInst(a[0])).selectedDay=o.currentDay=t("a",i).html(),o.selectedMonth=o.currentMonth=n,o.selectedYear=o.currentYear=r,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var n=t(e);this._selectDate(n,"")},_selectDate:function(e,n){var r,i=t(e),o=this._getInst(i[0]);n=null!=n?n:this._formatDate(o),o.input&&o.input.val(n),this._updateAlternate(o),(r=this._get(o,"onSelect"))?r.apply(o.input?o.input[0]:null,[n,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var n,r,i,o=this._get(e,"altField");o&&(n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e)),t(o).each(function(){t(this).val(i)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(e,n,r){if(null==e||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?n.toString():n+""))return null;var i,o,a,s,l=0,c=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,f=(r?r.dayNames:null)||this._defaults.dayNames,p=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,h=(r?r.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,v=-1,y=-1,b=!1,w=function(t){var n=i+1<e.length&&e.charAt(i+1)===t;return n&&i++,n},_=function(t){var e=w(t),r="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,i="y"===t?r:1,o=new RegExp("^\\d{"+i+","+r+"}"),a=n.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},x=function(e,r,i){var o=-1,a=t.map(w(e)?i:r,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var r=e[1];if(n.substr(l,r.length).toLowerCase()===r.toLowerCase())return o=e[0],l+=r.length,!1}),-1!==o)return o+1;throw"Unknown name at position "+l},S=function(){if(n.charAt(l)!==e.charAt(i))throw"Unexpected literal at position "+l;l++};for(i=0;i<e.length;i++)if(b)"'"!==e.charAt(i)||w("'")?S():b=!1;else switch(e.charAt(i)){case"d":v=_("d");break;case"D":x("D",d,f);break;case"o":y=_("o");break;case"m":m=_("m");break;case"M":m=x("M",p,h);break;case"y":g=_("y");break;case"@":s=new Date(_("@")),g=s.getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"!":s=new Date((_("!")-this._ticksTo1970)/1e4),g=s.getFullYear(),m=s.getMonth()+1,v=s.getDate();break;case"'":w("'")?S():b=!0;break;default:S()}if(l<n.length&&(a=n.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():g<100&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(g<=u?0:-100)),y>-1)for(m=1,v=y;o=this._getDaysInMonth(g,m-1),!(v<=o);)m++,v-=o;if((s=this._daylightSavingAdjust(new Date(g,m-1,v))).getFullYear()!==g||s.getMonth()+1!==m||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,n){if(!e)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(e){var n=r+1<t.length&&t.charAt(r+1)===e;return n&&r++,n},c=function(t,e,n){var r=""+e;if(l(t))for(;r.length<n;)r="0"+r;return r},u=function(t,e,n,r){return l(t)?r[e]:n[e]},d="",f=!1;if(e)for(r=0;r<t.length;r++)if(f)"'"!==t.charAt(r)||l("'")?d+=t.charAt(r):f=!1;else switch(t.charAt(r)){case"d":d+=c("d",e.getDate(),2);break;case"D":d+=u("D",e.getDay(),i,o);break;case"o":d+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",e.getMonth()+1,2);break;case"M":d+=u("M",e.getMonth(),a,s);break;case"y":d+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":d+=e.getTime();break;case"!":d+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":f=!0;break;default:d+=t.charAt(r)}return d},_possibleChars:function(t){var e,n="",r=!1,i=function(n){var r=e+1<t.length&&t.charAt(e+1)===n;return r&&e++,r};for(e=0;e<t.length;e++)if(r)"'"!==t.charAt(e)||i("'")?n+=t.charAt(e):r=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=t.charAt(e)}return n},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),r=t.lastVal=t.input?t.input.val():null,i=this._getDefaultDate(t),o=i,a=this._getFormatConfig(t);try{o=this.parseDate(n,r,a)||i}catch(t){r=e?"":r}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=r?o.getDate():0,t.currentMonth=r?o.getMonth():0,t.currentYear=r?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,n,r){var i=null==n||""===n?r:"string"==typeof n?function(n){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),n,t.datepicker._getFormatConfig(e))}catch(t){}for(var r=(n.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),o=r.getMonth(),a=r.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(n);l;){switch(l[2]||"d"){case"d":case"D":a+=parseInt(l[1],10);break;case"w":case"W":a+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(i,o));break;case"y":case"Y":i+=parseInt(l[1],10),a=Math.min(a,t.datepicker._getDaysInMonth(i,o))}l=s.exec(n)}return new Date(i,o,a)}(n):"number"==typeof n?isNaN(n)?r:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(n):new Date(n.getTime());return(i=i&&"Invalid Date"===i.toString()?r:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var r=!e,i=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),i===t.selectedMonth&&o===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(r?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var n=this._get(e,"stepMonths"),r="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(r,-n,"M")},next:function(){t.datepicker._adjustDate(r,+n,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(r)},selectDay:function(){return t.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(r,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v,y,b,w,_,x,S,C,E,T,M,k,A,I,O,P,L,D,N,R,F,B,j,q=new Date,z=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(t,"isRTL"),$=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),H=this._get(t,"navigationAsDateFormat"),W=this._getNumberOfMonths(t),G=this._get(t,"showCurrentAtPos"),Y=this._get(t,"stepMonths"),K=1!==W[0]||1!==W[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(t,"min"),Z=this._getMinMaxDate(t,"max"),J=t.drawMonth-G,tt=t.drawYear;if(J<0&&(J+=12,tt--),Z)for(e=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-W[0]*W[1]+1,Z.getDate())),e=Q&&e<Q?Q:e;this._daylightSavingAdjust(new Date(tt,J,1))>e;)--J<0&&(J=11,tt--);for(t.drawMonth=J,t.drawYear=tt,n=this._get(t,"prevText"),n=H?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,J-Y,1)),this._getFormatConfig(t)):n,r=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(t,"nextText"),i=H?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,J+Y,1)),this._getFormatConfig(t)):i,o=this._canAdjustMonth(t,1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",a=this._get(t,"currentText"),s=this._get(t,"gotoCurrent")&&t.currentDay?X:z,a=H?this.formatDate(a,s,this._getFormatConfig(t)):a,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",c=$?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?l:"")+(this._isInRange(t,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(U?"":l)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(t,"showWeek"),f=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),h=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),v=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),w="",x=0;x<W[0];x++){for(S="",this.maxRows=4,C=0;C<W[1];C++){if(E=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay)),T=" ui-corner-all",M="",K){if(M+="<div class='ui-datepicker-group",W[1]>1)switch(C){case 0:M+=" ui-datepicker-group-first",T=" ui-corner-"+(U?"right":"left");break;case W[1]-1:M+=" ui-datepicker-group-last",T=" ui-corner-"+(U?"left":"right");break;default:M+=" ui-datepicker-group-middle",T=""}M+="'>"}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?U?o:r:"")+(/all|right/.test(T)&&0===x?U?r:o:"")+this._generateMonthYearHeader(t,J,tt,Q,Z,x>0||C>0,h,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",k=d?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",_=0;_<7;_++)A=(_+u)%7,k+="<th scope='col'"+((_+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+f[A]+"'>"+p[A]+"</span></th>";for(M+=k+"</tr></thead><tbody>",I=this._getDaysInMonth(tt,J),tt===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,I)),O=(this._getFirstDayOfMonth(tt,J)-u+7)%7,P=Math.ceil((O+I)/7),L=K&&this.maxRows>P?this.maxRows:P,this.maxRows=L,D=this._daylightSavingAdjust(new Date(tt,J,1-O)),N=0;N<L;N++){for(M+="<tr>",R=d?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(D)+"</td>":"",_=0;_<7;_++)F=m?m.apply(t.input?t.input[0]:null,[D]):[!0,""],B=D.getMonth()!==J,j=B&&!y||!F[0]||Q&&D<Q||Z&&D>Z,R+="<td class='"+((_+u+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(D.getTime()===E.getTime()&&J===t.selectedMonth&&t._keyEvent||b.getTime()===D.getTime()&&b.getTime()===E.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!v?"":" "+F[1]+(D.getTime()===X.getTime()?" "+this._currentClass:"")+(D.getTime()===z.getTime()?" ui-datepicker-today":""))+"'"+(B&&!v||!F[2]?"":" title='"+F[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+D.getMonth()+"' data-year='"+D.getFullYear()+"'")+">"+(B&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+D.getDate()+"</span>":"<a class='ui-state-default"+(D.getTime()===z.getTime()?" ui-state-highlight":"")+(D.getTime()===X.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+D.getDate()+"</a>")+"</td>",D.setDate(D.getDate()+1),D=this._daylightSavingAdjust(D);M+=R+"</tr>"}++J>11&&(J=0,tt++),M+="</tbody></table>"+(K?"</div>"+(W[0]>0&&C===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),S+=M}w+=S}return w+=c,t._keyEvent=!1,w},_generateMonthYearHeader:function(t,e,n,r,i,o,a,s){var l,c,u,d,f,p,h,g,m=this._get(t,"changeMonth"),v=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(o||!m)w+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(l=r&&r.getFullYear()===n,c=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=r.getMonth())&&(!c||u<=i.getMonth())&&(w+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+s[u]+"</option>");w+="</select>"}if(y||(b+=w+(!o&&m&&v?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!v)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(t,"yearRange").split(":"),f=(new Date).getFullYear(),h=(p=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?f+parseInt(t,10):parseInt(t,10);return isNaN(e)?f:e})(d[0]),g=Math.max(h,p(d[1]||"")),h=r?Math.max(h,r.getFullYear()):h,g=i?Math.min(g,i.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";h<=g;h++)t.yearshtml+="<option value='"+h+"'"+(h===n?" selected='selected'":"")+">"+h+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!o&&m&&v?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(t,e,n){var r=t.drawYear+("Y"===n?e:0),i=t.drawMonth+("M"===n?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(r,i))+("D"===n?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(r,i,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),i=n&&e<n?n:e;return r&&i>r?r:i},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,r){var i=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(n,r+(e<0?e:i[0]*i[1]),1));return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var n,r,i=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,s=null,l=this._get(t,"yearRange");return l&&(n=l.split(":"),r=(new Date).getFullYear(),a=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(a+=r),n[1].match(/[+\-].*/)&&(s+=r)),(!i||e.getTime()>=i.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!s||e.getFullYear()<=s)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,r){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var i=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(r,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),i,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(n)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(n))},t.datepicker=new f,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.11.3",t.datepicker,t.widget("ui.dialog",{version:"1.11.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;n<0&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n,r=this;if(this._isOpen&&!1!==this._trigger("beforeClose",e)){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{(n=this.document[0].activeElement)&&"body"!==n.nodeName.toLowerCase()&&t(n).blur()}catch(t){}this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",e)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,n){var r=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+t(this).css("z-index")}).get(),o=Math.max.apply(null,i);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),r=!0),r&&!n&&this._trigger("focus",e),r},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var t=this._focusedElement;t||(t=this.element.find("[autofocus]")),t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function n(){var e=this.document[0].activeElement,n=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);n||this._focusTabbable()}e.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB&&!e.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");e.target!==i[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==r[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){i.focus()}),e.preventDefault()):(this._delay(function(){r.focus()}),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||t.isArray(n)&&!n.length?this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(n,function(n,r){var i,o;r=t.isFunction(r)?{click:r,text:n}:r,r=t.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(e.element[0],arguments)},o={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,t("<button></button>",r).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var e=this,n=this.options;function r(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){t(this).addClass("ui-dialog-dragging"),e._blockFrames(),e._trigger("dragStart",n,r(i))},drag:function(t,n){e._trigger("drag",t,r(n))},stop:function(i,o){var a=o.offset.left-e.document.scrollLeft(),s=o.offset.top-e.document.scrollTop();n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(s>=0?"+":"")+s,of:e.window},t(this).removeClass("ui-dialog-dragging"),e._unblockFrames(),e._trigger("dragStop",i,r(o))}})},_makeResizable:function(){var e=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),o="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";function a(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,r){t(this).addClass("ui-dialog-resizing"),e._blockFrames(),e._trigger("resizeStart",n,a(r))},resize:function(t,n){e._trigger("resize",t,a(n))},stop:function(r,i){var o=e.uiDialog.offset(),s=o.left-e.document.scrollLeft(),l=o.top-e.document.scrollTop();n.height=e.uiDialog.height(),n.width=e.uiDialog.width(),n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(l>=0?"+":"")+l,of:e.window},t(this).removeClass("ui-dialog-resizing"),e._unblockFrames(),e._trigger("resizeStop",r,a(i))}}).css("position",i)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=t(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),n=t.inArray(this,e);-1!==n&&e.splice(n,1)},_trackingInstances:function(){var t=this.document.data("ui-dialog-instances");return t||(t=[],this.document.data("ui-dialog-instances",t)),t},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var n=this,r=!1,i={};t.each(e,function(t,e){n._setOption(t,e),t in n.sizeRelatedOptions&&(r=!0),t in n.resizableRelatedOptions&&(i[t]=e)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(t,e){var n,r,i=this.uiDialog;"dialogClass"===t&&i.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((n=i.is(":data(ui-draggable)"))&&!e&&i.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((r=i.is(":data(ui-resizable)"))&&!e&&i.resizable("destroy"),r&&"string"==typeof e&&i.resizable("option","handles",e),r||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),t=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),e=Math.max(0,r.minHeight-t),n="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-t):"none","auto"===r.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=!0;this._delay(function(){e=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(t){e||this._allowInteraction(t)||(t.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var t=this.document.data("ui-dialog-overlays")-1;t?this.document.data("ui-dialog-overlays",t):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),t.widget("ui.progressbar",{version:"1.11.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!e).attr("aria-disabled",e),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}}),t.widget("ui.selectmenu",{version:"1.11.3",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var e=this;this.label=t("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(t){this.button.focus(),t.preventDefault()}}),this.element.hide(),this.button=t("<span>",{class:"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),t("<span>",{class:"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=t("<span>",{class:"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){e.menuItems||e._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var e=this;this.menu=t("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=t("<div>",{class:"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(t,n){t.preventDefault(),e._setSelection(),e._select(n.item.data("ui-selectmenu-item"),t)},focus:function(t,n){var r=n.item.data("ui-selectmenu-item");null!=e.focusIndex&&r.index!==e.focusIndex&&(e._trigger("focus",t,{item:r}),e.isOpen||e._select(r,t)),e.focusIndex=r.index,e.button.attr("aria-activedescendant",e.menuItems.eq(r.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var t,e=this.element.find("option");e.length&&(this._parseOptions(e),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),t=this._getSelectedItem(),this.menuInstance.focus(null,t),this._setAria(t.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(t){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",t))},_position:function(){this.menuWrap.position(t.extend({of:this.button},this.options.position))},close:function(t){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",t))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(e,n){var r=this,i="";t.each(n,function(n,o){o.optgroup!==i&&(t("<li>",{class:"ui-selectmenu-optgroup ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:o.optgroup}).appendTo(e),i=o.optgroup),r._renderItemData(e,o)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-selectmenu-item",e)},_renderItem:function(e,n){var r=t("<li>");return n.disabled&&r.addClass("ui-state-disabled"),this._setText(r,n.label),r.appendTo(e)},_setText:function(t,e){e?t.text(e):t.html("&#160;")},_move:function(t,e){var n,r,i=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex):(n=this.menuItems.eq(this.element[0].selectedIndex),i+=":not(.ui-state-disabled)"),(r="first"===t||"last"===t?n["first"===t?"prevAll":"nextAll"](i).eq(-1):n[t+"All"](i).eq(0)).length&&this.menuInstance.focus(e,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(t){this[this.isOpen?"close":"open"](t)},_setSelection:function(){var t;this.range&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(e){this.isOpen&&(t(e.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(e))}},_buttonEvents:{mousedown:function(){var t;window.getSelection?(t=window.getSelection()).rangeCount&&(this.range=t.getRangeAt(0)):this.range=document.selection.createRange()},click:function(t){this._setSelection(),this._toggle(t)},keydown:function(e){var n=!0;switch(e.keyCode){case t.ui.keyCode.TAB:case t.ui.keyCode.ESCAPE:this.close(e),n=!1;break;case t.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(e);break;case t.ui.keyCode.UP:e.altKey?this._toggle(e):this._move("prev",e);break;case t.ui.keyCode.DOWN:e.altKey?this._toggle(e):this._move("next",e);break;case t.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(e):this._toggle(e);break;case t.ui.keyCode.LEFT:this._move("prev",e);break;case t.ui.keyCode.RIGHT:this._move("next",e);break;case t.ui.keyCode.HOME:case t.ui.keyCode.PAGE_UP:this._move("first",e);break;case t.ui.keyCode.END:case t.ui.keyCode.PAGE_DOWN:this._move("last",e);break;default:this.menu.trigger(e),n=!1}n&&e.preventDefault()}},_selectFocusedItem:function(t){var e=this.menuItems.eq(this.focusIndex);e.hasClass("ui-state-disabled")||this._select(e.data("ui-selectmenu-item"),t)},_select:function(t,e){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=t.index,this._setText(this.buttonText,t.label),this._setAria(t),this._trigger("select",e,{item:t}),t.index!==n&&this._trigger("change",e,{item:t}),this.close(e)},_setAria:function(t){var e=this.menuItems.eq(t.index).attr("id");this.button.attr({"aria-labelledby":e,"aria-activedescendant":e}),this.menu.attr("aria-activedescendant",e)},_setOption:function(t,e){"icons"===t&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(e.button),this._super(t,e),"appendTo"===t&&this.menuWrap.appendTo(this._appendTo()),"disabled"===t&&(this.menuInstance.option("disabled",e),this.button.toggleClass("ui-state-disabled",e).attr("aria-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===t&&this._resizeButton()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var t=this.options.width;t||(t=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(t)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(e){var n=[];e.each(function(e,r){var i=t(r),o=i.parent("optgroup");n.push({element:i,index:e,value:i.val(),label:i.text(),optgroup:o.attr("label")||"",disabled:o.prop("disabled")||i.prop("disabled")})}),this.items=n},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),t.widget("ui.slider",t.ui.mouse,{version:"1.11.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),e=i.length;e<n;e++)o.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=i.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,r,i,o,a,s,l,c=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(r-c.values(e));(i>n||i===n&&(e===c._lastChangedValue||c.values(e)===u.min))&&(i=n,o=t(this),a=e)}),!1!==this._start(e,a)&&(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),s=o.offset(),l=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-s.left-o.width()/2,top:e.pageY-s.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,r,i,o;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(r=n/e)>1&&(r=1),r<0&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),o=this._valueMin()+r*i,this._trimAlignValue(o)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var r,i,o;this.options.values&&this.options.values.length?(r=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&n>r||1===e&&n<r)&&(n=r),n!==this.values(e)&&((i=this.values())[e]=n,o=this._trigger("slide",t,{handle:this.handles[e],value:n,values:i}),r=this.values(e?0:1),!1!==o&&this.values(e,n))):n!==this.value()&&!1!==(o=this._trigger("slide",t,{handle:this.handles[e],value:n}))&&this.value(n)},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,n){var r,i,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(r=this.options.values,i=arguments[0],o=0;o<r.length;o+=1)r[o]=this._trimAlignValue(i[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,n){var r,i=0;switch("range"===e&&!0===this.options.range&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(i=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!n),this._super(e,n),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,r;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,r=t-n;return 2*Math.abs(n)>=e&&(r+=n>0?e:-e),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),n=this.options.step,r=Math.floor((t-e)/n)*n;t=r+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,n,r,i,o,a=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(l.values(r)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[c?"animate":"css"](u,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===r&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===r&&l.range[c?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===r&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===r&&l.range[c?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n}):(r=this.value(),i=this._valueMin(),o=this._valueMax(),n=o!==i?(r-i)/(o-i)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(e){var n,r,i,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),!1===this._start(e,o)))return}switch(i=this.options.step,n=r=this.options.values&&this.options.values.length?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:r=this._valueMin();break;case t.ui.keyCode.END:r=this._valueMax();break;case t.ui.keyCode.PAGE_UP:r=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;r=this._trimAlignValue(n+i);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;r=this._trimAlignValue(n-i)}this._slide(e,o,r)},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}}),t.widget("ui.spinner",{version:"1.11.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},n=this.element;return t.each(["min","max","step"],function(t,r){var i=n.attr(r);void 0!==i&&i.length&&(e[r]=i)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){var n;function r(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,r.call(this)}),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var n=this.options,r=t.ui.keyCode;switch(e.keyCode){case r.UP:return this._repeat(null,1,e),!0;case r.DOWN:return this._repeat(null,-1,e),!0;case r.PAGE_UP:return this._repeat(null,n.page,e),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:n})||(this._value(n),this.counter++)},_increment:function(e){var n=this.options.incremental;return n?t.isFunction(n)?n(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,r=this.options;return e=null!==r.min?r.min:0,n=t-e,n=Math.round(n/r.step)*r.step,t=e+n,t=parseFloat(t.toFixed(this._precision())),null!==r.max&&t>r.max?r.max:null!==r.min&&t<r.min?r.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var n=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(n))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(this.widget().toggleClass("ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable"))},_setOptions:m(function(t){this._super(t)}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var t=this.value();return null!==t&&t===this._adjustValue(t)},_value:function(t,e){var n;""!==t&&null!==(n=this._parse(t))&&(e||(n=this._adjustValue(n)),t=this._format(n)),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:m(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:m(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:m(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:m(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());m(this._value).call(this,t)},widget:function(){return this.uiSpinner}}),t.widget("ui.tabs",{version:"1.11.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var t=/#.*$/;return function(e){var n,r;e=e.cloneNode(!1),n=e.href.replace(t,""),r=location.href.replace(t,"");try{n=decodeURIComponent(n)}catch(t){}try{r=decodeURIComponent(r)}catch(t){}return e.hash.length>1&&n===r}}(),_create:function(){var e=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible),this._processTabs(),n.active=this._initialActive(),t.isArray(n.disabled)&&(n.disabled=t.unique(n.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(n.active):this.active=t(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var e=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);return null===e&&(r&&this.tabs.each(function(n,i){if(t(i).attr("aria-controls")===r)return e=n,!1}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==e&&-1!==e||(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!n&&0),!n&&!1===e&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var n=t(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:r++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:i=!1,r--;break;case t.ui.keyCode.END:r=this.anchors.length-1;break;case t.ui.keyCode.HOME:r=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(r);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(r!==this.options.active&&r);default:return}e.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),e.ctrlKey||e.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,n){var r=this.tabs.length-1;for(;-1!==t.inArray((e>r&&(e=0),e<0&&(e=r),e),this.options.disabled);)e=n?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){"active"!==t?"disabled"!==t?(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._setupDisabled(e):this._activate(e)},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,n=this.tablist.children(":has(a[href])");e.disabled=t.map(n.filter(".ui-state-disabled"),function(t){return n.index(t)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this,n=this.tabs,r=this.anchors,i=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(n,r){var i,o,a,s=t(r).uniqueId().attr("id"),l=t(r).closest("li"),c=l.attr("aria-controls");e._isLocal(r)?(i=r.hash,a=i.substring(1),o=e.element.find(e._sanitizeSelector(i))):(a=l.attr("aria-controls")||t({}).uniqueId()[0].id,i="#"+a,(o=e.element.find(i)).length||(o=e._createPanel(a)).insertAfter(e.panels[n-1]||e.tablist),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":a,"aria-labelledby":s}),o.attr("aria-labelledby",s)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),n&&(this._off(n.not(this.tabs)),this._off(r.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var n,r=0;n=this.tabs[r];r++)!0===e||-1!==t.inArray(r,e)?t(n).addClass("ui-state-disabled").attr("aria-disabled","true"):t(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var n={};e&&t.each(e.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(t){t.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var n,r=this.element.parent();"fill"===e?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),r=e.css("position");"absolute"!==r&&"fixed"!==r&&(n-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,n-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.panels.each(function(){n=Math.max(n,t(this).height("").height())}).height(n))},_eventHandler:function(e){var n=this.options,r=this.active,i=t(e.currentTarget),o=i.closest("li"),a=o[0]===r[0],s=a&&n.collapsible,l=s?t():this._getPanelForTab(o),c=r.length?this._getPanelForTab(r):t(),u={oldTab:r,oldPanel:c,newTab:s?t():o,newPanel:l};e.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!n.collapsible||!1===this._trigger("beforeActivate",e,u)||(n.active=!s&&this.tabs.index(o),this.active=a?t():o,this.xhr&&this.xhr.abort(),c.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),e),this._toggle(e,u))},_toggle:function(e,n){var r=this,i=n.newPanel,o=n.oldPanel;function a(){r.running=!1,r._trigger("activate",e,n)}function s(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,a):(i.show(),a())}this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),s()),o.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),i.length&&o.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var n,r=this._findActive(e);r[0]!==this.active[0]&&(r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),n=e.data("ui-tabs-aria-controls");n?e.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var n=this.options.disabled;!1!==n&&(void 0===e?n=!1:(e=this._getIndex(e),n=t.isArray(n)?t.map(n,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,n){return n!==e?n:null})),this._setupDisabled(n))},disable:function(e){var n=this.options.disabled;if(!0!==n){if(void 0===e)n=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,n))return;n=t.isArray(n)?t.merge([e],n).sort():[e]}this._setupDisabled(n)}},load:function(e,n){e=this._getIndex(e);var r=this,i=this.tabs.eq(e),o=i.find(".ui-tabs-anchor"),a=this._getPanelForTab(i),s={tab:i,panel:a};this._isLocal(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(i.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){a.html(t),r._trigger("load",n,s)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),t===r.xhr&&delete r.xhr},1)})))},_ajaxSettings:function(e,n,r){var i=this;return{url:e.attr("href"),beforeSend:function(e,o){return i._trigger("beforeLoad",n,t.extend({jqXHR:e,ajaxSettings:o},r))}}},_getPanelForTab:function(e){var n=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),t.widget("ui.tooltip",{version:"1.11.3",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(e,n){var r=(e.attr("aria-describedby")||"").split(/\s+/);r.push(n),e.data("ui-tooltip-id",n).attr("aria-describedby",t.trim(r.join(" ")))},_removeDescribedBy:function(e){var n=e.data("ui-tooltip-id"),r=(e.attr("aria-describedby")||"").split(/\s+/),i=t.inArray(n,r);-1!==i&&r.splice(i,1),e.removeData("ui-tooltip-id"),(r=t.trim(r.join(" ")))?e.attr("aria-describedby",r):e.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=t("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(e,n){var r=this;if("disabled"===e)return this[n?"_disable":"_enable"](),void(this.options[e]=n);this._super(e,n),"content"===e&&t.each(this.tooltips,function(t,e){r._updateContent(e.element)})},_disable:function(){var e=this;t.each(this.tooltips,function(n,r){var i=t.Event("blur");i.target=i.currentTarget=r.element[0],e.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var n=this,r=t(e?e.target:this.element).closest(this.options.items);r.length&&!r.data("ui-tooltip-id")&&(r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&r.parents().each(function(){var e,r=t(this);r.data("ui-tooltip-open")&&((e=t.Event("blur")).target=e.currentTarget=this,n.close(e,!0)),r.attr("title")&&(r.uniqueId(),n.parents[this.id]={element:this,title:r.attr("title")},r.attr("title",""))}),this._updateContent(r,e))},_updateContent:function(t,e){var n,r=this.options.content,i=this,o=e?e.type:null;if("string"==typeof r)return this._open(e,t,r);(n=r.call(t[0],function(n){t.data("ui-tooltip-open")&&i._delay(function(){e&&(e.type=o),this._open(e,t,n)})}))&&this._open(e,t,n)},_open:function(e,n,r){var i,o,a,s,l,c=t.extend({},this.options.position);function u(t){c.of=t,o.is(":hidden")||o.position(c)}r&&((i=this._find(n))?i.tooltip.find(".ui-tooltip-content").html(r):(n.is("[title]")&&(e&&"mouseover"===e.type?n.attr("title",""):n.removeAttr("title")),i=this._tooltip(n),o=i.tooltip,this._addDescribedBy(n,o.attr("id")),o.find(".ui-tooltip-content").html(r),this.liveRegion.children().hide(),r.clone?(l=r.clone()).removeAttr("id").find("[id]").removeAttr("id"):l=r,t("<div>").html(l).appendTo(this.liveRegion),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:u}),u(e)):o.position(t.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(s=this.delayedShow=setInterval(function(){o.is(":visible")&&(u(c.of),clearInterval(s))},t.fx.interval)),this._trigger("open",e,{tooltip:o}),a={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var r=t.Event(e);r.currentTarget=n[0],this.close(r,!0)}}},n[0]!==this.element[0]&&(a.remove=function(){this._removeTooltip(o)}),e&&"mouseover"!==e.type||(a.mouseleave="close"),e&&"focusin"!==e.type||(a.focusout="close"),this._on(!0,n,a)))},close:function(e){var n,r=this,i=t(e?e.currentTarget:this.element),o=this._find(i);o&&(n=o.tooltip,o.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),o.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){r._removeTooltip(t(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,n){t(n.element).attr("title",n.title),delete r.parents[e]}),o.closing=!0,this._trigger("close",e,{tooltip:n}),o.hiding||(o.closing=!1)))},_tooltip:function(e){var n=t("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),r=n.uniqueId().attr("id");return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[r]={element:e,tooltip:n}},_find:function(t){var e=t.data("ui-tooltip-id");return e?this.tooltips[e]:null},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(n,r){var i=t.Event("blur"),o=r.element;i.target=i.currentTarget=o[0],e.close(i,!0),t("#"+n).remove(),o.data("ui-tooltip-title")&&(o.attr("title")||o.attr("title",o.data("ui-tooltip-title")),o.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}});var v=t;
/*!
 * jQuery UI Tabs 1.11.3
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 */t.effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(t,e){var n,r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},a={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=o.support={},c=t("<p>")[0],u=t.each;function d(t,e,n){var r=s[e.type]||{};return null==t?n||!e.def?null:e.def:(t=r.floor?~~t:parseFloat(t),isNaN(t)?e.def:r.mod?(t+r.mod)%r.mod:0>t?0:r.max<t?r.max:t)}function f(e){var r=o(),s=r._rgba=[];return e=e.toLowerCase(),u(i,function(t,n){var i,o=n.re.exec(e),l=o&&n.parse(o),c=n.space||"rgba";if(l)return i=r[c](l),r[a[c].cache]=i[a[c].cache],s=r._rgba=i._rgba,!1}),s.length?("0,0,0,0"===s.join()&&t.extend(s,n.transparent),r):n[e]}function p(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}c.style.cssText="background-color:rgba(1,1,1,.5)",l.rgba=c.style.backgroundColor.indexOf("rgba")>-1,u(a,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(e,r,i,s){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(r),r=void 0);var l=this,c=t.type(e),p=this._rgba=[];return void 0!==r&&(e=[e,r,i,s],c="array"),"string"===c?this.parse(f(e)||n._default):"array"===c?(u(a.rgba.props,function(t,n){p[n.idx]=d(e[n.idx],n)}),this):"object"===c?(u(a,e instanceof o?function(t,n){e[n.cache]&&(l[n.cache]=e[n.cache].slice())}:function(n,r){var i=r.cache;u(r.props,function(t,n){if(!l[i]&&r.to){if("alpha"===t||null==e[t])return;l[i]=r.to(l._rgba)}l[i][n.idx]=d(e[t],n,!0)}),l[i]&&t.inArray(null,l[i].slice(0,3))<0&&(l[i][3]=1,r.from&&(l._rgba=r.from(l[i])))}),this):void 0},is:function(t){var e=o(t),n=!0,r=this;return u(a,function(t,i){var o,a=e[i.cache];return a&&(o=r[i.cache]||i.to&&i.to(r._rgba)||[],u(i.props,function(t,e){if(null!=a[e.idx])return n=a[e.idx]===o[e.idx]})),n}),n},_space:function(){var t=[],e=this;return u(a,function(n,r){e[r.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var n=o(t),r=n._space(),i=a[r],l=0===this.alpha()?o("transparent"):this,c=l[i.cache]||i.to(l._rgba),f=c.slice();return n=n[i.cache],u(i.props,function(t,r){var i=r.idx,o=c[i],a=n[i],l=s[r.type]||{};null!==a&&(null===o?f[i]=a:(l.mod&&(a-o>l.mod/2?o+=l.mod:o-a>l.mod/2&&(o-=l.mod)),f[i]=d((a-o)*e+o,r)))}),this[r](f)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(t,e){return(1-r)*i[e]+r*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(255*r)),"#"+t.map(n,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,a.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=t[3],s=Math.max(r,i,o),l=Math.min(r,i,o),c=s-l,u=s+l,d=.5*u;return e=l===s?0:r===s?60*(i-o)/c+360:i===s?60*(o-r)/c+120:60*(r-i)/c+240,n=0===c?0:d<=.5?c/u:c/(2-u),[Math.round(e)%360,n,d,null==a?1:a]},a.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],r=t[2],i=t[3],o=r<=.5?r*(1+n):r+n-r*n,a=2*r-o;return[Math.round(255*p(a,o,e+1/3)),Math.round(255*p(a,o,e)),Math.round(255*p(a,o,e-1/3)),i]},u(a,function(e,n){var i=n.props,a=n.cache,s=n.to,l=n.from;o.fn[e]=function(e){if(s&&!this[a]&&(this[a]=s(this._rgba)),void 0===e)return this[a].slice();var n,r=t.type(e),c="array"===r||"object"===r?e:arguments,f=this[a].slice();return u(i,function(t,e){var n=c["object"===r?t:e.idx];null==n&&(n=f[e.idx]),f[e.idx]=d(n,e)}),l?((n=o(l(f)))[a]=f,n):o(f)},u(i,function(n,i){o.fn[n]||(o.fn[n]=function(o){var a,s=t.type(o),l="alpha"===n?this._hsla?"hsla":"rgba":e,c=this[l](),u=c[i.idx];return"undefined"===s?u:("function"===s&&(o=o.call(this,u),s=t.type(o)),null==o&&i.empty?this:("string"===s&&(a=r.exec(o))&&(o=u+parseFloat(a[2])*("+"===a[1]?1:-1)),c[i.idx]=o,this[l](c)))})})}),o.hook=function(e){var n=e.split(" ");u(n,function(e,n){t.cssHooks[n]={set:function(e,r){var i,a,s="";if("transparent"!==r&&("string"!==t.type(r)||(i=f(r)))){if(r=o(i||r),!l.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===n?e.parentNode:e;(""===s||"transparent"===s)&&a&&a.style;)try{s=t.css(a,"backgroundColor"),a=a.parentNode}catch(t){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(t){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},o.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return u(["Top","Right","Bottom","Left"],function(n,r){e["border"+r+"Color"]=t}),e}},n=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(v),function(){var e=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function r(e){var n,r,i=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)n=i[r],"string"==typeof i[n]&&(o[t.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(o[n]=i[n]);return o}t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(v.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(i,o,a,s){var l=t.speed(o,a,s);return this.queue(function(){var o,a=t(this),s=a.attr("class")||"",c=l.children?a.find("*").addBack():a;c=c.map(function(){var e=t(this);return{el:e,start:r(this)}}),(o=function(){t.each(e,function(t,e){i[e]&&a[e+"Class"](i[e])})})(),c=c.map(function(){return this.end=r(this.el[0]),this.diff=function(e,r){var i,o,a={};for(i in r)o=r[i],e[i]!==o&&(n[i]||!t.fx.step[i]&&isNaN(parseFloat(o))||(a[i]=o));return a}(this.start,this.end),this}),a.attr("class",s),c=c.map(function(){var e=this,n=t.Deferred(),r=t.extend({},l,{queue:!1,complete:function(){n.resolve(e)}});return this.el.animate(this.diff,r),n.promise()}),t.when.apply(t,c.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(a[0])})})},t.fn.extend({addClass:function(e){return function(n,r,i,o){return r?t.effects.animateClass.call(this,{add:n},r,i,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(n,r,i,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:n},r,i,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(n,r,i,o,a){return"boolean"==typeof r||void 0===r?i?t.effects.animateClass.call(this,r?{add:n}:{remove:n},i,o,a):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:n},r,i,o)}}(t.fn.toggleClass),switchClass:function(e,n,r,i,o){return t.effects.animateClass.call(this,{add:n,remove:e},r,i,o)}})}(),function(){function e(e,n,r,i){return t.isPlainObject(e)&&(n=e,e=e.effect),e={effect:e},null==n&&(n={}),t.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||t.fx.speeds[n])&&(i=r,r=n,n={}),t.isFunction(r)&&(i=r,r=null),n&&t.extend(e,n),r=r||n.duration,e.duration=t.fx.off?0:"number"==typeof r?r:r in t.fx.speeds?t.fx.speeds[r]:t.fx.speeds._default,e.complete=i||n.complete,e}function n(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]||!!t.isFunction(e)||"object"==typeof e&&!e.effect}t.extend(t.effects,{version:"1.11.3",save:function(t,e){for(var n=0;n<e.length;n++)null!==e[n]&&t.data("ui-effects-"+e[n],t[0].style[e[n]])},restore:function(t,e){var n,r;for(r=0;r<e.length;r++)null!==e[r]&&(void 0===(n=t.data("ui-effects-"+e[r]))&&(n=""),t.css(e[r],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var n,r;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=t[1]/e.width}return{x:r,y:n}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var n={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},r=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return e.wrap(r),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),r=e.parent(),"static"===e.css("position")?(r.css({position:"relative"}),e.css({position:"relative"})):(t.extend(n,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,r){n[r]=e.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(i),r.css(n).show()},removeWrapper:function(e){var n=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===n||t.contains(e[0],n))&&t(n).focus()),e},setTransition:function(e,n,r,i){return i=i||{},t.each(n,function(t,n){var o=e.cssUnit(n);o[0]>0&&(i[n]=o[0]*r+o[1])}),i}}),t.fn.extend({effect:function(){var n=e.apply(this,arguments),r=n.mode,i=n.queue,o=t.effects.effect[n.effect];if(t.fx.off||!o)return r?this[r](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)});function a(e){var r=t(this),i=n.complete,a=n.mode;function s(){t.isFunction(i)&&i.call(r[0]),t.isFunction(e)&&e()}(r.is(":hidden")?"hide"===a:"show"===a)?(r[a](),s()):o.call(r[0],n,s)}return!1===i?this.each(a):this.queue(i||"fx",a)},show:function(t){return function(r){if(n(r))return t.apply(this,arguments);var i=e.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(r){if(n(r))return t.apply(this,arguments);var i=e.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(r){if(n(r)||"boolean"==typeof r)return t.apply(this,arguments);var i=e.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var n=this.css(e),r=[];return t.each(["em","px","%","pt"],function(t,e){n.indexOf(e)>0&&(r=[parseFloat(n),e])}),r}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,n){e[n]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,n){t.easing["easeIn"+e]=n,t.easing["easeOut"+e]=function(t){return 1-n(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?n(2*t)/2:1-n(-2*t+2)/2}})}(),t.effects,t.effects.effect.blind=function(e,n){var r,i,o,a=t(this),s=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(a,e.mode||"hide"),c=e.direction||"up",u=/up|down|vertical/.test(c),d=u?"height":"width",f=u?"top":"left",p=/up|left|vertical|horizontal/.test(c),h={},g="show"===l;a.parent().is(".ui-effects-wrapper")?t.effects.save(a.parent(),s):t.effects.save(a,s),a.show(),r=t.effects.createWrapper(a).css({overflow:"hidden"}),i=r[d](),o=parseFloat(r.css(f))||0,h[d]=g?i:0,p||(a.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),h[f]=g?o:i+o),g&&(r.css(d,0),p||r.css(f,o+i)),r.animate(h,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===l&&a.hide(),t.effects.restore(a,s),t.effects.removeWrapper(a),n()}})},t.effects.effect.bounce=function(e,n){var r,i,o,a=t(this),s=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(a,e.mode||"effect"),c="hide"===l,u="show"===l,d=e.direction||"up",f=e.distance,p=e.times||5,h=2*p+(u||c?1:0),g=e.duration/h,m=e.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=a.queue(),w=b.length;for((u||c)&&s.push("opacity"),t.effects.save(a,s),a.show(),t.effects.createWrapper(a),f||(f=a["top"===v?"outerHeight":"outerWidth"]()/3),u&&((o={opacity:1})[v]=0,a.css("opacity",0).css(v,y?2*-f:2*f).animate(o,g,m)),c&&(f/=Math.pow(2,p-1)),(o={})[v]=0,r=0;r<p;r++)(i={})[v]=(y?"-=":"+=")+f,a.animate(i,g,m).animate(o,g,m),f=c?2*f:f/2;c&&((i={opacity:0})[v]=(y?"-=":"+=")+f,a.animate(i,g,m)),a.queue(function(){c&&a.hide(),t.effects.restore(a,s),t.effects.removeWrapper(a),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,h+1))),a.dequeue()},t.effects.effect.clip=function(e,n){var r,i,o,a=t(this),s=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(a,e.mode||"hide"),c="show"===l,u=e.direction||"vertical",d="vertical"===u,f=d?"height":"width",p=d?"top":"left",h={};t.effects.save(a,s),a.show(),r=t.effects.createWrapper(a).css({overflow:"hidden"}),i="IMG"===a[0].tagName?r:a,o=i[f](),c&&(i.css(f,0),i.css(p,o/2)),h[f]=c?o:0,h[p]=c?0:o/2,i.animate(h,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){c||a.hide(),t.effects.restore(a,s),t.effects.removeWrapper(a),n()}})},t.effects.effect.drop=function(e,n){var r,i=t(this),o=["position","top","bottom","left","right","opacity","height","width"],a=t.effects.setMode(i,e.mode||"hide"),s="show"===a,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:s?1:0};t.effects.save(i,o),i.show(),t.effects.createWrapper(i),r=e.distance||i["top"===c?"outerHeight":"outerWidth"](!0)/2,s&&i.css("opacity",0).css(c,"pos"===u?-r:r),d[c]=(s?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+r,i.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&i.hide(),t.effects.restore(i,o),t.effects.removeWrapper(i),n()}})},t.effects.effect.explode=function(e,n){var r,i,o,a,s,l,c=e.pieces?Math.round(Math.sqrt(e.pieces)):3,u=c,d=t(this),f=t.effects.setMode(d,e.mode||"hide"),p="show"===f,h=d.show().css("visibility","hidden").offset(),g=Math.ceil(d.outerWidth()/u),m=Math.ceil(d.outerHeight()/c),v=[];function y(){v.push(this),v.length===c*u&&(d.css({visibility:"visible"}),t(v).remove(),p||d.hide(),n())}for(r=0;r<c;r++)for(a=h.top+r*m,l=r-(c-1)/2,i=0;i<u;i++)o=h.left+i*g,s=i-(u-1)/2,d.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-i*g,top:-r*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:m,left:o+(p?s*g:0),top:a+(p?l*m:0),opacity:p?0:1}).animate({left:o+(p?0:s*g),top:a+(p?0:l*m),opacity:p?1:0},e.duration||500,e.easing,y)},t.effects.effect.fade=function(e,n){var r=t(this),i=t.effects.setMode(r,e.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:e.duration,easing:e.easing,complete:n})},t.effects.effect.fold=function(e,n){var r,i,o=t(this),a=["position","top","bottom","left","right","height","width"],s=t.effects.setMode(o,e.mode||"hide"),l="show"===s,c="hide"===s,u=e.size||15,d=/([0-9]+)%/.exec(u),f=!!e.horizFirst,p=l!==f,h=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(o,a),o.show(),r=t.effects.createWrapper(o).css({overflow:"hidden"}),i=p?[r.width(),r.height()]:[r.height(),r.width()],d&&(u=parseInt(d[1],10)/100*i[c?0:1]),l&&r.css(f?{height:0,width:u}:{height:u,width:0}),m[h[0]]=l?i[0]:u,v[h[1]]=l?i[1]:0,r.animate(m,g,e.easing).animate(v,g,e.easing,function(){c&&o.hide(),t.effects.restore(o,a),t.effects.removeWrapper(o),n()})},t.effects.effect.highlight=function(e,n){var r=t(this),i=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(r,e.mode||"show"),a={backgroundColor:r.css("backgroundColor")};"hide"===o&&(a.opacity=0),t.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(a,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&r.hide(),t.effects.restore(r,i),n()}})},t.effects.effect.size=function(e,n){var r,i,o,a=t(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=t.effects.setMode(a,e.mode||"effect"),p=e.restore||"effect"!==f,h=e.scale||"both",g=e.origin||["middle","center"],m=a.css("position"),v=p?s:["position","top","bottom","left","right","overflow","opacity"],y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&a.show(),r={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===e.mode&&"show"===f?(a.from=e.to||y,a.to=e.from||r):(a.from=e.from||("show"===f?y:r),a.to=e.to||("hide"===f?y:r)),o={from:{y:a.from.height/r.height,x:a.from.width/r.width},to:{y:a.to.height/r.height,x:a.to.width/r.width}},"box"!==h&&"both"!==h||(o.from.y!==o.to.y&&(v=v.concat(u),a.from=t.effects.setTransition(a,u,o.from.y,a.from),a.to=t.effects.setTransition(a,u,o.to.y,a.to)),o.from.x!==o.to.x&&(v=v.concat(d),a.from=t.effects.setTransition(a,d,o.from.x,a.from),a.to=t.effects.setTransition(a,d,o.to.x,a.to))),"content"!==h&&"both"!==h||o.from.y!==o.to.y&&(v=v.concat(c).concat(l),a.from=t.effects.setTransition(a,c,o.from.y,a.from),a.to=t.effects.setTransition(a,c,o.to.y,a.to)),t.effects.save(a,v),a.show(),t.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(i=t.effects.getBaseline(g,r),a.from.top=(r.outerHeight-a.outerHeight())*i.y,a.from.left=(r.outerWidth-a.outerWidth())*i.x,a.to.top=(r.outerHeight-a.to.outerHeight)*i.y,a.to.left=(r.outerWidth-a.to.outerWidth)*i.x),a.css(a.from),"content"!==h&&"both"!==h||(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=s.concat(u).concat(d),a.find("*[width]").each(function(){var n=t(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};p&&t.effects.save(n,l),n.from={height:r.height*o.from.y,width:r.width*o.from.x,outerHeight:r.outerHeight*o.from.y,outerWidth:r.outerWidth*o.from.x},n.to={height:r.height*o.to.y,width:r.width*o.to.x,outerHeight:r.height*o.to.y,outerWidth:r.width*o.to.x},o.from.y!==o.to.y&&(n.from=t.effects.setTransition(n,u,o.from.y,n.from),n.to=t.effects.setTransition(n,u,o.to.y,n.to)),o.from.x!==o.to.x&&(n.from=t.effects.setTransition(n,d,o.from.x,n.from),n.to=t.effects.setTransition(n,d,o.to.x,n.to)),n.css(n.from),n.animate(n.to,e.duration,e.easing,function(){p&&t.effects.restore(n,l)})})),a.animate(a.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===f&&a.hide(),t.effects.restore(a,v),p||("static"===m?a.css({position:"relative",top:a.to.top,left:a.to.left}):t.each(["top","left"],function(t,e){a.css(e,function(e,n){var r=parseInt(n,10),i=t?a.to.left:a.to.top;return"auto"===n?i+"px":r+i+"px"})})),t.effects.removeWrapper(a),n()}})},t.effects.effect.scale=function(e,n){var r=t(this),i=t.extend(!0,{},e),o=t.effects.setMode(r,e.mode||"effect"),a=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),s=e.direction||"both",l=e.origin,c={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},u={y:"horizontal"!==s?a/100:1,x:"vertical"!==s?a/100:1};i.effect="size",i.queue=!1,i.complete=n,"effect"!==o&&(i.origin=l||["middle","center"],i.restore=!0),i.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:c),i.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},i.fade&&("show"===o&&(i.from.opacity=0,i.to.opacity=1),"hide"===o&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},t.effects.effect.puff=function(e,n){var r=t(this),i=t.effects.setMode(r,e.mode||"hide"),o="hide"===i,a=parseInt(e.percent,10)||150,s=a/100,l={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:o?a:100,from:o?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),r.effect(e)},t.effects.effect.pulsate=function(e,n){var r,i=t(this),o=t.effects.setMode(i,e.mode||"show"),a="show"===o,s="hide"===o,l=a||"hide"===o,c=2*(e.times||5)+(l?1:0),u=e.duration/c,d=0,f=i.queue(),p=f.length;for(!a&&i.is(":visible")||(i.css("opacity",0).show(),d=1),r=1;r<c;r++)i.animate({opacity:d},u,e.easing),d=1-d;i.animate({opacity:d},u,e.easing),i.queue(function(){s&&i.hide(),n()}),p>1&&f.splice.apply(f,[1,0].concat(f.splice(p,c+1))),i.dequeue()},t.effects.effect.shake=function(e,n){var r,i=t(this),o=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(i,e.mode||"effect"),s=e.direction||"left",l=e.distance||20,c=e.times||3,u=2*c+1,d=Math.round(e.duration/u),f="up"===s||"down"===s?"top":"left",p="up"===s||"left"===s,h={},g={},m={},v=i.queue(),y=v.length;for(t.effects.save(i,o),i.show(),t.effects.createWrapper(i),h[f]=(p?"-=":"+=")+l,g[f]=(p?"+=":"-=")+2*l,m[f]=(p?"-=":"+=")+2*l,i.animate(h,d,e.easing),r=1;r<c;r++)i.animate(g,d,e.easing).animate(m,d,e.easing);i.animate(g,d,e.easing).animate(h,d/2,e.easing).queue(function(){"hide"===a&&i.hide(),t.effects.restore(i,o),t.effects.removeWrapper(i),n()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),i.dequeue()},t.effects.effect.slide=function(e,n){var r,i=t(this),o=["position","top","bottom","left","right","width","height"],a=t.effects.setMode(i,e.mode||"show"),s="show"===a,l=e.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};t.effects.save(i,o),i.show(),r=e.distance||i["top"===c?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(i).css({overflow:"hidden"}),s&&i.css(c,u?isNaN(r)?"-"+r:-r:r),d[c]=(s?u?"+=":"-=":u?"-=":"+=")+r,i.animate(d,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&i.hide(),t.effects.restore(i,o),t.effects.removeWrapper(i),n()}})},t.effects.effect.transfer=function(e,n){var r=t(this),i=t(e.to),o="fixed"===i.css("position"),a=t("body"),s=o?a.scrollTop():0,l=o?a.scrollLeft():0,c=i.offset(),u={top:c.top-s,left:c.left-l,height:i.innerHeight(),width:i.innerWidth()},d=r.offset(),f=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:d.top-s,left:d.left-l,height:r.innerHeight(),width:r.innerWidth(),position:o?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){f.remove(),n()})}})?r.apply(e,i):r)||(t.exports=o)},function(t,e){!function(t){t.fn.drag=function(e,n,r){var i="string"==typeof e?e:"",o=t.isFunction(e)?e:t.isFunction(n)?n:null;return 0!==i.indexOf("drag")&&(i="drag"+i),r=(e==o?n:r)||{},o?this.on(i,r,o):this.trigger(i)};var e=t.event,n=e.special,r=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var n=t.data(this,r.datakey),i=e.data||{};n.related+=1,t.each(r.defaults,function(t,e){void 0!==i[t]&&(n[t]=i[t])})},remove:function(){t.data(this,r.datakey).related-=1},setup:function(){if(!t.data(this,r.datakey)){var n=t.extend({related:0},r.defaults);t.data(this,r.datakey,n),e.add(this,"touchstart mousedown",r.init,n),this.attachEvent&&this.attachEvent("ondragstart",r.dontstart)}},teardown:function(){(t.data(this,r.datakey)||{}).related||(t.removeData(this,r.datakey),e.remove(this,"touchstart mousedown",r.init),r.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",r.dontstart))},init:function(i){if(!r.touched){var o,a=i.data;if(!(0!=i.which&&a.which>0&&i.which!=a.which)&&!t(i.target).is(a.not)&&(!a.handle||t(i.target).closest(a.handle,i.currentTarget).length)&&(r.touched="touchstart"==i.type?this:null,a.propagates=1,a.mousedown=this,a.interactions=[r.interaction(this,a)],a.target=i.target,a.pageX=i.pageX,a.pageY=i.pageY,a.dragging=null,o=r.hijack(i,"draginit",a),a.propagates))return(o=r.flatten(o))&&o.length&&(a.interactions=[],t.each(o,function(){a.interactions.push(r.interaction(this,a))})),a.propagates=a.interactions.length,!1!==a.drop&&n.drop&&n.drop.handler(i,a),r.textselect(!1),r.touched?e.add(r.touched,"touchmove touchend",r.handler,a):e.add(document,"mousemove mouseup",r.handler,a),!(!r.touched||a.live)&&void 0}},interaction:function(e,n){var i=e&&e.ownerDocument&&t(e)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new r.callback,droppable:[],offset:i}},handler:function(i){var o=i.data;switch(i.type){case!o.dragging&&"touchmove":i.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(i.pageX-o.pageX,2)+Math.pow(i.pageY-o.pageY,2)<Math.pow(o.distance,2))break;i.target=o.target,r.hijack(i,"dragstart",o),o.propagates&&(o.dragging=!0);case"touchmove":i.preventDefault();case"mousemove":if(o.dragging){if(r.hijack(i,"drag",o),o.propagates){!1!==o.drop&&n.drop&&n.drop.handler(i,o);break}i.type="mouseup"}case"touchend":case"mouseup":default:r.touched?e.remove(r.touched,"touchmove touchend",r.handler):e.remove(document,"mousemove mouseup",r.handler),o.dragging&&(!1!==o.drop&&n.drop&&n.drop.handler(i,o),r.hijack(i,"dragend",o)),r.textselect(!0),!1===o.click&&o.dragging&&t.data(o.mousedown,"suppress.click",(new Date).getTime()+5),o.dragging=r.touched=!1}},hijack:function(n,i,o,a,s){if(o){var l,c,u,d={event:n.originalEvent,type:n.type},f=i.indexOf("drop")?"drag":"drop",p=a||0,h=isNaN(a)?o.interactions.length:a;n.type=i;var g=function(){};n.originalEvent=new jQuery.Event(d.event,{preventDefault:g,stopPropagation:g,stopImmediatePropagation:g}),o.results=[];do{if(c=o.interactions[p]){if("dragend"!==i&&c.cancelled)continue;u=r.properties(n,o,c),c.results=[],t(s||c[f]||o.droppable).each(function(a,s){if(u.target=s,n.isPropagationStopped=function(){return!1},!1===(l=s?e.dispatch.call(s,n,u):null)?("drag"==f&&(c.cancelled=!0,o.propagates-=1),"drop"==i&&(c[f][a]=null)):"dropinit"==i&&c.droppable.push(r.element(l)||s),"dragstart"==i&&(c.proxy=t(r.element(l)||c.drag)[0]),c.results.push(l),delete n.result,"dropinit"!==i)return l}),o.results[p]=r.flatten(c.results),"dropinit"==i&&(c.droppable=r.flatten(c.droppable)),"dragstart"!=i||c.cancelled||u.update()}}while(++p<h);return n.type=d.type,n.originalEvent=d.event,r.flatten(o.results)}},properties:function(t,e,n){var i=n.callback;return i.drag=n.drag,i.proxy=n.proxy||n.drag,i.startX=e.pageX,i.startY=e.pageY,i.deltaX=t.pageX-e.pageX,i.deltaY=t.pageY-e.pageY,i.originalX=n.offset.left,i.originalY=n.offset.top,i.offsetX=i.originalX+i.deltaX,i.offsetY=i.originalY+i.deltaY,i.drop=r.flatten((n.drop||[]).slice()),i.available=r.flatten((n.droppable||[]).slice()),i},element:function(t){if(t&&(t.jquery||1==t.nodeType))return t},flatten:function(e){return t.map(e,function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?r.flatten(e):e})},textselect:function(e){t(document)[e?"off":"on"]("selectstart",r.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};r.callback.prototype={update:function(){n.drop&&this.available.length&&t.each(this.available,function(t){n.drop.locate(this,t)})}};var i=e.dispatch;e.dispatch=function(e){if(!(t.data(this,"suppress."+e.type)-(new Date).getTime()>0))return i.apply(this,arguments);t.removeData(this,"suppress."+e.type)},n.draginit=n.dragstart=n.dragend=r}(jQuery)},function(module,exports){
/**
 * @license
 * (c) 2009-2016 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.3
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */
if("undefined"==typeof jQuery)throw new Error("SlickGrid requires jquery module to be loaded");if(!jQuery.fn.drag)throw new Error("SlickGrid requires jquery.event.drag module to be loaded");if("undefined"==typeof Slick)throw new Error("slick.core.js not loaded");!function($){var scrollbarDimensions,maxSupportedCssHeight;function SlickGrid(container,data,columns,options){var defaults={alwaysShowVerticalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,showPreHeaderPanel:!1,preHeaderPanelHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter:defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,showCellSelection:!0,viewportClass:null,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacer,$footerRow,$footerRowScroller,$footerRowSpacer,$preHeaderPanel,$preHeaderPanelScroller,$preHeaderPanelSpacer,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,jQueryNewWidthBehaviour=!1,absoluteColumnMinWidth,tabbingDirection=1,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],pagingActive=!1,pagingIsLastPage=!1,scrollThrottle=ActionThrottle(render,50),h_editorLoader=null,h_render=null,h_postrender=null,h_postrenderCleanup=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,postProcessedCleanupQueue=[],postProcessgroupId=0,counter_rows_rendered=0,counter_rows_removed=0,rowNodeFromLastMouseWheelEvent,zombieRowNodeFromLastMouseWheelEvent,zombieRowCacheFromLastMouseWheelEvent,zombieRowPostProcessedFromLastMouseWheelEvent,cssShow={position:"absolute",visibility:"hidden",display:"block"},$hiddenParents,oldProps=[],columnResizeDragging=!1;function init(){if(($container=container instanceof jQuery?container:$(container)).length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");cacheCssForHiddenInit(),maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var t=0;t<columns.length;t++){var e=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[e.id]=t,e.minWidth&&e.width<e.minWidth&&(e.width=e.minWidth),e.maxWidth&&e.width>e.maxWidth&&(e.width=e.maxWidth)}if(options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),options.createPreHeaderPanel&&($preHeaderPanelScroller=$("<div class='slick-preheader-panel ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$preHeaderPanel=$("<div />").appendTo($preHeaderPanelScroller),$preHeaderPanelSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($preHeaderPanelScroller),options.showPreHeaderPanel||$preHeaderPanelScroller.hide()),$headerScroller=$("<div class='slick-header ui-state-default' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),($viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container)).css("overflow-y",options.alwaysShowVerticalScroll?"scroll":options.autoHeight?"hidden":"auto"),$viewport.css("overflow-x",options.forceFitColumns?"hidden":"auto"),options.viewportClass&&$viewport.toggleClass(options.viewportClass,!0),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),$preHeaderPanelSpacer&&$preHeaderPanelSpacer.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),$headers.width(getHeadersWidth()),$headerRowSpacer.css("width",getCanvasWidth()+scrollbarDimensions.width+"px"),options.createFooterRow&&($footerRowScroller=$("<div class='slick-footerrow ui-state-default' />").appendTo($container),$footerRow=$("<div class='slick-footerrow-columns' />").appendTo($footerRowScroller),$footerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($footerRowScroller),options.showFooterRow||$footerRowScroller.hide()),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.on("selectstart.ui",function(t){return $(t.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.on("resize.slickgrid",resizeCanvas),$viewport.on("scroll",handleScroll),$headerScroller.on("contextmenu",handleHeaderContextMenu).on("click",handleHeaderClick).on("mouseenter",".slick-header-column",handleHeaderMouseEnter).on("mouseleave",".slick-header-column",handleHeaderMouseLeave),$headerRowScroller.on("scroll",handleHeaderRowScroll),options.createFooterRow&&$footerRowScroller.on("scroll",handleFooterRowScroll),options.createPreHeaderPanel&&$preHeaderPanelScroller.on("scroll",handlePreHeaderPanelScroll),$focusSink.add($focusSink2).on("keydown",handleKeyDown),$canvas.on("keydown",handleKeyDown).on("click",handleClick).on("dblclick",handleDblClick).on("contextmenu",handleContextMenu).on("draginit",handleDragInit).on("dragstart",{distance:3},handleDragStart).on("drag",handleDrag).on("dragend",handleDragEnd).on("mouseenter",".slick-cell",handleMouseEnter).on("mouseleave",".slick-cell",handleMouseLeave),navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)&&$canvas.on("mousewheel",handleMouseWheel),restoreCssFromHiddenInit())}function cacheCssForHiddenInit(){($hiddenParents=$container.parents().addBack().not(":visible")).each(function(){var t={};for(var e in cssShow)t[e]=this.style[e],this.style[e]=cssShow[e];oldProps.push(t)})}function restoreCssFromHiddenInit(){$hiddenParents.each(function(t){var e=oldProps[t];for(var n in cssShow)this.style[n]=e[n]})}function registerPlugin(t){plugins.unshift(t),t.init(self)}function unregisterPlugin(t){for(var e=plugins.length;e>=0;e--)if(plugins[e]===t){plugins[e].destroy&&plugins[e].destroy(),plugins.splice(e,1);break}}function setSelectionModel(t){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),(selectionModel=t)&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var t=$('<div class="'+$viewport.className+'" style="position:absolute; top:-10000px; left:-10000px; overflow:auto; width:100px; height:100px;"></div>').appendTo($viewport),e=$('<div style="width:200px; height:200px; overflow:auto;"></div>').appendTo(t),n={width:t[0].offsetWidth-t[0].clientWidth,height:t[0].offsetHeight-t[0].clientHeight};return e.remove(),t.remove(),n}function getColumnTotalWidth(t){for(var e=0,n=0,r=columns.length;n<r;n++){e+=columns[n].width}return t&&(e+=scrollbarDimensions.width),e}function getHeadersWidth(){var t=getColumnTotalWidth(!options.autoHeight);return Math.max(t,viewportW)+1e3}function getCanvasWidth(){for(var t=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,e=0,n=columns.length;n--;)e+=columns[n].width;return options.fullWidthRows?Math.max(e,t):e}function updateCanvasWidth(t){var e=canvasWidth;(canvasWidth=getCanvasWidth())!=e&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),options.createFooterRow&&$footerRow.width(canvasWidth),options.createPreHeaderPanel&&$preHeaderPanel.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width);var n=canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0);$headerRowSpacer.width(n),options.createFooterRow&&$footerRowSpacer.width(n),options.createPreHeaderPanel&&$preHeaderPanelSpacer.width(n),(canvasWidth!=e||t)&&applyColumnWidths()}function disableSelection(t){t&&t.jquery&&t.attr("unselectable","on").css("MozUserSelect","none").on("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var t=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=$("<div style='display:none' />").appendTo(document.body);;){var r=2*t;if(n.css("height",r),r>e||n.height()!==r)break;t=r}return n.remove(),t}function getUID(){return uid}function getHeaderColumnWidthDiff(){return headerColumnWidthDiff}function getScrollbarDimensions(){return scrollbarDimensions}function bindAncestorScrollEvents(){for(var t=$canvas[0];(t=t.parentNode)!=document.body&&null!=t;)if(t==$viewport[0]||t.scrollWidth!=t.clientWidth||t.scrollHeight!=t.clientHeight){var e=$(t);$boundAncestors=$boundAncestors?$boundAncestors.add(e):e,e.on("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.off("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(t,e,n){if(initialized){var r=getColumnIndex(t);if(null!=r){var i=columns[r],o=$headers.children().eq(r);o&&(void 0!==e&&(columns[r].name=e),void 0!==n&&(columns[r].toolTip=n),trigger(self.onBeforeHeaderCellDestroy,{node:o[0],column:i,grid:self}),o.attr("title",n||"").children().eq(0).html(e),trigger(self.onHeaderCellRendered,{node:o[0],column:i,grid:self}))}}}function getHeader(){return $headers[0]}function getHeaderColumn(t){var e="number"==typeof t?t:getColumnIndex(t),n=$headers.children().eq(e);return n&&n[0]}function getHeaderRow(){return $headerRow[0]}function getFooterRow(){return $footerRow[0]}function getPreHeaderPanel(){return $preHeaderPanel[0]}function getHeaderRowColumn(t){var e="number"==typeof t?t:getColumnIndex(t),n=$headerRow.children().eq(e);return n&&n[0]}function getFooterRowColumn(t){var e="number"==typeof t?t:getColumnIndex(t),n=$footerRow.children().eq(e);return n&&n[0]}function createColumnHeaders(){function t(){$(this).addClass("ui-state-hover")}function e(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var t=$(this).data("column");t&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:t,grid:self})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.find(".slick-headerrow-column").each(function(){var t=$(this).data("column");t&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:t,grid:self})}),$headerRow.empty(),options.createFooterRow&&($footerRow.find(".slick-footerrow-column").each(function(){var t=$(this).data("column");t&&trigger(self.onBeforeFooterRowCellDestroy,{node:this,column:t})}),$footerRow.empty());for(var n=0;n<columns.length;n++){var r=columns[n],i=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+r.name+"</span>").width(r.width-headerColumnWidthDiff).attr("id",""+uid+r.id).attr("title",r.toolTip||"").data("column",r).addClass(r.headerCssClass||"").appendTo($headers);if((options.enableColumnReorder||r.sortable)&&i.on("mouseenter",t).on("mouseleave",e),r.sortable&&(i.addClass("slick-header-sortable"),i.append("<span class='slick-sort-indicator"+(options.numberedMultiColumnSort&&!options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":"")+"' />"),options.numberedMultiColumnSort&&options.sortColNumberInSeparateSpan&&i.append("<span class='slick-sort-indicator-numbered' />")),trigger(self.onHeaderCellRendered,{node:i[0],column:r,grid:self}),options.showHeaderRow){var o=$("<div class='ui-state-default slick-headerrow-column l"+n+" r"+n+"'></div>").data("column",r).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:o[0],column:r,grid:self})}if(options.createFooterRow&&options.showFooterRow){var a=$("<div class='ui-state-default slick-footerrow-column l"+n+" r"+n+"'></div>").data("column",r).appendTo($footerRow);trigger(self.onFooterRowCellRendered,{node:a[0],column:r})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&("function"==typeof options.enableColumnReorder?options.enableColumnReorder(self,$headers,headerColumnWidthDiff,setColumns,setupColumnResize,columns,getColumnIndex,uid,trigger):setupColumnReorder())}function setupColumnSort(){$headers.click(function(t){if(!columnResizeDragging&&(t.metaKey=t.metaKey||t.ctrlKey,!$(t.target).hasClass("slick-resizable-handle"))){var e=$(t.target).closest(".slick-header-column");if(e.length){var n=e.data("column");if(n.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var r=null,i=0;i<sortColumns.length;i++)if(sortColumns[i].columnId==n.id){(r=sortColumns[i]).sortAsc=!r.sortAsc;break}var o=!!r;options.tristateMultiColumnSort?(r||(r={columnId:n.id,sortAsc:n.defaultSortAsc}),o&&r.sortAsc&&(sortColumns.splice(i,1),r=null),options.multiColumnSort||(sortColumns=[]),!r||o&&options.multiColumnSort||sortColumns.push(r)):t.metaKey&&options.multiColumnSort?r&&sortColumns.splice(i,1):((t.shiftKey||t.metaKey)&&options.multiColumnSort||(sortColumns=[]),r?0==sortColumns.length&&sortColumns.push(r):(r={columnId:n.id,sortAsc:n.defaultSortAsc},sortColumns.push(r))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(t){return{sortCol:columns[getColumnIndex(t.columnId)],sortAsc:t.sortAsc}})},t):trigger(self.onSort,{multiColumnSort:!1,sortCol:sortColumns.length>0?n:null,sortAsc:!(sortColumns.length>0)||sortColumns[0].sortAsc},t)}}}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy"),$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(t,e){e.placeholder.width(e.helper.outerWidth()-headerColumnWidthDiff),$(e.helper).addClass("slick-header-column-active")},beforeStop:function(t,e){$(e.helper).removeClass("slick-header-column-active")},stop:function(t){if(getEditorLock().commitCurrentEdit()){for(var e=$headers.sortable("toArray"),n=[],r=0;r<e.length;r++)n.push(columns[getColumnIndex(e[r].replace(uid,""))]);setColumns(n),trigger(self.onColumnsReordered,{}),t.stopPropagation(),setupColumnResize()}else $(this).sortable("cancel")}})}function setupColumnResize(){var t,e,n,r,i,o,a,s;(r=$headers.children()).find(".slick-resizable-handle").remove(),r.each(function(t,e){t>=columns.length||columns[t].resizable&&(void 0===a&&(a=t),s=t)}),void 0!==a&&r.each(function(l,c){l>=columns.length||l<a||options.forceFitColumns&&l>=s||($(c),$("<div class='slick-resizable-handle' />").appendTo(c).on("dragstart",function(a,s){if(!getEditorLock().commitCurrentEdit())return!1;n=a.pageX,$(this).parent().addClass("slick-header-column-active");var c=null,u=null;if(r.each(function(t,e){t>=columns.length||(columns[t].previousWidth=$(e).outerWidth())}),options.forceFitColumns)for(c=0,u=0,t=l+1;t<columns.length;t++)(e=columns[t]).resizable&&(null!==u&&(e.maxWidth?u+=e.maxWidth-e.previousWidth:u=null),c+=e.previousWidth-Math.max(e.minWidth||0,absoluteColumnMinWidth));var d=0,f=0;for(t=0;t<=l;t++)(e=columns[t]).resizable&&(null!==f&&(e.maxWidth?f+=e.maxWidth-e.previousWidth:f=null),d+=e.previousWidth-Math.max(e.minWidth||0,absoluteColumnMinWidth));null===c&&(c=1e5),null===d&&(d=1e5),null===u&&(u=1e5),null===f&&(f=1e5),o=n+Math.min(c,f),i=n-Math.min(d,u)}).on("drag",function(r,a){columnResizeDragging=!0;var s,c,u=Math.min(o,Math.max(i,r.pageX))-n;if(u<0){for(c=u,t=l;t>=0;t--)(e=columns[t]).resizable&&(s=Math.max(e.minWidth||0,absoluteColumnMinWidth),c&&e.previousWidth+c<s?(c+=e.previousWidth-s,e.width=s):(e.width=e.previousWidth+c,c=0));if(options.forceFitColumns)for(c=-u,t=l+1;t<columns.length;t++)(e=columns[t]).resizable&&(c&&e.maxWidth&&e.maxWidth-e.previousWidth<c?(c-=e.maxWidth-e.previousWidth,e.width=e.maxWidth):(e.width=e.previousWidth+c,c=0))}else{for(c=u,t=l;t>=0;t--)(e=columns[t]).resizable&&(c&&e.maxWidth&&e.maxWidth-e.previousWidth<c?(c-=e.maxWidth-e.previousWidth,e.width=e.maxWidth):(e.width=e.previousWidth+c,c=0));if(options.forceFitColumns)for(c=-u,t=l+1;t<columns.length;t++)(e=columns[t]).resizable&&(s=Math.max(e.minWidth||0,absoluteColumnMinWidth),c&&e.previousWidth+c<s?(c+=e.previousWidth-s,e.width=s):(e.width=e.previousWidth+c,c=0))}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).on("dragend",function(n,i){var o;for($(this).parent().removeClass("slick-header-column-active"),t=0;t<columns.length;t++)e=columns[t],o=$(r[t]).outerWidth(),e.previousWidth!==o&&e.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{}),setTimeout(function(){columnResizeDragging=!1},300)}))})}function getVBoxDelta(t){var e=0;return $.each(["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],function(n,r){e+=parseFloat(t.css(r))||0}),e}function measureCellPaddingAndBorder(){var t,e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],r=$.fn.jquery.split(".");jQueryNewWidthBehaviour=1==r[0]&&r[1]>=8||r[0]>=2,t=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,"border-box"!=t.css("box-sizing")&&"border-box"!=t.css("-moz-box-sizing")&&"border-box"!=t.css("-webkit-box-sizing")&&($.each(e,function(e,n){headerColumnWidthDiff+=parseFloat(t.css(n))||0}),$.each(n,function(e,n){headerColumnHeightDiff+=parseFloat(t.css(n))||0})),t.remove();var i=$("<div class='slick-row' />").appendTo($canvas);t=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(i),cellWidthDiff=cellHeightDiff=0,"border-box"!=t.css("box-sizing")&&"border-box"!=t.css("-moz-box-sizing")&&"border-box"!=t.css("-webkit-box-sizing")&&($.each(e,function(e,n){cellWidthDiff+=parseFloat(t.css(n))||0}),$.each(n,function(e,n){cellHeightDiff+=parseFloat(t.css(n))||0})),i.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var t=options.rowHeight-cellHeightDiff,e=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-preheader-panel { height:"+options.preHeaderPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-footerrow-columns { height:"+options.footerRowHeight+"px; }","."+uid+" .slick-cell { height:"+t+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],n=0;n<columns.length;n++)e.push("."+uid+" .l"+n+" { }"),e.push("."+uid+" .r"+n+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=e.join(" "):$style[0].appendChild(document.createTextNode(e.join(" ")))}function getColumnCssRules(t){var e;if(!stylesheet){var n=document.styleSheets;for(e=0;e<n.length;e++)if((n[e].ownerNode||n[e].owningElement)==$style[0]){stylesheet=n[e];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];var r,i,o=stylesheet.cssRules||stylesheet.rules;for(e=0;e<o.length;e++){var a=o[e].selectorText;(r=/\.l\d+/.exec(a))?(i=parseInt(r[0].substr(2,r[0].length-2),10),columnCssRulesL[i]=o[e]):(r=/\.r\d+/.exec(a))&&(i=parseInt(r[0].substr(2,r[0].length-2),10),columnCssRulesR[i]=o[e])}}return{left:columnCssRulesL[t],right:columnCssRulesR[t]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var t=plugins.length;t--;)unregisterPlugin(plugins[t]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.off(".slickgrid"),removeCssRules(),$canvas.off("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(t,e,n){return n=n||new Slick.EventData,(e=e||{}).grid=self,t.notify(e,n,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(t){return columnsById[t]}function autosizeColumns(){var t,e,n,r=[],i=0,o=0,a=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(t=0;t<columns.length;t++)e=columns[t],r.push(e.width),o+=e.width,e.resizable&&(i+=e.width-Math.max(e.minWidth,absoluteColumnMinWidth));for(n=o;o>a&&i;){var s=(o-a)/i;for(t=0;t<columns.length&&o>a;t++){e=columns[t];var l=r[t];if(!(!e.resizable||l<=e.minWidth||l<=absoluteColumnMinWidth)){var c=Math.max(e.minWidth,absoluteColumnMinWidth),u=Math.floor(s*(l-c))||1;o-=u=Math.min(u,l-c),i-=u,r[t]-=u}}if(n<=o)break;n=o}for(n=o;o<a;){var d=a/o;for(t=0;t<columns.length&&o<a;t++){e=columns[t];var f,p=r[t];o+=f=!e.resizable||e.maxWidth<=p?0:Math.min(Math.floor(d*p)-p,e.maxWidth-p||1e6)||1,r[t]+=o<=a?f:0}if(n>=o)break;n=o}var h=!1;for(t=0;t<columns.length;t++)columns[t].rerenderOnResize&&columns[t].width!=r[t]&&(h=!0),columns[t].width=r[t];applyColumnHeaderWidths(),updateCanvasWidth(!0),trigger(self.onAutosizeColumns,{columns:columns}),h&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(initialized){for(var t,e=0,n=$headers.children(),r=columns.length;e<r;e++)t=$(n[e]),jQueryNewWidthBehaviour?t.outerWidth()!==columns[e].width&&t.outerWidth(columns[e].width):t.width()!==columns[e].width-headerColumnWidthDiff&&t.width(columns[e].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var t,e,n=0,r=0;r<columns.length;r++)t=columns[r].width,(e=getColumnCssRules(r)).left.style.left=n+"px",e.right.style.right=canvasWidth-n-t+"px",n+=columns[r].width}function setSortColumn(t,e){setSortColumns([{columnId:t,sortAsc:e}])}function setSortColumns(t){sortColumns=t;var e=options.numberedMultiColumnSort&&sortColumns.length>1,n=$headers.children();n.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),n.find(".slick-sort-indicator-numbered").text(""),$.each(sortColumns,function(t,r){null==r.sortAsc&&(r.sortAsc=!0);var i=getColumnIndex(r.columnId);null!=i&&(n.eq(i).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(r.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),e&&n.eq(i).find(".slick-sort-indicator-numbered").text(t+1))})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(t,e){selectedRows=[];for(var n={},r=0;r<e.length;r++)for(var i=e[r].fromRow;i<=e[r].toRow;i++){n[i]||(selectedRows.push(i),n[i]={});for(var o=e[r].fromCell;o<=e[r].toCell;o++)canCellBeSelected(i,o)&&(n[i][columns[o].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,n),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},t)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var t=0,e=0,n=columns.length;e<n;e++)columnPosLeft[e]=t,columnPosRight[e]=t+columns[e].width,t+=columns[e].width}function setColumns(t){columns=t,columnsById={};for(var e=0;e<columns.length;e++){var n=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[n.id]=e,n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth)}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(t,e){getEditorLock().commitCurrentEdit()&&(makeActiveCellNormal(),options.enableAddRow!==t.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,t),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),e||render())}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1)}function setData(t,e){data=t,invalidateAllRows(),updateRowCount(),e&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow&&(!pagingActive||pagingIsLastPage)?1:0)}function getDataItem(t){return data.getItem?data.getItem(t):data[t]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(t){options.showTopPanel!=t&&(options.showTopPanel=t,t?$topPanelScroller.slideDown("fast",resizeCanvas):$topPanelScroller.slideUp("fast",resizeCanvas))}function setHeaderRowVisibility(t){options.showHeaderRow!=t&&(options.showHeaderRow=t,t?$headerRowScroller.slideDown("fast",resizeCanvas):$headerRowScroller.slideUp("fast",resizeCanvas))}function setFooterRowVisibility(t){options.showFooterRow!=t&&(options.showFooterRow=t,t?$footerRowScroller.slideDown("fast",resizeCanvas):$footerRowScroller.slideUp("fast",resizeCanvas))}function setPreHeaderPanelVisibility(t){options.showPreHeaderPanel!=t&&(options.showPreHeaderPanel=t,t?$preHeaderPanelScroller.slideDown("fast",resizeCanvas):$preHeaderPanelScroller.slideUp("fast",resizeCanvas))}function getContainerNode(){return $container.get(0)}function getRowTop(t){return options.rowHeight*t-offset}function getRowFromPosition(t){return Math.floor((t+offset)/options.rowHeight)}function scrollTo(t){t=Math.max(t,0),t=Math.min(t,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var e=offset;page=Math.min(n-1,Math.floor(t/ph));var r=t-(offset=Math.round(page*cj));offset!=e&&(cleanupRows(getVisibleRange(r)),updateRowPositions());prevScrollTop!=r&&(vScrollDir=prevScrollTop+e<r+offset?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=r,trigger(self.onViewportChanged,{}))}function defaultFormatter(t,e,n,r,i,o){return null==n?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(t,e){var n=data.getItemMetadata&&data.getItemMetadata(t),r=n&&n.columns&&(n.columns[e.id]||n.columns[getColumnIndex(e.id)]);return r&&r.formatter||n&&n.formatter||e.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(e)||options.defaultFormatter}function getEditor(t,e){var n=columns[e],r=data.getItemMetadata&&data.getItemMetadata(t),i=r&&r.columns;return i&&i[n.id]&&void 0!==i[n.id].editor?i[n.id].editor:i&&i[e]&&void 0!==i[e].editor?i[e].editor:n.editor||options.editorFactory&&options.editorFactory.getEditor(n)}function getDataItemValueForColumn(t,e){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(t,e):t[e.field]}function appendRowHtml(t,e,n,r){var i=getDataItem(e),o="slick-row"+(e<r&&!i?" loading":"")+(e===activeRow&&options.showCellSelection?" active":"")+(e%2==1?" odd":" even");i||(o+=" "+options.addNewRowCssClass);var a,s,l=data.getItemMetadata&&data.getItemMetadata(e);l&&l.cssClasses&&(o+=" "+l.cssClasses),t.push("<div class='ui-widget-content "+o+"' style='top:"+getRowTop(e)+"px'>");for(var c=0,u=columns.length;c<u;c++){if(s=columns[c],a=1,l&&l.columns){var d=l.columns[s.id]||l.columns[c];"*"===(a=d&&d.colspan||1)&&(a=u-c)}if(columnPosRight[Math.min(u-1,c+a-1)]>n.leftPx){if(columnPosLeft[c]>n.rightPx)break;appendCellHtml(t,e,c,a,i)}a>1&&(c+=a-1)}t.push("</div>")}function appendCellHtml(t,e,n,r,i){var o=columns[n],a="slick-cell l"+n+" r"+Math.min(columns.length-1,n+r-1)+(o.cssClass?" "+o.cssClass:"");for(var s in e===activeRow&&n===activeCell&&options.showCellSelection&&(a+=" active"),cellCssClasses)cellCssClasses[s][e]&&cellCssClasses[s][e][o.id]&&(a+=" "+cellCssClasses[s][e][o.id]);var l=null,c="";i&&(l=getDataItemValueForColumn(i,o),null!==(c=getFormatter(e,o)(e,n,l,o,i,self))&&void 0!==c||(c=""));var u=trigger(self.onBeforeAppendCell,{row:e,cell:n,value:l,dataContext:i})||"";u+=c&&c.addClasses?(u?" ":"")+c.addClasses:"",t.push("<div class='"+a+(u?" "+u:"")+"'>"),i&&t.push("[object Object]"!==Object.prototype.toString.call(c)?c:c.text),t.push("</div>"),rowsCache[e].cellRenderQueue.push(n),rowsCache[e].cellColSpans[n]=r}function cleanupRows(t){for(var e in rowsCache)(e=parseInt(e,10))!==activeRow&&(e<t.top||e>t.bottom)&&removeRowFromCache(e);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){for(var t in currentEditor&&makeActiveCellNormal(),rowsCache)removeRowFromCache(t);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}function queuePostProcessedRowForCleanup(t,e,n){for(var r in postProcessgroupId++,e)e.hasOwnProperty(r)&&postProcessedCleanupQueue.push({actionType:"C",groupId:postProcessgroupId,node:t.cellNodesByColumnIdx[0|r],columnIdx:0|r,rowIdx:n});postProcessedCleanupQueue.push({actionType:"R",groupId:postProcessgroupId,node:t.rowNode}),$(t.rowNode).detach()}function queuePostProcessedCellForCleanup(t,e,n){postProcessedCleanupQueue.push({actionType:"C",groupId:postProcessgroupId,node:t,columnIdx:e,rowIdx:n}),$(t).detach()}function removeRowFromCache(t){var e=rowsCache[t];e&&(e.rowNode&&(rowNodeFromLastMouseWheelEvent===e.rowNode?(e.rowNode.style.display="none",zombieRowNodeFromLastMouseWheelEvent=rowNodeFromLastMouseWheelEvent,zombieRowCacheFromLastMouseWheelEvent=e,zombieRowPostProcessedFromLastMouseWheelEvent=postProcessedRows[t]):options.enableAsyncPostRenderCleanup&&postProcessedRows[t]?queuePostProcessedRowForCleanup(e,postProcessedRows[t],t):$canvas[0].removeChild(e.rowNode)),delete rowsCache[t],delete postProcessedRows[t],renderedRows--,counter_rows_removed++)}function invalidateRows(t){var e,n;if(t&&t.length){for(vScrollDir=0,n=t.length,e=0;e<n;e++)currentEditor&&activeRow===t[e]&&makeActiveCellNormal(),rowsCache[t[e]]&&removeRowFromCache(t[e]);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()}}function invalidateRow(t){(t||0===t)&&invalidateRows([t])}function applyFormatResultToCellNode(t,e,n){null!==t&&void 0!==t||(t=""),"[object Object]"===Object.prototype.toString.call(t)?(e.innerHTML=t.text,t.removeClasses&&!n&&$(e).removeClass(t.removeClasses),t.addClasses&&$(e).addClass(t.addClasses)):e.innerHTML=t}function updateCell(t,e){var n=getCellNode(t,e);if(n){var r=columns[e],i=getDataItem(t);if(currentEditor&&activeRow===t&&activeCell===e)currentEditor.loadValue(i);else applyFormatResultToCellNode(i?getFormatter(t,r)(t,e,getDataItemValueForColumn(i,r),r,i,self):"",n),invalidatePostProcessingResults(t)}}function updateRow(t){var e=rowsCache[t];if(e){ensureCellNodesInRowsCache(t);var n=getDataItem(t);for(var r in e.cellNodesByColumnIdx)if(e.cellNodesByColumnIdx.hasOwnProperty(r)){var i=columns[r|=0],o=e.cellNodesByColumnIdx[r];t===activeRow&&r===activeCell&&currentEditor?currentEditor.loadValue(n):n?applyFormatResultToCellNode(getFormatter(t,i)(t,r,getDataItemValueForColumn(n,i),i,n,self),o):o.innerHTML=""}invalidatePostProcessingResults(t)}}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)-(options.createFooterRow&&options.showFooterRow?options.footerRowHeight+getVBoxDelta($footerRowScroller):0)-(options.createPreHeaderPanel&&options.showPreHeaderPanel?options.preHeaderPanelHeight+getVBoxDelta($preHeaderPanelScroller):0)}function resizeCanvas(){initialized&&(viewportH=options.autoHeight?options.rowHeight*getDataLengthIncludingAddNew():getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),options.autoHeight||$viewport.height(viewportH),scrollbarDimensions&&scrollbarDimensions.width||(scrollbarDimensions=measureScrollbar()),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render())}function updatePagingStatusFromView(t){pagingActive=0!==t.pageSize,pagingIsLastPage=t.pageNum==t.totalPages-1}function updateRowCount(){if(initialized){var t=getDataLength(),e=getDataLengthIncludingAddNew()+(options.leaveSpaceForNewRows?numVisibleRows-1:0),r=viewportHasVScroll;viewportHasVScroll=options.alwaysShowVerticalScroll||!options.autoHeight&&e*options.rowHeight>viewportH,viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width,makeActiveCellNormal();var i=t-1;for(var o in rowsCache)o>i&&removeRowFromCache(o);options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup(),activeCellNode&&activeRow>i&&resetActiveCell();var a=h;(th=Math.max(options.rowHeight*e,viewportH-scrollbarDimensions.height))<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(ph=(h=maxSupportedCssHeight)/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==a&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var s=scrollTop+offset<=th-viewportH;0==th||0==scrollTop?page=offset=0:scrollTo(s?scrollTop+offset:th-viewportH),h!=a&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&r!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(t,e){return null==t&&(t=scrollTop),null==e&&(e=scrollLeft),{top:getRowFromPosition(t),bottom:getRowFromPosition(t+viewportH)+1,leftPx:e,rightPx:e+viewportW}}function getRenderedRange(t,e){var n=getVisibleRange(t,e),r=Math.round(viewportH/options.rowHeight),i=options.minRowBuffer;return-1==vScrollDir?(n.top-=r,n.bottom+=i):1==vScrollDir?(n.top-=i,n.bottom+=r):(n.top-=i,n.bottom+=i),n.top=Math.max(0,n.top),n.bottom=Math.min(getDataLengthIncludingAddNew()-1,n.bottom),n.leftPx-=viewportW,n.rightPx+=viewportW,n.leftPx=Math.max(0,n.leftPx),n.rightPx=Math.min(canvasWidth,n.rightPx),n}function ensureCellNodesInRowsCache(t){var e=rowsCache[t];if(e&&e.cellRenderQueue.length)for(var n=e.rowNode.lastChild;e.cellRenderQueue.length;){var r=e.cellRenderQueue.pop();e.cellNodesByColumnIdx[r]=n,n=n.previousSibling}}function cleanUpCells(t,e){var n,r,i=rowsCache[e],o=[];for(var a in i.cellNodesByColumnIdx)if(i.cellNodesByColumnIdx.hasOwnProperty(a)){a|=0;var s=i.cellColSpans[a];(columnPosLeft[a]>t.rightPx||columnPosRight[Math.min(columns.length-1,a+s-1)]<t.leftPx)&&(e==activeRow&&a==activeCell||o.push(a))}for(postProcessgroupId++;null!=(n=o.pop());)r=i.cellNodesByColumnIdx[n],options.enableAsyncPostRenderCleanup&&postProcessedRows[e]&&postProcessedRows[e][n]?queuePostProcessedCellForCleanup(r,n,e):i.rowNode.removeChild(r),delete i.cellColSpans[n],delete i.cellNodesByColumnIdx[n],postProcessedRows[e]&&delete postProcessedRows[e][n],0}function cleanUpAndRenderCells(t){for(var e,n,r,i=[],o=[],a=t.top,s=t.bottom;a<=s;a++)if(e=rowsCache[a]){ensureCellNodesInRowsCache(a),cleanUpCells(t,a),n=0;var l=data.getItemMetadata&&data.getItemMetadata(a);l=l&&l.columns;for(var c=getDataItem(a),u=0,d=columns.length;u<d&&!(columnPosLeft[u]>t.rightPx);u++)if(null==(r=e.cellColSpans[u])){if(r=1,l){var f=l[columns[u].id]||l[u];"*"===(r=f&&f.colspan||1)&&(r=d-u)}columnPosRight[Math.min(d-1,u+r-1)]>t.leftPx&&(appendCellHtml(i,a,u,r,c),n++),u+=r>1?r-1:0}else u+=r>1?r-1:0;n&&(n,o.push(a))}if(i.length){var p,h,g=document.createElement("div");for(g.innerHTML=i.join("");null!=(p=o.pop());){var m;for(e=rowsCache[p];null!=(m=e.cellRenderQueue.pop());)h=g.lastChild,e.rowNode.appendChild(h),e.cellNodesByColumnIdx[m]=h}}}function renderRows(t){for(var e=$canvas[0],n=[],r=[],i=!1,o=getDataLength(),a=t.top,s=t.bottom;a<=s;a++)rowsCache[a]||(renderedRows++,r.push(a),rowsCache[a]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(n,a,t,o),activeCellNode&&activeRow===a&&(i=!0),counter_rows_rendered++);if(r.length){var l=document.createElement("div");l.innerHTML=n.join("");for(a=0,s=r.length;a<s;a++)rowsCache[r[a]].rowNode=e.appendChild(l.firstChild);i&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function startPostProcessingCleanup(){options.enableAsyncPostRenderCleanup&&(clearTimeout(h_postrenderCleanup),h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay))}function invalidatePostProcessingResults(t){for(var e in postProcessedRows[t])postProcessedRows[t].hasOwnProperty(e)&&(postProcessedRows[t][e]="C");postProcessFromRow=Math.min(postProcessFromRow,t),postProcessToRow=Math.max(postProcessToRow,t),startPostProcessing()}function updateRowPositions(){for(var t in rowsCache)rowsCache[t].rowNode.style.top=getRowTop(t)+"px"}function render(){if(initialized){scrollThrottle.dequeue();var t=getVisibleRange(),e=getRenderedRange();cleanupRows(e),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(e),renderRows(e),postProcessFromRow=t.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,t.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}}function handleHeaderScroll(){handleElementScroll($headerScroller[0])}function handleHeaderRowScroll(){handleElementScroll($headerRowScroller[0])}function handleFooterRowScroll(){handleElementScroll($footerRowScroller[0])}function handlePreHeaderPanelScroll(){handleElementScroll($preHeaderPanelScroller[0])}function handleElementScroll(t){var e=t.scrollLeft;e!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=e)}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var t=Math.abs(scrollTop-prevScrollTop),e=Math.abs(scrollLeft-prevScrollLeft);if(e&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft,options.createFooterRow&&($footerRowScroller[0].scrollLeft=scrollLeft),options.createPreHeaderPanel&&($preHeaderPanelScroller[0].scrollLeft=scrollLeft)),t)if(vScrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop,t<viewportH)scrollTo(scrollTop+offset);else{var r=offset;page=h==viewportH?0:Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),r!=(offset=Math.round(page*cj))&&invalidateAllRows()}if(e||t){var i=Math.abs(lastRenderedScrollLeft-scrollLeft),o=Math.abs(lastRenderedScrollTop-scrollTop);(i>20||o>20)&&(options.forceSyncScrolling||o<viewportH&&i<viewportW?render():scrollThrottle.enqueue(),trigger(self.onViewportChanged,{}))}trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function ActionThrottle(t,e){var n=!1,r=!1;function i(){r=!1}function o(){n=!0,setTimeout(a,e),t()}function a(){r?(i(),o()):n=!1}return{enqueue:function(){n?r=!0:o()},dequeue:i}}function asyncPostProcessRows(){for(var t=getDataLength();postProcessFromRow<=postProcessToRow;){var e=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,n=rowsCache[e];if(n&&!(e>=t)){for(var r in postProcessedRows[e]||(postProcessedRows[e]={}),ensureCellNodesInRowsCache(e),n.cellNodesByColumnIdx)if(n.cellNodesByColumnIdx.hasOwnProperty(r)){var i=columns[r|=0],o=postProcessedRows[e][r];if(i.asyncPostRender&&"R"!==o){var a=n.cellNodesByColumnIdx[r];a&&i.asyncPostRender(a,e,getDataItem(e),i,"C"===o),postProcessedRows[e][r]="R"}}return void(h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}}}function asyncPostProcessCleanupRows(){if(postProcessedCleanupQueue.length>0){for(var t=postProcessedCleanupQueue[0].groupId;postProcessedCleanupQueue.length>0&&postProcessedCleanupQueue[0].groupId==t;){var e=postProcessedCleanupQueue.shift();if("R"==e.actionType&&$(e.node).remove(),"C"==e.actionType){var n=columns[e.columnIdx];n.asyncPostRenderCleanup&&e.node&&n.asyncPostRenderCleanup(e.node,e.rowIdx,n)}}h_postrenderCleanup=setTimeout(asyncPostProcessCleanupRows,options.asyncPostRenderCleanupDelay)}}function updateCellCssStylesOnRenderedRows(t,e){var n,r,i,o;for(var a in rowsCache){if(o=e&&e[a],i=t&&t[a],o)for(r in o)i&&o[r]==i[r]||(n=getCellNode(a,getColumnIndex(r)))&&$(n).removeClass(o[r]);if(i)for(r in i)o&&o[r]==i[r]||(n=getCellNode(a,getColumnIndex(r)))&&$(n).addClass(i[r])}}function addCellCssStyles(t,e){if(cellCssClasses[t])throw new Error("addCellCssStyles: cell CSS hash with key '"+t+"' already exists.");cellCssClasses[t]=e,updateCellCssStylesOnRenderedRows(e,null),trigger(self.onCellCssStylesChanged,{key:t,hash:e,grid:self})}function removeCellCssStyles(t){cellCssClasses[t]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[t]),delete cellCssClasses[t],trigger(self.onCellCssStylesChanged,{key:t,hash:null,grid:self}))}function setCellCssStyles(t,e){var n=cellCssClasses[t];cellCssClasses[t]=e,updateCellCssStylesOnRenderedRows(e,n),trigger(self.onCellCssStylesChanged,{key:t,hash:e,grid:self})}function getCellCssStyles(t){return cellCssClasses[t]}function flashCell(t,e,n){if(n=n||100,rowsCache[t]){var r=$(getCellNode(t,e));!function t(e){e&&setTimeout(function(){r.queue(function(){r.toggleClass(options.cellFlashingCssClass).dequeue(),t(e-1)})},n)}(4)}}function handleMouseWheel(t){var e=$(t.target).closest(".slick-row")[0];e!=rowNodeFromLastMouseWheelEvent&&(zombieRowNodeFromLastMouseWheelEvent&&zombieRowNodeFromLastMouseWheelEvent!=e&&(options.enableAsyncPostRenderCleanup&&zombieRowPostProcessedFromLastMouseWheelEvent?queuePostProcessedRowForCleanup(zombieRowCacheFromLastMouseWheelEvent,zombieRowPostProcessedFromLastMouseWheelEvent):$canvas[0].removeChild(zombieRowNodeFromLastMouseWheelEvent),zombieRowNodeFromLastMouseWheelEvent=null,zombieRowCacheFromLastMouseWheelEvent=null,zombieRowPostProcessedFromLastMouseWheelEvent=null,options.enableAsyncPostRenderCleanup&&startPostProcessingCleanup()),rowNodeFromLastMouseWheelEvent=e)}function handleDragInit(t,e){var n=getCellFromEvent(t);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragInit,e,t);return!!t.isImmediatePropagationStopped()&&r}function handleDragStart(t,e){var n=getCellFromEvent(t);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragStart,e,t);return!!t.isImmediatePropagationStopped()&&r}function handleDrag(t,e){return trigger(self.onDrag,e,t)}function handleDragEnd(t,e){trigger(self.onDragEnd,e,t)}function handleKeyDown(t){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},t);var e=t.isImmediatePropagationStopped(),n=Slick.keyCode;if(!e&&!t.shiftKey&&!t.altKey){if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(t.which)>-1)return;t.which==n.HOME?e=t.ctrlKey?navigateTop():navigateRowStart():t.which==n.END&&(e=t.ctrlKey?navigateBottom():navigateRowEnd())}if(!e)if(t.shiftKey||t.altKey||t.ctrlKey)t.which!=n.TAB||!t.shiftKey||t.ctrlKey||t.altKey||(e=navigatePrev());else{if(options.editable&&currentEditor&&currentEditor.keyCaptureList&&currentEditor.keyCaptureList.indexOf(t.which)>-1)return;if(t.which==n.ESCAPE){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else t.which==n.PAGE_DOWN?(navigatePageDown(),e=!0):t.which==n.PAGE_UP?(navigatePageUp(),e=!0):t.which==n.LEFT?e=navigateLeft():t.which==n.RIGHT?e=navigateRight():t.which==n.UP?e=navigateUp():t.which==n.DOWN?e=navigateDown():t.which==n.TAB?e=navigateNext():t.which==n.ENTER&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable()),e=!0)}if(e){t.stopPropagation(),t.preventDefault();try{t.originalEvent.keyCode=0}catch(t){}}}function handleClick(t){currentEditor||(t.target!=document.activeElement||$(t.target).hasClass("slick-cell"))&&setFocus();var e=getCellFromEvent(t);if(e&&(null===currentEditor||activeRow!=e.row||activeCell!=e.cell)&&(trigger(self.onClick,{row:e.row,cell:e.cell},t),!t.isImmediatePropagationStopped()&&canCellBeActive(e.row,e.cell)&&(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()))){scrollRowIntoView(e.row,!1);var n=t.target&&t.target.className===Slick.preClickClassName,r=columns[e.cell],i=!!(options.editable&&r&&r.editor&&options.suppressActiveCellChangeOnEdit);setActiveCellInternal(getCellNode(e.row,e.cell),null,n,i)}}function handleContextMenu(t){var e=$(t.target).closest(".slick-cell",$canvas);0!==e.length&&(activeCellNode===e[0]&&null!==currentEditor||trigger(self.onContextMenu,{},t))}function handleDblClick(t){var e=getCellFromEvent(t);!e||null!==currentEditor&&activeRow==e.row&&activeCell==e.cell||(trigger(self.onDblClick,{row:e.row,cell:e.cell},t),t.isImmediatePropagationStopped()||options.editable&&gotoCell(e.row,e.cell,!0))}function handleHeaderMouseEnter(t){trigger(self.onHeaderMouseEnter,{column:$(this).data("column"),grid:self},t)}function handleHeaderMouseLeave(t){trigger(self.onHeaderMouseLeave,{column:$(this).data("column"),grid:self},t)}function handleHeaderContextMenu(t){var e=$(t.target).closest(".slick-header-column",".slick-header-columns"),n=e&&e.data("column");trigger(self.onHeaderContextMenu,{column:n},t)}function handleHeaderClick(t){if(!columnResizeDragging){var e=$(t.target).closest(".slick-header-column",".slick-header-columns"),n=e&&e.data("column");n&&trigger(self.onHeaderClick,{column:n},t)}}function handleMouseEnter(t){trigger(self.onMouseEnter,{},t)}function handleMouseLeave(t){trigger(self.onMouseLeave,{},t)}function cellExists(t,e){return!(t<0||t>=getDataLength()||e<0||e>=columns.length)}function getCellFromPoint(t,e){for(var n=getRowFromPosition(e),r=0,i=0,o=0;o<columns.length&&i<t;o++)i+=columns[o].width,r++;return r<0&&(r=0),{row:n,cell:r-1}}function getCellFromNode(t){var e=/l\d+/.exec(t.className);if(!e)throw new Error("getCellFromNode: cannot get cell - "+t.className);return parseInt(e[0].substr(1,e[0].length-1),10)}function getRowFromNode(t){for(var e in rowsCache)if(rowsCache[e].rowNode===t)return 0|e;return null}function getCellFromEvent(t){var e=$(t.target).closest(".slick-cell",$canvas);if(!e.length)return null;var n=getRowFromNode(e[0].parentNode),r=getCellFromNode(e[0]);return null==n||null==r?null:{row:n,cell:r}}function getCellNodeBox(t,e){if(!cellExists(t,e))return null;for(var n=getRowTop(t),r=n+options.rowHeight-1,i=0,o=0;o<e;o++)i+=columns[o].width;return{top:n,left:i,bottom:r,right:i+columns[e].width}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){-1==tabbingDirection?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(t,e,n){scrollRowIntoView(t,n);var r=getColspan(t,e);internalScrollColumnIntoView(columnPosLeft[e],columnPosRight[e+(r>1?r-1:0)])}function internalScrollColumnIntoView(t,e){var n=scrollLeft+viewportW;t<scrollLeft?($viewport.scrollLeft(t),handleScroll(),render()):e>n&&($viewport.scrollLeft(Math.min(t,e-$viewport[0].clientWidth)),handleScroll(),render())}function scrollColumnIntoView(t){internalScrollColumnIntoView(columnPosLeft[t],columnPosRight[t])}function setActiveCellInternal(t,e,n,r){null!==activeCellNode&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active"));null!=(activeCellNode=t)?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),null==e&&(e=activeRow==getDataLength()||options.autoEdit),options.showCellSelection&&($(activeCellNode).addClass("active"),$(rowsCache[activeRow].rowNode).addClass("active")),options.editable&&e&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable(void 0,n)},options.asyncEditorLoadDelay):makeActiveCellEditable(void 0,n))):activeRow=activeCell=null,r||trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(t){}else if(window.getSelection){var t=window.getSelection();t&&t.removeAllRanges&&t.removeAllRanges()}}function isCellPotentiallyEditable(t,e){var n=getDataLength();return!(t<n&&!getDataItem(t))&&(!(columns[e].cannotTriggerInsert&&t>=n)&&!!getEditor(t,e))}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var t=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),t){var e=columns[activeCell];applyFormatResultToCellNode(getFormatter(activeRow,e)(activeRow,activeCell,getDataItemValueForColumn(t,e),e,t,self),activeCellNode),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(t,e){if(activeCellNode){if(!options.editable)throw new Error("Grid : makeActiveCellEditable : should never get called when options.editable is false");if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(activeRow,activeCell)){var n=columns[activeCell],r=getDataItem(activeRow);if(!1!==trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:r,column:n})){getEditorLock().activate(editController),$(activeCellNode).addClass("editable");var i=t||getEditor(activeRow,activeCell);t||i.suppressClearOnEdit||(activeCellNode.innerHTML=""),currentEditor=new i({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:n,item:r||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),r&&(currentEditor.loadValue(r),e&&currentEditor.preClick&&currentEditor.preClick()),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}else setFocus()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(t){var e={top:t.offsetTop,left:t.offsetLeft,bottom:0,right:0,width:$(t).outerWidth(),height:$(t).outerHeight(),visible:!0};e.bottom=e.top+e.height,e.right=e.left+e.width;for(var n=t.offsetParent;(t=t.parentNode)!=document.body&&null!=t;)e.visible&&t.scrollHeight!=t.offsetHeight&&"visible"!=$(t).css("overflowY")&&(e.visible=e.bottom>t.scrollTop&&e.top<t.scrollTop+t.clientHeight),e.visible&&t.scrollWidth!=t.offsetWidth&&"visible"!=$(t).css("overflowX")&&(e.visible=e.right>t.scrollLeft&&e.left<t.scrollLeft+t.clientWidth),e.left-=t.scrollLeft,e.top-=t.scrollTop,t===n&&(e.left+=t.offsetLeft,e.top+=t.offsetTop,n=t.offsetParent),e.bottom=e.top+e.height,e.right=e.left+e.width;return e}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var t=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(t.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(t)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(t,e){var n=t*options.rowHeight,r=(t+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(t+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(e?n:r),render()):t*options.rowHeight<scrollTop+offset&&(scrollTo(e?r:n),render())}function scrollRowToTop(t){scrollTo(t*options.rowHeight),render()}function scrollPage(t){var e=t*numVisibleRows;if(scrollTo((getRowFromPosition(scrollTop)+e)*options.rowHeight),render(),options.enableCellNavigation&&null!=activeRow){var n=activeRow+e,r=getDataLengthIncludingAddNew();n>=r&&(n=r-1),n<0&&(n=0);for(var i=0,o=null,a=activePosX;i<=activePosX;)canCellBeActive(n,i)&&(o=i),i+=getColspan(n,i);null!==o?(setActiveCellInternal(getCellNode(n,o)),activePosX=a):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function navigateTop(){navigateToRow(0)}function navigateBottom(){navigateToRow(getDataLength()-1)}function navigateToRow(t){var e=getDataLength();if(!e)return!0;if(t<0?t=0:t>=e&&(t=e-1),scrollCellIntoView(t,0,!0),options.enableCellNavigation&&null!=activeRow){for(var n=0,r=null,i=activePosX;n<=activePosX;)canCellBeActive(t,n)&&(r=n),n+=getColspan(t,n);null!==r?(setActiveCellInternal(getCellNode(t,r)),activePosX=i):resetActiveCell()}return!0}function getColspan(t,e){var n=data.getItemMetadata&&data.getItemMetadata(t);if(!n||!n.columns)return 1;var r=n.columns[columns[e].id]||n.columns[e],i=r&&r.colspan;return i="*"===i?columns.length-e:i||1}function findFirstFocusableCell(t){for(var e=0;e<columns.length;){if(canCellBeActive(t,e))return e;e+=getColspan(t,e)}return null}function findLastFocusableCell(t){for(var e=0,n=null;e<columns.length;)canCellBeActive(t,e)&&(n=e),e+=getColspan(t,e);return n}function gotoRight(t,e,n){if(e>=columns.length)return null;do{e+=getColspan(t,e)}while(e<columns.length&&!canCellBeActive(t,e));return e<columns.length?{row:t,cell:e,posX:e}:null}function gotoLeft(t,e,n){if(e<=0)return null;var r=findFirstFocusableCell(t);if(null===r||r>=e)return null;for(var i,o={row:t,cell:r,posX:r};;){if(!(i=gotoRight(o.row,o.cell,o.posX)))return null;if(i.cell>=e)return o;o=i}}function gotoDown(t,e,n){for(var r,i=getDataLengthIncludingAddNew();;){if(++t>=i)return null;for(r=e=0;e<=n;)r=e,e+=getColspan(t,e);if(canCellBeActive(t,r))return{row:t,cell:r,posX:n}}}function gotoUp(t,e,n){for(var r;;){if(--t<0)return null;for(r=e=0;e<=n;)r=e,e+=getColspan(t,e);if(canCellBeActive(t,r))return{row:t,cell:r,posX:n}}}function gotoNext(t,e,n){if(null==t&&null==e&&canCellBeActive(t=e=n=0,e))return{row:t,cell:e,posX:e};var r=gotoRight(t,e,n);if(r)return r;var i=null,o=getDataLengthIncludingAddNew();for(t===o-1&&t--;++t<o;)if(null!==(i=findFirstFocusableCell(t)))return{row:t,cell:i,posX:i};return null}function gotoPrev(t,e,n){if(null==t&&null==e&&canCellBeActive(t=getDataLengthIncludingAddNew()-1,e=n=columns.length-1))return{row:t,cell:e,posX:e};for(var r,i;!r&&!(r=gotoLeft(t,e,n));){if(--t<0)return null;e=0,null!==(i=findLastFocusableCell(t))&&(r={row:t,cell:i,posX:i})}return r}function gotoRowStart(t,e,n){var r=findFirstFocusableCell(t);return null===r?null:{row:t,cell:r,posX:n}}function gotoRowEnd(t,e,n){var r=findLastFocusableCell(t);return null===r?null:{row:t,cell:r,posX:n}}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigateRowStart(){return navigate("home")}function navigateRowEnd(){return navigate("end")}function navigate(t){if(!options.enableCellNavigation)return!1;if(!activeCellNode&&"prev"!=t&&"next"!=t)return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();tabbingDirection={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1}[t];var e=(0,{up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext,home:gotoRowStart,end:gotoRowEnd}[t])(activeRow,activeCell,activePosX);if(e){var n=e.row==getDataLength();return scrollCellIntoView(e.row,e.cell,!n&&options.emulatePagingWhenScrolling),setActiveCellInternal(getCellNode(e.row,e.cell)),activePosX=e.posX,!0}return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(t,e){return rowsCache[t]?(ensureCellNodesInRowsCache(t),rowsCache[t].cellNodesByColumnIdx[e]):null}function setActiveCell(t,e,n,r,i){initialized&&(t>getDataLength()||t<0||e>=columns.length||e<0||options.enableCellNavigation&&(scrollCellIntoView(t,e,!1),setActiveCellInternal(getCellNode(t,e),n,r,i)))}function canCellBeActive(t,e){if(!options.enableCellNavigation||t>=getDataLengthIncludingAddNew()||t<0||e>=columns.length||e<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(t);if(n&&void 0!==n.focusable)return!!n.focusable;var r=n&&n.columns;return r&&r[columns[e].id]&&void 0!==r[columns[e].id].focusable?!!r[columns[e].id].focusable:r&&r[e]&&void 0!==r[e].focusable?!!r[e].focusable:!!columns[e].focusable}function canCellBeSelected(t,e){if(t>=getDataLength()||t<0||e>=columns.length||e<0)return!1;var n=data.getItemMetadata&&data.getItemMetadata(t);if(n&&void 0!==n.selectable)return!!n.selectable;var r=n&&n.columns&&(n.columns[columns[e].id]||n.columns[e]);return r&&void 0!==r.selectable?!!r.selectable:!!columns[e].selectable}function gotoCell(t,e,n){initialized&&(canCellBeActive(t,e)&&getEditorLock().commitCurrentEdit()&&(scrollCellIntoView(t,e,!1),setActiveCellInternal(getCellNode(t,e),n||t===getDataLength()||options.autoEdit,null,options.editable),currentEditor||setFocus()))}function commitCurrentEdit(){var t=getDataItem(activeRow),e=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var n=currentEditor.validate();if(n.valid){if(activeRow<getDataLength()){var r={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(t,this.serializedValue),updateRow(this.row),trigger(self.onCellChange,{row:this.row,cell:this.cell,item:t})},undo:function(){this.editor.applyValue(t,this.prevSerializedValue),updateRow(this.row),trigger(self.onCellChange,{row:this.row,cell:this.cell,item:t})}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(t,e,r)):(r.execute(),makeActiveCellNormal())}else{var i={};currentEditor.applyValue(i,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:i,column:e})}return!getEditorLock().isActive()}return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:n,row:activeRow,cell:activeCell,column:e}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(t){for(var e=[],n=columns.length-1,r=0;r<t.length;r++)e.push(new Slick.Range(t[r],0,t[r],n));return e}function getSelectedRows(){if(!selectionModel)throw new Error("Selection model is not set");return selectedRows}function setSelectedRows(t){if(!selectionModel)throw new Error("Selection model is not set");selectionModel.setSelectedRanges(rowsToRanges(t))}this.debug=function(){var t="";t+="\ncounter_rows_rendered:  "+counter_rows_rendered,t+="\ncounter_rows_removed:  "+counter_rows_removed,t+="\nrenderedRows:  "+renderedRows,t+="\nnumVisibleRows:  "+numVisibleRows,t+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,t+="\nn(umber of pages):  "+n,t+="\n(current) page:  "+page,t+="\npage height (ph):  "+ph,t+="\nvScrollDir:  "+vScrollDir,alert(t)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.3.21",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onFooterRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onBeforeFooterRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onBeforeAppendCell:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,onAutosizeColumns:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getContainerNode:getContainerNode,updatePagingStatusFromView:updatePagingStatusFromView,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,scrollColumnIntoView:scrollColumnIntoView,getCanvasNode:getCanvasNode,getUID:getUID,getHeaderColumnWidthDiff:getHeaderColumnWidthDiff,getScrollbarDimensions:getScrollbarDimensions,getHeadersWidth:getHeadersWidth,getCanvasWidth:getCanvasWidth,focus:setFocus,scrollTo:scrollTo,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,navigatePageUp:navigatePageUp,navigatePageDown:navigatePageDown,navigateTop:navigateTop,navigateBottom:navigateBottom,navigateRowStart:navigateRowStart,navigateRowEnd:navigateRowEnd,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,getPreHeaderPanel:getPreHeaderPanel,setPreHeaderPanelVisibility:setPreHeaderPanelVisibility,getHeader:getHeader,getHeaderColumn:getHeaderColumn,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,setFooterRowVisibility:setFooterRowVisibility,getFooterRow:getFooterRow,getFooterRowColumn:getFooterRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}})}(jQuery)},function(t,e){!function(t){t.extend(!0,window,{Slick:{Data:{DataView:function(e){var n,r,i,o,a,s=this,l="id",c=[],u=[],d={},f=null,p=null,h=null,g=!1,m=!0,v={},y={},b=[],w=[],_={getter:null,formatter:null,comparer:function(t,e){return t.value===e.value?0:t.value>e.value?1:-1},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},x=[],S=[],C=[],E=":|:",T=0,M=0,k=0,A=new Slick.Event,I=new Slick.Event,O=new Slick.Event;function P(t){for(var e,n=t=t||0,r=c.length;n<r;n++){if(void 0===(e=c[n][l]))throw new Error("Each data element must implement a unique 'id' property");d[e]=n}}function L(){var t=T?Math.max(1,Math.ceil(k/T)):1;return{pageSize:T,pageNum:M,totalRows:k,totalPages:t,dataView:s}}function D(t,e){m=e,r=t,n=null,!1===e&&c.reverse(),c.sort(t),!1===e&&c.reverse(),d={},P(),J()}function N(t,e){m=e,n=t,r=null;var i=Object.prototype.toString;Object.prototype.toString="function"==typeof t?t:function(){return this[t]},!1===e&&c.reverse(),c.sort(),Object.prototype.toString=i,!1===e&&c.reverse(),d={},P(),J()}function R(n){e.groupItemMetadataProvider||(e.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),S=[],C=[],x=(n=n||[])instanceof Array?n:[n];for(var r=0;r<x.length;r++){var i=x[r]=t.extend(!0,{},_,x[r]);i.getterIsAFn="function"==typeof i.getter,i.compiledAccumulators=[];for(var o=i.aggregators.length;o--;)i.compiledAccumulators[o]=Y(i.aggregators[o]);C[r]={}}J()}function F(){if(!f){f={};for(var t=0,e=u.length;t<e;t++)f[u[t][l]]=t}}function B(t){return c[d[t]]}function j(t,e){if(void 0===d[t]||t!==e[l])throw new Error("Invalid or non-matching id");c[d[t]]=e,h||(h={}),h[t]=!0,J()}function q(t,e){c.splice(t,0,e),P(t),J()}function z(t){var e=d[t];if(void 0===e)throw new Error("Invalid id");delete d[t],c.splice(e,1),P(e),J()}function U(t){if(!r)throw new Error("sortedAddItem() requires a sort comparer, use sort()");q(function(t){var e=0,n=c.length;for(;e<n;){var i=e+n>>>1;-1===r(c[i],t)?e=i+1:n=i}return e}(t),t)}function $(t,e){if(null==t)for(var n=0;n<x.length;n++)C[n]={},x[n].collapsed=e;else C[t]={},x[t].collapsed=e;J()}function V(t,e,n){C[t][e]=x[t].collapsed^n,J()}function H(t){var e,n=t.group,r=x[n.level],i=n.level==x.length,o=r.aggregators.length;if(!i&&r.aggregateChildGroups)for(var a=n.groups.length;a--;)n.groups[a].totals.initialized||H(n.groups[a].totals);for(;o--;)(e=r.aggregators[o]).init(),!i&&r.aggregateChildGroups?r.compiledAccumulators[o].call(e,n.groups):r.compiledAccumulators[o].call(e,n.rows),e.storeResult(t);t.initialized=!0}function W(t){var e=x[t.level],n=new Slick.GroupTotals;n.group=t,t.totals=n,e.lazyTotalsCalculation||H(n)}function G(t){var e=t.toString().match(/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/);return{params:e[1].split(","),body:e[2]}}function Y(t){var e=G(t.accumulate),n=new Function("_items","for (var "+e.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+e.params[0]+" = _items[_i]; "+e.body+"}");return n.displayName=n.name="compiledAccumulatorLoop",n}function K(t,e){for(var n=[],r=0,i=0,o=t.length;i<o;i++)p(t[i],e)&&(n[r++]=t[i]);return n}function X(t,e,n){for(var r,i=[],o=0,a=0,s=t.length;a<s;a++)r=t[a],n[a]?i[o++]=r:p(r,e)&&(i[o++]=r,n[a]=!0);return i}function Q(t){if(p){var n=e.inlineFilters?o:K,r=e.inlineFilters?a:X;v.isFilterNarrowing?b=n(b,i):v.isFilterExpanding?b=r(t,i,w):v.isFilterUnchanged||(b=n(t,i))}else b=T?t:t.concat();var s;return T?(b.length<=M*T&&(M=0===b.length?0:Math.floor((b.length-1)/T)),s=b.slice(T*M,T*M+T)):s=b,{totalRows:b.length,rows:s}}function Z(t){f=null,v.isFilterNarrowing==y.isFilterNarrowing&&v.isFilterExpanding==y.isFilterExpanding||(w=[]);var e=Q(t);k=e.totalRows;var n=e.rows;S=[],x.length&&(S=function t(e,n){var r;var i;var o=[];var a={};var s;var l=n?n.level+1:0;var c=x[l];for(var u=0,d=c.predefinedValues.length;u<d;u++)i=c.predefinedValues[u],(r=a[i])||((r=new Slick.Group).value=i,r.level=l,r.groupingKey=(n?n.groupingKey+E:"")+i,o[o.length]=r,a[i]=r);for(var u=0,d=e.length;u<d;u++)s=e[u],i=c.getterIsAFn?c.getter(s):s[c.getter],(r=a[i])||((r=new Slick.Group).value=i,r.level=l,r.groupingKey=(n?n.groupingKey+E:"")+i,o[o.length]=r,a[i]=r),r.rows[r.count++]=s;if(l<x.length-1)for(var u=0;u<o.length;u++)(r=o[u]).groups=t(r.rows,r);o.sort(x[l].comparer);return o}(n)).length&&(!function t(e,n){n=n||0;var r=x[n];var i=r.collapsed;var o=C[n];var a,s=e.length;for(;s--;)(a=e[s]).collapsed&&!r.aggregateCollapsed||(a.groups&&t(a.groups,n+1),r.aggregators.length&&(r.aggregateEmpty||a.rows.length||a.groups&&a.groups.length)&&W(a),a.collapsed=i^o[a.groupingKey],a.title=r.formatter?r.formatter(a):a.value)}(S),n=function t(e,n){n=n||0;var r=x[n];var i,o,a=[],s=0;for(var l=0,c=e.length;l<c;l++){if(o=e[l],a[s++]=o,!o.collapsed)for(var u=0,d=(i=o.groups?t(o.groups,n+1):o.rows).length;u<d;u++)a[s++]=i[u];o.totals&&r.displayTotalsRow&&(!o.collapsed||r.aggregateCollapsed)&&(a[s++]=o.totals)}return a}(S));var r=function(t,e){var n,r,i,o=[],a=0,s=e.length;v&&v.ignoreDiffsBefore&&(a=Math.max(0,Math.min(e.length,v.ignoreDiffsBefore)));v&&v.ignoreDiffsAfter&&(s=Math.min(e.length,Math.max(0,v.ignoreDiffsAfter)));for(var c=a,u=t.length;c<s;c++)c>=u?o[o.length]=c:(n=e[c],r=t[c],(x.length&&(i=n.__nonDataRow||r.__nonDataRow)&&n.__group!==r.__group||n.__group&&!n.equals(r)||i&&(n.__groupTotals||r.__groupTotals)||n[l]!=r[l]||h&&h[n[l]])&&(o[o.length]=c));return o}(u,n);return u=n,r}function J(){if(!g){var t=u.length,e=k,n=Z(c);T&&k<M*T&&(M=Math.max(0,Math.ceil(k/T)-1),n=Z(c)),h=null,y=v,v={},e!==k&&O.notify(L(),null,s),t!==u.length&&A.notify({previous:t,current:u.length,dataView:s},null,s),n.length>0&&I.notify({rows:n,dataView:s},null,s)}}e=t.extend(!0,{},{groupItemMetadataProvider:null,inlineFilters:!1},e),t.extend(this,{beginUpdate:function(){g=!0},endUpdate:function(){g=!1,J()},setPagingOptions:function(t){void 0!=t.pageSize&&(T=t.pageSize,M=T?Math.min(M,Math.max(0,Math.ceil(k/T)-1)):0);void 0!=t.pageNum&&(M=Math.min(t.pageNum,Math.max(0,Math.ceil(k/T)-1)));O.notify(L(),null,s),J()},getPagingInfo:L,getItems:function(){return c},setItems:function(t,e){void 0!==e&&(l=e);c=b=t,d={},P(),function(){for(var t,e=0,n=c.length;e<n;e++)if(void 0===(t=c[e][l])||d[t]!==e)throw new Error("Each data element must implement a unique 'id' property")}(),J()},setFilter:function(t){p=t,e.inlineFilters&&(o=function(){var t=G(p),e="{ _retval[_idx++] = $item$; continue _coreloop; }$1",n=t.body.replace(/return false\s*([;}]|\}|$)/gi,"{ continue _coreloop; }$1").replace(/return!1([;}]|\}|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|\}|$)/gi,e).replace(/return!0([;}]|\}|$)/gi,e).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),r=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");r=(r=(r=r.replace(/\$filter\$/gi,n)).replace(/\$item\$/gi,t.params[0])).replace(/\$args\$/gi,t.params[1]);var i=new Function("_items,_args",r);return i.displayName=i.name="compiledFilter",i}(),a=function(){var t=G(p),e="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",n=t.body.replace(/return false\s*([;}]|\}|$)/gi,"{ continue _coreloop; }$1").replace(/return!1([;}]|\}|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|\}|$)/gi,e).replace(/return!0([;}]|\}|$)/gi,e).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),r=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");r=(r=(r=r.replace(/\$filter\$/gi,n)).replace(/\$item\$/gi,t.params[0])).replace(/\$args\$/gi,t.params[1]);var i=new Function("_items,_args,_cache",r);return i.displayName=i.name="compiledFilterWithCaching",i}());J()},getFilter:function(){return p},getFilteredItems:function(){return b},sort:D,fastSort:N,reSort:function(){r?D(r,m):n&&N(n,m)},setGrouping:R,getGrouping:function(){return x},groupBy:function(t,e,n){if(null==t)return void R([]);R({getter:t,formatter:e,comparer:n})},setAggregators:function(t,e){if(!x.length)throw new Error("At least one grouping must be specified before calling setAggregators().");x[0].aggregators=t,x[0].aggregateCollapsed=e,R(x)},collapseAllGroups:function(t){$(t,!0)},expandAllGroups:function(t){$(t,!1)},collapseGroup:function(t){var e=Array.prototype.slice.call(arguments),n=e[0];1==e.length&&-1!=n.indexOf(E)?V(n.split(E).length-1,n,!0):V(e.length-1,e.join(E),!0)},expandGroup:function(t){var e=Array.prototype.slice.call(arguments),n=e[0];1==e.length&&-1!=n.indexOf(E)?V(n.split(E).length-1,n,!1):V(e.length-1,e.join(E),!1)},getGroups:function(){return S},getIdxById:function(t){return d[t]},getRowByItem:function(t){return F(),f[t[l]]},getRowById:function(t){return F(),f[t]},getItemById:B,getItemByIdx:function(t){return c[t]},mapItemsToRows:function(t){var e=[];F();for(var n=0,r=t.length;n<r;n++){var i=f[t[n][l]];null!=i&&(e[e.length]=i)}return e},mapRowsToIds:function(t){for(var e=[],n=0,r=t.length;n<r;n++)t[n]<u.length&&(e[e.length]=u[t[n]][l]);return e},mapIdsToRows:function(t){var e=[];F();for(var n=0,r=t.length;n<r;n++){var i=f[t[n]];null!=i&&(e[e.length]=i)}return e},setRefreshHints:function(t){v=t},setFilterArgs:function(t){i=t},refresh:J,updateItem:j,insertItem:q,addItem:function(t){c.push(t),P(c.length-1),J()},deleteItem:z,sortedAddItem:U,sortedUpdateItem:function(t,e){if(void 0===d[t]||t!==e[l])throw new Error("Invalid or non-matching id "+d[t]);if(!r)throw new Error("sortedUpdateItem() requires a sort comparer, use sort()");var n=B(t);0!==r(n,e)?(z(t),U(e)):j(t,e)},syncGridSelection:function(e,n,r){var i,o=this,a=o.mapRowsToIds(e.getSelectedRows()),s=new Slick.Event;function l(t){a.join(",")!=t.join(",")&&(a=t,s.notify({grid:e,ids:a,dataView:o},new Slick.EventData,o))}function c(){if(a.length>0){i=!0;var t=o.mapIdsToRows(a);n||l(o.mapRowsToIds(t)),e.setSelectedRows(t),i=!1}}return e.onSelectedRowsChanged.subscribe(function(n,s){if(!i){var c=o.mapRowsToIds(e.getSelectedRows());r&&e.getOptions().multiSelect?l(t.grep(a,function(t){return void 0===o.getRowById(t)}).concat(c)):l(c)}}),this.onRowsChanged.subscribe(c),this.onRowCountChanged.subscribe(c),s},syncGridCellCssStyles:function(t,e){var n,r;function i(t){for(var e in n={},t){var r=u[e][l];n[r]=t[e]}}function o(){if(n){r=!0,F();var i={};for(var o in n){var a=f[o];void 0!=a&&(i[a]=n[o])}t.setCellCssStyles(e,i),r=!1}}i(t.getCellCssStyles(e)),t.onCellCssStylesChanged.subscribe(function(n,a){r||e==a.key&&(a.hash?i(a.hash):(t.onCellCssStylesChanged.unsubscribe(styleChanged),s.onRowsChanged.unsubscribe(o),s.onRowCountChanged.unsubscribe(o)))}),this.onRowsChanged.subscribe(o),this.onRowCountChanged.subscribe(o)},getLength:function(){return u.length},getItem:function(t){var e=u[t];if(e&&e.__group&&e.totals&&!e.totals.initialized){var n=x[e.level];n.displayTotalsRow||(H(e.totals),e.title=n.formatter?n.formatter(e):e.value)}else e&&e.__groupTotals&&!e.initialized&&H(e);return e},getItemMetadata:function(t){var n=u[t];if(void 0===n)return null;if(n.__group)return e.groupItemMetadataProvider.getGroupRowMetadata(n);if(n.__groupTotals)return e.groupItemMetadataProvider.getTotalsRowMetadata(n);return null},onRowCountChanged:A,onRowsChanged:I,onPagingInfoChanged:O})},Aggregators:{Avg:function(t){this.field_=t,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(t){var e=t[this.field_];this.count_++,null==e||""===e||isNaN(e)||(this.nonNullCount_++,this.sum_+=parseFloat(e))},this.storeResult=function(t){t.avg||(t.avg={}),0!=this.nonNullCount_&&(t.avg[this.field_]=this.sum_/this.nonNullCount_)}},Min:function(t){this.field_=t,this.init=function(){this.min_=null},this.accumulate=function(t){var e=t[this.field_];null==e||""===e||isNaN(e)||(null==this.min_||e<this.min_)&&(this.min_=e)},this.storeResult=function(t){t.min||(t.min={}),t.min[this.field_]=this.min_}},Max:function(t){this.field_=t,this.init=function(){this.max_=null},this.accumulate=function(t){var e=t[this.field_];null==e||""===e||isNaN(e)||(null==this.max_||e>this.max_)&&(this.max_=e)},this.storeResult=function(t){t.max||(t.max={}),t.max[this.field_]=this.max_}},Sum:function(t){this.field_=t,this.init=function(){this.sum_=null},this.accumulate=function(t){var e=t[this.field_];null==e||""===e||isNaN(e)||(this.sum_+=parseFloat(e))},this.storeResult=function(t){t.sum||(t.sum={}),t.sum[this.field_]=this.sum_}}}}}})}(jQuery)},function(t,e){!function(t){jQuery.extend(!0,window,{Slick:{Formatters:{PercentComplete:function(t,e,n,r,i){return null==n||""===n?"-":n<50?"<span style='color:red;font-weight:bold;'>"+n+"%</span>":"<span style='color:green'>"+n+"%</span>"},PercentCompleteBar:function(t,e,n,r,i){if(null==n||""===n)return"";var o;o=n<30?"red":n<70?"silver":"green";return"<span class='percent-complete-bar' style='background:"+o+";width:"+n+"%'></span>"},YesNo:function(t,e,n,r,i){return n?"Yes":"No"},Checkmark:function(t,e,n,r,i){return n?"<img src='../images/tick.png'>":""},Checkbox:function(t,e,n,r,i){return'<img class="slick-edit-preclick" src="../images/'+(n?"CheckboxY":"CheckboxN")+'.png">'}}}})}()},function(t,e){!function(t){function e(i){var o,a;function s(){var t=i.column.editorFixedDecimalPlaces;return void 0===t&&(t=e.DefaultDecimalPlaces),t||0===t?t:null}this.init=function(){var e=i.grid.getOptions().editorCellNavOnLRKeys;o=t("<INPUT type=text class='editor-text' />").appendTo(i.container).on("keydown.nav",e?n:r).focus().select()},this.destroy=function(){o.remove()},this.focus=function(){o.focus()},this.loadValue=function(t){a=t[i.column.field];var e=s();null!==e&&(a||0===a)&&a.toFixed&&(a=a.toFixed(e)),o.val(a),o[0].defaultValue=a,o.select()},this.serializeValue=function(){var t=parseFloat(o.val());e.AllowEmptyValue?t||0===t||(t=""):t=t||0;var n=s();return null!==n&&(t||0===t)&&t.toFixed&&(t=parseFloat(t.toFixed(n))),t},this.applyValue=function(t,e){t[i.column.field]=e},this.isValueChanged=function(){return!(""==o.val()&&null==a)&&o.val()!=a},this.validate=function(){if(isNaN(o.val()))return{valid:!1,msg:"Please enter a valid number"};if(i.column.validator){var t=i.column.validator(o.val());if(!t.valid)return t}return{valid:!0,msg:null}},this.init()}function n(e){var n=this.selectionStart,r=this.value.length;(e.keyCode===t.ui.keyCode.LEFT&&n>0||e.keyCode===t.ui.keyCode.RIGHT&&n<r-1)&&e.stopImmediatePropagation()}function r(e){e.keyCode!==t.ui.keyCode.LEFT&&e.keyCode!==t.ui.keyCode.RIGHT||e.stopImmediatePropagation()}t.extend(!0,window,{Slick:{Editors:{Text:function(e){var i,o;this.init=function(){var o=e.grid.getOptions().editorCellNavOnLRKeys;i=t("<INPUT type=text class='editor-text' />").appendTo(e.container).on("keydown.nav",o?n:r).focus().select()},this.destroy=function(){i.remove()},this.focus=function(){i.focus()},this.getValue=function(){return i.val()},this.setValue=function(t){i.val(t)},this.loadValue=function(t){o=t[e.column.field]||"",i.val(o),i[0].defaultValue=o,i.select()},this.serializeValue=function(){return i.val()},this.applyValue=function(t,n){t[e.column.field]=n},this.isValueChanged=function(){return!(""==i.val()&&null==o)&&i.val()!=o},this.validate=function(){if(e.column.validator){var t=e.column.validator(i.val());if(!t.valid)return t}return{valid:!0,msg:null}},this.init()},Integer:function(e){var i,o;this.init=function(){var o=e.grid.getOptions().editorCellNavOnLRKeys;i=t("<INPUT type=text class='editor-text' />").appendTo(e.container).on("keydown.nav",o?n:r).focus().select()},this.destroy=function(){i.remove()},this.focus=function(){i.focus()},this.loadValue=function(t){o=t[e.column.field],i.val(o),i[0].defaultValue=o,i.select()},this.serializeValue=function(){return parseInt(i.val(),10)||0},this.applyValue=function(t,n){t[e.column.field]=n},this.isValueChanged=function(){return!(""==i.val()&&null==o)&&i.val()!=o},this.validate=function(){if(isNaN(i.val()))return{valid:!1,msg:"Please enter a valid integer"};if(e.column.validator){var t=e.column.validator(i.val());if(!t.valid)return t}return{valid:!0,msg:null}},this.init()},Float:e,Date:function(e){var n,r,i=!1;this.init=function(){(n=t("<INPUT type=text class='editor-text' />")).appendTo(e.container),n.focus().select(),n.datepicker({showOn:"button",buttonImageOnly:!0,beforeShow:function(){i=!0},onClose:function(){i=!1}}),n.width(n.width()-18)},this.destroy=function(){t.datepicker.dpDiv.stop(!0,!0),n.datepicker("hide"),n.datepicker("destroy"),n.remove()},this.show=function(){i&&t.datepicker.dpDiv.stop(!0,!0).show()},this.hide=function(){i&&t.datepicker.dpDiv.stop(!0,!0).hide()},this.position=function(e){i&&t.datepicker.dpDiv.css("top",e.top+30).css("left",e.left)},this.focus=function(){n.focus()},this.loadValue=function(t){r=t[e.column.field],n.val(r),n[0].defaultValue=r,n.select()},this.serializeValue=function(){return n.val()},this.applyValue=function(t,n){t[e.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==r)&&n.val()!=r},this.validate=function(){if(e.column.validator){var t=e.column.validator(n.val());if(!t.valid)return t}return{valid:!0,msg:null}},this.init()},YesNoSelect:function(e){var n,r;this.init=function(){(n=t("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>")).appendTo(e.container),n.focus()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(t){n.val((r=t[e.column.field])?"yes":"no"),n.select()},this.serializeValue=function(){return"yes"==n.val()},this.applyValue=function(t,n){t[e.column.field]=n},this.isValueChanged=function(){return n.val()!=r},this.validate=function(){return{valid:!0,msg:null}},this.init()},Checkbox:function(e){var n,r;this.init=function(){(n=t("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>")).appendTo(e.container),n.focus()},this.destroy=function(){n.remove()},this.focus=function(){n.focus()},this.loadValue=function(t){(r=!!t[e.column.field])?n.prop("checked",!0):n.prop("checked",!1)},this.preClick=function(){n.prop("checked",!n.prop("checked"))},this.serializeValue=function(){return n.prop("checked")},this.applyValue=function(t,n){t[e.column.field]=n},this.isValueChanged=function(){return this.serializeValue()!==r},this.validate=function(){return{valid:!0,msg:null}},this.init()},PercentComplete:function(e){var n,r,i;this.init=function(){(n=t("<INPUT type=text class='editor-percentcomplete' />")).width(t(e.container).innerWidth()-25),n.appendTo(e.container),(r=t("<div class='editor-percentcomplete-picker' />").appendTo(e.container)).append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>"),r.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>"),n.focus().select(),r.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:i,slide:function(t,e){n.val(e.value)}}),r.find(".editor-percentcomplete-buttons button").on("click",function(e){n.val(t(this).attr("val")),r.find(".editor-percentcomplete-slider").slider("value",t(this).attr("val"))})},this.destroy=function(){n.remove(),r.remove()},this.focus=function(){n.focus()},this.loadValue=function(t){n.val(i=t[e.column.field]),n.select()},this.serializeValue=function(){return parseInt(n.val(),10)||0},this.applyValue=function(t,n){t[e.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==i)&&(parseInt(n.val(),10)||0)!=i},this.validate=function(){return isNaN(parseInt(n.val(),10))?{valid:!1,msg:"Please enter a valid positive number"}:{valid:!0,msg:null}},this.init()},LongText:function(e){var n,r,i,o=this;this.init=function(){var i=t("body");e.grid.getOptions().editorCellNavOnLRKeys;r=t("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(i),n=t("<TEXTAREA hidefocus rows=5 style='background:white;width:250px;height:80px;border:0;outline:0'>").appendTo(r),t("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(r),r.find("button:first").on("click",this.save),r.find("button:last").on("click",this.cancel),n.on("keydown",this.handleKeyDown),o.position(e.position),n.focus().select()},this.handleKeyDown=function(n){if(n.which==t.ui.keyCode.ENTER&&n.ctrlKey)o.save();else if(n.which==t.ui.keyCode.ESCAPE)n.preventDefault(),o.cancel();else if(n.which==t.ui.keyCode.TAB&&n.shiftKey)n.preventDefault(),e.grid.navigatePrev();else if(n.which==t.ui.keyCode.TAB)n.preventDefault(),e.grid.navigateNext();else if((n.which==t.ui.keyCode.LEFT||n.which==t.ui.keyCode.RIGHT)&&e.grid.getOptions().editorCellNavOnLRKeys){var r=this.selectionStart,i=this.value.length;n.keyCode===t.ui.keyCode.LEFT&&0===r&&e.grid.navigatePrev(),n.keyCode===t.ui.keyCode.RIGHT&&r>=i-1&&e.grid.navigateNext()}},this.save=function(){e.commitChanges()},this.cancel=function(){n.val(i),e.cancelChanges()},this.hide=function(){r.hide()},this.show=function(){r.show()},this.position=function(t){r.css("top",t.top-5).css("left",t.left-5)},this.destroy=function(){r.remove()},this.focus=function(){n.focus()},this.loadValue=function(t){n.val(i=t[e.column.field]),n.select()},this.serializeValue=function(){return n.val()},this.applyValue=function(t,n){t[e.column.field]=n},this.isValueChanged=function(){return!(""==n.val()&&null==i)&&n.val()!=i},this.validate=function(){if(e.column.validator){var t=e.column.validator(n.val());if(!t.valid)return t}return{valid:!0,msg:null}},this.init()}}}}),e.DefaultDecimalPlaces=null,e.AllowEmptyValue=!1}(jQuery)},function(t,e){!function(t){t.extend(!0,window,{Slick:{CheckboxSelectColumn:function(e){var n,r=new Slick.EventHandler,i={},o=!1,a=t.extend(!0,{},{columnId:"_checkbox_selector",cssClass:null,hideSelectAllCheckbox:!1,toolTip:"Select/Deselect All",width:30},e);function s(t,e){var r,s,l=p(),c=n.getSelectedRows(),u={};for(s=0;s<c.length;s++)r=c[s],u[r]=!0,u[r]!==i[r]&&(n.invalidateRow(r),delete i[r]);for(s in i)n.invalidateRow(s);i=u,n.render(),o=c.length&&c.length==n.getDataLength(),a.hideSelectAllCheckbox||(o?n.updateColumnHeader(a.columnId,"<input id='header-selector"+l+"' type='checkbox' checked='checked'><label for='header-selector"+l+"'></label>",a.toolTip):n.updateColumnHeader(a.columnId,"<input id='header-selector"+l+"' type='checkbox'><label for='header-selector"+l+"'></label>",a.toolTip))}function l(t,e){32==t.which&&n.getColumns()[e.cell].id===a.columnId&&(n.getEditorLock().isActive()&&!n.getEditorLock().commitCurrentEdit()||u(e.row),t.preventDefault(),t.stopImmediatePropagation())}function c(e,r){if(n.getColumns()[r.cell].id===a.columnId&&t(e.target).is(":checkbox")){if(n.getEditorLock().isActive()&&!n.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();u(r.row),e.stopPropagation(),e.stopImmediatePropagation()}}function u(e){i[e]?n.setSelectedRows(t.grep(n.getSelectedRows(),function(t){return t!=e})):n.setSelectedRows(n.getSelectedRows().concat(e)),n.setActiveCell(e,function(){if(null===f){f=0;for(var t=n.getColumns(),e=0;e<t.length;e++)t[e].id==a.columnId&&(f=e)}return f}()),n.focus()}function d(e,r){if(r.column.id==a.columnId&&t(e.target).is(":checkbox")){if(n.getEditorLock().isActive()&&!n.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();if(t(e.target).is(":checked")){for(var i=[],o=0;o<n.getDataLength();o++)i.push(o);n.setSelectedRows(i)}else n.setSelectedRows([]);e.stopPropagation(),e.stopImmediatePropagation()}}var f=null;function p(){return Math.round(1e7*Math.random())}function h(t,e,n,r,o){var a=p()+t;return o?i[t]?"<input id='selector"+a+"' type='checkbox' checked='checked'><label for='selector"+a+"'></label>":"<input id='selector"+a+"' type='checkbox'><label for='selector"+a+"'></label>":null}t.extend(this,{init:function(t){n=t,r.subscribe(n.onSelectedRowsChanged,s).subscribe(n.onClick,c).subscribe(n.onHeaderClick,d).subscribe(n.onKeyDown,l)},destroy:function(){r.unsubscribeAll()},deSelectRows:function(e){var r,o=e.length,a=[];for(r=0;r<o;r++)i[e[r]]&&(a[a.length]=e[r]);n.setSelectedRows(t.grep(n.getSelectedRows(),function(t){return a.indexOf(t)<0}))},selectRows:function(t){var e,r=t.length,o=[];for(e=0;e<r;e++)i[t[e]]||(o[o.length]=t[e]);n.setSelectedRows(n.getSelectedRows().concat(o))},getColumnDefinition:function(){var t=p();return{id:a.columnId,name:a.hideSelectAllCheckbox?"":"<input id='header-selector"+t+"' type='checkbox'><label for='header-selector"+t+"'></label>",toolTip:a.toolTip,field:"sel",width:a.width,resizable:!1,sortable:!1,cssClass:a.cssClass,hideSelectAllCheckbox:a.hideSelectAllCheckbox,formatter:h}},getOptions:function(t){return a},setOptions:function(e){if((a=t.extend(!0,{},a,e)).hideSelectAllCheckbox)n.updateColumnHeader(a.columnId,"","");else{var r=p();o?n.updateColumnHeader(a.columnId,"<input id='header-selector"+r+"' type='checkbox' checked='checked'><label for='header-selector"+r+"'></label>",a.toolTip):n.updateColumnHeader(a.columnId,"<input id='header-selector"+r+"' type='checkbox'><label for='header-selector"+r+"'></label>",a.toolTip)}}})}}})}(jQuery)},function(t,e){!function(t){t.extend(!0,window,{Slick:{AutoTooltips:function(e){var n,r={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:null};function i(r){var i=n.getCellFromEvent(r);if(i){var o,a=t(n.getCellNode(i.row,i.cell));a.innerWidth()<a[0].scrollWidth?(o=t.trim(a.text()),e.maxToolTipLength&&o.length>e.maxToolTipLength&&(o=o.substr(0,e.maxToolTipLength-3)+"...")):o="",a.attr("title",o)}}function o(e,n){var r=n.column,i=t(e.target).closest(".slick-header-column");r&&!r.toolTip&&i.attr("title",i.innerWidth()<i[0].scrollWidth?r.name:"")}t.extend(this,{init:function(a){e=t.extend(!0,{},r,e),n=a,e.enableForCells&&n.onMouseEnter.subscribe(i);e.enableForHeaderCells&&n.onHeaderMouseEnter.subscribe(o)},destroy:function(){e.enableForCells&&n.onMouseEnter.unsubscribe(i);e.enableForHeaderCells&&n.onHeaderMouseEnter.unsubscribe(o)}})}}})}(jQuery)},function(t,e){!function(t){t.extend(!0,window,{Slick:{CellRangeDecorator:function(e,n){var r;n=t.extend(!0,{},{selectionCssClass:"slick-range-decorator",selectionCss:{zIndex:"9999",border:"2px dashed red"},offset:{top:-1,left:-1,height:-2,width:-2}},n),t.extend(this,{show:function(i){r||(r=t("<div></div>",{css:n.selectionCss}).addClass(n.selectionCssClass).css("position","absolute").appendTo(e.getCanvasNode()));var o=e.getCellNodeBox(i.fromRow,i.fromCell),a=e.getCellNodeBox(i.toRow,i.toCell);return r.css({top:o.top+n.offset.top,left:o.left+n.offset.left,height:a.bottom-o.top+n.offset.height,width:a.right-o.left+n.offset.width}),r},hide:function(){r&&(r.remove(),r=null)}})}}})}(jQuery)},function(t,e){!function(t){t.extend(!0,window,{Slick:{CellRangeSelector:function(e){var n,r,i,o,a,s=this,l=new Slick.EventHandler,c={selectionCss:{border:"2px dashed blue"}};function u(t,e){t.stopImmediatePropagation()}function d(e,l){var c=n.getCellFromEvent(e);if(!1!==s.onBeforeCellRangeSelected.notify(c)&&n.canCellBeSelected(c.row,c.cell)&&(o=!0,e.stopImmediatePropagation()),o){n.focus();var u=n.getCellFromPoint(l.startX-t(i).offset().left,l.startY-t(i).offset().top);return l.range={start:u,end:{}},r=l.range,a.show(new Slick.Range(u.row,u.cell))}}function f(e,s){if(o){e.stopImmediatePropagation();var l=n.getCellFromPoint(e.pageX-t(i).offset().left,e.pageY-t(i).offset().top);n.canCellBeSelected(l.row,l.cell)&&(s.range.end=l,r=s.range,a.show(new Slick.Range(s.range.start.row,s.range.start.cell,l.row,l.cell)))}}function p(t,e){o&&(o=!1,t.stopImmediatePropagation(),a.hide(),s.onCellRangeSelected.notify({range:new Slick.Range(e.range.start.row,e.range.start.cell,e.range.end.row,e.range.end.cell)}))}t.extend(this,{init:function(r){e=t.extend(!0,{},c,e),a=e.cellDecorator||new Slick.CellRangeDecorator(r,e),i=(n=r).getCanvasNode(),l.subscribe(n.onDragInit,u).subscribe(n.onDragStart,d).subscribe(n.onDrag,f).subscribe(n.onDragEnd,p)},destroy:function(){l.unsubscribeAll()},getCellDecorator:function(){return a},getCurrentRange:function(){return r},onBeforeCellRangeSelected:new Slick.Event,onCellRangeSelected:new Slick.Event})}}})}(jQuery)},function(t,e){!function(t){t.extend(!0,window,{Slick:{CellCopyManager:function(){var e,n,r=this;function i(i,a){var s;e.getEditorLock().isActive()||(i.which==t.ui.keyCode.ESCAPE&&n&&(i.preventDefault(),o(),r.onCopyCancelled.notify({ranges:n}),n=null),67==i.which&&(i.ctrlKey||i.metaKey)&&0!=(s=e.getSelectionModel().getSelectedRanges()).length&&(i.preventDefault(),n=s,function(t){for(var n=e.getColumns(),r={},i=0;i<t.length;i++)for(var o=t[i].fromRow;o<=t[i].toRow;o++){r[o]={};for(var a=t[i].fromCell;a<=t[i].toCell;a++)r[o][n[a].id]="copied"}e.setCellCssStyles("copy-manager",r)}(s),r.onCopyCells.notify({ranges:s})),86==i.which&&(i.ctrlKey||i.metaKey)&&n&&(i.preventDefault(),s=e.getSelectionModel().getSelectedRanges(),r.onPasteCells.notify({from:n,to:s}),e.getOptions().preserveCopiedSelectionOnPaste||(o(),n=null)))}function o(){e.removeCellCssStyles("copy-manager")}t.extend(this,{init:function(t){(e=t).onKeyDown.subscribe(i)},destroy:function(){e.onKeyDown.unsubscribe(i)},clearCopySelection:o,onCopyCells:new Slick.Event,onCopyCancelled:new Slick.Event,onPasteCells:new Slick.Event})}}})}(jQuery)},function(t,e){!function(t){t.extend(!0,window,{Slick:{CellSelectionModel:function(e){var n,r,i,o=[],a=this;r=void 0===e||void 0===e.cellRangeSelector?new Slick.CellRangeSelector({selectionCss:{border:"2px solid black"}}):e.cellRangeSelector;var s={selectActiveCell:!0};function l(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];n.canCellBeSelected(i.fromRow,i.fromCell)&&n.canCellBeSelected(i.toRow,i.toCell)&&e.push(i)}return e}function c(t){if(o&&0!==o.length||t&&0!==t.length){var e=!function(t,e){var n=t.length!==e.length;if(!n)for(var r=0;r<t.length;r++)if(t[r].fromCell!==e[r].fromCell||t[r].fromRow!==e[r].fromRow||t[r].toCell!==e[r].toCell||t[r].toRow!==e[r].toRow){n=!0;break}return!n}(o,t);o=l(t),e&&a.onSelectedRangesChanged.notify(o)}}function u(){return o}function d(t,e){if(n.getEditorLock().isActive())return t.stopPropagation(),!1}function f(t,e){n.setActiveCell(e.range.fromRow,e.range.fromCell,!1,!1,!0),c([e.range])}function p(t,e){i.selectActiveCell&&null!=e.row&&null!=e.cell?c([new Slick.Range(e.row,e.cell)]):i.selectActiveCell||c([])}function h(t){var e,r,i=n.getActiveCell(),o=t.ctrlKey||t.metaKey;if(i&&t.shiftKey&&!o&&!t.altKey&&(37==t.which||39==t.which||38==t.which||40==t.which)){(e=u()).length||e.push(new Slick.Range(i.row,i.cell)),(r=e.pop()).contains(i.row,i.cell)||(r=new Slick.Range(i.row,i.cell));var a=r.toRow-r.fromRow,s=r.toCell-r.fromCell,d=i.row==r.fromRow?1:-1,f=i.cell==r.fromCell?1:-1;37==t.which?s-=f:39==t.which?s+=f:38==t.which?a-=d:40==t.which&&(a+=d);var p=new Slick.Range(i.row,i.cell,i.row+d*a,i.cell+f*s);if(l([p]).length){e.push(p);var h=d>0?p.toRow:p.fromRow,g=f>0?p.toCell:p.fromCell;n.scrollRowIntoView(h),n.scrollCellIntoView(h,g)}else e.push(r);c(e),t.preventDefault(),t.stopPropagation()}}t.extend(this,{getSelectedRanges:u,setSelectedRanges:c,init:function(o){i=t.extend(!0,{},s,e),(n=o).getCanvasNode(),n.onActiveCellChanged.subscribe(p),n.onKeyDown.subscribe(h),o.registerPlugin(r),r.onCellRangeSelected.subscribe(f),r.onBeforeCellRangeSelected.subscribe(d)},destroy:function(){n.onActiveCellChanged.unsubscribe(p),n.onKeyDown.unsubscribe(h),r.onCellRangeSelected.unsubscribe(f),r.onBeforeCellRangeSelected.unsubscribe(d),n.unregisterPlugin(r)},onSelectedRangesChanged:new Slick.Event})}}})}(jQuery)},function(t,e){!function(t){t.extend(!0,window,{Slick:{RowSelectionModel:function(e){var n,r,i,o=[],a=this,s=new Slick.EventHandler,l={selectActiveRow:!0};function c(t){return function(){r||(r=!0,t.apply(this,arguments),r=!1)}}function u(t){for(var e=[],n=0;n<t.length;n++)for(var r=t[n].fromRow;r<=t[n].toRow;r++)e.push(r);return e}function d(t){for(var e=[],r=n.getColumns().length-1,i=0;i<t.length;i++)e.push(new Slick.Range(t[i],0,t[i],r));return e}function f(){return u(o)}function p(t){(o&&0!==o.length||t&&0!==t.length)&&(o=t,a.onSelectedRangesChanged.notify(o))}function h(t,e){i.selectActiveRow&&null!=e.row&&p([new Slick.Range(e.row,0,e.row,n.getColumns().length-1)])}function g(t){var e=n.getActiveCell();if(n.getOptions().multiSelect&&e&&t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&(t.which==Slick.keyCode.UP||t.which==Slick.keyCode.DOWN)){var r=f();r.sort(function(t,e){return t-e}),r.length||(r=[e.row]);var i,o=r[0],a=r[r.length-1];if((i=t.which==Slick.keyCode.DOWN?e.row<a||o==a?++a:++o:e.row<a?--a:--o)>=0&&i<n.getDataLength()){n.scrollRowIntoView(i);var s=d(function(t,e){var n,r=[];for(n=t;n<=e;n++)r.push(n);for(n=e;n<t;n++)r.push(n);return r}(o,a));p(s)}t.preventDefault(),t.stopPropagation()}}function m(e){var r=n.getCellFromEvent(e);if(!r||!n.canCellBeActive(r.row,r.cell))return!1;if(!n.getOptions().multiSelect||!e.ctrlKey&&!e.shiftKey&&!e.metaKey)return!1;var i=u(o),a=t.inArray(r.row,i);if(-1===a&&(e.ctrlKey||e.metaKey))i.push(r.row),n.setActiveCell(r.row,r.cell);else if(-1!==a&&(e.ctrlKey||e.metaKey))i=t.grep(i,function(t,e){return t!==r.row}),n.setActiveCell(r.row,r.cell);else if(i.length&&e.shiftKey){var s=i.pop(),l=Math.min(r.row,s),c=Math.max(r.row,s);i=[];for(var f=l;f<=c;f++)f!==s&&i.push(f);i.push(s),n.setActiveCell(r.row,r.cell)}var h=d(i);return p(h),e.stopImmediatePropagation(),!0}t.extend(this,{getSelectedRows:f,setSelectedRows:function(t){p(d(t))},getSelectedRanges:function(){return o},setSelectedRanges:p,init:function(r){i=t.extend(!0,{},l,e),n=r,s.subscribe(n.onActiveCellChanged,c(h)),s.subscribe(n.onKeyDown,c(g)),s.subscribe(n.onClick,c(m))},destroy:function(){s.unsubscribeAll()},onSelectedRangesChanged:new Slick.Event})}}})}(jQuery)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(597),o=n(22),a=n(23),s=n(2),l=n(53),c=n(64),u=n(18),d=n(4),f=n(124),p=n(276),h=n(16),g=n(149);n(935),n(2379);var m=n(2380),v=n(2381);r.module("stealth.display-dock",["ccri.angular-utils","ccri.bars","stealth.display"]).namespace().directive("view",["$compile","$rootScope","$timeout","$window","$location","ccri.angular-utils.WidgetDef","ccri.bars.mgr","ccri.bars.Widget","stealth.display.registry",function(t,e,n,y,b,w,_,x,S){return{scope:{},controller:m.DockViewCtrl,link:function(m,C,E){var T=h.StateManager.getInstance();T.getObservable("GoldenLayoutDisplayReducer").subscribe({next:function(t){var e=[],n=[],r=function(t){if(t.content&&o(t.content,function(t){r(t)}),t.id){var e=a(S.views,function(e){return e.thing.id===t.id});t.componentState={view:e.thing},n.push(e.thing)}};m.startupLayout&&t.config&&(e=JSON.parse(t.config),r(e),m.layout.config.content=e.content,m.layout.init(),o(S.views,function(t){t.thing.active=!1}),o(n,function(t){t.active=!0,m.enableDestructSequence(m.layout.root.getItemsById(t.id)[0])}),m.toggleSingleView(S.listActive().length<2),m.select(n[0]),m.startupLayout=!1)}}),m.startupLayout=!0,m.showOnlyMode=!1,m.layout=new i({settings:{hasHeaders:!0,selectionEnabled:!0,showPopoutIcon:!1,showMaximiseIcon:l(E,"enableMaximize")&&"false"!==s(E,"enableMaximize","").toLowerCase(),showCloseIcon:!1},labels:{maximise:"maximize",minimise:"minimize"},content:[{type:"row",isClosable:!1,content:[{type:"stack",content:[]}]}]},C),m.layout.registerComponent("widget-compiler",function(n,i){var o,a=r.element(n.getElement()),s=r.element('<ccri-angular-utils-widget-compiler widget-def="view.widget"></ccri-angular-utils-widget-compiler>'),l=e.$new();l.view=i.view;var c=l.$watch(o,function(){var e=t(o)(l);a.append(e),c()});o=r.element(s)}),e.$on("SaveState",function(){var t=JSON.stringify(m.layout.toConfig(),function(t,e){return e&&e.id&&(e.componentState=null),e});m.startupLayout=!1,T.dispatch({type:v.TypeKeys.SAVE_GLD,config:t})}),m.layout.on("selectionChanged",function(t){S.select(t.header.activeContentItem.config.id)}),m.layout.on("tabCreated",function(t){var e=t.contentItem.parent;e.element.off("click.anywhereToSelect"),e.element.on("click.anywhereToSelect",function(){e.select()})}),m.layout.on("stackCreated",function(t){t.on("activeContentItemChanged",function(e){t.select(),S.select(e.config.id)})}),m.layout.on("itemCreated",function(t){t.on("resize",function(){e.$emit("GLResize",t)})}),s(b.search(),"state")?T.on("state.loaded",function(t){null==t.state.get("GoldenLayoutDisplayReducer")&&(m.layout.init(),A(S.views.length))}):m.layout.init();var M=[new x({widget:new w({tag:"ccri-bars-separator"})}),new x({widget:new w({tag:"stealth-display-list-menu",scope:m,attrs:'views="views" set-active="setActive"'})})];o(M,function(t){_.insert("bottom",t,g.Position.Last,"900")}),m.toggleSingleView=function(t){C.toggleClass("single-view",t),m.layout.updateSize()},S.on("display.active",function(t){m.showOnlyMode||e.$applyAsync(function(){m.toggleSingleView(S.listActive().length<2)})}),S.on("show.only",function(t){m.showOnlyMode=!0,m.setActive(t.new),o(m.layout.root.getItemsById(t.new.id),function(t){t.parent.isMaximised||t.parent.toggleMaximise()}),m.toggleSingleView(!0)}),S.on("show.only.revert",function(t){var e=f(t.old,{id:t.new.id});m.showOnlyMode=!1,o(m.layout.root.getItemsById(t.new.id),function(t){t.parent.isMaximised&&t.parent.toggleMaximise()}),e||m.setActive(t.new,!1),m.select(t.selected),m.toggleSingleView(S.listActive().length<2)}),m.$watch("views.length",A);var k=p(function(){m.layout.updateSize()},10);function A(t){if(m.layout.root){o(M,function(e){e.hidden=t<2});var e=S.listActive();u(e)&&t>0&&e.push(S.views[0].thing),o(d(S.views,"thing"),function(t){c(d(e,"id"),t.id)&&m.setActive(t)}),n(function(){m.toggleSingleView(S.listActive().length<2)},500)}}r.element(y).on("resize",k),m.$watch(function(){return C.width()},k),m.$watch(function(){return C.height()},k)}}}])},function(t,e,n){var r=n(79);t.exports=function(){return r.Date.now()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(597).__lm.container.ItemContainer.prototype._$setSize=function(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this._contentElement.outerWidth(t).outerHeight(e),this.emit("resize"))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(23),o=n(322),a=n(29),s=n(50),l=n(18),c=n(64),u=n(124),d=function(){function t(t,e){var n=this;this.$scope=t,this.registry=e,this._defaultActivateView=function(t){var e=n.$scope.layout.root.getItemsByType("stack");if(1===e.length&&e[0].contentItems.length>0){var r=n._createStack(t);n.$scope.layout.root.contentItems[0].addChild(r)}else o(e).addChild(t)},this._customActivateView=function(t,e){var i=n.$scope.layout.root.getItemsByType("stack"),o=function(t){return u(e.doNotCoupleWith,function(e){return t.hasId(e)})};if("stack"===e.itemType){var d=n._createStack(t);n.$scope.layout.root.contentItems[0].addChild(d)}else if("column"===e.itemType||"row"===e.itemType){var f=void 0;for(f=i.length-1;f>=0;f--)if(l(e.doNotCoupleWith)||l(i[f].getItemsByFilter(o))){var p=n.$scope.layout.createContentItem({type:e.itemType,content:[]});i[f].parent.replaceChild(i[f],p);var h=n._createStack(t);p.addChild(i[f]),p.addChild(h),f=0}else 0===f&&n._defaultActivateView(t)}else n._defaultActivateView(t);if(e.defaultSize&&t.container.setSize(s(e.defaultSize.width)?e.defaultSize.width:t.container.width,s(e.defaultSize.height)?e.defaultSize.height:t.container.height),e.alsoActivate){var g=a(n.registry.views,function(t){return c(e.alsoActivate,t.thing.id)});r(g,function(t){t.thing.active||n.registry.emit("display.active",{id:t.thing.id,active:!0,type:t.thing.type})})}},this._createStack=function(t){var e=n.$scope.layout.createContentItem({type:"stack",content:[]});return t.container.on("tab",function(e){e.element.on("click",function(){t.parent.select()})}),e.addChild(t),e},t.views=e.views,t.setActive=function(i,o){if(void 0===o&&(o=!0),o){if(0===t.layout.root.getItemsById(i.id).length){var a=t.layout.createContentItem({id:i.id,type:"component",componentName:"widget-compiler",componentState:{view:i},title:i.name});t.enableDestructSequence(a),i.activateOptions?n._customActivateView(a,i.activateOptions):n._defaultActivateView(a),e.activate(i.id)}t.select(i)}else!o&&e.listActive().length>1&&(r(t.layout.root.getItemsById(i.id),function(t){t.remove()}),e.deactivate(i.id),e.selected.id===i.id&&t.select(e.listActive()[0]))},t.select=function(n){e.selected&&n.id===e.selected.id||(r(t.layout.root.getItemsById(n.id),function(e){e.parent.select(),e.parent.setActiveContentItem(e),e.parent.isMaximised||r(t.layout.root.getItemsByType("stack"),function(t){t.isMaximised&&t.toggleMaximise()})}),e.select(n.id))},t.enableDestructSequence=function(n){n.on("itemDestroyed",function(){e.deactivate(n.config.id),e.selected.id===n.config.id&&t.select(e.listActive()[0])})},e.on("display.active",function(n){var r=i(e.views,["thing.id",n.id]);r&&(n.active&&!r.thing.active?t.setActive(r.thing,!0):n.active&&r.thing.active?e.select(r.thing.id):!n.active&&r.thing.active&&t.setActive(r.thing,!1))}),e.on("display.selected",function(n){var r=i(e.views,["thing.id",n.id]);r&&t.select(r.thing)})}return t.$inject=["$scope","stealth.display.registry"],t}();e.DockViewCtrl=d},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(16),a=n(5);!function(t){t.SAVE_GLD="SAVE_GOLDEN_LAYOUT_DISPLAY"}(i=e.TypeKeys||(e.TypeKeys={}));var s=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(a.Record({config:null},"GLDRecord"));function l(t,e){switch(void 0===t&&(t=new s),e.type){case i.SAVE_GLD:return t.with({config:e.config});default:return t}}e.GoldenLayoutDisplayRecord=s,e.GoldenLayoutDisplayReducer=l;var c=o.StateManager.getInstance();c.addReducers({GoldenLayoutDisplayReducer:l}),c.addRecord(s)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(149),o=n(985),a=n(15),s=n(2392),l=n(2393),c=n(2394),u=n(2396),d="fvey"===o.storage.local.getItem("setCustomModeOnStartup")||"fvey"===o.storage.session.getItem("customMode");d&&(l.coreHttpToggle(!0),o.storage.local.removeItem("setCustomModeOnStartup")),r.module("stealth.fvey-mode",["ccri.angular-utils","ccri.bars"]).namespace().service("FveyMode",s.FveyMode).directive("toggleBtn",c.factory).run(["$uibModal","$rootScope","ccri.angular-utils.WidgetDef","ccri.bars.mgr","ccri.bars.Widget","stealth.fvey-mode.FveyMode",function(t,e,n,r,o,s){d&&s.startFveyMode();var l=e.$new();l.isToggledOn=d,l.toggle=function(e){e||t.open({template:u,controller:function(){this.warning=a.config.get("app.customModes.fvey.warning","")},controllerAs:"$ctrl",backdrop:"static",backdropClass:"wizardMask"}).result.then(function(){s.openFveyModeApp()})},r.insert("top",new o({widget:new n({tag:"stealth-fvey-mode-toggle-btn",scope:l})}),i.Position[i.Position.Last],"700")}])},,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(985),i=n(15),o=function(){function t(t,e,n){this.$http=t,this.$window=e,this.toastr=n}return t.prototype.startFveyMode=function(){var t=i.config.get("app.customModes.fvey.authorization"),e=i.config.get("app.customModes.fvey.header");this.$http.defaults.headers.common[e]=t,this.toastr.warning(null,"FVEY mode on",{timeOut:0,extendedTimeOut:0}),r.storage.session.setItem("customMode","fvey")},t.prototype.openFveyModeApp=function(){r.storage.local.setItem("setCustomModeOnStartup","fvey"),this.$window.open(i.config.get("app.url"))},t.$inject=["$http","$window","toastr"],t}();e.FveyMode=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(54),i=n(15);e.coreHttpToggle=function(t){t?r.http.setDefaults("headers.common."+i.config.get("app.customModes.fvey.header"),i.config.get("app.customModes.fvey.authorization")):r.http.setDefaults("headers.common."+i.config.get("app.customModes.fvey.header"),void 0)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2395);e.factory=function(){return{restrict:"E",template:r}}},function(t,e){t.exports='<div class="bar-btn bar-color2 bar-text-btn"\n    ng-click="toggle(isToggledOn)"\n    ng-class="isToggledOn ? \'bar-text-btn-on\' : \'toggle-text-btn\'"\n    uib-tooltip="{{isToggledOn ? \'FVEY mode locked\' : \'Activate FVEY\'}}" tooltip-class="nowrap"\n    tooltip-placement="bottom-right" tooltip-animation="true"\n    tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n    <div>FVEY</div>\n</div>\n'},function(t,e){t.exports='<div style="width: 100%; padding: 10px; display: flex; flex-direction: column; color: #b5b5b5; background-color: #333333">\n    <div style="margin-top: 0; font-size: 18px;">\n        <i class="fa fa-warning"></i>\n        <span>Warning</span>\n    </div>\n    <div style="margin-top: 5px; flex: 1 1 0%;">\n        <span ng-bind-html="$ctrl.warning"></span>\n    </div>\n    <div style="flex: 1 1 0%; margin-top: 5px; display: flex; justify-content: flex-end">\n        <span class="btn btn-xs btn-default darkStep" ng-click="$dismiss(\'Cancel\')">\n            <i class="fa fa-close text-danger"></i>\n            Cancel\n        </span>\n        <span class="btn btn-xs btn-default darkStep" ng-click="$close(\'Continue\')">\n            Continue\n            <i class="fa fa-check text-success"></i>\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2398),o=n(2403),a=n(2405);r.module("stealth.timelapse",[i.default,o.default,a.default])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2399),o=n(2401);e.default=r.module("stealth.timelapse.category",["ccri.angular-utils","ccri.popup","stealth.query-edit","stealth.timelapse.edit","stealth.timelapse.stores","stealth.timelapse.wizard"]).directive("stTimelapseCategory",i.factory).directive("stTimelapseStoreDisplay",o.factory).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(50),i=n(129),o=n(2400);function a(t,e,n,a,s,l,c,u){var d="stealth.timelapse.category: ";return t.debug(d+"directive defined"),{template:o,scope:{},controller:["$scope",function(o){var f=e(function(t){t()}),p=new FileReader,h=o.$on("$destroy",function(){h(),h=null,f=p=null,o.historicalLayer=o.readHistoricalBinFile=o.launchHistoricalQueryWizard=o.toggleSlideHistorical=o=null});o.historicalLayer=a.getHistoricalLayer(),o.readHistoricalBinFile=function(a){var u=new c(a.name);o.historicalLayer.addStore(u),f=f.then(function(){return e(function(e){p.onload=function(){n(function(){var n=p.result;if(!r(c.determineRecordSize(n))){var d=i(o.historicalLayer.getStores(),u);if(!(d>-1))return void e();o.historicalLayer.removeStore(u),u=new l(a.name),o.historicalLayer.addStore(u,d)}n.byteLength>0&&u.setArrayBuffer(n,null).then(function(){u.getViewState().isError||o.historicalLayer.storeFinished(u)}).catch(function(e){var n=e;"Unknown error"===e&&(n="Unable to process file"),t.error(n),s.error(n,"Error: "+u.getName())}),e()})},p.readAsArrayBuffer(a)})}).then(function(){return e(function(t){p.onload=t;var e=new Uint8Array([]);p.readAsArrayBuffer(new Blob([e.buffer]))})})},o.launchHistoricalQueryWizard=function(){u.launchWizard()},o.toggleSlideHistorical=function(){t.debug(d+"toggleSlideHistorical"),o.historicalLayer.styleDirectiveScope.toggleVisibility()}}]}}a.$inject=["$log","$q","$timeout","tlLayerManager","toastr","stealth.timelapse.stores.ArrowStore","stealth.timelapse.stores.BinStore","stealth.timelapse.wizard.TimelapseWizard"],e.factory=a},function(t,e){t.exports='<div>\n    <div class="categoryCell">\n        <i class="fa fa-fw clickable"\n           ng-class="historicalLayer.styleDirectiveScope.layerState.visible ? \'fa-check-square-o\' : \'fa-square-o\'"\n           ng-click="toggleSlideHistorical()"\n        ></i>\n    </div>\n    <div class="categoryCell"><b>Time-lapse</b></div>\n    <div class="categoryCell">\n        <span class="btn btn-default fa-stack toggleButton"\n              ng-click="launchHistoricalQueryWizard()"\n              uib-tooltip="Add layer" tooltip-class="nowrap"\n              tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n              tooltip-trigger="mouseenter">\n            <i class="fa fa-fw fa-plus fa-stack-1x text-primary"></i>\n        </span>\n    </div>\n    <div class="categoryCell">\n        <st-upload-file id="binFileUpload1"\n                        process-file="readHistoricalBinFile(file)"\n                        tooltip-text="Load Time-lapse file">\n        </st-upload-file>\n    </div>\n    <div class="categoryGrouping">\n        <div ng-repeat="store in historicalLayer.getStores()"\n             class="buf-sm-mt"\n             ng-class="{\'ng-hide\': !historicalLayer.styleDirectiveScope.layerState.visible}">\n             <st-timelapse-store-display store="store"></st-timelapse-store-display>\n         </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(129),o=n(2),a=n(18),s=n(34),l=n(14),c=n(4),u=n(30),d=n(228),f=n(113),p=n(2402);function h(t,e,n,h,g,m){return{template:p,scope:{store:"="},controller:["$scope",function(p){var v,y,b,w=p.$on("$destroy",function(){w(),w=null,_=x=v=S=C=b=y=null,p.editorInitializer=p.tlQueryEditMgr=p.highlightLayer=p.getMenuOptions=p=null}),_=e.getHistoricalLayer(),x=r.element(".primaryDisplay > ccri-popup-container"),S=[],C=function(e){if(e||(e="bar"),p.store.chartPopupId)g.focusPopup(p.store.chartPopupId);else{l(v)&&(v=x.data("ccri.popup.containerId"));var n=g.getViewportDim(v);n[1]=0;var r=t.$new();r.store=p.store;var i=new h({tag:"stealth-timelapse-chart",scope:r,attrs:'store="store" type="'+e+'"'});p.store.chartPopupId=g.displayPopup(v,p.store.getName(),"tl-chart","bar"===e?"fa-bar-chart":"fa-th",i,{limitStartSize:"bar"===e,contentWidth:"bar"===e?Math.max(400,n[0]-400):658,contentHeight:"bar"===e?200:643,offsets:n,positioning:f.Popup.Positioning.TopRight,onClose:function(){delete r.store.chartPopupId,r.$destroy()}})}};s(p.store.getQuery)&&s(p.store.getQueryDetails)&&(b=p.store.getQuery(),p.queryDetails=u(p.store.getQueryDetails(),{customCqlParams:m.getCustomParameters(b),timeBounds:{maxTimeDuration:o(b,"timeData.maxTimeRangeMillis")}}),p.highlightLayer=_.getHighlightLayer(),p.saveEdits=d(m.saveEdits,p.store),p.editorInitializer=function(t){y=t}),p.getDownloadSize=function(){return Math.round(p.store.getViewState().downloadSize/1048576)},p.getMenuOptions=function(){if(r(S,{label:'<i class="fa fa-fw fa-remove"></i> Remove',onClick:function(){e.removeStore(p.store)}},0),!p.store.getViewState().isError&&p.store.getViewState().isDataReady()){if(p.store.exportBin){var t=p.store.getExportFormats();a(t)||r(S,{label:'<i class="fa fa-fw fa-save"></i> Save as',menuOptions:c(t,function(t,e){return{label:e,onClick:function(){p.store.exportBin(t),t&&"bin"!==t||n.warning("Binary files will only contain id, lat, lon, and time.")}}})},2)}"arrow"!==p.store.type||a(p.store.dataset().dicts)||(r(S,{label:'<i class="fa fa-fw fa-bar-chart"></i> Chart',onClick:function(){C("bar")}},0),r(S,{label:'<i class="fa fa-fw fa-th"></i> 2D Histogram',onClick:function(){C("twodhistogram")}},0))}return l(b)||(m.detailedEditEnabled()&&r(S,{label:'<i class="fa fa-fw fa-edit"></i> '+(m.inlineEditEnabled()?"Edit Detailed":"Edit"),onClick:function(){y.setInlineEdit(!1),m.beginDetailedEdit(p.store)}},0),m.inlineEditEnabled()&&r(S,{label:'<i class="fa fa-fw fa-edit"></i> Edit Inline',onClick:function(){p.store.isExpanded=!0,y.setInlineEdit(!0)}},0)),S;function r(t,e,n){i(t,{label:e.label})<0&&t.splice(n,0,e)}}}]}}h.$inject=["$rootScope","tlLayerManager","toastr","ccri.angular-utils.WidgetDef","ccri.popup.manager","stealth.timelapse.edit.manager"],e.factory=h},function(t,e){t.exports='<div class="flex-row menu-triggerContainer"\n    ng-class="{\'categoryIndent\': !store.getQueryDetails}">\n    <div class="clickable" ng-class="{\'ng-hide\': !store.getQueryDetails}"\n        ng-click="store.isExpanded = !store.isExpanded">\n        <i class="fa fa-fw"\n            ng-class="store.isExpanded ? \'fa-caret-down\' : \'fa-caret-right\'">\n        </i>\n    </div>\n    <div ng-if="store.getViewState().isDataPending() && !store.getViewState().isError && !store.getViewState().isDownloadActive"\n         style="margin:0 1px"\n    >\n        <i class="fa fa-fw fa-spin fa-circle-o-notch"></i>\n    </div>\n    <div ng-if="store.getViewState().isDownloadActive && !store.getViewState().isError" style="margin:0 1px;">\n        <i class="fa fa-fw fa-download download-button-breathe"></i>\n    </div>\n\n    <div ng-if="store.getViewState().isError" style="margin:0 1px">\n        <i class="fa fa-fw fa-warning text-danger"\n            uib-tooltip="{{store.getViewState().errorMsg}}" tooltip-class="nowrap errorTooltip"\n            tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n            tooltip-trigger="mouseenter">\n       </i>\n    </div>\n\n    <st-toggle-map-layer\n        ng-if="store.getViewState().isDataReady() && !store.getViewState().isError"\n        visible="store.getViewState().toggledOn"\n        toggle="store.toggleVisibility()"\n    ></st-toggle-map-layer>\n\n    <div ng-if="!store.getViewState().isDataReady() && !store.getViewState().isError"\n         class="flex-1 text-secondary ellipsis"\n         style="padding-left: 5px"\n    >\n        {{::store.getName()}}\n    </div>\n    <div ng-if="store.getViewState().isDownloadActive && !store.getViewState().isError"\n         class="text-secondary st-tl-store-download-progress"\n    >\n        {{getDownloadSize()}} MB\n    </div>\n\n    <div ng-if="store.getViewState().isDataReady() || store.getViewState().isError" class="flex-1">\n        <input type="text" class="form-control input-xs flex-1"\n            ng-model="store.name" ng-model-options="{ getterSetter: true }"\n            uib-tooltip="{{store.getNumRecordsString()}} results in {{ getDownloadSize() }} MB" tooltip-class="nowrap"\n            tooltip-enable="store.getNumRecordsString()"\n            tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n            tooltip-trigger="mouseenter" tooltip-append-to-body="true" />\n        <div ng-class="{\'ng-hide\': !store.isExpanded}" style="padding:4px 0px">\n            <st-query-details-display ng-if="store.getQueryDetails"\n                query-details="queryDetails"\n                highlight-layer="highlightLayer"\n                save-edits="saveEdits"\n                register-with="editorInitializer">\n            </st-query-details-display>\n        </div>\n    </div>\n\n    <div class="categoryCell" ng-if="store.getViewState().isDataReady() && !store.getViewState().isError">\n        <span\n            ng-click="store.toggleColorMode()"\n            class="btn btn-default toggleButton buf-sm-ml"\n            ng-style="{\'background\': store.getColorModeStyle()}"\n            ng-disabled="!store.getViewState().isDataReady()"\n            uib-tooltip="Change color mode" tooltip-class="nowrap"\n            tooltip-placement="left" tooltip-animation="false" tooltip-popup-delay="500"\n            tooltip-trigger="mouseenter"\n        ></span>\n    </div>\n    <ccri-angular-utils-menu-trigger class="buf-md-ml buf-sm-mr"\n        menu-options="getMenuOptions()"\n        sub-menu-offset-x="7" sub-menu-offset-y="-5">\n        <i class="fa fa-ellipsis-v fa-lg"></i>\n    </ccri-angular-utils-menu-trigger>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2404);e.default=r.module("stealth.timelapse.edit",["stealth.core.utils","stealth.query-edit","stealth.timelapse.wizard"]).service("stealth.timelapse.edit.manager",i.Manager).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(2),o=n(34),a=n(30),s=function(){function t(t,e,n){var s=this;this.queryService=t,this.queryEditConfig=e,this.timelapseWizard=n,this.detailedEditEnabled=function(){return s.queryEditConfig.getEnabledEditModes("timelapse","detailed")},this.beginDetailedEdit=function(t){var e=t.getQuery(),n={storeThisBelongsTo:t,currentLayer:e.layerData.currentLayer,dtgField:e.params.dtgField,geomField:e.params.geomField,idField:e.params.idField,startDtg:e.params.startDtg,endDtg:e.params.endDtg,generatedFeatures:e.params.generatedFeatures,cql:e.params.cql,cqlParams:e.params.cqlParams,title:t.getName(),classification:e.classification},s=i(r,i(e.params,"queryType"));(s=s&&o(s.launchWizard)?s:r.default).launchWizard(a(n,o(s.additionalOverrides)?s.additionalOverrides(e):{}))},this.inlineEditEnabled=function(){return s.queryEditConfig.getEnabledEditModes("timelapse","inline")},this.getCustomParameters=function(t){var e=i(t,["layerData","currentLayer","Name"]);return s.queryEditConfig.getCustomParameters(e)},this.saveEdits=function(t,e){var n=t.getQuery();n.params.startDtg=i(e,"timeBounds.start"),n.params.endDtg=i(e,"timeBounds.end"),n.params.cql=e.cql,n.params.cqlParams=e.cqlParams,n.params.storeName=t.getName(),n.params.storeThisBelongsTo=t;var a=i(r,i(n.params,"queryType"));(a=a&&o(a.launchQuery)?a:r.default).launchQuery(n)},r={default:{type:"Default",additionalOverrides:function(t){return{preferBin:t.preferBin,arrowFields:t.params.arrowFields}},launchWizard:n.launchWizard,launchQuery:t.launchEditedQuery}}}return t.prototype.registerEditor=function(t){r[t.type]=t},t.$inject=["stealth.timelapse.wizard.queryService","stealth.query-edit.configuration","stealth.timelapse.wizard.TimelapseWizard"],t}();e.Manager=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2406),o=n(2407),a=n(2408),s=n(2418),l=n(2419),c=n(2420),u=n(2421),d=n(2423),f=n(2425),p=n(2427),h=n(2429);e.default=r.module("stealth.timelapse.wizard",["ccri.angular-utils","ccri.area-definition","stealth.timelapse","stealth.timelapse.stores","stealth.wizard"]).service("stealth.timelapse.wizard.queryService",o.QueryService).factory("stealth.timelapse.wizard.Query",a.factory).service("stealth.timelapse.wizard.TimelapseWizard",i.TimelapseWizard).factory("stealth.timelapse.wizard.SourceTimeStep",s.stepFactory).factory("stealth.timelapse.wizard.AreaStep",l.stepFactory).factory("stealth.timelapse.wizard.OptionsStep",c.stepFactory).directive("stTlWizSelectSourceTimeStep",u.factory).directive("stTlWizSelectAreaStep",d.factory).directive("stTlWizSetOptionsStep",f.factory).directive("stTlWizTimerange",p.factory).directive("stTlWizAreaDefinition",h.factory).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o,a,s,l,c=n(15),u=function(){function t(t,e,n,c,u,d){this._TLQuery=t,this._queryService=e,this._sourceTimeStep=n,this._areaStep=c,this._optionsStep=u,this._WizardRunner=d,r=t,i=e,o=n,a=c,s=u,l=d}return t.prototype.launchWizard=function(t){var e={query:new r(t)},n=c.config.get("geoserver.cqlMaxLength",1/0);l.run({steps:[o({}),a({cqlMaxLength:n}),s({cqlMaxLength:n})],displaySettings:{wizardTitle:"Time-lapse Query",wizardClass:"wizard-dark AreaDefinitionWizard",mainIconClass:"fa-clock-o",finishIconClass:"fa-check text-success"}},e).then(function(t){var e=t.query.buildCql();t.query.runOnCompletion&&(t.query.params.storeThisBelongsTo?i.launchEditedQuery(t.query):i.launchBinQuery(t.query)),t.query.isSaveable&&t.query.shouldBeSaved&&t.query.save(e)})},t.$inject=["stealth.timelapse.wizard.Query","stealth.timelapse.wizard.queryService","stealth.timelapse.wizard.SourceTimeStep","stealth.timelapse.wizard.AreaStep","stealth.timelapse.wizard.OptionsStep","stealth.wizard.WizardRunner"],t}();e.TimelapseWizard=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o,a,s,l,c,u,d,f,p,h,g=n(53),m=n(46),v=n(14),y=function(){function t(t,e,n,y,b,w,_,x,S,C,E){var T=this;this._$interval=t,this._$q=e,this._$rootScope=n,this._tlLayerManager=y,this._toastr=b,this._ArrowQueryStore=w,this._BinStore=_,this._LineQueryBinStore=x,this._LocalFirstQueryBinStore=S,this._QueryBinStore=C,this._TLQuery=E,this.launchBinQuery=function(t){var e=i.defer();v(h)&&(h=a.getHistoricalLayer());var n=r(function(){if(t.isReady())if(r.cancel(n),t.isValidLineQuery()||!t.isLineQuery()){var i=t.params.storeName,o=t.isValidLineQuery()?new u(i):t.layerSupportsArrow&&!1===t.preferBin?new l(i):new f(i);h.addStore(o),o.launchQuery(t),e.resolve(o)}else e.reject()},100,600);return n.then(function(){var n="Query '"+t.params.storeName+"' timed out during initialization";e.reject(n),s.error(n)}),e.promise},this.createTimelapseQuery=function(t){return new p(t)},this.createLocalFirstQueryBinStore=function(t,e){var n;if(e.isLineQuery())throw new Error("Query does not satisfy requirements");return(n=new d(t)).setQuery(e),g(e,"params.storeThisBelongsTo")&&a.removeStore(n.getQuery().params.storeThisBelongsTo),a.getHistoricalLayer().addStore(n),n},this.createTimelapseBinStore=function(t){var e=new c(t);return a.getHistoricalLayer().addStore(e),e},this.resolveHistoricalBinQuery=function(t,e){return i.when(t).then(function(t){if(t&&t.byteLength>0&&t.byteLength%4==0)return m(e)&&(e=this.createTimelapseBinStore(e)),e.setArrayBuffer(t).then(function(){e.getViewState().isError||o.$emit("timelapse:querySuccessful",e)});s.error("No results"),e.getViewState().isError=!0,e.getViewState().errorMsg="No results"},function(t){s.error(t.error.message,e)})},this.launchEditedQuery=function(t){a.removeStore(t.params.storeThisBelongsTo),T.launchBinQuery(t)},r=t,i=e,a=y,s=b,l=w,c=_,u=x,d=S,f=C,p=E,(o=n).$on("timelapse:querySuccessful",function(t,e){v(h)&&(h=a.getHistoricalLayer()),h.storeFinished(e)})}return t.$inject=["$interval","$q","$rootScope","tlLayerManager","toastr","stealth.timelapse.stores.ArrowQueryStore","stealth.timelapse.stores.BinStore","stealth.timelapse.stores.LineQueryBinStore","stealth.timelapse.stores.LocalFirstQueryBinStore","stealth.timelapse.stores.QueryBinStore","stealth.timelapse.wizard.Query"],t}();e.QueryService=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o,a=n(22),s=n(409),l=n(29),c=n(23),u=n(150),d=n(2409),f=n(2),p=n(18),h=n(34),g=n(44),m=n(2410),v=n(30),y=n(124),b=n(134),w=n(159),_=n(2417),x=n(21),S=n(6),C=n(24),E={trkId:"idField",dtg:"dtgField",geom:"geomField",startDtg:"startDtgField",endDtg:"endDtgField"},T=1,M=["timelapse","historical"],k=function(){return function(t){var e=this;this.buildCql=function(){var t,n,r,o,a=e.params.generatedFeatures;if(n=i.buildFeatureFilter(a,e.params.geomField.name)||e.params.defaultGeomClause||null,e.isValidLineQuery()){r=i.combine(i.operator.AND,i.buildDtgFilter(e.params.startDtgField.name,null,e.params.endDtg,e.params.startDtgField.isString,e.params.startDtgField.dtgFormatter),i.buildDtgFilter(e.params.endDtgField.name,e.params.startDtg,null,e.params.endDtgField.isString,e.params.endDtgField.dtgFormatter));var s=e.layerData.currentLayer,l=parseInt(f(s.KeywordConfig,M.concat([s.stealthWorkspace,"trackTimeOffsetSeconds"])),10)||0;l>0&&(r=i.combine(i.operator.AND,i.buildDtgFilter(e.params.startDtgField.name,e.params.startDtg.subtract(l,"seconds"),null,e.params.startDtgField.isString,e.params.startDtgField.dtgFormatter),r))}else r=i.buildDtgFilter(e.params.dtgField.name,e.params.startDtg,e.params.endDtg,e.params.dtgField.isString,e.params.dtgField.dtgFormatter);return o=e.params.cql,t=[i.operator.AND,n,r],p(o)||t.push(o),i.combine.apply(i,t)},this.isReady=function(){return e.queryReady},this.isLineQuery=function(){return y(e.getLineQueryConditions(),Boolean)},this.isValidLineQuery=function(){return s(e.getLineQueryConditions(),Boolean)},this.getLineQueryConditions=function(){return[e.params.startDtgField,e.params.endDtgField,"string"===f(e.params,"dtgField.localType"),"LineString"===f(e.params,"geomField.localType")]},this.getFeatureTypeDescription=function(){return e.layerData.error=null,e.featureTypeData=null,e.updateStoreName(),e.timeData.maxTimeRangeMillis=e.layerData.currentLayer.maxTimeRangeMillis,e.timeData.maxTime=e.layerData.currentLayer.maxTime,e.timeData.minTime=e.layerData.currentLayer.minTime,o.getFeatureTypeDescription(e.layerData.currentLayer.wfsUrl,e.layerData.currentLayer.Name,!1,!0).then(function(t){if(t.error)e.featureTypeData="unavailable";else{var n=t.featureTypes[0].properties;a(e.layerData.currentLayer.fieldNames,function(t,r){var i=E[r]||r;e.params[i]=c(n,{name:t})||null}),e.featureTypeData=t,e.queryReady=!0}}).catch(function(t){e.layerData.error="GetFeatureTypeDescription request failed. Error: "+t.status+" "+t.statusText})},this.onDataSourcesLoad=function(){var t=C.DataSourceManager.getDataSourcesByKeyword(M).map(function(t){return C.DataSourceManager.buildLegacyLayer(t)}).toJS(),n={legacy:[]};a(t,function(t){t.fieldNames=v({trkId:"trkId",geom:"geom",dtg:"dtg"},f(t.KeywordConfig,M.concat("field"))),t.Name===f(e.params,"currentLayer.Name")&&v(t.fieldNames,{trkId:f(e.queryOverrides,"idField.name"),geom:f(e.queryOverrides,"geomField.name"),dtg:f(e.queryOverrides,"dtgField.name"),heading:f(e.queryOverrides,"heading.name")}),t.stealthWorkspace="legacy",t.maxTimeRangeMillis=parseInt(f(t.KeywordConfig,M.concat(["maxTimeRangeMillis"])),10)||Number.POSITIVE_INFINITY,t.minTime=x.utc(f(t.KeywordConfig,M.concat(["minTime"]),null));var r=f(t.KeywordConfig,M.concat(["maxTime"]),null);t.maxTime="NOW"===r?r:x.utc(r),t.fadeRate=0|f(t.KeywordConfig,M.concat(["fadeRate"]),null),n.legacy.push(t)});var i,o=d([w,u,_("Title")])(n),s=l(o,function(t){return t.length>1});if(a(s,function(t){a(t,function(t){var e=C.DataSourceManager.getOgcConfigById(t.ogcId).title;t.Title=t.Title+" ("+e+")"})}),e.layerData.layers=d([g,b,m(function(t){return b(n[t],"Title")}),u])(n),!p(e.layerData.layers)){e.params.currentLayer?e.layerData.currentLayer=c(e.layerData.layers,{id:e.params.currentLayer.id}):e.params.source&&(e.layerData.currentLayer=c(e.layerData.layers,{id:e.params.source}));var y=e.layerData.layers[0];h(e.layerData.filterFn)&&(e.layerData.filteredLayers||(e.layerData.filteredLayers=l(e.layerData.layers,e.layerData.filterFn)),y=e.layerData.filteredLayers[0]||y),e.layerData.currentLayer=e.layerData.currentLayer||y,i=e.getFeatureTypeDescription()}return r.$emit("timelapse:layersLoaded",e.layerData),i},this.updateStoreName=function(){if(e.queryOverrides.title)e.params.storeName=e.queryOverrides.title;else{var t="("+e.idSeq+")",n=f(e,"params.queryType"),r=f(e,"layerData.currentLayer.Title");e.params.storeName=n||r?[n,r,t].join(" ").trim():"Time-lapse "+t}};var n=x().utc();this.queryOverrides=t||{},this.queryReady=!1,this.idSeq=T++,this.type="time-lapse",this.isSaveable=!!this.isSaveable,this.shouldBeSaved=f(this.queryOverrides,"shouldBeSaved",!!this.shouldBeSaved),this.shouldBeShared=f(this.queryOverrides,"shouldBeShared",!!this.shouldBeShared),this.classifications=this.classifications,this.classification=f(this.queryOverrides,"classification",this.classification),this.editMode=!!this.queryOverrides.id,this.id=this.queryOverrides.id,this.showOnStartup=this.queryOverrides.showOnStartup,this.runOnCompletion=!1!==this.queryOverrides.runOnCompletion,this.layerData={error:null,layers:null,currentLayer:null,filterFn:null,filteredLayers:null},this.featureTypeData=null,this.layerSupportsArrow=null,this.preferBin=f(this.queryOverrides,"preferBin",!0),this.timeData={minTime:null,maxTime:null,defaultStartDtg:n.clone().subtract(1,"hours"),defaultEndDtg:n,maxTimeRangeMillis:null},this.params={sortOnServer:!1,idField:null,geomField:null,dtgField:null,startDtgField:null,endDtgField:null,requiredArrowFields:null,arrowFields:null,generatedFeatures:[],storeName:"Time-lapse "+this.idSeq,startDtg:null,endDtg:null,cql:null,cqlParams:null,queryType:null},v(this.params,this.queryOverrides),this.updateStoreName(),this.queryOverrides.bounds&&(this.params.generatedFeatures=(new S.format.WKT).readFeatures(this.queryOverrides.bounds)||[]),this.onceHistoricalLayers=C.DataSourceManager.loadDataSources().then(this.onDataSourcesLoad)}}();function A(t,e,n){return r=t,i=e,o=n,k}e.Query=k,A.$inject=["$rootScope","cqlHelper","wfs"],e.factory=A},function(t,e,n){var r=n(891)();t.exports=r},function(t,e,n){var r=n(988)("map",n(4));r.placeholder=n(598),t.exports=r},function(t,e,n){var r=n(2412),i=n(598),o=Array.prototype.push;function a(t,e){return 2==e?function(e,n){return t(e,n)}:function(e){return t(e)}}function s(t){for(var e=t?t.length:0,n=Array(e);e--;)n[e]=t[e];return n}function l(t,e){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=e.apply(void 0,r);return t.apply(void 0,r),i}}}t.exports=function t(e,n,c,u){var d="function"==typeof n,f=n===Object(n);if(f&&(u=c,c=n,n=void 0),null==c)throw new TypeError;u||(u={});var p={cap:!("cap"in u)||u.cap,curry:!("curry"in u)||u.curry,fixed:!("fixed"in u)||u.fixed,immutable:!("immutable"in u)||u.immutable,rearg:!("rearg"in u)||u.rearg},h=d?c:i,g="curry"in u&&u.curry,m="fixed"in u&&u.fixed,v="rearg"in u&&u.rearg,y=d?c.runInContext():void 0,b=d?c:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},w=b.ary,_=b.assign,x=b.clone,S=b.curry,C=b.forEach,E=b.isArray,T=b.isError,M=b.isFunction,k=b.isWeakMap,A=b.keys,I=b.rearg,O=b.toInteger,P=b.toPath,L=A(r.aryMethod),D={castArray:function(t){return function(){var e=arguments[0];return E(e)?t(s(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[0],n=arguments[1],r=t(e,n),i=r.length;return p.cap&&"number"==typeof n?(n=n>2?n-2:1,i&&i<=n?r:a(r,n)):r}},mixin:function(t){return function(e){var n=this;if(!M(n))return t(n,Object(e));var r=[];return C(A(e),function(t){M(e[t])&&r.push([t,n.prototype[t]])}),t(n,Object(e)),C(r,function(t){var e=t[1];M(e)?n.prototype[t[0]]=e:delete n.prototype[t[0]]}),n}},nthArg:function(t){return function(e){var n=e<0?1:O(e)+1;return S(t(e),n)}},rearg:function(t){return function(e,n){var r=n?n.length:0;return S(t(e,n),r)}},runInContext:function(n){return function(r){return t(e,n(r),u)}}};function N(t,e){if(p.cap){var n=r.iterateeRearg[t];if(n)return function(t,e){return q(t,function(t){var n=e.length;return function(t,e){return 2==e?function(e,n){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}(I(a(t,n),e),n)})}(e,n);var i=!d&&r.iterateeAry[t];if(i)return function(t,e){return q(t,function(t){return"function"==typeof t?a(t,e):t})}(e,i)}return e}function R(t,e,n){if(p.fixed&&(m||!r.skipFixed[t])){var i=r.methodSpread[t],a=i&&i.start;return void 0===a?w(e,n):function(t,e){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var a=i[e],s=i.slice(0,e);return a&&o.apply(s,a),e!=r&&o.apply(s,i.slice(e+1)),t.apply(this,s)}}(e,a)}return e}function F(t,e,n){return p.rearg&&n>1&&(v||!r.skipRearg[t])?I(e,r.methodRearg[t]||r.aryRearg[n]):e}function B(t,e){for(var n=-1,r=(e=P(e)).length,i=r-1,o=x(Object(t)),a=o;null!=a&&++n<r;){var s=e[n],l=a[s];null==l||M(l)||T(l)||k(l)||(a[s]=x(n==i?l:Object(l))),a=a[s]}return o}function j(e,n){var i=r.aliasToReal[e]||e,o=r.remap[i]||i,a=u;return function(e){var r=d?y:b,s=d?y[o]:n,l=_(_({},a),e);return t(r,i,s,l)}}function q(t,e){return function(){var n=arguments.length;if(!n)return t();for(var r=Array(n);n--;)r[n]=arguments[n];var i=p.rearg?0:n-1;return r[i]=e(r[i]),t.apply(void 0,r)}}function z(t,e,n){var i,o=r.aliasToReal[t]||t,a=e,c=D[o];return c?a=c(e):p.immutable&&(r.mutate.array[o]?a=l(e,s):r.mutate.object[o]?a=l(e,function(t){return function(e){return t({},e)}}(e)):r.mutate.set[o]&&(a=l(e,B))),C(L,function(t){return C(r.aryMethod[t],function(e){if(o==e){var n=r.methodSpread[o],s=n&&n.afterRearg;return i=s?R(o,F(o,a,t),t):F(o,R(o,a,t),t),i=function(t,e,n){return g||p.curry&&n>1?S(e,n):e}(0,i=N(o,i),t),!1}}),!i}),i||(i=a),i==e&&(i=g?S(i,1):function(){return e.apply(this,arguments)}),i.convert=j(o,e),i.placeholder=e.placeholder=n,i}if(!f)return z(n,c,h);var U=c,$=[];return C(L,function(t){C(r.aryMethod[t],function(t){var e=U[r.remap[t]||t];e&&$.push([t,z(t,e,U)])})}),C(A(U),function(t){var e=U[t];if("function"==typeof e){for(var n=$.length;n--;)if($[n][0]==t)return;e.convert=j(t,e),$.push([t,e])}}),C($,function(t){U[t[0]]=t[1]}),U.convert=function(t){return U.runInContext.convert(t)(void 0)},U.placeholder=U,C(A(U),function(t){C(r.realToAlias[t]||[],function(e){U[e]=U[t]})}),U}},function(t,e){e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,n=e.aliasToReal,r={};for(var i in n){var o=n[i];t.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(t,e,n){t.exports={ary:n(599),assign:n(539),clone:n(133),curry:n(338),forEach:n(317),isArray:n(17),isError:n(563),isFunction:n(34),isWeakMap:n(2414),iteratee:n(2415),keys:n(380),rearg:n(989),toInteger:n(60),toPath:n(2416)}},function(t,e,n){var r=n(181),i=n(80),o="[object WeakMap]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e,n){var r=n(398),i=n(43),o=1;t.exports=function(t){return i("function"==typeof t?t:r(t,o))}},function(t,e,n){var r=n(103),i=n(189),o=n(17),a=n(156),s=n(699),l=n(157),c=n(102);t.exports=function(t){return o(t)?r(t,l):a(t)?[t]:i(s(c(t)))}},function(t,e,n){var r=n(988)("groupBy",n(328));r.placeholder=n(598),t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o,a=n(2),s=n(15);function l(t,n,a){return r=t,i=n,o=a,e.service}e.service=function(t){return function(e,n){return n.dot={showBinSortOption:!a(r,"timelapse.hideBinSortOption")},n.storageKeyPrefix=t.storageKeyPrefix||a(r,"app.context"),n.$watch("selections.query.layerData.currentLayer",function(t){n.largeTimeRangeWarning={duration:a(t,"KeywordConfig.timelapse.largeTimeRangeWarning.duration"),message:s.config.get("timelapse.largeTimeRangeWarning.message")}}),new o("Select data source and time range",new i({tag:"st-tl-wiz-select-source-time-step",attrs:null,scope:n,isolateScope:!1}),null,!0,null,null,!1)}},l.$inject=["CONFIG","ccri.angular-utils.WidgetDef","stealth.wizard.Step"],e.stepFactory=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o,a,s,l=n(29),c=n(2),u=n(6);function d(t,n,l,c,u){return r=t,i=n,o=l,a=c,s=u,e.service}e.service=function(t){return function(e,n){var d,f,p=new a({supportedTools:["coordRect","polygon","radiusCircle","bufferFeature","mapView","wholeEarth"],disableMultiple:!1});n.cqlMaxLength=t.cqlMaxLength,n.featureCreator=p,n.toolWasOpened=!1,n.toolControlsConfig={radiusCircle:!0,polygon:!0,bufferFeature:!0,mapView:!0,coordRect:!0,wholeEarth:!0},n.hasShapes=function(){if(!arguments.length)return!!p.hasFeatures()||null};var h=n.$new();h.featureCreator=p,i(function(){c(e.query,"params.generatedFeatures")&&p.addFeatures(e.query.params.generatedFeatures)},500);var g=function(){n.toolWasOpened=!0},m=function(t){var n=l(t,function(t){var e=t.getGeometry();return e instanceof u.geom.Polygon||e instanceof u.geom.MultiPolygon});e.query.params.generatedFeatures=n},v=function(){e.query.isReady()&&p.getFeatures().then(m).then(function(){e.query.params.areaCql=e.query.buildCql(),"include"===e.query.params.areaCql.toLowerCase()&&(e.query.params.areaCql="")})};p.on("toolstarted",g),p.on("featureschanged",v);var y=function(){p.un("featureschanged",v),p.un("toolstarted",g),p=null,f=null};return n.$on("$destroy",function(){p?p.finish().then(y):y()}),new s("Select area",new o({tag:"st-tl-wiz-select-area-step",attrs:null,scope:n,isolateScope:!1}),new o({tag:"st-wiz-draw-toolbar",scope:h}),!1,function(){var t=c(n,"query.layerData.currentLayer",null);d=n.$watch("query.layerData.currentLayer",function(n){n&&n!==t&&(t=n,e.query.getFeatureTypeDescription())}),f=e.query.params.cql,e.query.params.cql=""},function(t){if(d(),d=null,e.query.params.cql=f,f=null,!0===t)return p.finishActiveTool().then(function(){return p.getFeatures()}).then(function(t){if(!t.length||!e.query.layerData.layers.length)return r.reject();m(t)})},!1)}},d.$inject=["$q","$timeout","ccri.angular-utils.WidgetDef","ccri.area-definition.FeatureCreator","stealth.wizard.Step"],e.stepFactory=d},function(t,e,n){"use strict";var r,i;function o(t,n){return r=t,i=n,e.service}Object.defineProperty(e,"__esModule",{value:!0}),e.service=function(t){return function(e,n){return n.cqlMaxLength=t.cqlMaxLength,new i("Set options",new r({tag:"st-tl-wiz-set-options-step",attrs:null,scope:n,isolateScope:!1}),null,!0,null,null,!1)}},o.$inject=["ccri.angular-utils.WidgetDef","stealth.wizard.Step"],e.stepFactory=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2422);e.factory=function(){return{restrict:"E",template:r}}},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="AsHistoricalWizard">\n        <st-wiz-section>\n            <div class="buf-lg-pt">\n                <st-wiz-data-source query="selections.query"></st-wiz-data-source>\n            </div>\n            <div class="buf-lg-pb">\n                <st-wiz-data-props query="selections.query"></st-wiz-data-props>\n            </div>\n        </st-wiz-section>\n\n        <st-wiz-section>\n            <div class="buf-lg-pt">\n                <st-tl-wiz-timerange query="selections.query" storage-key-prefix="storageKeyPrefix" \n                    large-time-range-warning="largeTimeRangeWarning">\n                </st-tl-wiz-timerange>\n            </div>\n        </st-wiz-section>\n    </div>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2424);e.factory=function(){return{restrict:"E",template:r}}},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="AreaDefinitionWizard">\n        <st-wiz-section>\n            <st-tl-wiz-area-definition></st-tl-wiz-area-definition>\n        </st-wiz-section>\n    </div>\n    \x3c!-- hidden input to disable the Next button if nothing has been drawn --\x3e\n    <input type="hidden" name="hasShapes" ng-model="hasShapes" ng-model-options="{getterSetter:true}" required>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(53),o=n(2426);function a(t){return{restrict:"E",template:o,link:function(e){if(e.cqlTotalLength=function(){if(!arguments.length)return(e.selections.query.params.cql?e.selections.query.params.cql.length:0)+(e.selections.query.params.areaCql?e.selections.query.params.areaCql.length:0)},i(e.selections.query.layerData.currentLayer,["KeywordConfig","query","customWizardOptions"])){var n=r(e.selections.query.layerData.currentLayer,["KeywordConfig","query","customWizardOptions"]);e.customOptionsWidget=new t({tag:n,scope:e,attrs:'query="selections.query" cql-max-length="cqlMaxLength" cql-total-length="cqlTotalLength"'})}}}}a.$inject=["ccri.angular-utils.WidgetDef"],e.factory=a},function(t,e){t.exports='<ng-form name="wizardForm">\n    <ccri-angular-utils-widget-compiler widget-def="customOptionsWidget"\n        ng-if="::selections.query.layerData.currentLayer.KeywordConfig.query.customWizardOptions">\n    </ccri-angular-utils-widget-compiler>\n\n    <div ng-if="::!selections.query.layerData.currentLayer.KeywordConfig.query.customWizardOptions">\n        <div class="vertically-buffered labeled-wide-field">\n            <span class="field-label">Additional filter:</span>\n            <span class="field">\n                <ccri-angular-utils-typeahead\n                    ng-model="selections.query.params.cql"\n                    memory-num="5"\n                    localstorage-prefix="{{selections.query.layerData.currentLayer.Title}}.cql"\n                    placeholder="CQL filter"\n                    typeahead-editable="true"\n                ></ccri-angular-utils-typeahead>\n            </span>\n        </div>\n        <div class="vertically-buffered" ng-switch="selections.query.featureTypeData">\n            <div ng-switch-when="unavailable" class="alert alert-warning">\n                <i class="fa fa-warning"></i> There is no feature type description for this layer.\n            </div>\n            <div ng-switch-default>\n                <section class="vertically-buffered section-boxed" ng-class="{\'ng-hide\': selections.query.featureTypeData === \'unavailable\'}"\n                    ng-repeat="featureType in selections.query.featureTypeData.featureTypes">\n                    <div class="section-boxed-top">\n                        Properties for <strong>{{::selections.query.layerData.currentLayer.Title}}</strong>\n                    </div>\n                    <div class="section-boxed-bottom">\n                        <table class="table-condensed">\n                            <tr ng-repeat="property in featureType.properties">\n                                <td>{{::property.name}}</td>\n                                <td><code>{{::property.localType}}</code></td>\n                            </tr>\n                        </table>\n                    </div>\n                </section>\n            </div>\n        </div>\n        <st-tl-query-name query="selections.query" wizard-form="wizardForm"></st-tl-query-name>\n        <st-tl-save-query query="selections.query"></st-tl-save-query>\n        <st-wiz-cql-length name="cqlTotalLength" ng-model="cqlTotalLength" ng-model-options="{getterSetter:true}"\n            cql-maxlength="{{cqlMaxLength}}">\n        </st-wiz-cql-length>\n    </div>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2428);e.factory=function(){return{restrict:"E",scope:{query:"=",storageKeyPrefix:"=",largeTimeRangeWarning:"=?"},template:r}}},function(t,e){t.exports='<div class="text-faded buf-lg-mb">\n    Data available for time range:<br>\n    <st-date-range class="text-faded"\n            start-date="query.timeData.minTime" end-date="query.timeData.maxTime"\n            moment-time-format="HH:mm:ss"\n            value-placeholder="UNKNOWN"\n            both-placeholder="UNKNOWN"\n    ></st-date-range>\n</div>\n<ccri-angular-utils-time-range-input start="query.params.startDtg" end="query.params.endDtg"\n        localstorage-prefix="{{::storageKeyPrefix}}"\n        time-range-input-options="{\n            timeRequired: true,\n            startRequired: true,\n            endRequired: true,\n            maxDuration: query.timeData.maxTimeRangeMillis,\n            defaultRange: {\n                start: query.timeData.defaultStartDtg,\n                end: query.timeData.defaultEndDtg\n            },\n            shouldIntersectRange: {\n                start: query.timeData.minTime,\n                end: query.timeData.maxTime,\n                full: true\n            },\n            largeTimeRangeWarning: largeTimeRangeWarning    \n        }"\n></ccri-angular-utils-time-range-input>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2430);e.factory=function(){return{restrict:"E",template:r,link:function(t){t.selectedTool=null;var e=t.featureCreator;function n(e){t.selectedTool=e.toolName}function r(){t.selectedTool=null}e.on("toolstarted",n),e.on("toolfinished",r),t.$on("$destroy",function(){e.un("toolstarted",n),e.un("toolfinished",r),t=e=null})}}}},function(t,e){t.exports='<div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center">\n        <span class="field-descriptor text-right buf-lg-mr">Select Area:</span>\n        <ccri-area-definition-drawtool-selector\n            feature-creator="featureCreator"\n            class="field-input"\n        ></ccri-area-definition-drawtool-selector>\n    </div>\n    <span ng-class="{\'ng-hide\' : !selectedTool}">\n        <ccri-area-definition-more-details-toggle class="flex-row flex-justify-content-flex-end"></ccri-area-definition-more-details-toggle>\n    </span>\n    <st-wiz-subsection>\n        <ccri-area-definition-tool-controls-switcher feature-creator="featureCreator" tool-controls="toolControlsConfig"></ccri-area-definition-tool-controls-switcher>\n        <st-wiz-cql-length ng-hide="!toolWasOpened"\n                           ng-model="selections.query.params.areaCql.length"\n                           cql-maxlength="{{cqlMaxLength}}">\n        </st-wiz-cql-length>\n    </st-wiz-subsection>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2432),o=n(2442),a=n(2467),s=n(2918),l=n(1062),c=n(2929),u=n(625),d=n(2932);e.default=r.module("stealth.geo.timelapse",[i.default,o.default,a.default,s.default,l.default,c.default,u.default,d.default]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2433),o=n(2437),a=n(2438),s=n(2441);e.default=r.module("stealth.geo.timelapse.category",["ccri.angular-utils","ccri.popup","stealth.geo.timelapse.manager"]).directive("stGeoTimelapseCategory",[function(){return{restrict:"E",template:o,scope:{},controller:i.CategoryController,controllerAs:"ctrl",bindToController:!0}}]).directive("stGeoTimelapseCanvasLayerDisplay",[function(){return{restrict:"E",template:s,scope:{canvasLayerState:"="},controller:a.LayerDisplayController,controllerAs:"ctrl",bindToController:!0}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(990),i=n(72),o=n(16),a=n(47),s=n(169),l=function(){function t(t,e,n){var r=this;this.$scope=t,this.TLWizardEvents=e,this.TLManager=n,this.stateManager=o.StateManager.getInstance(),this.fileReader=new FileReader;var i=this.stateManager.getObservable(s.TIMELAPSE_PATH).subscribe({next:function(t){r.onStateUpdate(t)}});this.onStateUpdate(this.stateManager.getState(s.TIMELAPSE_PATH)),t.$on("$destroy",function(){i.unsubscribe()})}return t.prototype.onStateUpdate=function(t){var e=this;this.$scope.$evalAsync(function(){e.isTimelapseOn=t.isTimelapseOn,e.canvasLayerStates=t.canvasLayerStates.toArray()})},t.prototype.toggleTimelapse=function(){this.stateManager.dispatch({type:s.TimelapseActions.TypeKeys.SET_IS_TIMELAPSE_ON,isTimelapseOn:!this.isTimelapseOn})},t.prototype.launchTimelapseWizard=function(){this.TLWizardEvents.emit("launch")},t.prototype.readTimelapseFile=function(t){var e=r(t.name,a.StoreConfigs[a.StoreTypes.Arrow].fileExtension),n=new a.SourceRecord({id:t.name,type:a.SourceType.FILE}),o=new a.StoreRecord({type:e?a.StoreTypes.Arrow:a.StoreTypes.Binary,id:i.uuid.generate()}),s=new a.DataViewRecord({source:n,store:o});this.TLManager.addLoadedFile(t.name,t),this.TLManager.buildCanvasLayerState(s,t.name)},t.$inject=["$scope","stealth.geo.timelapse.wizard.events","stealth.geo.timelapse.manager.Manager"],t}();e.CategoryController=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(85),i=n(430),o=n(601);function a(t,e,n){var r=t.canvasLayerStates.findIndex(function(t){return t.id===e});return-1!==r?n(r):t}function s(t,e){return r(t,function(t,n,r){switch(r){case"colorByMultiplier":t.colorByMultiplier=n,(n>81||n<1)&&(t.colorByMultiplier=1);break;case"colorMode":var i=e.opacityRampEnabled?3:2;t.colorMode=n%i;break;case"pointRadius":t.pointRadius=Math.min(100,n);break;case"toggledOn":n?t.labelsOn=e.savedLabelsOn:(t.savedLabelsOn=e.labelsOn,t.labelsOn=!1),t.toggledOn=n;break;default:t[r]=n}return t},{})}e.reducer=function(t,e){switch(void 0===t&&(t=new o.TimelapseStateRecord),e.type){case i.TypeKeys.SET_IS_TIMELAPSE_ON:return t.with({isTimelapseOn:e.isTimelapseOn});case i.TypeKeys.SET_CANVAS_LAYER_DRAW_ORDER:return t.with({canvasLayerDrawOrder:e.canvasLayerDrawOrder});case i.TypeKeys.ADD_CANVAS_LAYER_STATE:return t.with({canvasLayerStates:t.canvasLayerStates.push(e.canvasLayerState)});case i.TypeKeys.REMOVE_CANVAS_LAYER_STATE:return a(t,e.canvasLayerId,function(n){return t.with({canvasLayerStates:t.canvasLayerStates.delete(n),canvasLayerDrawOrder:t.canvasLayerDrawOrder.filter(function(t){return t!==e.canvasLayerId}).toList()})});case i.TypeKeys.UPDATE_CANVAS_LAYER_STATE:return a(t,e.canvasLayerId,function(n){var r=t.canvasLayerStates.get(n).with(e.canvasLayerState);return t.with({canvasLayerStates:t.canvasLayerStates.splice(n,1,r).toList()})});case i.TypeKeys.UPDATE_CANVAS_LAYER_DISPLAY:return a(t,e.canvasLayerId,function(n){var r=t.canvasLayerStates.get(n),i=s(e.displayStatus,r.displayStatus),o=r.displayStatus.with(i);return t.with({canvasLayerStates:t.canvasLayerStates.splice(n,1,r.with({displayStatus:o})).toList()})});default:return t}},e.executeIfExists=a,e.formatDisplayStatus=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(47),a=n(991),s=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({id:"",name:"",displayStatus:new a.DisplayStatusRecord,dataView:new o.DataViewRecord,editable:!1,defaultClickInteractionType:""},"CanvasLayerRecord"));e.CanvasLayerRecord=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({canvasLayerStates:i.List(),isHistogramOpen:!1,isTimelapseOn:!0,canvasLayerDrawOrder:i.List()},"TimelapseStateRecord"));e.TimelapseStateRecord=o},function(t,e){t.exports='<div>\n    <div class="categoryCell">\n        <i class="fa fa-fw clickable"\n           ng-class="ctrl.isTimelapseOn ? \'fa-check-square-o\' : \'fa-square-o\'"\n           ng-click="ctrl.toggleTimelapse()"\n        ></i>\n    </div>\n    <div class="categoryCell"><b>Time-lapse</b></div>\n    <div class="categoryCell">\n        <span class="btn btn-default fa-stack toggleButton"\n              ng-click="ctrl.launchTimelapseWizard()"\n              uib-tooltip="Add layer" tooltip-class="nowrap"\n              tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n              tooltip-trigger="mouseenter">\n            <i class="fa fa-fw fa-plus fa-stack-1x text-primary"></i>\n        </span>\n    </div>\n    <div class="categoryCell">\n        <st-upload-file id="timelapseFileUpload"\n                        process-file="ctrl.readTimelapseFile(file)"\n                        tooltip-text="Load Time-lapse file">\n        </st-upload-file>\n    </div>\n    <div class="categoryGrouping">\n        <div ng-repeat="canvasLayerState in ctrl.canvasLayerStates track by canvasLayerState.id"\n             class="buf-sm-mt"\n             ng-class="{\'ng-hide\': !ctrl.isTimelapseOn}">\n             <st-geo-timelapse-canvas-layer-display canvas-layer-state="canvasLayerState"></st-geo-timelapse-canvas-layer-display>\n         </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(21),a=n(23),s=n(129),l=n(2),c=n(18),u=n(14),d=n(4),f=n(74),p=n(568),h=n(113),g=n(47),m=n(24),v=n(277),y=n(169),b=n(339),w=n(135),_=n(194),x=n(603),S=function(){function t(t,e,n,l,d,f,y,b){var S=this;this.$rootScope=t,this.$scope=e,this.WidgetDef=n,this.popupManager=l,this.TLManager=d,this.TimelapseWizard=f,this.queryEditConfig=y,this.wizardUtils=b,this.popupContainer=r.element(".primaryDisplay > ccri-popup-container"),this.wktParser=new i.format.WKT({splitCollection:!0}),this.menuOptions=[],this._push=function(t,e,n){s(t,["label",e.label])<0&&t.splice(n,0,e)},this._openChart=function(t){var e=S.TLManager.getCanvasLayer(S.canvasLayerState.id);if(t||(t="bar"),u(S.popupContainerId)&&(S.popupContainerId=S.popupContainer.data("ccri.popup.containerId")),e.arrowChartPopupId){var n=S.popupManager.getPopups(S.popupContainerId);if(("fa-bar-chart"===a(n,function(t){return t.id===e.arrowChartPopupId}).iconClass?"bar":"twodhistogram")===t)return void S.popupManager.focusPopup(e.arrowChartPopupId);S.popupManager.closePopup(e.arrowChartPopupId)}var r=S.popupManager.getViewportDim(S.popupContainerId);r[1]=0;var i=S.$rootScope.$new();i.layer=e;var o=new S.WidgetDef({tag:"st-geo-tl-chart",scope:i,attrs:'layer="layer" type="'+t+'"'});e.arrowChartPopupId=S.popupManager.displayPopup(S.popupContainerId,S.canvasLayerState.name,"tl-chart","bar"===t?"fa-bar-chart":"fa-th",o,{limitStartSize:"bar"===t,contentWidth:"bar"===t?Math.max(400,r[0]-400):658,contentHeight:"bar"===t?200:643,offsets:r,positioning:h.Popup.Positioning.TopRight,onClose:function(){e.arrowChartPopupId=null,i.$destroy()}})},this.getSetDisplayName=function(t){return void 0===t?S.displayName:S.displayName=t},this.updateStateName=function(){S.TLManager.updateCanvasLayerState(S.canvasLayerState.id,{name:S.displayName})},this.getColorModeStyle=function(){return v.getColorModeStyle(S.canvasLayerState.displayStatus)},this.getMenuOptions=function(){var t=S.TLManager.getCanvasLayer(S.canvasLayerState.id);if(S._push(S.menuOptions,{label:'<i class="fa fa-fw fa-remove"></i> Remove',onClick:function(){S.TLManager.removeCanvasLayer(S.canvasLayerState.id)}},0),!S.canvasLayerState.displayStatus.isLoading){if(!S.canvasLayerState.displayStatus.isError&&t.store.getNumRecords()){var e={label:'<i class="fa fa-fw fa-save"></i> Save as'};if(t.export)if(S.canvasLayerState.dataView.source.type==_.SourceType.FILE)e.menuOptions=[{label:S.canvasLayerState.dataView.source.id,onClick:function(){t.export(w.StoreConfigs[S.canvasLayerState.dataView.store.type])}}],S._push(S.menuOptions,e,0);else{var n=x.DataViewHelper.getExportFormats(S.canvasLayerState.dataView);c(n)||(e.menuOptions=S.getExportAsMenuOptions(n),S._push(S.menuOptions,e,0))}if(S.canvasLayerState.dataView.store.type===g.StoreTypes.Arrow&&!c(S.TLManager.getCanvasLayer(S.canvasLayerState.id).store.getFields())&&(S._push(S.menuOptions,{label:'<i class="fa fa-fw fa-bar-chart"></i> Chart',onClick:function(){S._openChart("bar")}},0),S.canvasLayerState.dataView.source.type===_.SourceType.SERVER)){var r=m.DataSourceManager.getDataSourcesById(S.canvasLayerState.dataView.source.id).first();if(r)r&&"false"!==r.keywordConfig.getIn(["timelapse","2dhistogram","enable"],"false")&&S._push(S.menuOptions,{label:'<i class="fa fa-fw fa-th"></i> 2D histogram',onClick:function(){S._openChart("twodhistogram")}},0)}}S.canvasLayerState.editable&&(S.detailedEditEnabled()&&S._push(S.menuOptions,{label:'<i class="fa fa-fw fa-edit"></i> '+(S.inlineEditEnabled()?"Edit Detailed":"Edit"),onClick:function(){var t=m.DataSourceManager.getDataSourcesById(S.canvasLayerState.dataView.source.id).first(),e=S.canvasLayerState.dataView;S.editCtrl.setInlineEdit(!1),g.KeywordHelper.getFeatureProperties(t).then(function(n){var r,i={runOnCompletion:!0,editMode:!0,isSaveable:!0};if(e&&e.dataFilter&&e.store){var a=e.dataFilter,s=e.store,l=void 0,c=void 0;s.formatOptions instanceof g.GeomesaArrowFormatOptionsRecord&&(l=s.formatOptions.dictionaryFields,c=!0);var u={properties:n,defaultFieldNames:g.KeywordHelper.getDefaultTimelapseFieldNames(t),arrowProperties:g.KeywordHelper.getArrowFieldProperties(t)};r={selectedSource:t,dataSourceDescription:u,arrowFields:l,useArrow:c,sortOnServer:!1,startDtg:a.timeClause.dtg?o.utc(a.timeClause.dtg):null,endDtg:a.timeClause.endDtg?o.utc(a.timeClause.endDtg):null,dtgField:s.dtgField,geomField:s.geomField,idField:s.idField,generatedFeatures:a.geomClause.features,cql:a.additionalCql?a.additionalCql.cql:null,cqlParams:S.convertSimpleClausesToCqlParams(a),storeName:S.canvasLayerState.name,finalCql:a.buildCql(),filter:a.buildCql()},i.savedQueryId=s.id}else r={};S.TimelapseWizard.launchWizard(r,i,!0).then(function(t){S.canvasLayerState=S.canvasLayerState.with({name:t.name,dataView:S.canvasLayerState.dataView.with(t.dataView)}),S.TLManager.replaceCanvasLayer(S.canvasLayerState.id,S.canvasLayerState),S.updateQueryDetails(S.canvasLayerState)})})}},0),S.inlineEditEnabled()&&S._push(S.menuOptions,{label:'<i class="fa fa-fw fa-edit"></i> Edit Inline',onClick:function(){S.TLManager.updateCanvasLayerDisplay(S.canvasLayerState.id,{isExpanded:!0}),S.editCtrl.setInlineEdit(!0)}},0))}return S.menuOptions},this.inlineEditEnabled=function(){return S.queryEditConfig.getEnabledEditModes("timelapse",p.QueryEditMethods.inline)},this.detailedEditEnabled=function(){return S.queryEditConfig.getEnabledEditModes("timelapse",p.QueryEditMethods.detailed)},this.canvasLayerState.editable&&(this.queryDetails={cqlParams:null},this.updateQueryDetails(this.canvasLayerState),this.saveEdits=function(t){S.saveToState(t)},this.editorInitializer=function(t){S.editCtrl=t}),this.displayName=this.canvasLayerState.name,this.highlightLayer=d.getHighlightLayer()}return t.prototype.getCustomParameters=function(t){return this.queryEditConfig.getCustomParameters(t.name)},t.prototype.saveToState=function(t){var e=this,n=this.canvasLayerState;if(n){var r=m.DataSourceManager.getDataSourcesById(n.dataView.source.id).first();if(r)g.KeywordHelper.getFeatureProperties(r).then(function(r){var i=n.dataView.dataFilter,o=t.cqlParams.additionalCql,a=i.with({additionalCql:o?new f.RawClauseRecord({cql:o}):void 0,simpleClauses:b.CqlParamsHelper.convertCqlParamsToClauses(t.cqlParams,r),timeClause:new f.PointTimeClauseRecord(i.timeClause.with({dtg:l(t,"timeBounds.start"),endDtg:l(t,"timeBounds.end")}))}),s=n.dataView.with({dataFilter:a}),c=new g.DataViewRecord(s),u=n.with({dataView:c,displayStatus:n.displayStatus.with({isError:!1})});e.editCtrl.setInlineEdit(!1),e.TLManager.replaceCanvasLayer(n.id,u),e.updateQueryDetails(new y.CanvasLayerRecord(u))})}},t.prototype.updateQueryDetails=function(t){if(void 0===t&&(t=this.canvasLayerState),t){var e=t.dataView?t.dataView.dataFilter:new g.GetFeatureDataFilterRecord,n=m.DataSourceManager.getDataSourcesById(t.dataView.source.id).first(),r={source:n.title,geometry:e.geomClause?this.wktParser.readFeatures(e.geomClause.features):null,timeBounds:e.timeClause?{start:o.utc(e.timeClause.dtg),end:o.utc(e.timeClause.endDtg)}:null,cqlParams:this.convertSimpleClausesToCqlParams(t.dataView.dataFilter),customCqlParams:this.getCustomParameters(n)};this.queryDetails=r}},t.prototype.toggleExpand=function(){this.TLManager.updateCanvasLayerDisplay(this.canvasLayerState.id,{isExpanded:!this.canvasLayerState.displayStatus.isExpanded})},t.prototype.toggleVisibility=function(){this.TLManager.updateCanvasLayerDisplay(this.canvasLayerState.id,{toggledOn:!this.canvasLayerState.displayStatus.toggledOn})},t.prototype.toggleColorMode=function(){this.TLManager.updateCanvasLayerDisplay(this.canvasLayerState.id,{colorMode:(this.canvasLayerState.displayStatus.colorMode+1)%3})},t.prototype.getExportAsMenuOptions=function(t){var e=this;return d(t,function(t,n){return{label:n,onClick:function(){e.TLManager.getCanvasLayer(e.canvasLayerState.id).export(t)}}})},t.prototype.convertSimpleClausesToCqlParams=function(t){return b.CqlParamsHelper.convertSimpleClausesToCqlParams(t.simpleClauses,t.additionalCql)},t.prototype.formatDownloadSize=function(t){return""+Math.round(t/1048576)},t.prototype.getNumRecordsString=function(){var t=this.TLManager.getCanvasLayer(this.canvasLayerState.id).store.getNumRecords();return t?t.toString():null},t.$inject=["$rootScope","$scope","ccri.angular-utils.WidgetDef","ccri.popup.manager","stealth.geo.timelapse.manager.Manager","stealth.geo.timelapse.wizard.TimelapseWizard","stealth.query-edit.configuration","stealth.geo.timelapse.wizard.WizardUtils"],t}();e.LayerDisplayController=S},function(t,e,n){var r=n(2440),i=n(147),o=n(717);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&i(e,n,a)&&(n=a=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),a=void 0===a?e<n?1:-1:o(a),r(e,n,a,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,i,o){for(var a=-1,s=r(n((e-t)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=t,t+=i;return l}},function(t,e){t.exports='<div class="flex-row menu-triggerContainer"\n    ng-class="{\'categoryIndent\': !ctrl.canvasLayerState.editable}">\n    <div class="clickable" ng-class="{\'ng-hide\': !ctrl.canvasLayerState.editable}"\n        ng-click="ctrl.toggleExpand()">\n        <i class="fa fa-fw"\n            ng-class="ctrl.canvasLayerState.displayStatus.isExpanded ? \'fa-caret-down\' : \'fa-caret-right\'">\n        </i>\n    </div>\n    <div ng-if="ctrl.canvasLayerState.displayStatus.isLoading && !ctrl.canvasLayerState.displayStatus.isError && !ctrl.canvasLayerState.displayStatus.isDownloadActive"\n         style="margin:0 1px"\n    >\n        <i class="fa fa-fw fa-spin fa-circle-o-notch"></i>\n    </div>\n    <div ng-if="ctrl.canvasLayerState.displayStatus.isDownloadActive && !ctrl.canvasLayerState.displayStatus.isError" style="margin: 0 1px;">\n        <i class="fa fa-fw fa-download download-button-breathe"></i>\n    </div>\n\n    <div ng-if="ctrl.canvasLayerState.displayStatus.isError" style="margin:0 1px">\n        <i class="fa fa-fw fa-warning text-danger"\n            uib-tooltip="{{ctrl.canvasLayerState.displayStatus.errorMsg}}" tooltip-class="nowrap errorTooltip"\n            tooltip-placement="top-left" tooltip-animation="false" tooltip-popup-delay="500"\n            tooltip-trigger="mouseenter">\n       </i>\n    </div>\n\n    <st-toggle-map-layer\n        ng-if="!ctrl.canvasLayerState.displayStatus.isLoading && !ctrl.canvasLayerState.displayStatus.isError"\n        visible="ctrl.canvasLayerState.displayStatus.toggledOn"\n        toggle="ctrl.toggleVisibility()"\n    ></st-toggle-map-layer>\n\n    <div ng-if="ctrl.canvasLayerState.displayStatus.isLoading && !ctrl.canvasLayerState.displayStatus.isError"\n         class="flex-1 text-secondary ellipsis"\n         style="padding-left: 5px"\n    >\n        {{::ctrl.canvasLayerState.name}}\n    </div>\n    <div ng-if="ctrl.canvasLayerState.displayStatus.isDownloadActive && !ctrl.canvasLayerState.displayStatus.isError"\n         class="text-secondary st-geo-tl-request-download-progress"\n    >\n        {{ctrl.formatDownloadSize(ctrl.canvasLayerState.displayStatus.downloadSize)}} MB\n    </div>\n\n    <div ng-if="!ctrl.canvasLayerState.displayStatus.isLoading || ctrl.canvasLayerState.displayStatus.isError" class="flex-1">\n        <input type="text" class="form-control input-xs flex-1"\n            ng-model="ctrl.getSetDisplayName" ng-model-options="{ getterSetter: true }" ng-blur="ctrl.updateStateName()"\n            uib-tooltip="{{ctrl.getNumRecordsString()}} results in {{ctrl.formatDownloadSize(ctrl.canvasLayerState.displayStatus.downloadSize)}} MB"\n            tooltip-class="nowrap"\n            tooltip-enable="ctrl.getNumRecordsString()"\n            tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n            tooltip-trigger="mouseenter" tooltip-append-to-body="true"\n        />\n        <div ng-class="{\'ng-hide\': !ctrl.canvasLayerState.displayStatus.isExpanded}" style="padding:4px 0px">\n            <st-query-details-display ng-if="ctrl.queryDetails"\n                query-details="ctrl.queryDetails"\n                highlight-layer="ctrl.highlightLayer"\n                save-edits="ctrl.saveEdits"\n                register-with="ctrl.editorInitializer">\n            </st-query-details-display>\n        </div>\n    </div>\n\n    <div class="categoryCell" ng-if="!ctrl.canvasLayerState.displayStatus.isLoading && !ctrl.canvasLayerState.displayStatus.isError">\n        <span\n            ng-click="ctrl.toggleColorMode()"\n            class="btn btn-default toggleButton buf-sm-ml"\n            ng-style="{\'background\': ctrl.getColorModeStyle()}"\n            uib-tooltip="Change color mode" tooltip-class="nowrap"\n            tooltip-placement="left" tooltip-animation="false" tooltip-popup-delay="500"\n            tooltip-trigger="mouseenter"\n        ></span>\n    </div>\n    <ccri-angular-utils-menu-trigger class="buf-md-ml buf-sm-mr"\n        menu-options="ctrl.getMenuOptions()"\n        sub-menu-offset-x="7" sub-menu-offset-y="-5">\n        <i class="fa fa-ellipsis-v fa-lg"></i>\n    </ccri-angular-utils-menu-trigger>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2443),o=n(2445),a=n(2447),s=n(2449),l=n(2451),c=n(2453),u=n(2455),d=n(2457),f=n(2461),p=n(2463),h=n(2465);e.default=r.module("stealth.geo.timelapse.controls",["stealth.core.interaction.lists","stealth.core.utils","ui.slider"]).directive("stGeoTlCanvasControls",i.factory).directive("stGeoTlChart",o.factory).component("stGeoTlColorByFieldChooser",a.factory()).component("stGeoTlOpacitySlider",h.factory()).directive("stGeoTlColorByIdRandomizer",s.factory).directive("stGeoTlColorModeSingleColorChooser",l.factory).directive("stGeoTlColorModeSwitcher",c.factory).directive("stGeoTlPlotlyBarChart",u.factory).directive("stGeoTlPlotlyTwodHistogram",d.factory).directive("stGeoTlRangeSlider",f.factory).directive("stGeoTlSizeInput",p.factory).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(14),o=n(16),a=n(113),s=n(2444),l=n(169),c=function(){function t(t,e,n){var s=this;this.$scope=t,this.WidgetDef=e,this.popupManager=n,this.stateManager=o.StateManager.getInstance(),this._popupContainer=r.element(".primaryDisplay > ccri-popup-container"),this._closeHistogram=function(){i(s._popupContainerId)&&s._setContainerId(),i(s._popupId)||s.popupManager.closePopup(s._popupId)},this._setContainerId=function(){s._popupContainerId=s._popupContainer.data("ccri.popup.containerId")},this.openHistogram=function(){if(i(s._popupContainerId)&&s._setContainerId(),i(s._popupId)){var t=s.popupManager.getViewportDim(s._popupContainerId),e=new s.WidgetDef({tag:"st-geo-timelapse-range-slider-popup"});s._popupId=s.popupManager.displayPopup(s._popupContainerId,"Time-lapse Details","timelapsehistogram","fa-bar-chart",e,{offsets:[t[0],0],positioning:a.Popup.Positioning.TopRight,contentWidth:t[0]>>1,onClose:function(){s._popupId=void 0}})}else s.popupManager.focusPopup(s._popupId)},t.$on("$destroy",function(){s._closeHistogram()}),this.stateManager.getState(l.TIMELAPSE_PATH).isHistogramOpen&&this.openHistogram()}return t.$inject=["$scope","ccri.angular-utils.WidgetDef","ccri.popup.manager"],t}();e.TimelapseControls=c,e.factory=function(){return{restrict:"E",template:s,controller:c,controllerAs:"ctrl",bindToController:!0}}},function(t,e){t.exports='<div style="height:32px; display: flex;">\n    <div style="flex: 1 1 0%">\n        <ccri-time-controls-slider></ccri-time-controls-slider>\n    </div>\n    <div class="timelapseRangeButton"\n         ng-click="ctrl.openHistogram()"\n         uib-tooltip="Time-lapse Details"\n         tooltip-append-to-body="true">\n        <i class="fa fa-fw fa-lg fa-bar-chart"></i>\n    </div>\n</div>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(272),i=n(16),o=n(193),a=n(24),s=n(2),l=n(122),c=n(432),u=n(29),d=n(129),f=n(42),p=n(14),h=n(109),g=n(4),m=n(190),v=n(85),y=n(887),b=n(2446),w=" Unknown ";function _(t,e,n,_,x,S){return{restrict:"E",scope:{layer:"=",type:"@?"},template:b,controller:["$scope",function(b){var C,E,T,M=[];b.type=b.type?b.type.toLowerCase():"bar",b.selectMode="twodhistogram"===b.type?"pan":void 0,M.push(b.$on("$destroy",function(){f(M,function(t){return t?t():m()}),M=null,D&&D.un(["change:center","change:resolution","change:rotation"],V),E&&b.layer.store.removePredicate(E),t.canvas.redrawCurrent(),F.unsubscribe(),F=null,b=C=B=null}));var k={timeWindow:[],groupBy:null,yGroupBy:null,countBy:null,isViewExtentFiltering:null,isShowingNulls:null,viewExtentPredicate:null};b.histogramType="histogram",b.histogramToggleBtnText="Switch to Contour Chart",b.properties=b.layer.store.getFields();var A=a.DataSourceManager.getDataSourcesById(b.layer.getState().dataView.source.id).first();"twodhistogram"===b.type&&A.keywordConfig.getIn(["timelapse","2dhistogram","xAxisField"],"").length>0?b.groupByProperty=A.keywordConfig.getIn(["timelapse","2dhistogram","xAxisField"]):b.groupByProperty=b.properties[0],"twodhistogram"===b.type&&A.keywordConfig.getIn(["timelapse","2dhistogram","yAxisField"],"").length>0?b.yGroupByProperty=A.keywordConfig.getIn(["timelapse","2dhistogram","yAxisField"]):b.yGroupByProperty=b.properties[1];var I="(all)";b.countByProperty=I,b.countByProperties=[],b.binOptions=["auto",10,100,1e3],b.nbinsx=100,b.nbinsy=100,b.colorScaleOptions=["Viridis","Cividis","Jet","Blackbody","Earth","Rainbow"],b.colorScale="Viridis",b.logZ={enableLogZ:!1},b.fixedrangeX={value:!1},b.fixedrangeY={value:!1};var O=e("attributeLabel");b.labelAttribute=function(t){return t===I?t:O(t)},b.processing={loadingIndicator:!0},b.waiting=!1,b.vm={isFilteringByView:s(x,"arrow.chart.viewFilteringEnabledByDefault",!0),isShowingNulls:!1};var P,L=b.layer.store.geomField;b.vm.isFilteringByView&&(P=W());var D=S.getView();D.on(["change:center","change:resolution","change:rotation"],V),M.push(b.$watch("vm.isFilteringByView",function(t,e){t!==e&&(H(),z())}));var N,R=i.StateManager.getInstance(),F=R.getObservable(o.TIME_CONTROLS_PATH).subscribe({next:function(){l(z)}});$(),b.onGroupByChanged=function(){b.processing.loadingIndicator=!0,c(function(){E&&b.layer.store.removePredicate(E),B.clearSelections(),B.resetView(),$(),U()},100)},b.onCountByChanged=function(){U()},M.push(b.$watch(function(){return b.layer.getState().displayStatus.fillColorRgbArray.join(",")},function(t,e){t!==e&&B.setDefaultBarColor(b.layer.getState().displayStatus.fillColorRgbArray)}));var B,j=!0;function q(t){return k.timeWindow[0]!==t.windowStart_s||k.timeWindow[1]!==t.windowEnd_s||k.groupBy!==b.groupByProperty||k.yGroupBy!==b.yGroupByProperty||k.countBy!==b.countByProperty||k.isShowingNulls!==b.vm.isShowingNulls||k.isViewExtentFiltering!==b.vm.isFilteringByView||b.vm.isFilteringByView&&k.viewExtentPredicate!==P}function z(){j&&((N=R.getState(o.TIME_CONTROLS_PATH)).isPaused&&!N.isDragging?U():(b.waiting=b.waiting||q(N),l(function(){b.$apply()})))}function U(){j&&(N=R.getState(o.TIME_CONTROLS_PATH),_.cancel(C),C=_(function(){if(b.waiting=!1,function(t){var e=q(t);return k.timeWindow[0]=t.windowStart_s,k.timeWindow[1]=t.windowEnd_s,k.groupBy=b.groupByProperty,k.yGroupBy=b.yGroupByProperty,k.countBy=b.countByProperty,k.isShowingNulls=b.vm.isShowingNulls,k.isViewExtentFiltering=b.vm.isFilteringByView,k.viewExtentPredicate=P,e}(N)){b.timeWindowBounds={start:N.windowStart_s,end:N.windowEnd_s},b.processing.loadingIndicator=!0;var t=void 0;t="twodhistogram"===b.type?b.layer.store.getAttributePromise(b.groupByProperty,b.yGroupByProperty,b.timeWindowBounds,E,P):b.layer.store.groupBy(b.groupByProperty,b.countByProperty===I?null:b.countByProperty,b.timeWindowBounds,E,P),n.when(t).then(function(t){var e;return b.processing.loadingIndicator=!1,e=b.vm.isShowingNulls?g(t,function(t){return null===t.name?{name:w,count:t.count}:t}):u(t,function(t){return null!==t.name}),B.updateData(e)}).catch(function(){b.processing.loadingIndicator=!1})}else b.waiting=!1},100))}function $(){b.countByProperty===b.groupByProperty&&(b.countByProperty=I);var t=[I];f(b.properties,function(e){e!==b.groupByProperty&&t.push(e)}),b.countByProperties=t}function V(){b.vm.isFilteringByView&&b.$apply(function(){H(),z()})}function H(){P=b.vm.isFilteringByView?W():null}function W(){var t,e=S.getExtent();return r.predicate.custom(function(n,r){p(t)&&(t=d(r.schema.fields,function(t){return t.name===L}));var i=r.getChildAt(t).get(n),o=i.get(0),a=i.get(1);return a>=e[0]&&a<=e[2]&&o>=e[1]&&o<=e[3]},function(){})}function G(){b.selectMode="pan",b.lassoPanToggleBtnText="Switch to Lasso Select"}M.push(b.$on("PopupCollapsed",function(){j=!1})),M.push(b.$on("PopupExpanded",function(){j=!0,z()})),M.push(b.$watch("vm.isShowingNulls",function(t,e){t!==e&&z()})),b.chartInitializer=function(t){(B=t).setDefaultBarColor(b.layer.getState().displayStatus.fillColorRgbArray),z()},b.selectionChanged=function(e){var n=Array.from(e);"twodhistogram"===b.type?n.length?(T=h(E),E=v(g(n,function(t){var e,n,i;return t[0]&&(t[0].p0?e=r.predicate.col(b.groupByProperty).ge(t[0].p0).and(r.predicate.col(b.groupByProperty).le(t[0].p1)):(t[0][0]||0===t[0][0])&&(isNaN(+t[0][0])?(e=r.predicate.col(b.groupByProperty).eq(t[0][0]),t[0][1]&&y(t[0]).forEach(function(t){return e=e.or(r.predicate.col(b.groupByProperty).eq(t))})):e=r.predicate.col(b.groupByProperty).ge(t[0][0])),(t[0][1]||0===t[0][1])&&(e=e.and(r.predicate.col(b.groupByProperty).le(t[0][1])))),t[1]&&(t[1].p0?n=r.predicate.col(b.yGroupByProperty).ge(t[1].p0).and(r.predicate.col(b.yGroupByProperty).le(t[1].p1)):(t[1][0]||0===t[1][0])&&(isNaN(+t[1][0])?(n=r.predicate.col(b.yGroupByProperty).eq(t[1][0]),t[1][1]&&y(t[1]).forEach(function(t){return n=n.or(r.predicate.col(b.yGroupByProperty).eq(t))})):n=r.predicate.col(b.yGroupByProperty).ge(t[1][0])),(t[1][1]||0===t[1][1])&&(n=n.and(r.predicate.col(b.yGroupByProperty).le(t[1][1])))),e&&(i=e),n&&(i=i?i.and(n):n),i}),function(t,e){return t.or(e)}),b.layer.store.addPredicate(E,T),T=null):E&&(b.layer.store.removePredicate(E),E=void 0):n.length?(T=E,E=n.map(function(t){return r.predicate.col(b.groupByProperty).eq(t===w?null:t)}).reduce(function(t,e){return t.or(e)}),b.layer.store.addPredicate(E,T),T=null):E&&(b.layer.store.removePredicate(E),E=void 0);t.canvas.redrawCurrent()},b.onResetViewBtn=function(){B&&B.resetView()},b.onClearBtn=function(){B&&B.clearSelections()},b.onToggle2dHistogramContour=function(){B&&(b.processing.loadingIndicator=!0,"histogram"===b.histogramType?(b.histogramType="contour",b.histogramToggleBtnText="Switch to Histogram chart"):(b.histogramType="histogram",b.histogramToggleBtnText="Switch to Contour chart",G()))},b.onToggleLassoSelectPan=function(){B&&("lasso"===b.selectMode?G():(b.selectMode="lasso",b.lassoPanToggleBtnText="Switch to Pan Mode"))}}]}}_.$inject=["stealth.geo.timelapse.manager.Manager","$filter","$q","$timeout","CONFIG","ol3Map"],e.factory=_},function(t,e){t.exports='<div class="popupFillSpace attributeProfile timelapse-chart-view flex-column"\n     uib-tooltip-html="\'CTRL + click to select multiple bars<br>SHIFT + click to select range\'"\n     tooltip-enable="type === \'bar\' || (type === \'twodhistogram\' && histogramType === \'contour\')"\n     tooltip-class="st-tooltip nowrap"\n     tooltip-placement="bottom" tooltip-animation="false" tooltip-popup-delay="0"\n>\n    <div class="header flex-row">\n        <ccri-angular-utils-checkbox ng-model="vm.isFilteringByView">\n            Filter by map view\n        </ccri-angular-utils-checkbox>\n        <ccri-angular-utils-checkbox style="margin-left: 20px;" ng-model="vm.isShowingNulls">\n            Show unknown values\n        </ccri-angular-utils-checkbox>\n\n        \x3c!-- Color by switcher --\x3e\n        <div class="flex-1" style="margin-left: 20px" ng-show="type !== \'twodhistogram\' || histogramType !== \'histogram\'">\n            <span>Map color mode:&nbsp;</span>\n            <st-geo-tl-color-mode-switcher canvas-layer-state="layer.getState()"></st-geo-tl-color-mode-switcher>\n            <st-geo-tl-color-by-id-randomizer canvas-layer-state="layer.getState()"></st-geo-tl-color-by-id-randomizer>\n            <st-geo-tl-color-mode-single-color-chooser canvas-layer-state="layer.getState()"></st-geo-tl-color-mode-single-color-chooser>\n            <st-geo-tl-color-by-field-chooser canvas-layer-state="layer.getState()"></st-geo-tl-color-by-field-chooser>\n        </div>\n\n        \x3c!-- Flex div for when color switcher is hidden --\x3e\n        <div class="flex-1" ng-show="type === \'twodhistogram\' && histogramType === \'histogram\'">\n        </div>\n\n        \x3c!-- Right-side buttons --\x3e\n        <div class="button-list" style="flex: 0 0 auto">\n            \x3c!-- Reset view --\x3e\n            \x3c!-- Toggle Lasso Select/Pan --\x3e\n            \x3c!--<span class="clickable"--\x3e\n            \x3c!--ng-if="type === \'twodhistogram\' && histogramType === \'contour\'"--\x3e\n            \x3c!--ng-click="onToggleLassoSelectPan()"--\x3e\n            \x3c!--uib-tooltip="{{lassoPanToggleBtnText}}"--\x3e\n            \x3c!--tooltip-class="st-tooltip nowrap"--\x3e\n            \x3c!--tooltip-placement="bottom-right"--\x3e\n            \x3c!--tooltip-animation="false"--\x3e\n            \x3c!--tooltip-popup-delay="200"--\x3e\n            \x3c!--&gt;--\x3e\n            \x3c!--<i ng-if="type === \'twodhistogram\' && selectMode === \'lasso\'" class="fa fa-hand-rock-o"></i>--\x3e\n            \x3c!--<i ng-if="type === \'twodhistogram\' && selectMode === \'pan\'" class="fa fa-openid"></i>--\x3e\n            \x3c!--</span>--\x3e\n            <span class="clickable"\n                  ng-click="onResetViewBtn()"\n                  uib-tooltip="Reset view"\n                  tooltip-class="st-tooltip nowrap"\n                  tooltip-placement="bottom-right"\n                  tooltip-animation="false"\n                  tooltip-popup-delay="200"\n            >\n                <i class="fa fa-arrows-alt"></i>\n            </span>\n            \x3c!-- Clear selection --\x3e\n            <span class="clickable"\n                  ng-click="onClearBtn()"\n                  uib-tooltip="Clear selection"\n                  tooltip-class="st-tooltip nowrap"\n                  tooltip-placement="bottom-right"\n                  tooltip-animation="false"\n                  tooltip-popup-delay="200"\n            >\n                <i class="fa fa-filter" style="line-height: inherit;"></i>\n            </span>\n            \x3c!-- Toggle 2D Histogram Contour --\x3e\n            \x3c!--<span class="clickable"--\x3e\n                  \x3c!--ng-show="type === \'twodhistogram\'"--\x3e\n                  \x3c!--ng-click="onToggle2dHistogramContour()"--\x3e\n                  \x3c!--uib-tooltip="{{histogramToggleBtnText}}"--\x3e\n                  \x3c!--tooltip-class="st-tooltip nowrap"--\x3e\n                  \x3c!--tooltip-placement="bottom-right"--\x3e\n                  \x3c!--tooltip-animation="false"--\x3e\n                  \x3c!--tooltip-popup-delay="200"--\x3e\n            \x3c!--&gt;--\x3e\n                \x3c!--<i ng-if="type === \'twodhistogram\' && histogramType === \'histogram\'" class="fa fa-bar-chart"></i>--\x3e\n                \x3c!--<i ng-if="type === \'twodhistogram\' && histogramType === \'contour\'" class="fa fa-th"></i>--\x3e\n            \x3c!--</span>--\x3e\n        </div>\n    </div>\n\n    <div class="flex-1 flex-row">\n        <div class="rotated-yaxis-container buf-lg-mt">\n            <div class="rotate-pivot">\n                <div style="display: inline-block; width: 100px">\n                    <ccri-angular-utils-select\n                            ng-hide="type !== \'bar\'"\n                            ng-model="countByProperty"\n                            from-list="countByProperties"\n                            label-fn="labelAttribute"\n                            ng-change="onCountByChanged()"\n                            vertically-oriented="true"\n                    ></ccri-angular-utils-select>\n                    <div ng-hide="type !== \'twodhistogram\'" style="position: absolute; right: 235px; width: 150px;">\n                        <ccri-angular-utils-select\n                                ng-model="yGroupByProperty"\n                                from-list="::properties"\n                                label-fn="labelAttribute"\n                                ng-change="onGroupByChanged(\'y\')"\n                                vertically-oriented="true"\n                        ></ccri-angular-utils-select>\n                        <span class="two-d-histogram-checkbox-control">\n                            <ccri-angular-utils-checkbox\n                                    ng-model="fixedrangeY.value"\n                            >\n                                Prevent Y Zoom\n                            </ccri-angular-utils-checkbox>\n                        </span>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        <st-geo-tl-plotly-bar-chart ng-if="type === \'bar\'" class="flex-1" style="position:relative;"\n                                    register-with="chartInitializer" selections-handler="selectionChanged"\n                                    loading="processing"\n        ></st-geo-tl-plotly-bar-chart>\n        <st-geo-tl-plotly-twod-histogram\n                ng-if="type === \'twodhistogram\'"\n                class="flex-1"\n                style="position:relative;"\n                register-with="chartInitializer"\n                selections-handler="selectionChanged"\n                loading="processing"\n                group-by-property="groupByProperty"\n                y-group-by-property="yGroupByProperty"\n                histogram-type="histogramType"\n                color-scale="colorScale"\n                nbinsx="nbinsx"\n                nbinsy="nbinsy"\n                log-z="logZ"\n                fixedrange-x="fixedrangeX"\n                fixedrange-y="fixedrangeY"\n        >\n        </st-geo-tl-plotly-twod-histogram>\n    </div>\n\n    <div class="text-center">\n        <span style="display:inline-block; width: 150px">\n            <ccri-angular-utils-select\n                    ng-model="groupByProperty"\n                    from-list="::properties"\n                    label-fn="labelAttribute"\n                    ng-change="onGroupByChanged()"\n            ></ccri-angular-utils-select>\n        </span>\n        <span ng-show="type === \'twodhistogram\'">\n            <ccri-angular-utils-checkbox\n                    ng-model="fixedrangeX.value"\n            >\n                Prevent X Zoom\n            </ccri-angular-utils-checkbox>\n        </span>\n    </div>\n\n    <div class="loading-overlay" ng-class="{\'ng-hide\': !processing.loadingIndicator}">\n        <i class="fa fa-fw fa-stack-1x fa-circle-o-notch fa-spin"></i>\n    </div>\n    <div class="loading-overlay noselect"\n         ng-class="{\'ng-hide\': !waiting}"\n         style="width: auto; height: auto; margin-left: -135px;"\n    >\n    <span class="timelapse-chart-waiting-message noselect">\n        <i class="fa fa-pause"></i>&nbsp;\n        Pause or release time slider to update chart\n    </span>\n    </div>\n\n    <div class="text-center two-d-histogram-controls" ng-show="type === \'twodhistogram\'">\n        <span class="two-d-histogram-control">\n            X Bins\n            <ccri-angular-utils-select\n                    ng-model="nbinsx"\n                    from-list="::binOptions"\n            ></ccri-angular-utils-select>\n        </span>\n        <span class="two-d-histogram-control">\n            Y Bins\n            <ccri-angular-utils-select\n                    ng-model="nbinsy"\n                    from-list="::binOptions"\n            ></ccri-angular-utils-select>\n        </span>\n        <span class="two-d-histogram-control">\n            Color Scale\n            <ccri-angular-utils-select\n                    ng-model="colorScale"\n                    from-list="::colorScaleOptions"\n            ></ccri-angular-utils-select>\n        </span>\n        <span class="two-d-histogram-checkbox-control" ng-show="histogramType === \'histogram\'">\n            <ccri-angular-utils-checkbox\n                    ng-model="logZ.enableLogZ"\n            >\n                Log-Z\n            </ccri-angular-utils-checkbox>\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(277),o=n(2448),a=function(){function t(t,e){var n=this;this.tlManager=e,this.labelAttribute=function(t){return n.attributeLabelFilter(t)};var r=e.getCanvasLayer(this.canvasLayerState.id);this.canvasLayerState.displayStatus.colorMode===i.ColorModes.OPACITY_RAMP?this.fields=r.store.getFilterableFields():this.fields=r.store.getFields(),this.attributeLabelFilter=t("attributeLabel")}return t.prototype.$onChanges=function(t){if(t.canvasLayerState){var e=t.canvasLayerState.currentValue,n=this.tlManager.getCanvasLayer(e.id);e.displayStatus.colorMode===i.ColorModes.OPACITY_RAMP?(this.selectedField=e.displayStatus.opacityRampField,this.fields=n.store.getFilterableFields()):(this.selectedField=e.displayStatus.colorByField,this.fields=n.store.getFields())}},t.prototype.selectField=function(t){if(this.canvasLayerState.displayStatus.colorMode===i.ColorModes.OPACITY_RAMP){var e=this.tlManager.getCanvasLayer(this.canvasLayerState.id).store.getRange(t);e&&this.tlManager.updateCanvasLayerDisplay(this.canvasLayerState.id,{opacityRampField:t,opacityRampFilter:r.List([e[0],e[1]])})}else this.tlManager.updateCanvasLayerDisplay(this.canvasLayerState.id,{colorByField:t})},t.$inject=["$filter","stealth.geo.timelapse.manager.Manager"],t}();e.ColorByFieldChooserController=a,e.factory=function(){return{template:o,bindings:{canvasLayerState:"<"},controller:a}}},function(t,e){t.exports='<div class="st-geo-color-by-field-chooser"\n    ng-class="{inactive: !($ctrl.fields.length && ($ctrl.canvasLayerState.displayStatus.colorMode === 1 || $ctrl.canvasLayerState.displayStatus.colorMode === 2))}">\n    <ccri-angular-utils-select\n        ng-model="$ctrl.selectedField"\n        from-list="$ctrl.fields"\n        label-fn="$ctrl.labelAttribute"\n        ccri-angular-utils-change="$ctrl.selectField($ctrl.selectedField)"\n        uib-tooltip="Color by field" tooltip-class="nowrap"\n        tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n        tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n    ></ccri-angular-utils-select>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2450),i=function(){function t(t){this.tlManager=t}return t.prototype.randomize=function(){this.tlManager.updateCanvasLayerDisplay(this.canvasLayerState.id,{colorByMultiplier:3*this.canvasLayerState.displayStatus.colorByMultiplier})},t.$inject=["stealth.geo.timelapse.manager.Manager"],t}();e.ColorByIdRandomizerController=i,e.factory=function(){return{restrict:"E",template:r,scope:{canvasLayerState:"="},controller:i,controllerAs:"ctrl",bindToController:!0}}},function(t,e){t.exports='<span class="fa fa-lg fa-fw fa-random clickable st-geo-color-by-id-randomizer"\n    ng-if="ctrl.canvasLayerState.displayStatus.colorMode === 1"\n    ng-click="ctrl.randomize()"\n    uib-tooltip="Randomize colors" tooltip-class="nowrap"\n    tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="500"\n    tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n></span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2452),i=function(){function t(t,e){var n=this;this.tlManager=e,this.colorMode=this.canvasLayerState.displayStatus.colorMode;var r=t.$on("$destroy",function(){r(),r=null,i&&(i(),i=null)}),i=t.$watch(function(){return n.canvasLayerState.displayStatus.fillColorHexString},function(){n.color=n.canvasLayerState.displayStatus.fillColorHexString})}return t.prototype.setFillColor=function(t){this.tlManager.updateCanvasLayerDisplay(this.canvasLayerState.id,{fillColorHexString:t})},t.$inject=["$scope","stealth.geo.timelapse.manager.Manager"],t}();e.ColorModeChooserController=i,e.factory=function(){return{restrict:"E",template:r,scope:{canvasLayerState:"="},controller:i,controllerAs:"ctrl",bindToController:!0}}},function(t,e){t.exports='<span class="fa fa-lg fa-fw fa-eyedropper clickable st-geo-color-mode-single-color-chooser"\n    ng-if="ctrl.canvasLayerState.displayStatus.colorMode !== 1"\n    colorpicker colorpicker-position="bottom"\n    ng-model="ctrl.color"\n    ccri-angular-utils-change="ctrl.setFillColor(ctrl.color)"\n    uib-tooltip="Change color" tooltip-class="nowrap"\n    tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="500"\n    tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n></span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2454),i=n(277),o=function(){function t(t){this.tlManager=t}return t.prototype.getStyle=function(){return i.getColorModeStyle(this.canvasLayerState.displayStatus)},t.prototype.toggle=function(){this.tlManager.updateCanvasLayerDisplay(this.canvasLayerState.id,{colorMode:this.canvasLayerState.displayStatus.colorMode+1})},t.$inject=["stealth.geo.timelapse.manager.Manager"],t}();e.ColorModeSwitcherController=o,e.factory=function(){return{restrict:"E",template:r,scope:{canvasLayerState:"="},controller:o,controllerAs:"ctrl",bindToController:!0}}},function(t,e){t.exports='<span class="btn btn-default st-geo-color-mode-switcher"\n        ng-style="{\'background\': ctrl.getStyle()}"\n        ng-click="ctrl.toggle()"\n        uib-tooltip="Change color mode" tooltip-class="nowrap"\n        tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="500"\n        tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n></span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2456),i=n(196),o=n(122),a=n(42),s=n(995);function l(t,e){return{restrict:"E",require:"?^^ccriPopupSizeControl",scope:{register:"=registerWith",selectionsHandler:"=",loading:"="},template:r,link:function(n,r,l,c){var u=n.$on("$destroy",function(){u(),u=null,M&&(M.off("plotly_hover",D),M.off("plotly_unhover",N),M.off("plotly_click",R),M.off("plotly_selected",F),M.off("plotly_relayout",k),s.purge(M[0])),O&&O.off("resize",L),d.updateData=d.clearSelections=d=null,M=f=p=A=I=null});n.noData=!1;var d={updateData:function(t){if(E.x.length=0,S.xaxis.ticktext.length=0,E.y.length=0,E.text.length=0,E.marker.color.length=0,0===t.length)return void(n.noData=!0);var e;return n.noData=!1,U=$=null,a(t,function(t){t.name&&(e=t.name.length>12?t.name.substr(0,9)+"...":t.name),E.x.push(t.name),S.xaxis.ticktext.push(e),E.text.push(t.name),E.y.push(t.count),E.marker.color.push(y)}),W(),P().then(function(){return X()})},clearSelections:function(){h.clear(),m.clear(),g.clear(),G(),z(),n.selectionsHandler&&n.selectionsHandler(g)},resetView:function(){if(U=$=null,T)return Q({"xaxis.autorange":!0})},setDefaultBarColor:function(e){y="rgb("+e[0]+","+e[1]+","+e[2]+")";var n=t.lightenRGB(e[0],e[1],e[2],50),r=t.lightenRGB(e[0],e[1],e[2],80),i=t.lightenRGB(e[0],e[1],e[2],90);b="rgb("+n[0]+","+n[1]+","+n[2]+")",w="rgb("+r[0]+","+r[1]+","+r[2]+")",_="rgb("+i[0]+","+i[1]+","+i[2]+")",T&&(G(),W(),P())}};o(function(){n.register(d)});var f,p,h=new e(function(t,e){!function(t,e){var n=!m.has(t);!0!==e&&!1!==e||(n=e);!0===n?K(t):function(t){m.delete(t),g.delete(Y(t)),q(t,v===t?b:y),V()}(t);H()}(t,e)}),g=new Set,m=new Set,v=null,y="rgb(31, 119, 180)",b="rgb(100, 166, 212)",w="rgb(255, 110, 110)",_="rgb(251, 150, 150)",x=12,S={xaxis:{type:"category",tickvals:[],ticktext:[],tickmode:"array",color:"#808080",tickangle:-45,tickfont:{size:x}},yaxis:{color:"#808080",fixedrange:!0},margin:{t:0,r:10,b:70,l:40},paper_bgcolor:"#333",plot_bgcolor:"#333",dragmode:"pan"},C={showLink:!1,scrollZoom:!0,doubleClick:!1,displayModeBar:!1,modeBarButtonsToRemove:["toImage","sendDataToCloud","zoom2d","pan2d","zoomIn2d","zoomOut2d","autoScale2d","resetScale2d","toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"],displaylogo:!1,showTips:!1,showAxisDragHandles:!1,showAxisRangeEntryBoxes:!1},E={type:"bar",x:[],y:[],text:[],marker:{color:[]},hoverinfo:"y+text",hoverlabel:{bgcolor:"#000",bordercolor:"#000",font:{color:"#fff",family:'"Helvetica Neue",Helvetica,Arial,sans-serif',size:12}}},T=!1,M=r.find(".plotly-timelapse-barchart"),k=i(function(){o(function(){X()})},250);M.on("plotly_hover",D),M.on("plotly_unhover",N),M.on("plotly_click",R),M.on("plotly_selected",F),M.on("plotly_relayout",k);var A,I,O=c?c.element:void 0;function P(){return s.newPlot(M[0],[E],S,C).then(function(){f=M.find(".draglayer .drag").get(0),p=M.find(".cartesianlayer .subplot .plot .barlayer").get(0),T=!0})}function L(){return s.Plots.resize(M[0])}function D(t,e){B("pointer"),v=null,e.points&&e.points.length&&function(t){q(t,m.has(t)?_:b)}(v=e.points[0].pointNumber)}function N(){B("default"),j(v),v=null}function R(t,e){if(e.points&&e.points.length){var n=e.points[0].pointNumber;h.click(n,e.event.ctrlKey,e.event.shiftKey)}}function F(t,e){e&&e.range&&e.range.x[0]&&e.range.x[1]&&function(t,e){var n=E.x.indexOf(t),r=E.x.indexOf(e);return function(t,e){var n,r;t<=e?(n=t,r=e):(n=e,r=t);var i=[];return E.x.slice(n,r+1).forEach(function(t){t&&i.push(E.x.indexOf(t))}),i}(n,r)}(e.range.x[0],e.range.x[1]).forEach(function(t){K(t)}),H()}function B(t){f&&(f.style.cursor=t)}function j(t){q(t,m.has(t)?w:y)}function q(t,e){(A=p.childNodes[0].childNodes[0])&&(I=A.childNodes[t])&&(I.childNodes[0].style.fill=e),E.marker.color[t]=e,I=null}function z(){if(v&&j(v),T)return function(t){var e=t||E;return s.restyle(M[0],e)}({marker:{color:E.marker.color}})}O&&O.on("resize",L);var U,$,V=i(z,500),H=i(function(){n.selectionsHandler&&n.selectionsHandler(Array.from(g))},1);function W(){m.clear(),g.forEach(function(t){var e=function(t){return E.text.indexOf(t)}(t);m.add(e),E.marker.color[e]=w})}function G(){a(E.marker.color,function(t,e){E.marker.color[e]=y})}function Y(t){return E.text[t]}function K(t){m.add(t),g.add(Y(t)),q(t,v===t?_:w),V()}function X(){if(p){var t=p.getBoundingClientRect().width/(2*x),e=Math.floor(E.x.length/t)||1;if(t!==U||e!==$){U=t,$=e,S.xaxis.tickvals.length=0;for(var n=0;n<=E.x.length;n+=e)S.xaxis.tickvals.push(E.x[n]);return Q()}}}function Q(t){var e=t||S;return s.relayout(M[0],e)}}}}l.$inject=["colors","SelectionHelper"],e.factory=l},function(t,e){t.exports="<div>\n    \x3c!-- Use visibility:hidden to hide this element, so it retains its CSS size when hidden,\n         or else Plotly won't render it with the correct size --\x3e\n    <div class=\"anchorAll plotly-timelapse-barchart\"\n            ng-style=\"{'visibility': noData ? 'hidden' : 'visible'}\"\n    ></div>\n    <div class=\"anchorAll flex-row flex-align-items-center flex-justify-content-center plotly-timelapse-barchart-nodata\"\n            ng-class=\"{'ng-hide': !noData || loading.loadingIndicator}\"\n    >\n        No Data to display. Select different attributes.\n    </div>\n</div>\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(109),i=n(196),o=n(122),a=n(30),s=n(151),l=n(42),c=n(133),u=n(271),d=n(2458),f=n(2459),p=n(150),h=n(995),g=n(2460);function m(t,e,n){return{restrict:"E",scope:{register:"=registerWith",selectionsHandler:"=",loading:"=",groupByProperty:"=",yGroupByProperty:"=",histogramType:"=",colorScale:"=",nbinsx:"=",nbinsy:"=",logZ:"=",fixedrangeX:"=",fixedrangeY:"="},template:g,link:function(g,m,v,y){g.noData=!1;var b,w,_,x,S,C,E,T,M=g.$on("$destroy",function(){M(),M=null,U&&(U.off("plotly_click",ht),U.off("plotly_selected",gt),ut()),R&&R.off("resize",lt),k.updateData=k.clearSelections=k=null,U=null}),k={updateData:function(t){var e=[],n=[],i=[];if(l(t,function(t){e.push(null===t[g.groupByProperty]?0:t[g.groupByProperty]),n.push(null===t[g.yGroupByProperty]?0:t[g.yGroupByProperty]),i.push(A)}),l(K,function(t){t.x.length=0}),l(X,function(t){t.y.length=0}),0===t.length)return void(g.noData=!0);g.noData=!1,l(X,function(t){t.y=n}),G.marker.color=r(i),l(K,function(t){t.x=e}),W.marker.color=r(i),dt()},clearSelections:ft,resetView:function(){if(z)return function(t){z&&(et=a(et,t),ct())}({xaxis:{autorange:!0},xaxis2:{autorange:!0},yaxis:{autorange:!0},yaxis2:{autorange:!0}})},setDefaultBarColor:function(e){O=c(I),A="rgb("+e[0]+","+e[1]+","+e[2]+")";var n=t.lightenRGB(e[0],e[1],e[2],80);I="rgb("+n[0]+","+n[1]+","+n[2]+")",z&&(l(W.marker.color,function(t,e){W.marker.color[e]=t===O?I:A}),l(G.marker.color,function(t,e){G.marker.color[e]=t===O?I:A}),yt())}},A="rgb(31, 119, 180)",I="rgb(100; 166; 212)",O="rgb(100; 166; 212)",P="#808080",L=12,D=new e(function(t,e){!function(t,e){var n=!function(t,e){if(e instanceof Array){var n=!1;return t.forEach(function(t){Ct(t,e)&&(n=!0)}),n}return t.has(e)}(q,S);!0!==e&&!1!==e||(n=e);!0===n?St(t):Et(t);rt()}(t,e)}),N="histogram",R=y?y.element:void 0,F=new Set,B=new Set,j=new Set,q=new Set,z=!1,U=m.find(".plotly-timelapse-histogram2d"),$={len:.8,tickcolor:P,title:"Count",tickfont:{size:L,color:P},titlefont:{size:L,color:P}},V={x:[],y:[],name:"density",showscale:!0,type:"histogram2dcontour",colorscale:g.colorScale,autobinx:!0,autobiny:!0,nbinsx:g.nbinsx,nbinsy:g.nbinsy,contours:{showlabels:!0,labelfont:{color:"black"}},colorbar:r($),hoverinfo:"x+y+z",hoverlabel:{font:{color:"white"}},zmax:void 0},H={x:[],y:[],name:"density",type:"histogram2d",colorscale:g.colorScale,autobinx:!0,autobiny:!0,colorbar:r($),nbinsx:g.nbinsx,nbinsy:g.nbinsy,hoverinfo:"x+y+z",hoverlabel:{font:{color:"white"}},zmax:void 0},W={x:[],name:"x density",marker:{color:[]},yaxis:"y2",type:"histogram",autobinx:!0,autobiny:!0,selected:{marker:{opacity:1}},unselected:{marker:{opacity:1}}},G={y:[],name:"y density",marker:{color:[]},xaxis:"x2",type:"histogram",autobinx:!0,autobiny:!0,selected:{marker:{opacity:1}},unselected:{marker:{opacity:1}}},Y=[H],K=[V,H,W],X=[V,H,G],Q={domain:[0,.85],showgrid:!0,zeroline:!1,color:P,tickfont:{size:L},fixedrange:g.fixedrangeX.value},Z={domain:[0,.85],showgrid:!0,zeroline:!1,color:P,fixedrange:g.fixedrangeY.value},J={domain:[.85,1],showgrid:!1,zeroline:!1,color:P,tickfont:{size:L},fixedrange:g.fixedrangeX.value},tt={domain:[.85,1],showgrid:!1,zeroline:!1,color:P,fixedrange:g.fixedrangeY.value},et={showlegend:!0,autosize:!1,width:600,height:500,margin:{t:20,r:40,l:60,b:20},hovermode:"closest",paper_bgcolor:"#333",plot_bgcolor:"#333",dragmode:"select",datarevision:1,shapes:void 0},nt={showLink:!1,scrollZoom:!0,doubleClick:!1,displayModeBar:!1,modeBarButtonsToRemove:["toImage","sendDataToCloud","zoom2d","pan2d","zoomIn2d","zoomOut2d","autoScale2d","resetScale2d","toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"],displaylogo:!1,showTips:!1,showAxisDragHandles:!1,showAxisRangeEntryBoxes:!1,setBackground:"transparent"},rt=i(function(){g.selectionsHandler&&g.selectionsHandler(Array.from(F))},1),it=!1;function ot(t){var e=0,n=r(t.__data__.cdModule[0][0].z);return t.__data__.cdModule[0][0].z=t.__data__.cdModule[0][0].z.map(function(t){return t.map(function(t){return 0===t?0:(Math.log10(t)>e&&(e=Math.log10(t)),Math.log10(t))})}),t.__data__.cdModule[0][0].text=n.map(function(e,n){return e.map(function(e,i){var o=r(t.__data__.cdModule[0][0].xRanges[i]),a=r(t.__data__.cdModule[0][0].yRanges[n]);return"x: "+(o=o.map(function(t){return t?t.toString().replace("-","−"):""}).join(" - "))+"<br>y: "+(a=a.map(function(t){return t?t.toString().replace("-","−"):""}).join(" - "))+"<br>z: "+e})}),e}function at(){g.logZ.enableLogZ?(ct(),x&&(H.zmax=ot(x)),_&&(V.zmax=ot(_)),ct()):st()}function st(){if(z)return et.datarevision+=1,ct()}function lt(){if(z)return h.Plots.resize(U[0])}function ct(){return z=!0,h.react(U[0],Y,et,nt)}function ut(){z&&(h.purge(U[0]),z=!1)}function dt(){"contour"===N?((et=s(et,["xaxis","xaxis2","yaxis","yaxis2","bargap"])).showlegend=!0,vt(),et=a(et,{xaxis:Q,yaxis:Z,xaxis2:J,yaxis2:tt,bargap:.25,showlegend:!1})):(et=a(et,{xaxis:Q,yaxis:Z,xaxis2:J,yaxis2:tt,bargap:.25,showlegend:!1}),vt(),(et=s(et,["xaxis","xaxis2","yaxis","yaxis2","bargap"])).showlegend=!0,et.xaxis={color:P,tickfont:{size:L},fixedrange:g.fixedrangeX.value},et.yaxis={color:P,tickfont:{size:L},fixedrange:g.fixedrangeY.value},et.legend={font:{size:L,color:P}}),vt()}function ft(t){!function(){Array.from(q).forEach(function(t){E="x density",Et(t),E="y density",Et(t)}),D.clear(),q.clear(),F.clear(),B.clear(),j.clear(),!it&&et.shapes&&et.shapes.length>0&&(x||_)?(et.shapes=void 0,ct()):et.shapes=void 0;!function(){b&&xt("x density",A);w&&xt("y density",A)}()}(),rt(),t&&yt()}function pt(){et.shapes=void 0,j.size>0&&(Array.from(j).forEach(function(t){Array.from(F).forEach(function(e){Ct(t,e)&&F.delete(e)})}),j.clear(),ct(),rt())}function ht(t,e){var n=(new Date).getTime();if(n-T<500)ft(!g.logZ.enableLogZ);else if(e.points&&e.points.length){pt();var r=void 0===e.points[0].binNumber?e.points[0].pointIndex:e.points[0].binNumber;E=c(C),"y density"===(C=e.points[0].fullData.name)?D.click(-r,e.event.ctrlKey,e.event.shiftKey):D.click(r,e.event.ctrlKey,e.event.shiftKey)}T=n}function gt(t,e){if(e)if(e.range.x&&e.range.x.length>0&&e.range.y&&e.range.y.length>0){ft(!1);var n=e.range.x,r=e.range.y;mt(n,r),F.add([n,r]),rt()}else e.points&&e.points.length>0&&(ft(!1),C=e.points[0].data.name,e.points.forEach(function(t){St(t.binNumber)}),yt(),rt())}function mt(t,e){et.shapes=[{type:"rect",xref:"x",yref:"y",x0:t[0],y0:e[0],x1:t[1],y1:e[1],fillcolor:"#ffffff",opacity:.2,line:{width:0}}],j.add([t,e]),ct()}function vt(){it=!0,ft(!1),ut(),n(function(){ct(),n(function(){yt()},100)},100),it=!1}function yt(){if(z)return st().then(function(){b=U.find(".cartesianlayer .xy2 .plot .barlayer").get(0),w=U.find(".cartesianlayer .x2y .plot .barlayer").get(0),_=U.find(".cartesianlayer .xy .plot .contourlayer").get(0),x=U.find(".cartesianlayer .xy .plot .heatmaplayer").get(0),z=!0,g.loading.loadingIndicator=!1,at()})}function bt(t){return"x density"===t?[W,b]:"y density"===t?[G,w]:"histogram"===g.histogramType?[H,x]:[V,_]}function wt(t,e,n){var r,i,o,a=bt(e);if("density"===e||t instanceof Array&&t.length>0)(a=bt("density"))[1]&&(r=a[1].__data__.cdModule[0][0].yRanges[t[0]],i=a[1].__data__.cdModule[0][0].xRanges[t[1]]);else if("x density"===e){if(t=Math.abs(t),(o=a[1].__data__.cdModule[0][t])&&(i=[o.ph0,o.ph1]),Array.from(F).find(function(t){return t[1]})){var s=Array.from(F).filter(function(t){return t[1]}).map(function(t){return t[1]}),l=Array.from(F).filter(function(t){return t[0]}).map(function(t){return t[0]});if(n?(B.forEach(function(t){Ct(t,[i,r])&&B.delete(t)}),s=Array.from(B).filter(function(t){return t[1]}).map(function(t){return t[1]}),l=Array.from(B).filter(function(t){return t[0]}).map(function(t){return t[0]})):(l.push(i),B.add([i,r])),s[0]&&s[0][0]&&isNaN(+s[0][0]))r=p(s);else{var c=d(s,function(t){return t[0]}),h=f(s,function(t){return t[1]});r=c&&h?[c[0],h[1]]:void 0}if(l[0]&&l[0][0]&&isNaN(+l[0][0]))i=p(l);else{var g=d(l,function(t){return t[0]}),m=f(l,function(t){return t[1]});i=g&&m?[g[0],m[1]]:void 0}return F.clear(),n?(F.add([i,r]),[]):[i,r]}}else if("y density"===e&&(t=Math.abs(t),(o=a[1].__data__.cdModule[0][t])&&(r=[o.ph0,o.ph1]),Array.from(F).find(function(t){return t[0]}))){s=Array.from(F).filter(function(t){return t[1]}).map(function(t){return t[1]}),l=Array.from(F).filter(function(t){return t[0]}).map(function(t){return t[0]});if(n?(B.forEach(function(t){Ct(t,[i,r])&&B.delete(t)}),s=Array.from(B).filter(function(t){return t[1]}).map(function(t){return t[1]}),l=Array.from(B).filter(function(t){return t[0]}).map(function(t){return t[0]})):(s.push(r),B.add([i,r])),s[0]&&s[0][0]&&isNaN(+s[0][0]))r=p(s);else{c=d(s,function(t){return t[0]}),h=f(s,function(t){return t[1]});r=c&&r?[c[0],h[1]]:void 0}if(l[0]&&l[0][0]&&isNaN(+l[0][0]))i=p(l);else{g=d(l,function(t){return t[0]}),m=f(l,function(t){return t[1]});i=g&&m?[g[0],m[1]]:void 0}return F.clear(),n?(F.add([i,r]),[]):[i,r]}return a[0].x&&isNaN(+a[0].x[0])&&(i=[u(a[0].x)[i[0]]]),a[0].y&&isNaN(+a[0].y[0])&&(r=[u(a[0].y)[r[0]]]),n?B.delete([i,r]):B.add([i,r]),[i,r]}function _t(t,e,n){var r,i=bt(e);t=Math.abs(t),(r=i[1].childNodes[0].childNodes[0])&&r.childNodes[t]&&(r.childNodes[t].childNodes[0].style.fill=n),i[0].marker.color[t]=n}function xt(t,e){var n,r=bt(t);(n=r[1].childNodes[0].childNodes[0])&&n.childNodes&&n.childNodes.forEach(function(t){t.childNodes[0].style.fill=e}),r[0].marker.color=r[0].marker.color.map(function(t){return e})}function St(t){q.add(t);var e=wt(t,C,!1);F.add(e),t instanceof Array||"x density"!==C&&"y density"!==C?e[0]&&e[1]&&mt(e[0],e[1]):_t(t,C,I)}function Ct(t,e){var n=!0;return!(!t||!e||t.length!==e.length)&&(l(t,function(r,i){t[i]instanceof Array&&e[i]instanceof Array?Ct(t[i],e[i])||(n=!1):t[i]!==e[i]&&(n=!1)}),n)}function Et(t){var e=wt(t,E,!0);q.forEach(function(e){Ct(e,t)&&q.delete(e)}),F.forEach(function(t){Ct(t,e)&&F.delete(t)}),t instanceof Array||"x density"!==E&&"y density"!==E||_t(t,E,A)}g.$watch("histogramType",function(t){t!==N&&(N=t,Y="contour"===t?[V,W,G]:[H],g.logZ.enableLogZ=!1,dt())}),g.$watch("logZ.enableLogZ",function(t){t?(x&&(H.hoverinfo="text",H.colorbar.title="Count (10^z)"),_&&(V.hoverinfo="text",V.colorbar.title="Count (10^z)")):(H.zmax=void 0,V.zmax=void 0,H.hoverinfo="x+y+z",V.hoverinfo="x+y+z",H.colorbar.title="Count",V.colorbar.title="Count"),at()}),g.$watch("nbinsx",function(t){pt(),"auto"===t?(H.nbinsx=0,V.nbinsx=0):(H.nbinsx=t,V.nbinsx=t),at()}),g.$watch("nbinsy",function(t){pt(),"auto"===t?(H.nbinsy=0,V.nbinsy=0):(H.nbinsy=t,V.nbinsy=t),at()}),g.$watch("colorScale",function(t){H.colorscale=t,V.colorscale=t,at()}),g.$watch("fixedrangeX.value",function(t){"contour"===N?(Q.fixedrange=t,J.fixedrange=t,et=a(et,{xaxis:Q,xaxis2:J})):et.xaxis=a(et.xaxis,{fixedrange:t}),at()}),g.$watch("fixedrangeY.value",function(t){"contour"===N?(Z.fixedrange=t,tt.fixedrange=t,et=a(et,{yaxis:Z,yaxis2:tt})):et.yaxis=a(et.yaxis,{fixedrange:t}),at()}),o(function(){g.register(k)}),U.on("plotly_click",ht),U.on("plotly_selected",gt),R&&R.on("resize",lt),ct()}}}m.$inject=["colors","SelectionHelper","$timeout"],e.factory=m},function(t,e,n){var r=n(433),i=n(43),o=n(996);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},function(t,e,n){var r=n(433),i=n(997),o=n(43);t.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},function(t,e){t.exports="<div>\n    \x3c!-- Use visibility:hidden to hide this element, so it retains its CSS size when hidden,\n         or else Plotly won't render it with the correct size --\x3e\n    <div class=\"anchorAll plotly-timelapse-histogram2d\"\n         ng-style=\"{'visibility': noData ? 'hidden' : 'visible'}\"\n    ></div>\n    <div class=\"anchorAll flex-row flex-align-items-center flex-justify-content-center plotly-timelapse-histogram2d-nodata\"\n         ng-class=\"{'ng-hide': !noData || loading.loadingIndicator}\"\n    >\n        No Data\n    </div>\n</div>\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(225),i=n(2462),o=function(){function t(t,e){var n=this,i=t.$on("$destroy",function(){i(),i=null,o&&(o(),o=null)}),o=t.$watch(function(){return n.filters},function(){var t=n.filters.toJS();r(t,n.sliderFilters)||(0===t.length&&(t=[n.range[0],n.range[1]]),e(function(){n.sliderFilters=t},0))})}return t.$inject=["$scope","$timeout"],t}();e.RangeSliderController=o,e.factory=function(){return{restrict:"E",template:i,scope:{filters:"=",range:"=",setFilters:"&"},controller:o,controllerAs:"ctrl",bindToController:!0}}},function(t,e){t.exports='<div ui-slider="{range: true}" class="filterSlider"\n    ng-model="ctrl.sliderFilters"\n    ng-change="ctrl.setFilters({filters: ctrl.sliderFilters})"\n    min="{{ctrl.range[0]}}" max="{{ctrl.range[1]}}">\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(50),i=n(2464),o=function(){function t(t){var e=this;this.updateSize=function(){r(e.size)||(e.size=1)};var n=t.$on("$destroy",function(){n(),n=null,i&&(i(),i=null)}),i=t.$watch(function(){return e.pointRadius},function(){e.size=e.pointRadius})}return t.$inject=["$scope"],t}();e.SizeInputController=o,e.factory=function(){return{restrict:"E",template:i,scope:{pointRadius:"=",setSize:"&"},controller:o,controllerAs:"ctrl",bindToController:!0}}},function(t,e){t.exports='<input type="number"\n    class="form-control input-xs" style="width: 24px;"\n    ng-model="ctrl.size"\n    ccri-angular-utils-change="ctrl.updateSize(); ctrl.setSize({size: ctrl.size})"\n    min="1" max="100" step="1"\n>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2466),i=function(){function t(){}return t.prototype.$onChanges=function(t){t.opacity&&this.sliderOpacity!==t.opacity.currentValue&&(this.sliderOpacity=t.opacity.currentValue)},t}();e.OpacitySliderController=i,e.factory=function(){return{template:r,bindings:{opacity:"<",setOpacity:"&"},controller:i}}},function(t,e){t.exports='<div class="flex-row buf-sm-mb">\n    <div class="rangeSliderStartLabel">Opacity</div>\n    <div class="flex-1 horizontally-buffered">\n        <div ui-slider\n            ng-model="$ctrl.sliderOpacity"\n            ccri-angular-utils-change="$ctrl.setOpacity({opacity: $ctrl.sliderOpacity})"\n            min="0" max="100" step="1"\n        ></div>\n    </div>\n    <div class="rangeSliderEndLabel">{{$ctrl.sliderOpacity}}%</div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2468),o=n(2914),a=n(2915),s=n(2916),l=n(2917);e.default=r.module("stealth.geo.timelapse.list",["ccri.angular-utils","ccri.list-view","ccri.popup","stealth.core.geo.ol3.map","stealth.core.utils"]).factory("stealth.geo.timelapse.list.Panel",i.PanelFactory).directive("stGeoTlList",["$log",function(t){return t.debug("stealth.timelapse.list.stTimelapseList: directive defined"),{restrict:"E",template:o,controller:["$scope",function(t){t.onPanelOpen(),t.$on("$destroy",t.onPanelClose)}]}}]).directive("stGeoTlListToolbar",[function(){return{restrict:"E",scope:!1,template:a}}]).directive("stGeoTlListTitle",[function(){return{restrict:"E",scope:{record:"=",title:"@"},template:s}}]).directive("stGeoTlListContent",[function(){return{restrict:"E",scope:{record:"=",contentFields:"=",dtgField:"@"},template:l}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(196),o=n(150),a=n(18),s=n(225),l=n(46),c=n(4),u=n(190),d=n(228),f=n(85),p=n(124),h=n(159),g=n(21),m=n(39),v=n(84),y=n(16),b=n(193),w=n(74),_=n(167),x=n(55),S=n(47),C=n(24),E=n(604),T=function(){function t(t,e,n,r,o,s,c,u,d,f,g){var m=this;this.$interpolate=t,this.$rootScope=e,this.ol3Map=n,this.sidebarManager=r,this.widgetDef=o,this.popupManager=s,this.fieldFormat=u,this.tlManager=d,this.canvas=f,this.canvasLayer=g,this.stateManager=y.StateManager.getInstance(),this.isOpen=!1,this.decorateCard=function(t){var e=m.titleTpl?m.$interpolate(m.titleTpl)(t.scope.record):t.scope.record[m.idField],n=m.canvasLayer.getState().dataView.store.dtgField;t.scope.contentFields=[n].concat(m.canvasLayer.store.getFields()),t.titleWidget=new m.widgetDef({tag:m.getListTemplate("cardTitle","st-geo-tl-list-title"),attrs:'record="record" title="'+e+'"',scope:t.scope,isolateScope:!0}),t.collapsedWidget=null,t.contentWidget=new m.widgetDef({tag:m.getListTemplate("cardContent","st-geo-tl-list-content"),attrs:'record="record" content-fields="contentFields" dtg-field="'+n+'"',scope:t.scope,isolateScope:!0})},this.destroy=function(t){void 0===t&&(t=!1),t&&m.tlManager.removeCanvasLayer(m.canvasLayer.id),m.scope.arrayStore.close(),m.scope.$destroy()},this.extentFilter=function(){var t=m.stateManager.getState(b.TIME_CONTROLS_PATH);t.isPaused&&m.isOpen&&m.getRecords(t.windowStart_s,t.windowEnd_s)},this.filterResolver=function(t){var e=t.toLowerCase();return function(t){return p(h(t),function(t){return l(t)&&!a(t)&&-1!==t.toLowerCase().indexOf(e)})}},this.menuResolver=function(){var t=[];return t.push({name:"Open popup",onClick:function(t){m.scope.arrayStore.getById(t).then(function(t){m.openPopup(t)})}}),t.push({name:"Pan to",onClick:function(t){m.scope.arrayStore.getById(t).then(function(t){m.ol3Map.getView().animate({duration:1e3,center:t[m.canvasLayer.getState().dataView.store.geomField]})})}}),t},this.onPanelClose=function(){m.isOpen=!1,m.overlay.removeFromMap(),m.scope.filterByExtent&&(m.toggleExtentFilter(!1),m.scope.filterByExtent=!0)},this.onMouseEnter=function(t){m.overlay.clear(),m.stateManager.getState(b.TIME_CONTROLS_PATH).isPaused&&m.scope.arrayStore.getById(t).then(function(t){m.overlay.addFeature(new ol.Feature({geometry:new ol.geom.Point(t[m.canvasLayer.getState().dataView.store.geomField])}))})},this.onMouseLeave=function(){m.overlay.clear()},this.onPanelOpen=function(){m.isOpen=!0,m.overlay.addToMap();var t=m.stateManager.getState(b.TIME_CONTROLS_PATH);m.scope.filterByExtent?m.toggleExtentFilter(!0):t.isPaused?m.getRecords(t.windowStart_s,t.windowEnd_s):m.setLoadingStatus(!0)},this.toggleExtentFilter=function(t){var e=m.ol3Map.getView();m.scope.filterByExtent=t,t?e.on(["change:center","change:resolution","change:rotation"],m.debounced_extentListener):e.un(["change:center","change:resolution","change:rotation"],m.debounced_extentListener),m.extentFilter()},this.hideButton=function(){m.sidebarManager.removeButton(m.buttonId),m.buttonId=null,m.destroy()},this.showButton=function(){m.buttonId=m.sidebarManager.addButton(m.canvasLayer.getState().name,"fa-history",400,new m.widgetDef({tag:"st-geo-tl-list",scope:m.scope,isolateScope:!0}),void 0,!1,m.destroy)},this.updateTitle=function(t){m.sidebarManager.setPanelTitle(m.buttonId,t)},this.debounced_extentListener=i(this.extentFilter,200),this.titleTpl=this.getTitleTemplate(),this.overlay=new c({colors:this.getOverlayColors()}),this.idField=g.getState().dataView.store.idField,this.ds=C.DataSourceManager.getDataSourcesById(g.getState().dataView.source.id).first(),this.scope=e.$new(),this.scope.arrayStore=new v.List.ArrayStore([],this.idField||"id"),this.scope.decorateCard=this.decorateCard,this.scope.filterByExtent=!0,this.scope.filterResolver=this.filterResolver,this.scope.isLoading=!1,this.scope.menuResolver=this.menuResolver,this.scope.onMouseEnter=this.onMouseEnter,this.scope.onMouseLeave=this.onMouseLeave,this.scope.onPanelOpen=this.onPanelOpen,this.scope.onPanelClose=this.onPanelClose,this.scope.refresh=null,this.scope.toolbarWidget=this.getToolbarWidget(),this.scope.toggleExtentFilter=this.toggleExtentFilter}return t.prototype.buildCql=function(t,e){var n=g(t[e.dtgField]).toISOString(),r=e.dtgField+" = '"+n+"'",i=t[this.idField];l(i)&&(i="'"+i+"'");var o=this.idField+" = "+i;return w.CqlBuilder.combine(w.CqlOperator.AND,o,r)},t.prototype.getOverlayColors=function(){var t=this.canvasLayer.getState().displayStatus.fillColorRgbArray,e=c(t,function(t){return(255-t).toString(16)});return[f(e,function(t,e){return t+(1===e.length?"0"+e:e)},"#")]},t.prototype.getRecords=function(t,e){this.setLoadingStatus(!0);var n=this.scope.filterByExtent?this.ol3Map.getExtent():null,r=this.canvasLayer.store.searchForListRecords(n,t,e);this.scope.arrayStore.updateAndPrune.apply(this.scope.arrayStore,r),this.scope.arrayStore.sortBy([this.titleTpl?this.$interpolate(this.titleTpl):this.idField],["asc"]),this.setLoadingStatus(!1),this.$rootScope.$apply,this.scope.$applyAsync()},t.prototype.getRecordData=function(t){var e=this.canvasLayer.getState();if(e.dataView.source.type!==S.SourceType.SERVER)return Promise.reject("No DataSource found for "+e.name+".");if(this.ds){var n=this.ds.name,r={count:1,maxFeatures:1,cql_filter:this.buildCql(t,e.dataView.store)};return _.WfsManager.getFeature(this.ds.wfsUrl,n,r).then(function(t){return t.features})}},t.prototype.getTitleTemplate=function(){var t=this.canvasLayer.getState();if(t.dataView.source.type===S.SourceType.SERVER){var e=C.DataSourceManager.getDataSourcesById(t.dataView.source.id).first();if(e)return e.keywordConfig.getIn(["timelapse","list","title"],e.keywordConfig.getIn(["click","search","customPopup","title"],null))}return null},t.prototype.getListTemplate=function(t,e){var n=this.canvasLayer.getState();if(n.dataView.source.type===S.SourceType.SERVER){var r=C.DataSourceManager.getDataSourcesById(n.dataView.source.id).first();if(r)return r.keywordConfig.getIn(["timelapse","list",t],e)}return e},t.prototype.getToolbarWidget=function(){return new this.widgetDef({tag:this.getListTemplate("listTitle","st-geo-tl-list-toolbar"),scope:this.scope,isolateScope:!0})},t.prototype.setLoadingStatus=function(t){this.scope.isLoading=!!t,this.scope.refresh=t?u:null},t.prototype.openPopup=function(t){var e=this;this.getRecordData(t).then(function(t){if(t&&t.length){var n=r.element(".primaryDisplay > ccri-popup-container").data("ccri.popup.containerId"),i=e.$rootScope.$new(),a=e.popupManager.getViewportDim(n),s=e.canvasLayer.store.boundStartMillis(1e3*e.time.start_s),l=e.canvasLayer.store.boundEndMillis(1e3*e.time.end_s);E.PopupFilter.buildPopupResult(e.canvasLayer,t,s,l).then(function(t){i.results=o([e.canvas.mapLayer.buildSearchPointWidgetsForResponse(t,i)]);var r=new m.WidgetDef({tag:"ccri-popup-components-tab-container",scope:i,attrs:'results="results" active-tab-idx="activeTabIdx" popup-id="popupId"'});i.popupId=e.popupManager.displayPopup(n,e.canvasLayer.getState().name,"timelapse","fa-history",r,{offsets:[a[0]/2,a[1]/2],onClose:function(){i.$destroy(),i=null}}),e.$rootScope.$applyAsync()})}else x.alerter.errorMsg("Failed to open popup")},function(){x.alerter.errorMsg("Failed to open popup")})},t.prototype.updateList=function(t){t&&!s(this.time,t)&&(this.time=t,this.isOpen&&this.getRecords(t.start_s,t.end_s))},t}();function M(t,e,n,r,i,o,a,s){return d(T,t,e,n,r,i,o,a,s)}e.ListPanel=T,M.$inject=["$interpolate","$rootScope","ol3Map","sidebarManager","ccri.angular-utils.WidgetDef","ccri.popup.manager","stealth.core.geo.ol3.overlays.Vector","stealth.core.popup.components.fieldFormat"],e.PanelFactory=M},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2891),o=n(2905),a=n(2906),s=n(2907),l=n(2908),c=n(2909),u=n(2910),d=n(2911);e.default=r.module("stealth.geo.wizard",["ccri.angular-utils","ccri.area-definition","stealth.wizard",i.default]).factory("stealth.geo.wizard.AreaStep",o.stepFactory).directive("stGeoAreaStepForm",[function(){return{restrict:"E",template:s,controller:a.AreaStepController}}]).factory("stealth.geo.wizard.OptionsStep",l.stepFactory).directive("stGeoOptionsStepForm",[function(){return{restrict:"E",template:c}}]).factory("stealth.geo.wizard.SourceTimeStep",u.stepFactory).directive("stGeoSourceTimeStepForm",[function(){return{restrict:"E",template:d}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2892),o=n(2893),a=n(2894),s=n(2895),l=n(2896),c=n(2898),u=n(2899),d=n(2900),f=n(2901),p=n(2902),h=n(2903),g=n(2904);e.default=r.module("stealth.geo.wizard.components",["ccri.angular-utils"]).directive("stGeoAreaSelector",[function(){return{restrict:"E",template:o,scope:{},controller:i.AreaSelectorController,controllerAs:"ctrl",bindToController:{featureCreator:"=",toolControlsConfig:"="}}}]).directive("stGeoDataSourceSelector",[function(){return{restrict:"E",template:s,scope:{preselectedSource:"=",getDataSources:"=",onChange:"="},controller:a.DataSourceController,controllerAs:"ctrl",bindToController:!0}}]).directive("stGeoDataPropsSelector",[function(){return{restrict:"E",template:c,scope:{preselectedFields:"=",arrowOnly:"=",datasourceDescription:"=",updateSelections:"="},controller:l.DataPropsController,controllerAs:"ctrl",bindToController:!0}}]).directive("stGeoStoreNameForm",[function(){return{restrict:"E",template:d,scope:{preselectedName:"=",onChange:"=",wizardForm:"="},controller:u.StoreNameController,controllerAs:"ctrl",bindToController:!0}}]).directive("stGeoSaveQueryForm",[function(){return{restrict:"E",template:p,scope:{preselectedSelections:"=",onChange:"=",options:"=",nameEdited:"="},controller:f.SaveQueryController,controllerAs:"ctrl",bindToController:!0}}]).directive("stGeoTimeRangeSelector",[function(){return{restrict:"E",template:g,scope:{preselectedTimeRange:"=",timeRangeOptions:"=",onChange:"=",storageKeyPrefix:"=",fullDayOnly:"="},controller:h.TimeRangeController,controllerAs:"ctrl",bindToController:!0}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),i=function(){function t(t){var e=this;this.scope=t,this.selectedTool=null;var n=[{name:"coordRect",label:"Draw Rectangle",iconClass:"fa-square"},{name:"polygon",label:"Draw Polygon",iconClass:"fa-pencil"},{name:"radiusCircle",label:"Draw Circle",iconClass:"fa-circle"},{name:"bufferFeature",label:"Existing Feature",iconClass:"fa-crosshairs"},{name:"mapView",label:"Map View Extent",iconClass:"fa-arrows-alt"},{name:"wholeEarth",label:"Whole Earth",iconClass:"fa-globe"}],i=function(t){e.selectedTool=r(n,"name",t.toolName)},o=function(){e.selectedTool=null};this.featureCreator.on("toolstarted",i),this.featureCreator.on("toolfinished",o),this.scope.$on("$destroy",function(){e.featureCreator&&(e.featureCreator.un("toolstarted",i),e.featureCreator.un("toolfinished",o))})}return t.$inject=["$scope"],t}();e.AreaSelectorController=i},function(t,e){t.exports='<div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center">\n        <span class="field-descriptor text-right buf-lg-mr">Select Area:</span>\n        <ccri-area-definition-drawtool-selector\n            feature-creator="ctrl.featureCreator"\n            class="field-input"\n        ></ccri-area-definition-drawtool-selector>\n    </div>\n    <span ng-class="{\'ng-hide\' : !ctrl.selectedTool}">\n        <ccri-area-definition-more-details-toggle\n            class="flex-row flex-justify-content-flex-end"\n        ></ccri-area-definition-more-details-toggle>\n    </span>\n    <ccri-area-definition-tool-controls-switcher\n        feature-creator="ctrl.featureCreator"\n        tool-controls="ctrl.toolControlsConfig"\n    ></ccri-area-definition-tool-controls-switcher>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),i=n(2),o=n(47),a=n(24),s=function(){function t(){var t=this;this.requestId=0,this.labelFn=function(e){if(r(t.dataSources,function(t){return t.title===e.title&&t.id!==e.id})){var n=a.DataSourceManager.getOgcConfigById(e.ogcId);return e.title+" ("+n.title+")"}return e.title},this.selectFn=function(e){return t.requestId+=1,t.getDescription(e,t.requestId),e},this.getDataSources().then(function(e){t.dataSources=e,t.currentSource=t.preselectedSource?t.preselectedSource:i(t.dataSources,0),t.currentSource&&t.getDescription(t.currentSource,t.requestId)})}return t.prototype.getDescription=function(t,e){var n=this;this.lastDataSourceId!==t.id&&o.KeywordHelper.getFeatureProperties(t).then(function(r){var i={properties:r,defaultFieldNames:o.KeywordHelper.getDefaultTimelapseFieldNames(t),arrowProperties:o.KeywordHelper.getArrowFieldProperties(t)};n.requestId===e&&(n.lastDataSourceId=t.id,n.onChange(t,i))})},t.$inject=[],t}();e.DataSourceController=s},function(t,e){t.exports='<div class="flex-row flex-align-items-center">\n    <span class="field-descriptor text-right buf-lg-mr">Data Source:</span>\n    <span class="field-input">\n        <ccri-angular-utils-select\n            ng-model="ctrl.currentSource"\n            from-list="ctrl.dataSources"\n            select-fn="ctrl.selectFn"\n            label-fn="ctrl.labelFn"\n            placeholder="Select a Data Source"\n            empty-message="None available"\n        ></ccri-angular-utils-select>\n    </span>\n    \x3c!-- hidden input to disable the Next button if the dropdown is unselected --\x3e\n    <input type="hidden" name="dataSourceSelection" ng-model="ctrl.currentSource" required>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(23),o=n(2),a=n(64),s=n(17),l=n(4),c=n(285),u=n(1059),d=n(47),f=function(){function t(t,e){var n=this;this.fieldSelections=this.preselectedFields,this.initialized=!1,this.vm={nextAdditionalField:null},this.labelFn=function(t){return n.attributeLabel(t)},this.dateTimeFilter=function(t){return"date-time"===o(i(n.featureTypeProperties,{name:t}),"localType")},this.geomFilter=function(t){return"Point"===o(i(n.featureTypeProperties,{name:t}),"localType")},this.colorByFilter=function(t){return a(["boolean","string","int"],o(i(n.featureTypeProperties,{name:t}),"localType").toLowerCase())},this.isUnusedAttribute=function(t){return!(n.fieldSelections.dtgField&&t===n.fieldSelections.dtgField||n.fieldSelections.geomField&&t===n.fieldSelections.geomField||n.arrowProperties&&a(n.arrowProperties.requiredFields,t))};var r=t.$on("$destroy",function(){r(),r=null,s&&(s(),s=null),l&&(l(),l=null),c&&(c(),c=null)}),s=t.$watch(function(){return n.fieldSelections.dtgField},function(t,e){t!==e&&n.pruneAdditionalFields()}),l=t.$watch(function(){return n.fieldSelections.geomField},function(t,e){t!==e&&n.pruneAdditionalFields()}),c=t.$watch("ctrl.datasourceDescription",function(t,e){t!==e&&n.updateSourceProps()});this.attributeLabel=e("attributeLabel")}return t.prototype.addNextAdditional=function(){this.fieldSelections.arrowFields.push(this.vm.nextAdditionalField),this.updateSelections(this.fieldSelections),this.vm.nextAdditionalField=null},t.prototype.pruneAdditionalFields=function(){var t=this;r(this.fieldSelections.arrowFields,function(e,n){t.isUnusedAttribute(e)||t.fieldSelections.arrowFields.splice(n,1)})},t.prototype.updateSourceProps=function(){var t=this;this.featureTypeProperties=this.datasourceDescription.properties,this.featureTypePropertyNames=l(this.featureTypeProperties,"name"),this.arrowProperties=this.datasourceDescription.arrowProperties,this.fieldSelections=c(this.fieldSelections,["useArrow","arrowFields","sortOnServer"]),r(this.datasourceDescription.defaultFieldNames,function(e,n){t.initialized?t.fieldSelections[n]=e:t.fieldSelections[n]=t.preselectedFields[n]?t.preselectedFields[n]:e}),this.arrowProperties.dataSourceSupportsArrow&&s(this.featureTypeProperties)?(!this.initialized&&this.preselectedFields.arrowFields?this.fieldSelections.arrowFields=this.preselectedFields.arrowFields:this.fieldSelections.arrowFields=this.arrowProperties.suggestedFields,this.fieldSelections.arrowFields.toArray instanceof Function&&(this.fieldSelections.arrowFields=this.fieldSelections.arrowFields.toArray(),this.fieldSelections.arrowFields=u.apply(void 0,[this.fieldSelections.arrowFields].concat(this.arrowProperties.requiredFields))),this.arrowProperties.fieldOptions||(this.arrowProperties.fieldOptions=this.featureTypePropertyNames)):this.arrowProperties=null,this.fieldSelections.isLineQuery=this.isLineQuery(),this.updateSelections(this.fieldSelections),this.initialized=!0},t.prototype.isLineQuery=function(){return d.KeywordHelper.isLineQuery({dtgField:i(this.featureTypeProperties,{name:this.fieldSelections.dtgField}),startDtgField:i(this.featureTypeProperties,{name:this.fieldSelections.startDtgField}),endDtgField:i(this.featureTypeProperties,{name:this.fieldSelections.endDtgField})})},t.$inject=["$scope","$filter"],t}();e.DataPropsController=f},function(t,e,n){var r=n(913),i=n(510);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},function(t,e){t.exports='<div ng-if="ctrl.featureTypePropertyNames">\n    <div class="flex-row flex-align-items-center buf-xs-mt"\n         ng-if="ctrl.arrowProperties.dataSourceSupportsArrow && !ctrl.arrowOnly">\n        <span class="field-descriptor text-right buf-lg-mr">&nbsp;</span>\n        <ccri-angular-utils-checkbox\n            ng-model="ctrl.fieldSelections.useArrow"\n            ng-change="ctrl.updateSelections(ctrl.fieldSelections)"\n            class="field-input buf-sm-pl text-muted">\n            Enable Charts\n        </ccri-angular-utils-checkbox>\n        <span class="field-unit">&nbsp;</span>\n    </div>\n    <div class="flex-row flex-align-items-center buf-xs-mt data-props-time-field"\n         ng-if="!ctrl.isLineQuery() &&\n                ctrl.featureTypePropertyNames.filter(ctrl.dateTimeFilter).length !== 1">\n        <span class="field-descriptor text-right buf-lg-mr">Time:</span>\n        <span class="field-input">\n            <ccri-angular-utils-select\n                ng-model="ctrl.fieldSelections.dtgField"\n                ng-change="ctrl.updateSelections(ctrl.fieldSelections)"\n                from-list="ctrl.featureTypePropertyNames"\n                label-fn="ctrl.labelFn"\n                filter-fn="ctrl.dateTimeFilter"\n                placeholder="Select time field"\n                empty-message="None available"\n            ></ccri-angular-utils-select>\n        </span>\n        <span class="field-unit">&nbsp;</span>\n    </div>\n    <div class="flex-row flex-align-items-center buf-xs-mt data-props-geometry-field"\n         ng-if="!ctrl.isLineQuery() &&\n                ctrl.featureTypePropertyNames.filter(ctrl.geomFilter).length !== 1">\n        <span class="field-descriptor text-right buf-lg-mr">Geometry:</span>\n        <span class="field-input">\n            <ccri-angular-utils-select\n                ng-model="ctrl.fieldSelections.geomField"\n                ng-change="ctrl.updateSelections(ctrl.fieldSelections)"\n                from-list="ctrl.featureTypePropertyNames"\n                label-fn="ctrl.labelFn"\n                filter-fn="ctrl.geomFilter"\n                placeholder="Select geom field"\n                empty-message="None available"\n            ></ccri-angular-utils-select>\n        </span>\n        <span class="field-unit">&nbsp;</span>\n    </div>\n    <div class="flex-row flex-align-items-center buf-xs-mt"\n         ng-class="{\'ng-hide\': ctrl.arrowProperties.dataSourceSupportsArrow && ctrl.fieldSelections.useArrow}">\n        <span class="field-descriptor text-right buf-lg-mr">Color by:</span>\n        <span class="field-input">\n            <ccri-angular-utils-select\n                ng-model="ctrl.fieldSelections.idField"\n                ng-change="ctrl.updateSelections(ctrl.fieldSelections)"\n                from-list="ctrl.featureTypePropertyNames"\n                label-fn="ctrl.labelFn"\n                filter-fn="ctrl.colorByFilter"\n                placeholder="Select color-by field"\n                empty-message="None available"\n                memory-num="4"\n                localstorage-prefix="{{ctrl.currentDataSource.title}}.attribute"\n            ></ccri-angular-utils-select>\n        </span>\n        <span class="field-unit">&nbsp;</span>\n    </div>\n    <div class="flex-row flex-align-items-top buf-xs-mt"\n         ng-if="ctrl.arrowProperties.dataSourceSupportsArrow && ctrl.fieldSelections.useArrow">\n        <span class="field-descriptor flex-row flex-justify-content-flex-end buf-lg-mr"\n                style="margin-top:4px">\n            <span style="margin-right: 6px">\n                <span uib-tooltip="Additional fields can be used as Color By fields,\n                            and for filtering in the chart view"\n                    tooltip-append-to-body="true" tooltip-placement="bottom"\n                    tooltip-animation="true" tooltip-popup-delay="300">\n                    <i class="fa fa-question-circle"></i>\n                </span>\n            </span>\n            Add\'l fields:\n        </span>\n        <div class="field-input flex-column">\n            \x3c!-- Arrow Required fields --\x3e\n            <div class="buf-xs-mb faux-input disabled-gray data-props-required-addl-field" style="width:100%"\n                    ng-repeat="field in ctrl.arrowProperties.requiredFields track by $index">\n                {{ctrl.arrowProperties.requiredFields[$index] | attributeLabel}}\n            </div>\n            \x3c!-- Arrow Additional fields --\x3e\n            <div class="flex-row flex-align-items-center buf-xs-mb data-props-addl-fields"\n                    ng-repeat="field in ctrl.fieldSelections.arrowFields track by $index">\n                <ccri-angular-utils-select\n                    ng-model="ctrl.fieldSelections.arrowFields[$index]"\n                    ng-change="ctrl.updateSelections(ctrl.fieldSelections)"\n                    from-list="ctrl.arrowProperties.fieldOptions"\n                    filter-fn="ctrl.isUnusedAttribute"\n                    label-fn="ctrl.labelFn"\n                    placeholder="Select a field"\n                    empty-message="None available"\n                    memory-num="4"\n                    localstorage-prefix="{{ctrl.currentDataSource.title}}.attribute"\n                    required\n                ></ccri-angular-utils-select>\n                <div class="clickable text-muted buf-sm-mh"\n                        ng-click="ctrl.fieldSelections.arrowFields.splice($index, 1)">\n                    <i class="fa fa-close"></i>\n                </div>\n            </div>\n            \x3c!-- Persistent empty dropdown --\x3e\n            <div style="padding-right: 17px">\n                <ccri-angular-utils-select\n                    ng-model="ctrl.vm.nextAdditionalField"\n                    ng-change="ctrl.addNextAdditional()"\n                    from-list="ctrl.arrowProperties.fieldOptions"\n                    filter-fn="ctrl.isUnusedAttribute"\n                    label-fn="ctrl.labelFn"\n                    placeholder="Select a field"\n                    empty-message="None available"\n                    memory-num="4"\n                    localstorage-prefix="{{ctrl.currentDataSource.title}}.attribute"\n                ></ccri-angular-utils-select>\n            </div>\n        </div>\n    </div>\n    <div class="flex-row flex-align-items-center buf-xs-mt"\n         ng-if="::ctrl.showBinSortOption">\n        <span class="field-descriptor text-right buf-lg-mr">&nbsp;</span>\n        <span class="field-input"\n              ng-click="ctrl.fieldSelections.sortOnServer = !ctrl.fieldSelections.sortOnServer; ctrl.updateSelections(ctrl.fieldSelections)">\n            <i class="fa fa-fw"\n               ng-class="ctrl.fieldSelections.sortOnServer ? \'fa-check-square-o\' : \'fa-square-o\'"\n            ></i>&nbsp;Sort on server\n        </span>\n        <span class="field-unit">&nbsp;</span>\n    </div>\n    <select class="ng-hide"\n            ng-model="ctrl.fieldSelections.startDtgField"\n            ng-required="ctrl.isLineQuery()">\n    </select>\n    <select class="ng-hide"\n            ng-model="ctrl.fieldSelections.endDtgField"\n            ng-required="ctrl.isLineQuery()">\n    </select>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var t=this;this.onNameChange=function(){t.onChange(t.currentName)},this.currentName=this.preselectedName}return t.$inject=[],t}();e.StoreNameController=r},function(t,e){t.exports='<div class="labeled-wide-field">\n    <span class="field-descriptor">&nbsp;</span>\n    <span ng-class="{\'error-text\': ctrl.wizardForm.nonDefaultName.$invalid}">\n        Give this a meaningful name.\n    </span>\n</div>\n<div class="vertically-buffered labeled-wide-field"  style="margin-top:4px">\n    <span class="field-descriptor text-right">Name:</span>\n    <input class="field-input"\n       ng-model="ctrl.currentName"\n       ng-change="ctrl.onNameChange()"\n       ng-class="{\'error-field\': ctrl.wizardForm.nonDefaultName.$invalid}"\n       required>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(109),i=function(){function t(){this.currentSelections=r(this.preselectedSelections),this.onChange(this.currentSelections)}return t.$inject=[],t}();e.SaveQueryController=i},function(t,e){t.exports='<div ng-if="ctrl.options.isSaveable">\n    <div class="vertically-buffered">\n        <div class="labeled-wide-field buf-sm-mb" ng-if="::!ctrl.options.savingIsNotOptional">\n            <span class="field-descriptor">&nbsp;</span>\n            <span class="field-input clickable" ng-click="ctrl.currentSelections.shouldBeSaved = !ctrl.currentSelections.shouldBeSaved; ctrl.onChange(ctrl.currentSelections);">\n                <i class="fa fa-fw" ng-class="ctrl.currentSelections.shouldBeSaved ? \'fa-check-square-o\' : \'fa-square-o\'"></i>\n                Save filter for future use?\n            </span>\n        </div>\n\n        \x3c!-- If the user is saving a new query, make them change the name from the default pre-populated name.\n                This is a hidden field validator, to disable the wizard next button (via form invalidity).\n                It\'s always empty, and when it becomes required, it triggers the validation. --\x3e\n        <input name="nonDefaultName" type="hidden" ng-model="_empty_"\n                ng-required="ctrl.currentSelections.shouldBeSaved && !ctrl.options.editMode && !ctrl.nameEdited()">\n\n        <div class="labeled-wide-field" ng-if="::!ctrl.options.sharingIsNotOptional">\n            <span class="field-descriptor">&nbsp;</span>\n            <span class="field-input clickable"\n                ng-click="ctrl.currentSelections.shouldBeShared = (ctrl.currentSelections.shouldBeSaved ? !ctrl.currentSelections.shouldBeShared : ctrl.currentSelections.shouldBeShared); ctrl.onChange(ctrl.currentSelections);"\n                ng-disabled="!ctrl.currentSelections.shouldBeSaved">\n                <i class="fa fa-fw" ng-class="ctrl.currentSelections.shouldBeShared ? \'fa-check-square-o\' : \'fa-square-o\'"></i>\n                Share this filter with others?\n            </span>\n        </div>\n    </div>\n\n    <div class="flex-row labeled-wide-field">\n        <span class="field-descriptor text-right" ng-disabled="!ctrl.currentSelections.shouldBeSaved">Classification:</span>\n        <span class="field-input">\n            <ccri-angular-utils-select\n                ng-model="ctrl.currentSelections.classification"\n                required\n                ng-change="ctrl.onChange(ctrl.currentSelections)"\n                select-disabled="!ctrl.currentSelections.shouldBeSaved"\n                from-list="ctrl.options.classifications"\n                placeholder="Select a classification"\n                empty-message="None available"\n            ></ccri-angular-utils-select>\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(14),o=n(21),a=function(){function t(t){var e=this;this.$scope=t,this.initialized=!1;var n,a,s=t.$on("$destroy",function(){s(),s=null,n&&(n(),n=null),a&&(a(),a=null)});n=t.$watch("ctrl.timeRangeOptions",function(t,n){if(!e.initialized||t!==n){if(!i(t)){var a=r(t,"maxTime",null);e.maxTimeRangeMillis=t.maxTimeRangeMillis,e.minTime=o.utc(r(t,"minTime",null)),e.maxTime="NOW"===a?a:o.utc(a),e.largeTimeRangeWarning=t.largeTimeRangeWarning}e.initialized=!0}}),this.selectedTimeRange=this.preselectedTimeRange,a=t.$watchCollection(function(){return e.selectedTimeRange},function(){e.onChange(e.selectedTimeRange)}),this.defaultEndDtg=o().utc(),this.defaultStartDtg=this.defaultEndDtg.clone().subtract(1,"hours")}return t.$inject=["$scope"],t}();e.TimeRangeController=a},function(t,e){t.exports='<div class="text-faded buf-lg-mb">\n    Data available for time range:<br>\n    <st-date-range class="text-faded"\n        start-date="ctrl.minTime"\n        end-date="ctrl.maxTime"\n        moment-time-format="HH:mm:ss"\n        value-placeholder="UNKNOWN"\n        both-placeholder="UNKNOWN"\n    ></st-date-range>\n</div>\n<ccri-angular-utils-time-range-input start="ctrl.selectedTimeRange.startDtg" end="ctrl.selectedTimeRange.endDtg"\n        localstorage-prefix="{{::ctrl.storageKeyPrefix}}"\n        time-range-input-options="{\n            timeRequired: true,\n            startRequired: true,\n            endRequired: true,\n            maxDuration: ctrl.maxTimeRangeMillis,\n            fullDayOnly: ctrl.fullDayOnly,\n            defaultRange: {\n                start: ctrl.defaultStartDtg,\n                end: ctrl.defaultEndDtg\n            },\n            shouldIntersectRange: {\n                start: ctrl.minTime,\n                end: ctrl.maxTime,\n                full: true\n            },\n            largeTimeRangeWarning: ctrl.largeTimeRangeWarning\n        }"\n></ccri-angular-utils-time-range-input>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o,a,s,l=n(34),c=n(46),u=n(29),d=n(150),f=n(4),p=n(85),h=n(6);function g(t,n,l,c,u){return r=t,i=n,o=l,a=c,s=u,e.service}e.service=function(t){return function(e,n){var g=new h.format.WKT({splitCollection:!0}),m=t.supportedTools||["coordRect","polygon","radiusCircle","bufferFeature","mapView","wholeEarth"],v=new a({addLayerToMap:t.addLayerToMap,supportedTools:m,disableMultiple:!!t.disableMultiple});n.cqlMaxLength=t.cqlMaxLength,n.getCqlLength=function(){if(l(t.buildCql)){var n=t.buildCql(e);return c(n)?n.length:void 0}},n.featureCreator=v,n.toolControlsConfig=p(m,function(t,e){return t[e]=!0,t},{});var y=n.$new();y.featureCreator=v;var b=function(t){if(0!==t.length){var n=u(t,function(t){var e=t.getGeometry();return e instanceof h.geom.Polygon||e instanceof h.geom.MultiPolygon});if(1===n.length)e.generatedFeatures=g.writeFeatures(n);else{var r=f(n,function(t){var e=t.getGeometry();return e?e.getCoordinates():null}),i=new h.geom.MultiPolygon(r);e.generatedFeatures=g.writeFeatures([new h.Feature(i)])}}},w=function(){v.getFeatures().then(b).then(function(){n.cqlLength=n.getCqlLength(),l(t.onFeaturesChanged)&&t.onFeaturesChanged()})};v.on("featureschanged",w);var _=function(){v.un("featureschanged",w),v=null};return n.$on("$destroy",function(){v?v.finish().then(_):_()}),new s(t.stepName||"Select area",new o({tag:"st-geo-area-step-form",attrs:null,scope:n}),new o({tag:"st-wiz-draw-toolbar",scope:y}),!1,function(){i(function(){if(n.featureCreator.clear(),c(e.generatedFeatures)){var t=g.readFeatures(e.generatedFeatures),r=d(f(t,function(t){var e;if(t.getGeometry()instanceof h.geom.MultiPolygon){var n=t.getGeometry();e=n?f(n.getPolygons(),function(t){return new h.Feature(t)}):null}return e}));v.addFeatures(r[0]?r:t)}n.cqlLength=n.getCqlLength()},500)},function(t){if(!0===t)return v.finishActiveTool().then(function(){return v.getFeatures()}).then(function(t){if(!t.length)return r.reject();b(t)});v.finishActiveTool(!0)},!1)}},g.$inject=["$q","$timeout","ccri.angular-utils.WidgetDef","ccri.area-definition.FeatureCreator","stealth.wizard.Step"],e.stepFactory=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.$scope=t,t.hasShapes=function(){if(!arguments.length)return!!t.featureCreator.hasFeatures()||null};var e=function(){t.toolWasOpened=!0,t.featureCreator.un("toolstarted",e)};t.featureCreator.on("toolstarted",e),t.$on("$destroy",function(){t.featureCreator.un("toolstarted",e)})}return t.$inject=["$scope"],t}();e.AreaStepController=r},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="AreaDefinitionWizard">\n        <st-wiz-section>\n            <st-geo-area-selector\n                feature-creator="featureCreator"\n                tool-controls-config="toolControlsConfig"\n            ></st-geo-area-selector>\n            <st-wiz-cql-length\n                ng-hide="!toolWasOpened"\n                ng-model="cqlLength"\n                cql-maxlength="{{cqlMaxLength}}">\n            </st-wiz-cql-length>\n        </st-wiz-section>\n    </div>\n    <input type="hidden" name="hasShapes" ng-model="hasShapes" ng-model-options="{getterSetter:true}" required>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(22),a=n(2),s=n(34),l=n(46);function c(t,n){return r=t,i=n,e.service}e.service=function(t){return function(e,n){n.cqlMaxLength=t.cqlMaxLength,n.getCqlLength=function(){return!arguments.length&&s(t.buildCql)?(e.finalCql=t.buildCql(e),l(e.finalCql)?e.finalCql.length:0):0};var c,u,d=!1;return e.storeName&&(d=!0,c=!0),n.onNameChange=function(t){e.storeName=t,c=!0},n.saveQueryOptions=t.saveQueryOptions,n.updateSelections=function(t){o(t,function(t,n){e[n]=t})},n.hasNameBeenEdited=function(){return c},new i("Set Options",new r({tag:"st-geo-options-step-form",attrs:null,scope:n,isolateScope:!1}),null,!0,function(){if(n.featureTypeProperties=t.getFeatureTypeProperties(e),e.selectedSource.keywordConfig.hasIn(["query","customWizardOptions"])){var i=e.selectedSource.keywordConfig.getIn(["query","customWizardOptions"]);n.customOptionsWidget=new r({tag:i,scope:n,attrs:'selections="selections" feature-type-properties="featureTypeProperties" on-name-change="onNameChange" save-query-options="saveQueryOptions" update-selections="updateSelections" has-name-been-edited="hasNameBeenEdited" save-query-selections="saveQuerySelections"cql-max-length="cqlMaxLength"get-cql-length="getCqlLength"'})}e.storeName=d||u===e.selectedSource.name?e.storeName:t.getStoreName(e),u=e.selectedSource.name,a(t,["saveQueryOptions","isSaveable"])&&(n.saveQuerySelections={shouldBeSaved:!!e.shouldBeSaved,shouldBeShared:!!e.shouldBeShared,classification:e.classification||a(t,["saveQueryOptions","defaultClassification"])})},function(){e.selectedSource.keywordConfig.hasIn(["query","customWizardOptions"])||(e.cqlParams={additionalCql:e.cql})},!1)}},c.$inject=["ccri.angular-utils.WidgetDef","stealth.wizard.Step"],e.stepFactory=c},function(t,e){t.exports='<ng-form name="wizardForm">\n    <ccri-angular-utils-widget-compiler widget-def="customOptionsWidget"\n        ng-if="::customOptionsWidget">\n    </ccri-angular-utils-widget-compiler>\n\n    <div ng-if="::!customOptionsWidget">\n        <div class="vertically-buffered labeled-wide-field">\n            <span class="field-label">Additional filter:</span>\n            <span class="field">\n                <ccri-angular-utils-typeahead\n                    ng-model="selections.cql"\n                    memory-num="5"\n                    localstorage-prefix="{{selections.selectedSource.title}}.cql"\n                    placeholder="CQL filter"\n                    typeahead-editable="true"\n                ></ccri-angular-utils-typeahead>\n            </span>\n        </div>\n        <div class="vertically-buffered" ng-switch="featureTypeProperties">\n            <div ng-switch-when="unavailable" class="alert alert-warning">\n                <i class="fa fa-warning"></i> There is no feature type description for this layer.\n            </div>\n            <div ng-switch-default>\n                <section class="vertically-buffered section-boxed" ng-class="{\'ng-hide\': !featureTypeProperties}">\n                    <div class="section-boxed-top">\n                        Properties for <strong>{{::selections.selectedSource.title}}</strong>\n                    </div>\n                    <div class="section-boxed-bottom">\n                        <table class="table-condensed">\n                            <tr ng-repeat="property in featureTypeProperties">\n                                <td>{{::property.name}}</td>\n                                <td><code>{{::property.localType}}</code></td>\n                            </tr>\n                        </table>\n                    </div>\n                </section>\n            </div>\n        </div>\n        <st-geo-store-name-form\n            preselected-name="selections.storeName"\n            on-change="onNameChange"\n            wizard-form="wizardForm">\n        </st-geo-store-name-form>\n        <st-geo-save-query-form\n            preselected-selections="saveQuerySelections"\n            on-change="updateSelections"\n            options="saveQueryOptions"\n            name-edited="hasNameBeenEdited">\n        </st-geo-save-query-form>\n        <st-wiz-cql-length\n            name="cqlTotalLength"\n            ng-model="getCqlLength"\n            ng-model-options="{getterSetter:true}"\n            cql-maxlength="{{cqlMaxLength}}">\n        </st-wiz-cql-length>\n    </div>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(5),a=n(22),s=n(2),l=n(34),c=n(327),u=n(15),d=n(57),f=n(24),p=n(47),h={useArrow:!1,arrowFields:null,dtgField:null,geomField:null,idField:null,altitude:null,heading:null,startDtgField:null,endDtgField:null,sortOnServer:!1};function g(t,n){return r=t,i=n,e.service}e.service=function(t){var e=t.keywordPath.concat("group");return function(n,g){return g.options=t,g.getDataSources=function(){if(t.originalDataSource)return p.KeywordHelper.getLayersThatMatchFeatureProperties(t.originalDataSource,t.keywordPath).then(function(t){return t}).catch(function(t){return d.log.error(t),Promise.reject(t)});var n=f.DataSourceManager.getDataSourcesByKeyword(t.keywordPath).sort(function(t,n){var r=t.keywordConfig.getIn(e,"z"),i=n.keywordConfig.getIn(e,"z"),o=r<i?-1:r>i?1:0;return 0===o&&(o=t.title<n.title?-1:t.title>n.title?1:0),o}).toArray();return Promise.resolve(n)},g.onSourceChange=function(e,r){g.$applyAsync(function(){n.selectedSource=e,n.dataSourceDescription=r,g.timeRangeOptions={maxTimeRangeMillis:parseInt(e.keywordConfig.getIn(t.keywordPath.concat("maxTimeRangeMillis")),10)||Number.POSITIVE_INFINITY,maxTime:e.keywordConfig.getIn(t.keywordPath.concat("maxTime")),minTime:e.keywordConfig.getIn(t.keywordPath.concat("minTime")),largeTimeRangeWarning:e.keywordConfig.getIn(t.keywordPath.concat("largeTimeRangeWarning"),o.Map()).toJS()}}),l(t.onSourceChange)&&t.onSourceChange(e,r)},g.getCurrentDataSource=function(){return n.selectedSource},g.updateSelections=function(t){a(t,function(t,e){n[e]=t})},g.storageKeyPrefix=t.storageKeyPrefix||u.config.get("app.context"),g.summaryHeatmap=t.summaryHeatmap,g.summaryHeatmap&&(h.useArrow=!0),new i("Select data source and time range",new r({tag:"st-geo-source-time-step-form",attrs:null,scope:g,isolateScope:!1}),null,!0,function(){n.selectedSource&&(g.preselectedSource=n.selectedSource),g.preselectedFields=c(h,function(t,e){return s(n,e,t)}),g.preselectedTimeRange={startDtg:n.startDtg||null,endDtg:n.endDtg||null}},null,!1)}},g.$inject=["ccri.angular-utils.WidgetDef","stealth.wizard.Step"],e.stepFactory=g},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="AsHistoricalWizard">\n\n        <div class="section--buffer-next"></div>\n\n        <div ng-if="options.originalDataSource && !options.editing">\n            \x3c!-- Metadata --\x3e\n            <div class="info-row">\n                <span class="text-faded">Name: {{ ::options.queryName }}</span>\n            </div>\n            <div class="info-row">\n                <span class="text-faded">DataSource: {{ options.originalDataSource.title }}</span>\n            </div>\n            <div class="info-row info-row--buffer-next">\n                <span class="info-descriptor text-faded">Filter:&nbsp;</span>\n                <div class="info-content"\n                        ng-class="expandedCqlCustom ? \'info-content--expanded\' : \'info-content--collapsed\';"\n                        ng-init="expandedCqlCustom = false;"\n                        ng-click="expandedCqlCustom = !expandedCqlCustom;"\n                        ng-if="options.filter">\n                    {{ ::options.filter }}\n                </div>\n                <div class="info-content" ng-if="!options.filter">None</div>\n                <span class="info-unit">&nbsp;</span>\n            </div>\n        </div>\n        \n        <st-wiz-section>\n            <div class="buf-lg-pt">\n                <st-geo-data-source-selector\n                    preselected-source="preselectedSource"\n                    get-data-sources="getDataSources"\n                    on-change="onSourceChange">\n                </st-geo-data-source-selector>\n            </div>\n            <div class="buf-lg-pb">\n                <st-geo-data-props-selector\n                    preselected-fields="preselectedFields"\n                    arrow-only="summaryHeatmap"\n                    datasource-description="selections.dataSourceDescription"\n                    update-selections="updateSelections">\n                </st-geo-data-props-selector>\n            </div>\n        </st-wiz-section>\n        <st-wiz-section>\n            <div class="buf-lg-pt">\n                <st-geo-time-range-selector\n                    preselected-time-range="preselectedTimeRange"\n                    time-range-options="timeRangeOptions"\n                    on-change="updateSelections"\n                    storage-key-prefix="storageKeyPrefix"\n                    full-day-only="summaryHeatmap">\n                </st-geo-time-range-selector>\n            </div>\n        </st-wiz-section>\n    </div>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(224),o=n(30),a=n(15),s=n(72),l=n(47),c=function(){function t(t,e,n,r,i,o,a){this.areaStep=t,this.optionsStep=e,this.sourceTimeStep=n,this.WizardRunner=r,this.TLManager=i,this.wizardOptions=o,this.wizardUtils=a}return t.prototype.launchWizard=function(t,e,n){var s=this,l=o({},this.wizardOptions,e),c=a.config.get("ogc.cqlMaxLength",1/0),u=r(l,"classifications")||a.config.get("classification.options",["UNCLASSIFIED"]);return this.WizardRunner.run({steps:[this.sourceTimeStep({summaryHeatmap:l.summaryHeatmap,keywordPath:["timelapse","historical"],storageKeyPrefix:l.summaryHeatmap?"summary_heatmap":null,originalDataSource:t?t.selectedSource:null,queryName:t?t.storeName:null,filter:t?t.filter:null,editing:n}),this.areaStep({buildCql:function(t){return s.wizardUtils.buildDataFilter(t).buildCql()},cqlMaxLength:c}),this.optionsStep({getFeatureTypeProperties:function(t){return t.dataSourceDescription.properties},buildCql:function(t){return s.wizardUtils.buildDataFilter(t).buildCql()},cqlMaxLength:c,getStoreName:function(t){return l.summaryHeatmap?t.selectedSource.title+" Activity Summary":t.selectedSource.title+" Query"},saveQueryOptions:{editMode:!1,isSaveable:r(l,"isSaveable"),savingIsNotOptional:r(l,"savingIsNotOptional"),sharingIsNotOptional:r(l,"sharingIsNotOptional"),classifications:u||a.config.get(["classification","options"]),defaultClassification:r(u,i(u,r(l,"defaultClassification")))||u[0]}})],displaySettings:{wizardTitle:l.wizTitle||"Time-lapse Query",wizardClass:"wizard-dark AreaDefinitionWizard",mainIconClass:l.wizIcon||"fa-clock-o",finishIconClass:"fa-check text-success"}},t).then(function(t){if(t.shouldBeSaved&&s.wizardUtils.saveQuery(t,l,!1,s.wizardUtils.buildDataFilter(t).buildCql()),l.runOnCompletion){var e=s.convertSelectionsToDataViewRecord(t);return n||s.TLManager.buildCanvasLayerState(e,t.storeName),{dataView:e,name:t.storeName}}})},t.prototype.convertSelectionsToDataViewRecord=function(t){var e=t.useArrow?l.StoreTypes.Arrow:l.StoreTypes.Binary,n=this.wizardUtils.buildFormatOptions(t),r=new l.StoreRecord({type:e,id:s.uuid.generate(),geomField:t.geomField,dtgField:t.dtgField,idField:t.idField,formatOptions:n}),i=new l.SourceRecord({id:t.selectedSource.id,type:l.SourceType.SERVER}),o=this.wizardUtils.buildDataFilter(t);return new l.DataViewRecord({source:i,store:r,dataFilter:o})},t}();e.GeoTimelapseWizard=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(15),o=n(74),a=n(47),s=n(1060),l=n(339),c=function(){function t(){}return t.prototype.buildDataFilter=function(t){var e;if(t.isLineQuery)e=new o.LineStringTimeClauseRecord({lineDtgField:t.dtgField,endDtg:t.endDtg.toISOString(),endDtgField:t.endDtgField,startDtg:t.startDtg.toISOString(),startDtgField:t.startDtgField});else{var n=r(t.dataSourceDescription.properties,t.dtgField);e=new o.PointTimeClauseRecord({field:t.dtgField,dtg:t.startDtg.toISOString(),endDtg:t.endDtg.toISOString(),dtgFieldIsString:!!n&&"string"===n.localType})}var i,s=new o.IntersectsClauseRecord({field:t.geomField,features:t.generatedFeatures}),c=l.CqlParamsHelper.convertCqlParamsToClauses(t.cqlParams,t.dataSourceDescription.properties);return t.cqlParams&&t.cqlParams.additionalCql&&(i=new o.RawClauseRecord({cql:t.cqlParams.additionalCql})),new a.GetFeatureDataFilterRecord({timeClause:e,geomClause:s,simpleClauses:c,additionalCql:i})},t.prototype.buildFormatOptions=function(t){if(t.useArrow)return a.StoreHelper.buildArrowFormatOptions(t.selectedSource,t.dtgField,t.arrowFields);var e=t.dataSourceDescription.defaultFieldNames.label;return a.StoreHelper.buildBinFormatOptions(t.dtgField,t.geomField,t.idField,e)},t.prototype.saveQuery=function(t,e,n,r){var o={id:e.savedQueryId,attributeFilter:t.finalCql,bounds:t.generatedFeatures,classification:t.classification,cqlParameters:t.cqlParams,dates:{start:t.startDtg?t.startDtg.toString():null,end:t.endDtg?t.endDtg.toString():null},emailSubscribers:[],enableEmails:!0,filter:r,isPublic:e.sharingIsNotOptional||t.shouldBeShared,showOnStartup:e.showOnStartup,source:t.selectedSource?t.selectedSource.id:null,title:t.storeName,type:"time-lapse",userId:i.config.get("userDn")},a=n?"update.query":"add.query";s.SavedQueryEvents.emit(a,o)},t}();e.WizardUtils=c},function(t,e){t.exports='<ccri-list-view-element\n    datastore="arrayStore"\n    decorate-card="decorateCard"\n    filter-resolver="filterResolver"\n    toolbar-widget="toolbarWidget"\n    expand-options="true"\n    menu-resolver="menuResolver"\n    on-mouse-enter="onMouseEnter"\n    on-mouse-leave="onMouseLeave"\n    manual-refresh="refresh"\n    items-loading="isLoading"\n    limit="200"\n    class="anchorAll"\n></ccri-list-view-element>\n'},function(t,e){t.exports='<span class="clickable" ng-click="toggleExtentFilter(!filterByExtent)">\n    <i class="fa fa-fw" ng-class="filterByExtent ? \'fa-check-square-o\' : \'fa-square-o\'"></i>\n    Only list items visible within map extent\n</span>\n'},function(t,e){t.exports='<div class="ellipsis">{{::title}}</div>\n'},function(t,e){t.exports='<div style="padding-bottom: 10px">\n    <div ng-repeat="key in ::contentFields" class="ellipsis">\n        <div ng-if="::(key === dtgField)">\n            {{::key}}: <st-datetime date="record[key]" style="color:#d6d6d6"></st-datetime>\n        </div>\n        <div ng-if="::(key !== dtgField)">\n            {{::key}}: <span style="color:#d6d6d6">{{record[key]}}</span>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2919);e.TimelapseManager=i.TimelapseManager;var o=n(1057);e.default=r.module("stealth.geo.timelapse.manager",[]).service("stealth.geo.timelapse.manager.Manager",i.TimelapseManager).service("stealth.geo.timelapse.capability.extendo",["queryBinStoreExtender",function(t){o.CapabilityExtendomatic.getInstance(t)}]).run(["stealth.geo.timelapse.capability.extendo",function(t){}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(2),o=n(18),a=n(50),s=n(578),l=n(149),c=n(55),u=n(16),d=n(192),f=n(72),p=n(74),h=n(193),g=n(57),m=n(404),v=n(169),y=n(47),b=n(2920),w=n(1063),_=n(1067),x=n(2927),S=n(2928),C=n(24),E=n(1068),T=n(1058),M=n(625),k=n(604),A=n(1069),I="TimelapseCanvas";E.InteractionManager.registerInteraction(M.BASIC_TL_SERVER_INTERACTION,{fetch:A.SearchStrategies.GetFeature,filter:k.PopupFilter.filter,id:w.TL_DEFAULT_POPUP_INTERACTION_ID}),E.InteractionManager.registerInteraction(M.BASIC_TL_LOCAL_INTERACTION,{fetch:A.SearchStrategies.localFile,filter:k.PopupFilter.filter,id:w.TL_DEFAULT_POPUP_INTERACTION_ID});var O=function(){function t(t,e,n,i,o,a,s,c,d,f,p,h){var g=this;this.$rootScope=t,this.$uibModal=e,this.tcManager=n,this.ol3Map=i,this.WmsLayer=a,this.displayRegistry=c,this.Panel=h,this.stateManager=u.StateManager.getInstance(),this.canvasLayers=r.Map(),this.loadedFiles=r.Map(),this.canvas=new w.Canvas(I,"Time-lapse",o,s),i.addLayer(this.canvas.mapLayer),n.registerListener(this.canvas.redraw),this.stateManager.getObservable(v.TIMELAPSE_PATH).subscribe({next:function(t){g.onStateChange(t)}}),this.currentState=this.stateManager.getState(v.TIMELAPSE_PATH),this.controlsScope=t.$new(),this.controlsWidget=new f({widget:new p({scope:this.controlsScope,isolateScope:!0,tag:"st-geo-tl-canvas-controls"}),hidden:!0}),d.insert("bottom",this.controlsWidget,l.Position[l.Position.Middle]),this.registerShowHideListeners(),this.checkActiveViews(),this.displayRegistry.addListener("display.active",function(t){"map"===t.type&&g.checkActiveViews()}),this.stateManager.getObservable([m.ol.MAP_PATH,"RootMap"]).subscribe({next:function(t){var e=t.layers.findIndex(function(t){return"Timelapse1"===t});-1!==e&&g.stateManager.dispatch({type:m.ol.MapActions.TypeKeys.UPDATE_LAYERS,id:"RootMap",layers:t.layers.splice(e,1,I)})}})}return t.prototype.updateCanvasLayerPanels=function(){var t=this;this.canvasLayers.valueSeq().forEach(function(e){e.listPanel&&e.listPanel.updateList(t.pausedTimeWindow)})},t.prototype.checkStatesAndShowHideTimeControls=function(t,e,n){t=t||this.stateManager.getState([d.LAYER_PATH,"TimelapseCanvas"]),e=e||this.stateManager.getState(h.TIME_CONTROLS_PATH),n=n||this.stateManager.getState(v.TIMELAPSE_PATH);var r=t.style.get("visible")&&e.hasRanges&&n.isTimelapseOn;return r?this.controlsWidget.hidden=!1:(this.controlsWidget.hidden=!0,n.isHistogramOpen&&this.controlsScope.$broadcast("closeHistogram")),r},t.prototype.registerShowHideListeners=function(){var t=this,e=this.canvas.mapLayer.styleDirectiveScope.toggleVisibility;this.canvas.mapLayer.styleDirectiveScope.toggleVisibility=function(){e(),t.checkStatesAndShowHideTimeControls()},this.stateManager.getObservable(h.TIME_CONTROLS_PATH).subscribe({next:function(e){t.checkStatesAndShowHideTimeControls(null,e)&&e.isPaused&&a(e.windowStart_s)&&a(e.windowEnd_s)?(t.pausedTimeWindow={start_s:e.windowStart_s,end_s:e.windowEnd_s},e.isDragging||t.updateCanvasLayerPanels()):delete t.pausedTimeWindow}}),this.stateManager.getObservable(v.TIMELAPSE_PATH).subscribe({next:function(e){t.checkStatesAndShowHideTimeControls(null,null,e)}}),this.$rootScope.$on("wizard:launchWizard",function(){t.stateManager.dispatch({type:h.TimeControlsActions.TypeKeys.SUSPEND})}),this.$rootScope.$on("wizard:closeWizard",function(){t.stateManager.dispatch({type:h.TimeControlsActions.TypeKeys.RESUME})})},t.prototype.onStateChange=function(t){var e=this;this.currentState.canvasLayerStates!==t.canvasLayerStates&&this.updateCanvasLayers(t.canvasLayerStates),this.canvas.updateCanvasLayers(t.canvasLayerDrawOrder.map(function(t){return e.canvasLayers.get(t)}).filter(function(t){return null!=t&&null!=t.store&&!t.getState().displayStatus.isError}).toArray()),this.currentState=t},t.prototype.checkActiveViews=function(){var t=0;this.displayRegistry.listActive().forEach(function(e){"map"===e.type&&t++}),t>0?(this.canvas.redrawCurrent(),1===t&&this.tcManager.registerListener(this.canvas.redraw)):t<1&&this.tcManager.unregisterListener(this.canvas.redraw)},t.prototype.updateCanvasLayers=function(t){var e=this;t.forEach(function(t){if(e.canvasLayers.has(t.id))e.canvasLayers.get(t.id).updateDisplay(t.displayStatus,e.tcManager,e.ol3Map,e.WmsLayer);else{var n=t.dataView.source.type,i=new b.CanvasLayer(t.id),a=E.InteractionManager.getInteraction(t.defaultClickInteractionType);a&&i.addInteraction(_.InteractionEventType.CLICK,a),e.canvasLayers=e.canvasLayers.set(t.id,i),(n===y.SourceType.SERVER?e.buildCanvasLayerFromServer(t,i):e.buildCanvasLayerFromFile(t,i)).then(function(){i.buildHistogram(),n===y.SourceType.SERVER&&t.dataView.store.type===y.StoreTypes.Arrow&&(i.listPanel=new e.Panel(e,e.canvas,i),i.listPanel.showButton());var a=i.store.getFilterableFields();if(!o(a)&&t.displayStatus.opacityRampFilter.isEmpty()){var s=a[0],l=i.store.getRange(s);l&&e.updateCanvasLayerDisplay(t.id,{opacityRampEnabled:!0,opacityRampField:s,opacityRampFilter:r.List([l[0],l[1]])})}e.currentState.canvasLayerDrawOrder.find(function(e){return e===t.id})||e.stateManager.dispatch({type:v.TimelapseActions.TypeKeys.SET_CANVAS_LAYER_DRAW_ORDER,canvasLayerDrawOrder:e.currentState.canvasLayerDrawOrder.unshift(t.id)}),c.alerter.infoMsg(i.store.getNumRecords().toLocaleString()+" results.",t.name)}).catch(function(n){e.updateCanvasLayerDisplay(t.id,{isError:!0,errorMsg:n}),c.alerter.errorMsg(n,t.name)}).then(function(){e.updateCanvasLayerDisplay(t.id,{isDownloadActive:!1,isLoading:!1})}),window.setTimeout(function(){e.updateCanvasLayerDisplay(t.id,{isLoading:!0})},0)}})},t.prototype.getDownloadProgressHandler=function(t){var e=this;return function(n){e.stateManager.dispatch({type:v.TimelapseActions.TypeKeys.UPDATE_CANVAS_LAYER_DISPLAY,canvasLayerId:t,displayStatus:{isDownloadActive:!0,isLoading:!0,downloadSize:n.loaded,isError:!1,errorMsg:""}})}},t.prototype.buildCanvasLayerFromServer=function(t,e){var n=y.RequestBuilderManager.getBuilder(t.dataView.dataFilter.requestType);if(n){var r=n.build(t.dataView);if(e.store=y.StoreHelper.buildStore(t.dataView.store),C.DataSourceManager.getDataSourcesById(t.dataView.source.id).first())return r.onDownloadProgress=this.getDownloadProgressHandler(t.id),n.submit(r).then(function(n){if(n){if(0===n.byteLength)return Promise.reject("No results");var r=t.dataView.store.type!==y.StoreTypes.Binary||t.dataView.store.formatOptions.sortOnServer;return e.store.populate(n,r)}}).catch(function(t){var e=i(t,"error.message",t);return Promise.reject(e)});var o="Data source not found";return g.log.error(o+" with id: "+t.dataView.source.id),Promise.reject(o)}o="Unable to build request. Request type not found";return g.log.error(o+": "+t.dataView.dataFilter.requestType),Promise.reject(o)},t.prototype.buildCanvasLayerFromFile=function(t,e){var n=this;return new Promise(function(r,i){if(n.loadedFiles.has(t.dataView.source.id)){var o=new FileReader;o.onerror=function(){i(o.error.message)},o.onload=function(){var a=o.result;if(t.dataView.store.type===y.StoreTypes.Arrow)try{var l=s.read(new Uint8Array(a));if(0===l.length)throw new Error("No results");var c=y.findArrowDateFields(l),u=y.findArrowGeomFields(l),d=n.$rootScope.$new();d.dtgOptions=c,d.geomOptions=u,d.trkIdOptions=y.ArrowStore.getDictionaryEncodedFields(l.schema.fields),d.fileName=t.dataView.source.id,n.$uibModal.open({template:S,controller:x.ArrowFileFields,scope:d,size:"sm",keyboard:!1,backdrop:"static"}).result.then(function(i){e.store=new y.ArrowStore(t.dataView.store.id,i.geomField.name,i.dtgField.name,i.trkIdField.name),d.$destroy(),n.updateCanvasLayerDisplay(e.id,{colorByField:i.trkIdField.name}),r(e.store.populate(a,!1))})}catch(t){i(t.message)}else e.store=y.StoreHelper.buildStore(t.dataView.store),r(e.store.populate(a,!1));n.loadedFiles=n.loadedFiles.remove(t.dataView.source.id)},o.readAsArrayBuffer(n.loadedFiles.get(t.dataView.source.id))}else i("File "+t.dataView.source.id+" is no longer loaded. Please reload it.")})},t.prototype.buildCanvasLayerState=function(t,e,n){return o(n)&&(n=t.source.type===y.SourceType.SERVER?M.BASIC_TL_SERVER_INTERACTION:M.BASIC_TL_LOCAL_INTERACTION),T.RecordHelper.buildDefaultCanvasLayerState(t,e,n)},t.prototype.createAlertLayers=function(t){var e=this;t.forEach(function(t){var n=C.DataSourceManager.getDataSourceByLayerName(t.source);if(n){var r=y.KeywordHelper.getDefaultTimelapseFieldNames(n),i=f.uuid.generate(),o=new y.SourceRecord({id:n.id,type:y.SourceType.SERVER}),a=new y.StoreRecord({id:i,dtgField:r.dtgField,idField:r.idField,geomField:r.geomField,type:y.StoreTypes.Binary,formatOptions:y.StoreHelper.buildBinFormatOptions(r.dtgField,r.geomField,r.idField)}),s=new y.GetFeatureDataFilterRecord({additionalCql:new p.RawClauseRecord({cql:t.cql})}),l=new y.DataViewRecord({source:o,store:a,dataFilter:s});e.buildCanvasLayerState(l,t.name)}})},t.prototype.addLoadedFile=function(t,e){this.loadedFiles=this.loadedFiles.set(t,e)},t.prototype.getHighlightLayer=function(){return this.canvas.getHighlightLayer()},t.prototype.getCanvasLayer=function(t){return this.canvasLayers.get(t)},t.prototype.removeCanvasLayer=function(t,e){void 0===e&&(e=!0);var n=this.canvasLayers.get(t);n&&(n.destroy(),this.canvasLayers=this.canvasLayers.delete(t),this.tcManager.removeDataRange(t)),e&&this.stateManager.dispatch({type:v.TimelapseActions.TypeKeys.REMOVE_CANVAS_LAYER_STATE,canvasLayerId:t})},t.prototype.updateCanvasLayerDrawOrder=function(t,e){var n=this.currentState.canvasLayerDrawOrder.filter(function(e){return e!==t});this.stateManager.dispatch({type:v.TimelapseActions.TypeKeys.SET_CANVAS_LAYER_DRAW_ORDER,canvasLayerDrawOrder:n.splice(e,0,t)})},t.prototype.updateCanvasLayerState=function(t,e){this.stateManager.dispatch({type:v.TimelapseActions.TypeKeys.UPDATE_CANVAS_LAYER_STATE,canvasLayerId:t,canvasLayerState:e})},t.prototype.replaceCanvasLayer=function(t,e){this.removeCanvasLayer(t,!1);var n=this.currentState.canvasLayerDrawOrder.findIndex(function(e,n){return e===t});this.stateManager.dispatch({type:v.TimelapseActions.TypeKeys.SET_CANVAS_LAYER_DRAW_ORDER,canvasLayerDrawOrder:this.currentState.canvasLayerDrawOrder.remove(n)}),this.stateManager.dispatch({type:v.TimelapseActions.TypeKeys.UPDATE_CANVAS_LAYER_STATE,canvasLayerId:t,canvasLayerState:new v.CanvasLayerRecord(e)})},t.prototype.updateCanvasLayerDisplay=function(t,e){this.stateManager.dispatch({type:v.TimelapseActions.TypeKeys.UPDATE_CANVAS_LAYER_DISPLAY,canvasLayerId:t,displayStatus:e})},t.$inject=["$rootScope","$uibModal","ccri.time-controls.manager","ol3Map","stealth.core.geo.ol3.layers.MapLayer","stealth.core.geo.ol3.layers.WmsLayer","stealth.core.geo.ol3.overlays.Vector","stealth.display.registry","ccri.bars.mgr","ccri.bars.Widget","ccri.angular-utils.WidgetDef","stealth.geo.timelapse.list.Panel"],t}();e.TimelapseManager=O},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1061),o=n(319),a=n(6),s=n(21),l=n(16),c=n(55),u=n(74),d=n(193),f=n(47),p=n(169),h=n(431),g=n(24),m=n(580),v=n(1062),y=n(603),b=function(){function t(t){this.id=t,this.stateManager=l.StateManager.getInstance(),this.toggledOn=!1,this.interactions={},this.injector=r.element(document.body).injector()}return t.prototype.updateLabelLayer=function(t){var e=this.getState(),n=this.injector.get("ol3Map"),r=this.store instanceof f.ArrowStore?f.StoreHelper.buildCqlFromPredicate(this.store.getPredicates(this.idPredicate)):"";this.labelSource.updateParams({CQL_FILTER:u.CqlBuilder.combine(u.CqlOperator.AND,u.CqlBuilder.pointTimeClause({field:e.dataView.store.dtgField,dtg:s.utc(1e3*t.windowStart_s).format(),endDtg:s.utc(1e3*t.windowEnd_s).format(),dtgFieldIsString:!1,format:""}),this.getIdPredicateAsCql(),r,e.dataView.dataFilter.buildCql())}),n.addLayerOverlay(this.labelLayer),this.labelsOn=!0},t.prototype.removeLabelLayer=function(){this.injector.get("ol3Map").removeLayerOverlay(this.labelLayer),this.labelsOn=!1},t.prototype.registerTCListener=function(){var t=this;this.tcSub=this.stateManager.getObservable(d.TIME_CONTROLS_PATH).subscribe({next:function(e){var n=t.getState();!e.isPaused&&t.labelsOn?t.removeLabelLayer():e.isPaused&&!e.isDragging&&n.displayStatus.labelsOn&&t.updateLabelLayer({windowStart_s:e.windowStart_s,windowEnd_s:e.windowEnd_s})}})},t.prototype.unregisterTCListener=function(){this.tcSub&&this.tcSub.unsubscribe()},t.prototype.addInteraction=function(t,e){this.interactions[t]||(this.interactions[t]=[]),this.interactions[t].push(e)},t.prototype.buildHistogram=function(){this.rangePlotter=new v.HistogramPlotter(this)},t.prototype.destroy=function(){this.arrowChartPopupId&&this.injector.get("ccri.popup.manager").closePopup(this.arrowChartPopupId);this.listPanel&&this.listPanel.hideButton()},t.prototype.export=function(t){var e,n,r,o,a=this.getState();if(a){n=a.dataView,r=g.DataSourceManager.getDataSourcesById(n.source.id).first(),o=r?r.name:a.name;var s=function(){o=a.get("name").trim().replace(/\W/g,"_")+"."+(t.fileExtension||"")};if(t.outputFormat===f.StoreConfigs[this.store.getType()].outputFormat)e=Promise.resolve(new Blob([this.store.getData()],{type:"application/octet-binary"})),o=a.get("name").trim().replace(/\W/g,"_")+"."+f.StoreConfigs[this.store.getType()].fileExtension;else{var l=m.RequestBuilderManager.getBuilder(n.dataFilter.requestType),u=y.DataViewHelper.clone(n);u=u.with({store:u.store.with({type:t.name})});var d=l.build(u);d.responseType="blob",e=l.submit(d).then(function(t){return s(),t},function(t){return s(),t.data})}return e.then(function(t){i.saveAs(t,o)})}return c.alerter.errorMsg("Unable to export"),Promise.reject("Can't find state")},t.prototype.getState=function(){var t=this;return l.StateManager.getInstance().getState(p.TIMELAPSE_PATH).canvasLayerStates.find(function(e){return e.id===t.id})},t.prototype.getLegendItem=function(){var t=this.getState();return{useColorModeIcon:!0,color:h.getColorModeStyle(t.displayStatus),label:t.name,itemId:t.id}},t.prototype.getIdPredicateAsCql=function(){var t=this.getState(),e=t.displayStatus,n=t.dataView;if(e.colorMode===h.ColorModes.OPACITY_RAMP&&this.idPredicate&&n.store.type===f.StoreTypes.Arrow){var r=e.opacityRampField;return r+" <= "+this.store.decodeField(r,e.opacityRampFilter.get(1))+" AND "+r+" >= "+this.store.decodeField(r,e.opacityRampFilter.get(0))}return""},t.prototype.updateDisplay=function(t,e,n,r){if(this.store&&this.store.hasData()){if(t.colorMode===h.ColorModes.OPACITY_RAMP?(this.idPredicate&&this.store.removePredicate(this.idPredicate),this.idPredicate=f.StoreHelper.buildIdPredicate(this.store.getType(),t.opacityRampField,t.opacityRampFilter),this.store.addPredicate(this.idPredicate)):this.idPredicate&&(this.store.removePredicate(this.idPredicate),this.idPredicate=void 0),t.toggledOn&&!this.toggledOn?(e.addDataRangeSeconds(this.getState().id,Math.floor(this.store.getMinTimeInMillis()/1e3),Math.ceil(this.store.getMaxTimeInMillis()/1e3)),this.toggledOn=!0):!t.toggledOn&&this.toggledOn&&(e.removeDataRange(this.getState().id),this.toggledOn=!1),this.rangePlotter&&this.rangePlotter.replot(),t.labelsOn&&!this.labelLayer){var i=g.DataSourceManager.getDataSourcesById(this.getState().dataView.source.id).first(),s=!1;this.labelSource=new a.source.ImageWMS({ratio:1,projection:"EPSG:4326",url:i.wmsUrl,params:{VERSION:"1.1.1",TRANSPARENT:"TRUE",LAYERS:i.name,STYLES:i.keywordConfig.getIn(["timelapse","labelStyle"])},imageLoadFunction:o(r.loadFunction,!0,function(){return s},function(t){s=t})}),this.labelLayer=new a.layer.Image({source:this.labelSource}),this.labelLayer.setOpacity(t.opacity/100)}t.labelsOn&&!this.labelsOn&&(this.updateLabelLayer(e.getCurrentWindowStats()),this.registerTCListener()),!t.labelsOn&&this.labelsOn&&(this.removeLabelLayer(),this.unregisterTCListener())}},t}();e.CanvasLayer=b},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){t.exports='\x3c!-- TODO: update layer structure --\x3e\n<div class="st-geo-range-slider-popup popupFillSpace flex-column">\n    <time-range-slider\n        ng-repeat="layer in ctrl.layers"\n        ng-if="layer.rangePlotter !== undefined && layer.getState().displayStatus.toggledOn"\n        window="ctrl.window"\n        end="ctrl.end"\n        min="ctrl.min"\n        max="ctrl.max"\n        background-plotters="[layer.rangePlotter.plot]"\n        drag-start="ctrl.dragStart()"\n        drag-end="ctrl.dragEnd()"\n        on-change="ctrl.onChange()"\n        title="{{ layer.getState().name }}"\n        style="flex: 1 1 98px; min-height: 98px"\n    ></time-range-slider>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(16),o=n(192),a=n(193),s=n(169),l=function(){function t(t,e,n){var l=this;this.$scope=t,this.tlManager=e,this.ol3Map=n,this.stateManager=i.StateManager.getInstance(),this.layerManager=o.LayerManager.getInstance(),this.tcState=this.stateManager.getState(a.TIME_CONTROLS_PATH),this.timelapseState=this.stateManager.getState(s.TIMELAPSE_PATH),this.layers=[],this.updateLayers=function(){var t=r(l.timelapseState.canvasLayerDrawOrder.toArray(),function(t){return l.tlManager.getCanvasLayer(t)});l.layers=t,l.layers.forEach(function(t){void 0===t.rangePlotter.bounds&&t.rangePlotter.updateBounds(l.view.calculateExtent(l.theMap.getSize()))})},this.updateTCState=function(){l.$scope.$applyAsync(function(){l.end=1e3*l.tcState.windowEnd_s,l.max=1e3*l.tcState.displayEnd_s,l.min=1e3*l.tcState.displayStart_s,l.window=1e3*l.tcState.windowSize_s})},this.dragEnd=function(){l.stateManager.dispatch({type:a.TimeControlsActions.TypeKeys.RESUME})},this.dragStart=function(){l.stateManager.dispatch({type:a.TimeControlsActions.TypeKeys.SUSPEND})},this.onChange=function(){var t=Math.floor(l.end/1e3),e=Math.ceil(l.window/1e3);l.stateManager.dispatch({type:a.TimeControlsActions.TypeKeys.UPDATE_WINDOW,windowStart_s:t-e,windowEnd_s:t,windowSize_s:e})},this.theMap=n.getMap(),this.view=this.theMap.getView(),this.updateLayers();var c=this.stateManager.getObservable(s.TIMELAPSE_PATH).subscribe({next:function(t){l.timelapseState!==t&&(l.timelapseState=t,l.updateLayers())}});this.updateTCState();var u=this.stateManager.getObservable(a.TIME_CONTROLS_PATH).subscribe({next:function(t){l.tcState!==t&&(l.tcState=t,l.updateTCState())}}),d=function(){var t=l.view.calculateExtent(l.theMap.getSize());l.layers.forEach(function(e){e.rangePlotter.updateBounds(t),e.rangePlotter.replot()})};this.layers.forEach(function(t){return t.rangePlotter.updateBounds(l.view.calculateExtent(l.theMap.getSize()))}),this.theMap.on("moveend",d),t.$on("$destroy",function(){u&&(u.unsubscribe(),u=null),c&&(c.unsubscribe(),c=null),l.theMap.un("moveend",d)})}return t.$inject=["$scope","stealth.geo.timelapse.manager.Manager","ol3Map"],t}();e.RangeSliderController=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=n(261),o=function(){return function(t){var e=this;this.canvasLayer=t,this._ys=i.scale.linear(),this._area=i.svg.area().x(function(t,e){return e}).y0(function(){return e._ys(0)}).y1(function(t){return e._ys(t)}),this._line=i.svg.line().x(function(t,e){return e}).y(function(t){return e._ys(t)}),this.plot=function(t,n,r){var o,a,s,l=Math.floor(n.domain()[0].getTime()/1e3),c=Math.ceil(n.domain()[1].getTime()/1e3),u=0|n.range()[1];if(!(l===c||u<=0)){o=e.computeHistogram(l,c,u),e._ys.range(r.range()).domain([0,i.max(o)]),(a=t.selectAll("g.histogram").data([o])).exit().remove(),(s=a.enter().append("g").attr("class","histogram")).append("path").attr("class","area"),s.append("path").attr("class","line").style("stroke-width",1.5).style("fill","none");var d=a.select("path.area").style("fill",function(){return e.canvasLayer.getState().displayStatus.fillColorHexString}).interrupt(),f=a.select("path.line").style("stroke",function(){return i.rgb(e.canvasLayer.getState().displayStatus.fillColorHexString).darker().toString()}).interrupt();e.xAxis&&e.yAxis&&e.yAxis.range()[0]===r.range()[0]&&e.yAxis.range()[1]===r.range()[1]&&e.xAxis.range()[0]===n.range()[0]&&e.xAxis.range()[1]===n.range()[1]&&e.xAxis.domain()[0].getTime()===n.domain()[0].getTime()&&e.xAxis.domain()[1].getTime()===n.domain()[1].getTime()&&(d=d.transition(),f=f.transition()),d.attr("d",function(t){return e._area(t)}),f.attr("d",function(t){return e._line(t)}),e.svg=t,e.xAxis=n.copy(),e.yAxis=r.copy()}},this.computeHistogram=function(t,n,r){if(e.start_s===t&&e.end_s===n&&e.histogram.length===r)return e.histogram;for(var i,o,a=t,s=new Uint32Array(r),l=(n-t)/r,c=Math.max(0,a-e.firstTime_s),u=0;u<r;++u){for(i=(a+=l)-e.firstTime_s,o=0;i>0&&c<i&&c<e.maxResHist.length;)o+=0|e.maxResHist[c],c+=1;s[u]=0|o}return e.start_s=t,e.end_s=n,e.histogram=s,s},this.replot=function(){r(e.xAxis)||r(e.yAxis)||r(e.svg)||e.plot(e.svg,e.xAxis,e.yAxis)},this.updateBounds=function(t){var n=t||e.bounds,r=e.canvasLayer.store.getPredicates();if(n!==e.bounds||e.predicates!==r){var i=0,o=e.firstTime_s;e.maxResHist=new Uint32Array(e.lastTime_s-e.firstTime_s+1),e.canvasLayer.store.each(function(t,r,a){t<=n[1]||t>n[3]||r<n[0]||r>=n[2]||(a>o&&(e.maxResHist[o-e.firstTime_s]=i,o=a,i=0),i+=1)},e.firstTime_s,e.lastTime_s),i&&(e.maxResHist[o-e.firstTime_s]=i),e.bounds=n,e.predicates=r,e.start_s=void 0,e.end_s=void 0}},this.firstTime_s=t.store.getMinTimeInMillis()?Math.floor(t.store.getMinTimeInMillis()/1e3):0,this.lastTime_s=t.store.getMaxTimeInMillis()?Math.ceil(t.store.getMaxTimeInMillis()/1e3):1,this.maxResHist=new Uint32Array(this.lastTime_s-this.firstTime_s+1)}}();e.HistogramPlotter=o},function(t,e){t.exports=function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(325);!function(t){t.CLICK_RESULTS_ALL="CLICK_RESULTS_ALL:",t.CLICK_RESULTS_LAYER="CLICK_RESULTS_LAYER:"}(r=e.CanvasEvents||(e.CanvasEvents={}));var o=function(){function t(){}return t.on=function(e,n){return t.emitter.on(e,n)},t.emit=function(e,n){return t.emitter.emit(e,n)},t.off=function(e,n){return t.emitter.off(e,n)},t.onClickResultsLayer=function(e){return t.on(r.CLICK_RESULTS_LAYER,e)},t.emitter=new i.EventEmitter,t}();e.CanvasEventManager=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){t.showDtgOptions=t.dtgOptions.length>1,t.dtgField=t.dtgOptions[0],t.setDtgField=function(e){t.dtgField=e},t.showGeomOptions=t.geomOptions.length>1,t.geomField=t.geomOptions[0],t.setGeomField=function(e){t.geomField=e},t.trkIdField=t.trkIdOptions[0],t.setTrkIdField=function(e){t.trkIdField=e},t.finish=function(){t.$close({dtgField:t.dtgField,geomField:t.geomField,trkIdField:t.trkIdField})}}return t.$inject=["$scope"],t}();e.ArrowFileFields=r},function(t,e){t.exports='<div class="ccri-primaryTheme flex-column buf-lg-pa" style="width:100%;">\n    <div class="ellipsis" style="margin-top: 0; font-size: 18px;">\n        <i class="fa fa-folder-open"></i>\n        <span>{{::fileName}}</span>\n    </div>\n    <div class="buf-sm-pa" style="flex: 1 1 0%; align-self: stretch;">\n        Select the appropriate attribute to use for the following field(s):\n    </div>\n    <div ng-if="showDtgOptions" class="buf-sm-mt" style="flex: 1 1 0%;">\n        <span>Date:</span>\n        <span class="dark-dd" uib-dropdown is-open="openStatus.dtg">\n            <button uib-dropdown-toggle>\n                <span class="dropdown-toggle-text">{{dtgField.name}}</span>\n                <i class="fa fa-caret-down"></i>\n            </button>\n            <div uib-dropdown-menu role="menu" class="dark-dd-menu">\n                <a\n                    ng-repeat="dtgOption in dtgOptions"\n                    class="dropdown-menu-list-item"\n                    ng-click="setDtgField(dtgOption)"\n                    role="menuitem"\n                >{{dtgOption.name}}</a>\n            </div>\n        </span>\n    </div>\n    <div ng-if="showGeomOptions" class="buf-sm-mt" style="flex: 1 1 0%;">\n        <span>Geom:</span>\n        <span class="dark-dd" uib-dropdown is-open="openStatus.geom">\n            <button uib-dropdown-toggle>\n                <span class="dropdown-toggle-text">{{geomField.name}}</span>\n                <i class="fa fa-caret-down"></i>\n            </button>\n            <div uib-dropdown-menu role="menu" class="dark-dd-menu">\n                <a\n                    ng-repeat="geomOption in geomOptions"\n                    class="dropdown-menu-list-item"\n                    ng-click="setGeomField(geomOption)"\n                    role="menuitem"\n                >{{geomOption.name}}</a>\n            </div>\n        </span>\n    </div>\n    <div class="buf-sm-mt" style="flex: 1 1 0%;">\n        <span>Record ID:</span>\n        <span class="dark-dd" uib-dropdown is-open="openStatus.trkId">\n            <button uib-dropdown-toggle>\n                <span class="dropdown-toggle-text">{{trkIdField.name}}</span>\n                <i class="fa fa-caret-down"></i>\n            </button>\n            <div uib-dropdown-menu role="menu" class="dark-dd-menu">\n                <a\n                    ng-repeat="trkIdOption in trkIdOptions"\n                    class="dropdown-menu-list-item"\n                    ng-click="setTrkIdField(trkIdOption)"\n                    role="menuitem"\n                >{{trkIdOption.name}}</a>\n            </div>\n        </span>\n    </div>\n    <div class="buf-sm-mt" style="flex: 1 1 0%; display: flex; justify-content: flex-end">\n        <span class="btn btn-xs btn-default darkStep" ng-click="finish()">\n            <i class="fa fa-check text-success"></i>\n            Done\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2930);e.default=r.module("stealth.geo.timelapse.style").directive("stGeoTimelapseCanvasStyle",i.factory).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=n(5),o=n(16),a=n(193),s=n(24),l=n(47),c=n(277),u=n(169),d=n(2931),f=function(){function t(t,e){var n=this;this.timelapseManager=e,this.stateManager=o.StateManager.getInstance(),this.canvasLayerStates=[],this.ranges={},this.filters={},this.updateOrder=function(t,e){null!=e.item.sortable.dropindex&&n.timelapseManager.updateCanvasLayerDrawOrder(e.item.sortable.model.id,e.item.sortable.dropindex)},this.getColorModeStyle=c.getColorModeStyle;var r=this.stateManager.getObservable(u.TIMELAPSE_PATH).subscribe({next:function(t){n.onStateUpdate(t)}});this.sortableOptions={stop:this.updateOrder},t.$on("$destroy",function(){r.unsubscribe()}),this.onStateUpdate(this.stateManager.getState(u.TIMELAPSE_PATH))}return t.prototype.onStateUpdate=function(t){var e=this;this.canvasLayerStates=t.canvasLayerDrawOrder.map(function(e){return t.canvasLayerStates.find(function(t){return t.id===e})}).filter(function(t){return!t.displayStatus.isLoading&&!t.displayStatus.isError}).toArray(),this.ranges={},this.filters={},r(this.canvasLayerStates,function(t){if(t.displayStatus.colorMode===c.ColorModes.OPACITY_RAMP){var n=e.timelapseManager.getCanvasLayer(t.id),r=t.displayStatus.opacityRampField,i=n.store.getRange(r);e.ranges[t.id]={raw:i,decoded:[n.store.decodeField(r,i[0]),n.store.decodeField(r,i[1])]},e.filters[t.id]={decoded:[n.store.decodeField(r,t.displayStatus.opacityRampFilter.get(0)),n.store.decodeField(r,t.displayStatus.opacityRampFilter.get(1))]}}})},t.prototype.getColorByFieldRange=function(t){return this.timelapseManager.getCanvasLayer(t.id).store.getRange(t.displayStatus.colorByField)},t.prototype.decodeFieldValue=function(t,e){return this.timelapseManager.getCanvasLayer(t.id).store.decodeField(t.displayStatus.colorByField,e)},t.prototype.setFilters=function(t,e){this.timelapseManager.updateCanvasLayerDisplay(t.id,{opacityRampFilter:i.List(e)})},t.prototype.setOpacity=function(t,e){this.timelapseManager.updateCanvasLayerDisplay(t.id,{opacity:e})},t.prototype.setSize=function(t,e){this.timelapseManager.updateCanvasLayerDisplay(t.id,{pointRadius:e})},t.prototype.toggleConnectById=function(t){this.timelapseManager.updateCanvasLayerDisplay(t.id,{connectById:!t.displayStatus.connectById})},t.prototype.labelsAvailable=function(t){if(t.dataView.source.type===l.SourceType.SERVER){var e=s.DataSourceManager.getDataSourcesById(t.dataView.source.id).first();if(e){var n=this.stateManager.getState(a.TIME_CONTROLS_PATH);return e.keywordConfig.hasIn(["timelapse","labelStyle"])&&n.isPaused}}return!1},t.prototype.toggleLabels=function(t){this.timelapseManager.updateCanvasLayerDisplay(t.id,{labelsOn:!t.displayStatus.labelsOn})},t.prototype.removeCanvasLayer=function(t){this.timelapseManager.removeCanvasLayer(t.id)},t.prototype.toggleVisibility=function(t){this.timelapseManager.updateCanvasLayerDisplay(t.id,{toggledOn:!t.displayStatus.toggledOn})},t.$inject=["$scope","stealth.geo.timelapse.manager.Manager"],t}();e.StyleController=f,e.factory=function(){return{restrict:"E",template:d,scope:!0,controller:f,controllerAs:"ctrl"}}},function(t,e){t.exports='<div>\n    <div class="buf-sm-mt buf-sm-ml">\n        <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.visibilityName\'"></ui-include>\n    </div>\n    <div style="overflow-x:hidden">\n        <ul ui-sortable="ctrl.sortableOptions" ng-model="ctrl.canvasLayerStates"\n            style="overflow-x:hidden; list-style:none outside none; padding:0;">\n            <li ng-repeat="canvasLayerState in ctrl.canvasLayerStates track by canvasLayerState.id"\n                class="borderless-bottom-on-last-child"\n                style="background-color:#323232; border-bottom:1px solid black; padding-bottom: 6px"\n                ng-mouseenter="ctrl.hoverId = canvasLayerState.id;"\n                ccri-angular-utils-mouseleave="ctrl.hoverId = undefined">\n                \x3c!-- Layer Title --\x3e\n                <div class="flex-row">\n                    <div class="buf-sm-mt buf-sm-ml">\n                        <i class="clickable fa fa-fw"\n                            ng-click="ctrl.toggleVisibility(canvasLayerState)"\n                            ng-class="canvasLayerState.displayStatus.toggledOn ? \'fa-check-square-o\' : \'fa-square-o\'">\n                        </i>\n                    </div>\n                    <div class="flex-1 buf-sm-ma">\n                        <div class="flex-row visibilityName">\n                            <div class="flex-1 ellipsis buf-xs-mb"\n                                ng-class="{\'layerNotVisible\': !canvasLayerState.displayStatus.toggledOn}">\n                                {{::canvasLayerState.name}}\n                            </div>\n                            <ccri-angular-utils-close-btn\n                                ng-click="ctrl.removeCanvasLayer(canvasLayerState);"\n                                ng-class="{\'ng-hide\': ctrl.hoverId !== canvasLayerState.id}">\n                            </ccri-angular-utils-close-btn>\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- Sliders --\x3e\n                <div class="layerStyleRow flex-column flex-full nested">\n                    \x3c!-- Opacity slider --\x3e\n                    <div>\n                        <st-geo-tl-opacity-slider\n                            opacity="canvasLayerState.displayStatus.opacity"\n                            set-opacity="ctrl.setOpacity(canvasLayerState, opacity)"\n                        ></st-geo-tl-opacity-slider>\n                    </div>\n                    \x3c!-- Range slider --\x3e\n                    <div ng-if="canvasLayerState.displayStatus.colorMode === 2" class="flex-row buf-sm-mb">\n                        <div class="rangeSliderStartLabel"\n                            uib-tooltip="{{ctrl.ranges[canvasLayerState.id].decoded[0] | numberTrim:0}}" tooltip-class="nowrap"\n                            tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="500"\n                            tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n                            tooltip-enable="false" ccri-angular-utils-tooltip-overflow>\n                            {{ctrl.ranges[canvasLayerState.id].decoded[0] | numberTrim:0}}\n                        </div>\n                        <div class="flex-1 horizontally-buffered">\n                            <st-geo-tl-range-slider\n                                filters="canvasLayerState.displayStatus.opacityRampFilter"\n                                range="ctrl.ranges[canvasLayerState.id].raw"\n                                set-filters="ctrl.setFilters(canvasLayerState, filters)"\n                            ></st-geo-tl-range-slider>\n                        </div>\n                        <div class="rangeSliderEndLabel"\n                            uib-tooltip="{{ctrl.ranges[canvasLayerState.id].decoded[1] | numberTrim:0}}" tooltip-class="nowrap"\n                            tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="500"\n                            tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n                            tooltip-enable="false" ccri-angular-utils-tooltip-overflow>\n                            {{ctrl.ranges[canvasLayerState.id].decoded[1] | numberTrim:0}}\n                        </div>\n                    </div>\n                    \x3c!-- Range slider info --\x3e\n                    <div ng-if="canvasLayerState.displayStatus.colorMode === 2" class="flex-row">\n                        <div class="rangeSliderStartLabel">&nbsp;</div>\n                        <div class="cell flex-1 ellipsis horizontally-buffered">\n                            Range ({{ canvasLayerState.displayStatus.opacityRampField | attributeLabel }}):\n                            {{ctrl.filters[canvasLayerState.id].decoded[0] | numberTrim:0}} to {{ctrl.filters[canvasLayerState.id].decoded[1] | numberTrim:0}}\n                        </div>\n                    </div>\n                </div>\n                \x3c!-- Size, Connect, Show labels, Color mode --\x3e\n                <div class="layerStyleRow nested flex-row">\n                    <div class="cell">\n                        Size\n                        <st-geo-tl-size-input\n                            point-radius="canvasLayerState.displayStatus.pointRadius"\n                            set-size="ctrl.setSize(canvasLayerState, size)"\n                        ></st-geo-tl-size-input>\n                    </div>\n                    <div class="cell clickable"\n                        ng-click="ctrl.toggleConnectById(canvasLayerState)">\n                        <i class="fa fa-lg fa-fw"\n                           ng-class="canvasLayerState.displayStatus.connectById ? \'fa-check-square-o\' : \'fa-square-o\'"\n                           style="width:10px"\n                        ></i>\n                        Connect\n                    </div>\n                    <div class="cell clickable"\n                        ng-if="ctrl.labelsAvailable(canvasLayerState)"\n                        ng-click="ctrl.toggleLabels(canvasLayerState)">\n                        <i class="fa fa-lg fa-fw"\n                            ng-class="canvasLayerState.displayStatus.labelsOn ? \'fa-check-square-o\' : \'fa-square-o\'"\n                            style="width:10px;"\n                        ></i>\n                        Show labels\n                    </div>\n                    <div class="cell">\n                        <st-geo-tl-color-mode-switcher canvas-layer-state="canvasLayerState"></st-geo-tl-color-mode-switcher>\n                        <st-geo-tl-color-by-id-randomizer canvas-layer-state="canvasLayerState"></st-geo-tl-color-by-id-randomizer>\n                        <st-geo-tl-color-mode-single-color-chooser canvas-layer-state="canvasLayerState"></st-geo-tl-color-mode-single-color-chooser>\n                    </div>\n                    <div class="cell flex-1">\n                        <st-geo-tl-color-by-field-chooser canvas-layer-state="canvasLayerState"></st-geo-tl-color-by-field-chooser>\n                    </div>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(21),o=n(22),a=n(129),s=n(628),l=n(14),c=n(55),u=n(15),d=n(57),f=n(167),p=n(74),h=n(113),g=n(576),m=n(24),v=n(2933);function y(){return{restrict:"E",scope:{},template:v,controller:["$scope",function(t){var e,n=m.DataSourceManager.getDataSourcesById(u.config.get("leaderboard.table.source")).first(),r=f.WfsManager.getDefaultWfsParams("GetFeature",n.name),h=new FileReader;if(!n)return c.alerter.errorMsg("Failed to load leaderboard."),void d.log.error("Failed to find leaderboard source: "+u.config.get("leaderboard.table.source"));var v=n.keywordConfig.getIn(["aggregateTable","field","label"]);t.dateFormat=u.config.get("app.datetimeFormat.date"),t.timeRanges=[{label:"Past Week",value:1,units:"weeks"},{label:"Past Month",value:1,units:"months"},{label:"Past 3 Months",value:3,units:"months"}],t.selectedRange=t.timeRanges[0],t.leaders=[];var y=t.$watch("before",function(i,o){i!=o&&(t.calculating=!0,r.outputFormat="csv",r.cql_filter=p.CqlBuilder.pointTimeClause({field:n.keywordConfig.getIn(["aggregateTable","field","dtg"]),dtg:t.before.toISOString().slice(0,-5),endDtg:t.now.toISOString().slice(0,-5),dtgFieldIsString:!0,format:"YYYY-MM-DDThh:mm:ss"}),r.propertyName=v,e=f.WfsManager.buildRequest(n.wfsUrl,r,{responseType:"blob"}),g.GetFeatureRequestBuilder.submit(e).then(function(t){h.readAsText(t)},function(t){c.alerter.errorMsg("Failed to load leaderboard."),d.log.error(t)}))}),b=t.$on("$destroy",function(){y(),b()});t.getTimeRangeLabel=function(t){return t.label},t.setTimeRange=function(e){return t.now=i(),t.before=t.now.clone().subtract(e.value,e.units),e},h.onload=function(){var e,n=h.result,r={},i=[];o(n.split("\n"),function(t,n){if(0===n&&(e=a(t.split(","),function(t){return t.trim()==v.trim()})),n>0){var i=void 0;i=(i=0===e?t.substring(0,t.lastIndexOf(",")):t.substring(t.indexOf(",")+1)).replace(/["]/g,""),l(r[i])?r[i]=1:r[i]+=1}}),o(r,function(t,e){i.push({name:e,edits:t})}),i.length<1?t.leaders=[{name:"NONE",edits:0}]:t.leaders=s(i,["edits"],["desc"]),t.calculating=!1}}]}}e.leaderboardFactory=y,e.default=r.module("stealth.geo.edit.leaderboard").directive("stEditLeaderboard",y).run(["$rootScope","startMenuManager","ccri.popup.manager","ccri.angular-utils.WidgetDef",function(t,e,n,i){var o,a,s=r.element(".primaryDisplay > ccri-popup-container");e.addButton("Leaderboard","fa-trophy",function(){if(l(o)&&(o=s.data("ccri.popup.containerId")),l(a)){var e=n.getViewportDim(o);e[1]=0;var r=t.$new(),c=new i({tag:"st-edit-leaderboard",scope:r});a=n.displayPopup(o,"Leaderboard Rankings - Editing","edit-leaderboard","fa-trophy",c,{limitStartSize:!1,resizable:!1,contentWidth:400,contentHeight:360,offsets:e,positioning:h.Popup.Positioning.TopRight,onClose:function(){r.$destroy(),a=void 0}})}else n.focusPopup(a)})}]).name},function(t,e){t.exports='<div class="leaderboard-popup popupFillSpace">\n    <div class="filter-section">\n        <span class="range-picker">\n            <ccri-angular-utils-select\n                ng-model="selectedRange"\n                from-list="timeRanges"\n                select-fn="setTimeRange"\n                label-fn="getTimeRangeLabel"\n            ></ccri-angular-utils-select>\n        </span>\n        <span class="range-display">\n            <st-date-range\n                start-date="before" sep="to" end-date="now"\n                moment-time-format="{{::$scope.dateFormat}}"\n            ></st-date-range>\n        </span>\n    </div>\n    <table class="lb-table">\n        <thead class="fix-head">\n            <tr>\n                <th class="rank-head">Rank</th>\n                <th class="name-head">Name</th>\n                <th style="text-align:center">Edits</th>\n            </tr>\n        </thead>\n        <tbody class="scroll-body" ng-if="!calculating">\n            <tr ng-repeat="editor in leaders">\n                <td class="rank-field">{{$index + 1}}</td>\n                <td class="name-field ellipsis" \n                    uib-tooltip="{{editor.name}}"\n                    tooltip-popup-delay="500" \n                    tooltip-placement="top"\n                    tooltip-append-to-body="true">{{editor.name}}</td>\n                <td class="edits-field">{{editor.edits}}</td>\n            </tr>\n        </tbody>\n    </table>\n    <div class="calc-spinner" ng-if="calculating">\n        <i class="fa fa-fw fa-circle-o-notch fa-spin"></i>\n    </div> \n</div>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2935),i=n(2936),o=n(2938),a=n(0);e.default=a.module("stealth.geo.timelapse.timelapseHistory",["ccri.angular-utils","ccri.popup","stealth.core.geo.ows","stealth.core.startmenu","stealth.core.utils","ui.bootstrap"]).factory("stealth.geo.timelapse.timelapseHistory.queryRecord",o.factory).service("stealth.geo.timelapse.timelapseHistory.queryHistory",r.QueryHistory).directive("stGeoTimelapseHistory",i.stGeoTimelapseHistory).run(["stealth.geo.timelapse.timelapseHistory.queryHistory","startMenuManager",function(t,e){e.addButton("Time-lapse History","fa-hourglass",t.openPopup,"timeenabled",130)}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(21),i=n(0),o=n(408),a=n(29),s=n(50),l=n(18),c=n(34),u=n(4),d=n(17),f=n(22),p=n(14),h=n(55),g=n(15),m=n(72),v=n(74),y=n(113),b=n(47),w=n(24),_=function(){function t(e,n,g,_,x,S){var C=this;this.$filter=e,this.$http=n,this.popupManager=g,this.WidgetDef=_,this.QueryRecord=x,this.TimelapseManager=S,this.onPopupClose=function(){C.popupId=void 0,C.history=[]},this.openPopup=function(){if(p(C.containerId)&&(C.containerId=C.container.data("ccri.popup.containerId")),s(C.popupId))C.popupManager.focusPopup(C.popupId);else{var t=C.popupManager.getViewportDim(C.containerId);C.popupId=C.popupManager.displayPopup(C.containerId,"Time-lapse Query History","history","fa-hourglass",new C.WidgetDef({tag:"st-geo-timelapse-history"}),{onClose:C.onPopupClose,positioning:y.Popup.Positioning.BottomRight,offsets:t,contentHeight:Math.floor(.3*t[1]),contentWidth:Math.floor(.9*(t[0]-400)),limitStartSize:!1})}},this.refreshHistory=function(t){var e=C.historyRange.start.format("YYYY-MM-DD")+"T00:00:00.000Z/"+C.historyRange.end.format("YYYY-MM-DD")+"T23:59:59.999Z";C.history=[],w.DataSourceManager.loadDataSources().then(function(){var n=w.DataSourceManager.getDataSourcesByKeyword(C.prefix),r=0;n.forEach(function(i){var s=i.keywordConfig.getIn(C.prefix.concat("geomesads")),d=i.keywordConfig.getIn(C.prefix.concat("sft"))||i.name.split(":")[1];if(p(s))h.alerter.errorMsg("Layer needs the "+C.prefix.concat("geomesads").join(".")+" keyword set.","Query history error: "+i.title,{timeOut:5e3});else{var g="geomesa/stats/"+s+"/queries";C.$http.get(C.$filter("uriCat")(i.serverUrl,g),{params:{bin:!0,arrow:!0,typeName:d,dates:e,format:"json"}}).then(function(t){var e=o(u(t.data,function(t){if(-1!==t.filter.search(C.filterRegex))return f(b.StoreTypes,function(e){if(-1!==t.hints.indexOf(b.StoreConfigs[e].queryHint))return t.queryType=e,!1}),t})),n=u(e,function(t){return new C.QueryRecord(t,i,g)}),r=a(n,function(t){return l(t.error)});C.history=C.history.concat(r)},function(t){h.alerter.errorMsg("Reason: "+t.statusText,"Query history error: "+i.title,{timeOut:5e3})}).finally(function(){(r+=1)===n.size&&c(t)&&t()})}}),0===n.count()&&c(t)&&t()})},this.clauses=function(t){var e=new v.PointTimeClauseRecord({field:t.dtgField,dtg:t.startDtg.toISOString(),endDtg:t.endDtg.toISOString(),dtgFieldIsString:!0}),n=new v.IntersectsClauseRecord({field:t.geomField,features:v.CqlHelper.convertFeatureToWKT(t.geomFeatures)}),r=t.cql?new v.RawClauseRecord({cql:t.cql}):void 0;return new b.GetFeatureDataFilterRecord({timeClause:e,geomClause:n,additionalCql:r})},this.rerunQuery=function(e){var n;if("Arrow"===e.queryType){var i=b.StoreConfigs[e.queryType].queryFieldRegex.exec(e.hints),o=void 0;d(i)&&i.length>=2&&(o=u(i[1].split(","),function(t){return t})),n=b.StoreHelper.buildArrowFormatOptions(e.dataSource,e.dtgField,o)}else{var a=b.StoreConfigs[e.queryType].queryFieldRegex.exec(e.hints);d(a)&&a.length>=2&&(e.idField=a[1]),n=b.StoreHelper.buildBinFormatOptions(e.dtgField,e.geomField,e.idField)}var s=new b.StoreRecord({type:e.queryType,id:m.uuid.generate(),geomField:e.geomField,dtgField:e.dtgField,idField:e.idField,formatOptions:n}),l=new b.SourceRecord({id:e.layerId,type:b.SourceType.SERVER}),c=C.clauses(e),f=new b.DataViewRecord({source:l,store:s,dataFilter:c});C.TimelapseManager.buildCanvasLayerState(f,"Query from "+r.utc(e.date).format(t.datetimeFormat))},this.container=i.element(".primaryDisplay > ccri-popup-container"),this.filterRegex=/^INTERSECTS.*AND.*DURING/,this.history=[],this.historyRange={start:r.utc().subtract(1,"days"),end:r.utc()},this.prefix=["timelapse","queryHistory"]}return t.prototype.deleteQuery=function(t){var e=r.utc(t.date).toISOString();return this.$http.delete(this.$filter("uriCat")(w.DataSourceManager.getPrimaryOgcConfig().url,t.statsEndpoint),{params:{typeName:t.typeName,who:t.userDN,dates:e+"/"+e}}).catch(function(e){h.alerter.errorMsg("Reason: "+e.statusText,"Time-lapse history delete error: "+t.layerName,{timeOut:5e3})})},t.prototype.getHistory=function(){return this.history},t.prototype.getHistoryRange=function(){return this.historyRange},t.$inject=["$filter","$http","ccri.popup.manager","ccri.angular-utils.WidgetDef","stealth.geo.timelapse.timelapseHistory.queryRecord","stealth.geo.timelapse.manager.Manager"],t.datetimeFormat=g.config.get("app.datetimeFormat.date")+" "+g.config.get("app.datetimeFormat.time"),t}();e.QueryHistory=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(29),i=n(18),o=n(44),a=n(628),s=n(21),l=n(15),c=n(2937);function u(t,e,n,u){return{template:c,controller:["$scope",function(c){var d=1,f=u.getHistory(),p={user:{direction:"",order:0},typeName:{direction:"",order:0},queryType:{direction:"",order:0},date:{direction:"desc",order:d},startDtg:{direction:"",order:0},endDtg:{direction:"",order:0},cql:{direction:"",order:0},hits:{direction:"",order:0},queryTime:{direction:"",order:0}},h=l.config.get("app.datetimeFormat.date")+" "+l.config.get("app.datetimeFormat.time");function g(t,e){var n=o(p).filter(function(t){return a(p,p[t].order,["desc"])}),s=t;return i(e)||(s=r(t,function(t){return-1!==t.user.toLowerCase().indexOf(e)||-1!==t.typeName.toLowerCase().indexOf(e)||-1!==t.cql.toLowerCase().indexOf(e)})),a(s,n)}c.historyRange=u.getHistoryRange(),c.inRefresh=!1,c.searchText="",c.filteredHistory=f,c.deleteQuery=function(t){c.inRefresh=!0,u.deleteQuery(t).finally(function(){n(function(){c.refreshHistory()},500)})},c.formatTimestamp=function(t){return s.utc(t).format(h)},c.filterChange=function(){c.filteredHistory=g(f,c.searchText)},c.getSortClass=function(t){var e="fa-sort";return""!==p[t].direction&&(e+="-"+p[t].direction),e},c.refreshHistory=function(){c.inRefresh=!0,u.refreshHistory(function(){f=u.getHistory(),c.filteredHistory=g(f,c.searchText),c.inRefresh=!1})},c.rerunQuery=u.rerunQuery,c.showDetails=function(n){var r=e.$new();r.title="CQL Filter Details",r.value=n.filter;var i=t.open({size:"lg",scope:r,templateUrl:"core/popup/components/fieldview.tpl.html",controller:"fieldViewController",backdrop:"static",backdropClass:"wizardMask"});i.closed.then(function(){r.$destroy(),r=null,i=null})},c.toggleSort=function(t){switch(p[t].direction){case"":p[t].direction="desc";break;case"desc":p[t].direction="asc";break;case"asc":p[t].direction=""}p[t].order=++d},c.refreshHistory()}]}}u.$inject=["$uibModal","$rootScope","$timeout","stealth.geo.timelapse.timelapseHistory.queryHistory"],e.stGeoTimelapseHistory=u},function(t,e){t.exports='<div class="popupFillSpace timelapseHistoryPopup">\n    <div class="timelapseHistorySearchBar">\n        Select time range:\n        <input ng-model="historyRange.start" ccri-angular-utils-datetimepicker required\n               ccri-angular-utils-datetimepicker-options="{todayButton: true, timepicker: false, format: \'Y-m-d\'}"\n               ccri-angular-utils-utc-moment-format="YYYY-MM-DD"/>\n        -\n        <input ng-model="historyRange.end" ccri-angular-utils-datetimepicker required\n               ccri-angular-utils-datetimepicker-options="{todayButton: true, timepicker: false, format: \'Y-m-d\'}"\n               ccri-angular-utils-utc-moment-format="YYYY-MM-DD"/>\n        <span class="btn btn-default fa-stack toggleButton"\n              ng-click="refreshHistory()">\n            <i class="fa fa-fw fa-stack-1x fa-refresh"></i>\n        </span>\n        <span style="flex-grow: 1"></span>\n        <input type="text" placeholder="Filter Results"\n                ng-model="searchText" ng-change="filterChange()" ng-model-options="{debounce: 200}"/>\n    </div>\n    <div class="tableWrapper" ng-class="{\'ng-hide\': inRefresh}">\n        <table>\n            <thead>\n                <tr>\n                    <th style="min-width: 75px">User\n                        <span class="fa-stack" ng-click="toggleSort(\'user\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'user\')"></i>\n                        </span>\n                    </th>\n                    <th style="min-width: 80px">Layer\n                        <span class="fa-stack" ng-click="toggleSort(\'typeName\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'typeName\')"></i>\n                        </span>\n                    </th>\n                    <th style="min-width: 120px">Query Type\n                        <span class="fa-stack" ng-click="toggleSort(\'queryType\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'queryType\')"></i>\n                        </span>\n                    </th>\n                    <th class="dateColumn">Query Date\n                        <span class="fa-stack" ng-click="toggleSort(\'date\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'date\')"></i>\n                        </span>\n                    </th>\n                    <th class="dateColumn">Start Date\n                        <span class="fa-stack" ng-click="toggleSort(\'startDtg\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'startDtg\')"></i>\n                        </span>\n                    </th>\n                    <th class="dateColumn">End Date\n                        <span class="fa-stack" ng-click="toggleSort(\'endDtg\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'endDtg\')"></i>\n                        </span>\n                    </th>\n                    <th>User CQL\n                        <span class="fa-stack" ng-click="toggleSort(\'cql\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'cql\')"></i>\n                        </span>\n                    </th>\n                    <th>Results\n                        <span class="fa-stack" ng-click="toggleSort(\'hits\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'hits\')"></i>\n                        </span>\n                    </th>\n                    <th>Query Time\n                        <span class="fa-stack" ng-click="toggleSort(\'queryTime\')">\n                            <i class="fa fa-fw fa-stack-1x" ng-class="getSortClass(\'queryTime\')"></i>\n                        </span>\n                    </th>\n                    <th style="min-width: 55px"></th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="queryRecord in filteredHistory" ng-class-odd="\'oddRow\'">\n                    <td>{{ ::queryRecord.user }}</td>\n                    <td>{{ ::queryRecord.typeName }}</td>\n                    <td>{{ ::queryRecord.queryType }}</td>\n                    <td>{{ ::formatTimestamp(queryRecord.date) }}</td>\n                    <td>{{ ::formatTimestamp(queryRecord.startDtg) }}</td>\n                    <td>{{ ::formatTimestamp(queryRecord.endDtg) }}</td>\n                    <td class="limitColumn">{{ ::queryRecord.cql }}</td>\n                    <td>{{ ::queryRecord.hits | number:0 }}</td>\n                    <td>{{ ::queryRecord.queryTime | millisToDHMS:true:true }}</td>\n                    <td>\n                        <span class="btn btn-default fa-stack toggleButton"\n                              ng-click="showDetails(queryRecord)"\n                              uib-tooltip="Show full CQL filter"\n                              tooltip-placement="auto left" tooltip-append-to-body="true">\n                            <i class="fa fa-fw fa-stack-1x fa-info"></i>\n                        </span>\n                        <span class="btn btn-default fa-stack toggleButton"\n                              ng-click="rerunQuery(queryRecord)"\n                              uib-tooltip="Load layer"\n                              tooltip-placement="auto left" tooltip-append-to-body="true">\n                            <i class="fa fa-fw fa-stack-1x fa-plus"></i>\n                        </span>\n                        <span class="btn btn-default fa-stack toggleButton"\n                              ng-if="queryRecord.deletable"\n                              ng-click="deleteQuery(queryRecord)"\n                              uib-tooltip="Remove query from history"\n                              tooltip-placement="auto left" tooltip-append-to-body="true">\n                            <i class="fa fa-fw fa-stack-1x fa-times"></i>\n                        </span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n    <div ng-class="{\'ng-hide\': !inRefresh}" style="margin: auto">\n        <i class="fa fa-spinner fa-3x fa-spin"></i>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(270);function o(t,e,n){return function(r,i,o){return new a(r,i,o,t,e,n)}}o.$inject=["stealth.core.utils.DtgClauseInfo","stealth.core.utils.GeomClauseInfo","CONFIG"],e.factory=o;var a=function(){return function(t,e,n,o,a,s){if(this.DtgClauseInfo=o,this.GeomClauseInfo=a,this.CONFIG=s,this.andSplit=/\s+AND\s+/,this.filterClauses=t.filter.split(this.andSplit),this.dtgInfo=new o(this.filterClauses[1]),this.geomInfo=new a(this.filterClauses[0]),r.isEmpty(this.dtgInfo.error)){if(this.layerName=e.name,this.layerId=e.id,this.dataSource=e,this.idField=i.KeywordHelper.getFieldByName(e,"trkId"),this.cql=this.filterClauses.length>2?this.filterClauses.slice(2).join(" AND "):"",this.queryTime=t.planTime+t.scanTime,this.queryType=t.queryType,this.userDN=t.user,this.user=t.user,r.isString(this.user)&&this.user.indexOf("CN=")>-1){var l=r(this.user).split(",").map(r.trim).find(function(t){return 0===t.indexOf("CN=")});l&&(this.user=l.slice(3).trim())}r.isObject(this.user)&&r.has(this.user,"CN")&&(this.user=this.user.CN),this.deletable=s.userDn===this.userDN,this.statsEndpoint=n,this.date=t.date,this.hints=t.hints,this.typeName=t.typeName,this.filter=t.filter,this.hits=t.hits,this.geomFeatures=this.geomInfo.geomFeatures,this.geomField=this.geomInfo.geomField,this.startDtg=this.dtgInfo.startDtg,this.endDtg=this.dtgInfo.endDtg,this.dtgField=this.dtgInfo.dtgField}else this.error=this.dtgInfo.error}}();e.QueryRecord=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2940),o=n(1070),a=n(1071),s=n(1085),l=n(286),c=n(1086),u=n(2989),d=n(1087),f=n(347),p=n(347),h=n(347),g=n(454),m=n(454),v=n(454),y=n(455),b=n(455),w=n(455),_=n(630),x=n(630),S=n(631),C=n(1091),E=n(456),T=n(456),M=n(1070);e.Dispatcher=M.Dispatcher;var k=n(1087);e.SearchCtrl=k.SearchCtrl;var A=n(286);e.Loader=A.Loader,e.InjectibleLoader=A.InjectibleLoader,e.InjectibleCnt=A.InjectibleCnt;var I=n(632);e.Action=I.Action;var O=n(1085);e.ActionManager=O.ActionManager;var P=n(3017);e.GoToAction=P.GoToAction;var L=n(3018);e.SearchAction=L.SearchAction;var D=n(3019);e.DataSource=D.DataSource;var N=n(1086);e.DataSourceManager=N.DataSourceManager;var R=n(631);e.SearchResult=R.SearchResult,e.SearchResultList=R.SearchResultList;var F=n(1071);e.SearchResultsManager=F.SearchResultsManager;var B=n(348);e.ResultTypeWidgetCfg=B.ResultTypeWidgetCfg;var j=n(347);e.DefaultResultTypeWidgetCfg=j.DefaultResultTypeWidgetCfg;var q=n(454);e.OSMResultTypeWidgetCfg=q.OSMResultTypeWidgetCfg;var z=n(455);e.TwitterResultTypeWidgetCfg=z.TwitterResultTypeWidgetCfg;var U=n(630);e.WikipediaResultTypeWidgetCfg=U.WikipediaResultTypeWidgetCfg,e.WikipediaResultTitleCtrl=U.WikipediaResultTitleCtrl;var $=n(456);e.SelectionManager=$.SelectionManager;var V=n(1091);e.ResultsToolbar=V.ResultsToolbar,r.module("stealth.search",[i.module.name,"ccri.angular-utils","ccri.list-view"]).service("stealth.search.dispatcher",o.Dispatcher).service("stealth.search.searchResultsManager",a.SearchResultsManager).service("stealth.search.actionManager",s.ActionManager).service("stealth.search.loader",l.Loader).service("stealth.search.dataSourceManager",c.DataSourceManager).run(u.$run).directive("stealthSearchAction",d.searchDirective).directive("stealthSearchDefaultTitle",f.titleDirective).directive("stealthSearchDefaultCollapsed",p.collapsedDirective).directive("stealthSearchDefaultContent",h.contentDirective).directive("stealthSearchOsmTitle",g.titleDirective).directive("stealthSearchOsmCollapsed",m.collapsedDirective).directive("stealthSearchOsmContent",v.contentDirective).directive("stealthSearchTwitterTitle",y.titleDirective).directive("stealthSearchTwitterCollapsed",b.collapsedDirective).directive("stealthSearchTwitterContent",w.contentDirective).directive("stealthSearchWikipediaTitle",_.titleDirective).directive("stealthSearchWikipediaContent",x.contentDirective).directive("stealthSearchResultList",S.resultListDirective).directive("stealthSearchResultsToolbar",C.resultsToolbarDirective).directive("stealthSearchResultSelection",E.resultSelectionDirective).directive("stealthSearchSelectionSelectAll",T.selectionSelectAllDirective)},,,,function(t,e,n){var r=n(148),i=n(260),o=n(44),a=i(function(t,e,n,i){r(e,o(e),t,i)});t.exports=a},function(t,e,n){var r=n(847),i=n(267)(r);t.exports=i},function(t,e,n){var r=n(539),i=n(262);t.exports=function(t,e){var n=i(t);return null==e?n:r(n,e)}},function(t,e,n){var r=n(546),i=n(71);t.exports=function t(e,n,o,a,s,l){return i(e)&&i(n)&&(l.set(n,e),r(e,n,void 0,t,l),l.delete(n)),e}},function(t,e,n){t.exports=n(1073)},function(t,e,n){var r=n(103);t.exports=function(t,e){return r(e,function(e){return[e,t[e]]})}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}},function(t,e,n){t.exports=n(1075)},function(t,e,n){t.exports=n(562)},function(t,e,n){var r=n(1076),i=n(627),o=n(43);t.exports=function(t,e){return r(t,o(e,3),i)}},function(t,e,n){var r=n(1066),i=n(162),o=n(108);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},function(t,e,n){var r=n(627),i=n(162);t.exports=function(t,e){return t&&r(t,i(e))}},function(t,e,n){var r=n(1077),i=n(44);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(1077),i=n(108);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(791),i=n(1078),o=n(104),a=Object.prototype.toString,s=i(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=a.call(e)),t[e]=n},r(o));t.exports=s},function(t,e,n){var r=n(222);t.exports=function(t,e,n,i){return r(t,function(t,r,o){e(i,n(t),r,o)}),i}},function(t,e,n){var r=n(43),i=n(1078),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=i(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=s.call(e)),a.call(t,e)?t[e].push(n):t[e]=[n]},r);t.exports=l},function(t,e,n){var r=n(1079),i=n(51)(r);t.exports=i},function(t,e,n){var r=n(180),i=n(34),o=n(157);t.exports=function(t,e,n){var a=-1,s=(e=r(e,t)).length;for(s||(s=1,t=void 0);++a<s;){var l=null==t?void 0:t[o(e[a])];void 0===l&&(a=s,l=n),t=i(l)?l.call(t):l}return t}},function(t,e,n){var r=n(403);t.exports=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:r(t,e,n,i)}},function(t,e,n){var r=n(559);t.exports=function(t,e){return null==t||r(t,e)}},function(t,e,n){var r=n(1081),i=n(162);t.exports=function(t,e,n){return null==t?t:r(t,e,i(n))}},function(t,e,n){var r=n(1081),i=n(162);t.exports=function(t,e,n,o){return o="function"==typeof o?o:void 0,null==t?t:r(t,e,i(n),o)}},function(t,e,n){var r=n(512),i=n(108);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e){t.exports="<h1 \n        ng-style=\"{color: record.selected ? 'purple' : 'green'}\"\n        >TITLE</h1>\n<i \n        class=\"fa\"\n        ng-class=\"record.selected ? 'fa-check-square-o' : 'fa-square-o'\" \n        ng-click=\"record.selected = !record.selected\"\n        ></i>\n"},function(t,e){t.exports='<div class="result-expanded">\n\n    <div class="result-attrs">\n        <table>\n            <tr\n                ng-repeat="(k, v) in getProperties(record)"\n                ng-if="v && k !== \'id\' && k !== \'geometry\'">\n                    <td>{{::k}}</td><td>{{::v}}</td>\n            </tr>\n        </table>\n    </div>\n\n</div>\n'},function(t,e,n){var r=n(188),i=n(406),o=Object.prototype.hasOwnProperty,a=i(function(t,e,n){o.call(t,n)?++t[n]:r(t,n,1)});t.exports=a},function(t,e,n){var r=n(702)(n(2971));t.exports=r},function(t,e,n){var r=n(511),i=n(43),o=n(60),a=Math.max,s=Math.min;t.exports=function(t,e,n){var l=null==t?0:t.length;if(!l)return-1;var c=l-1;return void 0!==n&&(c=o(n),c=n<0?a(l+c,0):s(c,l-1)),r(t,i(e,3),c,!0)}},function(t,e,n){var r=n(166),i=n(4);t.exports=function(t,e){return r(i(t,e),1)}},function(t,e,n){var r=n(166),i=n(4),o=1/0;t.exports=function(t,e){return r(i(t,e),o)}},function(t,e,n){var r=n(166),i=n(4),o=n(60);t.exports=function(t,e,n){return n=void 0===n?1:o(n),r(i(t,e),n)}},function(t,e,n){var r=n(163),i=n(187),o=n(1079),a=n(51),s=n(121),l=a(function(t,e,n){var a=-1,l="function"==typeof e,c=s(t)?Array(t.length):[];return i(t,function(t){c[++a]=l?r(e,t,n):o(t,e,n)}),c});t.exports=l},function(t,e,n){var r=n(406)(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});t.exports=r},function(t,e,n){var r=n(2978),i=n(1065),o=n(43),a=n(883),s=n(17);t.exports=function(t,e,n){var l=s(t)?r:a,c=arguments.length<3;return l(t,o(e,4),n,c,i)}},function(t,e){t.exports=function(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}},function(t,e,n){var r=n(307),i=n(795),o=n(43),a=n(17),s=n(624);t.exports=function(t,e){return(a(t)?r:i)(t,s(o(e,3)))}},function(t,e,n){var r=n(1083),i=n(2981),o=n(17);t.exports=function(t){return(o(t)?r:i)(t)}},function(t,e,n){var r=n(1083),i=n(159);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(2983),i=n(2984),o=n(17),a=n(147),s=n(60);t.exports=function(t,e,n){return e=(n?a(t,e,n):void 0===e)?1:s(e),(o(t)?r:i)(t,e)}},function(t,e,n){var r=n(600),i=n(189),o=n(453);t.exports=function(t,e){return o(i(t),r(e,0,t.length))}},function(t,e,n){var r=n(600),i=n(453),o=n(159);t.exports=function(t,e){var n=o(t);return i(n,r(e,0,n.length))}},function(t,e,n){var r=n(2986),i=n(2987),o=n(17);t.exports=function(t){return(o(t)?r:i)(t)}},function(t,e,n){var r=n(189),i=n(453);t.exports=function(t){return i(r(t))}},function(t,e,n){var r=n(453),i=n(159);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(380),i=n(181),o=n(121),a=n(46),s=n(535),l="[object Map]",c="[object Set]";t.exports=function(t){if(null==t)return 0;if(o(t))return a(t)?s(t):t.length;var e=i(t);return e==l||e==c?t.size:r(t).length}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(2),o=function(t,e,n,o,a,s,l){var c=e["action-bar"];a.registerDataSources(function(t){return i(t,"dataSources",[]).map(function(t){return t.$injector=l,n.loadClass("stealthSearch.DataSource",[t])})}(c)),o.registerActions(function(t){return i(t,"actions",[]).map(function(t){return t.dataSources=i(t,"dataSources",[]).map(function(t){var e=a.registeredDataSources[t];if(e)return e;throw new Error("Could not find data source. Please register data sources before parsing actions")}),t.$injector=l,n.loadClass(t.type,[t])})}(c)),function(t){r(i(t,"resultTypes",[]),function(t){t.$injector=l,s.registerWidgetByResultType(t.typeName,function(e,r){return n.loadClass(t.type,[t,e,r])})})}(c),t.addInputToApp()};e.$run=o,o.$inject=["stealth.search.dispatcher","CONFIG","stealth.search.loader","stealth.search.actionManager","stealth.search.dataSourceManager","stealth.search.searchResultsManager","$injector"]},function(t,e){t.exports='<div class="stealth-search flex-row flex-align-items-center">\n    <div class="actions">\n        <ccri-angular-utils-select class="transparent-dd" ng-if="availableActions.length > 0"\n            hide-tooltip="true" ng-model="selectedAction" from-list="actions"\n            select-fn="selectAction" label-fn="actionLabelFn" filter-fn="actionListFilter">\n        </ccri-angular-utils-select>\n    </div>\n    <form class="form-inline flex-row flex-align-items-center" ng-submit="selectedAction.executeOnSearch(searchString)">\n        <div class="search-input" tooltip-enable="!!selectedAction.acceptedFormatDescriptions"\n            uib-tooltip-template="\'stealth.search/actions/inputTooltip.tpl.html\'" tooltip-class="nowrap"\n            tooltip-placement="bottom-right" tooltip-animation="true"\n            tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n            <div class="input-icons map-pin-icon">\n                <i class="fa fa-fw fa-pull-left ccri-icon ccri-icon-map-pin"\n                   ng-class="{\'text-danger\': selectedAction.error, \'bar-color2\': !selectedAction.error}"\n                ></i>\n            </div>\n            <input type="text" class="form-control input-xs" placeholder="{{selectedAction.placeholder}}" ng-model="searchString">\n            <div class="input-icons loading-indicator">\n                <i class="fa fa-fw fa-spin fa-circle-o-notch" ng-class="{\'ng-hide\': !selectedAction.loading}"></i>\n            </div>\n        </div>\n        <div class="controls" ng-if="selectedAction.controls && selectedAction.controls.length > 0">\n            <a ng-repeat="b in selectedAction.controls" ng-click="b.cb()" ng-style="{ color: b.color }"\n                tooltip-enable="!!b.tooltip" uib-tooltip="{{b.tooltip}}" tooltip-class="nowrap"\n                tooltip-placement="bottom-right" tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n                <i ng-if="b.icon" class="fa fa-fw" ng-class="b.icon"></i> {{b.name}}\n            </a>\n        </div>\n    </form>\n</div>'},function(t,e){t.exports='<div class="bar-color2" style="text-align:left;font-size:11px;">\n    <div style="margin-bottom:3px;"><i>Specify location as:</i></div>\n    <div ng-repeat="desc in selectedAction.acceptedFormatDescriptions">&nbsp;&nbsp;-&nbsp;&nbsp;{{::desc}}</div>\n</div>\n'},function(t,e){t.exports='<div class="search-result-title" ng-class="{selected: record.selected}">\n    {{::record.fields.name}}\n</div>\n'},function(t,e){t.exports='<div>\n    <stealth-search-result-selection ss="sm" record="record"></stealth-search-result-selection>\n</div>\n'},function(t,e){t.exports='<div class="result-expanded">\n    <div class="result-attrs">\n        <table>\n            <tr\n                ng-repeat="(k, v) in getProperties(record)"\n                ng-if="v && k !== \'id\' && k !== \'geometry\'">\n                    <td>{{::k}}</td><td>{{::v}}</td>\n            </tr>\n        </table>\n    </div>\n\n</div>\n'},function(t,e){t.exports="<div class=\"search-result-title\" ng-class=\"{selected: record.selected}\">\n        {{::record.fields.clean_text.slice(0, 35)}}{{::(record.fields.clean_text.length > 35 ? '...' : '')}} ({{::record.fields.lang}})\n</div>\n"},function(t,e){t.exports='<div>\n    Tweeted by <span class="search-result-key"> {{::record.fields.user_screenname}}</span>\n    <stealth-search-result-selection ss="sm" record="record"></stealth-search-result-selection>\n</div>\n'},function(t,e){t.exports='<div class="result-expanded">\n\n    <div class="result-attrs">\n        <table>\n            <tr\n                ng-repeat="(k, v) in getProperties(record)"\n                ng-if="v && k !== \'id\' && k !== \'geometry\'">\n                    <td>{{::k}}</td><td>{{::v}}</td>\n            </tr>\n        </table>\n    </div>\n\n</div>\n'},function(t,e,n){var r=n(60),i="Expected a function";t.exports=function(t,e){if("function"!=typeof e)throw new TypeError(i);return t=r(t),function(){if(--t<1)return e.apply(this,arguments)}}},function(t,e,n){var r=n(51),i=n(165),o=n(263),a=n(223),s=r(function(t,e,n){var r=1;if(n.length){var l=a(n,o(s));r|=32}return i(t,r,e,n,l)});s.placeholder={},t.exports=s},function(t,e,n){var r=n(51),i=n(165),o=n(263),a=n(223),s=r(function(t,e,n){var r=3;if(n.length){var l=a(n,o(s));r|=32}return i(e,r,t,n,l)});s.placeholder={},t.exports=s},function(t,e,n){var r=n(165),i=16;function o(t,e,n){var a=r(t,i,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return a.placeholder=o.placeholder,a}o.placeholder={},t.exports=o},function(t,e,n){var r=n(165),i=512;t.exports=function(t){return r(t,i)}},function(t,e,n){var r=n(1089);t.exports=function(t){return r(2,t)}},function(t,e,n){var r=n(163),i=n(103),o=n(166),a=n(43),s=n(51),l=n(158),c=n(3005),u=n(17),d=Math.min,f=c(function(t,e){var n=(e=1==e.length&&u(e[0])?i(e[0],l(a)):i(o(e,1),l(a))).length;return s(function(i){for(var o=-1,a=d(i.length,n);++o<a;)i[o]=e[o].call(this,i[o]);return r(t,this,i)})});t.exports=f},function(t,e,n){var r=n(51);t.exports=r},function(t,e,n){var r=n(51),i=n(60),o="Expected a function";t.exports=function(t,e){if("function"!=typeof t)throw new TypeError(o);return e=void 0===e?e:i(e),r(t,e)}},function(t,e,n){var r=n(163),i=n(378),o=n(51),a=n(369),s=n(60),l="Expected a function",c=Math.max;t.exports=function(t,e){if("function"!=typeof t)throw new TypeError(l);return e=null==e?0:c(s(e),0),o(function(n){var o=n[e],s=a(n,0,e);return o&&i(s,o),r(t,this,s)})}},function(t,e,n){var r=n(599);t.exports=function(t){return r(t,1)}},function(t,e,n){var r=n(162),i=n(228);t.exports=function(t,e){return i(r(e),t)}},function(t,e){t.exports='<div class="search-wikipedia-title flex-row flex-align-items-center"\n    uib-tooltip-html="tooltipHoverTpl" tooltip-class="df-tooltip-thumbnail"\n    tooltip-append-to-body="true" tooltip-placement="auto right"\n    tooltip-animate="false" tooltip-popup-delay="300" tooltip-trigger="mouseenter"\n    >\n    <stealth-search-result-selection\n        ss="sm"\n        record="record"\n        class="buf-md-mr"\n    ></stealth-search-result-selection>\n    <st-df-entity-thumbnail\n        img-src="{{::record.thumbnail}}"\n        record="record"\n        class="buf-md-mr"\n    ></st-df-entity-thumbnail>\n\n    <div class="flex-1 flex-column flex-justify-content-space-around">\n        <div class="ellipsis" uib-tooltip="{{::record.properties.title}}"\n            tooltip-class="nowrap tooltip-order" tooltip-append-to-body="true"\n            tooltip-placement="right" tooltip-animate="false"\n            tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n            tooltip-enable="false" ccri-angular-utils-tooltip-overflow\n        >\n            {{::record.properties.title}}\n        </div>\n        <div class="ellipsis">\n            {{::record.properties.kind}}\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div style="margin-left: 15px;">{{record.properties.uri}}</div>\n'},function(t,e){t.exports='<div class="selection check-input">\n    <i\n        class="fa"\n        ng-class="record.selected ? \'fa-check-square-o\' : \'fa-square-o\'"\n        ng-click="$event.stopPropagation(); ss.select(record, !record.selected);"></i>\n</div>'},function(t,e){t.exports='<div class="selection check-input" ng-click="ss.selectAll(ds, !ss.isAllSelected)">\n    Select All:\n    <i class="fa"\n       ng-class="ss.isAllSelected ? \'fa-check-square-o\' : \'fa-square-o\'">\n    </i>\n</div>'},,function(t,e){t.exports='<div>\n    <ccri-list-view-element\n            datastore="searchResultList.datastore"\n            decorate-card="searchResultList.decorateCard"\n            menu-resolver="searchResultList.menuResolver"\n            toolbar-widget="searchResultList.toolbarWidget"\n            button-options="searchResultList.buttonOptions"\n            filter-resolver="searchResultList.filterResolver"\n            on-mouse-enter="searchResultList.onMouseEnter"\n            on-mouse-leave="searchResultList.onMouseLeave"\n            expand-options="true"\n    ></ccri-list-view-element>\n</div>\n'},function(t,e){t.exports='<div class="search-results-toolbar">\n    <div class="flex-row flex-align-items-center flex-justify-content-space-between">\n        <span>Add Selected Results to Group:</span>\n        <stealth-search-selection-select-all\n            ss="searchResultList.selectionManager"\n            ds="searchResultList.datastore">\n        </stealth-search-selection-select-all>\n    </div>\n\n    <div class="flex-row flex-align-items-center search-toolbar-group buf-xs-mt">\n        <ccri-angular-utils-select\n            class="flex-1"\n            ng-class="{\'ng-hide\': newGroupMode}"\n            ng-model="selection.existingGroup"\n            from-list="groups"\n            label-fn="getGroupLabel"\n            placeholder="Select a group"\n        ></ccri-angular-utils-select>\n\n        <input type="text" ng-model="selection.newGroupName"\n            ng-class="{\'ng-hide\': !newGroupMode}" class="form-control input-xs"\n            placeholder="Enter Group Name" style="font-size:12px;"\n        />\n\n        <i class="fa fa-fw fa-pencil buf-md-ml clickable flex-static search-results-toolbar-icon"\n            ng-class="{\'active\':newGroupMode}"\n            ng-click="setNewGroupName(); newGroupMode = !newGroupMode;"\n            uib-tooltip="Create a Group"\n            tooltip-class="nowrap tooltip-order" tooltip-append-to-body="true"\n            tooltip-placement="top" tooltip-animation="true"\n            tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n        ></i>\n\n        <i class="fa fa-fw fa-plus buf-md-ml clickable flex-static search-results-toolbar-icon"\n            ng-class="{\n                \'disabled\': !searchResultList.selectionManager.isAnySelected ||\n                    (newGroupMode ? !selection.newGroupName : !selection.existingGroup)\n            }"\n            ng-click="appendToGroup(newGroupMode); newGroupMode = false;"\n            uib-tooltip="Add Results To Group"\n            tooltip-class="nowrap tooltip-order" tooltip-append-to-body="true"\n            tooltip-placement="top" tooltip-animation="true"\n            tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n        ></i>\n    </div>\n    <hr>\n</div>\n'},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(632),o=n(286),a=n(126),s=n(1090),l=n(6),c=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.id="GoToAction",r.title="Go To",r.shortcut="gt",r.placeholder="Find Location",r.$interpolate=null,r.$http=null,r.$q=null,r.$timeout=null,r.$interval=null,r.gc=new o.InjectibleCnt("ccri.geocoder.geocoder"),r.loader=new o.InjectibleCnt("stealth.search.loader"),r.GeoJson=new o.InjectibleCnt("stealth.core.geo.ol3.format.GeoJson"),r.VectorOverlay=new o.InjectibleCnt("stealth.core.geo.ol3.overlays.Vector"),r.ol3Map=new o.InjectibleCnt("ol3Map"),r.controls=[],r.executeOnSearch=function(t){var e=r;e.error=!1,t&&(e.loading=!0,r.gc.instance.resolve(t).then(function(t){if(t&&t.length>0){var n=e.geoJsonFormatter.readGeometry(t[0]),i=1;if(n){r.vectorLayerContainer.addToMap();var o=new l.Feature({geometry:n});e.vectorLayerContainer.clear(),e.vectorLayerContainer.setOpacity(i),e.vectorLayerContainer.addFeature(o),e.ol3Map.instance.fit(n.getExtent(),!1,2e3,{maxZoom:Math.max(10,e.ol3Map.instance.getView().getZoom())}),e.fadeDelay&&(e.$timeout.cancel(e.timeoutPromise),e.$interval.cancel(e.intervalPromise),e.timeoutPromise=e.$timeout(function(){e.intervalPromise=e.$interval(function(){(i-=.025)<=0?(e.vectorLayerContainer.clear(),e.vectorLayerContainer.removeFromMap(),e.$interval.cancel(e.intervalPromise)):e.vectorLayerContainer.setOpacity(i)},200,40)},e.fadeDelay))}}else e.error=!0}).finally(function(){e.loading=!1}))},r.executeOnResult=function(){console.log("go to test result")},r.registerInjectibles();var i=r;return r.geoJsonFormatter=new i.GeoJson.instance,r.clearSearch=function(){i.vectorLayerContainer.clear(),i.vectorLayerContainer.removeFromMap(),i.fadeDelay&&(i.$timeout.cancel(i.timeoutPromise),i.$interval.cancel(i.intervalPromise))},a.each(r.dataSources,function(t){var e=i.loader.instance.loadClass(t.geometryFormat,[{}]);i.gc.instance.register(new s.URLResolver(i.$interpolate,i.$http,t.urlSearchTemplate,t.name,t.resultsSelectionPath,t.geometrySelectionPath,e),t.order)}),r.controls.push({icon:"fa-times",color:"#ee5f5b",tooltip:"Clear results",cb:r.clearSearch}),r.vectorLayerContainer=new i.VectorOverlay.instance({styleBuilder:function(){return[new l.style.Style({stroke:new l.style.Stroke({color:"black",width:4}),fill:new l.style.Fill({color:[255,255,0,.1]}),text:new l.style.Text({text:"",font:"normal 26px CcriIcon",textBaseline:"bottom",stroke:new l.style.Stroke({color:"black",width:1}),fill:new l.style.Fill({color:"yellow"})})}),new l.style.Style({stroke:new l.style.Stroke({color:"yellow",width:2})})]},layerOpts:{updateWhileAnimating:!0,updateWhileInteracting:!0}}),r.acceptedFormatDescriptions=r.gc.instance.getAcceptedFormatDescriptions(),r}return r(e,t),e}(i.Action);e.GoToAction=c},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(632),o=n(286),a=n(631),s=n(84),l=n(171),c=n(126),u=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.id="SearchAction",r.title="Search",r.shortcut="s",r.placeholder="Enter Search Terms",r.$interpolate=null,r.$http=null,r.$q=null,r.$rootScope=null,r.sidebarManager=new o.InjectibleCnt("sidebarManager"),r.WidgetDef=new o.InjectibleCnt("ccri.angular-utils.WidgetDef"),r.controls=[],r.executeOnSearch=function(t){var e,n,i=r,o="Search: "+t,u=i.$rootScope.$new();i.loading=!0,n=new a.SearchResultList(o,new s.List.ArrayStore([],"id"),i.resultToolbarDirective,i.$injector),u.searchResultList=n;var d=c.map(r.dataSources,function(e){var r=i.$http.get(i.$interpolate(e.urlSearchTemplate)({searchTerm:t})),o=e.idSelectionPath||"id",c="data"+(e.resultsSelectionPath?"."+e.resultsSelectionPath:"");return r.then(function(t){var r=l.get(t,c,[]).map(function(t){return t.id=l.get(t,o),t.dataSource=e,new a.SearchResult(t,o)});s.List.ArrayStore.prototype.add.apply(n.datastore,r)}),r});i.$q.all(d).then(function(){e=i.sidebarManager.instance.addButton(o,"fa-search",375,new i.WidgetDef.instance({tag:"stealth-search-result-list",scope:u,isolateScope:!0,attrs:'search-result-list="searchResultList"'}),void 0,!1,function(){n.destroy()}),i.sidebarManager.instance.toggleButton(e,!0),n.setBtnId(e)}).finally(function(){i.loading=!1})},r.registerInjectibles(),r}return r(e,t),e}(i.Action);e.SearchAction=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(126),i=function(){return function(t){var e=this;r.each(t,function(t,n){"type"!==n&&(e[n]=t)})}}();e.DataSource=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n(3055),n(3056),n(3057),n(3058),n(3059),n(3060),n(3061),n(3062),n(3063),n(3064),n(3065),n(3066)},function(t,e){!function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var n=!1,r=this;t(this).one("bsTransitionEnd",function(){n=!0});return setTimeout(function(){n||t(r).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery)},function(t,e){!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.close=function(e){var r=t(this),i=r.attr("data-target");i||(i=(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""));var o=t("#"===i?[]:i);function a(){o.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a())};var r=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var r=t(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof e&&i[e].call(r)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery)},function(t,e){!function(t){"use strict";var e=function(n,r){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,r),this.isLoading=!1};function n(n){return this.each(function(){var r=t(this),i=r.data("bs.button"),o="object"==typeof n&&n;i||r.data("bs.button",i=new e(this,o)),"toggle"==n?i.toggle():n&&i.setState(n)})}e.VERSION="3.3.7",e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();e+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(t.proxy(function(){r[i](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,r.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n).prop(n,!1))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=t.fn.button;t.fn.button=n,t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=r,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var r=t(e.target).closest(".btn");n.call(r,"toggle"),t(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),r.is("input,button")?r.trigger("focus"):r.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery)},function(t,e){!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};function n(n){return this.each(function(){var r=t(this),i=r.data("bs.carousel"),o=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n),a="string"==typeof n?n:o.slide;i||r.data("bs.carousel",i=new e(this,o)),"number"==typeof n?i.to(n):a?i[a]():o.interval&&i.pause().cycle()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=600,e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},e.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},e.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var r=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(r)},e.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){if(!this.sliding)return this.slide("next")},e.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},e.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(n,i),a=this.interval,s="next"==n?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],u=t.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var f=t.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(n),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([n,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(f)},0)}).emulateTransitionEnd(e.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(f)),a&&this.cycle(),this}};var r=t.fn.carousel;t.fn.carousel=n,t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=r,this};var i=function(e){var r,i=t(this),o=t(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),n.call(o,a),s&&o.data("bs.carousel").to(s),e.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery)},function(t,e){!function(t){"use strict";var e=function(n,r){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,r),this.$trigger=t('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(e){var n,r=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(r)}function r(n){return this.each(function(){var r=t(this),i=r.data("bs.collapse"),o=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&o.toggle&&/show|hide/.test(n)&&(o.toggle=!1),i||r.data("bs.collapse",i=new e(this,o)),"string"==typeof n&&i[n]()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=350,e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(n=i.data("bs.collapse"))&&n.transitioning)){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[a](this.$element[0][l])}}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=t.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(e.TRANSITION_DURATION)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},e.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(e,r){var i=t(r);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},e.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=t.fn.collapse;t.fn.collapse=r,t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var i=t(this);i.attr("data-target")||e.preventDefault();var o=n(i),a=o.data("bs.collapse")?"toggle":i.data();r.call(o,a)})}(jQuery)},function(t,e){!function(t){"use strict";var e=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};function i(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&t(n);return r&&r.length?r:e.parent()}function o(r){r&&3===r.which||(t(e).remove(),t(n).each(function(){var e=t(this),n=i(e),o={relatedTarget:this};n.hasClass("open")&&(r&&"click"==r.type&&/input|textarea/i.test(r.target.tagName)&&t.contains(n[0],r.target)||(n.trigger(r=t.Event("hide.bs.dropdown",o)),r.isDefaultPrevented()||(e.attr("aria-expanded","false"),n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))}))}r.VERSION="3.3.7",r.prototype.toggle=function(e){var n=t(this);if(!n.is(".disabled, :disabled")){var r=i(n),a=r.hasClass("open");if(o(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",o);var s={relatedTarget:this};if(r.trigger(e=t.Event("show.bs.dropdown",s)),e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},r.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var r=t(this);if(e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled")){var o=i(r),a=o.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&o.find(n).trigger("focus"),r.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(e.target);38==e.which&&l>0&&l--,40==e.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery)},function(t,e){!function(t){"use strict";var e=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function n(n,r){return this.each(function(){var i=t(this),o=i.data("bs.modal"),a=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);o||i.data("bs.modal",o=new e(this,a)),"string"==typeof n?o[n](r):a.show&&o.show(r)})}e.VERSION="3.3.7",e.TRANSITION_DURATION=300,e.BACKDROP_TRANSITION_DURATION=150,e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},e.prototype.show=function(n){var r=this,i=t.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=t.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(e.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},e.prototype.hide=function(n){n&&n.preventDefault(),n=t.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},e.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),n&&n()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):a()}else n&&n()},e.prototype.handleUpdate=function(){this.adjustDialog()},e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var r=t.fn.modal;t.fn.modal=n,t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=r,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var r=t(this),i=r.attr("href"),o=t(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&e.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(o,a,this)})}(jQuery)},function(t,e){!function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,n,r){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,r){n[t]!=r&&(e[t]=r)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},e.prototype.show=function(){var n=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=o[0].offsetWidth,f=o[0].offsetHeight;if(c){var p=s,h=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+f>h.bottom?"top":"top"==s&&u.top-f<h.top?"bottom":"right"==s&&u.right+d>h.width?"left":"left"==s&&u.left-d<h.left?"right":s,o.removeClass(p).addClass(s)}var g=this.getCalculatedOffset(s,u,d,f);this.applyPlacement(g,s);var m=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}},e.prototype.applyPlacement=function(e,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top+=a,e.left+=s,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var l=r[0].offsetWidth,c=r[0].offsetHeight;"top"==n&&c!=o&&(e.top=e.top+o-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(n),f=d?2*u.left-i+l:2*u.top-o+c,p=d?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(f,r[0][p],d)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(n){var r=this,i=t(this.$tip),o=t.Event("hide.bs."+this.type);function a(){"in"!=r.hoverState&&i.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=r?{top:0,left:0}:o?null:e.offset(),s={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},l=r?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,s,l,a)},e.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,l=e.top+o-a.scroll+r;s<a.top?i.top=a.top-s:l>a.top+a.height&&(i.top=a.top+a.height-l)}else{var c=e.left-o,u=e.left+o+n;c<a.left?i.left=a.left-c:u>a.right&&(i.left=a.left+a.width-u)}return i},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var r=t(this),i=r.data("bs.tooltip"),o="object"==typeof n&&n;!i&&/destroy|hide/.test(n)||(i||r.data("bs.tooltip",i=new e(this,o)),"string"==typeof n&&i[n]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery)},function(t,e){!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.7",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var r=t(this),i=r.data("bs.popover"),o="object"==typeof n&&n;!i&&/destroy|hide/.test(n)||(i||r.data("bs.popover",i=new e(this,o)),"string"==typeof n&&i[n]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery)},function(t,e){!function(t){"use strict";function e(n,r){this.$body=t(document.body),this.$scrollElement=t(n).is(document.body)?t(window):t(n),this.options=t.extend({},e.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=t(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new e(this,o)),"string"==typeof n&&i[n]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),o=/^#./.test(i)&&t(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=r)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<i[0])return this.activeTarget=null,this.clear();for(t=i.length;t--;)a!=o[t]&&e>=i[t]&&(void 0===i[t+1]||e<i[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',r=t(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=r,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery)},function(t,e){!function(t){"use strict";var e=function(e){this.element=t(e)};function n(n){return this.each(function(){var r=t(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new e(this)),"string"==typeof n&&i[n]()})}e.VERSION="3.3.7",e.TRANSITION_DURATION=150,e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),r=e.data("target");if(r||(r=(r=e.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),e.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=t(r);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},e.prototype.activate=function(n,r,i){var o=r.find("> .active"),a=i&&t.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(e.TRANSITION_DURATION):s(),o.removeClass("in")};var r=t.fn.tab;t.fn.tab=n,t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=r,this};var i=function(e){e.preventDefault(),n.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery)},function(t,e){!function(t){"use strict";var e=function(n,r){this.options=t.extend({},e.DEFAULTS,r),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each(function(){var r=t(this),i=r.data("bs.affix"),o="object"==typeof n&&n;i||r.data("bs.affix",i=new e(this,o)),"string"==typeof n&&i[n]()})}e.VERSION="3.3.7",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+a<=t-r)&&"bottom";var s=null==this.affixed,l=s?i:o.top;return null!=n&&i<=n?"top":null!=r&&l+(s?a:e)>=t-r&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,n,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-n-o})}};var r=t.fn.affix;t.fn.affix=n,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=r,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),r=e.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),n.call(e,r)})})}(jQuery)},,,,,,,,,,function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},a=!1,s=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){u(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&u(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){u(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){u(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(u,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return o[i]=a,r(i),i++},l.clearImmediate=c}function c(t){delete o[t]}function u(t){if(a)setTimeout(u,0,t);else{var e=o[t];if(e){a=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{c(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(78),n(402))},function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,f=u||d||Function("return this")(),p=Object.prototype.toString,h=Math.max,g=Math.min,m=function(){return f.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==i}(t))return r;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=s.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=function(t,e,r){var i,o,a,s,l,c,u=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function b(e){var n=i,r=o;return i=o=void 0,u=e,s=t.apply(r,n)}function w(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-u>=a}function _(){var t=m();if(w(t))return x(t);l=setTimeout(_,function(t){var n=e-(t-c);return f?g(n,a-(t-u)):n}(t))}function x(t){return l=void 0,p&&i?b(t):(i=o=void 0,s)}function S(){var t=m(),n=w(t);if(i=arguments,o=this,c=t,n){if(void 0===l)return function(t){return u=t,l=setTimeout(_,e),d?b(t):s}(c);if(f)return l=setTimeout(_,e),b(c)}return void 0===l&&(l=setTimeout(_,e)),s}return e=y(e)||0,v(r)&&(d=!!r.leading,a=(f="maxWait"in r)?h(y(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p),S.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=c=o=l=void 0},S.flush=function(){return void 0===l?s:x(m())},S}}).call(this,n(78))},function(t,e,n){t.exports=n(3079)},function(t,e,n){var r,i,o;(function(){var n,a,s,l,c,u,d,f,p,h,g,m,v,y,b;s=Math.floor,h=Math.min,a=function(t,e){return t<e?-1:t>e?1:0},p=function(t,e,n,r,i){var o;if(null==n&&(n=0),null==i&&(i=a),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);n<r;)i(e,t[o=s((n+r)/2)])<0?r=o:n=o+1;return[].splice.apply(t,[n,n-n].concat(e)),e},u=function(t,e,n){return null==n&&(n=a),t.push(e),y(t,0,t.length-1,n)},c=function(t,e){var n,r;return null==e&&(e=a),n=t.pop(),t.length?(r=t[0],t[0]=n,b(t,0,e)):r=n,r},f=function(t,e,n){var r;return null==n&&(n=a),r=t[0],t[0]=e,b(t,0,n),r},d=function(t,e,n){var r;return null==n&&(n=a),t.length&&n(t[0],e)<0&&(e=(r=[t[0],e])[0],t[0]=r[1],b(t,0,n)),e},l=function(t,e){var n,r,i,o,l,c;for(null==e&&(e=a),l=[],r=0,i=(o=function(){c=[];for(var e=0,n=s(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)c.push(e);return c}.apply(this).reverse()).length;r<i;r++)n=o[r],l.push(b(t,n,e));return l},v=function(t,e,n){var r;if(null==n&&(n=a),-1!==(r=t.indexOf(e)))return y(t,0,r,n),b(t,r,n)},g=function(t,e,n){var r,i,o,s,c;if(null==n&&(n=a),!(i=t.slice(0,e)).length)return i;for(l(i,n),o=0,s=(c=t.slice(e)).length;o<s;o++)r=c[o],d(i,r,n);return i.sort(n).reverse()},m=function(t,e,n){var r,i,o,s,u,d,f,g,m;if(null==n&&(n=a),10*e<=t.length){if(!(o=t.slice(0,e).sort(n)).length)return o;for(i=o[o.length-1],s=0,d=(f=t.slice(e)).length;s<d;s++)n(r=f[s],i)<0&&(p(o,r,0,null,n),o.pop(),i=o[o.length-1]);return o}for(l(t,n),m=[],u=0,g=h(e,t.length);0<=g?u<g:u>g;0<=g?++u:--u)m.push(c(t,n));return m},y=function(t,e,n,r){var i,o,s;for(null==r&&(r=a),i=t[n];n>e&&r(i,o=t[s=n-1>>1])<0;)t[n]=o,n=s;return t[n]=i},b=function(t,e,n){var r,i,o,s,l;for(null==n&&(n=a),i=t.length,l=e,o=t[e],r=2*e+1;r<i;)(s=r+1)<i&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],r=2*(e=r)+1;return t[e]=o,y(t,l,e,n)},n=function(){function t(t){this.cmp=null!=t?t:a,this.nodes=[]}return t.push=u,t.pop=c,t.replace=f,t.pushpop=d,t.heapify=l,t.updateItem=v,t.nlargest=g,t.nsmallest=m,t.prototype.push=function(t){return u(this.nodes,t,this.cmp)},t.prototype.pop=function(){return c(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return f(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return d(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return l(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return v(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),i=[],void 0===(o="function"==typeof(r=function(){return n})?r.apply(e,i):r)||(t.exports=o)}).call(this)},function(t,e,n){"use strict";var r;!function(){var i=function(t){if(t){t("core","cyCanvas",function(t){var e=this,n=e.container(),r=document.createElement("canvas");n.appendChild(r);var i=Object.assign({},{zIndex:1,pixelRatio:"auto"},t);function o(){var t=n.offsetWidth,o=n.offsetHeight,a=t*i.pixelRatio,s=o*i.pixelRatio;r.width=a,r.height=s,r.style.width=t+"px",r.style.height=o+"px",e.trigger("cyCanvas.resize")}return"auto"===i.pixelRatio&&(i.pixelRatio=window.devicePixelRatio||1),e.on("resize",function(){o()}),r.setAttribute("style","position:absolute; top:0; left:0; z-index:"+i.zIndex+";"),o(),{getCanvas:function(){return r},clear:function(t){var n=e.width(),r=e.height();t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n*i.pixelRatio,r*i.pixelRatio),t.restore()},resetTransform:function(t){t.setTransform(1,0,0,1,0,0)},setTransform:function(t){var n=e.pan(),r=e.zoom();t.setTransform(1,0,0,1,0,0),t.translate(n.x*i.pixelRatio,n.y*i.pixelRatio),t.scale(r*i.pixelRatio,r*i.pixelRatio)}}})}};void 0!==t&&t.exports&&(t.exports=function(t){i(t)}),void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&i(cytoscape)}()},function(t,e,n){!function(e,r){t.exports=r(n(3082))}(0,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),o=n(2),a=n(5)||("undefined"!=typeof window?window.cola:null),s=n(4),l=function(t){return(void 0===t?"undefined":r(t))===r(0)},c=function(){},u=function(t,e){return function(t){return null!=t&&(void 0===t?"undefined":r(t))===r(function(){})}(t)?t.apply(e,[e]):t};function d(t){this.options=i({},o,t)}d.prototype.run=function(){var t=this,e=this.options;t.manuallyStopped=!1;var n=e.cy,i=e.eles,o=i.nodes(),d=i.edges(),f=!1,p=o.filter(function(t){return t.isParent()}),h=o.subtract(p),g=e.boundingBox||{x1:0,y1:0,w:n.width(),h:n.height()};void 0===g.x2&&(g.x2=g.x1+g.w),void 0===g.w&&(g.w=g.x2-g.x1),void 0===g.y2&&(g.y2=g.y1+g.h),void 0===g.h&&(g.h=g.y2-g.y1);var m=function(){for(var t=0;t<o.length;t++){var r=o[t],i=r.layoutDimensions(e),a=r.scratch("cola");if(!a.updatedDims){var s=u(e.nodeSpacing,r);a.width=i.w+2*s,a.height=i.h+2*s}}o.positions(function(t){var e=t.scratch().cola,n=void 0;return!t.grabbed()&&h.contains(t)&&(n={x:g.x1+e.x,y:g.y1+e.y},l(n.x)&&l(n.y)||(n=void 0)),n}),o.updateCompoundBounds(),f||(y(),f=!0),e.fit&&n.fit(e.padding)},v=function(){e.ungrabifyWhileSimulating&&_.grabify(),n.off("destroy",x),o.off("grab free position",S),o.off("lock unlock",C),t.one("layoutstop",e.stop),t.trigger({type:"layoutstop",layout:t})},y=function(){t.one("layoutready",e.ready),t.trigger({type:"layoutready",layout:t})},b=e.refresh;b=e.refresh<0?1:Math.max(1,b);var w=t.adaptor=a.adaptor({trigger:function(t){var n=a.EventType?a.EventType.tick:null,r=a.EventType?a.EventType.end:null;switch(t.type){case"tick":case n:e.animate&&m();break;case"end":case r:m(),e.infinite||v()}},kick:function(){var n=function(){if(t.manuallyStopped)return v(),!0;var n=w.tick();return n&&e.infinite&&w.resume(),n};if(e.animate){s(function t(){(function(){for(var t=void 0,e=0;e<b&&!t;e++)t=t||n();return t})()||s(t)})}else for(;!n(););},on:c,drag:c});t.adaptor=w;var _=o.filter(":grabbable");e.ungrabifyWhileSimulating&&_.ungrabify();var x=void 0;n.one("destroy",x=function(){t.stop()});var S=void 0;o.on("grab free position",S=function(t){var e=this.scratch().cola,n=this.position();if(t.cyTarget===this||t.target===this)switch(t.type){case"grab":w.dragstart(e);break;case"free":w.dragend(e);break;case"position":e.px===n.x-g.x1&&e.py===n.y-g.y1||(e.px=n.x-g.x1,e.py=n.y-g.y1)}});var C=void 0;o.on("lock unlock",C=function(){var t=this.scratch().cola;t.fixed=this.locked(),this.locked()?w.dragstart(t):w.dragend(t)}),w.nodes(h.map(function(t,n){var r=u(e.nodeSpacing,t),i=t.position(),o=t.layoutDimensions(e);return t.scratch().cola={x:e.randomize||void 0===i.x?Math.round(Math.random()*g.w):i.x,y:e.randomize||void 0===i.y?Math.round(Math.random()*g.h):i.y,width:o.w+2*r,height:o.h+2*r,index:n,fixed:t.locked()}}));var E=[];if(e.alignment){var T=[],M=[];h.forEach(function(t){var n=u(e.alignment,t),r=t.scratch().cola.index;n&&(null!=n.x&&T.push({node:r,offset:n.x}),null!=n.y&&M.push({node:r,offset:n.y}))}),T.length>0&&E.push({type:"alignment",axis:"x",offsets:T}),M.length>0&&E.push({type:"alignment",axis:"y",offsets:M})}e.gapInequalities&&e.gapInequalities.forEach(function(t){var e=t.left.scratch().cola.index,n=t.right.scratch().cola.index;E.push({axis:t.axis,left:e,right:n,gap:t.gap,equality:t.equality})}),E.length>0&&w.constraints(E),w.groups(p.map(function(t,n){var r=u(e.nodeSpacing,t),i=function(e){return parseFloat(t.style("padding-"+e))},o=i("left")+r,a=i("right")+r,s=i("top")+r,l=i("bottom")+r;return t.scratch().cola={index:n,padding:Math.max(o,a,s,l),leaves:t.children().intersection(h).map(function(t){return t[0].scratch().cola.index}),fixed:t.locked()},t}).map(function(t){return t.scratch().cola.groups=t.children().intersection(p).map(function(t){return t.scratch().cola.index}),t.scratch().cola}));var k=void 0,A=void 0;null!=e.edgeLength?(k=e.edgeLength,A="linkDistance"):null!=e.edgeSymDiffLength?(k=e.edgeSymDiffLength,A="symmetricDiffLinkLengths"):null!=e.edgeJaccardLength?(k=e.edgeJaccardLength,A="jaccardLinkLengths"):(k=100,A="linkDistance");if(w.links(d.stdFilter(function(t){return h.contains(t.source())&&h.contains(t.target())}).map(function(t){var e=t.scratch().cola={source:t.source()[0].scratch().cola.index,target:t.target()[0].scratch().cola.index};return null!=k&&(e.calcLength=u(k,t)),e})),w.size([g.w,g.h]),null!=k&&w[A](function(t){return t.calcLength}),e.flow){var I=void 0;!function(t){return(void 0===t?"undefined":r(t))===r("")}(e.flow)?l(e.flow)?I={axis:"y",minSeparation:e.flow}:!function(t){return null!=t&&(void 0===t?"undefined":r(t))===r({})}(e.flow)?I={axis:"y",minSeparation:50}:((I=e.flow).axis=I.axis||"y",I.minSeparation=null!=I.minSeparation?I.minSeparation:50):I={axis:e.flow,minSeparation:50},w.flowLayout(I.axis,I.minSeparation)}return t.trigger({type:"layoutstart",layout:t}),w.avoidOverlaps(e.avoidOverlap).handleDisconnected(e.handleDisconnected).start(e.unconstrIter,e.userConstIter,e.allConstIter),e.infinite||setTimeout(function(){t.manuallyStopped||w.stop()},e.maxSimulationTime),this},d.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},t.exports=d},function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=e[n]})}),t}},function(t,e,n){"use strict";var r={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(t){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};t.exports=r},function(t,e,n){"use strict";var r=n(0),i=function(t){t&&t("layout","cola",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=void 0;i="undefined"!==("undefined"==typeof window?"undefined":r(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame:function(t){t()},t.exports=i},function(e,n){e.exports=t}])})},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(3083)),r(n(3084)),r(n(636)),r(n(1096)),r(n(1098)),r(n(1097)),r(n(350)),r(n(3087)),r(n(635)),r(n(1093)),r(n(1095)),r(n(1094)),r(n(351)),r(n(458)),r(n(637)),r(n(3088))},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(350),o=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=i.Layout.dragStart,n.dragend=n.dragEnd=i.Layout.dragEnd,n}return r(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(i.Layout);e.LayoutAdaptor=o,e.adaptor=function(t){return new o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3085),i=n(3086);e.d3adaptor=function(t){return!t||function(t){return t.version&&null!==t.version.match(/^3\./)}(t)?new r.D3StyleLayoutAdaptor:new i.D3StyleLayoutAdaptor(t)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(350),o=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(i.EventType[i.EventType.start],i.EventType[i.EventType.tick],i.EventType[i.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(i.Layout.dragOrigin).on("dragstart.d3adaptor",i.Layout.dragStart).on("drag.d3adaptor",function(t){i.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",i.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return r(e,t),e.prototype.trigger=function(t){var e={type:i.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(i.EventType[t],e),this},e}(i.Layout);e.D3StyleLayoutAdaptor=o,e.d3adaptor=function(){return new o}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(350),o=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(i.EventType[i.EventType.start],i.EventType[i.EventType.tick],i.EventType[i.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(i.Layout.dragOrigin).on("start.d3adaptor",i.Layout.dragStart).on("drag.d3adaptor",function(t){i.Layout.drag(t,e.event),r.resume()}).on("end.d3adaptor",i.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return r(e,t),e.prototype.trigger=function(t){var e={type:i.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer(function(){return t.prototype.tick.call(e)&&n.stop()})},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(i.EventType[t],e),this},e}(i.Layout);e.D3StyleLayoutAdaptor=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(458),i=n(636),o=n(351),a=n(635),s=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}();e.Link3D=s;var l=function(){return function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}}();e.Node3D=l;var c=function(){function t(e,n,r){void 0===r&&(r=1);var i=this;this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach(function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];void 0===e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,s=new u;this.useJaccardLinkLengths&&a.jaccardLinkLengths(this.links,s,1.5),this.links.forEach(function(t){return t.length*=e.idealLinkLength});var l=new r.Calculator(n,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),c=i.Descent.createSquareMatrix(n,function(t,e){return l[t][e]}),d=i.Descent.createSquareMatrix(n,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return d[e][n]=d[n][e]=1}),this.descent=new i.Descent(this.result,c),this.descent.threshold=.001,this.descent.G=d,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var f=0;f<this.nodes.length;f++){var p=this.nodes[f];p.fixed&&this.descent.locks.add(f,[p.x,p.y,p.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();e.Layout3D=c;var u=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(350),i=n(1098);e.gridify=function(t,e,n,r){return t.cola.start(0,0,0,10,!1),function(t,e,n,r){t.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}}),e.forEach(function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map(function(e){return t.length+e.id}):[]).concat(void 0!==e.leaves?e.leaves.map(function(t){return t.index}):[])}});var o=t.concat(e).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new i.GridRouter(o,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}(t.cola.nodes(),t.cola.groups(),n,r).routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})},e.powerGraphGridLayout=function(t,e,n){var i;t.nodes.forEach(function(t,e){return t.index=e}),(new r.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(t){(i=t).groups.forEach(function(t){return t.padding=n})});var o=t.nodes.length,a=[],s=t.nodes.slice(0);return s.forEach(function(t,e){return t.index=e}),i.groups.forEach(function(t){var e=t.index=t.id+o;s.push(t),void 0!==t.leaves&&t.leaves.forEach(function(t){return a.push({source:e,target:t.index})}),void 0!==t.groups&&t.groups.forEach(function(t){return a.push({source:e,target:t.id+o})})}),i.powerEdges.forEach(function(t){a.push({source:t.source.index,target:t.target.index})}),(new r.Layout).size(e).nodes(s).links(a).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new r.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){(i=t).groups.forEach(function(t){t.padding=n})}).start(50,0,100,0,!1),powerGraph:i}}},function(t,e,n){!function(e,r){t.exports=r(n(3090))}(0,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(2),o=n(1),a=n(4);function s(t){this.options=o({},i,t)}s.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,i=function(t,e){return function(t){return"function"==typeof t}(e)?e.apply(t,[t]):e},o=t.boundingBox||{x1:0,y1:0,w:e.width(),h:e.height()};void 0===o.x2&&(o.x2=o.x1+o.w),void 0===o.w&&(o.w=o.x2-o.x1),void 0===o.y2&&(o.y2=o.y1+o.h),void 0===o.h&&(o.h=o.y2-o.y1);var s=new a.graphlib.Graph({multigraph:!0,compound:!0}),l={},c=function(t,e){null!=e&&(l[t]=e)};c("nodesep",t.nodeSep),c("edgesep",t.edgeSep),c("ranksep",t.rankSep),c("rankdir",t.rankDir),c("ranker",t.ranker),s.setGraph(l),s.setDefaultEdgeLabel(function(){return{}}),s.setDefaultNodeLabel(function(){return{}});for(var u=n.nodes(),d=0;d<u.length;d++){var f=u[d],p=f.layoutDimensions(t);s.setNode(f.id(),{width:p.w,height:p.h,name:f.id()})}for(var h=0;h<u.length;h++){var g=u[h];g.isChild()&&s.setParent(g.id(),g.parent().id())}for(var m=n.edges().stdFilter(function(t){return!t.source().isParent()&&!t.target().isParent()}),v=0;v<m.length;v++){var y=m[v];s.setEdge(y.source().id(),y.target().id(),{minlen:i(y,t.minLen),weight:i(y,t.edgeWeight),name:y.id()},y.id())}a.layout(s);for(var b=s.nodes(),w=0;w<b.length;w++){var _=b[w],x=s.node(_);e.getElementById(_).scratch().dagre=x}var S=void 0;t.boundingBox?(S={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},u.forEach(function(t){var e=t.scratch().dagre;S.x1=Math.min(S.x1,e.x),S.x2=Math.max(S.x2,e.x),S.y1=Math.min(S.y1,e.y),S.y2=Math.max(S.y2,e.y)}),S.w=S.x2-S.x1,S.h=S.y2-S.y1):S=o;return u.layoutPositions(this,t,function(e){var n=(e="object"===(void 0===e?"undefined":r(e))?e:this).scratch().dagre;return function(e){if(t.boundingBox){var n=0===S.w?0:(e.x-S.x1)/S.w,r=0===S.h?0:(e.y-S.y1)/S.h;return{x:o.x1+n*o.w,y:o.y1+r*o.h}}return e}({x:n.x,y:n.y})}),this},t.exports=s},function(t,e,n){"use strict";t.exports=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.forEach(function(e){Object.keys(e).forEach(function(n){return t[n]=e[n]})}),t}},function(t,e,n){"use strict";var r={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,ranker:void 0,minLen:function(t){return 1},edgeWeight:function(t){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(t,e){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(t,e){return e},ready:function(){},stop:function(){}};t.exports=r},function(t,e,n){"use strict";var r=n(0),i=function(t){t&&t("layout","dagre",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i},function(e,n){e.exports=t}])})},function(t,e,n){t.exports={graphlib:n(139),layout:n(3104),debug:n(3126),util:{time:n(111).time,notime:n(111).notime},version:n(3127)}},function(t,e,n){var r=n(3092);t.exports={Graph:r.Graph,json:n(3094),alg:n(3095),version:r.version}},function(t,e,n){t.exports={Graph:n(638),version:n(3093)}},function(t,e){t.exports="2.1.5"},function(t,e,n){var r=n(127),i=n(638);t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:function(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}(t),edges:function(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},function(t,e,n){t.exports={components:n(3096),dijkstra:n(1099),dijkstraAll:n(3097),findCycles:n(3098),floydWarshall:n(3099),isAcyclic:n(3100),postorder:n(3101),preorder:n(3102),prim:n(3103),tarjan:n(1101),topsort:n(1102)}},function(t,e,n){var r=n(127);t.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),function(t){e=[],o(t),e.length&&i.push(e)}),i}},function(t,e,n){var r=n(1099),i=n(127);t.exports=function(t,e,n){return i.transform(t.nodes(),function(i,o){i[o]=r(t,o,e,n)},{})}},function(t,e,n){var r=n(127),i=n(1101);t.exports=function(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},function(t,e,n){var r=n(127);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(1102);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(t,e,n){var r=n(1103);t.exports=function(t,e){return r(t,e,"post")}},function(t,e,n){var r=n(1103);t.exports=function(t,e){return r(t,e,"pre")}},function(t,e,n){var r=n(127),i=n(638),o=n(1100);t.exports=function(t,e){var n,a=new i,s={},l=new o;function c(t){var r=t.v===n?t.w:t.v,i=l.priority(r);if(void 0!==i){var o=e(t);o<i&&(s[r]=n,l.decrease(r,o))}}if(0===t.nodeCount())return a;r.each(t.nodes(),function(t){l.add(t,Number.POSITIVE_INFINITY),a.setNode(t)}),l.decrease(t.nodes()[0],0);var u=!1;for(;l.size()>0;){if(n=l.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else{if(u)throw new Error("Input graph is not connected: "+t);u=!0}t.nodeEdges(n).forEach(c)}return a}},function(t,e,n){"use strict";var r=n(48),i=n(3105),o=n(3108),a=n(3109),s=n(111).normalizeRanks,l=n(3111),c=n(111).removeEmptyRanks,u=n(3112),d=n(3113),f=n(3114),p=n(3115),h=n(3124),g=n(111),m=n(139).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new m({multigraph:!0,compound:!0}),n=T(t.graph());return e.setGraph(r.merge({},y,E(n,v),r.pick(n,b))),r.forEach(t.nodes(),function(n){var i=T(t.node(n));e.setNode(n,r.defaults(E(i,w),_)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var i=T(t.edge(n));e.setEdge(n,r.merge({},S,E(i,x),r.pick(i,C)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){i.run(t)}),e("    nestingGraph.run",function(){u.run(t)}),e("    rank",function(){a(g.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};g.addDummyNode(t,"edge-proxy",o,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){c(t)}),e("    nestingGraph.cleanup",function(){u.cleanup(t)}),e("    normalizeRanks",function(){s(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;r.forEach(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){o.run(t)}),e("    parentDummyChains",function(){l(t)}),e("    addBorderSegments",function(){d(t)}),e("    order",function(){p(t)}),e("    insertSelfEdges",function(){!function(t){var e=g.buildLayerMatrix(t);r.forEach(e,function(e){var n=0;r.forEach(e,function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){f.adjust(t)}),e("    position",function(){h(t)}),e("    positionSelfEdges",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),s=t.node(r.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(o.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){o.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){f.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,l=a.marginy||0;function c(t){var r=t.x,a=t.y,s=t.width,l=t.height;e=Math.min(e,r-s/2),n=Math.max(n,r+s/2),i=Math.min(i,a-l/2),o=Math.max(o,a+l/2)}r.forEach(t.nodes(),function(e){c(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&c(n)}),e-=s,i-=l,r.forEach(t.nodes(),function(n){var r=t.node(n);r.x-=e,r.y-=i}),r.forEach(t.edges(),function(n){var o=t.edge(n);r.forEach(o.points,function(t){t.x-=e,t.y-=i}),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)}),a.width=n-e+s,a.height=o-i+l}(t)}),e("    assignNodeIntersects",function(){!function(t){r.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(a,r))})}(t)}),e("    reversePoints",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){i.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){r.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(t.edges(),function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var v=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],w=["width","height"],_={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function E(t,e){return r.mapValues(r.pick(t,e),Number)}function T(t){var e={};return r.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}},function(t,e,n){"use strict";var r=n(48),i=n(3106);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),function o(a){r.has(i,a)||(i[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),function(t){r.has(n,t.w)?e.push(t):o(t.w)}),delete n[a])}),e}(t);r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},function(t,e,n){var r=n(48),i=n(139).Graph,o=n(3107);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,a=0,s=0;r.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),s=Math.max(s,n.node(t.v).out+=i),a=Math.max(a,n.node(t.w).in+=i)});var c=r.range(s+a+3).map(function(){return new o}),u=a+1;return r.forEach(n.nodes(),function(t){l(c,u,n.node(t))}),{graph:n,buckets:c,zeroIdx:u}}(t,e||a),c=function(t,e,n){var r,i=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)s(t,e,n,r);for(;r=o.dequeue();)s(t,e,n,r);if(t.nodeCount())for(var l=e.length-2;l>0;--l)if(r=e[l].dequeue()){i=i.concat(s(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,function(e){return t.outEdges(e.v,e.w)}),!0)};var a=r.constant(1);function s(t,e,n,i,o){var a=o?[]:void 0;return r.forEach(t.inEdges(i.v),function(r){var i=t.edge(r),s=t.node(r.v);o&&a.push({v:r.v,w:r.w}),s.out-=i,l(e,n,s)}),r.forEach(t.outEdges(i.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,l(e,n,a)}),t.removeNode(i.v),a}function l(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,i)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(48),i=n(111);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){!function(t,e){var n,r,o,a=e.v,s=t.node(a).rank,l=e.w,c=t.node(l).rank,u=e.name,d=t.edge(e),f=d.labelRank;if(c===s+1)return;for(t.removeEdge(e),o=0,++s;s<c;++o,++s)d.points=[],r={width:0,height:0,edgeLabel:d,edgeObj:e,rank:s},n=i.addDummyNode(t,"edge",r,"_d"),s===f&&(r.width=d.width,r.height=d.height,r.dummy="edge-label",r.labelpos=d.labelpos),t.setEdge(a,n,{weight:d.weight},u),0===o&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,l,{weight:d.weight},u)}(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}}},function(t,e,n){"use strict";var r=n(459).longestPath,i=n(1104),o=n(3110);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":s(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":a(t);break;default:s(t)}};var a=r;function s(t){o(t)}},function(t,e,n){"use strict";var r=n(48),i=n(1104),o=n(459).slack,a=n(459).longestPath,s=n(139).alg.preorder,l=n(139).alg.postorder,c=n(111).simplify;function u(t){t=c(t),a(t);var e,n=i(t);for(p(n),d(n,t);e=h(n);)m(n,t,e,g(n,t,e))}function d(t,e){var n=l(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=f(t,e,n)}(t,e,n)})}function f(t,e,n){var i=t.node(n).parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,r.forEach(e.nodeEdges(n),function(r){var a=r.v===n,l=a?r.w:r.v;if(l!==i){var c=a===o,u=e.edge(r).weight;if(s+=c?u:-u,function(t,e,n){return t.hasEdge(e,n)}(t,n,l)){var d=t.edge(n,l).cutvalue;s+=c?-d:d}}}),s}function p(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,n,i,o,a){var s=i,l=e.node(o);n[o]=!0;r.forEach(e.neighbors(o),function(a){r.has(n,a)||(i=t(e,n,i,a,o))});l.low=s;l.lim=i++;a?l.parent=a:delete l.parent;return i}(t,{},1,e)}function h(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function g(t,e,n){var i=n.v,a=n.w;e.hasEdge(i,a)||(i=n.w,a=n.v);var s=t.node(i),l=t.node(a),c=s,u=!1;s.lim>l.lim&&(c=l,u=!0);var d=r.filter(e.edges(),function(e){return u===v(t,t.node(e.v),c)&&u!==v(t,t.node(e.w),c)});return r.minBy(d,function(t){return o(e,t)})}function m(t,e,n,i){var o=n.v,a=n.w;t.removeEdge(o,a),t.setEdge(i.v,i.w,{}),p(t),d(t,e),function(t,e){var n=r.find(t.nodes(),function(t){return!e.node(t).parent}),i=s(t,n);i=i.slice(1),r.forEach(i,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function v(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=u,u.initLowLimValues=p,u.initCutValues=d,u.calcCutValue=f,u.leaveEdge=h,u.enterEdge=g,u.exchangeEdges=m},function(t,e,n){var r=n(48);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),function i(o){var a=n;r.forEach(t.children(o),i),e[o]={low:a,lim:n++}}),e}(t);r.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],s=[],l=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>l||c>e[i].lim));o=i,i=r;for(;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,l=0,c=a[l],u=!0;n!==i.w;){if(r=t.node(n),u){for(;(c=a[l])!==s&&t.node(c).maxRank<r.rank;)l++;c===s&&(u=!1)}if(!u){for(;l<a.length-1&&t.node(c=a[l+1]).minRank<=r.rank;)l++;c=a[l]}t.setParent(n,c),n=t.successors(n)[0]}})}},function(t,e,n){var r=n(48),i=n(111);t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return r.forEach(t.children(),function(n){!function n(i,o){var a=t.children(i);a&&a.length&&r.forEach(a,function(t){n(t,o+1)}),e[i]=o}(n,1)}),e}(t),o=r.max(r.values(n))-1,a=2*o+1;t.graph().nestingRoot=e,r.forEach(t.edges(),function(e){t.edge(e).minlen*=a});var s=function(t){return r.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;r.forEach(t.children(),function(l){!function t(e,n,o,a,s,l,c){var u=e.children(c);if(!u.length)return void(c!==n&&e.setEdge(n,c,{weight:0,minlen:o}));var d=i.addBorderNode(e,"_bt"),f=i.addBorderNode(e,"_bb"),p=e.node(c);e.setParent(d,c);p.borderTop=d;e.setParent(f,c);p.borderBottom=f;r.forEach(u,function(r){t(e,n,o,a,s,l,r);var i=e.node(r),u=i.borderTop?i.borderTop:r,p=i.borderBottom?i.borderBottom:r,h=i.borderTop?a:2*a,g=u!==p?1:s-l[c]+1;e.setEdge(d,u,{weight:h,minlen:g,nestingEdge:!0}),e.setEdge(p,f,{weight:h,minlen:g,nestingEdge:!0})});e.parent(c)||e.setEdge(n,d,{weight:0,minlen:s+l[c]})}(t,e,a,s,o,n,l)}),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}}},function(t,e,n){var r=n(48),i=n(111);function o(t,e,n,r,o,a){var s={width:0,height:0,rank:a,borderType:e},l=o[e][a-1],c=i.addDummyNode(t,"border",s,n);o[e][a]=c,t.setParent(c,r),l&&t.setEdge(l,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),function e(n){var i=t.children(n),a=t.node(n);i.length&&r.forEach(i,e);if(r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,l=a.maxRank+1;s<l;++s)o(t,"borderLeft","_bl",n,a,s),o(t,"borderRight","_br",n,a,s)}})}},function(t,e,n){"use strict";var r=n(48);function i(t){r.forEach(t.nodes(),function(e){o(t.node(e))}),r.forEach(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function s(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)})}(t);"lr"!==e&&"rl"!==e||(!function(t){r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"x")&&s(n)})}(t),i(t))}}},function(t,e,n){"use strict";var r=n(48),i=n(3116),o=n(3117),a=n(3118),s=n(3122),l=n(3123),c=n(139).Graph,u=n(111);function d(t,e,n){return r.map(e,function(e){return s(t,e,n)})}function f(t,e){var n=new c;r.forEach(t,function(t){var i=t.graph().root,o=a(t,i,n,e);r.forEach(o.vs,function(e,n){t.node(e).order=n}),l(t,n,o.vs)})}function p(t,e){r.forEach(e,function(e){r.forEach(e,function(e,n){t.node(e).order=n})})}t.exports=function(t){var e=u.maxRank(t),n=d(t,r.range(1,e+1),"inEdges"),a=d(t,r.range(e-1,-1,-1),"outEdges"),s=i(t);p(t,s);for(var l,c=Number.POSITIVE_INFINITY,h=0,g=0;g<4;++h,++g){f(h%2?n:a,h%4>=2),s=u.buildLayerMatrix(t);var m=o(t,s);m<c&&(g=0,l=r.cloneDeep(s),c=m)}p(t,l)}},function(t,e,n){"use strict";var r=n(48);t.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),o=r.map(r.range(i+1),function(){return[]});var a=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(a,function n(i){if(!r.has(e,i)){e[i]=!0;var a=t.node(i);o[a.rank].push(i),r.forEach(t.successors(i),n)}}),o}},function(t,e,n){"use strict";var r=n(48);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,function(t,e){return e})),o=r.flatten(r.map(e,function(e){return r.chain(t.outEdges(e)).map(function(e){return{pos:i[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var l=r.map(new Array(s),function(){return 0}),c=0;return r.forEach(o.forEach(function(t){var e=t.pos+a;l[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=l[e+1]),l[e=e-1>>1]+=t.weight;c+=t.weight*n})),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},function(t,e,n){var r=n(48),i=n(3119),o=n(3120),a=n(3121);t.exports=function t(e,n,s,l){var c=e.children(n),u=e.node(n),d=u?u.borderLeft:void 0,f=u?u.borderRight:void 0,p={};d&&(c=r.filter(c,function(t){return t!==d&&t!==f}));var h=i(e,c);r.forEach(h,function(n){if(e.children(n.v).length){var i=t(e,n.v,s,l);p[n.v]=i,r.has(i,"barycenter")&&function(t,e){r.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}(n,i)}});var g=o(h,s);!function(t,e){r.forEach(t,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(g,p);var m=a(g,l);if(d&&(m.vs=r.flatten([d,m.vs,f],!0),e.predecessors(d).length)){var v=e.node(e.predecessors(d)[0]),y=e.node(e.predecessors(f)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+v.order+y.order)/(m.weight+2),m.weight+=2}return m}},function(t,e,n){var r=n(48);t.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}},function(t,e,n){"use strict";var r=n(48);t.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function i(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.chain(e).filter(function(t){return!t.merged}).map(function(t){return r.pick(t,["vs","i","barycenter","weight"])}).value()}(r.filter(n,function(t){return!t.indegree}))}},function(t,e,n){var r=n(48),i=n(111);function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n=i.partition(t,function(t){return r.has(t,"barycenter")}),a=n.lhs,s=r.sortBy(n.rhs,function(t){return-t.i}),l=[],c=0,u=0,d=0;a.sort(function(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}(!!e)),d=o(l,s,d),r.forEach(a,function(t){d+=t.vs.length,l.push(t.vs),c+=t.barycenter*t.weight,u+=t.weight,d=o(l,s,d)});var f={vs:r.flatten(l,!0)};u&&(f.barycenter=c/u,f.weight=u);return f}},function(t,e,n){var r=n(48),i=n(139).Graph;t.exports=function(t,e,n){var o=function(t){var e;for(;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var s=t.node(i),l=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(i),a.setParent(i,l||o),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,o=a.edge(n,i),s=r.isUndefined(o)?0:o.weight;a.setEdge(n,i,{weight:t.edge(e).weight+s})}),r.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}},function(t,e,n){var r=n(48);t.exports=function(t,e,n){var i,o={};r.forEach(n,function(n){for(var r,a,s=t.parent(n);s;){if((r=t.parent(s))?(a=o[r],o[r]=s):(a=i,i=s),a&&a!==s)return void e.setEdge(a,s);s=r}})}},function(t,e,n){"use strict";var r=n(48),i=n(111),o=n(3125).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=o+i/2}),o+=i+n})})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),function(e,n){t.node(n).x=e})}},function(t,e,n){"use strict";var r=n(48),i=n(139).Graph,o=n(111);function a(t,e){var n={};return r.reduce(e,function(e,i){var o=0,a=0,s=e.length,c=r.last(i);return r.forEach(i,function(e,u){var d=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),f=d?t.node(d).order:s;(d||e===c)&&(r.forEach(i.slice(a,u+1),function(e){r.forEach(t.predecessors(e),function(r){var i=t.node(r),a=i.order;!(a<o||f<a)||i.dummy&&t.node(e).dummy||l(n,r,e)})}),a=u+1,o=f)}),i}),n}function s(t,e){var n={};function i(e,i,o,a,s){var c;r.forEach(r.range(i,o),function(i){c=e[i],t.node(c).dummy&&r.forEach(t.predecessors(c),function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>s)&&l(n,e,c)})})}return r.reduce(e,function(e,n){var o,a=-1,s=0;return r.forEach(n,function(r,l){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(o=t.node(c[0]).order,i(n,s,l,a,o),s=l,a=o)}i(n,s,n.length,o,e.length)}),n}),n}function l(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function c(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function u(t,e,n,i){var o={},a={},s={};return r.forEach(e,function(t){r.forEach(t,function(t,e){o[t]=t,a[t]=t,s[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var l=i(t);if(l.length)for(var u=((l=r.sortBy(l,function(t){return s[t]})).length-1)/2,d=Math.floor(u),f=Math.ceil(u);d<=f;++d){var p=l[d];a[t]===t&&e<s[p]&&!c(n,t,p)&&(a[p]=t,a[t]=o[t]=o[p],e=s[p])}})}),{root:o,align:a}}function d(t,e,n,o,a){var s={},l=function(t,e,n,o){var a=new i,s=t.graph(),l=function(t,e,n){return function(i,o,a){var s,l=i.node(o),c=i.node(a),u=0;if(u+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=-l.width/2;break;case"r":s=l.width/2}if(s&&(u+=n?s:-s),s=0,u+=(l.dummy?e:t)/2,u+=(c.dummy?e:t)/2,u+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":s=c.width/2;break;case"r":s=-c.width/2}return s&&(u+=n?s:-s),s=0,u}}(s.nodesep,s.edgesep,o);return r.forEach(e,function(e){var i;r.forEach(e,function(e){var r=n[e];if(a.setNode(r),i){var o=n[i],s=a.edge(o,r);a.setEdge(o,r,Math.max(l(t,e,i),s||0))}i=e})}),a}(t,e,n,a),c=a?"borderLeft":"borderRight";function u(t,e){for(var n=l.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return u(function(t){s[t]=l.inEdges(t).reduce(function(t,e){return Math.max(t,s[e.v]+l.edge(e))},0)},r.bind(l.predecessors,l)),u(function(e){var n=l.outEdges(e).reduce(function(t,e){return Math.min(t,s[e.w]-l.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[e]=Math.max(s[e],n))},r.bind(l.successors,l)),r.forEach(o,function(t){s[t]=s[n[t]]}),s}function f(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)}),n-i})}function p(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(a){var s,l=n+a,c=t[l];if(c!==e){var u=r.values(c);(s="l"===a?i-r.min(u):o-r.max(u))&&(t[l]=r.mapValues(c,function(t){return t+s}))}})})}function h(t,e){return r.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2})}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(a(t,n),s(t,n)),l={};r.forEach(["u","d"],function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var a=r.bind("u"===o?t.predecessors:t.successors,t),s=u(t,e,i,a),c=d(t,e,s.root,s.align,"r"===n);"r"===n&&(c=r.mapValues(c,function(t){return-t})),l[o+n]=c})});var c=f(t,l);return p(l,c),h(l,t.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:l,hasConflict:c,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:p,findSmallestWidthAlignment:f,balance:h}},function(t,e,n){var r=n(48),i=n(111),o=n(139).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}}},function(t,e){t.exports="0.8.2"},function(t,e,n){var r;t.exports=function t(e,n,i){function o(s,l){if(!n[s]){if(!e[s]){var c="function"==typeof r&&r;if(!l&&c)return r(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return o(n||t)},d,d.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){e.exports=function(t,e,n){function r(t){for(var r=t.isNode()?"node":"edge",i=["css","data","position"],o={},a=0;a<i.length;a++){var s=i[a],l=n[r][s];if(l)if(e.isArray(l)){o[s]={};for(var c=0;c<l.length;c++){var u=l[a];t[s](u)&&(o[s][u]=t[s](u))}}else{var d=t[s]();for(var f in o[s]={},d)e.inArray(f,n[r].discludeds)<0&&(o[s][f]={value:d[f],attrType:s})}else o[s]={}}return e.extend(o.css,o.data,o.position)}n.node.discludeds.push("id"),n.edge.discludeds.push("id","source","target");var i=e.parseXML('<?xml version="1.0" encoding="UTF-8"?>\n<graphml xmlns="http://graphml.graphdrawing.org/xmlns"\nxmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\nxsi:schemaLocation="http://graphml.graphdrawing.org/xmlns\nhttp://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">\n  <graph>\n </graph>\n </graphml>\n'),o=e(i),a=o.find("graph");return t.nodes().orphans().forEach(function(t){!function t(n,i){var o=e("<node />",i).attr({id:n.id()}).appendTo(i),a=r(n);for(var s in a)e("<data />",o).attr({type:a[s].attrType,key:s}).text(a[s].value).appendTo(o);if(n.isParent()){var l=e("<graph />",o).attr({id:n.id()+":"}).appendTo(o);n.children().each(function(e,n){t(n,l)})}return o}(t,a)}),t.edges().forEach(function(t){var n=e("<edge />",a).attr({id:t.id(),source:t.source().id(),target:t.target().id()}).appendTo(a),i=r(t);for(var o in i)e("<data />",n).attr({key:o}).text(i[o].value).appendTo(n)}),function(t){return window.ActiveXObject?t.xml:(new XMLSerializer).serializeToString(t)}(i)}},{}],2:[function(t,e,n){e.exports=function(t,e,n,r){t.batch(function(){xml=e.parseXML(r),$xml=e(xml),$graphs=$xml.find("graph"),$graphs.each(function(){var n=e(this);!function n(r){r.find("node").each(function(){var r=e(this),i={data:{id:r.attr("id")},css:{},position:{}};r.find("data").each(function(){var t=e(this);i[t.attr("type")][t.attr("key")]=t.text()}),t.add({group:"nodes",data:i.data,css:i.css,position:i.position}),r.find("graph").each(function(){var t=e(this);n(t)})})}(n),n.find("edge").each(function(){var n=e(this),r={data:{id:n.attr("id"),source:n.attr("source"),target:n.attr("target")},css:{},position:{}};n.find("data").each(function(){var t=e(this);r[t.attr("type")][t.attr("key")]=t.text()}),t.add({group:"edges",data:r.data,css:r.css})})});var i=typeof n.layoutBy;"string"==i?t.layout({name:"cose"}):"function"==i&&n.layoutBy()})}},{}],3:[function(t,e,n){!function(){"use strict";var n=function(e,n){if(e&&n){var r=t("./exporter"),i=t("./importer"),o={node:{css:!1,data:!0,position:!0,discludeds:[]},edge:{css:!1,data:!0,discludeds:[]},layoutBy:"cose"};e("core","graphml",function(t){var e;switch(typeof t){case"string":e=i(this,n,o,t);break;case"object":n.extend(!0,o,t),e=this;break;case"undefined":e=r(this,n,o);break;default:console.log("Functionality(argument) of .graphml() is not recognized.")}return e})}};void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof cytoscape&&"undefined"!=typeof $&&n(cytoscape,$)}()},{"./exporter":1,"./importer":2}]},{},[3])(3)},function(t,e,n){(function(e){var n;t.exports=function t(e,r,i){function o(s,l){if(!r[s]){if(!e[s]){var c="function"==typeof n&&n;if(!l&&c)return n(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return o(n||t)},d,d.exports,t,e,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,n,r){(function(t){
/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof r&&"object"==typeof n)n.exports=t();else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var e="undefined"!=typeof window?window:self,i=e.Q;e.Q=t(),e.Q.noConflict=function(){return e.Q=i,this}}}(function(){"use strict";var n=!1;try{throw new Error}catch(t){n=!!t.stack}var r,i=S(),o=function(){},a=function(){var n={task:void 0,next:null},r=n,i=!1,o=void 0,s=!1,l=[];function c(){for(var t,e;n.next;)n=n.next,t=n.task,n.task=void 0,(e=n.domain)&&(n.domain=void 0,e.enter()),u(t,e);for(;l.length;)u(t=l.pop());i=!1}function u(t,e){try{t()}catch(t){if(s)throw e&&e.exit(),setTimeout(c,0),e&&e.enter(),t;setTimeout(function(){throw t},0)}e&&e.exit()}if(a=function(e){r=r.next={task:e,domain:s&&t.domain,next:null},i||(i=!0,o())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)s=!0,o=function(){t.nextTick(c)};else if("function"==typeof e)o="undefined"!=typeof window?e.bind(window,c):function(){e(c)};else if("undefined"!=typeof MessageChannel){var d=new MessageChannel;d.port1.onmessage=function(){o=f,d.port1.onmessage=c,c()};var f=function(){d.port2.postMessage(0)};o=function(){setTimeout(c,0),f()}}else o=function(){setTimeout(c,0)};return a.runAfter=function(t){l.push(t),i||(i=!0,o())},a}(),s=Function.call;function l(t){return function(){return s.apply(t,arguments)}}var c,u=l(Array.prototype.slice),d=l(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),f=l(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),p=l(Array.prototype.map||function(t,e){var n=this,r=[];return d(n,function(i,o,a){r.push(t.call(e,o,a,n))},void 0),r}),h=Object.create||function(t){function e(){}return e.prototype=t,new e},g=l(Object.prototype.hasOwnProperty),m=Object.keys||function(t){var e=[];for(var n in t)g(t,n)&&e.push(n);return e},v=l(Object.prototype.toString);c="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var y="From previous event:";function b(t,e){if(n&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(y)){for(var r=[],i=e;i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(t.stack);var o=r.join("\n"+y+"\n");t.stack=function(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];x(i)||w(i)||!i||n.push(i)}return n.join("\n")}(o)}}function w(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function _(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function x(t){var e=_(t);if(!e)return!1;var n=e[0],o=e[1];return n===r&&o>=i&&o<=H}function S(){if(n)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],i=_(e);if(!i)return;return r=i[0],i[1]}}function C(t){return t instanceof k?t:P(t)?function(t){var e=E();return C.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}(t):j(t)}function E(){var t,e=[],r=[],i=h(E.prototype),o=h(k.prototype);if(o.promiseDispatch=function(n,i,o){var a=u(arguments);e?(e.push(a),"when"===i&&o[1]&&r.push(o[1])):C.nextTick(function(){t.promiseDispatch.apply(t,a)})},o.valueOf=function(){if(e)return o;var n=I(t);return O(n)&&(t=n),n},o.inspect=function(){return t?t.inspect():{state:"pending"}},C.longStackSupport&&n)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf("\n")+1)}function a(n){t=n,o.source=n,d(e,function(t,e){C.nextTick(function(){n.promiseDispatch.apply(n,e)})},void 0),e=void 0,r=void 0}return i.promise=o,i.resolve=function(e){t||a(C(e))},i.fulfill=function(e){t||a(j(e))},i.reject=function(e){t||a(B(e))},i.notify=function(e){t||d(r,function(t,n){C.nextTick(function(){n(e)})},void 0)},i}function T(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=E();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function M(t){return T(function(e,n){for(var r=0,i=t.length;r<i;r++)C(t[r]).then(e,n)})}function k(t,e,n){void 0===e&&(e=function(t){return B(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=h(k.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(t){a=B(t)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function A(t,e,n,r){return C(t).then(e,n,r)}function I(t){if(O(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function O(t){return t instanceof k}function P(t){return function(t){return t===Object(t)}(t)&&"function"==typeof t.then}C.resolve=C,C.nextTick=a,C.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(C.longStackSupport=!0),C.defer=E,E.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(u(arguments,1)):t.resolve(n)}},C.Promise=T,C.promise=T,T.race=M,T.all=U,T.reject=B,T.resolve=C,C.passByCopy=function(t){return t},k.prototype.passByCopy=function(){return this},C.join=function(t,e){return C(t).join(e)},k.prototype.join=function(t){return C([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},C.race=M,k.prototype.race=function(){return this.then(C.race)},C.makePromise=k,k.prototype.toString=function(){return"[object Promise]"},k.prototype.then=function(t,e,n){var r=this,i=E(),o=!1;return C.nextTick(function(){r.promiseDispatch(function(e){o||(o=!0,i.resolve(function(e){try{return"function"==typeof t?t(e):e}catch(t){return B(t)}}(e)))},"when",[function(t){o||(o=!0,i.resolve(function(t){if("function"==typeof e){b(t,r);try{return e(t)}catch(t){return B(t)}}return B(t)}(t)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(t){var e,r=!1;try{e=function(t){return"function"==typeof n?n(t):t}(t)}catch(t){if(r=!0,!C.onerror)throw t;C.onerror(t)}r||i.notify(e)}]),i.promise},C.tap=function(t,e){return C(t).tap(e)},k.prototype.tap=function(t){return t=C(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},C.when=A,k.prototype.thenResolve=function(t){return this.then(function(){return t})},C.thenResolve=function(t,e){return C(t).thenResolve(e)},k.prototype.thenReject=function(t){return this.then(function(){throw t})},C.thenReject=function(t,e){return C(t).thenReject(e)},C.nearer=I,C.isPromise=O,C.isPromiseAlike=P,C.isPending=function(t){return O(t)&&"pending"===t.inspect().state},k.prototype.isPending=function(){return"pending"===this.inspect().state},C.isFulfilled=function(t){return!O(t)||"fulfilled"===t.inspect().state},k.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},C.isRejected=function(t){return O(t)&&"rejected"===t.inspect().state},k.prototype.isRejected=function(){return"rejected"===this.inspect().state};var L=[],D=[],N=[],R=!0;function F(){L.length=0,D.length=0,R||(R=!0)}function B(e){var n=k({when:function(n){return n&&function(e){if(R){var n=f(D,e);-1!==n&&("object"==typeof t&&"function"==typeof t.emit&&C.nextTick.runAfter(function(){var r=f(N,e);-1!==r&&(t.emit("rejectionHandled",L[n],e),N.splice(r,1))}),D.splice(n,1),L.splice(n,1))}}(this),n?n(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return function(e,n){R&&("object"==typeof t&&"function"==typeof t.emit&&C.nextTick.runAfter(function(){-1!==f(D,e)&&(t.emit("unhandledRejection",n,e),N.push(e))}),D.push(e),n&&void 0!==n.stack?L.push(n.stack):L.push("(no stack) "+n))}(n,e),n}function j(t){return k({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return m(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function q(t,e,n){return C(t).spread(e,n)}function z(t,e,n){return C(t).dispatch(e,n)}function U(t){return A(t,function(t){var e=0,n=E();return d(t,function(r,i,o){var a;O(i)&&"fulfilled"===(a=i.inspect()).state?t[o]=a.value:(++e,A(i,function(r){t[o]=r,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function $(t){if(0===t.length)return C.resolve();var e=C.defer(),n=0;return d(t,function(r,i,o){var a=t[o];n++,A(a,function(t){e.resolve(t)},function(){0==--n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))},function(t){e.notify({index:o,value:t})})},void 0),e.promise}function V(t){return A(t,function(t){return t=p(t,C),A(U(p(t,function(t){return A(t,o,o)})),function(){return t})})}C.resetUnhandledRejections=F,C.getUnhandledReasons=function(){return L.slice()},C.stopUnhandledRejectionTracking=function(){F(),R=!1},F(),C.reject=B,C.fulfill=j,C.master=function(t){return k({isDef:function(){}},function(e,n){return z(t,e,n)},function(){return C(t).inspect()})},C.spread=q,k.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},C.async=function(t){return function(){function e(t,e){var o;if("undefined"==typeof StopIteration){try{o=n[t](e)}catch(t){return B(t)}return o.done?C(o.value):A(o.value,r,i)}try{o=n[t](e)}catch(t){return function(t){return"[object StopIteration]"===v(t)||t instanceof c}(t)?C(t.value):B(t)}return A(o,r,i)}var n=t.apply(this,arguments),r=e.bind(e,"next"),i=e.bind(e,"throw");return r()}},C.spawn=function(t){C.done(C.async(t)())},C.return=function(t){throw new c(t)},C.promised=function(t){return function(){return q([this,U(arguments)],function(e,n){return t.apply(e,n)})}},C.dispatch=z,k.prototype.dispatch=function(t,e){var n=this,r=E();return C.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},C.get=function(t,e){return C(t).dispatch("get",[e])},k.prototype.get=function(t){return this.dispatch("get",[t])},C.set=function(t,e,n){return C(t).dispatch("set",[e,n])},k.prototype.set=function(t,e){return this.dispatch("set",[t,e])},C.del=C.delete=function(t,e){return C(t).dispatch("delete",[e])},k.prototype.del=k.prototype.delete=function(t){return this.dispatch("delete",[t])},C.mapply=C.post=function(t,e,n){return C(t).dispatch("post",[e,n])},k.prototype.mapply=k.prototype.post=function(t,e){return this.dispatch("post",[t,e])},C.send=C.mcall=C.invoke=function(t,e){return C(t).dispatch("post",[e,u(arguments,2)])},k.prototype.send=k.prototype.mcall=k.prototype.invoke=function(t){return this.dispatch("post",[t,u(arguments,1)])},C.fapply=function(t,e){return C(t).dispatch("apply",[void 0,e])},k.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},C.try=C.fcall=function(t){return C(t).dispatch("apply",[void 0,u(arguments,1)])},k.prototype.fcall=function(){return this.dispatch("apply",[void 0,u(arguments)])},C.fbind=function(t){var e=C(t),n=u(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(u(arguments))])}},k.prototype.fbind=function(){var t=this,e=u(arguments);return function(){return t.dispatch("apply",[this,e.concat(u(arguments))])}},C.keys=function(t){return C(t).dispatch("keys",[])},k.prototype.keys=function(){return this.dispatch("keys",[])},C.all=U,k.prototype.all=function(){return U(this)},C.any=$,k.prototype.any=function(){return $(this)},C.allResolved=function(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}(V,"allResolved","allSettled"),k.prototype.allResolved=function(){return V(this)},C.allSettled=function(t){return C(t).allSettled()},k.prototype.allSettled=function(){return this.then(function(t){return U(p(t,function(t){function e(){return t.inspect()}return(t=C(t)).then(e,e)}))})},C.fail=C.catch=function(t,e){return C(t).then(void 0,e)},k.prototype.fail=k.prototype.catch=function(t){return this.then(void 0,t)},C.progress=function(t,e){return C(t).then(void 0,void 0,e)},k.prototype.progress=function(t){return this.then(void 0,void 0,t)},C.fin=C.finally=function(t,e){return C(t).finally(e)},k.prototype.fin=k.prototype.finally=function(t){return t=C(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},C.done=function(t,e,n,r){return C(t).done(e,n,r)},k.prototype.done=function(e,n,r){var i=function(t){C.nextTick(function(){if(b(t,o),!C.onerror)throw t;C.onerror(t)})},o=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(i=t.domain.bind(i)),o.then(void 0,i)},C.timeout=function(t,e,n){return C(t).timeout(e,n)},k.prototype.timeout=function(t,e){var n=E(),r=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},C.delay=function(t,e){return void 0===e&&(e=t,t=void 0),C(t).delay(e)},k.prototype.delay=function(t){return this.then(function(e){var n=E();return setTimeout(function(){n.resolve(e)},t),n.promise})},C.nfapply=function(t,e){return C(t).nfapply(e)},k.prototype.nfapply=function(t){var e=E(),n=u(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},C.nfcall=function(t){var e=u(arguments,1);return C(t).nfapply(e)},k.prototype.nfcall=function(){var t=u(arguments),e=E();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},C.nfbind=C.denodeify=function(t){var e=u(arguments,1);return function(){var n=e.concat(u(arguments)),r=E();return n.push(r.makeNodeResolver()),C(t).fapply(n).fail(r.reject),r.promise}},k.prototype.nfbind=k.prototype.denodeify=function(){var t=u(arguments);return t.unshift(this),C.denodeify.apply(void 0,t)},C.nbind=function(t,e){var n=u(arguments,2);return function(){var r=n.concat(u(arguments)),i=E();return r.push(i.makeNodeResolver()),C(function(){return t.apply(e,arguments)}).fapply(r).fail(i.reject),i.promise}},k.prototype.nbind=function(){var t=u(arguments,0);return t.unshift(this),C.nbind.apply(void 0,t)},C.nmapply=C.npost=function(t,e,n){return C(t).npost(e,n)},k.prototype.nmapply=k.prototype.npost=function(t,e){var n=u(e||[]),r=E();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},C.nsend=C.nmcall=C.ninvoke=function(t,e){var n=u(arguments,2),r=E();return n.push(r.makeNodeResolver()),C(t).dispatch("post",[e,n]).fail(r.reject),r.promise},k.prototype.nsend=k.prototype.nmcall=k.prototype.ninvoke=function(t){var e=u(arguments,1),n=E();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},C.nodeify=function(t,e){return C(t).nodeify(e)},k.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){C.nextTick(function(){t(null,e)})},function(e){C.nextTick(function(){t(e)})})},C.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var H=S();return C})}).call(this,t("_process"))},{_process:38}],2:[function(t,e,n){var r=t("webworkify"),i=t("ngraph.tojson"),o=t("ngraph.events"),a=t("./lib/createLayout.js"),s=t("./options.js"),l=t("./lib/messages.js");function c(t,e){t.x=e.x,t.y=e.y,t.z=e.z}function u(t,e){t.x=e.x,t.y=e.y}e.exports=function(e,n){var d,f,p=(n=s(n)).is3d?c:u,h=!1,g=!1,m=!1,v=Object.create(null),y={kind:l.step},b=Object.create(null),w=r(t("./lib/layoutWorker.js"));w.addEventListener("message",function(t){var e=t.data.kind,n=t.data.payload;e===l.cycleComplete&&(function(t,e){m=e,Object.keys(t).forEach(function(e){var n=t[e],r=b[e];r?p(r,n):b[e]=n})}(n.positions,n.systemStable),d=n.bbox,_.fire("cycle",n.iterations,n.systemStable)),e===l.initDone&&(h=!1,x())}),function(){if(g)throw new Error("Init request is already sent to the worker");w.postMessage({kind:l.init,payload:{graph:i(e),options:JSON.stringify(n)}}),g=!0}(),function(){var t=a(e,n);e.forEachNode(function(e){b[e.id]=t.getNodePosition(e.id)}),d=t.getGraphRect()}();var _={step:x,getNodePosition:S,getLinkPosition:function(t){return f||(f=Object.create(null),e.forEachLink(function(t){f[t.id]={from:S(t.fromId),to:S(t.toId)}})),f[t]},pinNode:function(t,e){w.postMessage({kind:l.pinNode,payload:{nodeId:t.id,isPinned:e}}),v[t.id]=e},setNodePosition:function(t,e,n,r){w.postMessage({kind:l.setNodePosition,payload:{nodeId:t,x:e,y:n,z:r}}),p(b[t],{x:e,y:n,z:r})},getGraphRect:function(){return d},isNodePinned:function(t){return v[t.id]}};return o(_),_;function x(){if(!h)return w.postMessage(y),m}function S(t){return b[t]}}},{"./lib/createLayout.js":3,"./lib/layoutWorker.js":4,"./lib/messages.js":5,"./options.js":6,"ngraph.events":7,"ngraph.tojson":37,webworkify:40}],3:[function(t,e,n){var r=t("ngraph.forcelayout3d"),i=r.get2dLayout;e.exports=function(t,e){return(e=e||{}).is3d?r(t,e.physics):i(t,e.physics)}},{"ngraph.forcelayout3d":9}],4:[function(t,e,n){var r=t("./createLayout.js"),i=t("ngraph.fromjson"),o=t("../options.js"),a=t("./messages.js");e.exports=function(t){var e,n,s,l=0,c=!1,u=0,d=!1,f=Object.create(null);return void t.addEventListener("message",function(l){var c=l.data.kind,u=l.data.payload;if(c===a.init){s=i(u.graph);var f=JSON.parse(u.options);!function(i,s){s=o(s),n=s.async,e=r(i,s),i.forEachNode(h),t.postMessage({kind:a.initDone})}(s,f)}else c===a.step?g():c===a.pinNode?function(t,n){p();var r=s.getNode(t);r&&e.pinNode(r,n)}(u.nodeId,u.isPinned):c===a.setNodePosition&&function(t,n,r,i){p(),e.setNodePosition.apply(e,arguments),d=!1,g()}(u.nodeId,u.x,u.y,u.z)});function p(){if(!s)throw new Error("Pin node requested without initialied graph");if(!e)throw new Error("Layout was not created. Something is really wrong here")}function h(t){f[t.id]=e.getNodePosition(t.id)}function g(){p(),c=!0,u||function r(){u=d?0:setTimeout(function(){!function(){for(var r=0;r<n.stepsPerCycle;++r)d=e.step(),l+=1;l>=n.maxIterations&&(d=!0),t.postMessage({kind:a.cycleComplete,payload:{positions:f,systemStable:d,bbox:e.getGraphRect(),iterations:l}})}(),c||!n.waitForStep?(c=!1,r()):u=0},0)}()}}},{"../options.js":6,"./createLayout.js":3,"./messages.js":5,"ngraph.fromjson":23}],5:[function(t,e,n){e.exports={init:10,initDone:11,step:12,cycleComplete:13,pinNode:41,setNodePosition:43}},{}],6:[function(t,e,n){e.exports=function(t){(t=t||{}).is3d="boolean"==typeof t.is3d&&t.is3d;var e=t.async=t.async||{};return e.stepsPerCycle="number"==typeof e.stepsPerCycle?e.stepsPerCycle:5,e.maxIterations="number"==typeof e.maxIterations?e.maxIterations:Number.POSITIVE_INFINITY,e.waitForStep="boolean"!=typeof e.waitForStep||e.waitForStep,t}},{}],7:[function(t,e,n){e.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){var i=void 0===n;if(i)return e=Object.create(null),t;if(e[n]){var o="function"!=typeof r;if(o)delete e[n];else for(var a=e[n],s=0;s<a.length;++s)a[s].callback===r&&a.splice(s,1)}return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var a=i[o];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},{}],8:[function(t,e,n){function r(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(r){return void 0!==r?(t[n]=r,e):t[n]}}}e.exports=function(t,e,n){if("[object Array]"===Object.prototype.toString.call(n))for(var i=0;i<n.length;++i)r(t,e,n[i]);else for(var o in t)r(t,e,o)}},{}],9:[function(t,e,n){function r(e,n){var i=t("ngraph.merge");return n=i(n,{createQuadTree:t("ngraph.quadtreebh3d"),createBounds:t("./lib/bounds"),createDragForce:t("./lib/dragForce"),createSpringForce:t("./lib/springForce"),integrator:t("./lib/eulerIntegrator"),createBody:t("./lib/createBody")}),r.get2dLayout(e,n)}e.exports=r,r.get2dLayout=t("ngraph.forcelayout")},{"./lib/bounds":10,"./lib/createBody":11,"./lib/dragForce":12,"./lib/eulerIntegrator":13,"./lib/springForce":14,"ngraph.forcelayout":15,"ngraph.merge":26,"ngraph.quadtreebh3d":28}],10:[function(t,e,n){e.exports=function(e,n){var r=t("ngraph.random").random(42),i={x1:0,y1:0,z1:0,x2:0,y2:0,z2:0};return{box:i,update:function(){var t=e.length;if(0!==t){for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MAX_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,l=Number.MIN_VALUE;t--;){var c=e[t];c.isPinned?(c.pos.x=c.prevPos.x,c.pos.y=c.prevPos.y,c.pos.z=c.prevPos.z):(c.prevPos.x=c.pos.x,c.prevPos.y=c.pos.y,c.prevPos.z=c.pos.z),c.pos.x<n&&(n=c.pos.x),c.pos.x>a&&(a=c.pos.x),c.pos.y<r&&(r=c.pos.y),c.pos.y>s&&(s=c.pos.y),c.pos.z<o&&(o=c.pos.z),c.pos.z>l&&(l=c.pos.z)}i.x1=n,i.x2=a,i.y1=r,i.y2=s,i.z1=o,i.z2=l}},reset:function(){i.x1=i.y1=0,i.x2=i.y2=0,i.z1=i.z2=0},getBestNewPosition:function(t){var e=i,o=0,a=0,s=0;if(t.length){for(var l=0;l<t.length;++l)o+=t[l].pos.x,a+=t[l].pos.y,s+=t[l].pos.z;o/=t.length,a/=t.length,s/=t.length}else o=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=(e.z1+e.z2)/2;var c=n.springLength;return{x:o+r.next(c)-c/2,y:a+r.next(c)-c/2,z:s+r.next(c)-c/2}}}}},{"ngraph.random":36}],11:[function(t,e,n){var r=t("ngraph.physics.primitives");e.exports=function(t){return new r.Body3d(t)}},{"ngraph.physics.primitives":27}],12:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.expose");e=n(e,{dragCoeff:.02});var i={update:function(t){t.force.x-=e.dragCoeff*t.velocity.x,t.force.y-=e.dragCoeff*t.velocity.y,t.force.z-=e.dragCoeff*t.velocity.z}};return r(e,i,["dragCoeff"]),i}},{"ngraph.expose":8,"ngraph.merge":26}],13:[function(t,e,n){e.exports=function(t,e){var n,r=0,i=0,o=0,a=0,s=0,l=0,c=t.length;for(n=0;n<c;++n){var u=t[n],d=e/u.mass;u.velocity.x+=d*u.force.x,u.velocity.y+=d*u.force.y,u.velocity.z+=d*u.force.z;var f=u.velocity.x,p=u.velocity.y,h=u.velocity.z,g=Math.sqrt(f*f+p*p+h*h);g>1&&(u.velocity.x=f/g,u.velocity.y=p/g,u.velocity.z=h/g),r=e*u.velocity.x,o=e*u.velocity.y,s=e*u.velocity.z,u.pos.x+=r,u.pos.y+=o,u.pos.z+=s,i+=Math.abs(r),a+=Math.abs(o),l+=Math.abs(s)}return(i*i+a*a+l*l)/t.length}},{}],14:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.random").random(42),i=t("ngraph.expose");e=n(e,{springCoeff:2e-4,springLength:80});var o={update:function(t){var n=t.from,i=t.to,o=t.length<0?e.springLength:t.length,a=i.pos.x-n.pos.x,s=i.pos.y-n.pos.y,l=i.pos.z-n.pos.z,c=Math.sqrt(a*a+s*s+l*l);0===c&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,l=(r.nextDouble()-.5)/50,c=Math.sqrt(a*a+s*s+l*l));var u=c-o,d=(!t.coeff||t.coeff<0?e.springCoeff:t.coeff)*u/c*t.weight;n.force.x+=d*a,n.force.y+=d*s,n.force.z+=d*l,i.force.x-=d*a,i.force.y-=d*s,i.force.z-=d*l}};return i(e,o,["springCoeff","springLength"]),o}},{"ngraph.expose":8,"ngraph.merge":26,"ngraph.random":36}],15:[function(t,e,n){function r(){}e.exports=function(e,n){if(!e)throw new Error("Graph structure cannot be undefined");var i=t("ngraph.physics.simulator")(n),o="function"==typeof Object.create?Object.create(null):{},a={},s=i.settings.springTransform||r;return e.forEachNode(function(t){c(t.id)}),e.forEachLink(d),e.on("changed",l),{step:function(){return i.step()},getNodePosition:function(t){return h(t).pos},setNodePosition:function(t){var e=h(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=a[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return i.getBBox()},pinNode:function(t,e){h(t.id).isPinned=!!e},isNodePinned:function(t){return h(t.id).isPinned},dispose:function(){e.off("changed",l)},getBody:function(t){return o[t]},getSpring:function(t,n){var r;if(void 0===n)r="string"==typeof t?t:t.id;else{var i=e.hasLink(t,n);if(!i)return;r=i.id}return a[r]},simulator:i};function l(t){for(var e=0;e<t.length;++e){var n=t[e];"add"===n.changeType?(n.node&&c(n.node.id),n.link&&d(n.link)):"remove"===n.changeType&&(n.node&&u(n.node),n.link&&f(n.link))}}function c(t){var n=o[t];if(!n){var r=e.getNode(t);if(!r)throw new Error("initBody() was called with unknown node id");var a=r.position;if(!a){var s=function(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],a=i.fromId!==t.id?o[i.fromId]:o[i.toId];a&&a.pos&&e.push(a)}return e}(r);a=i.getBestNewBodyPosition(s)}n=i.addBodyAt(a),o[t]=n,p(t),function(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}(r)&&(n.isPinned=!0)}}function u(t){var e=t.id,n=o[e];n&&(o[e]=null,delete o[e],i.removeBody(n))}function d(t){p(t.fromId),p(t.toId);var e=o[t.fromId],n=o[t.toId],r=i.addSpring(e,n,t.length);s(t,r),a[t.id]=r}function f(t){var n=a[t.id];if(n){var r=e.getNode(t.fromId),o=e.getNode(t.toId);r&&p(r.id),o&&p(o.id),delete a[t.id],i.removeSpring(n)}}function p(t){var n=o[t];n.mass=function(t){return 1+e.getLinks(t).length/3}(t)}function h(t){var e=o[t];return e||(c(t),e=o[t]),e}},e.exports.simulator=t("ngraph.physics.simulator")},{"ngraph.physics.simulator":16}],16:[function(t,e,n){e.exports=function(e){var n=t("./lib/spring"),r=t("ngraph.expose"),i=t("ngraph.merge"),o=(e=i(e,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009})).createQuadTree||t("ngraph.quadtreebh"),a=e.createBounds||t("./lib/bounds"),s=e.createDragForce||t("./lib/dragForce"),l=e.createSpringForce||t("./lib/springForce"),c=e.integrator||t("./lib/eulerIntegrator"),u=e.createBody||t("./lib/createBody"),d=[],f=[],p=o(e),h=a(d,e),g=l(e),m=s(e),v={bodies:d,springs:f,settings:e,step:function(){!function(){var t,e=d.length;if(e)for(p.insertBodies(d);e--;)(t=d[e]).isPinned||(t.force.reset(),p.updateBodyForce(t),m.update(t));for(e=f.length;e--;)g.update(f[e])}();var t=c(d,e.timeStep);return h.update(),t<e.stableThreshold},addBody:function(t){if(!t)throw new Error("Body is required");return d.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=u(t);return d.push(e),e},removeBody:function(t){if(t){var e=d.indexOf(t);if(!(e<0))return d.splice(e,1),0===d.length&&h.reset(),!0}},addSpring:function(t,e,r,i,o){if(!t||!e)throw new Error("Cannot add null spring to force simulator");"number"!=typeof r&&(r=-1);var a=new n(t,e,r,o>=0?o:-1,i);return f.push(a),a},removeSpring:function(t){if(t){var e=f.indexOf(t);return e>-1?(f.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return h.getBestNewPosition(t)},getBBox:function(){return h.box},gravity:function(t){return void 0!==t?(e.gravity=t,p.options({gravity:t}),this):e.gravity},theta:function(t){return void 0!==t?(e.theta=t,p.options({theta:t}),this):e.theta}};return r(e,v),v}},{"./lib/bounds":17,"./lib/createBody":18,"./lib/dragForce":19,"./lib/eulerIntegrator":20,"./lib/spring":21,"./lib/springForce":22,"ngraph.expose":8,"ngraph.merge":26,"ngraph.quadtreebh":32}],17:[function(t,e,n){e.exports=function(e,n){var r=t("ngraph.random").random(42),i={x1:0,y1:0,x2:0,y2:0};return{box:i,update:function(){var t=e.length;if(0!==t){for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE;t--;){var s=e[t];s.isPinned?(s.pos.x=s.prevPos.x,s.pos.y=s.prevPos.y):(s.prevPos.x=s.pos.x,s.prevPos.y=s.pos.y),s.pos.x<n&&(n=s.pos.x),s.pos.x>o&&(o=s.pos.x),s.pos.y<r&&(r=s.pos.y),s.pos.y>a&&(a=s.pos.y)}i.x1=n,i.x2=o,i.y1=r,i.y2=a}},reset:function(){i.x1=i.y1=0,i.x2=i.y2=0},getBestNewPosition:function(t){var e=i,o=0,a=0;if(t.length){for(var s=0;s<t.length;++s)o+=t[s].pos.x,a+=t[s].pos.y;o/=t.length,a/=t.length}else o=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2;var l=n.springLength;return{x:o+r.next(l)-l/2,y:a+r.next(l)-l/2}}}}},{"ngraph.random":36}],18:[function(t,e,n){var r=t("ngraph.physics.primitives");e.exports=function(t){return new r.Body(t)}},{"ngraph.physics.primitives":27}],19:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.expose");e=n(e,{dragCoeff:.02});var i={update:function(t){t.force.x-=e.dragCoeff*t.velocity.x,t.force.y-=e.dragCoeff*t.velocity.y}};return r(e,i,["dragCoeff"]),i}},{"ngraph.expose":8,"ngraph.merge":26}],20:[function(t,e,n){e.exports=function(t,e){var n,r=0,i=0,o=0,a=0,s=t.length;for(n=0;n<s;++n){var l=t[n],c=e/l.mass;l.velocity.x+=c*l.force.x,l.velocity.y+=c*l.force.y;var u=l.velocity.x,d=l.velocity.y,f=Math.sqrt(u*u+d*d);f>1&&(l.velocity.x=u/f,l.velocity.y=d/f),r=e*l.velocity.x,o=e*l.velocity.y,l.pos.x+=r,l.pos.y+=o,i+=Math.abs(r),a+=Math.abs(o)}return(i*i+a*a)/t.length}},{}],21:[function(t,e,n){e.exports=function(t,e,n,r,i){this.from=t,this.to=e,this.length=n,this.coeff=r,this.weight="number"==typeof i?i:1}},{}],22:[function(t,e,n){e.exports=function(e){var n=t("ngraph.merge"),r=t("ngraph.random").random(42),i=t("ngraph.expose");e=n(e,{springCoeff:2e-4,springLength:80});var o={update:function(t){var n=t.from,i=t.to,o=t.length<0?e.springLength:t.length,a=i.pos.x-n.pos.x,s=i.pos.y-n.pos.y,l=Math.sqrt(a*a+s*s);0===l&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,l=Math.sqrt(a*a+s*s));var c=l-o,u=(!t.coeff||t.coeff<0?e.springCoeff:t.coeff)*c/l*t.weight;n.force.x+=u*a,n.force.y+=u*s,i.force.x-=u*a,i.force.y-=u*s}};return i(e,o,["springCoeff","springLength"]),o}},{"ngraph.expose":8,"ngraph.merge":26,"ngraph.random":36}],23:[function(t,e,n){e.exports=function(t,e,n){var o;e=e||i,n=n||i,o="string"==typeof t?JSON.parse(t):t;var a,s=r();if(void 0===o.links||void 0===o.nodes)throw new Error("Cannot load graph without links and nodes");for(a=0;a<o.nodes.length;++a){var l=e(o.nodes[a]);if(!l.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");s.addNode(l.id,l.data)}for(a=0;a<o.links.length;++a){var c=n(o.links[a]);if(!c.hasOwnProperty("fromId")||!c.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");s.addLink(c.fromId,c.toId,c.data)}return s};var r=t("ngraph.graph");function i(t){return t}},{"ngraph.graph":24}],24:[function(t,e,n){e.exports=function(t){void 0===(t=t||{}).uniqueLinkId&&(t.uniqueLinkId=!0);var e="function"==typeof Object.create?Object.create(null):{},n=[],l={},c=0,u=0,d=Object.keys?A:I,f=t.uniqueLinkId?function(t,e,n){var r=s(t,e),i=l.hasOwnProperty(r);if(i||E(t,e)){i||(l[r]=0);var o="@"+ ++l[r];r=s(t+o,e+o)}return new a(t,e,n,r)}:function(t,e,n){var r=s(t,e);return new a(t,e,n,r)},p=[],h=T,g=T,m=T,v=T,y={addNode:_,addLink:function(t,e,r){m();var i=x(t)||_(t),a=x(e)||_(e),s=f(t,e,r);return n.push(s),o(i,s),t!==e&&o(a,s),h(s,"add"),v(),s},removeLink:C,removeNode:S,getNode:x,getNodesCount:function(){return c},getLinksCount:function(){return n.length},getLinks:function(t){var e=x(t);return e?e.links:null},forEachNode:d,forEachLinkedNode:function(t,n,r){var i=x(t);if(i&&i.links&&"function"==typeof n)return r?function(t,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(o.fromId===n&&r(e[o.toId],o))return!0}}(i.links,t,n):function(t,n,r){for(var i=0;i<t.length;++i){var o=t[i],a=o.fromId===n?o.toId:o.fromId;if(r(e[a],o))return!0}}(i.links,t,n)},forEachLink:function(t){var e,r;if("function"==typeof t)for(e=0,r=n.length;e<r;++e)t(n[e])},beginUpdate:m,endUpdate:v,clear:function(){m(),d(function(t){S(t.id)}),v()},hasLink:E,getLink:E};return r(y),function(){var t=y.on;y.on=function(){return y.beginUpdate=m=M,y.endUpdate=v=k,h=b,g=w,y.on=t,t.apply(y,arguments)}}(),y;function b(t,e){p.push({link:t,changeType:e})}function w(t,e){p.push({node:t,changeType:e})}function _(t,n){if(void 0===t)throw new Error("Invalid node identifier");m();var r=x(t);return r?g(r,"update"):(r=new function(t){this.id=t,this.links=null,this.data=null}(t),c++,g(r,"add")),r.data=n,e[t]=r,v(),r}function x(t){return e[t]}function S(t){var n=x(t);if(!n)return!1;if(m(),n.links)for(;n.links.length;){var r=n.links[0];C(r)}return delete e[t],c--,g(n,"remove"),v(),!0}function C(t){if(!t)return!1;var e=i(t,n);if(e<0)return!1;m(),n.splice(e,1);var r=x(t.fromId),o=x(t.toId);return r&&(e=i(t,r.links))>=0&&r.links.splice(e,1),o&&(e=i(t,o.links))>=0&&o.links.splice(e,1),h(t,"remove"),v(),!0}function E(t,e){var n,r=x(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var i=r.links[n];if(i.fromId===t&&i.toId===e)return i}return null}function T(){}function M(){u+=1}function k(){0==(u-=1)&&p.length>0&&(y.fire("changed",p),p.length=0)}function A(t){if("function"==typeof t)for(var n=Object.keys(e),r=0;r<n.length;++r)if(t(e[n[r]]))return!0}function I(t){var n;if("function"==typeof t)for(n in e)if(t(e[n]))return!0}};var r=t("ngraph.events");function i(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function o(t,e){t.links?t.links.push(e):t.links=[e]}function a(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function s(t,e){return function(t){var e,n,r,i=0;if(0==t.length)return i;for(e=0,r=t.length;e<r;e++)n=t.charCodeAt(e),i=(i<<5)-i+n,i|=0;return i}(t.toString()+"👉 "+e.toString())}},{"ngraph.events":25}],25:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],26:[function(t,e,n){e.exports=function t(e,n){var r;if(e||(e={}),n)for(r in n)if(n.hasOwnProperty(r)){var i=e.hasOwnProperty(r),o=typeof n[r],a=!i||typeof e[r]!==o;a?e[r]=n[r]:"object"===o&&(e[r]=t(e[r],n[r]))}return e}},{}],27:[function(t,e,n){function r(t,e){this.pos=new i(t,e),this.prevPos=new i(t,e),this.force=new i,this.velocity=new i,this.mass=1}function i(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function o(t,e,n){this.pos=new a(t,e,n),this.prevPos=new a(t,e,n),this.force=new a,this.velocity=new a,this.mass=1}function a(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}e.exports={Body:r,Vector2d:i,Body3d:o,Vector3d:a},r.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},i.prototype.reset=function(){this.x=this.y=0},o.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},a.prototype.reset=function(){this.x=this.y=this.z=0}},{}],28:[function(t,e,n){function r(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:4===e?t.quad4:5===e?t.quad5:6===e?t.quad6:7===e?t.quad7:null}function i(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e?t.quad3=n:4===e?t.quad4=n:5===e?t.quad5=n:6===e?t.quad6=n:7===e&&(t.quad7=n)}e.exports=function(e){(e=e||{}).gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var n=t("ngraph.random").random(1984),o=t("./node"),a=t("./insertStack"),s=t("./isSamePosition"),l=e.gravity,c=[],u=new a,d=e.theta,f=[],p=0,h=function(){var t=f[p];return t?(t.quad0=null,t.quad4=null,t.quad1=null,t.quad5=null,t.quad2=null,t.quad6=null,t.quad3=null,t.quad7=null,t.body=null,t.mass=t.massX=t.massY=t.massZ=0,t.left=t.right=t.top=t.bottom=t.front=t.back=0):(t=new o,f[p]=t),++p,t},g=h(),m=function(t){for(u.reset(),u.push(g,t);!u.isEmpty();){var e=u.pop(),o=e.node,a=e.body;if(o.body){var l=o.body;if(o.body=null,s(l.pos,a.pos)){var c=3;do{var d=n.nextDouble(),f=(o.right-o.left)*d,p=(o.bottom-o.top)*d,m=(o.front-o.back)*d;l.pos.x=o.left+f,l.pos.y=o.top+p,l.pos.z=o.back+m,c-=1}while(c>0&&s(l.pos,a.pos));if(0===c&&s(l.pos,a.pos))return}u.push(o,l),u.push(o,a)}else{var v=a.pos.x,y=a.pos.y,b=a.pos.z;o.mass+=a.mass,o.massX+=a.mass*v,o.massY+=a.mass*y,o.massZ+=a.mass*b;var w=0,_=o.left,x=(o.right+_)/2,S=o.top,C=(o.bottom+S)/2,E=o.back,T=(o.front+E)/2;if(v>x){w+=1;var M=_;_=x,x+=x-M}if(y>C){w+=2;var k=S;S=C,C+=C-k}if(b>T){w+=4;var A=E;T=(E=T)+(E-A)}var I=r(o,w);I?u.push(I,a):((I=h()).left=_,I.top=S,I.right=x,I.bottom=C,I.back=E,I.front=T,I.body=a,i(o,w,I))}}};return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE,s=Number.MIN_VALUE,l=t.length;for(e=l;e--;){var c=t[e].pos,u=c.x,d=c.y,f=c.z;u<n&&(n=u),u>o&&(o=u),d<r&&(r=d),d>a&&(a=d),f<i&&(i=f),f>s&&(s=f)}var v=Math.max(o-n,Math.max(a-r,s-i));for(o=n+v,a=r+v,s=i+v,p=0,(g=h()).left=n,g.right=o,g.top=r,g.bottom=a,g.back=i,g.front=s,(e=l-1)>0&&(g.body=t[e]);e--;)m(t[e])},updateBodyForce:function(t){var e,r,i,o,a,s=c,u=0,f=0,p=0,h=1,m=0,v=1;for(s[0]=g;h;){var y=s[m],b=y.body;h-=1,m+=1;var w=b!==t;b&&w?(r=b.pos.x-t.pos.x,i=b.pos.y-t.pos.y,o=b.pos.z-t.pos.z,0===(a=Math.sqrt(r*r+i*i+o*o))&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=(n.nextDouble()-.5)/50,a=Math.sqrt(r*r+i*i+o*o)),e=l*b.mass*t.mass/(a*a*a),u+=e*r,f+=e*i,p+=e*o):w&&(r=y.massX/y.mass-t.pos.x,i=y.massY/y.mass-t.pos.y,o=y.massZ/y.mass-t.pos.z,0===(a=Math.sqrt(r*r+i*i+o*o))&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=(n.nextDouble()-.5)/50,a=Math.sqrt(r*r+i*i+o*o)),(y.right-y.left)/a<d?(e=l*y.mass*t.mass/(a*a*a),u+=e*r,f+=e*i,p+=e*o):(y.quad0&&(s[v]=y.quad0,h+=1,v+=1),y.quad1&&(s[v]=y.quad1,h+=1,v+=1),y.quad2&&(s[v]=y.quad2,h+=1,v+=1),y.quad3&&(s[v]=y.quad3,h+=1,v+=1),y.quad4&&(s[v]=y.quad4,h+=1,v+=1),y.quad5&&(s[v]=y.quad5,h+=1,v+=1),y.quad6&&(s[v]=y.quad6,h+=1,v+=1),y.quad7&&(s[v]=y.quad7,h+=1,v+=1)))}t.force.x+=u,t.force.y+=f,t.force.z+=p},options:function(t){return t?("number"==typeof t.gravity&&(l=t.gravity),"number"==typeof t.theta&&(d=t.theta),this):{gravity:l,theta:d}}}}},{"./insertStack":29,"./isSamePosition":30,"./node":31,"ngraph.random":36}],29:[function(t,e,n){function r(){this.stack=[],this.popIdx=0}e.exports=r,r.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new function(t,e){this.node=t,this.body=e}(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],30:[function(t,e,n){e.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),i=Math.abs(t.z-e.z);return n<1e-8&&r<1e-8&&i<1e-8}},{}],31:[function(t,e,n){e.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.quad4=null,this.quad5=null,this.quad6=null,this.quad7=null,this.mass=0,this.massX=0,this.massY=0,this.massZ=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.front=0,this.back=0}},{}],32:[function(t,e,n){function r(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function i(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}e.exports=function(e){(e=e||{}).gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var n=t("ngraph.random").random(1984),o=t("./node"),a=t("./insertStack"),s=t("./isSamePosition"),l=e.gravity,c=[],u=new a,d=e.theta,f=[],p=0,h=function(){var t=f[p];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new o,f[p]=t),++p,t},g=h(),m=function(t){for(u.reset(),u.push(g,t);!u.isEmpty();){var e=u.pop(),o=e.node,a=e.body;if(o.body){var l=o.body;if(o.body=null,s(l.pos,a.pos)){var c=3;do{var d=n.nextDouble(),f=(o.right-o.left)*d,p=(o.bottom-o.top)*d;l.pos.x=o.left+f,l.pos.y=o.top+p,c-=1}while(c>0&&s(l.pos,a.pos));if(0===c&&s(l.pos,a.pos))return}u.push(o,l),u.push(o,a)}else{var m=a.pos.x,v=a.pos.y;o.mass=o.mass+a.mass,o.massX=o.massX+a.mass*m,o.massY=o.massY+a.mass*v;var y=0,b=o.left,w=(o.right+b)/2,_=o.top,x=(o.bottom+_)/2;if(m>w){y+=1;var S=b;b=w,w+=w-S}if(v>x){y+=2;var C=_;_=x,x+=x-C}var E=r(o,y);E?u.push(E,a):((E=h()).left=b,E.top=_,E.right=w,E.bottom=x,E.body=a,i(o,y,E))}}};return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE,a=t.length;for(e=a;e--;){var s=t[e].pos.x,l=t[e].pos.y;s<n&&(n=s),s>i&&(i=s),l<r&&(r=l),l>o&&(o=l)}var c=i-n,u=o-r;for(c>u?o=r+c:i=n+u,p=0,(g=h()).left=n,g.right=i,g.top=r,g.bottom=o,(e=a-1)>0&&(g.body=t[e]);e--;)m(t[e])},updateBodyForce:function(t){var e,r,i,o,a=c,s=0,u=0,f=1,p=0,h=1;for(a[0]=g;f;){var m=a[p],v=m.body;f-=1,p+=1;var y=v!==t;v&&y?(r=v.pos.x-t.pos.x,i=v.pos.y-t.pos.y,0===(o=Math.sqrt(r*r+i*i))&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=Math.sqrt(r*r+i*i)),e=l*v.mass*t.mass/(o*o*o),s+=e*r,u+=e*i):y&&(r=m.massX/m.mass-t.pos.x,i=m.massY/m.mass-t.pos.y,0===(o=Math.sqrt(r*r+i*i))&&(r=(n.nextDouble()-.5)/50,i=(n.nextDouble()-.5)/50,o=Math.sqrt(r*r+i*i)),(m.right-m.left)/o<d?(e=l*m.mass*t.mass/(o*o*o),s+=e*r,u+=e*i):(m.quad0&&(a[h]=m.quad0,f+=1,h+=1),m.quad1&&(a[h]=m.quad1,f+=1,h+=1),m.quad2&&(a[h]=m.quad2,f+=1,h+=1),m.quad3&&(a[h]=m.quad3,f+=1,h+=1)))}t.force.x+=s,t.force.y+=u},options:function(t){return t?("number"==typeof t.gravity&&(l=t.gravity),"number"==typeof t.theta&&(d=t.theta),this):{gravity:l,theta:d}}}}},{"./insertStack":33,"./isSamePosition":34,"./node":35,"ngraph.random":36}],33:[function(t,e,n){function r(){this.stack=[],this.popIdx=0}e.exports=r,r.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new function(t,e){this.node=t,this.body=e}(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],34:[function(t,e,n){e.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return n<1e-8&&r<1e-8}},{}],35:[function(t,e,n){e.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],36:[function(t,e,n){function r(t){var e="number"==typeof t?t:+new Date,n=function(){return(268435455&(e=4294967295&(3042594569^(e=4251993797+(e=4294967295&(3550635116+(e=374761393+(e=4294967295&(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19))+(e<<5)&4294967295)^e<<9))+(e<<3)&4294967295)^e>>>16)))/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}e.exports={random:r,randomIterator:function(t,e){var n=e||r();if("function"!=typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var r,i,o;for(r=t.length-1;r>0;--r)i=n.next(r+1),o=t[i],t[i]=t[r],t[r]=o,e(o);t.length&&e(t[0])},shuffle:function(){var e,r,i;for(e=t.length-1;e>0;--e)r=n.next(e+1),i=t[r],t[r]=t[e],t[e]=i;return t}}}}},{}],37:[function(t,e,n){e.exports=function(t,e,n){var r={nodes:[],links:[]},i=e||function(t){var e={id:t.id};return void 0!==t.data&&(e.data=t.data),e},o=n||function(t){var e={fromId:t.fromId,toId:t.toId};return void 0!==t.data&&(e.data=t.data),e};return t.forEachNode(function(t){r.nodes.push(i(t))}),t.forEachLink(function(t){r.links.push(o(t))}),JSON.stringify(r)}},{}],38:[function(t,e,n){var r,i=e.exports={},o=[],a=!1,s=-1;function l(){a=!1,r.length?o=r.concat(o):s=-1,o.length&&c()}function c(){if(!a){var t=setTimeout(l);a=!0;for(var e=o.length;e;){for(r=o,o=[];++s<e;)r&&r[s].run();s=-1,e=o.length}r=null,a=!1,clearTimeout(t)}}function u(t,e){this.fun=t,this.array=e}function d(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];o.push(new u(t,e)),1!==o.length||a||setTimeout(c,0)},u.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],39:[function(t,e,n){(function(){var t=this,r=t._,i=Array.prototype,o=Object.prototype,a=Function.prototype,s=i.push,l=i.slice,c=o.toString,u=o.hasOwnProperty,d=Array.isArray,f=Object.keys,p=a.bind,h=Object.create,g=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};void 0!==n?(void 0!==e&&e.exports&&(n=e.exports=m),n._=m):t._=m,m.VERSION="1.8.3";var v=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},y=function(t,e,n){return null==t?m.identity:m.isFunction(t)?v(t,e,n):m.isObject(t)?m.matcher(t):m.property(t)};m.iteratee=function(t,e){return y(t,e,1/0)};var b=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;l<s;l++){var c=a[l];e&&void 0!==n[c]||(n[c]=o[c])}return n}},w=function(t){if(!m.isObject(t))return{};if(h)return h(t);g.prototype=t;var e=new g;return g.prototype=null,e},_=function(t){return function(e){return null==e?void 0:e[t]}},x=Math.pow(2,53)-1,S=_("length"),C=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=x};function E(t){return function(e,n,r,i){n=v(n,i,4);var o=!C(e)&&m.keys(e),a=(o||e).length,s=t>0?0:a-1;return arguments.length<3&&(r=e[o?o[s]:s],s+=t),function(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}(e,n,r,o,s,a)}}m.each=m.forEach=function(t,e,n){var r,i;if(e=v(e,n),C(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=y(e,n);for(var r=!C(t)&&m.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},m.reduce=m.foldl=m.inject=E(1),m.reduceRight=m.foldr=E(-1),m.find=m.detect=function(t,e,n){var r;if(void 0!==(r=C(t)?m.findIndex(t,e,n):m.findKey(t,e,n))&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=y(e,n),m.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},m.reject=function(t,e,n){return m.filter(t,m.negate(y(e)),n)},m.every=m.all=function(t,e,n){e=y(e,n);for(var r=!C(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=y(e,n);for(var r=!C(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return C(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=function(t,e){var n=l.call(arguments,2),r=m.isFunction(e);return m.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e&&null!=t)for(var s=0,l=(t=C(t)?t:m.values(t)).length;s<l;s++)(r=t[s])>o&&(o=r);else e=y(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},m.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t)for(var s=0,l=(t=C(t)?t:m.values(t)).length;s<l;s++)(r=t[s])<o&&(o=r);else e=y(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},m.shuffle=function(t){for(var e,n=C(t)?t:m.values(t),r=n.length,i=Array(r),o=0;o<r;o++)(e=m.random(0,o))!==o&&(i[o]=i[e]),i[e]=n[o];return i},m.sample=function(t,e,n){return null==e||n?(C(t)||(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,n){return e=y(e,n),m.pluck(m.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,r){var i={};return n=y(n,r),m.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};m.groupBy=T(function(t,e,n){m.has(t,n)?t[n].push(e):t[n]=[e]}),m.indexBy=T(function(t,e,n){t[n]=e}),m.countBy=T(function(t,e,n){m.has(t,n)?t[n]++:t[n]=1}),m.toArray=function(t){return t?m.isArray(t)?l.call(t):C(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:C(t)?t.length:m.keys(t).length},m.partition=function(t,e,n){e=y(e,n);var r=[],i=[];return m.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},m.first=m.head=m.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var M=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=S(t);a<s;a++){var l=t[a];if(C(l)&&(m.isArray(l)||m.isArguments(l))){e||(l=M(l,e,n));var c=0,u=l.length;for(i.length+=u;c<u;)i[o++]=l[c++]}else n||(i[o++]=l)}return i};function k(t){return function(e,n,r){n=y(n,r);for(var i=S(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function A(t,e,n){return function(r,i,o){var a=0,s=S(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!=i)return(o=e(l.call(r,a,s),m.isNaN))>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}m.flatten=function(t,e){return M(t,e,!1)},m.without=function(t){return m.difference(t,l.call(arguments,1))},m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=y(n,r));for(var i=[],o=[],a=0,s=S(t);a<s;a++){var l=t[a],c=n?n(l,a,t):l;e?(a&&o===c||i.push(l),o=c):n?m.contains(o,c)||(o.push(c),i.push(l)):m.contains(i,l)||i.push(l)}return i},m.union=function(){return m.uniq(M(arguments,!0,!0))},m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=S(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){for(var a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},m.difference=function(t){var e=M(arguments,!0,!0,1);return m.filter(t,function(t){return!m.contains(e,t)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(t){for(var e=t&&m.max(t,S).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.object=function(t,e){for(var n={},r=0,i=S(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},m.findIndex=k(1),m.findLastIndex=k(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=y(n,r,1))(e),o=0,a=S(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},m.indexOf=A(1,m.findIndex,m.sortedIndex),m.lastIndexOf=A(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var I=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=w(t.prototype),a=t.apply(o,i);return m.isObject(a)?a:o};m.bind=function(t,e){if(p&&t.bind===p)return p.apply(t,l.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),r=function(){return I(t,r,e,this,n.concat(l.call(arguments)))};return r},m.partial=function(t){var e=l.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===m?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return I(t,n,this,this,o)};return n},m.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)n=arguments[e],t[n]=m.bind(t[n],t);return t},m.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return m.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:m.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=m.now();s||!1!==n.leading||(s=c);var u=e-(c-s);return r=this,i=arguments,u<=0||u>e?(a&&(clearTimeout(a),a=null),s=c,o=t.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(l,u)),o}},m.debounce=function(t,e,n){var r,i,o,a,s,l=function(){var c=m.now()-a;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=m.now();var c=n&&!r;return r||(r=setTimeout(l,e)),c&&(s=t.apply(o,i),o=i=null),s}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function L(t,e){var n=P.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||o,a="constructor";for(m.has(t,a)&&!m.contains(e,a)&&e.push(a);n--;)(a=P[n])in t&&t[a]!==i[a]&&!m.contains(e,a)&&e.push(a)}m.keys=function(t){if(!m.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return O&&L(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return O&&L(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=y(e,n);for(var r,i=m.keys(t),o=i.length,a={},s=0;s<o;s++)r=i[s],a[r]=e(t[r],r,t);return a},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()},m.extend=b(m.allKeys),m.extendOwn=m.assign=b(m.keys),m.findKey=function(t,e,n){e=y(e,n);for(var r,i=m.keys(t),o=0,a=i.length;o<a;o++)if(r=i[o],e(t[r],r,t))return r},m.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;m.isFunction(e)?(i=m.allKeys(a),r=v(e,n)):(i=M(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=i.length;s<l;s++){var c=i[s],u=a[c];r(u,c,a)&&(o[c]=u)}return o},m.omit=function(t,e,n){if(m.isFunction(e))e=m.negate(e);else{var r=m.map(M(arguments,!1,!1,1),String);e=function(t,e){return!m.contains(r,e)}}return m.pick(t,e,n)},m.defaults=b(m.allKeys,!0),m.create=function(t,e){var n=w(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var D=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var i=c.call(t);if(i!==c.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(m.isFunction(a)&&a instanceof a&&m.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),o){if((l=t.length)!==e.length)return!1;for(;l--;)if(!D(t[l],e[l],n,r))return!1}else{var u,d=m.keys(t);if(l=d.length,m.keys(e).length!==l)return!1;for(;l--;)if(u=d[l],!m.has(e,u)||!D(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0};m.isEqual=function(t,e){return D(t,e)},m.isEmpty=function(t){return null==t||(C(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===c.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){m["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===c.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&u.call(t,e)},m.noConflict=function(){return t._=r,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=_,m.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=v(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=m.invert(N),F=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=F(N),m.unescape=F(R),m.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),m.isFunction(r)?r.call(t):r};var B=0;m.uniqueId=function(t){var e=++B+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,U=function(t){return"\\"+q[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r=RegExp([(e.escape||j).source,(e.interpolate||j).source,(e.evaluate||j).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(z,U),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,m)},l=e.variable||"obj";return s.source="function("+l+"){\n"+o+"}",s},m.chain=function(t){var e=m(t);return e._chain=!0,e};var $=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),$(this,n.apply(m,t))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],$(this,n)}}),m.each(["concat","join","slice"],function(t){var e=i[t];m.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped}}).call(this)},{}],40:[function(t,e,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t){for(var e,n=Object.keys(o),s=0,l=n.length;s<l;s++){var c=n[s],u=o[c].exports;if(u===t||u.default===t){e=c;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},s=0,l=n.length;s<l;s++){var c=n[s];d[c]=c}i[e]=[Function(["require","module","exports"],"("+t+")(self)"),d]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[e]=e,i[f]=[Function(["require"],"var f = require("+a(e)+");(f.default ? f.default : f)(self);"),p];var h="("+r+")({"+Object.keys(i).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(f)+"])",g=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(g.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}],41:[function(t,e,n){"use strict";var r=t("ngraph.graph"),i=t("underscore"),o=(t("Q"),t("ngraph.asyncforce"));e.exports=function(t){return function(t){if(t){var e={async:{maxIterations:1e3,stepsPerCycle:30,waitForStep:!1},physics:{springLength:100,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,iterations:1e4,fit:!0,stableThreshold:9e-6},iterations:1e4,refreshInterval:16,refreshIterations:10,stableThreshold:2,animate:!0,fit:!0},n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t};return a.prototype.l=o,a.prototype.g=r,a.prototype.run=function(){var t=this;t.trigger({type:"layoutstart",layout:t});var e=this.options,n=this.layoutOptions,r=this.g(),o=e.cy,a=e.eles,s=a.nodes(),l=s.parents();s=(s=s.difference(l)).filterFn(function(t){return t.connectedEdges().length>0});var c,u=a.edges(),d={},f=!0,p=function(e){s.positions(function(t,e){if("number"!=typeof t&&(e=t),!e.data("dragging"))return c.getNodePosition(e.id())}),n.fit&&o.fit(n.padding),f&&(t.trigger("layoutready"),f=!1)};r.on("changed",function(t){}),i.each(s,function(t,e){t.on("tapstart",function(t){t.target.data("dragging",!0)}),t.on("tapend",function(t){t.target.removeData("dragging")}),t.on("position","node[dragging]",function(t){c.setNodePosition&&t.target.data("dragging")&&c.setNodePosition(t.target.data().id)}),r.addNode(t.data().id)}),i.each(u,function(t,e){d[t.data().source+":"+t.data().target]||d[t.data().target+":"+t.data().source]||(d[t.data().source+":"+t.data().target]=t,r.addLink(t.data().source,t.data().target))}),c=this.l(r,n),i.each(s,function(t,e){var n=t.data();n.pin?(c.pinNode(n.id,!0),t.removeData("pin"),t.data("unpin",!0)):n.unpin&&(c.pinNode(n.id,!1),t.removeData("unpin"))});var h,g=n.iterations;n.async&&n.async.maxIterations&&(g=(n.async.maxIterations/n.async.stepsPerCycle).toFixed(0)),this.on("layoutstop",function(){n.iterations=0}),c.on("stable",function(){console.log("got Stable event"),g=0}),n.async||(n.refreshInterval=0),c.on("cycle",function(e,r){if(n.animate&&p(),r)return p(),t.trigger({type:"layoutstop",layout:t}),void t.trigger({type:"layoutready",layout:t});m(r)});var m=function(e){0==g&&e?(p(),t.trigger({type:"layoutstop",layout:t}),t.trigger({type:"layoutready",layout:t})):h&&0!=g||(g--,h=null,(e=c.step())&&(g=0),g||m())};return m(),this},a.prototype.stop=function(){return this.thread&&this.thread.stop(),this.trigger("layoutstop"),this},a.prototype.destroy=function(){return this.thread&&this.thread.stop(),this},a}function a(t){this.options=n({},e,t),this.layoutOptions=n({},e,t),delete this.layoutOptions.cy,delete this.layoutOptions.eles}}(t)}},{Q:1,"ngraph.asyncforce":2,"ngraph.graph":24,underscore:39}],42:[function(t,e,n){"use strict";!function(){var n=t("./impl.js"),r=function(t){var e=n(t);t("layout","cytoscape-ngraph.forcelayout",e)};void 0!==e&&e.exports&&(e.exports=r),"undefined"!=typeof cytoscape&&r(cytoscape)}()},{"./impl.js":41}]},{},[42])(42)}).call(this,n(634).setImmediate)},function(t,e,n){var r;!function(){"use strict";var i,o={container:!1,viewLiveFramerate:0,dblClickDelay:200,removeCustomContainer:!0,rerenderDelay:500},a=function(){var t="Expected a function",e=Math.max,n=Date.now||function(){return(new Date).getTime()};return function(r,i,o){var a,s,l,c,u,d,f,p=0,h=!1,g=!0;if("function"!=typeof r)throw new TypeError(t);if(i=i<0?0:+i||0,!0===o){var m=!0;g=!1}else(function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)})(o)&&(m=!!o.leading,h="maxWait"in o&&e(+o.maxWait||0,i),g="trailing"in o?!!o.trailing:g);function v(t,e){e&&clearTimeout(e),s=d=f=void 0,t&&(p=n(),l=r.apply(u,a),d||s||(a=u=void 0))}function y(){var t=i-(n()-c);t<=0||t>i?v(f,s):d=setTimeout(y,t)}function b(){v(g,d)}function w(){if(a=arguments,c=n(),u=this,f=g&&(d||!m),!1===h)var t=m&&!d;else{s||m||(p=c);var e=h-(c-p),o=e<=0||e>h;o?(s&&(s=clearTimeout(s)),p=c,l=r.apply(u,a)):s||(s=setTimeout(b,e))}return o&&d?d=clearTimeout(d):d||i===h||(d=setTimeout(y,i)),t&&(o=!0,l=r.apply(u,a)),!o||d||s||(a=u=void 0),l}return w.cancel=function(){d&&clearTimeout(d),s&&clearTimeout(s),p=0,s=d=f=void 0},w}}(),s=function(t,e){this._init(t,e)};s.prototype={constructor:s,bb:function(){var t=this.cy.elements().boundingBox();return 0===t.w||0===t.h?{x1:0,x2:1/0,y1:0,y2:1/0,w:1/0,h:1/0}:t},_init:function(t,e){this.$element=i(t.container()),this.options=i.extend({},o,e),this.cy=t,this.boundingBox=this.bb(),this.width=this.$element.width(),this.height=this.$element.height(),this._initPanel(),this._initThumbnail(),this._initView(),this._initOverlay()},destroy:function(){this._removeEventsHandling(),this.options.container&&!this.options.removeCustomContainer?this.$panel.empty():this.$panel.remove(),this.$element.removeData("navigator")},_initPanel:function(){var t=this.options;if(t.container)if(t.container instanceof jQuery){if(!(t.container.length>0))return void i.error("Container for jquery.cyNavigator is empty");this.$panel=t.container.first()}else{if(!(i(t.container).length>0))return void i.error("There is no any element matching your selector for jquery.cyNavigator");this.$panel=i(t.container).first()}else this.$panel=i('<div class="cytoscape-navigator"/>'),i("body").append(this.$panel);this._setupPanel(),this.cy.on("resize",i.proxy(this.resize,this))},_setupPanel:function(){this.options;this.panelWidth=this.$panel.width(),this.panelHeight=this.$panel.height()},_initThumbnail:function(){this.$thumbnail=i("<img/>"),this.$panel.append(this.$thumbnail),this._setupThumbnailSizes(),this._setupThumbnail()},_setupThumbnail:function(){this._updateThumbnailImage()},_setupThumbnailSizes:function(){this.boundingBox=this.bb(),this.thumbnailZoom=Math.min(this.panelHeight/this.boundingBox.h,this.panelWidth/this.boundingBox.w),this.thumbnailPan={x:(this.panelWidth-this.thumbnailZoom*(this.boundingBox.x1+this.boundingBox.x2))/2,y:(this.panelHeight-this.thumbnailZoom*(this.boundingBox.y1+this.boundingBox.y2))/2}},_checkThumbnailSizesAndUpdate:function(){var t=this.thumbnailZoom,e=this.thumbnailPan.x,n=this.thumbnailPan.y;this._setupThumbnailSizes(),t!=this.thumbnailZoom||e!=this.thumbnailPan.x||n!=this.thumbnailPan.y?(this._setupThumbnail(),this._setupView()):this._updateThumbnailImage()},_initView:function(){this.$view=i('<div class="cytoscape-navigatorView"/>'),this.$panel.append(this.$view),this.viewBorderTop=parseInt(this.$view.css("border-top-width"),10),this.viewBorderRight=parseInt(this.$view.css("border-right-width"),10),this.viewBorderBottom=parseInt(this.$view.css("border-bottom-width"),10),this.viewBorderLeft=parseInt(this.$view.css("border-left-width"),10),this.viewBorderHorizontal=this.viewBorderLeft+this.viewBorderRight,this.viewBorderVertical=this.viewBorderTop+this.viewBorderBottom,this._setupView(),this.cy.on("zoom pan",i.proxy(this._setupView,this))},_setupView:function(){if(!this.viewLocked){var t=this.cy.zoom(),e=this.cy.pan();this.viewW=this.width/t*this.thumbnailZoom,this.viewX=-e.x*this.viewW/this.width+this.thumbnailPan.x-this.viewBorderLeft,this.viewH=this.height/t*this.thumbnailZoom,this.viewY=-e.y*this.viewH/this.height+this.thumbnailPan.y-this.viewBorderTop,this.$view.width(this.viewW).height(this.viewH).css({position:"absolute",left:this.viewX,top:this.viewY})}},_initOverlay:function(){this.$overlay=i('<div class="cytoscape-navigatorOverlay"/>'),this.$panel.append(this.$overlay),this.overlayHookPointX=0,this.overlayHookPointY=0,this._initEventsHandling()},resize:function(){this.width=this.$element.width(),this.height=this.$element.height(),this._thumbnailSetup=!1,this._setupPanel(),this._checkThumbnailSizesAndUpdate(),this._setupView()},_initEventsHandling:function(){var t,e,n=this,r=["mousedown","mousewheel","DOMMouseScroll","touchstart"],o=["mouseup","mouseout","mousemove","touchmove","touchend"];this.$overlay.on(r.join(" "),t=function(t){if("touchstart"==t.type&&(t.offsetX=n.viewX+n.viewW/2,t.offsetY=n.viewY+n.viewH/2),void 0===t.offsetX||void 0===t.offsetY){var e=i(t.target).offset();t.offsetX=t.pageX-e.left,t.offsetY=t.pageY-e.top}return"mousedown"==t.type||"touchstart"==t.type?n._eventMoveStart(t):"mousewheel"!=t.type&&"DOMMouseScroll"!=t.type||n._eventZoom(t),!1}),i(window).on(o.join(" "),e=function(t){if(n.overlayInMovement){if("touchend"==t.type?(t.offsetX=n.viewX+n.viewW/2,t.offsetY=n.viewY+n.viewH/2):"touchmove"==t.type&&(t.pageX=t.originalEvent.touches[0].pageX,t.pageY=t.originalEvent.touches[0].pageY),void 0===t.offsetX||void 0===t.offsetY){var e=i(t.target).offset();t.offsetX=t.pageX-e.left,t.offsetY=t.pageY-e.top}if(t.target!==n.$overlay[0]){e=i(t.target).offset();var r=n.$overlay.offset();if(!e||!r)return!1;t.offsetX=t.offsetX-r.left+e.left,t.offsetY=t.offsetY-r.top+e.top}return"mousemove"==t.type||"touchmove"==t.type?n._eventMove(t):"mouseup"!=t.type&&"touchend"!=t.type||n._eventMoveEnd(t),!1}}),this._removeEventsHandling=function(){this.$overlay.off(r.join(" "),t),i(window).off(o.join(" "),e)}},_eventMoveStart:function(t){var e=(new Date).getTime();this.overlayLastMoveStartTime&&this.overlayLastMoveStartTime+this.options.dblClickDelay>e?(this.overlayLastMoveStartTime=0,this.overlayInMovement=!0,this.overlayHookPointX=this.viewW/2,this.overlayHookPointY=this.viewH/2,!1!==this.options.viewLiveFramerate?this._eventMove({offsetX:this.panelWidth/2,offsetY:this.panelHeight/2}):this._eventMoveEnd({offsetX:this.panelWidth/2,offsetY:this.panelHeight/2}),this.overlayInMovement=!1):(this.overlayLastMoveStartTime=e,this.overlayInMovement=!0,this.viewLocked=!0,t.offsetX>=this.viewX&&t.offsetX<=this.viewX+this.viewW&&t.offsetY>=this.viewY&&t.offsetY<=this.viewY+this.viewH?(this.overlayHookPointX=t.offsetX-this.viewX,this.overlayHookPointY=t.offsetY-this.viewY):(this.overlayHookPointX=this.viewW/2,this.overlayHookPointY=this.viewH/2,this._eventMove(t)))},_eventMove:function(t){var e=this;this._checkMousePosition(t),this.overlayInMovement&&(this.viewX=t.offsetX-this.overlayHookPointX,this.viewY=t.offsetY-this.overlayHookPointY,this.$view.css("left",this.viewX),this.$view.css("top",this.viewY),!1!==this.options.viewLiveFramerate&&(0==this.options.viewLiveFramerate?this._moveCy():this.overlayTimeout||(this.overlayTimeout=setTimeout(function(){e._moveCy(),e.overlayTimeout=!1},1e3/this.options.viewLiveFramerate))))},_checkMousePosition:function(t){t.offsetX>this.viewX&&t.offsetX<this.viewX+this.viewBorderHorizontal+this.viewW&&t.offsetY>this.viewY&&t.offsetY<this.viewY+this.viewBorderVertical+this.viewH?this.$panel.addClass("mouseover-view"):this.$panel.removeClass("mouseover-view")},_eventMoveEnd:function(t){this.viewLocked=!1,this.$panel.removeClass("mouseover-view"),this.overlayInMovement&&(this._eventMove(t),!1===this.options.viewLiveFramerate&&this._moveCy(),this.overlayInMovement=!1)},_eventZoom:function(t){var e=Math.pow(10,t.originalEvent.wheelDeltaY/1e3||t.originalEvent.wheelDelta/1e3||t.originalEvent.detail/-32),n={left:t.offsetX,top:t.offsetY};this.cy.zoomingEnabled()&&this._zoomCy(e,n)},_updateThumbnailImage:function(){var t=this;if(!this._thumbnailUpdating){this._thumbnailUpdating=!0;this.cy.onRender(function(t,e,n){var r=!0,i=!0;return!1===n?r=!1:typeof n==typeof{}&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),(n=n||{}).leading=r,n.maxWait=e,n.trailing=i,a(t,e,n)}(function(){t._checkThumbnailSizesAndUpdate(),t._setupView();var e=t.$thumbnail,n=e[0],r=t.panelWidth,i=t.panelHeight,o=t.boundingBox,a=Math.min(r/o.w,i/o.h),s=(r-a*o.w)/2,l=(i-a*o.h)/2,c=t.cy.png({full:!0,scale:a});c.indexOf("image/png")<0?n.removeAttribute("src"):n.setAttribute("src",c),e.css({position:"absolute",left:s+"px",top:l+"px"})},t.options.rerenderDelay))}},_moveCy:function(){this.cy.pan({x:-(this.viewX+this.viewBorderLeft-this.thumbnailPan.x)*this.width/this.viewW,y:-(this.viewY+this.viewBorderLeft-this.thumbnailPan.y)*this.height/this.viewH})},_zoomCy:function(t,e){var n;n={x:this.width/2,y:this.height/2},this.cy.zoom({level:this.cy.zoom()*t,renderedPosition:n})}};var l=function(t,e){t&&e&&(i=e,t("core","navigator",function(t){return new s(this,t)}))};void 0!==t&&t.exports?t.exports=function(t,e){l(t,e||n(62))}:void 0===(r=function(){return l}.call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&l(cytoscape,jQuery)}()},function(t,e,n){var r;
/*!
Copyright (c) The Cytoscape Consortium

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the “Software”), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
of the Software, and to permit persons to whom the Software is furnished to do
so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/!function(){"use strict";var i=function(t,e){t&&e&&(e.fn.cyPanzoom=e.fn.cytoscapePanzoom=function(n){return a.apply(this,[n,t,e]),this},t("core","panzoom",function(n){return a.apply(this,[n,t,e]),this}))},o={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"},a=function(t,e,n){var r=this,i=n.extend(!0,{},o,t),a=t,s={destroy:function(){var t=n(r.container()).find(".cy-panzoom");t.data("winbdgs").forEach(function(t){n(window).unbind(t.evt,t.fn)}),t.data("cybdgs").forEach(function(t){r.off(t.evt,t.fn)}),t.remove()},init:function(){window;return n(r.container()).each(function(){var t=n(this);t.cytoscape=e;var o=[],a=n(window),s=function(t,e){o.push({evt:t,fn:e}),a.bind(t,e)},l=function(t,e){for(var n=0;n<o.length;n++){var r=o[n];if(r.evt===t&&r.fn===e){o.splice(n,1);break}}a.unbind(t,e)},c=[],u=n('<div class="cy-panzoom"></div>');t.prepend(u),u.css("position","absolute"),u.data("winbdgs",o),u.data("cybdgs",c),i.zoomOnly&&u.addClass("cy-panzoom-zoom-only");var d=n('<div class="cy-panzoom-zoom-in cy-panzoom-zoom-button"><span class="icon '+i.zoomInIcon+'"></span></div>');u.append(d);var f=n('<div class="cy-panzoom-zoom-out cy-panzoom-zoom-button"><span class="icon '+i.zoomOutIcon+'"></span></div>');u.append(f);var p=n('<div class="cy-panzoom-reset cy-panzoom-zoom-button"><span class="icon '+i.resetIcon+'"></span></div>');u.append(p);var h=n('<div class="cy-panzoom-slider"></div>');u.append(h),h.append('<div class="cy-panzoom-slider-background"></div>');var g=n('<div class="cy-panzoom-slider-handle"><span class="icon '+i.sliderHandleIcon+'"></span></div>');h.append(g);var m=n('<div class="cy-panzoom-no-zoom-tick"></div>');h.append(m);var v=n('<div class="cy-panzoom-panner"></div>');u.append(v);var y=n('<div class="cy-panzoom-panner-handle"></div>');v.append(y);var b=n('<div class="cy-panzoom-pan-up cy-panzoom-pan-button"></div>'),w=n('<div class="cy-panzoom-pan-down cy-panzoom-pan-button"></div>'),_=n('<div class="cy-panzoom-pan-left cy-panzoom-pan-button"></div>'),x=n('<div class="cy-panzoom-pan-right cy-panzoom-pan-button"></div>');v.append(b).append(w).append(_).append(x);var S=n('<div class="cy-panzoom-pan-indicator"></div>');function C(){clearInterval(k),l("mousemove",L),S.hide()}function E(){r.pan(),r.zoom();T=t.width()/2,M=t.height()/2}v.append(S);var T,M,k,A=!1;function I(){A=!0,E()}function O(){A=!1}function P(t){A||E(),r.zoom({level:t,renderedPosition:{x:T,y:M}})}var L=function(t){t.stopPropagation(),t.preventDefault(),clearInterval(k);var e=function(t){var e={x:t.originalEvent.pageX-v.offset().left-v.width()/2,y:t.originalEvent.pageY-v.offset().top-v.height()/2},n=i.panDragAreaSize,r=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.min(r/n,1);return r<i.panInactiveArea?{x:NaN,y:NaN}:(e={x:e.x/r,y:e.y/r},o=Math.max(i.panMinPercentSpeed,o),{x:-1*e.x*(o*i.panDistance),y:-1*e.y*(o*i.panDistance)})}(t);isNaN(e.x)||isNaN(e.y)?S.hide():(!function(t){var e=t,n=Math.sqrt(e.x*e.x+e.y*e.y),r=-1*e.x/n,o=-1*e.y/n,a=v.width(),s=v.height(),l=n/i.panDistance,c=Math.max(i.panIndicatorMinOpacity,l),u=255-Math.round(255*c);S.show().css({left:a/2*r+a/2,top:s/2*o+s/2,background:"rgb("+u+", "+u+", "+u+")"})}(e),k=setInterval(function(){r.panBy(e)},i.panSpeed))};y.bind("mousedown",function(t){L(t),s("mousemove",L)}),y.bind("mouseup",function(){C()}),s("mouseup blur",function(){C()}),h.bind("mousedown",function(){return!1});var D,N,R=!1,F=2;function B(t,e){void 0===e&&(e=0);var n=F,r=0+n,o=h.height()-g.height()-2*n,a=t.pageY-h.offset().top-e;a<r&&(a=r),a>o&&(a=o);var s=1-(a-r)/(o-r);g.css("top",a);var l=i.minZoom,c=i.maxZoom,u=Math.log(l)/Math.log(c),d=(1-u)*s+u,f=Math.pow(c,d);f<l?f=l:f>c&&(f=c),P(f)}function j(){var t=r.zoom(),e=i.minZoom,n=i.maxZoom,o=Math.log(e)/Math.log(n),a=1-(Math.log(t)/Math.log(n)-o)/(1-o),s=F,l=h.height()-g.height()-2*F,c=a*(l-s);c<s&&(c=s),c>l&&(c=l),g.css("top",c)}function q(t,e){var n;t.bind("mousedown",function(t){if(t.preventDefault(),t.stopPropagation(),0==t.button){var o=function(){var t=r.zoom(),n=r.zoom()*e;n<i.minZoom&&(n=i.minZoom),n>i.maxZoom&&(n=i.maxZoom),n==i.maxZoom&&t==i.maxZoom||n==i.minZoom&&t==i.minZoom||P(n)};return I(),o(),n=setInterval(o,i.zoomDelay),!1}}),s("mouseup blur",function(){clearInterval(n),O()})}g.bind("mousedown",D=function(t){var e=t.target===g[0]?t.offsetY:0;R=!0,I(),g.addClass("active");var n=0;return s("mousemove",N=function(t){var r=+new Date;return r>n+10&&(n=r,B(t,e),!1)}),s("mouseup",function(){l("mousemove",N),R=!1,g.removeClass("active"),O()}),!1}),h.bind("mousedown",function(t){t.target!==g[0]&&(D(t),B(t))}),j(),function(t,e){c.push({evt:t,fn:e}),r.on(t,e)}("zoom",function(){R||j()}),function(){var t=i.minZoom,e=i.maxZoom,n=Math.log(t)/Math.log(e),r=1-(Math.log(1)/Math.log(e)-n)/(1-n);if(r>1||r<0)m.hide();else{var o=F,a=h.height()-g.height()-2*F,s=r*(a-o);s<o&&(s=o),s>a&&(s=a),m.css("top",s)}}(),q(d,1+i.zoomFactor),q(f,1-i.zoomFactor),p.bind("mousedown",function(t){if(0==t.button){var e=i.fitSelector?r.elements(i.fitSelector):r.elements();if(0===e.size())r.reset();else("function"==typeof i.animateOnFit?i.animateOnFit.call():i.animateOnFit)?r.animate({fit:{eles:e,padding:i.fitPadding}},{duration:i.fitAnimationDuration}):r.fit(e,i.fitPadding);return!1}})})}};return s[a]?s[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?(n.error("No such function `"+a+"` for jquery.cytoscapePanzoom"),n(this)):s.init.apply(this,arguments)};void 0!==t&&t.exports?t.exports=function(t,e){i(t,e||n(62))}:void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r),"undefined"!=typeof cytoscape&&"undefined"!=typeof jQuery&&i(cytoscape,jQuery)}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=function(t){"uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now own each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId);void 0===t.multigraph&&(t.multigraph=!1);var e="function"==typeof Object.create?Object.create(null):{},n=[],l={},c=0,u=0,d=Object.keys?A:I,f=t.multigraph?function(t,e,n){var r=s(t,e),i=l.hasOwnProperty(r);if(i||E(t,e)){i||(l[r]=0);var o="@"+ ++l[r];r=s(t+o,e+o)}return new a(t,e,n,r)}:function(t,e,n){var r=s(t,e);return new a(t,e,n,r)},p=[],h=T,g=T,m=T,v=T,y={addNode:_,addLink:function(t,e,r){m();var i=x(t)||_(t),a=x(e)||_(e),s=f(t,e,r);n.push(s),o(i,s),t!==e&&o(a,s);return h(s,"add"),v(),s},removeLink:C,removeNode:S,getNode:x,getNodesCount:function(){return c},getLinksCount:function(){return n.length},getLinks:function(t){var e=x(t);return e?e.links:null},forEachNode:d,forEachLinkedNode:function(t,n,r){var i=x(t);if(i&&i.links&&"function"==typeof n)return r?function(t,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(o.fromId===n&&r(e[o.toId],o))return!0}}(i.links,t,n):function(t,n,r){for(var i=0;i<t.length;++i){var o=t[i],a=o.fromId===n?o.toId:o.fromId;if(r(e[a],o))return!0}}(i.links,t,n)},forEachLink:function(t){var e,r;if("function"==typeof t)for(e=0,r=n.length;e<r;++e)t(n[e])},beginUpdate:m,endUpdate:v,clear:function(){m(),d(function(t){S(t.id)}),v()},hasLink:E,hasNode:x,getLink:E};return r(y),function(){var t=y.on;y.on=function(){return y.beginUpdate=m=M,y.endUpdate=v=k,h=b,g=w,y.on=t,t.apply(y,arguments)}}(),y;function b(t,e){p.push({link:t,changeType:e})}function w(t,e){p.push({node:t,changeType:e})}function _(t,n){if(void 0===t)throw new Error("Invalid node identifier");m();var r=x(t);return r?(r.data=n,g(r,"update")):(r=new function(t,e){this.id=t,this.links=null,this.data=e}(t,n),c++,g(r,"add")),e[t]=r,v(),r}function x(t){return e[t]}function S(t){var n=x(t);if(!n)return!1;m();var r=n.links;if(r){n.links=null;for(var i=0;i<r.length;++i)C(r[i])}return delete e[t],c--,g(n,"remove"),v(),!0}function C(t){if(!t)return!1;var e=i(t,n);if(e<0)return!1;m(),n.splice(e,1);var r=x(t.fromId),o=x(t.toId);return r&&(e=i(t,r.links))>=0&&r.links.splice(e,1),o&&(e=i(t,o.links))>=0&&o.links.splice(e,1),h(t,"remove"),v(),!0}function E(t,e){var n,r=x(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var i=r.links[n];if(i.fromId===t&&i.toId===e)return i}return null}function T(){}function M(){u+=1}function k(){0===(u-=1)&&p.length>0&&(y.fire("changed",p),p.length=0)}function A(t){if("function"==typeof t)for(var n=Object.keys(e),r=0;r<n.length;++r)if(t(e[n[r]]))return!0}function I(t){var n;if("function"==typeof t)for(n in e)if(t(e[n]))return!0}};var r=n(659);function i(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function o(t,e){t.links?t.links.push(e):t.links=[e]}function a(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function s(t,e){return t.toString()+"👉 "+e.toString()}},function(t,e,n){t.exports=function(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var o=n(1150)(e),a=function(e){var n=t.getLinks(e);return n?1+n.length/3:1};e&&"function"==typeof e.nodeMass&&(a=e.nodeMass);var s=Object.create(null),l={},c=0,u=o.settings.springTransform||i;c=0,t.forEachNode(function(t){h(t.id),c+=1}),t.forEachLink(m),t.on("changed",p);var d=!1,f={step:function(){if(0===c)return!0;var t=o.step();f.lastMove=t,f.fire("step");var e=t/c,n=e<=.01;return d!==n&&(d=n,function(t){f.fire("stable",t)}(n)),n},getNodePosition:function(t){return b(t).pos},setNodePosition:function(t){var e=b(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=l[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return o.getBBox()},forEachBody:function(t){Object.keys(s).forEach(function(e){t(s[e],e)})},pinNode:function(t,e){var n=b(t.id);n.isPinned=!!e},isNodePinned:function(t){return b(t.id).isPinned},dispose:function(){t.off("changed",p),f.fire("disposed")},getBody:function(t){return s[t]},getSpring:function(e,n){var r;if(void 0===n)r="object"!=typeof e?e:e.id;else{var i=t.hasLink(e,n);if(!i)return;r=i.id}return l[r]},simulator:o,graph:t,lastMove:0};return r(f),f;function p(e){for(var n=0;n<e.length;++n){var r=e[n];"add"===r.changeType?(r.node&&h(r.node.id),r.link&&m(r.link)):"remove"===r.changeType&&(r.node&&g(r.node),r.link&&v(r.link))}c=t.getNodesCount()}function h(e){var n=s[e];if(!n){var r=t.getNode(e);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var a=function(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],o=i.fromId!==t.id?s[i.fromId]:s[i.toId];o&&o.pos&&e.push(o)}return e}(r);i=o.getBestNewBodyPosition(a)}(n=o.addBodyAt(i)).id=e,s[e]=n,y(e),function(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}(r)&&(n.isPinned=!0)}}function g(t){var e=t.id,n=s[e];n&&(s[e]=null,delete s[e],o.removeBody(n))}function m(t){y(t.fromId),y(t.toId);var e=s[t.fromId],n=s[t.toId],r=o.addSpring(e,n,t.length);u(t,r),l[t.id]=r}function v(e){var n=l[e.id];if(n){var r=t.getNode(e.fromId),i=t.getNode(e.toId);r&&y(r.id),i&&y(i.id),delete l[e.id],o.removeSpring(n)}}function y(t){var e=s[t];if(e.mass=a(t),Number.isNaN(e.mass))throw new Error("Node mass should be a number")}function b(t){var e=s[t];return e||(h(t),e=s[t]),e}},t.exports.simulator=n(1150);var r=n(659);function i(){}},function(t,e){t.exports=function(t,e,n,r,i){this.from=t,this.to=e,this.length=n,this.coeff=r,this.weight="number"==typeof i?i:1}},function(t,e,n){function r(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function i(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}t.exports=function(t){(t=t||{}).gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var e=n(294).random(1984),o=n(3234),a=n(3235),s=n(3236),l=t.gravity,c=[],u=new a,d=t.theta,f=[],p=0,h=g();return{insertBodies:function(t){var e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE,a=t.length;e=a;for(;e--;){var s=t[e].pos.x,l=t[e].pos.y;s<n&&(n=s),s>i&&(i=s),l<r&&(r=l),l>o&&(o=l)}var c=i-n,u=o-r;c>u?o=r+c:i=n+u;p=0,(h=g()).left=n,h.right=i,h.top=r,h.bottom=o,(e=a-1)>=0&&(h.body=t[e]);for(;e--;)m(t[e])},getRoot:function(){return h},updateBodyForce:function(t){var n,r,i,o,a=c,s=0,u=0,f=1,p=0,g=1;a[0]=h;for(;f;){var m=a[p],v=m.body;f-=1,p+=1;var y=v!==t;v&&y?(r=v.pos.x-t.pos.x,i=v.pos.y-t.pos.y,0===(o=Math.sqrt(r*r+i*i))&&(r=(e.nextDouble()-.5)/50,i=(e.nextDouble()-.5)/50,o=Math.sqrt(r*r+i*i)),n=l*v.mass*t.mass/(o*o*o),s+=n*r,u+=n*i):y&&(r=m.massX/m.mass-t.pos.x,i=m.massY/m.mass-t.pos.y,0===(o=Math.sqrt(r*r+i*i))&&(r=(e.nextDouble()-.5)/50,i=(e.nextDouble()-.5)/50,o=Math.sqrt(r*r+i*i)),(m.right-m.left)/o<d?(n=l*m.mass*t.mass/(o*o*o),s+=n*r,u+=n*i):(m.quad0&&(a[g]=m.quad0,f+=1,g+=1),m.quad1&&(a[g]=m.quad1,f+=1,g+=1),m.quad2&&(a[g]=m.quad2,f+=1,g+=1),m.quad3&&(a[g]=m.quad3,f+=1,g+=1)))}t.force.x+=s,t.force.y+=u},options:function(t){return t?("number"==typeof t.gravity&&(l=t.gravity),"number"==typeof t.theta&&(d=t.theta),this):{gravity:l,theta:d}}};function g(){var t=f[p];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new o,f[p]=t),++p,t}function m(t){for(u.reset(),u.push(h,t);!u.isEmpty();){var n=u.pop(),o=n.node,a=n.body;if(o.body){var l=o.body;if(o.body=null,s(l.pos,a.pos)){var c=3;do{var d=e.nextDouble(),f=(o.right-o.left)*d,p=(o.bottom-o.top)*d;l.pos.x=o.left+f,l.pos.y=o.top+p,c-=1}while(c>0&&s(l.pos,a.pos));if(0===c&&s(l.pos,a.pos))return}u.push(o,l),u.push(o,a)}else{var m=a.pos.x,v=a.pos.y;o.mass=o.mass+a.mass,o.massX=o.massX+a.mass*m,o.massY=o.massY+a.mass*v;var y=0,b=o.left,w=(o.right+b)/2,_=o.top,x=(o.bottom+_)/2;m>w&&(y+=1,b=w,w=o.right),v>x&&(y+=2,_=x,x=o.bottom);var S=r(o,y);S?u.push(S,a):((S=g()).left=b,S.top=_,S.right=w,S.bottom=x,S.body=a,i(o,y,S))}}}}},function(t,e){t.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},function(t,e){function n(){this.stack=[],this.popIdx=0}t.exports=n,n.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new function(t,e){this.node=t,this.body=e}(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},function(t,e){t.exports=function(t,e){var n=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);return n<1e-8&&r<1e-8}},function(t,e,n){t.exports=function(t,e){var r=n(294).random(42),i={x1:0,y1:0,x2:0,y2:0};return{box:i,update:function(){var e=t.length;if(0===e)return;var n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE;for(;e--;){var s=t[e];s.isPinned?(s.pos.x=s.prevPos.x,s.pos.y=s.prevPos.y):(s.prevPos.x=s.pos.x,s.prevPos.y=s.pos.y),s.pos.x<n&&(n=s.pos.x),s.pos.x>o&&(o=s.pos.x),s.pos.y<r&&(r=s.pos.y),s.pos.y>a&&(a=s.pos.y)}i.x1=n,i.x2=o,i.y1=r,i.y2=a},reset:function(){i.x1=i.y1=0,i.x2=i.y2=0},getBestNewPosition:function(t){var n=i,o=0,a=0;if(t.length){for(var s=0;s<t.length;++s)o+=t[s].pos.x,a+=t[s].pos.y;o/=t.length,a/=t.length}else o=(n.x1+n.x2)/2,a=(n.y1+n.y2)/2;var l=e.springLength;return{x:o+r.next(l)-l/2,y:a+r.next(l)-l/2}}}}},function(t,e,n){t.exports=function(t){var e=n(661),r={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y}};return n(660)(t=e(t,{dragCoeff:.02}),r,["dragCoeff"]),r}},function(t,e,n){t.exports=function(t){var e=n(661),r=n(294).random(42),i={update:function(e){var n=e.from,i=e.to,o=e.length<0?t.springLength:e.length,a=i.pos.x-n.pos.x,s=i.pos.y-n.pos.y,l=Math.sqrt(a*a+s*s);0===l&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,l=Math.sqrt(a*a+s*s));var c=l-o,u=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*c/l*e.weight;n.force.x+=u*a,n.force.y+=u*s,i.force.x-=u*a,i.force.y-=u*s}};return n(660)(t=e(t,{springCoeff:2e-4,springLength:80}),i,["springCoeff","springLength"]),i}},function(t,e){t.exports=function(t,e){var n,r=0,i=0,o=0,a=0,s=t.length;if(0===s)return 0;for(n=0;n<s;++n){var l=t[n],c=e/l.mass;l.velocity.x+=c*l.force.x,l.velocity.y+=c*l.force.y;var u=l.velocity.x,d=l.velocity.y,f=Math.sqrt(u*u+d*d);f>1&&(l.velocity.x=u/f,l.velocity.y=d/f),r=e*l.velocity.x,o=e*l.velocity.y,l.pos.x+=r,l.pos.y+=o,i+=Math.abs(r),a+=Math.abs(o)}return(i*i+a*a)/s}},function(t,e,n){var r=n(3242);t.exports=function(t){return new r.Body(t)}},function(t,e){function n(t,e){this.pos=new r(t,e),this.prevPos=new r(t,e),this.force=new r,this.velocity=new r,this.mass=1}function r(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function i(t,e,n){this.pos=new o(t,e,n),this.prevPos=new o(t,e,n),this.force=new o,this.velocity=new o,this.mass=1}function o(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}t.exports={Body:n,Vector2d:r,Body3d:i,Vector3d:o},n.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},r.prototype.reset=function(){this.x=this.y=0},i.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},o.prototype.reset=function(){this.x=this.y=this.z=0}},function(t,e,n){var r=n(294).randomIterator,i=n(294).random;t.exports=function(t,e){var n,o={step:function(){s=0,n.forEach(f),a=s/u.length},getClass:d,getChangeRate:function(){return a},forEachCluster:function(t){p().forEach(function(e,n){t({class:n,nodes:e})})},createClusterMap:p},a=1,s=0,l=i(42),c=new Map,u=[];return t.forEachNode(function(t){c.set(t.id,u.length),u.push(t.id)}),n=r(u,l),o;function d(t){return c.get(t)}function f(n){var r=function(n){var r=new Map,i=0,o=-1;if(t.forEachLinkedNode(n,function(t,a){if(function(t){return"in"===e?t:"out"!==e||!t}(a.toId===n)){var s=c.get(t.id),l=r.get(s)||0;(l+=1)>i&&(i=l,o=s),r.set(s,l)}}),-1===o)return c.get(n);return o}(n),i=c.get(n);r!==i&&(c.set(n,r),s+=1)}function p(){for(var t=new Map,e=0;e<u.length;++e){var n=u[e],r=d(n),i=t.get(r);i?i.push(n):t.set(r,[n])}return t}}},function(t,e,n){var r=n(3245),i=n(3246);t.exports=function(t){var e=r(t),n=i(e),o=n.modularity(),a=n.optimizeModularity(),s=n.modularity();return{canCoarse:function(){return a},originalModularity:o,newModularity:s,getClass:function(t){var r=e.getNodeIdFromNgraph(t);return n.getClass(r)}}}},function(t,e){t.exports=function(t){var e=t.getNodesCount(),n=0,r=[],i=new Map;return t.forEachNode(function(t){!function(t){var e=r.length;i.set(t,e),r.push({selfLoopsCount:0,weightedDegree:0,neighbours:null})}(t.id)}),t.forEachLink(function(t){var e=o(t.fromId),n=o(t.toId),i=function(t){return t?"number"==typeof t?t:"number"==typeof t.weight?t.weight:1:1}(t.data),s=r[e],l=r[n];e===n?(s.selfLoopsCount+=i,s.weightedDegree+=i):(a(s,n,i),a(l,e,i),s.weightedDegree+=i,l.weightedDegree+=i)}),n=function(){for(var t=0,n=0;n<e;++n)t+=s(n);return t}(),{nodeCount:e,weight:n,forEachNeigbour:function(t,e){var n=l(t);if(n.neighbours)for(var r=0;r<n.neighbours.length;++r){var i=n.neighbours[r];e(i.id,i.weight)}},getWeightedDegree:s,getSelfLoopsCount:function(t){return l(t).selfLoopsCount},getNodeIdFromNgraph:o};function o(t){var e=i.get(t);if(void 0===e)throw new Error("Unknown node id: "+t);return e}function a(t,e,n){var r={id:e,weight:n};t.neighbours?t.neighbours.push(r):t.neighbours=[r]}function s(t){return l(t).weightedDegree}function l(t){var e=r[t];if(!e)throw new Error("cannot find node with id: "+t);return e}}},function(t,e,n){var r=n(294),i=r.random(42),o=r.randomIterator;t.exports=function(t){for(var e=t.weight,n=t.nodeCount,r=new Float32Array(n),a=new Float32Array(n),s=new Uint32Array(n),l=0;l<n;++l)s[l]=l,r[l]=t.getWeightedDegree(l),a[l]=t.getSelfLoopsCount(l);return{modularity:p,optimizeModularity:function(){var e=function(){for(var t=[],e=0;e<n;++e)t[e]=e;return o(t,i).shuffle(),t}(),r=p(),a=r,l=!1;do{var h=0;a=r;for(var g=0;g<e.length;++g){var m=e[g],v=s[m],y=c(m),b=y.get(v);d(m,v,b);var w=t.getWeightedDegree(m),_=v,x=0;y.forEach(function(t,e){var n=u(m,t,e,w);n<=x||(_=e,x=n)});var S=y.get(_);f(m,_,S),_!==v&&(h+=1)}r=p(),h>0&&(l=!0)}while(h>0&&r-a>1e-6);return l},getClass:function(t){return s[t]}};function c(e){var n=new Map;return n.set(s[e],0),t.forEachNeigbour(e,function(t,e){var r=s[t],i=n.get(r)||0;n.set(r,i+e)}),n}function u(t,n,i,o){var a=r[i];return n-a*o/e}function d(e,n,i){r[n]-=t.getWeightedDegree(e),a[n]-=2*i+t.getSelfLoopsCount(e),s[e]=-1}function f(e,n,i){r[n]+=t.getWeightedDegree(e),a[n]+=2*i+t.getSelfLoopsCount(e),s[e]=n}function p(){for(var t=0,i=0;i<n;++i)if(r[i]>0){var o=r[i]/e;t+=a[i]/e-o*o}return t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3248);Object.defineProperty(e,"sankeyCircular",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(r).default}});var i=n(1151);Object.defineProperty(e,"sankeyCenter",{enumerable:!0,get:function(){return i.center}}),Object.defineProperty(e,"sankeyLeft",{enumerable:!0,get:function(){return i.left}}),Object.defineProperty(e,"sankeyRight",{enumerable:!0,get:function(){return i.right}}),Object.defineProperty(e,"sankeyJustify",{enumerable:!0,get:function(){return i.justify}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t,e,n=0,S=0,C=1,k=1,L=24,D=g,N=o.justify,R=m,B=v,j=32,U=2;function $(){var o={nodes:R.apply(null,arguments),links:B.apply(null,arguments)};!function(t){t.nodes.forEach(function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]});var e=(0,i.map)(t.nodes,D);t.links.forEach(function(t,n){t.index=n;var r=t.source,i=t.target;"object"!=typeof r&&(r=t.source=y(e,r)),"object"!=typeof i&&(i=t.target=y(e,i)),r.sourceLinks.push(t),i.targetLinks.push(t)})}(o),function(t,e){var n=[],r=0;t.links.forEach(function(t){!function t(e,n,r,i){if(b(e,i)==b(n,i))return!0;if(0==r.length)return!1;var o=function(t,e){for(var n=[],r=0;r<e.length;r++)t==e[r].source&&n.push(e[r]);return n}(n,r);if(0==o.length)return!1;for(var a=0;a<o.length;a++){var s=o[a];if(s.target===e)return!0;if(t(e,s.target,r,i))return!0}return!1}(t.source,t.target,n,e)?(t.circular=!1,n.push(t)):(t.circular=!0,t.circularLinkID=r,r+=1)})}(o,D),function(t,e){var n=0,r=0;t.links.forEach(function(i){i.circular&&(i.source.circularLinkType||i.target.circularLinkType?i.circularLinkType=i.source.circularLinkType?i.source.circularLinkType:i.target.circularLinkType:i.circularLinkType=n<r?"top":"bottom","top"==i.circularLinkType?n+=1:r+=1,t.nodes.forEach(function(t){b(t,e)!=b(i.source,e)&&b(t,e)!=b(i.target,e)||(t.circularLinkType=i.circularLinkType)}))}),t.links.forEach(function(t){t.circular&&(t.source.circularLinkType==t.target.circularLinkType&&(t.circularLinkType=t.source.circularLinkType),V(t,e)&&(t.circularLinkType=t.source.circularLinkType))})}(o,D),function(t){t.nodes.forEach(function(t){t.partOfCycle=!1,t.value=Math.max((0,r.sum)(t.sourceLinks,d),(0,r.sum)(t.targetLinks,d)),t.sourceLinks.forEach(function(e){e.circular&&(t.partOfCycle=!0,t.circularLinkType=e.circularLinkType)}),t.targetLinks.forEach(function(e){e.circular&&(t.partOfCycle=!0,t.circularLinkType=e.circularLinkType)})})}(o),function(t){var e,n,r;for(e=t.nodes,n=[],r=0;e.length;++r,e=n,n=[])e.forEach(function(t){t.depth=r,t.sourceLinks.forEach(function(t){n.indexOf(t.target)<0&&!t.circular&&n.push(t.target)})});for(e=t.nodes,n=[],r=0;e.length;++r,e=n,n=[])e.forEach(function(t){t.height=r,t.targetLinks.forEach(function(t){n.indexOf(t.source)<0&&!t.circular&&n.push(t.source)})});t.nodes.forEach(function(t){t.column=Math.floor(N.call(null,t,r))})}(o),function(o,a,s){var l=(0,i.nest)().key(function(t){return t.column}).sortKeys(r.ascending).entries(o.nodes).map(function(t){return t.values});(function(i){if(e){var a=1/0;l.forEach(function(t){var n=k*e/(t.length+1);a=n<a?n:a}),t=a}var s=(0,r.min)(l,function(e){return(k-S-(e.length-1)*t)/(0,r.sum)(e,d)});s*=x,o.links.forEach(function(t){t.width=t.value*s});var c=function(t){var e=0,n=0,i=0,o=0,a=(0,r.max)(t.nodes,function(t){return t.column});return t.links.forEach(function(t){t.circular&&("top"==t.circularLinkType?e+=t.width:n+=t.width,0==t.target.column&&(o+=t.width),t.source.column==a&&(i+=t.width))}),e=e>0?e+w+_:e,n=n>0?n+w+_:n,i=i>0?i+w+_:i,{top:e,bottom:n,left:o=o>0?o+w+_:o,right:i}}(o),u=function(t,e){var i=(0,r.max)(t.nodes,function(t){return t.column}),o=C-n,a=k-S,s=o+e.right+e.left,l=a+e.top+e.bottom,c=o/s,u=a/l;return n=n*c+e.left,C=0==e.right?C:C*c,S=S*u+e.top,k*=u,t.nodes.forEach(function(t){t.x0=n+t.column*((C-n-L)/i),t.x1=t.x0+L}),u}(o,c);s*=u,o.links.forEach(function(t){t.width=t.value*s}),l.forEach(function(t){var e=t.length;t.forEach(function(t,n){t.partOfCycle?0==E(t,i)?(t.y0=k/2+n,t.y1=t.y0+t.value*s):"top"==t.circularLinkType?(t.y0=S+n,t.y1=t.y0+t.value*s):(t.y0=k-t.value*s-n,t.y1=t.y0+t.value*s):0==c.top||0==c.bottom?(t.y0=(k-S)/e*n,t.y1=t.y0+t.value*s):(t.y0=(k-S)/2-e/2+n,t.y1=t.y0+t.value*s)})})})(s),v();for(var c=1,g=a;g>0;--g)m(c*=.99,s),v();function m(t,e){var n=l.length;l.forEach(function(i,o){var a=i.length,s=i[0].depth;i.forEach(function(i){if(i.sourceLinks.length||i.targetLinks.length)if(i.partOfCycle&&E(i,e)>0);else if(0==s&&1==a){var o=i.y1-i.y0;i.y0=k/2-o/2,i.y1=k/2+o/2}else if(s==n-1&&1==a){var o=i.y1-i.y0;i.y0=k/2-o/2,i.y1=k/2+o/2}else{var l=(0,r.mean)(i.sourceLinks,h),c=(0,r.mean)(i.targetLinks,p),u=((l&&c?(l+c)/2:l||c)-f(i))*t;i.y0+=u,i.y1+=u}})})}function v(){l.forEach(function(e){var n,r,i,o=S,a=e.length;for(e.sort(u),i=0;i<a;++i)n=e[i],(r=o-n.y0)>0&&(n.y0+=r,n.y1+=r),o=n.y1+t;if((r=o-t-k)>0)for(o=n.y0-=r,n.y1-=r,i=a-2;i>=0;--i)n=e[i],(r=n.y1+t-o)>0&&(n.y0-=r,n.y1-=r),o=n.y0})}}(o,j,D),function(t){t.nodes.forEach(function(t){t.sourceLinks.sort(c),t.targetLinks.sort(l)}),t.nodes.forEach(function(t){var e=t.y0,n=e,r=t.y1,i=r;t.sourceLinks.forEach(function(t){t.circular?(t.y0=r-t.width/2,r-=t.width):(t.y0=e+t.width/2,e+=t.width)}),t.targetLinks.forEach(function(t){t.circular?(t.y1=i-t.width/2,i-=t.width):(t.y1=n+t.width/2,n+=t.width)})})}(o);for(var a=0;a<4;a++)q(o,k,D),z(o,k,D),F(o,S,k,D),q(o,k,D),z(o,k,D);return function(t,e,n,i){var o=(0,r.min)(t.links,function(t){return t.source.y0});t.links.forEach(function(t){t.circular&&(t.circularPathData={})});var a=t.links.filter(function(t){return"top"==t.circularLinkType});a=M(a,e,i);var l=t.links.filter(function(t){return"bottom"==t.circularLinkType});l=M(l,e,i),t.links.forEach(function(r){if(r.circular){if(r.circularPathData.arcRadius=r.width+_,r.circularPathData.leftNodeBuffer=5,r.circularPathData.rightNodeBuffer=5,r.circularPathData.sourceWidth=r.source.x1-r.source.x0,r.circularPathData.sourceX=r.source.x0+r.circularPathData.sourceWidth,r.circularPathData.targetX=r.target.x0,r.circularPathData.sourceY=r.y0,r.circularPathData.targetY=r.y1,V(r,i)&&T(r))r.circularPathData.leftSmallArcRadius=_+r.width/2,r.circularPathData.leftLargeArcRadius=_+r.width/2,r.circularPathData.rightSmallArcRadius=_+r.width/2,r.circularPathData.rightLargeArcRadius=_+r.width/2,"bottom"==r.circularLinkType?(r.circularPathData.verticalFullExtent=r.source.y1+w+r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.rightLargeArcRadius):(r.circularPathData.verticalFullExtent=r.source.y0-w-r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.rightLargeArcRadius);else{var a=r.source.column,l=r.circularLinkType,c=t.links.filter(function(t){return t.source.column==a&&t.circularLinkType==l});"bottom"==r.circularLinkType?c.sort(I):c.sort(A);var u=0;c.forEach(function(t,n){t.circularLinkID==r.circularLinkID&&(r.circularPathData.leftSmallArcRadius=_+r.width/2+u,r.circularPathData.leftLargeArcRadius=_+r.width/2+n*e+u),u+=t.width}),a=r.target.column,c=t.links.filter(function(t){return t.target.column==a&&t.circularLinkType==l}),"bottom"==r.circularLinkType?c.sort(P):c.sort(O),u=0,c.forEach(function(t,n){t.circularLinkID==r.circularLinkID&&(r.circularPathData.rightSmallArcRadius=_+r.width/2+u,r.circularPathData.rightLargeArcRadius=_+r.width/2+n*e+u),u+=t.width}),"bottom"==r.circularLinkType?(r.circularPathData.verticalFullExtent=n+w+r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent-r.circularPathData.rightLargeArcRadius):(r.circularPathData.verticalFullExtent=o-w-r.circularPathData.verticalBuffer,r.circularPathData.verticalLeftInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.leftLargeArcRadius,r.circularPathData.verticalRightInnerExtent=r.circularPathData.verticalFullExtent+r.circularPathData.rightLargeArcRadius)}r.circularPathData.leftInnerExtent=r.circularPathData.sourceX+r.circularPathData.leftNodeBuffer,r.circularPathData.rightInnerExtent=r.circularPathData.targetX-r.circularPathData.rightNodeBuffer,r.circularPathData.leftFullExtent=r.circularPathData.sourceX+r.circularPathData.leftLargeArcRadius+r.circularPathData.leftNodeBuffer,r.circularPathData.rightFullExtent=r.circularPathData.targetX-r.circularPathData.rightLargeArcRadius-r.circularPathData.rightNodeBuffer}if(r.circular)r.path=function(t){var e="";e="top"==t.circularLinkType?"M"+t.circularPathData.sourceX+" "+t.circularPathData.sourceY+" L"+t.circularPathData.leftInnerExtent+" "+t.circularPathData.sourceY+" A"+t.circularPathData.leftLargeArcRadius+" "+t.circularPathData.leftSmallArcRadius+" 0 0 0 "+t.circularPathData.leftFullExtent+" "+(t.circularPathData.sourceY-t.circularPathData.leftSmallArcRadius)+" L"+t.circularPathData.leftFullExtent+" "+t.circularPathData.verticalLeftInnerExtent+" A"+t.circularPathData.leftLargeArcRadius+" "+t.circularPathData.leftLargeArcRadius+" 0 0 0 "+t.circularPathData.leftInnerExtent+" "+t.circularPathData.verticalFullExtent+" L"+t.circularPathData.rightInnerExtent+" "+t.circularPathData.verticalFullExtent+" A"+t.circularPathData.rightLargeArcRadius+" "+t.circularPathData.rightLargeArcRadius+" 0 0 0 "+t.circularPathData.rightFullExtent+" "+t.circularPathData.verticalRightInnerExtent+" L"+t.circularPathData.rightFullExtent+" "+(t.circularPathData.targetY-t.circularPathData.rightSmallArcRadius)+" A"+t.circularPathData.rightLargeArcRadius+" "+t.circularPathData.rightSmallArcRadius+" 0 0 0 "+t.circularPathData.rightInnerExtent+" "+t.circularPathData.targetY+" L"+t.circularPathData.targetX+" "+t.circularPathData.targetY:"M"+t.circularPathData.sourceX+" "+t.circularPathData.sourceY+" L"+t.circularPathData.leftInnerExtent+" "+t.circularPathData.sourceY+" A"+t.circularPathData.leftLargeArcRadius+" "+t.circularPathData.leftSmallArcRadius+" 0 0 1 "+t.circularPathData.leftFullExtent+" "+(t.circularPathData.sourceY+t.circularPathData.leftSmallArcRadius)+" L"+t.circularPathData.leftFullExtent+" "+t.circularPathData.verticalLeftInnerExtent+" A"+t.circularPathData.leftLargeArcRadius+" "+t.circularPathData.leftLargeArcRadius+" 0 0 1 "+t.circularPathData.leftInnerExtent+" "+t.circularPathData.verticalFullExtent+" L"+t.circularPathData.rightInnerExtent+" "+t.circularPathData.verticalFullExtent+" A"+t.circularPathData.rightLargeArcRadius+" "+t.circularPathData.rightLargeArcRadius+" 0 0 1 "+t.circularPathData.rightFullExtent+" "+t.circularPathData.verticalRightInnerExtent+" L"+t.circularPathData.rightFullExtent+" "+(t.circularPathData.targetY+t.circularPathData.rightSmallArcRadius)+" A"+t.circularPathData.rightLargeArcRadius+" "+t.circularPathData.rightSmallArcRadius+" 0 0 1 "+t.circularPathData.rightInnerExtent+" "+t.circularPathData.targetY+" L"+t.circularPathData.targetX+" "+t.circularPathData.targetY;return e}(r);else{var d=(0,s.linkHorizontal)().source(function(t){var e=t.source.x0+(t.source.x1-t.source.x0),n=t.y0;return[e,n]}).target(function(t){var e=t.target.x0,n=t.y1;return[e,n]});r.path=d(r)}})}(o,U,k,D),o}return $.nodeId=function(t){return arguments.length?(D="function"==typeof t?t:(0,a.default)(t),$):D},$.nodeAlign=function(t){return arguments.length?(N="function"==typeof t?t:(0,a.default)(t),$):N},$.nodeWidth=function(t){return arguments.length?(L=+t,$):L},$.nodePadding=function(e){return arguments.length?(t=+e,$):t},$.nodes=function(t){return arguments.length?(R="function"==typeof t?t:(0,a.default)(t),$):R},$.links=function(t){return arguments.length?(B="function"==typeof t?t:(0,a.default)(t),$):B},$.size=function(t){return arguments.length?(n=S=0,C=+t[0],k=+t[1],$):[C-n,k-S]},$.extent=function(t){return arguments.length?(n=+t[0][0],C=+t[1][0],S=+t[0][1],k=+t[1][1],$):[[n,S],[C,k]]},$.iterations=function(t){return arguments.length?(j=+t,$):j},$.circularLinkGap=function(t){return arguments.length?(U=+t,$):U},$.nodePaddingRatio=function(t){return arguments.length?(e=+t,$):e},$};var r=n(1229),i=n(3912),o=n(1151),a=function(t){return t&&t.__esModule?t:{default:t}}(n(3249)),s=n(3910);function l(t,e){return u(t.source,e.source)||t.index-e.index}function c(t,e){return u(t.target,e.target)||t.index-e.index}function u(t,e){return t.partOfCycle===e.partOfCycle?t.y0-e.y0:"top"===t.circularLinkType||"bottom"===e.circularLinkType?-1:1}function d(t){return t.value}function f(t){return(t.y0+t.y1)/2}function p(t){return f(t.source)}function h(t){return f(t.target)}function g(t){return t.index}function m(t){return t.nodes}function v(t){return t.links}function y(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function b(t,e){return e(t)}var w=25,_=10,x=.3;function S(t){var e=Math.abs(t.y1-t.y0),n=Math.abs(t.target.x0-t.source.x1);return Math.atan(n/e)}function C(t,e){return!(t.source.column<e.target.column)&&!(t.target.column>e.source.column)}function E(t,e){var n=0;t.sourceLinks.forEach(function(t){n=t.circular&&!V(t,e)?n+1:n});var r=0;return t.targetLinks.forEach(function(t){r=t.circular&&!V(t,e)?r+1:r}),n+r}function T(t){var e=0;t.source.sourceLinks.forEach(function(t){e=t.circular?e+1:e});var n=0;return t.target.targetLinks.forEach(function(t){n=t.circular?n+1:n}),!(e>1||n>1)}function M(t,e,n){return t.sort(k),t.forEach(function(r,i){var o=0;if(V(r,n)&&T(r))r.circularPathData.verticalBuffer=o+r.width/2;else{for(var a=0;a<i;a++)if(C(t[i],t[a])){var s=t[a].circularPathData.verticalBuffer+t[a].width/2+e;o=s>o?s:o}r.circularPathData.verticalBuffer=o+r.width/2}}),t}function k(t,e){return L(t)==L(e)?"bottom"==t.circularLinkType?I(t,e):A(t,e):L(e)-L(t)}function A(t,e){return t.y0-e.y0}function I(t,e){return e.y0-t.y0}function O(t,e){return t.y1-e.y1}function P(t,e){return e.y1-t.y1}function L(t){return t.target.column-t.source.column}function D(t){return t.target.x0-t.source.x1}function N(t,e){var n=S(t),r=D(e)/Math.tan(n);return"up"==$(t)?t.y1+r:t.y1-r}function R(t,e){var n=S(t),r=D(e)/Math.tan(n);return"up"==$(t)?t.y1-r:t.y1+r}function F(t,e,n,r){t.links.forEach(function(i){if(!i.circular&&i.target.column-i.source.column>1){var o=i.source.column+1,a=i.target.column-1,s=1,l=a-o+1;for(s=1;o<=a;o++,s++)t.nodes.forEach(function(a){if(a.column==o){var c=s/(l+1),u=Math.pow(1-c,3),d=3*c*Math.pow(1-c,2),f=3*Math.pow(c,2)*(1-c),p=Math.pow(c,3),h=u*i.y0+d*i.y0+f*i.y1+p*i.y1,g=h-i.width/2,m=h+i.width/2;if(g>a.y0&&g<a.y1){var v=a.y1-g+10;v="bottom"==a.circularLinkType?v:-v,a=j(a,v,e,n),t.nodes.forEach(function(t){b(t,r)!=b(a,r)&&t.column==a.column&&B(a,t)&&j(t,v,e,n)})}else if(m>a.y0&&m<a.y1){v=m-a.y0+10;a=j(a,v,e,n),t.nodes.forEach(function(t){b(t,r)!=b(a,r)&&t.column==a.column&&t.y0<a.y1&&t.y1>a.y1&&j(t,v,e,n)})}else if(g<a.y0&&m>a.y1){v=m-a.y0+10;a=j(a,v,e,n),t.nodes.forEach(function(t){b(t,r)!=b(a,r)&&t.column==a.column&&t.y0<a.y1&&t.y1>a.y1&&j(t,v,e,n)})}}})}})}function B(t,e){return t.y0>e.y0&&t.y0<e.y1||(t.y1>e.y0&&t.y1<e.y1||t.y0<e.y0&&t.y1>e.y1)}function j(t,e,n,r){return t.y0+e>=n&&t.y1+e<=r&&(t.y0=t.y0+e,t.y1=t.y1+e,t.targetLinks.forEach(function(t){t.y1=t.y1+e}),t.sourceLinks.forEach(function(t){t.y0=t.y0+e})),t}function q(t,e,n){t.nodes.forEach(function(r){r.y+(r.y1-r.y0)>e&&(r.y=r.y-(r.y+(r.y1-r.y0)-e));var i=t.links.filter(function(t){return b(t.source,n)==b(r,n)}),o=i.length;o>1&&i.sort(function(t,e){if(!t.circular&&!e.circular){if(t.target.column==e.target.column)return t.y1-e.y1;if(!U(t,e))return t.y1-e.y1;if(t.target.column>e.target.column){var n=R(e,t);return t.y1-n}if(e.target.column>t.target.column)return R(t,e)-e.y1}return t.circular&&!e.circular?"top"==t.circularLinkType?-1:1:e.circular&&!t.circular?"top"==e.circularLinkType?1:-1:t.circular&&e.circular?t.circularLinkType===e.circularLinkType&&"top"==t.circularLinkType?t.target.column===e.target.column?t.target.y1-e.target.y1:e.target.column-t.target.column:t.circularLinkType===e.circularLinkType&&"bottom"==t.circularLinkType?t.target.column===e.target.column?e.target.y1-t.target.y1:t.target.column-e.target.column:"top"==t.circularLinkType?-1:1:void 0});var a=r.y0;i.forEach(function(t){t.y0=a+t.width/2,a+=t.width}),i.forEach(function(t,e){if("bottom"==t.circularLinkType){for(var n=e+1,a=0;n<o;n++)a+=i[n].width;t.y0=r.y1-a-t.width/2}})})}function z(t,e,n){t.nodes.forEach(function(e){var r=t.links.filter(function(t){return b(t.target,n)==b(e,n)}),i=r.length;i>1&&r.sort(function(t,e){if(!t.circular&&!e.circular){if(t.source.column==e.source.column)return t.y0-e.y0;if(!U(t,e))return t.y0-e.y0;if(e.source.column<t.source.column){var n=N(e,t);return t.y0-n}if(t.source.column<e.source.column)return N(t,e)-e.y0}return t.circular&&!e.circular?"top"==t.circularLinkType?-1:1:e.circular&&!t.circular?"top"==e.circularLinkType?1:-1:t.circular&&e.circular?t.circularLinkType===e.circularLinkType&&"top"==t.circularLinkType?t.source.column===e.source.column?t.source.y1-e.source.y1:t.source.column-e.source.column:t.circularLinkType===e.circularLinkType&&"bottom"==t.circularLinkType?t.source.column===e.source.column?t.source.y1-e.source.y1:e.source.column-t.source.column:"top"==t.circularLinkType?-1:1:void 0});var o=e.y0;r.forEach(function(t){t.y1=o+t.width/2,o+=t.width}),r.forEach(function(t,n){if("bottom"==t.circularLinkType){for(var o=n+1,a=0;o<i;o++)a+=r[o].width;t.y1=e.y1-a-t.width/2}})})}function U(t,e){return $(t)==$(e)}function $(t){return t.y0-t.y1>0?"up":"down"}function V(t,e){return b(t.source,e)==b(t.target,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){return t}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3409),o=n(3492),a=n(3498),s=n(3501),l=n(3505),c=n(3541),u=n(3542);r.module("stealth.orion",[i.default,o.default,a.default,s.default,l.default]).config(["$ariaProvider",function(t){t.config({tabindex:!1})}]).service("stealth.orion.configService",u.ConfigService).run(c.$run)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3410),o=n(3480);e.default=r.module("stealth.orion.controls",["ccri.angular-utils","ccri.orion","stealth.core.sidebar"]).service("stealth.orion.controls.manager",i.ControlsManager).directive("stOrionControlPanel",o.factory).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(663),i=n(299),o=function(){function t(t,e,n,o,a,s,l){var c=this;this.$rootScope=t,this.$timeout=e,this.WidgetDef=n,this.orionManager=o,this.displayRegistry=a,this.sidebarButtons=s,this.sidebarManager=l,this.state={},this.graphSpecificControls=[".ccri-graph-upload",".ccri-graph-layout",".control-section-edges",".ccri-graph-labels",".ccri-graph-node-icons",".ccri-graph-node-images",".ccri-graph-node-size",".ccri-graph-scale-nodes"],this.createPanel=function(t,e){var n=c.$rootScope.$new();n.graphId=t,n.containers=e.sections,c.state[t]={sidebarId:null,config:e,open:!1,autoOpen:!1};var r=new c.WidgetDef({tag:"st-orion-control-panel",scope:n,attrs:'containers="containers" graph-id="graphId"',isolateScope:!0});(c._isDisplayOpen(t,"graph")||c._isDisplayOpen(t,"table"))&&c._addButton(t,r),c.sidebarButtons.register(t);var i=c.sidebarButtons.getByName(t);i.on("opened",c.onPanelOpened(t)),i.on("closed",c.onPanelClosed(t));var o=t+"graph",a=t+"table";c.displayRegistry.addListener("display.active",function(e){if(e.id===o||e.id===a){c.state[t].open&&e.id===o&&c.orionManager.setDisableSections(c._findElements(t+"controls",c.graphSpecificControls),!e.active);var n=e.id===o?e.active:c._isDisplayOpen(t,"graph"),i=e.id===a?e.active:c._isDisplayOpen(t,"table");n||i?c.state[t].sidebarId||c._addButton(t,r):c.state[t].sidebarId&&c._removeButton(t)}})},this.onPanelOpened=function(t){return function(){c.state[t].open=!0,c._isDisplayOpen(t,"graph")||c.$timeout(function(){c.orionManager.setDisableSections(c._findElements(t+"controls",c.graphSpecificControls),!0)})}},this.onPanelClosed=function(t){return function(){c.state[t].open=!1}},this._findElements=function(t,e){return i(e,function(e){return $("#"+t).find(e)})},this._isDisplayOpen=function(t,e){var n=c.displayRegistry.listActive();return!!r(n,function(n){return n.id===t+e})},this._addButton=function(t,e){c.state[t].sidebarId=c.sidebarManager.addButton(c.state[t].config.name,c.state[t].config.iconClass,c.state[t].config.width,e,null,!0),c.state[t].autoOpen&&(c.sidebarManager.toggleButton(c.state[t].sidebarId,!0),c.state[t].autoOpen=!1)},this._removeButton=function(t){c.state[t].autoOpen=c.state[t].open,c.sidebarManager.removeButton(c.state[t].sidebarId),c.state[t].sidebarId=null}}return t.$inject=["$rootScope","$timeout","ccri.angular-utils.WidgetDef","ccri.orion.manager","stealth.display.registry","sidebarButtons","sidebarManager"],t}();e.ControlsManager=o},function(t,e,n){var r=n(295),i=n(207),o=n(245);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var l=r(n,3);e=o(e),n=function(t){return l(s[t],t,s)}}var c=t(e,n,a);return c>-1?s[l?e[c]:c]:void 0}}},function(t,e,n){var r=n(3413),i=n(3462),o=n(1178);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(476),i=n(1165),o=1,a=2;t.exports=function(t,e,n,s){var l=n.length,c=l,u=!s;if(null==t)return!c;for(t=Object(t);l--;){var d=n[l];if(u&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++l<c;){var f=(d=n[l])[0],p=t[f],h=d[1];if(u&&d[2]){if(void 0===p&&!(f in t))return!1}else{var g=new r;if(s)var m=s(p,h,f,t,e,g);if(!(void 0===m?i(h,p,o|a,s,g):m))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(478),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(478);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(478);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(478);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(477);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(477),i=n(664),o=n(666),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(665),i=n(3427),o=n(119),a=n(1164),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,f=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},function(t,e,n){var r=n(296),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(3428),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(141)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(3431),i=n(477),o=n(664);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(3432),i=n(3433),o=n(3434),a=n(3435),s=n(3436);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(479);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(479),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(479),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(479),i="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e,n){var r=n(480);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(480);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(480);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(480);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(476),i=n(1166),o=n(3448),a=n(3449),s=n(1176),l=n(69),c=n(482),u=n(669),d=1,f="[object Arguments]",p="[object Array]",h="[object Object]",g=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,v,y){var b=l(t),w=l(e),_=b?p:s(t),x=w?p:s(e),S=(_=_==f?h:_)==h,C=(x=x==f?h:x)==h,E=_==x;if(E&&c(t)){if(!c(e))return!1;b=!0,S=!1}if(E&&!S)return y||(y=new r),b||u(t)?i(t,e,n,m,v,y):o(t,e,_,n,m,v,y);if(!(n&d)){var T=S&&g.call(t,"__wrapped__"),M=C&&g.call(e,"__wrapped__");if(T||M){var k=T?t.value():t,A=M?e.value():e;return y||(y=new r),v(k,A,n,m,y)}}return!!E&&(y||(y=new r),a(t,e,n,m,v,y))}},function(t,e,n){var r=n(666),i=n(3444),o=n(3445);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(296),i=n(1167),o=n(361),a=n(1166),s=n(1168),l=n(1169),c=1,u=2,d="[object Boolean]",f="[object Date]",p="[object Error]",h="[object Map]",g="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",x=r?r.prototype:void 0,S=x?x.valueOf:void 0;t.exports=function(t,e,n,r,x,C,E){switch(n){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!C(new i(t),new i(e)));case d:case f:case g:return o(+t,+e);case p:return t.name==e.name&&t.message==e.message;case m:case y:return t==e+"";case h:var T=s;case v:var M=r&c;if(T||(T=l),t.size!=e.size&&!M)return!1;var k=E.get(t);if(k)return k==e;r|=u,E.set(t,e);var A=a(T(t),T(e),r,x,C,E);return E.delete(t),A;case b:if(S)return S.call(t)==S.call(e)}return!1}},function(t,e,n){var r=n(1170),i=1,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,s,l){var c=n&i,u=r(t),d=u.length;if(d!=r(e).length&&!c)return!1;for(var f=d;f--;){var p=u[f];if(!(c?p in e:o.call(e,p)))return!1}var h=l.get(t);if(h&&l.get(e))return h==e;var g=!0;l.set(t,e),l.set(e,t);for(var m=c;++f<d;){var v=t[p=u[f]],y=e[p];if(a)var b=c?a(y,v,p,e,t,l):a(v,y,p,t,e,l);if(!(void 0===b?v===y||s(v,y,n,a,l):b)){g=!1;break}m||(m="constructor"==p)}if(g&&!m){var w=t.constructor,_=e.constructor;w!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _)&&(g=!1)}return l.delete(t),l.delete(e),g}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(206),i=n(179),o="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(206),i=n(670),o=n(179),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(1163),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(120)(t))},function(t,e,n){var r=n(671),i=n(3457),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(1175)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(244)(n(141),"DataView");t.exports=r},function(t,e,n){var r=n(244)(n(141),"Promise");t.exports=r},function(t,e,n){var r=n(244)(n(141),"Set");t.exports=r},function(t,e,n){var r=n(244)(n(141),"WeakMap");t.exports=r},function(t,e,n){var r=n(1177),i=n(245);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(1165),i=n(362),o=n(3468),a=n(672),s=n(1177),l=n(1178),c=n(298),u=1,d=2;t.exports=function(t,e){return a(t)&&s(e)?l(c(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,u|d)}}},function(t,e,n){var r=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n(3465)(function(t){var e=[];return r.test(t)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=a},function(t,e,n){var r=n(3466),i=500;t.exports=function(t){var e=r(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(666),i="Expected a function";function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(296),i=n(363),o=n(69),a=n(485),s=1/0,l=r?r.prototype:void 0,c=l?l.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},function(t,e,n){var r=n(3469),i=n(3470);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(297),i=n(481),o=n(69),a=n(483),s=n(670),l=n(298);t.exports=function(t,e,n){for(var c=-1,u=(e=r(e,t)).length,d=!1;++c<u;){var f=l(e[c]);if(!(d=null!=t&&n(t,f)))break;t=t[f]}return d||++c!=u?d:!!(u=null==t?0:t.length)&&s(u)&&a(f,u)&&(o(t)||i(t))}},function(t,e,n){var r=n(3472),i=n(3473),o=n(672),a=n(298);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(484);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(1179),i=n(295),o=n(1180),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(t,i(e,3),l)}},function(t,e,n){var r=n(1181),i=1/0,o=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===i||t===-i?(t<0?-1:1)*o:t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(486),i=n(207);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,function(t,r,i){o[++n]=e(t,r,i)}),o}},function(t,e,n){var r=n(1182),i=n(245);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}},function(t,e,n){var r=n(207);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(487),i=n(3482),o=n(3491),a=function(){function t(t,e,n){var o=this;this.scope=t,this.WidgetDef=e,this.sidebarButtons=n,this.getWidget=function(t,e,n){var r=o.scope.$new();r.graphId=o.scope.graphId,r.options=n;var a=n.tag||"ccri-orion-"+i(e);return new o.WidgetDef({tag:a,scope:r,attrs:'graph-id="graphId" options="options"',isolateScope:!0})},r(t.containers,function(t,e){t&&r(t.control.options,function(t,n){t.widget=o.getWidget(e,n,t)})});var a=n.getByName(t.graphId);a.setOpen(!0),t.$on("$destroy",function(){a.setOpen(!1)})}return t.$inject=["$scope","ccri.angular-utils.WidgetDef","sidebarButtons"],t}();e.ControlPanelController=a,e.factory=function(){return{restrict:"E",template:o,scope:{graphId:"=",containers:"="},controller:a}}},function(t,e,n){var r=n(364);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(3483)(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});t.exports=r},function(t,e,n){var r=n(675),i=n(3484),o=n(3487),a=RegExp("['’]","g");t.exports=function(t){return function(e){return r(o(i(e).replace(a,"")),t,"")}}},function(t,e,n){var r=n(3485),i=n(673),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(o,r).replace(a,"")}},function(t,e,n){var r=n(3486)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});t.exports=r},function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,n){var r=n(3488),i=n(3489),o=n(673),a=n(3490);t.exports=function(t,e,n){return t=o(t),void 0===(e=n?void 0:e)?i(t)?a(t):r(t):t.match(e)||[]}},function(t,e){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(n)||[]}},function(t,e){var n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return n.test(t)}},function(t,e){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+n+"]",i="\\d+",o="[\\u2700-\\u27bf]",a="[a-z\\xdf-\\xf6\\xf8-\\xff]",s="[^\\ud800-\\udfff"+n+i+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="[A-Z\\xc0-\\xd6\\xd8-\\xde]",d="(?:"+a+"|"+s+")",f="(?:"+u+"|"+s+")",p="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",h="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,c].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),g="(?:"+[o,l,c].join("|")+")"+h,m=RegExp([u+"?"+a+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,u,"$"].join("|")+")",f+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,u+d,"$"].join("|")+")",u+"?"+d+"+(?:['’](?:d|ll|m|re|s|t|ve))?",u+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",i,g].join("|"),"g");t.exports=function(t){return t.match(m)||[]}},function(t,e){t.exports='<div class="stOrionControlPanel ccri-graph-controls" id="{{graphId  + \'controls\'}}">\n    <div ng-repeat="section in containers"\n        class="stOrionSection js-ccri-graph-control-section {{section.class}}"\n        ng-class="{\'stOrionExpanded\': section.expandable && section.expand}">\n        \x3c!-- Section name and expand/collapse --\x3e\n        <div class="stOrionSectionHeader" ng-if="!(section.control.options | lodash:\'isEmpty\') && (section.name || section.expandable)">\n            <div class="flex-row ccri-graph-control-section-header">\n                <div class="ccri-graph-control-title" ng-if="section.name">{{section.name}}</div>\n                <ccri-orion-expand\n                    ng-if="section.expandable"\n                    expand="section.expand"\n                ></ccri-orion-expand>\n            </div>\n        </div>\n        \x3c!-- Controls --\x3e\n        <div ng-if="!(section.control.options | lodash:\'isEmpty\')"\n            ng-class="{\'ng-hide\': section.expandable && !section.expand}">\n            <div ng-repeat="control in section.control.options" class="stOrionControl">\n                <ccri-angular-utils-widget-compiler\n                    widget-def="::control.widget"\n                ></ccri-angular-utils-widget-compiler>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3493),o=n(3494);e.default=r.module("stealth.orion.graph",["ccri.angular-utils","ccri.orion","stealth.display"]).service("stealth.orion.graph.manager",i.GraphManager).directive("stOrionGraphContainer",o.factory).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r){var i=this;this.$rootScope=t,this.WidgetDef=e,this.displayRegistry=n,this.View=r,this.createDisplay=function(t,e,n,r){var o=i.$rootScope.$new();o.graphId=t,o.graph=e,o.data=n,o.containers=r.containers,i.displayRegistry.insert(new i.View({id:t+"graph",name:r.name,type:r.type,widget:new i.WidgetDef({tag:"st-orion-graph-container",scope:o,attrs:'graph-id="graphId" graph="graph" data="data" containers="containers"'}),iconClass:r.iconClass,active:r.active,activateOptions:r.activateOptions}),"500")}}return t.$inject=["$rootScope","ccri.angular-utils.WidgetDef","stealth.display.registry","stealth.display.View"],t}();e.GraphManager=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3495),i=n(676),o=n(3497);function a(t,e){return{restrict:"E",scope:{containers:"=",data:"=",graphId:"=",graph:"="},template:o,link:function(n,o){var a,s,l=i(f,10),c=n.graphId+"graph",u=function(t){t.id!==c||t.active||(a&&a(),a=null,s&&s(),s=null,e.removeListener("display.selected",d),e.removeListener("display.active",u),n.$destroy())};e.addListener("display.active",u);var d=function(t){t.id===c&&t.selected&&f()};function f(){t.getGraphByIdWithCallback(n.graphId,function(t){r(t)||t.resize()})}e.addListener("display.selected",d),a=n.$watch(function(){return o.width()},l),s=n.$watch(function(){return o.height()},l)}}}a.$inject=["ccri.orion.manager","stealth.display.registry"],e.factory=a},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(141);t.exports=function(){return r.Date.now()}},function(t,e){t.exports='<div style="height: 100%;">\n    <ccri-orion-container\n        graph-id="graphId"\n        data="data"\n        graph="graph"\n        control-containers="containers"\n    ></ccri-orion-container>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3499),o=n(3500);e.default=r.module("stealth.orion.information",["ccri.angular-utils","ccri.orion","stealth.display"]).service("stealth.orion.information.manager",i.InfoManager).directive("stOrionInfoView",["stealth.display.registry",function(t){return{restrict:"E",template:o,scope:{graphId:"=",graph:"=",infoId:"=",nodeInfoOptions:"=",edgeInfoOptions:"=",nodeRelationshipOptions:"=?"},link:function(e){var n=function(r){r.id!==e.infoId||r.active||(e.$destroy(),t.removeListener("display.active",n))};t.addListener("display.active",n)}}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r){var i=this;this.$rootScope=t,this.WidgetDef=e,this.displayRegistry=n,this.View=r,this.createDisplay=function(t,e,n){var r=i.$rootScope.$new();r.graphId=t,r.graph=e,r.infoId=n.displayId,r.nodeInfoOptions=n.nodeInfoOptions,r.edgeInfoOptions=n.edgeInfoOptions,r.nodeRelationshipOptions=n.nodeRelationshipOptions,i.displayRegistry.insert(new i.View({id:n.displayId,name:n.name,type:n.type,widget:new i.WidgetDef({tag:"st-orion-info-view",scope:r,attrs:'graph-id="graphId" graph="graph" node-info-options="nodeInfoOptions" edge-info-options="edgeInfoOptions" node-relationship-options="nodeRelationshipOptions"'}),iconClass:n.iconClass,active:n.active,activateOptions:n.activateOptions}),"200")}}return t.$inject=["$rootScope","ccri.angular-utils.WidgetDef","stealth.display.registry","stealth.display.View"],t}();e.InfoManager=r},function(t,e){t.exports='<div class="stOrionInfoView">\n    <ccri-orion-node-relationship\n        class="ccri-graph-controls"\n        ng-if="!!nodeRelationshipOptions"\n        graph-id="graphId"\n        options="nodeRelationshipOptions"\n        graph-options="graph.options">\n    </ccri-orion-node-relationship>\n    <ccri-orion-node-edge-info\n        ng-if="!!nodeInfoOptions"\n        options="nodeInfoOptions"\n        graph-options="graph.options"\n        is-node="true">\n    </ccri-orion-node-edge-info>\n    <ccri-orion-node-edge-info\n        ng-if="!!edgeInfoOptions"\n        options="edgeInfoOptions"\n        graph-options="graph.options"\n        is-edge="true">\n    </ccri-orion-node-edge-info>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(676),o=n(3502),a=n(287),s=n(3504);e.default=r.module("stealth.orion.table",["ccri.angular-utils","ccri.orion","stealth.display"]).service("stealth.orion.table.manager",o.TableManager).directive("stOrionTableView",["$rootScope","stealth.display.registry",function(t,e){return{restrict:"E",template:s,scope:{graphId:"=",listOptions:"="},link:function(n){var r=n.graphId+"table",o=function(t){t.id!==r||t.active||(n.$destroy(),l&&(l(),l=null),e.removeListener("display.active",o))};e.addListener("display.active",o);var s=i(function(t,e){e.getItemsById(n.graphId+"table").length>0&&a.GraphEvents.Service.emit(a.GraphEvents.resizeList,{graphId:n.graphId})},10),l=t.$on("GLResize",s)}}}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3503),i=function(){function t(t,e,n,i){var o=this;this.$rootScope=t,this.WidgetDef=e,this.displayRegistry=n,this.View=i,this.createDisplay=function(t,e){var n=o.$rootScope.$new();n.graphId=t,n.listOptions=e.options,r(n.listOptions,"expandable",!1),r(n.listOptions,"expand",!0),o.displayRegistry.insert(new o.View({id:t+"table",name:e.name,type:e.type,widget:new o.WidgetDef({tag:"st-orion-table-view",scope:n,attrs:'graph-id="graphId" list-options="listOptions"'}),iconClass:e.iconClass,active:e.active,activateOptions:e.activateOptions}),"110")}}return t.$inject=["$rootScope","ccri.angular-utils.WidgetDef","stealth.display.registry","stealth.display.View"],t}();e.TableManager=i},function(t,e,n){var r=n(1185);t.exports=function(t,e,n){return null==t?t:r(t,e,n)}},function(t,e){t.exports='<div class="stOrionTableView">\n    <ccri-orion-entity-list\n        options="listOptions"\n        graph-id="graphId">\n    </ccri-orion-entity-list>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3506),o=n(3509);e.default=r.module("stealth.orion.mediator",[i.default,o.default]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3507);e.default=r.module("stealth.orion.mediator.map",[]).service("stealth.orion.mediator.map.overlay",i.MapOverlay).run(["stealth.orion.mediator.map.overlay",function(t){t.startSelectListener()}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(487),o=n(299),a=n(1187),s=n(3508),l=n(663),c=n(1188),u=n(287),d=function(){function t(t,e,n,d,f,p,h,g){var m=this;this.VectorOverlay=t,this.ol3Map=e,this.selectService=n,this.liveManager=d,this.orionManager=f,this.$http=p,this.$timeout=h,this.toastr=g,this.ENTITY_TYPE_FIELD="entityType",this.updateReady=!0,this.debounceUpdate=null,this.addOverlay=function(){m.overlay&&m.overlay.removeFromMap(),m.overlay=new m.VectorOverlay({colors:["#CC0033"]}),m.overlay.addToMap(),m.hoverOverlay&&m.hoverOverlay.removeFromMap(),m.hoverOverlay=new m.VectorOverlay({colors:["#ffffff"]}),m.hoverOverlay.addToMap(),m.selectOverlay&&m.selectOverlay.removeFromMap(),m.selectOverlay=new m.VectorOverlay({colors:["#ffffff"]}),m.selectOverlay.addToMap()},this.removeOverlay=function(){m.overlay&&(m.overlay.removeFromMap(),m.overlay=null,m.hoverOverlay.removeFromMap(),m.hoverOverlay=null,m.selectOverlay.removeFromMap(),m.selectOverlay=null)},this.startSelectListener=function(){m.addOverlay(),u.GraphEvents&&(u.GraphEvents.Service.on(u.GraphEvents.elementSelected,m.featureSelect),u.GraphEvents.Service.on(u.GraphEvents.elementHover,m.featureHover),u.GraphEvents.Service.on(u.GraphEvents.elementOut,m.featureOut),u.GraphEvents.Service.on(u.GraphEvents.reloadData,m.updateData),u.GraphEvents.Service.on(u.GraphEvents.elementsUpdated,m.updateData),u.GraphEvents.Service.on(u.GraphEvents.filterData,m.updateData),u.GraphEvents.Service.on(u.GraphEvents.nodeColorsUpdated,m.updateData))},this.removeSelectListener=function(t){u.GraphEvents&&(u.GraphEvents.Service.removeListener(u.GraphEvents.elementSelected,m.featureSelect),u.GraphEvents.Service.removeListener(u.GraphEvents.elementHover,m.featureHover),u.GraphEvents.Service.removeListener(u.GraphEvents.elementOut,m.featureOut),u.GraphEvents.Service.removeListener(u.GraphEvents.reloadData,m.updateData),u.GraphEvents.Service.removeListener(u.GraphEvents.elementsUpdated,m.updateData),u.GraphEvents.Service.removeListener(u.GraphEvents.filterData,m.updateData),u.GraphEvents.Service.removeListener(u.GraphEvents.nodeColorsUpdated,m.updateData)),t&&m.removeOverlay()},this.uDebounce=function(t){m.debounceUpdate=setTimeout(function(){m.updateFeatures(t)},1e3)},this.updateSync=function(t){t.syncMap||(m.clearOverlays(),m.clearSelectOverlays()),m.sync=t.syncMap,t.syncMap?m.startSelectListener():m.removeSelectListener(!0)},this.featureHover=function(t){m.hoverUpdateFeature("hover",t.element)},this.featureOut=function(t){m.hoverUpdateFeature("out",t.element)},this.featureSelect=function(t){m.sync&&m.selectUpdateFeature(t)},this.updateData=function(t){m.overlay||m.addOverlay(),m.sync&&(m.clearSelectOverlays(),clearTimeout(m.debounceUpdate),m.uDebounce(t))},this.showOnMap=function(t){m.sync?m.selectUpdateFeature(t):(m.overlay||m.addOverlay(),clearTimeout(m.debounceUpdate),m.uDebounce(t),m.selectUpdateFeature(t))},this.hideOnMap=function(t){m.sync||m.clearOverlays(),m.clearSelectOverlays()},this.clearSelectOverlays=function(){m.selectOverlay&&m.selectOverlay.clear(),m.selectVectorOverlay&&(m.selectVectorOverlay.removeFromMap(),m.selectVectorOverlay=null)},this.clearOverlays=function(){m.overlay&&m.overlay.clear(),m.vectorOverlay&&(m.vectorOverlay.removeFromMap(),m.vectorOverlay=null)},this.updateFeatures=function(t,e){if(t.nodes&&(m.overlay&&!e&&m.overlay.clear(),t.nodes.length)){var n=a(t.nodes);if(n.data("properties")&&n.data("properties").lon&&n.data("properties").lat){var r=s(m.generateNodeFeatures(t.nodes));i(r,function(t){t.setId(t.get("id")),t.setStyle(t.get("style")),m.overlay.addFeature(t)})}else m.mapData(t,n,!1,!1,!0)}},this.hoverUpdateFeature=function(t,e){m.hoverOverlay.clear();for(var n=m.overlay.getFeatures().getArray(),i=n.length;i--;){var o=n[i];if(o.get("id")===e){if("hover"===t){var a=new r.Feature({id:"hover"+o.get("id"),color:"#ffffff",geometry:o.get("geometry"),style:m.getStyle("#ffffff",6,10)});a.setStyle(a.get("style")),m.hoverOverlay.addFeature(a)}break}}},this.selectUpdateFeature=function(t){if(t.nodes&&(m.selectOverlay.clear(),t.nodes.length)){var e=a(t.nodes);if(e.data("properties")&&e.data("properties").lon&&e.data("properties").lat){var n=s(m.generateNodeFeatures(t.nodes));i(n,function(t){t.setId("select"+t.get("id")),t.setStyle(m.getStyle("#ffffff",4,12)),m.selectOverlay.addFeature(t),m.ol3Map.panTo(t.get("geometry").getCoordinates(),!1,800)})}else m.mapData(t,e,!0,!0,!1)}},this.getStyle=function(t,e,n){return new r.style.Style({image:new r.style.Circle({radius:n||8,stroke:new r.style.Stroke({color:t,width:e})})})},this.generateNodeFeatures=function(t){return o(t,function(t){var e=new r.geom.Point([Number(t.data("properties").lon),Number(t.data("properties").lat)]);return new r.Feature({id:t.data("id"),color:t.data("color"),geometry:e,style:m.getStyle(t.data("color"),2)})})},this.getLayerViewRecord=function(t){var e=m.mapLayerNames&&m.mapLayerNames.entityTypeField?m.mapLayerNames.entityTypeField:m.ENTITY_TYPE_FIELD;m.mapLayerNames=m.getMapLayerNames();var n=m;return m.getTopLevelType(t.data(e)).then(function(t){var e;if(t){n.mapLayerConfig=n.getMapLayerConfig(t);var r=n.mapLayerConfig?n.mapLayerConfig.mapLayer:void 0;r&&(e=n.liveManager.getViews().filter(function(t){return t.dataSourceId.split(";")[1]===r}).last())}return e},function(){return Promise.reject({})})},this.getTopLevelType=function(t){var e=m;if(void 0===m.types){var n=l(m.targetGraph.allData,{name:m.targetGraph.activeData});return c(n.typesUrl)?m.$http({url:n.typesUrl,method:"GET",withCredentials:!1,transformResponse:function(t){return JSON.parse(t)}}).then(function(n){return e.types=n.data,e.$timeout(),e.findParentType(t)},function(t){}):Promise.reject({})}var r=e.findParentType(t);return Promise.resolve(r)},this.mapData=function(t,e,n,r,i){var a=m;a.graphId=t.graphId,i&&u.GraphEvents.Service.emit(u.GraphEvents.mapUpdating,{graphId:a.graphId}),m.orionManager.getGraphByIdWithCallback(a.graphId,function(s){a.targetGraph=s,m.getLayerViewRecord(e).then(function(e){if(e&&a.mapLayerConfig&&a.mapLayerConfig.entityIdField&&a.mapLayerConfig.mapIdField){var s=o(t.nodes,function(t){return t.data().properties[a.mapLayerConfig.entityIdField]}),l=o(t.nodes,function(t){return t.data("color")||"#cccccc"});m.selectService.selectByIdsFromViewRecord(e,a.mapLayerConfig.mapIdField,s,l,m.liveManager,m.ol3Map,n,r).then(function(t){t&&(r?(m.clearSelectOverlays(),m.checkShowMapDataMessage(s,t)||(m.selectVectorOverlay=t,m.selectVectorOverlay.addToMap())):(m.clearOverlays(),m.checkShowMapDataMessage(s,t)||(m.vectorOverlay=t,m.vectorOverlay.addToMap()))),i&&u.GraphEvents.Service.emit(u.GraphEvents.mapUpdated,{graphId:a.graphId})})}else m.toastr.error("Invalid configuration. Unable to map entity data.","Invalid Configuration",{timeOut:15e3})},function(){u.GraphEvents.Service.emit(u.GraphEvents.mapUpdated,{graphId:a.graphId})})})},u.GraphEvents&&(u.GraphEvents.Service.on(u.GraphEvents.syncMap,this.updateSync),u.GraphEvents.Service.on(u.GraphEvents.showOnMap,this.showOnMap),u.GraphEvents.Service.on(u.GraphEvents.hideOnMap,this.hideOnMap))}return t.prototype.checkShowMapDataMessage=function(t,e){var n=e.getFeatures().getArray(),r=!1;return 0===n.length?(this.toastr.warning("No entities mapped: Selected entity position(s) unknown."),r=!0):n.length<t.length&&this.toastr.warning("Not all entities mapped: Some entity locations could not be found."),r},t.prototype.findParentType=function(t){var e,n=l(this.types,{name:t});return n&&(e=this.getParentType(n)),e},t.prototype.getParentType=function(t){if(t.parentTypeName){var e=l(this.types,{name:t.parentTypeName});return this.getParentType(e)}return t.name},t.prototype.getMapLayerNames=function(){return l(this.targetGraph.allData,{name:this.targetGraph.activeData}).mapLayerNames},t.prototype.getMapLayerConfig=function(t){var e;return this.mapLayerNames&&this.mapLayerNames.layers&&(e=this.mapLayerNames.layers[t]),e},t.$inject=["stealth.core.geo.ol3.overlays.Vector","ol3Map","stealth.live.select.SelectService","stealth.live.manager.Manager","ccri.orion.manager","$http","$timeout","toastr"],t}();e.MapOverlay=d},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3510);e.InteractionDictionary=i.InteractionDictionary;var o=n(1189),a=n(1198),s=n(1199),l=n(3538),c=n(3539);e.default=r.module("stealth.orion.mediator.interactions",[]).service("stealth.orion.mediator.interactions.dictionary",i.InteractionDictionary).service("stealth.orion.mediator.interactions.deepLinkService",l.DeepLinkService).factory("stealth.orion.mediator.interactions.SendData",o.factory).factory("stealth.orion.mediator.interactions.SyncGraphs",a.factory).factory("stealth.orion.mediator.interactions.CreateTLDataSource",s.factory).run(c.$run).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(){var t=this;this.interactions={},this.register=function(e,n){t.interactions[e]=n},this.getService=function(e,n,r){return new(0,t.interactions[e])(n,r)}}}();e.InteractionDictionary=r},function(t,e,n){var r=n(486);t.exports=function(t,e){var n=[];return r(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}},function(t,e,n){var r=n(1179),i=n(3513),o=n(3514);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(3516),i=n(245);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(363);t.exports=function(t,e){return r(e,function(e){return t[e]})}},function(t,e,n){var r=n(1192),i=4;t.exports=function(t){return r(t,i)}},function(t,e,n){var r=n(300),i=n(245);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(300),i=n(489);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(119),i=n(671),o=n(3521),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(300),i=n(668);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(300),i=n(1195);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(680),i=n(3526),o=n(3527),a=n(3529),s=n(3530),l=n(3532),c=n(1196),u="[object Boolean]",d="[object Date]",f="[object Map]",p="[object Number]",h="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",x="[object Int8Array]",S="[object Int16Array]",C="[object Int32Array]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",M="[object Uint16Array]",k="[object Uint32Array]";t.exports=function(t,e,n,A){var I=t.constructor;switch(e){case y:return r(t);case u:case d:return new I(+t);case b:return i(t,A);case w:case _:case x:case S:case C:case E:case T:case M:case k:return c(t,A);case f:return o(t,A,n);case p:case m:return new I(t);case h:return a(t);case g:return s(t,A,n);case v:return l(t)}}},function(t,e,n){var r=n(680);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e,n){var r=n(3528),i=n(675),o=n(1168),a=1;t.exports=function(t,e,n){var s=e?n(o(t),a):o(t);return i(s,r,new t.constructor)}},function(t,e){t.exports=function(t,e){return t.set(e[0],e[1]),t}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(3531),i=n(675),o=n(1169),a=1;t.exports=function(t,e,n){var s=e?n(o(t),a):o(t);return i(s,r,new t.constructor)}},function(t,e){t.exports=function(t,e){return t.add(e),t}},function(t,e,n){var r=n(296),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(119),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(488),i=n(3535),o=Object.prototype.hasOwnProperty,a=i(function(t,e,n){o.call(t,n)?t[n].push(e):r(t,n,[e])});t.exports=a},function(t,e,n){var r=n(3536),i=n(3537),o=n(295),a=n(69);t.exports=function(t,e){return function(n,s){var l=a(n)?r:i,c=e?e():{};return l(n,t,o(s,2),c)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}},function(t,e,n){var r=n(486);t.exports=function(t,e,n,i){return r(t,function(t,r,o){e(i,t,n(t),o)}),i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(287),i=function(){function t(t,e,n,i,o){var a=this;this.$location=t,this.$timeout=e,this.orionManager=n,this.easyButtonsService=i,this.toastr=o,this.activateEntityDeepLink=function(t){a.easyButtonsService.activateEasyButton(String(t.layout));var e="query="+encodeURIComponent(t.query),n=a;a.orionManager.getData(t.source,e,function(e,i){0===e.length?a.toastr.error("Entity query "+t.query+" returned no results.","Data not found.",{timeOut:15e3}):(r.GraphEvents.Service.emit(r.GraphEvents.updateData,{graphId:t.source,data:e}),a.orionManager.getGraphByIdWithCallback(t.source,function(t){t.cy.nodes().select()}),n.$timeout(function(){}))})}}return t.$inject=["$location","$timeout","ccri.orion.manager","stealth.display.easyButtonsService","toastr"],t}();e.DeepLinkService=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1189),i=n(1198),o=n(1199),a=n(564),s=n(3540),l=n(362),c=function(t,e,n,c,u,d,f,p){c.register(r.name,u),c.register(i.name,d),c.register(o.name,f);var h,g=e.search(),m=l(g,"entity_source"),v=l(g,"layout"),y=l(g,"entity_query");if(m&&v&&y){h=n.open({template:s,keyboard:!1,backdrop:"static",backdropClass:"wizardMask"});var b={source:m,layout:v,query:y};a.DataSourceManager.loadDataSources().then(function(){t(function(){p.activateEntityDeepLink(b),h.dismiss("State Loaded")})},function(){h.dismiss("Capabilities Error")})}};e.$run=c,c.$inject=["$timeout","$location","$uibModal","stealth.orion.mediator.interactions.dictionary","stealth.orion.mediator.interactions.SendData","stealth.orion.mediator.interactions.SyncGraphs","stealth.orion.mediator.interactions.CreateTLDataSource","stealth.orion.mediator.interactions.deepLinkService"]},function(t,e){t.exports='<div class="loadmodal">\n    Loading entity data...\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(676),i=n(674),o=n(69),a=function(t,e,n,a,s,l,c,u,d){var f=n.getOptions();i(f.graphs,function(t){e.createGraph(t.graphId,null,t.graph.options),e.initializeData(t.graphId,t.data,t.graph.options),t.interactions&&i(t.interactions,function(e,n){var r=c.getService(n,t.graphId,e);e.table&&t.views.table&&(o(t.views.table.options.toolButtons)?t.views.table.options.toolButtons.push(r):t.views.table.options.toolButtons=[r])}),t.views.graph&&s.createDisplay(t.graphId,t.graph,t.data,t.views.graph),t.views.table&&u.createDisplay(t.graphId,t.views.table),t.panel&&a.createPanel(t.graphId,t.panel)}),f.info&&l.createDisplay(f.graphs[0].graphId,f.graphs[0].graph,f.info);var p=r(function(t,n){"orion"===n&&i(f.graphs,function(t){e.setInitialData(t.graphId)})},500);t.$on("easyButton.activated",p)};e.$run=a,a.$inject=["$rootScope","ccri.orion.manager","stealth.orion.configService","stealth.orion.controls.manager","stealth.orion.graph.manager","stealth.orion.information.manager","stealth.orion.mediator.interactions.dictionary","stealth.orion.table.manager","stealth.orion.mediator.interactions.deepLinkService"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(487),i=n(364),o=n(69),a=n(3543),s=n(3544),l=n(3556),c=n(3565),u=n(362),d=n(299),f=n(15),p=["position","class","collapsible","tooltipPlacement"],h={graphId:"SharkGraph",graph:{},data:[],panel:{name:"SHARK Controls",iconClass:"fa-sitemap",width:335,sections:{}},views:{graph:{name:"SHARK Graph",iconClass:"fa-sitemap",type:"shark",active:!1,activateOptions:{itemType:"column",doNotCoupleWith:["SharkGraphinfo"],defaultSize:{height:Math.max($(document).height()/3,250)},alsoActivate:["SharkGraphinfo"]},containers:{}},table:{name:"SHARK Table",iconClass:"fa-table",type:"shark",active:!1,activateOptions:{itemType:"row",doNotCoupleWith:["SharkGraphinfo","SharkGraphgraph"],alsoActivate:["SharkGraphinfo"]},options:{}}},interactions:{}},g={graphs:[],info:{name:"SHARK Info",displayId:"SharkGraphinfo",iconClass:"fa-info",type:"shark",active:!1,activateOptions:{itemType:"stack",defaultSize:{width:Math.max($(document).width()/5,250)}},nodeInfoOptions:{},edgeInfoOptions:{},nodeRelationshipOptions:{}}},m=function(){function t(t,e){this.dummyDataService=t,this.orionConf=e}return t.prototype.getOptions=function(){var t=this,e=this.orionConf.getBasicGraphContainers(),n=e.rightBar.sections;h.data=this.dummyDataService.getDummyData(),h.graph=this.orionConf.getBasicGraph(),h.panel.sections=e.leftBar.sections,h.views.graph.containers={topBar:e.topBar},h.views.table.options=u(e,["bottomBar","sections","section1","control","options","list"]),g.info.nodeRelationshipOptions=n.section2.control.options,g.info.nodeInfoOptions=n.section3.control.options,g.info.edgeInfoOptions=n.section4.control.options,g.graphs=[h];var r=s(g,f.config.get("orion"),function(t,e){if(o(t))return e});return r.graphs=d(r.graphs,function(e){var n=s({},h,e,function(t,e){if(o(t))return e});return t.formatPanelControls(n.panel.sections),n}),r},t.prototype.formatPanelControls=function(t){r(t,function(t){t&&(t.control.options=l(c(t.control.options,i),p),r(t.control.options,function(e,n){a(e)&&(t.control.options[n]={})}))})},t.$inject=["ccri.orion.dummyDataService","ccri.orion.configService"],t}();e.ConfigService=m},function(t,e,n){var r=n(206),i=n(179),o="[object Boolean]";t.exports=function(t){return!0===t||!1===t||i(t)&&r(t)==o}},function(t,e,n){var r=n(3545),i=n(3549)(function(t,e,n,i){r(t,e,n,i)});t.exports=i},function(t,e,n){var r=n(476),i=n(1200),o=n(1182),a=n(3546),s=n(119),l=n(489);t.exports=function t(e,n,c,u,d){e!==n&&o(n,function(o,l){if(s(o))d||(d=new r),a(e,n,l,c,t,u,d);else{var f=u?u(e[l],o,l+"",e,n,d):void 0;void 0===f&&(f=o),i(e,l,f)}},l)}},function(t,e,n){var r=n(1200),i=n(1193),o=n(1196),a=n(1194),s=n(1197),l=n(481),c=n(69),u=n(3547),d=n(482),f=n(665),p=n(119),h=n(1201),g=n(669),m=n(3548);t.exports=function(t,e,n,v,y,b,w){var _=t[n],x=e[n],S=w.get(x);if(S)r(t,n,S);else{var C=b?b(_,x,n+"",t,e,w):void 0,E=void 0===C;if(E){var T=c(x),M=!T&&d(x),k=!T&&!M&&g(x);C=x,T||M||k?c(_)?C=_:u(_)?C=a(_):M?(E=!1,C=i(x,!0)):k?(E=!1,C=o(x,!0)):C=[]:h(x)||l(x)?(C=_,l(_)?C=m(_):(!p(_)||v&&f(_))&&(C=s(x))):E=!1}E&&(w.set(x,C),y(C,x,v,b,w),w.delete(x)),r(t,n,C)}}},function(t,e,n){var r=n(207),i=n(179);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){var r=n(300),i=n(489);t.exports=function(t){return r(t,i(t))}},function(t,e,n){var r=n(3550),i=n(3555);t.exports=function(t){return r(function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var l=n[r];l&&t(e,l,r,a)}return e})}},function(t,e,n){var r=n(364),i=n(1202),o=n(1203);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(3553),i=n(1186),o=n(364),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,i=Date.now;t.exports=function(t){var e=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(361),i=n(207),o=n(483),a=n(119);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(363),i=n(1192),o=n(3557),a=n(297),s=n(300),l=n(3560),c=n(3561),u=n(679),d=c(function(t,e){var n={};if(null==t)return n;var c=!1;e=r(e,function(e){return e=a(e,t),c||(c=e.length>1),e}),s(t,u(t),n),c&&(n=i(n,7,l));for(var d=e.length;d--;)o(n,e[d]);return n});t.exports=d},function(t,e,n){var r=n(297),i=n(1187),o=n(3558),a=n(298);t.exports=function(t,e){return e=r(e,t),null==(t=o(t,e))||delete t[a(i(e))]}},function(t,e,n){var r=n(484),i=n(3559);t.exports=function(t,e){return e.length<2?t:r(t,i(e,0,-1))}},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},function(t,e,n){var r=n(1201);t.exports=function(t){return r(t)?void 0:t}},function(t,e,n){var r=n(3562),i=n(1202),o=n(1203);t.exports=function(t){return o(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(3563);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var r=n(667),i=n(3564);t.exports=function t(e,n,o,a,s){var l=-1,c=e.length;for(o||(o=i),s||(s=[]);++l<c;){var u=e[l];n>0&&o(u)?n>1?t(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},function(t,e,n){var r=n(296),i=n(481),o=n(69),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e,n){var r=n(363),i=n(295),o=n(3566),a=n(679);t.exports=function(t,e){if(null==t)return{};var n=r(a(t),function(t){return[t]});return e=i(e),o(t,n,function(t,n){return e(t,n[0])})}},function(t,e,n){var r=n(484),i=n(1185),o=n(297);t.exports=function(t,e,n){for(var a=-1,s=e.length,l={};++a<s;){var c=e[a],u=r(t,c);n(u,c)&&i(l,o(c,t),u)}return l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3568),o=n(3569),a=n(3571),s=n(3573);e.default=r.module("stealth.legend",["ccri.angular-utils","ccri.bars","ccri.popup","stealth.core.geo.ows","stealth.core.geo.ol3.map"]).namespace().service("registrar",i.Registrar).directive("display",o.display).directive("button",a.button).run(["$rootScope","ccri.angular-utils.WidgetDef","ccri.bars.mgr","ccri.bars.Widget","owsLayers","stealth.core.geo.ol3.map.Events","stealth.legend.registrar","ol3Map",s.run])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(133),i=n(53),o=n(23),a=n(2),s=n(18),l=n(30),c=n(681),u=n(324),d=function(){function t(){this.legendData={}}return t.prototype.initLegend=function(t,e){this.setLegendDataAt([t],r(e)),this.setLegendDataAt([t,"watching"],{}),this.setLegendDataAt([t,"displayed"],!1)},t.prototype.removeLegend=function(t){delete this.legendData[t]},t.prototype.add=function(t,e){i(this.legendData,t)&&(this.setLegendDataAt([t,"watching",e],!0),this.setLegendDataAt([t,"displayed"],!0))},t.prototype.remove=function(t,e){i(this.legendData,t)&&(delete this.legendData[t].watching[e],this.setLegendDataAt([t,"displayed"],this.legendHasLayers(t)))},t.prototype.addPair=function(t,e){this.getLegendPairs(t)&&this.getLegendPairs(t).unshift(e)},t.prototype.removePair=function(t,e){this.getLegendPairs(t)&&c(this.getLegendPairs(t),{itemId:e.itemId})},t.prototype.updatePair=function(t,e){if(this.getLegendPairs(t)){var n=o(this.getLegendPairs(t),{itemId:e.itemId});n&&l(n,e)}},t.prototype.setLegendDataAt=function(t,e){u(this.legendData,t,e)},t.prototype.legendHasLayers=function(t){return!s(a(this.legendData,[t,"watching"],{}))},t.prototype.getLegendPairs=function(t){return a(this.legendData,[t,"pairs"],null)},t}();e.Registrar=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3570);function i(t){return{restrict:"E",template:r,scope:{},controller:["$scope",function(e){e.legendData=t.legendData}]}}e.display=i,i.$inject=["stealth.legend.registrar"]},function(t,e){t.exports='<div class="legendDisplay">\n    <div ng-repeat="(legendKey, legend) in legendData " class="legendSection">\n        <div ng-if="legend.displayed">\n            <div class="legendTitle" ng-if="legend.title">{{ legend.title }}</div>\n            <div ng-if="!legend.pairs">\n                <img ng-src="{{ legend.url }}"/>\n            </div>\n            <div ng-repeat="pair in legend.pairs" class="legendItem buf-md-mv">\n                <div ng-if="pair.url">\n                    <img ng-src="{{ pair.url }}"/> {{ pair.label }}\n                </div>\n                <div ng-if="!pair.url" class="flex-row flex-align-items-center">\n                    <i ng-if="pair.iconclass"\n                        class="fa fa-fw {{ pair.iconclass }} flex-static"\n                        style="color:{{ pair.color }}"\n                    ></i>\n                    <div ng-if="pair.useColorModeIcon"\n                        class="legendColorIcon flex-static"\n                        style="background:{{ pair.color }}"\n                    ></div>\n                    {{ pair.label }}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(44),o=n(3572),a=n(113);function s(t,e,n){return{restrict:"E",template:o,scope:{},controller:["$scope",function(n){function o(){return n.currentState===n.LegendStates.POPUP}n.LegendStates={OFF:0,POPUP:1},n.currentState=n.LegendStates.OFF,n.changeState=function(){return n.currentState++,n.currentState>=i(n.LegendStates).length&&(n.currentState=0),o()?function(){var i=r.element(".primaryDisplay > ccri-popup-container").data("ccri.popup.containerId"),s=e.getViewportDim(i);n.legendPopup=e.displayPopup(i,"Legend","legend","ccri-icon ccri-icon-legend",new t({tag:"stealth-legend-display"}),{resizable:!0,positioning:a.Popup.Positioning.BottomRight,offsets:s,onClose:function(){o()&&n.changeState()},contentMinWidth:150,contentWidth:150,contentHeight:240})}():e.closePopup(n.legendPopup),n.currentState}}]}}e.button=s,s.$inject=["ccri.angular-utils.WidgetDef","ccri.popup.manager","stealth.legend.registrar"]},function(t,e){t.exports='<div class="btn action-btn bar-btn bar-color2 bar-btn-toggle" ng-click="changeState()"\n     ng-class="{\'bar-btn-toggle-on\': currentState != LegendStates.OFF}"\n     uib-tooltip="Legend" tooltip-class="nowrap"\n     tooltip-placement="bottom-right" tooltip-animation="true"\n     tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n     tooltip-class="nowrap">\n    <i class="fa fa-lg ccri-icon ccri-icon-legend"></i>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=n(2),o=n(18),a=n(4),s=n(285),l=n(149),c=n(24),u=n(15);e.run=function(t,e,n,d,f,p,h,g){function m(t){return i(t.getCapabilities(),"legend.legendKey",null)}function v(t){return i(t.getCapabilities(),"legend.section",!1)}function y(t){var e=m(t),n=i(t.getCapabilities(),"legend.title",t.Name),r=i(t.getCapabilities(),"legend.pairs",null),o=i(t.getCapabilities(),"legend.url",null);h.initLegend(e,{title:n,pairs:r,url:o})}t.$on(p.addLayer,function(t,e,n){if(v(e)&&!n)y(e);else{var r=m(e),i=n&&n.getLegendItem?n.getLegendItem():null,o=i?i.itemId:e.id;h.add(r,o),i&&h.addPair(r,i)}}),t.$on(p.removeLayer,function(t,e,n){if(v(e)&&!n)h.removeLegend(m(e));else{var r=m(e),i=n&&n.getLegendItem?n.getLegendItem():null,o=i?i.itemId:e.id;h.remove(r,o),i&&h.removePair(r,i)}}),t.$on(p.updateLayer,function(t,e,n){if(n&&n.getLegendItem){var r=m(e);h.updatePair(r,n.getLegendItem())}}),n.insert("top",new d({widget:new e({tag:"stealth-legend-button"})}),l.Position[l.Position.Last],"750"),f.getLayers("capability.legend").then(function(t){r(t,function(t){var e=null,n=null,r=null,l=null,u=null;(function(t){return!o(i(t,"KeywordConfig.capability.legend",!1))})(t)&&(e=t.Name,n=function(t){return i(t,"KeywordConfig.capability.legend.title",t.Name)}(t),r=function(t){var e=(t.serverUrl||c.DataSourceManager.getPrimaryOgcConfig().url)+"/wms?REQUEST=GetLegendGraphic&FORMAT=image/png&WIDTH=16&HEIGHT=16&TRANSPARENT=true&LAYER="+t.Name+"&LEGEND_OPTIONS=fontColor:0xFFFFFF";return i(t,"KeywordConfig.capability.legend.url",e)}(t),l=["url","iconclass","color","label"],function(t){return!o(i(t,"KeywordConfig.capability.legend.item",!1))}(t)&&(u=a(function(t){return i(t,"KeywordConfig.capability.legend.item",[])}(t),function(t){return function(e){return s(e,t)}}(l))),h.initLegend(e,{pairs:u,title:n,url:r}))})}),r(u.config.get("legends",[]),function(t){h.initLegend(t.legendKey,t)}),r(g.getLayersReversed(),function(t){v(t)&&y(t)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);r.module("stealth.bullseye").namespace(),n(3575);var i=n(3593),o=n(3594),a=n(3596),s=n(3597),l=n(3598),c=n(3599),u=n(3600),d=n(3601),f=n(3602);e.default=r.module("stealth.bullseye",["stealth.core.geo.controls.mousePosition","stealth.core.geo.ol3.layers","stealth.core.geo.ol3.map","stealth.core.geo.ol3.geodetics","stealth.core.mapTooltips","toastr"]).service("bullseyeVisuals",o.BullseyeVisualsService).service("zoomPreview",f.ZoomPreviewService).factory("displaySettings",["stealth.core.measureService",function(t){return new s.DisplaySettings(t)}]).factory("layers",["stealth.core.geo.ol3.layers.MapLayer","ol3Map",function(t,e){return new c.LayersService(t,e)}]).factory("toastrMessages",["toastr",function(t){return{saveSucceeded:function(){t.success("Bullseye saved.")},saveFailed:function(){t.error("Bullseye save failed.")},deleteSucceeded:function(){t.success("Bullseye successfully deleted.")},deleteFailed:function(){t.error("Bullseye failed to delete.")},loadFailed:function(){t.error("Failed to load bullseyes from server.")}}}]).factory("activeBullseye",["stealth.bullseye.displaySettings","stealth.bullseye.bullseyeVisuals","stealth.bullseye.layers",function(t,e,n){return new i.ActiveService(t,e,n)}]).factory("highlightPreview",["stealth.bullseye.bullseyeVisuals","stealth.bullseye.displaySettings","stealth.bullseye.layers",function(t,e,n){return new l.HighlightPreviewService(t,e,n)}]).factory("data",["$q","stealth.bullseye.toastrMessages","stealth.bullseye.activeBullseye",function(t,e,n){return new a.DataService(t,e,n)}]).factory("mousePositionInfo",["mousePosition","ol3Geodetics",function(t,e){return new u.MousePositionInfoService(t,e)}]).factory("mouseTooltip",["$filter","mousePosition","MapTooltip","stealth.bullseye.displaySettings","stealth.bullseye.mousePositionInfo","stealth.bullseye.activeBullseye",function(t,e,n,r,i,o){return new d.MouseTooltip(e,n,o,r,i,t("number"))}]).run(["stealth.bullseye.data","stealth.bullseye.displaySettings","stealth.bullseye.layers","stealth.bullseye.mouseTooltip",function(t,e,n,r){n.addMapLayerToMap(),t.load(),e.color="rgba(0,255,191,1)"}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(3576),n(3578),n(3580),n(3581),n(3583),n(3585),n(3587),n(3588),n(3589),n(3591)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(22),o=n(3577);function a(t,e){var n=t.$on("$destroy",function(){n(),n=null,i(o,function(t){t()}),o=null,e.off("changed",s),t=null});t.vm={};var r=!1;e.on("changed",s),a();var o=[];function a(){t.vm.showMouseTooltip=e.showMouseTooltip,t.vm.labelTracks=e.labelTracks,t.vm.showNameLabel=e.showNameLabel}function s(){r||(a(),t.$digest())}o.push(t.$watch("vm.showMouseTooltip",function(){r=!0,e.showMouseTooltip=t.vm.showMouseTooltip,r=!1})),o.push(t.$watch("vm.labelTracks",function(){r=!0,e.labelTracks=t.vm.labelTracks,r=!1})),o.push(t.$watch("vm.showNameLabel",function(){r=!0,e.showNameLabel=t.vm.showNameLabel,r=!1}))}a.$inject=["$scope","stealth.bullseye.displaySettings"],e.DisplaySettingsDisplayCtrl=a,r.module("stealth.bullseye",[]).directive("displaySettingsDisplay",[function(){return{restrict:"E",template:o,controller:a}}])},function(t,e){t.exports='<div>\n\n    <label class="clickable">\n        <ccri-angular-utils-checkbox ng-model="vm.showMouseTooltip"></ccri-angular-utils-checkbox>\n        Show cursor tooltip\n    </label>\n    <br>\n\n    \x3c!--<label class="clickable">\n        <ccri-angular-utils-checkbox ng-model="vm.labelTracks"></ccri-angular-utils-checkbox>\n        Label tracks on map\n    </label>\n    <br>--\x3e\n\n    <label class="clickable">\n        <ccri-angular-utils-checkbox ng-model="vm.showNameLabel"></ccri-angular-utils-checkbox>\n        Show name label\n    </label>\n    <br>\n\n\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(133),o=n(408),a=n(22),s=n(42),l=n(2),c=n(18),u=n(50),d=n(4),f=n(1204),p=n(271),h=n(90),g=n(457),m=n(3579);function v(t,e,n,g,m,v,y,b,w){var _=t.$on("$destroy",function(){_(),_=null,E(),E=null,k(),k=null,A(),A=null,O(),O=null,M=null,I&&(I.destroy(),I=null),x&&(m.cancel(x),x=null),t.bullseye=null,t=null});if(!t.settings)throw"Needs settings object";t.ringInputMode=null,t.numRings=null,t.ringSpacing=null,t.maxRange=null,t.initTooltip={},t.coordinateState="init",t.coordinateTooltip="Please enter a valid coordinate";var x,S,C=["kilometer","mile","nauticalmile"];t.bullseye.displayUnits||(b.value?t.bullseye.displayUnits=b.value:y.distanceUnits&&C.indexOf(y.distanceUnits)>=0?t.bullseye.displayUnits=y.distanceUnits:t.bullseye.displayUnits="nauticalmile"),b.value=t.bullseye.displayUnits,t.bullseye.rings=t.bullseye.rings||d([40,80,120,160,200],function(e){return h.converter.convert(e,t.bullseye.displayUnits,"meter")}),t.bullseye.center=t.bullseye.center||null,t.bullseye.magVar=t.bullseye.magVar||0,t.displayRings=t.bullseye.rings.map(function(e){return e?h.converter.convert(e,"meter",t.bullseye.displayUnits):e});var E=t.$watchCollection("displayRings",function(){L(),P()});p(t.displayRings.slice(1).map(function(e,n){return e-t.displayRings[n]})).length>1?D("manual"):D("generated"),t.switchRingInputMode=D,t.numRingsChanged_changeMaxRange=function(){T=null,N()},t.numRingsChanged_changeRingSpacing=function(){T=null,R()},t.ringSpacingChanged=function(){T=null,N()},t.maxRangeChanged=function(){T=null,R()},t.onMagVarBlur=function(){t.bullseye.magVar||0===t.bullseye.magVar||(F(),P())},t.changed=P,t.isSelectingCenter=!1,t.selectCenterButtonClick=function(){t.isSelectingCenter?(t.isSelectingCenter=!1,m.cancel(x),S&&(t.bullseye.center=S),x=null):(t.isSelectingCenter=!0,S=t.bullseye.center,t.bullseye.center=null,(x=m(g.getMap())).then(function(e){t.bullseye.center=[e[0],e[1]],S=null,t.isSelectingCenter=!1,x=null}))};var T=null;t.classifications=c(l(n,"air.classifications"))?c(l(n,"classification.options"))?["UNCLASSIFIED"]:n.classification.options:n.air.classifications,t.units=function(t){var e=[];return s(t,function(t){var n=h.converter.getUnit(t);n&&e.push({value:n.id,label:n.display})}),e}(C),t.labelUnitOption=function(t){return t.label},t.selectUnitOption=function(t){return t.value};var M={showMouseTooltip:!1,labelTracks:!1,showNameLabel:!0,distanceUnits:t.bullseye.displayUnits,distanceUnitsSuffix:h.converter.getUnitSymbol(t.bullseye.displayUnits),color:"rgba(255,82,64,1)"};t.editingDisplaySettings=M;var k=t.$watch("bullseye.displayUnits",function(){b.value=t.bullseye.displayUnits,M.distanceUnits=t.bullseye.displayUnits,M.distanceUnitsSuffix=h.converter.getUnitSymbol(t.bullseye.displayUnits),L(),P()}),A=t.$watchCollection("bullseye.center",function(e,n){e!==n&&(F(),P(),t.coordinateState=null===t.bullseye.center||void 0===t.bullseye.center?"invalid":"valid",r.forEach(t.initTooltip,function(e,n){n===t.coordinateState&&(t.coordinateTooltip=e)}))}),I=v.create(w.editingLayer,t.bullseye,M),O=t.$watch("settings.saveItem",function(){!1===t.settings.saveItem&&(t.bullseye.isPublic=!1)});function P(){I&&I.repaint()}function L(){t.bullseye.rings.length=0,s(t.displayRings,function(e){t.bullseye.rings.push(e?h.converter.convert(e,t.bullseye.displayUnits,"meter"):e)})}function D(e){t.ringInputMode=e,"manual"===e?(T&&(t.displayRings.length=0,a(T,function(e){t.displayRings.push(e)}),T=null),0===t.displayRings.length&&t.displayRings.push(null)):(T||(T=i(t.displayRings)),t.displayRings&&t.displayRings.length>100&&t.displayRings.splice(100),function(){var e=t.displayRings;if(0===o(e).length)return void(t.numRings=0);t.numRings=null,t.maxRange=null,t.ringSpacing=null;var n=e.length,r=0;e.length&&(r=f(e)||0);r&&(t.maxRange=r);var i=0;n&&(i=r/n);i&&(t.ringSpacing=i);(r||i)&&(t.numRings=n)}(),B(t.numRings,t.ringSpacing))}function N(){t.maxRange=null,t.numRings=t.numRings;var e=t.numRings,n=t.ringSpacing,r=n*e;r&&(t.maxRange=r),B(e,n)}function R(){t.ringSpacing=null;var e=t.numRings||0,n=t.maxRange||0,r=null;e&&(r=n/e),r&&(t.ringSpacing=r),B(e,r)}function F(){var e=t.bullseye.center;if(e&&u(e[0])&&u(e[1])){var n=Geo.geomagnetism.getMagVarAtCoordinate(e);t.bullseye.magVar=parseFloat(n.toFixed(4))}}function B(e,n){for(var r,i=[],o=1,a=e;o<=a;++o)u(n)?i.push(o*n):i.push(null);(r=t.displayRings).splice.apply(r,[0,t.displayRings.length].concat(i))}}v.$inject=["$scope","$element","CONFIG","ol3Map","ccri.area-definition.utils.selectPoint","stealth.bullseye.bullseyeVisuals","stealth.bullseye.displaySettings","stealth.bullseye.lastSelectedUnits","stealth.bullseye.layers"],e.EditorController=v,r.module("stealth.bullseye",[g.module.name,"ccri.area-definition.utils","ccri.angular-utils","stealth.config","stealth.core.geo.ol3.map"]).directive("editor",[function(){return{restrict:"E",template:m,scope:{bullseye:"=",settings:"="},controller:v}}]).constant("lastSelectedUnits",{value:null})},function(t,e){t.exports='<div class="bullseye-editor" ng-form="bullseyeEditor">\n    <form novalidate>\n        \x3c!-- Bullseye name --\x3e\n        <div class="form-row">\n            <div class="form-row-left">\n                Name:\n            </div>\n            <div class="form-row-right">\n                <input name="name" ng-model="bullseye.name" ng-change="changed()" placeholder="Enter name"\n                       class="error-outline-dirty"\n                       required maxlength="8" pattern="[a-zA-Z0-9]+">\n            </div>\n        </div>\n\n        \x3c!-- Classification --\x3e\n        <div class="form-row">\n            <div class="form-row-left">\n                Classification:\n            </div>\n            <div class="form-row-right">\n                <ccri-angular-utils-select\n                        ng-model="bullseye.classification"\n                        from-list="::classifications" required\n                        class="error-outline-dirty"\n                        placeholder="Select a classification" hide-tooltip="true"\n                ></ccri-angular-utils-select>\n            </div>\n        </div>\n\n        \x3c!-- Center point --\x3e\n        <div class="form-row">\n            <div class="form-row-left">\n                Center:\n            </div>\n            <div class="form-row-right flex-row">\n                <div>\n                    <input name="center" ng-model="bullseye.center"\n    placeholder="Enter lat, long" required\n                        class="error-outline-dirty"\n                        ng-init="initTooltip={\n                            init: \'Please enter a valid coordinate\',\n                            valid: \'Coordinate is valid\',\n                            invalid: \'Invalid coordinate\'\n                        }"\n                        uib-tooltip="{{coordinateTooltip}}"\n                        ccri-geocoder-coordinate-input\n                        ng-change="changed()">\n                </div>\n                <div>\n                    <a class="clickable click-padded"\n                            uib-tooltip-html="(isSelectingCenter ? \'Cancel Selection\' : \'Select center\')"\n                            tooltip-class="nowrap" tooltip-popup-delay="600"\n                            tooltip-append-to-body="true"\n                            ng-click="selectCenterButtonClick()"\n                    ><i class="fa fa-lg fa-crosshairs"></i></a>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Ring input mode chooser --\x3e\n        <div class="form-row">\n            <div class="form-row-left">\n                Rings:\n            </div>\n            <div class="form-row-right">\n                <span class="clickable" ng-click="switchRingInputMode(\'generated\')">\n                    <i class="fa fa-circle-o" ng-class="(ringInputMode === \'generated\') ? \'fa-dot-circle-o\' : \'fa-circle-o\'"></i>\n                    Generate\n                </span>\n                <br>\n                <span class="clickable" ng-click="switchRingInputMode(\'manual\')">\n                    <i class="fa fa-circle-o" ng-class="(ringInputMode === \'manual\') ? \'fa-dot-circle-o\' : \'fa-circle-o\'"></i>\n                    Input manually\n                </span>\n            </div>\n        </div>\n\n        \x3c!-- Ring generation fields --\x3e\n        <div class="well" ng-class="{\'ng-hide\': ringInputMode !== \'generated\'}">\n            <div class="form-row buf-xs-mb">\n                <div class="form-row-left">\n                    Interval:\n                </div>\n                <div class="form-row-right flex-row">\n                    <input type="number" step="any" name="ringSpacing" class="buf-xs-mr error-outline-dirty"\n                            ng-model="ringSpacing" min="1" ng-change="ringSpacingChanged()" required\n                            style="flex: 1 1 45px;">\n                    <ccri-angular-utils-select ng-model="bullseye.displayUnits" hide-tooltip="true"\n                            from-list="::units" label-fn="labelUnitOption" select-fn="selectUnitOption" required\n                            class="error-outline-dirty"\n                            id="bullseye-select-unit--generate"\n                            style="flex: 1 1 85px;"\n                    ></ccri-angular-utils-select>\n                </div>\n            </div>\n            <div class="form-row buf-xs-mb">\n                <div class="form-row-left">\n                    No. rings:\n                </div>\n                <div class="form-row-right">\n                    <input type="number" step="1" name="numRings" ng-model="numRings" min="1" max="100" required\n                            class="error-outline-dirty"\n                            ng-change="numRingsChanged_changeMaxRange()">\n                </div>\n            </div>\n\n            \x3c!-- A second way to generate rings:the maxRange divided by the number of rings\n            <hr>\n\n            <div class="form-row buf-xs-mb">\n                <div class="form-row-left">\n                    Max range:\n                </div>\n                <div class="form-row-right flex-row">\n                    <input type="number" step="any" name="maxRange" class="buf-xs-mr"\n                            ng-model="maxRange" min="1" ng-change="maxRangeChanged()">\n                    <ccri-angular-utils-select\n                            ng-model="unit"\n                            from-list="::units" required\n                            class="error-outline-dirty"\n                            hide-tooltip="true"\n                    ></ccri-angular-utils-select>\n                </div>\n            </div>\n            <div class="form-row buf-0-mb">\n                <div class="form-row-left">\n                    No. rings:\n                </div>\n                <div class="form-row-right">\n                    <input type="number" step="1" name="numRings" ng-model="numRings" min="1"\n                            ng-change="numRingsChanged_changeRingSpacing()">\n                </div>\n            </div>\n            --\x3e\n\n            \x3c!-- Rings (generated mode) --\x3e\n            <div class="form-row buf-0-mb">\n                <div class="form-row-left">\n                    <span ng-class="{\'ng-hide\': ringInputMode === \'manual\'}"></span>\n                </div>\n                <div class="form-row-right" id="bullseye-rings--generated"\n                     style="max-height: 120px; overflow-y: auto; padding: 1px; margin: -1px">\n                    <div ng-repeat="ring in displayRings track by $index | limitTo: 100" ng-form="bullseyeRing" class="flex-row buf-xs-mt"\n                            ng-class="{\'buf-0-mt\': $first}">\n                        <input type="number" step="any" name="ring" ng-model="displayRings[$index]" disabled\n                                ccri-angular-utils-number>\n                    </div>\n                    \x3c!-- Add item button --\x3e\n                    <div ng-class="{\'ng-hide\': ringInputMode !== \'manual\'}">\n                    <span class="clickable" ng-click="displayRings.push(null);">\n                        <a class="click-padded">\n                            <i class="fa fa-plus-circle text-primary"></i>\n                            Add\n                        </a>\n                    </span>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n\n        \x3c!-- Rings (manual entry mode) --\x3e\n        <div class="form-row" ng-class="{\'ng-hide\': ringInputMode !== \'manual\'}">\n            <div class="form-row-left">\n                <span ng-class="{\'ng-hide\': ringInputMode === \'manual\'}">Result:    </span>\n            </div>\n            <div class="form-row-right" style="max-height: 140px; overflow-y: auto;">\n                <div ng-repeat="ring in displayRings track by $index" ng-form="bullseyeRing" class="flex-row buf-xs-mt"\n                    ng-class="{\'buf-0-mt\': $first}">\n                    <input type="number" step="any" name="ring" ng-model="displayRings[$index]" ng-change="changed()"\n                            required min="1" ng-disabled="ringInputMode !== \'manual\'"\n                            ccri-angular-utils-number\n                            class="buf-xs-mr error-outline-dirty" style="flex: 0 0 55px;">\n                    <span style="flex: 1 1 auto; overflow: hidden">\n                        <ccri-angular-utils-select ng-model="bullseye.displayUnits" from-list="::units"\n                                label-fn="labelUnitOption" select-fn="selectUnitOption" required\n                                class="error-outline-dirty"\n                                hide-tooltip="true"\n                                ng-if="$first"\n                        ></ccri-angular-utils-select>\n                    </span>\n                    <input value="{{bullseye.displayUnits | unitDisplay}}" disabled ng-if="!$first"\n                            style="flex: 1 1 auto;">\n                    \x3c!-- Delete item button --\x3e\n                    <ccri-angular-utils-close-btn class="click-padded text-muted"\n                            ng-class="{\'ng-hide\': (ringInputMode !== \'manual\') || (displayRings.length === 1)}"\n                            ng-click="displayRings.splice($index, 1)"\n                            style="flex: 0 0 18px;"\n                    ></ccri-angular-utils-close-btn>\n                </div>\n                \x3c!-- Add item button --\x3e\n                <div ng-class="{\'ng-hide\': ringInputMode !== \'manual\'}">\n                    <span class="clickable" ng-click="displayRings.push(null);">\n                        <a class="click-padded">\n                            <i class="fa fa-plus-circle"></i>\n                            Add\n                        </a>\n                    </span>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Magnetic Variation --\x3e\n        <div class="form-row">\n            <div class="form-row-left">\n                Magnetic var.:\n                <ccri-angular-utils-heading-plot\n                        value="bullseye.magVar"\n                        style="width: 22px; height: 22px; vertical-align: middle;"\n                ></ccri-angular-utils-heading-plot>\n            </div>\n            <div class="form-row-right">\n                <input type="number" step="any" name="magVar" ng-model="bullseye.magVar" required\n                       class="error-outline-dirty"\n                       ccri-angular-utils-number="{\n                           upDown: true, upDownMin: 0, upDownMax: 360, upDownCycle: true, inclusiveMax: false,\n                           formatUnit: \'°\'\n                       }"\n                       ng-change="changed()" ng-blur="onMagVarBlur()">\n            </div>\n        </div>\n\n        \x3c!-- Save and Make Public --\x3e\n        <div class="form-row">\n            <div class="form-row-left">&nbsp;</div>\n            <div class="form-row-right">\n                <div ng-class="::{\'ng-hide\': bullseye.id}">\n                    <label class="clickable">\n                        <ccri-angular-utils-checkbox ng-model="settings.saveItem"\n                            id="bullseye-save-checkbox"></ccri-angular-utils-checkbox>&nbsp;\n                        Save for future use\n                    </label>\n                </div>\n                <div>\n                    <label class="clickable" ng-class="{disabled: !settings.saveItem}">\n                        <ccri-angular-utils-checkbox ng-model="bullseye.isPublic" ng-disabled="!settings.saveItem"\n                            id="bullseye-public-checkbox"></ccri-angular-utils-checkbox>&nbsp;\n                        Make public\n                    </label>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o,a,s,l,c,u,d,f=n(109),p=n(0),h=function(){function t(t,e,n,f,p,h,g,m,v){r=t,i=e,o=n,a=f,s=p,l=h,c=g,u=m,d=v}return t.prototype.editBullseye=function(t){var e=r.defer(),n=t?"Edit Bullseye":"Create Bullseye";t=t||{owner:s.userDn};var p=f(t),h=t.dateModified;h&&(p.dateModified=h.clone());var g=i.$new();g.editObj=p,g.settings={saveItem:!!p.id};var m=new u(n,new a({tag:"stealth-bullseye-wizard-edit-step",scope:g,isolateScope:!1}),null,!1,null,function(t){var n=r.defer();return t?function(t){var e,n=t.localId;g.settings.saveItem?e=t.id?c.update(t):c.add(t):(t.localId||c.local_add(t),e=r.when(t));return e=e.then(function(t){return l.removeActiveBullseye(n),l.addActiveBullseye(t),c.syncItem(c.loaded,n,t,!0).then(function(){return t})})}(p).then(function(t){v=!0,n.resolve(),e.resolve(t)}).catch(function(){n.reject()}):n.resolve(),n.promise},!1);m.setCssClass("wizardSide");var v=!1,y=new d(n,"ccri-icon ccri-icon-bullseye","fa-check text-success",[m],g,"BullseyeEditWizard wizard-dark",function(){v||e.reject(),g.$destroy(),e=h=p=t=g=y=null});return o.launchWizard(y),e.promise},t.$inject=["$q","$rootScope","stealth.wizard.wizardManager","ccri.angular-utils.WidgetDef","CONFIG","stealth.bullseye.activeBullseye","stealth.bullseye.data","stealth.wizard.Step","stealth.wizard.Wizard"],t}();e.WizardService=h,p.module("stealth.bullseye",["stealth.core.geo.ol3.map","stealth.core.wizard","ccri.angular-utils","ccri.area-definition.utils"]).service("editWizard",h).directive("wizardEditStep",function(){return{restrict:"E",template:'\n            <div ng-form="wizardForm">\n                <stealth-bullseye-editor bullseye="editObj" settings="settings"></stealth-bullseye-editor>\n            </div>\n        '}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(3582);function a(t){if(!i(t,"vm.item"))throw"Scope requires vm.item to be set."}a.$inject=["$scope"],e.ListItemCollapsedCtrl=a,r.module("stealth.bullseye",["ccri.angular-utils"]).directive("listItemCollapsed",[function(){return{restrict:"E",template:o,controller:a}}])},function(t,e){t.exports='<stealth-bullseye-mouse-position-display bullseye="vm.item"></stealth-bullseye-mouse-position-display>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(90),a=n(3584);function s(t,e){if(!i(t,"vm.item"))throw"Scope requires vm.item to be set.";var n=function(t){return e("numberTrim")(t,4)};t.ringsStr=function(t,e){return t?t.map(function(t){return n(o.converter.convert(t,"meter",e))}).join(", "):""}(t.vm.item.rings,t.vm.item.displayUnits)}s.$inject=["$scope","$filter"],e.ListItemContentCtrl=s,r.module("stealth.bullseye",["stealth.core.elements","ccri.angular-utils"]).directive("listItemContent",[function(){return{restrict:"E",template:a,controller:s}}])},function(t,e){t.exports='<div class="list-item-content">\n    <div ng-if="!isSavedList">\n        <stealth-bullseye-mouse-position-display bullseye="vm.item"></stealth-bullseye-mouse-position-display>\n    </div>\n    <div class="small">{{::vm.item.classification}}</div>\n    <dl class="value-list">\n        <dt>Center (Lat, Lon):</dt>\n        <dd>{{::vm.item.center[1] | numberTrim:4}}, {{::vm.item.center[0] | numberTrim:4}}</dd>\n    </dl>\n\n    <div class="value-list-row list-item-background-color" ccri-angular-utils-maxheight-toggle="64px">\n        <label>Rings ({{::vm.item.displayUnits | unitSymbol}}):</label> {{::ringsStr}}\n    </div>\n\n    <dl class="value-list">\n        <dt>Magnetic variation:</dt>\n        <dd>{{::vm.item.magVar | numberTrim:4}}°</dd>\n\n        <dt>Modified:</dt>\n        <dd><st-datetime date="vm.item.dateModified" moment-date-format="YYYY MMM DD"></st-datetime></dd>\n\n        <dt>Owner:</dt>\n        <dd>{{::vm.item.owner}}</dd>\n    </dl>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(3586);function a(t,e){if(!i(t,"vm.item"))throw"Scope requires vm.item to be set.";t.isActive=e.isActive(t.vm.item),t.toggleActive=function(){e.isActive(t.vm.item)?(e.removeActiveBullseye(t.vm.item.localId),t.isActive=!1):(e.addActiveBullseye(t.vm.item),t.isActive=!0)}}a.$inject=["$scope","stealth.bullseye.activeBullseye"],e.ListItemTitleCtrl=a,r.module("stealth.bullseye",[]).directive("listItemTitle",[function(){return{restrict:"E",template:o,controller:a}}])},function(t,e){t.exports='<span class="list-item-title">\n    <span class="list-item-title-text clickable">\n        {{::vm.item.name}} {{::!vm.item.id ? \'(unsaved)\' : \'\'}}\n    </span>\n\n    \x3c!-- Public/Private icon -- hide if unsaved --\x3e\n    <span ng-class="::{\'ng-hide\': !vm.item.id}"\n          style="margin-left: 3px">\n        <span class="list-item-title-flag" ng-class="::{\'ng-hide\': !vm.item.isPublic}"\n              uib-tooltip="This bullseye is public" tooltip-popup-delay="300"\n        >\n            <i class="fa fa-lg fa-unlock"></i>\n        </span>\n        <span class="list-item-title-flag" ng-class="::{\'ng-hide\': vm.item.isPublic}"\n              uib-tooltip="This bullseye is private" tooltip-popup-delay="300"\n        >\n            <i class="fa fa-lg fa-lock"></i>\n        </span>\n    </span>\n\n    \x3c!-- Toggle active --\x3e\n    <span class="list-item-title-flag clickable click-padded"\n        ng-class="{\'ng-hide\': isSavedList, \'active\': isActive}"\n        ng-click="toggleActive(); $event.stopPropagation();"\n        uib-tooltip="Toggle active" tooltip-popup-delay="300" tooltip-append-to-body="true"\n        style="margin-left: 3px"\n    >\n        <i class="ccri-icon ccri-icon-map-pin" style="font-size: 14px;"></i>\n    </span>\n</span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(432),o=n(2),a=n(15),s=n(1205);function l(t,e,n,r,l,c,u,d,f){var p=t.$on("$destroy",function(){p(),p=null,t.arrayStore_loaded=t.decorateCard=t.menuResolver=t.onMouseEnter=t.onMouseLeave=null,t=null,i(function(){h=null},500)}),h=u.loaded;function g(t){l.removeActiveBullseye(t),h.getById(t).then(function(t){h.delete(t)})}function m(){l.clearActiveBullseyes()}t.arrayStore_loaded=h,t.decorateCard=function(t){var e=t.scope;e.vm={item:e.record},t.titleWidget=new r({tag:"stealth-bullseye-list-item-title",scope:e,isolateScope:!0}),t.collapsedWidget=new r({tag:"stealth-bullseye-list-item-collapsed",scope:e,isolateScope:!0}),t.contentWidget=new r({tag:"stealth-bullseye-list-item-content",scope:e,isolateScope:!0})},t.menuResolver=function(t){var e=[];o(l,"active.bullseye.localId")===t?e.push({name:"Deactivate",onClick:m}):e.push({name:"Make Active",onClick:function(t){h.getById(t).then(function(t){l.addActiveBullseye(t)})}.bind(null,t)});e.push({name:"Zoom To",onClick:function(t){h.getById(t).then(function(t){t&&f.panTo(t)})}.bind(null,t)}),h.getById(t).then(function(n){n.id||e.splice(2,0,{name:"Save",onClick:function(t){h.getById(t).then(function(t){u.add(t)})}.bind(null,t)}),n.id&&n.owner===a.config.get("userDn")&&e.splice(3,0,{name:"Edit",onClick:function(t){l.hide(),h.getById(t).then(function(t){c.editBullseye(t).finally(function(){l.show()})})}.bind(null,t)})});var r={name:null,onClick:null};return e.push(r),h.getById(t).then(function(e){e.id?(r.name="Remove",r.onClick=g.bind(null,t)):(r.name="Delete",r.onClick=function(t){h.getById(t).then(function(e){n.open({size:"sm",template:s,controller:["$scope",function(n){n.name=e.name,n.delete=function(){g(t)}}],backdrop:"static",backdropClass:"wizardMask"})})}.bind(null,t))}),e},t.onMouseEnter=function(t){h.getById(t).then(function(t){d.highlightBullseye(t)})},t.onMouseLeave=function(){d.unhighlight()}}l.$inject=["$scope","$element","$uibModal","ccri.angular-utils.WidgetDef","stealth.bullseye.activeBullseye","stealth.bullseye.editWizard","stealth.bullseye.data","stealth.bullseye.highlightPreview","stealth.bullseye.zoomPreview"],e.loadedListDirectiveCtrl=l,r.module("stealth.bullseye",["ccri.angular-utils","ccri.list-view","ui.bootstrap"]).directive("loadedList",[function(){return{restrict:"E",scope:{},template:'\n        <ccri-list-view-element\n                class="bullseye-loaded-list bullseye-list anchorAll"\n                datastore="arrayStore_loaded"\n                decorate-card="decorateCard"\n                menu-resolver="menuResolver"\n                on-mouse-enter="onMouseEnter"\n                on-mouse-leave="onMouseLeave"\n        >\n        </ccri-list-view-element>\n        ',controller:l}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(432),o=n(15),a=n(1205);function s(t,e,n,r,s,l,c,u,d){var f=t.$on("$destroy",function(){f(),f=null,p=null,t.arrayStore_saved=t.decorateCard=t.menuResolver=t.onMouseEnter=t.onMouseLeave=t.refreshSavedList=t.loadingStatus=null,t=null,i(function(){h=null},500)}),p=c.loaded,h=c.saved;t.arrayStore_saved=h,t.decorateCard=function(t){var e=t.scope;e.vm={item:e.record},e.isSavedList=!0,t.titleWidget=new r({tag:"stealth-bullseye-list-item-title",scope:e,isolateScope:!0}),t.collapsedWidget=null,t.contentWidget=new r({tag:"stealth-bullseye-list-item-content",scope:e,isolateScope:!0})},t.menuResolver=function(t){var e=[];return e.push({name:"Add to Loaded",onClick:function(t){h.getById(t).then(function(t){p.add(t),s.addActiveBullseye(t)})}.bind(null,t)}),e.push({name:"Zoom To",onClick:function(t){h.getById(t).then(function(t){t&&d.panTo(t)})}.bind(null,t)}),h.getById(t).then(function(r){r.owner===o.config.get("userDn")&&(e.splice(2,0,{name:"Edit",onClick:function(t){s.hide(),h.getById(t).then(function(t){l.editBullseye(t).finally(function(){s.show()})})}.bind(null,t)}),e.splice(3,0,{name:"Delete",onClick:function(t){h.getById(t).then(function(t){n.open({size:"sm",template:a,controller:["$scope",function(e){e.name=t.name,e.delete=function(){c.deleteOne(t)}}],backdrop:"static",backdropClass:"wizardMask"})})}.bind(null,t)}))}),e},t.onMouseEnter=function(t){h.getById(t).then(function(t){u.highlightBullseye(t)})},t.onMouseLeave=function(){u.unhighlight()},t.refreshSavedList=function(){c.reload()},t.loadingStatus=c.loadingStatus}s.$inject=["$scope","$element","$uibModal","ccri.angular-utils.WidgetDef","stealth.bullseye.activeBullseye","stealth.bullseye.editWizard","stealth.bullseye.data","stealth.bullseye.highlightPreview","stealth.bullseye.zoomPreview"],e.savedListDirectiveCtrl=s,r.module("stealth.bullseye",["ccri.angular-utils","ccri.list-view","ui.bootstrap"]).directive("savedList",[function(){return{restrict:"E",scope:{},template:'\n        <ccri-list-view-element\n                class="bullseye-saved-list bullseye-list anchorAll"\n                datastore="arrayStore_saved"\n                decorate-card="decorateCard"\n                menu-resolver="menuResolver"\n                on-mouse-enter="onMouseEnter"\n                on-mouse-leave="onMouseLeave"\n                manual-refresh="refreshSavedList"\n                items-loading="loadingStatus.loading"\n        >\n        </ccri-list-view-element>\n        ',controller:s}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(276),o=n(3590);function a(t,e,n){var r=t.$on("$destroy",function(){r(),r=null,o&&e.off("tooltip-changed",o),t=o=null});t.distance=null,t.distanceUnitsSuffix=null,t.bearingFromCenter=null,t.magBearingFromCenter=null;var o=i(function(e){if(!t||e.bullseye.localId!==t.bullseye.localId)return;e.positionInfo.hasInfo?(t.distance=e.distance,t.distanceUnitsSuffix=n.distanceUnitsSuffix,t.bearingFromCenter=e.bearing,t.magBearingFromCenter=e.magBearing):(t.distance=null,t.distanceUnitsSuffix=null,t.bearingFromCenter=null,t.magBearingFromCenter=null);t.$digest()},100);e.on("tooltip-changed",o)}a.$inject=["$scope","stealth.bullseye.mouseTooltip","stealth.bullseye.displaySettings"],e.MousePositionDisplayCtrl=a,r.module("stealth.bullseye",[]).directive("mousePositionDisplay",[function(){return{restrict:"E",template:o,scope:{bullseye:"="},controller:a}}])},function(t,e){t.exports='<span ng-class="{\'ng-hide\': !(magBearingFromCenter || magBearingFromCenter === 0)}">\n    <span style="color: white">{{magBearingFromCenter}}</span>° mag\n</span>\n<span ng-class="{\'ng-hide\': !(bearingFromCenter || bearingFromCenter === 0)}">\n    (<span style="color: white">{{bearingFromCenter}}</span>° true)\n</span>\n/ <span style="color: white">{{distance | number:0}}</span>{{distance ? distanceUnitsSuffix : \'\'}}\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3592);function o(t,e,n,r,i,o){var a=t.$on("$destroy",function(){a(),a=null,null,null,t=null}),s=!1;t.createNew=function(){if(s)return;var t;return s=!0,n.hide(),r.editBullseye().then(function(e){t=e}).finally(function(){s=!1,t?n.addActiveBullseye(t):n.show()})};i.loaded,i.saved;t.activeList=o.activeList,t.changeList=function(e){t.activeList=e,o.activeList=e}}o.$inject=["$scope","$element","stealth.bullseye.activeBullseye","stealth.bullseye.editWizard","stealth.bullseye.data","stealth.bullseye.sidebarState"],e.sidebarPanelDirectiveCtrl=o,e.SidebarState={activeList:"loaded"},r.module("stealth.bullseye",["stealth.core.sidebar","stealth.core.startmenu"]).directive("sidebarPanel",[function(){return{restrict:"E",scope:{},template:i,controller:o}}]).constant("sidebarState",e.SidebarState).run(["$rootScope","ccri.angular-utils.WidgetDef","sidebarManager","startMenuManager",function(t,e,n,r){var i="ccri-icon ccri-icon-bullseye",o=new e({tag:"stealth-bullseye-sidebar-panel",scope:t.$new(),isolateScope:!0}),a=n.addButton("Bullseyes",i,250,o,null,!0);r.addButton("Bullseyes",i,function(){n.toggleButton(a,!0)}),o=null}])},function(t,e){t.exports='<div class="bullseye-sidepanel anchorAll flex-column">\n    <div class="bullseye-live-info-display">\n        <b>Display Settings</b>\n        <stealth-bullseye-display-settings-display></stealth-bullseye-display-settings-display>\n\n    </div>\n    <div class="bullseye-sidebar-belt flex-row">\n        <div style="flex: 0 2 100%">\n            <span class="clickable nowrap" ng-click="changeList(\'loaded\')">\n                <i class="fa" ng-class="(activeList === \'loaded\') ? \'fa-dot-circle-o\' : \'fa-circle-o\'"></i>\n                Loaded\n            </span>\n            &nbsp;\n            <span class="clickable nowrap" ng-click="changeList(\'saved\')">\n                <i class="fa" ng-class="(activeList === \'saved\') ? \'fa-dot-circle-o\' : \'fa-circle-o\'"></i>\n                Saved\n            </span>\n        </div>\n        <div>\n            <span class="pull-right" style="line-height: 1;">\n                <a class="add-new-icon clickable" ng-click="createNew()">\n                    <i class="fa fa-plus-circle"\n                            uib-tooltip="Add bullseye" tooltip-class="nowrap"\n                            tooltip-placement="top" tooltip-animation="true"\n                            tooltip-append-to-body="true"\n                            tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                    ></i>\n                </a>\n            </span>\n        </div>\n    </div>\n    <div class="bullseye-list anchorBase" style="flex: 1 1 100%">\n        <stealth-bullseye-loaded-list ng-if="activeList === \'loaded\'"></stealth-bullseye-loaded-list>\n        <stealth-bullseye-saved-list ng-if="activeList === \'saved\'"></stealth-bullseye-saved-list>\n    </div>\n</div>\n'},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(490),a=n(122),s=function(t){function e(e,n,r){var o=t.call(this)||this;return o.displaySettings=e,o.bullseyeArtService=n,o.layersService=r,o.activeBullseyes=i.List(),o.isVisible=!1,e.on("changed",o.displaySettingsChanged,o),o}return r(e,t),e.prototype.addActiveBullseye=function(t){var e=this;if(!this.isActive(t)){var n=this.bullseyeArtService.create(this.layersService.activeLayer,t,this.displaySettings);this.activeBullseyes=this.activeBullseyes.push({bullseye:t,visuals:n}),this.show(),a(function(){e.emit("bullseyeAdded",t)})}},e.prototype.removeActiveBullseye=function(t){var e=this,n=this.activeBullseyes.findIndex(function(e){return e.bullseye.localId===t});if(-1!==n){var r=this.activeBullseyes.get(n);this.activeBullseyes=this.activeBullseyes.splice(n,1).toList(),r.visuals.destroy(),a(function(){e.emit("bullseyeRemoved",r.bullseye)})}},e.prototype.clearActiveBullseyes=function(){var t=this;this.activeBullseyes.map(function(t){return t.bullseye.localId}).forEach(function(e){return t.removeActiveBullseye(e)})},e.prototype.isActive=function(t){return null!=this.activeBullseyes.find(function(e){return e.bullseye.localId===t.localId})},e.prototype.hide=function(){var t=this;this.isVisible&&(this.isVisible=!1,this.displaySettingsChanged(),a(function(){t.emit("hide")}))},e.prototype.show=function(){var t=this;this.isVisible||(this.isVisible=!0,this.displaySettingsChanged(),a(function(){t.emit("show")}))},e.prototype.displaySettingsChanged=function(){this.isVisible?this.activeBullseyes.forEach(function(t){t.visuals.repaint()}):this.activeBullseyes.forEach(function(t){t.visuals.clearAll()})},e}(o.EventEmitter);e.ActiveService=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(90),a=n(50),s=n(408),l=n(3595),c=n(1204),u=n(22),d=n(490),f=function(){function t(t,e,n,r){this.$filter=t,this.MapTooltip=e,this.ol3Geodetics=r,this.map=n.getMap()}return t.prototype.create=function(t,e,n){return new p(this.map,t,e,this.MapTooltip,n,this.$filter("number"),this.ol3Geodetics)},t.$inject=["$filter","MapTooltip","ol3Map","ol3Geodetics"],t}();e.BullseyeVisualsService=f;var p=function(t){function e(e,n,r,i,o,a,s){var l=t.call(this)||this;return l.map=e,l.layer=n,l.bullseye=r,l.MapTooltip=i,l.displaySettings=o,l.numberFilter=a,l.ol3Geodetics=s,l.ringLabels=[],l.worldSphere=l.ol3Geodetics.sphere,l.iconRadiusPx=5,l.iconStrokeWidth=2,l.iconMaxRatio=.2,l.ringStrokeWidth=2,l.labelTextMargin=2,l.cardinalLineExtension=1.1,l.cardinalLineSegments=10,l.projection=l.map.getView().getProjection(),l.metersPerUnit=l.projection.getMetersPerUnit(),l.vectorSource=l.layer.getSource(),l.centerIconDot=l.makeCenterIconDot(),l.centerIconRing=l.makeCenterIconRing(),l.ringsFeature=l.makeRingsFeature(),l.cardinalLinesFeature=l.makeCardinalLinesFeature(),l.vectorSource.addFeature(l.ringsFeature),l.vectorSource.addFeature(l.cardinalLinesFeature),l.vectorSource.addFeature(l.centerIconRing),l.vectorSource.addFeature(l.centerIconDot),l.centerLabel=new i({className:"bullseye-map-name-label"}),l.updateDynamicGeometries(l.map.getView().getResolution()),l.repaint(),l}return r(e,t),e.prototype.destroy=function(){this.vectorSource&&(this.centerIconDot&&this.vectorSource.removeFeature(this.centerIconDot),this.centerIconRing&&this.vectorSource.removeFeature(this.centerIconRing),this.ringsFeature&&this.vectorSource.removeFeature(this.ringsFeature),this.cardinalLinesFeature&&this.vectorSource.removeFeature(this.cardinalLinesFeature),this.ringLabels&&this.clearRingLabels(),this.vectorSource=null),this.centerLabel&&(this.centerLabel.destroy(),this.centerLabel=null),this.centerIconDot=this.centerIconRing=this.ringsFeature=this.cardinalLinesFeature=this.ringLabels=this.rings=this.layer=this.bullseye=this.displaySettings=null},e.prototype.repaint=function(){var t=this.bullseye.center;if(t&&a(t[0])&&a(t[1])){if(this.calculateIconRadius(this.lastResolution),this.updateCenterIconDotGeometry(this.lastResolution),this.updateCenterIconRingGeometry(this.lastResolution),this.displaySettings.showNameLabel?(this.centerLabel.setCoordinates(t),this.centerLabel.show(),this.centerLabel.setText(this.bullseye.name)):this.centerLabel.hide(),this.rings=s(this.bullseye.rings),!this.rings||0===this.rings.length)return this.clearRings(this.ringsFeature),void this.clearRingLabels();this.redrawRings(this.ringsFeature,t,this.rings),this.redrawRinglabels(),this.updateCardinalLinesGeometry()}else this.clearAll()},e.prototype.clearAll=function(){this.clearCenterIcon(),this.centerLabel.hide(),this.clearRings(this.ringsFeature),this.clearRingLabels(),this.clearCardinalLines()},e.prototype.getAreaFeature=function(){return this.ringsFeature},e.prototype.calculateIconRadius=function(t){if(t){this.iconRadiusMeters=this.iconRadiusPx*t*this.metersPerUnit;var e=l(this.rings);e&&this.iconRadiusMeters>this.iconMaxRatio*e&&(this.iconRadiusMeters=this.iconMaxRatio*e)}},e.prototype.updateDynamicGeometries=function(t){t!==this.lastResolution&&(this.calculateIconRadius(t),this.updateCenterIconDotGeometry(t),this.updateCenterIconRingGeometry(t),this.updateCardinalLinesGeometry(),this.lastResolution=t)},e.prototype.makeCenterIconDot=function(){var t=this,e=new i.Feature({name:"centerIconDot",geometry:new i.geom.Polygon([])});return e.setStyle(function(e){var n=[new i.style.Style({geometry:function(){return t.updateDynamicGeometries(e),null}})];return n.push.apply(n,Geo.outlineStyle(new i.style.Style({fill:new i.style.Fill({color:t.displaySettings.color}),stroke:new i.style.Stroke({color:t.displaySettings.color,width:t.iconStrokeWidth}),zIndex:2}))),n}),e},e.prototype.makeCenterIconRing=function(){var t=new i.Feature({name:"centerIconRing",geometry:new i.geom.Polygon([])});return t.setStyle(Geo.outlineStyle(new i.style.Style({stroke:new i.style.Stroke({color:this.displaySettings.color,width:this.iconStrokeWidth}),zIndex:3}))),t},e.prototype.updateCenterIconDotGeometry=function(t){if(t&&this.bullseye.center){var e=(this.iconRadiusPx-2*this.iconStrokeWidth)*t*this.metersPerUnit;this.centerIconDot.setGeometry(i.geom.Polygon.circular(this.worldSphere,this.bullseye.center,e))}},e.prototype.updateCenterIconRingGeometry=function(t){t&&this.bullseye.center&&this.centerIconRing.setGeometry(i.geom.Polygon.circular(this.worldSphere,this.bullseye.center,this.iconRadiusMeters))},e.prototype.clearCenterIcon=function(){this.centerIconDot.setGeometry(null),this.centerIconRing.setGeometry(null)},e.prototype.makeRingsFeature=function(){var t=new i.Feature({name:"rings",geometry:new i.geom.GeometryCollection([])});return t.setStyle(Geo.outlineStyle(new i.style.Style({stroke:new i.style.Stroke({color:this.displaySettings.color,width:this.ringStrokeWidth}),zIndex:3}))),t},e.prototype.redrawRings=function(t,e,n){var r=this,o=[];u(n,function(t){t<=0||o.push(i.geom.Polygon.circular(r.worldSphere,e,t))}),t.getGeometry().setGeometries(o)},e.prototype.clearRings=function(t){t.getGeometry().setGeometries([])},e.prototype.redrawRinglabels=function(){var t=this;this.clearRingLabels();var e=this.ringsFeature.getGeometry().getGeometries();u(e,function(e,n){var r=e.getExtent()[2],i=t.bullseye.center[1],a=o.converter.convert(t.rings[n],"meter",t.displaySettings.distanceUnits);t.ringLabels.push(t.makeRingLabelsFeature([r,i],t.numberFilter(a,0)+t.displaySettings.distanceUnitsSuffix))}),this.vectorSource.addFeatures(this.ringLabels)},e.prototype.clearRingLabels=function(){var t=this;u(this.ringLabels,function(e){t.vectorSource.removeFeature(e)}),this.ringLabels.length=0},e.prototype.makeRingLabelsFeature=function(t,e){void 0===t&&(t=[]);var n=new i.Feature({name:"ringLabels",geometry:new i.geom.Point(t),radiusLabel:e}),r=this.ringStrokeWidth/2+this.labelTextMargin;return n.setStyle(function(){return new i.style.Style({text:new i.style.Text({textAlign:"start",textBaseline:"middle",font:void 0,text:this.get("radiusLabel"),fill:new i.style.Fill({color:"#000"}),stroke:new i.style.Stroke({color:"#fff",width:3}),offsetX:r,offsetY:0}),zIndex:4})}),n},e.prototype.makeCardinalLinesFeature=function(){var t=new i.Feature({name:"cardinalLines",geometry:new i.geom.MultiLineString([])});return t.setStyle(Geo.outlineStyle(new i.style.Style({stroke:new i.style.Stroke({color:this.displaySettings.color,width:this.ringStrokeWidth}),zIndex:1}))),t},e.prototype.updateCardinalLinesGeometry=function(){if(this.iconRadiusMeters&&a(this.bullseye.magVar)&&this.rings&&!(c(this.rings)<=0)&&this.bullseye.center){var t=c(this.bullseye.rings)*this.cardinalLineExtension;if(!t)return new i.geom.MultiLineString([]);var e=Geo.getVincentyDestination(this.bullseye.center,this.bullseye.magVar,this.iconRadiusMeters).point,n=Geo.getVincentyDestination(this.bullseye.center,90+this.bullseye.magVar,this.iconRadiusMeters).point,r=Geo.getVincentyDestination(this.bullseye.center,180+this.bullseye.magVar,this.iconRadiusMeters).point,o=Geo.getVincentyDestination(this.bullseye.center,270+this.bullseye.magVar,this.iconRadiusMeters).point;this.cardinalLinesFeature.setGeometry(new i.geom.MultiLineString([Geo.getVincentyPathDirect(e,this.bullseye.magVar,t-this.iconRadiusMeters,this.cardinalLineSegments),Geo.getVincentyPathDirect(n,90+this.bullseye.magVar,t-this.iconRadiusMeters,this.cardinalLineSegments),Geo.getVincentyPathDirect(r,180+this.bullseye.magVar,t-this.iconRadiusMeters,this.cardinalLineSegments),Geo.getVincentyPathDirect(o,270+this.bullseye.magVar,t-this.iconRadiusMeters,this.cardinalLineSegments)]))}},e.prototype.clearCardinalLines=function(){this.cardinalLinesFeature.setGeometry(null)},e}(d.EventEmitter);e.BullseyeVisuals=p},function(t,e,n){var r=n(433),i=n(996),o=n(104);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),i=n(4),o=n(21),a=n(84),s=n(265),l=function(){function t(t,e,n){this.$q=t,this.toastrMessages=e,this.activeService=n,this.local_idx=0,this.loadingStatus={loading:!1},this.USER_OBJECTS_TYPE="bullseyes",this.userObjectService=s.UserObjectService.getInstance(),this._alreadyLoaded=!1,this.loaded=new a.List.ArrayStore([],"localId"),this.loaded.sortBy(["localId"]),this.saved=new a.List.ArrayStore([],"localId"),this.saved.sortBy(["localId"])}return t.prototype.local_add=function(t){var e=t;e.localId=String(++this.local_idx),this.loaded.add(e)},t.prototype.syncItem=function(t,e,n,r){return void 0===r&&(r=!1),this.$q.when(t.getById(e).then(function(e){e?(t.delete(e),t.add(n)):r&&t.add(n)}))},t.prototype.syncActiveBullseye=function(t,e){this.activeService.isActive(t)&&(this.activeService.removeActiveBullseye(t.localId),this.activeService.addActiveBullseye(e))},t.prototype.importFromServer=function(t,e){return{localId:e=e||String(++this.local_idx),id:t.id,type:this.USER_OBJECTS_TYPE,name:t.contents.name,classification:t.classification,center:t.contents.center,rings:t.contents.rings,displayUnits:t.contents.displayUnits||"meter",magVar:t.contents.magVar,isPublic:t.shared,dateModified:o.utc(t.modified),owner:t.user}},t.prototype.exportToServer=function(t){var e={type:this.USER_OBJECTS_TYPE,labels:null,contents:{name:t.name,center:t.center,rings:t.rings,displayUnits:t.displayUnits,magVar:t.magVar},classification:t.classification,shared:t.isPublic};return t.id&&(e.id=t.id),t.isPublic&&(e.editable=!0),e},t.prototype.add=function(t){var e=this,n=this.exportToServer(t);this.loadingStatus.loading=!0;var r=this.$q.when(this.userObjectService.save(n)).then(function(n){return e.getOne(n.data.id).then(function(n){return e.saved.add(n),e.sortList(e.saved),e.syncItem(e.loaded,t.localId,n,!0).then(function(){return e.syncActiveBullseye(t,n),n})})});return r.then(function(){e.toastrMessages.saveSucceeded()}),r.catch(function(){e.toastrMessages.saveFailed()}),r.finally(function(){e.loadingStatus.loading=!1}),r},t.prototype.update=function(t){var e=this;this.loadingStatus.loading=!0;var n=this.exportToServer(t),r=this.$q.when(this.userObjectService.update(n)).then(function(n){return e.getOne(n.data.id).then(function(n){return e.$q.all([e.syncItem(e.loaded,t.localId,n),e.syncItem(e.saved,t.localId,n)]).then(function(){return e.syncActiveBullseye(t,n),e.sortList(e.saved),n})})});return r.then(function(){e.toastrMessages.saveSucceeded()}),r.catch(function(){e.toastrMessages.saveFailed()}),r.finally(function(){e.loadingStatus.loading=!1}),r},t.prototype.getOne=function(t){var e=this;return this.$q.when(this.userObjectService.get({id:t,type:this.USER_OBJECTS_TYPE,contents:null})).then(function(t){return e.importFromServer(t.data)})},t.prototype.deleteOne=function(t){var e=this;this.loadingStatus.loading=!0;var n=this.$q.when(this.userObjectService.delete({id:t.id,type:this.USER_OBJECTS_TYPE,contents:null})).then(function(){return e.saved.delete(t),e.loaded.getById(t.localId).then(function(t){t&&(t.id=null,e.loaded.update(t))})});return n.then(function(){e.toastrMessages.deleteSucceeded()}),n.catch(function(){e.toastrMessages.deleteFailed()}),n.finally(function(){e.loadingStatus.loading=!1}),n},t.prototype.load=function(){var t=this;if(this._alreadyLoaded)throw"bullseyeData.load() should only be called once, at the very beginning.";this._alreadyLoaded=!0,this.loadingStatus.loading=!0;var e=this._load();return e.finally(function(){t.loadingStatus.loading=!1}),e},t.prototype._load=function(){var t=this,e=this.$q.when(this.userObjectService.list(this.USER_OBJECTS_TYPE)).then(function(e){var n;if(!r(e.data))return t.$q.reject("Bad server response. Expects a JSON array.");var o=i(e.data,function(e){return t.importFromServer(e)});(n=t.saved).updateAndPrune.apply(n,o),t.sortList(t.saved)});return e.catch(function(){t.toastrMessages.loadFailed()}),e},t.prototype.reload=function(){var t,e=this;this.loadingStatus.loading=!0;var n=this.$q.when(this._load().then(function(){return e.saved.read().then(function(e){t=e})}).then(function(){return e.loaded.read().then(function(n){n.forEach(function(n){if(n&&n.id){var r=t.find(function(t){return n.id===t.id});r?(e.loaded.delete(n),e.loaded.add(r),e.activeService.isActive(n)&&(e.activeService.removeActiveBullseye(n.localId),e.activeService.addActiveBullseye(r))):(n.id=null,e.loaded.update(n))}})}).then(function(){return e.$q.when()})}));return n.finally(function(){e.loadingStatus.loading=!1}),n},t.prototype.sortList=function(t){t.sortBy(["name"],["asc"])},t}();e.DataService=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(490),o=n(90),a=n(122),s=n(2),l=function(t){function e(e){var n=t.call(this)||this;return n.measureService=e,n._showMouseTooltip=!0,n._labelTracks=!0,n._showNameLabel=!0,n._distanceUnits=null,n.distanceUnitsSuffix=null,n._color=null,n.syncScaleLineUnits(),e.onScaleLineChange(n.syncScaleLineUnits.bind(n)),n}return r(e,t),e.prototype.syncScaleLineUnits=function(){var t=s(this.measureService.getCurrentScaleLineUnit(),"id");t&&("meter"===t&&(t="kilometer"),this.distanceUnits=t)},Object.defineProperty(e.prototype,"showMouseTooltip",{get:function(){return this._showMouseTooltip},set:function(t){var e=this;t!==this._showMouseTooltip&&(this._showMouseTooltip=t,a(function(){e.emit("showMouseTooltip-changed"),e.emit("changed")}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelTracks",{get:function(){return this._labelTracks},set:function(t){var e=this;t!==this._labelTracks&&(this._labelTracks=t,a(function(){e.emit("labelTracks-changed"),e.emit("changed")}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showNameLabel",{get:function(){return this._showNameLabel},set:function(t){var e=this;t!==this._showNameLabel&&(this._showNameLabel=t,a(function(){e.emit("showNameLabel-changed"),e.emit("changed")}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceUnits",{get:function(){return this._distanceUnits},set:function(t){var e=this;t!==this._distanceUnits&&(this._distanceUnits=t,this.distanceUnitsSuffix=o.converter.getUnitSymbol(t),a(function(){e.emit("distanceUnits-changed"),e.emit("changed")}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){var e=this;t!==this._color&&(this._color=t,a(function(){e.emit("color-changed"),e.emit("changed")}))},enumerable:!0,configurable:!0}),e}(i.EventEmitter);e.DisplaySettings=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,n,r){this.bullseyeVisualsService=e,this.displaySettings=n,this.layersService=r,this.editingDisplaySettings={showMouseTooltip:!1,labelTracks:!1,showNameLabel:!0,distanceUnits:null,distanceUnitsSuffix:null,color:t.highlightBullseyeColor}}return t.prototype.highlightBullseye=function(t){this.visuals&&this.visuals.destroy(),this.editingDisplaySettings.distanceUnits=this.displaySettings.distanceUnits,this.editingDisplaySettings.distanceUnitsSuffix=this.displaySettings.distanceUnitsSuffix,this.visuals=this.bullseyeVisualsService.create(this.layersService.highlightLayer,t,this.editingDisplaySettings)},t.prototype.unhighlight=function(){this.visuals&&(this.visuals.destroy(),this.visuals=null),this.layersService.highlightLayer.getSource().clear(!0)},t.highlightBullseyeColor="rgba(255,82,64,1)",t}();e.HighlightPreviewService=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(190),o=function(){function t(t,e){this.MapLayer=t,this.ol3Map=e,this.activeLayer=new r.layer.Vector({source:new r.source.Vector}),this.editingLayer=new r.layer.Vector({source:new r.source.Vector}),this.zoomPreviewLayer=new r.layer.Vector({source:new r.source.Vector}),this.highlightLayer=new r.layer.Vector({source:new r.source.Vector}),e.addLayerOverlay(this.editingLayer),e.addLayerOverlay(this.zoomPreviewLayer),e.addLayerOverlay(this.highlightLayer)}return t.prototype.addMapLayerToMap=function(){var t=new this.MapLayer("Bullseye","Bullseye",this.activeLayer,!1,8);t.styleDirectiveScope.styleVars.iconClass="fa fa-fw fa-lg ccri-icon ccri-icon-bullseye",this.ol3Map.addLayer(t),this.addMapLayerToMap=i},t}();e.LayersService=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.mousePosition=t,this.ol3Geodetics=e}return t.prototype.getMousePositionInfo=function(t){if(this.mousePosition.isOverMap){var e=t.center,n=this.mousePosition.coordinates,r=this.calcBearing(e,n);return{hasInfo:!0,distance:this.calcDistance(e,n),bearingFromCenter:r,magBearingFromCenter:this.calcMagBearing(r,t.magVar)}}return{hasInfo:!1,distance:null,bearingFromCenter:null,magBearingFromCenter:null}},t.prototype.calcDistance=function(t,e){return this.ol3Geodetics.distanceHaversine([t,e])},t.prototype.calcBearing=function(t,e){var n=Math.floor(this.ol3Geodetics.vincentyInitialBearing([t,e])[0]);return n<0?n+360:n},t.prototype.calcMagBearing=function(t,e){var n=t-e;return n<0?n+360:n>=360?n-360:n},t}();e.MousePositionInfoService=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(490),a=n(395),s=n(90),l={className:"bullseye-tooltip",iconClass:"fa ccri-icon ccri-icon-bullseye"},c=function(t){function e(e,n,r,o,a,s){var l=t.call(this)||this;return l.mousePosition=e,l.MapTooltip=n,l.activeService=r,l.displaySettings=o,l.mousePositionInfo=a,l.numberFilter=s,l.visible=!1,l.bullseyeTooltips=i.List(),r.on("bullseyeAdded",l.addTooltip,l),r.on("bullseyeRemoved",l.removeTooltip,l),e.on("mousemove",l.update,l),e.on("mouseout",l.update,l),o.on("changed",l.update,l),l}return r(e,t),e.prototype.addTooltip=function(t){var e=new this.MapTooltip(l);e.followCursor(),this.bullseyeTooltips=this.bullseyeTooltips.push({tooltip:e,bullseye:t}),this.update()},e.prototype.removeTooltip=function(t){var e=this.bullseyeTooltips.findIndex(function(e){return e.bullseye.localId===t.localId});-1!==e&&(this.bullseyeTooltips.get(e).tooltip.destroy(),this.bullseyeTooltips=this.bullseyeTooltips.splice(e,1).toList())},e.prototype.update=function(){var t=this;this.bullseyeTooltips.forEach(function(e){e.positionInfo=t.mousePositionInfo.getMousePositionInfo(e.bullseye),e.positionInfo.hasInfo&&(e.bearing=a(e.positionInfo.bearingFromCenter.toFixed(0),3,"0"),e.magBearing=a(e.positionInfo.magBearingFromCenter.toFixed(0),3,"0"),e.distance=s.converter.convert(e.positionInfo.distance,"meter",t.displaySettings.distanceUnits),e.tooltip.setText(e.bullseye.name+": "+e.magBearing+"° / "+t.numberFilter(e.distance,0)+" "+t.displaySettings.distanceUnitsSuffix)),t.emit("tooltip-changed",e)}),!this.displaySettings.showMouseTooltip||this.bullseyeTooltips.every(function(t){return!t.positionInfo.hasInfo})?this.visible&&(this.bullseyeTooltips.forEach(function(t){return t.tooltip.hide()}),this.visible=!1):this.visible||(this.bullseyeTooltips.forEach(function(t){return t.tooltip.show()}),this.visible=!0)},e}(o.EventEmitter);e.MouseTooltip=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(122),i=n(2),o=function(){function t(e,n,r,i,o,a,s){this.$interval=e,this.$timeout=n,this.ol3Map=r,this.activeService=i,this.bullseyeVisualsService=o,this.displaySettings=a,this.layersService=s,this.editingDisplaySettings={showMouseTooltip:!1,labelTracks:!1,showNameLabel:!1,distanceUnits:null,distanceUnitsSuffix:null,color:t.zoomBullseyeColor},this.displaySettings.on("distanceUnits-changed",this.syncDistanceUnits.bind(this))}return t.prototype.syncDistanceUnits=function(){this.displaySettings.distanceUnits!==this.editingDisplaySettings.distanceUnits&&(this.editingDisplaySettings.distanceUnits=this.displaySettings.distanceUnits,this.editingDisplaySettings.distanceUnitsSuffix=this.displaySettings.distanceUnitsSuffix,this.visuals&&this.visuals.repaint())},t.prototype.panTo=function(t){var e=this,n=t.localId!==i(this.activeService,"active.bullseye.localId");n?this.showZoomPreview(t):this.clearZoomPreview(),r(function(){e.ol3Map.panTo(t.center,!1,1200),n&&(e.$timeout.cancel(e.zoomFadePromise),e.zoomFadePromise=e.$timeout(function(){e.fadeOutZoomPreview(2e3)},2e3))})},t.prototype.showZoomPreview=function(t){this.clearZoomPreview(),this.editingDisplaySettings.distanceUnits=this.displaySettings.distanceUnits,this.editingDisplaySettings.distanceUnitsSuffix=this.displaySettings.distanceUnitsSuffix,this.visuals=this.bullseyeVisualsService.create(this.layersService.zoomPreviewLayer,t,this.editingDisplaySettings)},t.prototype.fadeOutZoomPreview=function(t){var e=this;void 0===t&&(t=4e3);var n=100/t,r=1;this.zoomIntervalPromise=this.$interval(function(){r<=0?e.clearZoomPreview():(r-=n,e.layersService.zoomPreviewLayer.setOpacity(r))},100)},t.prototype.clearZoomPreview=function(){var t=this;this.visuals&&(this.visuals.destroy(),this.visuals=null),this.zoomIntervalPromise&&(this.$interval.cancel(this.zoomIntervalPromise),this.zoomIntervalPromise=null),r(function(){t.layersService.zoomPreviewLayer.setOpacity(1)})},t.zoomBullseyeColor="rgba(255,82,64,1)",t.$inject=["$interval","$timeout","ol3Map","stealth.bullseye.activeBullseye","stealth.bullseye.bullseyeVisuals","stealth.bullseye.displaySettings","stealth.bullseye.layers"],t}();e.ZoomPreviewService=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3604),o=n(3605),a=n(3607);r.module("stealth.coordcapture",["ccri.popup","geo-utils"]).service("stealth.coordcapture.popupManager",o.CoordPopupManager).run(i.$run).directive("stCoordPicker",a.stealthCoordCapturePickerDirective)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39),i=n(149),o=function(t,e,n,o,a,s){var l={name:"Coordinate Capture",iconClass:"fa-map-pin"},c=function(t){var e=[t.coordinate[1],t.coordinate[0]],n=[t.pixel[0],t.pixel[1]];a.displayPopup(e,n)},u=t.$new();u.isToggledOn=l.name===o.getMode().name,u.toggle=function(){u.isToggledOn?o.deactivate(l.name):o.activate(l.name)},o.addMode(l),t.$on("map.mode.activated",function(t,e){l.name!==e.name||u.isToggledOn||(u.isToggledOn=!0,n.getMap().on("singleclick",c))}),t.$on("map.mode.deactivated",function(t,e){l.name===e.name&&u.isToggledOn&&(u.isToggledOn=!1,n.getMap().un("singleclick",c))});var d=new i.Widget({widget:new r.WidgetDef({tag:"st-coord-picker",scope:u,attrs:'is-toggled-on="isToggledOn"'})});e.insert("top",d,i.Position[i.Position.Last],"650"),s.on("display.selected",function(t){"map"===t.type&&(d.hidden=!t.selected)})};e.$run=o,o.$inject=["$rootScope","ccri.bars.mgr","ol3Map","stealth.core.geo.controls.mapMode.modeManager","stealth.coordcapture.popupManager","stealth.display.registry"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(39),a=n(95),s=n(3606),l=function(){function t(t,e,n,r,o){this.$filter=t,this.$rootScope=e,this.popupManager=n,this.ol3Map=r,this.MapLayer=o,this.manager=[],this.vector=new i.source.Vector({features:[]}),this.layer=new i.layer.Vector({source:this.vector});var s=new this.MapLayer(a.uuid.generate(),"Coordinate Capture Pins",this.layer,!1);this.ol3Map.addLayer(s)}return t.prototype.displayPopup=function(t,e){var n=this,i=this.$rootScope.$new(),a=r.element(".primaryDisplay > ccri-popup-container").data("ccri.popup.containerId"),l=this.$rootScope.$new(),c=JSON.stringify(t);i.isPinned=!1,l.iconClass="fa-thumb-tack",l.tooltipText="Pin",l.extraClasses=function(){return{active:i.isPinned}},l.onClick=function(){i.isPinned=!i.isPinned};var u=new s.CoordMapPin(t[1],t[0]).getPin();this.vector.addFeature(u),i.pin=u,this.manager[c]=this.popupManager.displayPopup(a,"Coordinates","coordinates","fa-map-pin",new o.WidgetDef({tag:"geo-utils-coordinates",scope:i,attrs:" latlon="+c,isolateScope:!0}),{contentMinWidth:250,contentWidth:300,offsets:e,onClose:function(){n.ol3Map.getMap().un("singleclick",d),delete n.manager[c],n.vector.removeFeature(i.pin),i.$destroy()},toolDefs:[new o.WidgetDef({tag:"ccri-popup-tooldefs-button",scope:l,attrs:'icon-class="iconClass" tooltip-text="tooltipText" extra-classes="extraClasses" on-click="onClick"'})]});var d=function(){i.isPinned||(n.ol3Map.getMap().un("singleclick",d),n.popupManager.closePopup(n.manager[c]))};this.ol3Map.getMap().on("singleclick",d),this.$rootScope.$apply()},t.$inject=["$filter","$rootScope","ccri.popup.manager","ol3Map","stealth.core.geo.ol3.layers.MapLayer"],t}();e.CoordPopupManager=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=function(){function t(t,e){this.lat=t,this.lon=e,this.pinStyle=new r.style.Style({text:new r.style.Text({text:"",font:"normal 26px CcriIcon",textBaseline:"bottom",fill:new r.style.Fill({color:"#cccccc"}),stroke:new r.style.Stroke({color:"#000000",width:1})})})}return t.prototype.getPin=function(){var t=new r.Feature({geometry:new r.geom.Point([this.lat,this.lon])});return t.setStyle(this.pinStyle),t},t}();e.CoordMapPin=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3608);e.stealthCoordCapturePickerDirective=function(){return{template:r}}},function(t,e){t.exports='<div ng-class="{\'bar-btn-toggle-on\': isToggledOn}"\n     ng-click="toggle()"\n     class="btn action-btn bar-btn bar-color2 bar-btn-toggle"\n     uib-tooltip="Coordinate Capture"\n     tooltip-class="nowrap"\n     tooltip-placement="bottom-right"\n     tooltip-animation="true"\n     tooltip-popup-delay="600"\n     tooltip-trigger="mouseenter"\n     role="button">\n    <i class="fa fa-map-pin" aria-hidden="true"></i>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(113),o=n(95),a=n(3610),s=n(3611);r.module("stealth.developer",["ccri.angular-utils","ccri.popup","stealth.core.startmenu"]).run(["ccri.angular-utils.WidgetDef","ccri.popup.manager","startMenuManager",function(t,e,n){if(o.storage.session.available){var a,s=null;n.addButton("Plug-in Editor","fa-plug",function(){s||(a||(a=r.element(".primaryDisplay > ccri-popup-container").data("ccri.popup.containerId")),s=e.displayPopup(a,"Plug-in Editor","~~developer","fa-plug",new t({tag:"stealth-developer-plugin-editor"}),{onClose:function(){s=null},positioning:i.Popup.Positioning.TopRight,offsets:[e.getViewportDim(a)[0],0],contentHeight:650,contentWidth:300}))},"~~developer","100")}}]).component("stealthDeveloperPluginEditor",{template:s,controller:a.PluginEditorController})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(95),i=function(){function t(t){this.$window=t}return t.prototype.$onInit=function(){this.pluginsString=this.$window.STEALTH.plugins.join("\n")},t.prototype.saveAndReload=function(){r.storage.session.setItem("STEALTH.config.developer.plugins",JSON.stringify(this.pluginsString.trim().split(/\s+/).map(function(t){return t.trim()}))),this.$window.location.reload()},t.$inject=["$window"],t}();e.PluginEditorController=i},function(t,e){t.exports='<button\n    class="stealth-developer-save-button"\n    ng-click="$ctrl.saveAndReload()"\n>Save & Reload</button>\n<textarea\n    spellcheck="false"\n    style="resize:none;height:100% !important;color:#b5b5b5;"\n    class="stealth-developer-popup-textarea-input popupFillSpace nowrap form-control input-xs"\n    ng-model="$ctrl.pluginsString"\n></textarea>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(457),o=n(3613),a=n(3663),s=n(3664),l=n(3666);r.module("stealth.earth",[i.module.name,"ccri.bars","ccri.popup","ccri.angular-utils","stealth.core.geo.ol3.map"]).run(o.$run).directive("stealthEarthView",a.ViewDirective).directive("stealthEarthControls",s.ControlsDirective).directive("stealthEarthRotateControl",l.RotateControlDirective)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(149),o=n(404),a=n(1206),s=n(549),l=n(3660),c=n(113),u=o.ol.OlMapManager.getInstance(),d=function(t,e,n,o,d,f,p){var h=new a.EarthScene,g=!1,m=new l.MapSynchronizer("RootMap");h.useCanvasProvider(m);var v=t.$new();v.scene=h,f.insert(new p({id:"earth",name:"3D Earth",type:"earth",widget:new e({tag:"stealth-earth-view",scope:v,attrs:'class="anchorAll earthView"'}),iconClass:"ccri-icon ccri-icon-globe"}),"100"),f.on("display.selected",function(t){"earth"===t.id&&(t.selected?function(){if(g)E.stateMgr.goToState(T);else{if(!M.getSize())return;var t=M.getView(),e=h.getAltitudeForResolution(t.getResolution()*t.getProjection().getMetersPerUnit(),M.getSize()[1]);h.setCameraPosition(t.getCenter(),e);var n=t.getRotation();n&&h.setCameraTilt(-n),g=!0}h.activate(),x.concat(C).forEach(function(t){t.hidden=!1})}():k())}),f.on("display.active",function(t){"earth"===t.id&&(t.active?m.startSyncing():m.stopSyncing())});var y=t.$new();y.scene=h;var b=new e({tag:"stealth-earth-controls",scope:y}),w=r.element(".primaryDisplay > ccri-popup-container"),_=null,x=[];x.push(new o({widget:new e({tag:"ccri-bars-separator"})}));var S=t.$new();S.scene=h,x.push(new o({widget:new e({tag:"stealth-earth-rotate-control",scope:S})})),x.forEach(function(t){n.insert("bottom",t,i.Position[i.Position.Last],"800")});var C=[],E=t.$new();E.stateMgr=new s.MultiStateQueue([{before:function(){if(_)return;var t=w.data("ccri.popup.containerId");_=d.displayPopup(t,"Controls","3dcontrols","ccri-icon ccri-icon-globe",b,{draggable:!0,collapsable:!1,onClose:function(){E.stateMgr.goToState(1)},positioning:c.Popup.Positioning.TopRight,offsets:[d.getViewportDim(t)[0],0],resizable:!1})},after:function(){if(!_)return;d.closePopup(_),_=null},toggledOn:!0},{}]),C.push(new o({widget:new e({tag:"ccri-bars-multi-state-button",scope:E,attrs:'state-mgr="stateMgr" icon-class="ccri-icon ccri-icon-globe" tooltip="3D Earth Controls"'})})),C.forEach(function(t){n.insert("top",t,i.Position[i.Position.Last],"780")});var T,M=u.getMap("RootMap").getMap();function k(){h.inactivate(),T=E.stateMgr.currentIndex,E.stateMgr.goToState(1),x.concat(C).forEach(function(t){t.hidden=!0})}k()};e.$run=d,d.$inject=["$rootScope","ccri.angular-utils.WidgetDef","ccri.bars.mgr","ccri.bars.Widget","ccri.popup.manager","stealth.display.registry","stealth.display.View"]},,function(t,e,n){t.exports=n(3616)},function(t,e,n){"use strict";var r=n(3617),i=n(3618),o=10,a=40,s=800;function l(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*o,i=n*o,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(1==t.deltaMode?(r*=a,i*=a):(r*=s,i*=s)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}l.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},t.exports=l},function(t,e){var n,r,i,o,a,s,l,c,u,d,f,p,h,g,m,v=!1;function y(){if(!v){v=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),y=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(p=/\b(iPhone|iP[ao]d)/.exec(t),h=/\b(iP[ao]d)/.exec(t),d=/Android/i.exec(t),g=/FBAN\/\w+;/i.exec(t),m=/Mobile/i.exec(t),f=!!/Win64/.exec(t),e){(n=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN)&&document&&document.documentMode&&(n=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(t);s=b?parseFloat(b[1])+4:n,r=e[2]?parseFloat(e[2]):NaN,i=e[3]?parseFloat(e[3]):NaN,(o=e[4]?parseFloat(e[4]):NaN)?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),a=e&&e[1]?parseFloat(e[1]):NaN):a=NaN}else n=r=i=a=o=NaN;if(y){if(y[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);l=!w||parseFloat(w[1].replace("_","."))}else l=!1;c=!!y[2],u=!!y[3]}else l=c=u=!1}}var b={ie:function(){return y()||n},ieCompatibilityMode:function(){return y()||s>n},ie64:function(){return b.ie()&&f},firefox:function(){return y()||r},opera:function(){return y()||i},webkit:function(){return y()||o},safari:function(){return b.webkit()},chrome:function(){return y()||a},windows:function(){return y()||c},osx:function(){return y()||l},linux:function(){return y()||u},iphone:function(){return y()||p},mobile:function(){return y()||p||h||d||m},nativeApp:function(){return y()||g},android:function(){return y()||d},ipad:function(){return y()||h}};t.exports=b},function(t,e,n){"use strict";var r,i=n(3619);i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,t.exports=function(t,e){if(!i.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&r&&"wheel"===t&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},function(t,e,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(3655)(function(t,e){return t>=e});t.exports=r},function(t,e,n){var r=n(310);t.exports=function(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=r(e),n=r(n)),t(e,n)}}},,,,,function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(226),o=n(196),a=n(225),s=n(228),l=n(6),c=n(16),u=n(404),d=n(3661),f=u.ol.MAP_PATH,p=u.base.LayerManager,h=function(t){function e(e){var n=t.call(this)||this;return n.realMapId=e,n.stateManager=c.StateManager.getInstance(),n.layerManager=p.getInstance(),n.canvasSize=512,n.layerIdsInMapArray=[],n.failedCloneLayers=new Map,n.layerCloneMap=new Map,n.layerSourceCloneMap=new Map,n.featureCloneMap=new WeakMap,n.layerListeners=new Map,n.sourceLoadListeners=new Map,n.startSyncing=function(){n.syncSubscription&&!n.syncSubscription.closed||(n.syncLayers(n.getMapRecord()),n.syncSubscription=n.stateManager.getObservable([f,n.realMapId]).subscribe({next:function(t){n.syncLayers(t)}}))},n.stopSyncing=function(){n.stop(),n.syncSubscription&&(n.syncSubscription.unsubscribe(),n.syncSubscription=null)},n.getCanvas=function(){return n.canvas},n.getTileSize=function(){return n.canvasSize},n.setExtent=function(t){n.view.fit(t,n.fitOptions)},n.render=function(){var t=n.tracker.start();return n.map.renderSync(),t},n.stop=function(){n.tracker.reset()},n.onFeatureRemoved=function(t,e){var r=e.feature,i=n.featureCloneMap.get(r);if(i){var o=n.layerSourceCloneMap.get(t);if(o){var a=o.getFeaturesCollection();a&&(a.remove(i),n.featureCloneMap.delete(r),n.debounced_emitCanvasChanged())}}},n.onFeatureChanged=function(t,e){var r=e.feature,i=n.featureCloneMap.get(r);if(i){var o=n.layerSourceCloneMap.get(t);if(o){var a=o.getFeaturesCollection();a&&(a.remove(i),i=r.clone(),n.featureCloneMap.set(r,i),o.addFeature(i),n.debounced_emitCanvasChanged())}}},n.onPostCompose=function(t){n.tracker.onPostCompose()},n.getMapRecord=function(){return n.stateManager.getState([f,n.realMapId])},n.syncLayers=function(t){var e=t.layers.filter(n.shouldLayerBeShown),r=e.toArray();if(!a(r,n.layerIdsInMapArray)){var i=n.layerIdsInMapArray.slice();n.recreateLayers(e),a(i,n.layerIdsInMapArray)||n.debounced_emitCanvasChanged()}},n.recreateLayers=function(t){n.layerIdsInMapArray.slice().forEach(n.removeLayer),t.reverse().forEach(n.cloneAndAddLayer)},n.shouldLayerBeShown=function(t){return"Timelapse1"!==t&&("Bullseye"!==t&&!n.failedCloneLayers.get(t))},n.cloneAndAddLayer=function(t){var e,r=n.layerManager.getLayer(t),i=r.getMapLayer();if("LiveLayer"!==r.type&&(e=n.cloneLayer(r.getMapLayer(),r.getLayerParameters(),r.getSourceParameters(),t)),e){var o;n.layerCloneMap.set(t,e),n.map.getLayers().push(e),n.layerIdsInMapArray.unshift(t),n.layerListeners.get(t)?o=n.layerListeners.get(t):(o=[],n.layerListeners.set(t,o),o.push(i.on("propertychange",s(n.onLayerPropertyChange,t))));var a=i.getSource();o.push(a.on("change",n.debounced_emitCanvasChanged)),a instanceof l.source.Vector&&(o.push(a.on("addfeature",s(n.onFeatureAdded,t))),o.push(a.on("removefeature",s(n.onFeatureRemoved,t))),o.push(a.on("changefeature",s(n.onFeatureChanged,t))));var c,u=e.getSource();n.sourceLoadListeners.get(u)?c=n.sourceLoadListeners.get(u):(c=[],n.sourceLoadListeners.set(u,c)),u instanceof l.source.TileImage||u instanceof l.source.VectorTile?(c.push(u.on("tileloadstart",n.onTileLoadStart)),c.push(u.on("tileloadend",n.onTileLoadEnd)),c.push(u.on("tileloaderror",n.onTileLoadError))):u instanceof l.source.ImageWMS&&(c.push(u.on("imageloadstart",n.onImageLoadStart)),c.push(u.on("imageloadend",n.onImageLoadEnd)),c.push(u.on("imageloaderror",n.onImageLoadError))),n.tracker.onSourceAddedAndListenedTo(u)}else n.failedCloneLayers.set(t,!0)},n.removeLayer=function(t){var e=n.layerIdsInMapArray.indexOf(t);if(-1===e)throw new Error("removeLayer() called for a layer index not in layerIdsInMapArray");n.layerIdsInMapArray.splice(e,1);var r=n.layerCloneMap.get(t);if(n.layerCloneMap.delete(t),r){n.map.getLayers().remove(r),l.Observable.unByKey(n.layerListeners.get(t)),n.layerListeners.delete(t);var i=n.layerSourceCloneMap.get(t);n.layerSourceCloneMap.delete(t),i&&(l.Observable.unByKey(n.sourceLoadListeners.get(i)),n.sourceLoadListeners.delete(i),n.tracker.onSourceRemovedAndUnlistenedTo(i))}},n.cloneLayer=function(t,e,r,i){if(t instanceof l.layer.Image){if(!(o=n.cloneSource(t.getSource(),r,i)))return;return new l.layer.Image({opacity:t.getOpacity(),source:o,visible:t.getVisible(),extent:t.getExtent(),minResolution:t.getMinResolution(),maxResolution:t.getMaxResolution(),zIndex:t.getZIndex()})}if(t instanceof l.layer.Vector){if(!(o=n.cloneSource(t.getSource(),r,i)))return;return new l.layer.Vector({renderOrder:e.renderOrder,extent:t.getExtent(),minResolution:t.getMinResolution(),maxResolution:t.getMaxResolution(),opacity:t.getOpacity(),renderBuffer:e.renderBuffer,source:o,style:t.getStyle(),updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,visible:t.getVisible(),zIndex:t.getZIndex()})}if(t instanceof l.layer.Tile){var o;if(!(o=n.cloneSource(t.getSource(),r,i)))return;return new l.layer.Tile({opacity:t.getOpacity(),preload:t.getPreload(),source:o,visible:t.getVisible(),extent:t.getExtent(),minResolution:t.getMinResolution(),maxResolution:t.getMaxResolution(),useInterimTilesOnError:t.getUseInterimTilesOnError(),zIndex:t.getZIndex()})}},n.cloneSource=function(t,e,r){var i;if(t instanceof l.source.Vector?i=new l.source.Vector({attributions:t.getAttributions(),features:n.cloneFeatures(t.getFeatures()),format:t.getFormat(),loader:e.loader,logo:t.getLogo(),overlaps:e.overlaps,strategy:e.strategy,url:t.getUrl(),useSpatialIndex:e.useSpatialIndex,wrapX:e.wrapX}):t instanceof l.source.ImageWMS?i=new l.source.ImageWMS({attributions:t.getAttributions(),crossOrigin:e.crossOrigin,hidpi:e.hidpi,serverType:e.serverType,imageLoadFunction:t.getImageLoadFunction(),logo:t.getLogo(),params:t.getParams(),projection:t.getProjection(),ratio:e.ratio,resolutions:e.resolutions,url:t.getUrl()}):t instanceof l.source.XYZ&&(i=new l.source.XYZ({attributions:t.getAttributions(),cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:t.getLogo(),opaque:e.opaque,projection:t.getProjection(),reprojectionErrorThreshold:e.reprojectionErrorThreshold,maxZoom:e.maxZoom,minZoom:e.minZoom,tileGrid:t.getTileGrid(),tileLoadFunction:t.getTileLoadFunction(),tilePixelRatio:e.tilePixelRatio,tileSize:e.tileSize,tileUrlFunction:t.getTileUrlFunction(),urls:t.getUrls(),wrapX:e.wrapX})),i)return n.layerSourceCloneMap.set(r,i),i},n.cloneFeatures=function(t){return t.map(function(t){return t.clone()})},n.onLayerPropertyChange=function(t,e){var r=e.target,i=n.layerCloneMap.get(t);if(i){var o=e.key;i.set(o,r.get(o))}n.debounced_emitCanvasChanged()},n.onTileLoadStart=function(t){n.tracker.onLoadStart(t.target)},n.onTileLoadEnd=function(t){n.tracker.onLoadEndOrError(t.target)},n.onTileLoadError=function(t){n.tracker.onLoadEndOrError(t.target)},n.onImageLoadStart=function(t){n.tracker.onLoadStart(t.target)},n.onImageLoadEnd=function(t){n.tracker.onLoadEndOrError(t.target)},n.onImageLoadError=function(t){n.tracker.onLoadEndOrError(t.target)},n.onFeatureAdded=function(t,e){var r=n.layerSourceCloneMap.get(t);if(r){var i=e.feature,o=i.clone();n.featureCloneMap.set(i,o),r.addFeature(o),n.debounced_emitCanvasChanged()}},n.emitCanvasChanged=function(){n.emit("canvas-changed")},n.tracker=new d.RenderProcessTracker,n.debounced_emitCanvasChanged=o(n.emitCanvasChanged,500),n.container=document.createElement("DIV"),n.container.style.position="absolute",n.container.style.visibility="hidden",document.body.appendChild(n.container),n.view=new l.View({center:[0,0],zoom:1,enableRotation:!1,projection:"EPSG:4326"}),n.map=new l.Map({controls:[],interactions:[],keyboardEventTarget:null,loadTilesWhileAnimating:!1,loadTilesWhileInteracting:!1,logo:!1,renderer:"canvas",target:n.container,view:n.view,layers:[]}),n.map.setSize([n.canvasSize,n.canvasSize]),n.map.once("postcompose",function(t){n.canvas=t.context.canvas}),n.map.renderSync(),n.map.on("postcompose",n.onPostCompose),n.fitOptions={nearest:!1,constrainResolution:!1,duration:void 0},n}return r(e,t),e}(i.EventEmitter);e.MapSynchronizer=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3662),i=n(334),o=n(124),a=n(6),s=function(){return function(){var t=this;this.sources=[],this.sourceItemsLoading=new Map,this.tAfterRender=0,this.tCompleteDelay=0,this.state={started:!1,afterRenderHappened:!1,postComposeHappened:!1,immediatePromiseResolved:!1,finalPromiseResolved:!1,activeLoadsSinceRenderSync:0,anyLoadStartEventsSinceRenderSync:!1},this.reset=function(){var e=t.state.started&&!t.state.finalPromiseResolved;t.state.started=!1,t.state.afterRenderHappened=!1,t.state.postComposeHappened=!1,t.state.immediatePromiseResolved=!1,t.state.finalPromiseResolved=!1,t.state.activeLoadsSinceRenderSync=0,t.state.anyLoadStartEventsSinceRenderSync=!1,t.progressPromiseResolver=null,t.progressPromiseRejector=null,t.immediateLoadPromiseResolver=null,t.immediateLoadPromiseRejector=null,t.fullLoadPromiseResolver=null,t.fullLoadPromiseRejector=null,t.tAfterRender&&(clearTimeout(t.tAfterRender),t.tAfterRender=0),t.tCompleteDelay&&(clearTimeout(t.tCompleteDelay),t.tCompleteDelay=0),e&&t.abort()},this.abort=function(){t.progressPromiseRejector&&!t.state.afterRenderHappened&&t.progressPromiseRejector(new Error("cancelled")),t.immediateLoadPromiseRejector&&!t.state.immediatePromiseResolved&&t.immediateLoadPromiseRejector(new Error("cancelled")),t.fullLoadPromiseRejector&&!t.state.finalPromiseResolved&&t.fullLoadPromiseRejector(new Error("cancelled"))},this.onSourceAddedAndListenedTo=function(e){if(void 0!==t.sourceItemsLoading.get(e))throw new Error("Adding duplicate source");t.sourceItemsLoading.set(e,0),t.sources.push(e)},this.onSourceRemovedAndUnlistenedTo=function(e){if(t.reset(),void 0===t.sourceItemsLoading.get(e))throw new Error("Removing source that doesn't exist");t.sourceItemsLoading.delete(e),i(t.sources,e)},this.start=function(){return t.reset(),t.state.started=!0,t.tAfterRender=setTimeout(t.onAfterRenderPre,0),new r.Promise(t.getProgressPromiseResolvers)},this.onLoadStart=function(e){t.state.started&&(t.state.anyLoadStartEventsSinceRenderSync=!0,t.state.activeLoadsSinceRenderSync+=1),t.trackSourceItemsLoading(e,1)},this.onLoadEndOrError=function(e){t.state.started&&(t.state.activeLoadsSinceRenderSync-=1),t.trackSourceItemsLoading(e,-1)},this.onPostCompose=function(){if(!1!==t.state.started&&(t.state.postComposeHappened=!0,t.state.afterRenderHappened&&t.allItemsLoaded())){if(t.state.finalPromiseResolved)throw new Error("Unexpected second postCompose after all tiles loaded");t.complete()}},this.onAfterRenderPre=function(){t.tAfterRender=setTimeout(t.onAfterRender,0)},this.onAfterRender=function(){if(t.tAfterRender=0,t.state.started){t.state.afterRenderHappened=!0;var e={loadsAsync:null,immediateLoadPromise:new r.Promise(t.getImmediateLoadPromiseResolvers),fullLoadPromise:new r.Promise(t.getFullLoadPromiseResolvers)};if(t.hasAsyncSources()||!1===t.allItemsLoaded()?e.loadsAsync=!0:e.loadsAsync=!1,t.progressPromiseResolver(e),t.state.postComposeHappened&&(!1===t.state.immediatePromiseResolved&&(t.state.immediatePromiseResolved=!0,t.immediateLoadPromiseResolver()),t.allItemsLoaded())){if(t.state.finalPromiseResolved)throw new Error("Unexpected second postCompose after all tiles loaded");t.complete()}}},this.getProgressPromiseResolvers=function(e,n){t.progressPromiseResolver=e,t.progressPromiseRejector=n},this.getImmediateLoadPromiseResolvers=function(e,n){t.immediateLoadPromiseResolver=e,t.immediateLoadPromiseRejector=n},this.getFullLoadPromiseResolvers=function(e,n){t.fullLoadPromiseResolver=e,t.fullLoadPromiseRejector=n},this.allItemsLoaded=function(){var e=0;return t.sourceItemsLoading.forEach(function(t){e+=t}),0===e},this.trackSourceItemsLoading=function(e,n){var r=t.sourceItemsLoading.get(e);if((r+=n)<0)throw new Error("Source loading count should not become negative");t.sourceItemsLoading.set(e,r)},this.hasAsyncSources=function(){return o(t.sources,t.isAsyncSource)},this.isAsyncSource=function(t){return t instanceof a.source.ImageArcGISRest||t instanceof a.source.ImageMapGuide||t instanceof a.source.ImageWMS||t instanceof a.source.TileImage||t instanceof a.source.VectorTile},this.complete=function(){t.state.finalPromiseResolved=!0;var e=t.fullLoadPromiseResolver;t.reset(),t.tCompleteDelay=setTimeout(e,100)}}}();e.RenderProcessTracker=s},function(t,e,n){(function(e,n,r){t.exports=function(){var t,i,o;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,r){"use strict";var i;try{throw new Error}catch(t){i=t}var o=t("./schedule"),a=t("./queue"),s=t("./util");function l(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function c(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function u(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function d(t){this._normalQueue._pushOne(t),this._queueTick()}function f(t){for(;t.length()>0;)p(t)}function p(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}l.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},l.prototype.hasCustomScheduler=function(){return this._customScheduler},l.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},l.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},l.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},l.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},l.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.hasDevTools?(l.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?c.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},l.prototype.invoke=function(t,e,n){this._trampolineEnabled?u.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},l.prototype.settlePromises=function(t){this._trampolineEnabled?d.call(this,t):this._schedule(function(){t._settlePromises()})}):(l.prototype.invokeLater=c,l.prototype.invoke=u,l.prototype.settlePromises=d),l.prototype._drainQueues=function(){f(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,f(this._lateQueue)},l.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},l.prototype._reset=function(){this._isTickUsed=!1},n.exports=l,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},l=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),u=new t(e);u._propagateFrom(this,1);var d=this._target();if(u._setBoundTo(c),c instanceof t){var f={promiseRejectionQueued:!1,promise:u,target:d,bindingPromise:c};d._then(e,a,void 0,u,f),c._then(s,l,void 0,u,f),u._setOnCancel(c)}else u._resolveCallback(d);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(t){}return i},e.exports=i},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){var n=t("./util"),r=n.canEvaluate;function i(t){var r=this.pop(),i=function(t,r){var i;if(null!=t&&(i=t[r]),"function"!=typeof i){var o="Object "+n.classString(t)+" has no method '"+n.toString(r)+"'";throw new e.TypeError(o)}return i}(t,r);return i.apply(t,this)}function o(t){return t[this]}function a(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(i,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=a;else if(r){var i=(void 0)(t);e=null!==i?i:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,l=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),l.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(t,a,s){return function(l){var c=s._boundValue();t:for(var u=0;u<t.length;++u){var d=t[u];if(d===Error||null!=d&&d.prototype instanceof Error){if(l instanceof d)return i(a).call(c,l)}else if("function"==typeof d){var f=i(d).call(c,l);if(f===o)return f;if(f)return i(a).call(c,l)}else if(n.isObject(l)){for(var p=r(d),h=0;h<p.length;++h){var g=p[h];if(d[g]!=l[g])continue t}return i(a).call(c,l)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,l=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=l,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){var i,o,a,s=n._getDomain,l=n._async,c=t("./errors").Warning,u=t("./util"),d=t("./es5"),f=u.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,h=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,m=null,v=null,y=!1,b=!(0==u.env("BLUEBIRD_DEBUG")),w=!(0==u.env("BLUEBIRD_WARNINGS")||!b&&!u.env("BLUEBIRD_WARNINGS")),_=!(0==u.env("BLUEBIRD_LONG_STACK_TRACES")||!b&&!u.env("BLUEBIRD_LONG_STACK_TRACES")),x=0!=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(w||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return z(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=s();o="function"==typeof t?null===e?t:u.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=s();i="function"==typeof t?null===e?t:u.domainBind(e,t):void 0};var S=function(){};n.longStackTraces=function(){if(l.haveItemsQueued()&&!J.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!J.longStackTraces&&G()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace,i=n.prototype._dereferenceTrace;J.longStackTraces=!0,S=function(){if(l.haveItemsQueued()&&!J.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,n.prototype._dereferenceTrace=i,r.deactivateLongStackTraces(),l.enableTrampoline(),J.longStackTraces=!1},n.prototype._captureStackTrace=B,n.prototype._attachExtraTrace=j,n.prototype._dereferenceTrace=q,r.activateLongStackTraces(),l.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return J.longStackTraces&&G()};var C=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return u.global.dispatchEvent(t),function(t,e){var n={detail:e,cancelable:!0};d.defineProperty(n,"promise",{value:e.promise}),d.defineProperty(n,"reason",{value:e.reason});var r=new CustomEvent(t.toLowerCase(),n);return!u.global.dispatchEvent(r)}}if("function"==typeof Event){var t=new Event("CustomEvent");return u.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,d.defineProperty(n,"promise",{value:e.promise}),d.defineProperty(n,"reason",{value:e.reason}),!u.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!u.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),E=u.isNode?function(){return e.emit.apply(e,arguments)}:u.global?function(t){var e="on"+t.toLowerCase(),n=u.global[e];return!!n&&(n.apply(u.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(t,e){return{promise:e}}var M={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:T},k=function(t){var e=!1;try{e=E.apply(null,arguments)}catch(t){l.throwLater(t),e=!0}var n=!1;try{n=C(t,M[t].apply(null,arguments))}catch(t){l.throwLater(t),n=!0}return n||e};function A(){return!1}function I(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+u.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function O(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?u.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function P(){return this._onCancelField}function L(t){this._onCancelField=t}function D(){this._cancellationParent=void 0,this._onCancelField=void 0}function N(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&S()),"warnings"in t){var e=t.warnings;J.warnings=!!e,x=J.warnings,u.isObject(e)&&"wForgottenReturn"in e&&(x=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!J.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=D,n.prototype._propagateFrom=N,n.prototype._onCancel=P,n.prototype._setOnCancel=L,n.prototype._attachCancellationCallback=O,n.prototype._execute=I,R=N,J.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!J.monitoring?(J.monitoring=!0,n.prototype._fireEvent=k):!t.monitoring&&J.monitoring&&(J.monitoring=!1,n.prototype._fireEvent=A)),n},n.prototype._fireEvent=A,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._dereferenceTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var R=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function F(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function B(){this._trace=new Q(this._peekContext())}function j(t,e){if(f(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=$(t);u.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),u.notEnumerableProp(t,"__stackCleaned__",!0)}}}function q(){this._trace=void 0}function z(t,e,r){if(J.warnings){var i,o=new c(t);if(e)r._attachExtraTrace(o);else if(J.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=$(o);o.stack=a.message+"\n"+a.stack.join("\n")}k("warning",o)||V(o,"",!0)}}function U(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||m.test(r),o=i&&Y(r);i&&!o&&(y&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function $(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||m.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:U(e)}}function V(t,e,n){if("undefined"!=typeof console){var r;if(u.isObject(t)){var i=t.stack;r=e+v(i,t)}else r=e+String(t);"function"==typeof a?a(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function H(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){l.throwLater(t)}"unhandledRejection"===t?k(t,n,r)||i||V(n,"Unhandled rejection "):k(t,r)}function W(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():u.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{var n=JSON.stringify(t);e=n}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function G(){return"function"==typeof Z}var Y=function(){return!1},K=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function X(t){var e=t.match(K);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function Q(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Z(this,Q),e>32&&this.uncycle()}u.inherits(Q,Error),r.CapturedTrace=Q,Q.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(var r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var a=e[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var l=r>0?e[r-1]:this;s<t-1?(l._parent=e[s+1],l._parent.uncycle(),l._length=l._parent._length+1):(l._parent=void 0,l._length=1);for(var c=l._length+1,u=r-2;u>=0;--u)e[u]._length=c,c++;return}}}},Q.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=$(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(U(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var l=r[s];if(e[i]!==l)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),u.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),u.notEnumerableProp(t,"__stackCleaned__",!0)}};var Z=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():W(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,m=t,v=e;var n=Error.captureStackTrace;return Y=function(t){return p.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return m=/@/,v=e,y=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(v=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?W(e):e.toString()},null):(m=t,v=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(a=function(t){console.warn(t)},u.isNode&&e.stderr.isTTY?a=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:u.isNode||"string"!=typeof(new Error).stack||(a=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var J={warnings:w,longStackTraces:!1,cancellation:!1,monitoring:!1};return _&&n.longStackTraces(),{longStackTraces:function(){return J.longStackTraces},warnings:function(){return J.warnings},cancellation:function(){return J.cancellation},monitoring:function(){return J.monitoring},propagateFromFunction:function(){return R},boundValueFunction:function(){return F},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&x){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),l=U(s),c=l.length-1;c>=0;--c){var u=l[c];if(!h.test(u)){var d=u.match(g);d&&(o="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(l.length>0)for(var f=l[0],c=0;c<s.length;++c)if(s[c]===f){c>0&&(a="\n"+s[c-1]);break}}var p="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(p,!0,e)}},setBounds:function(t,e){if(G()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,l=0;l<i.length;++l){var c=X(i[l]);if(c){n=c.fileName,a=c.line;break}}for(var l=0;l<o.length;++l){var c=X(o[l]);if(c){r=c.fileName,s=c.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(Y=function(t){if(p.test(t))return!0;var e=X(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}},warn:z,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),z(n)},CapturedTrace:Q,fireDomEvent:C,fireGlobalEvent:E}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];return r instanceof t&&r.suppressUnhandledRejections(),this.caught(n,function(){return r})}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,i,o=t("./es5"),a=o.freeze,s=t("./util"),l=s.inherits,c=s.notEnumerableProp;function u(t,e){function n(r){if(!(this instanceof n))return new n(r);c(this,"message","string"==typeof r?r:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}var d=u("Warning","warning"),f=u("CancellationError","cancellation error"),p=u("TimeoutError","timeout error"),h=u("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(t){r=u("TypeError","type error"),i=u("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<g.length;++m)"function"==typeof Array.prototype[g[m]]&&(h.prototype[g[m]]=Array.prototype[g[m]]);o.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var v=0;function y(t){if(!(this instanceof y))return new y(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h.prototype.toString=function(){var t=Array(4*v+1).join(" "),e="\n"+t+"AggregateError of:\n";v++,t=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return v--,e},l(y,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:f,TimeoutError:p,OperationalError:y,RejectionError:y,AggregateError:h}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.CancellationError,a=i.errorObj,s=t("./catch_filter")(r);function l(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function c(t){this.finallyHandler=t}function u(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function d(){return p.call(this,this.promise._target()._settledValue())}function f(t){if(!u(this,t))return a.e=t,a}function p(t){var i=this.promise,s=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),t);if(l===r)return l;if(void 0!==l){i._setReturnedNonUndefined();var p=n(l,i);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var h=new o("late cancellation observer");return i._attachExtraTrace(h),a.e=h,a}p.isPending()&&p._attachCancellationCallback(new c(this))}return p._then(d,f,void 0,this,void 0)}}}return i.isRejected()?(u(this),a.e=t,a):(u(this),t)}return l.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){u(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new l(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,p);var r,o=new Array(n-1),a=0;for(r=0;r<n-1;++r){var l=arguments[r];if(!i.isObject(l))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(l)));o[a++]=l}o.length=a;var c=arguments[r];return this._passThrough(s(o,c,this),1,void 0,p)},l}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./errors"),l=s.TypeError,c=t("./util"),u=c.errorObj,d=c.tryCatch,f=[];function p(t,n,i,o){if(a.cancellation()){var s=new e(r),l=this._finallyPromise=new e(r);this._promise=s.lastly(function(){return l}),s._captureStackTrace(),s._setOnCancel(this)}else{var c=this._promise=new e(r);c._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(p,o),p.prototype._isResolved=function(){return null===this._promise},p.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),t=d(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=d(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},p.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=d(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},p.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=d(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(t){var n=this._promise;if(t===u)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof e||null!==(o=function(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=d(n[o])(t);if(r._popContext(),a===u){r._pushContext();var s=e.reject(u.e);return r._popContext(),s}var l=i(a,r);if(l instanceof e)return l}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=p,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+c.classString(t));f.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new p(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=e._getDomain,l=t("./util"),c=l.tryCatch,u=l.errorObj,d=e._async;function f(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=s();this._callback=null===i?e:l.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function p(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+l.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new f(t,n,a,o).promise()}l.inherits(f,n),f.prototype._asyncInit=function(){this._init$(void 0,-2)},f.prototype._init=function(){},f.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(n<0){if(r[n=-1*n-1]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var d=this._promise,f=this._callback,p=d._boundValue();d._pushContext();var h=c(f).call(p,t,n,o),g=d._popContext();if(a.checkForgottenReturns(h,g,null!==s?"Promise.filter":"Promise.map",d),h===u)return this._reject(h.e),!0;var m=i(h,this._promise);if(m instanceof e){var v=(m=m._target())._bitField;if(0==(50397184&v))return l>=1&&this._inFlight++,r[n]=m,m._proxy(this,-1*(n+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(m._reason()),!0):(this._cancel(),!0);h=m._value()}r[n]=h}var y=++this._totalResolved;return y>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},f.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},f.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},f.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return p(this,t,e,null)},e.map=function(t,e,n,r){return p(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r,l=new e(n);if(l._captureStackTrace(),l._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];r=a.isArray(c)?s(t).apply(u,c):s(t).call(u,c)}else r=s(t)();var d=l._popContext();return o.checkForgottenReturns(r,d,"Promise.try",l),l._resolveFromSyncValue(r),l},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),i=r.maybeWrapAsError,o=t("./errors"),a=o.OperationalError,s=t("./es5"),l=/^(?:name|message|stack|cause)$/;function c(t){var e;if(function(t){return t instanceof Error&&s.getPrototypeOf(t)===Error.prototype}(t)){(e=new a(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=s.keys(t),i=0;i<n.length;++i){var o=n[i];l.test(o)||(e[o]=t[o])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=c(i(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,i=n.tryCatch,o=n.errorObj;function a(t,e){if(!n.isArray(t))return s.call(this,t,e);var a=i(e).apply(this._boundValue(),[null].concat(t));a===o&&r.throwLater(a.e)}function s(t,e){var n=this._boundValue(),a=void 0===t?i(e).call(n,null):i(e).call(n,null,t);a===o&&r.throwLater(a.e)}function l(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var a=i(e).call(this._boundValue(),t);a===o&&r.throwLater(a.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=s;void 0!==e&&Object(e).spread&&(n=a),this._then(n,l,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){var r=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new A.PromiseInspection(this._target())},o=function(t){return A.reject(new h(t))};function a(){}var s,l={},c=t("./util");s=c.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},c.notEnumerableProp(A,"_getDomain",s);var u=t("./es5"),d=t("./async"),f=new d;u.defineProperty(A,"_async",{value:f});var p=t("./errors"),h=A.TypeError=p.TypeError;A.RangeError=p.RangeError;var g=A.CancellationError=p.CancellationError;A.TimeoutError=p.TimeoutError,A.OperationalError=p.OperationalError,A.RejectionError=p.OperationalError,A.AggregateError=p.AggregateError;var m=function(){},v={},y={},b=t("./thenables")(A,m),w=t("./promise_array")(A,m,b,o,a),_=t("./context")(A),x=_.create,S=t("./debuggability")(A,_),C=(S.CapturedTrace,t("./finally")(A,b,y)),E=t("./catch_filter")(y),T=t("./nodeback"),M=c.errorObj,k=c.tryCatch;function A(t){t!==m&&function(t,e){if(null==t||t.constructor!==A)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new h("expecting a function but got "+c.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function I(t){this.promise._resolveCallback(t)}function O(t){this.promise._rejectCallback(t,!1)}function P(t){var e=new A(m);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return A.prototype.toString=function(){return"[object Promise]"},A.prototype.caught=A.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!c.isObject(a))return o("Catch statement predicate: expecting an object but got "+c.classString(a));r[i++]=a}return r.length=i,t=arguments[n],this.then(void 0,E(r,t,this))}return this.then(void 0,t)},A.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},A.prototype.then=function(t,e){if(S.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+c.classString(t);arguments.length>1&&(n+=", "+c.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},A.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},A.prototype.spread=function(t){return"function"!=typeof t?o("expecting a function but got "+c.classString(t)):this.all()._then(t,void 0,void 0,v,void 0)},A.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},A.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new w(this).promise()},A.prototype.error=function(t){return this.caught(c.originatesFromRejection,t)},A.getNewLibraryCopy=n.exports,A.is=function(t){return t instanceof A},A.fromNode=A.fromCallback=function(t){var e=new A(m);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=k(t)(T(e,n));return r===M&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},A.all=function(t){return new w(t).promise()},A.cast=function(t){var e=b(t);return e instanceof A||((e=new A(m))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},A.resolve=A.fulfilled=A.cast,A.reject=A.rejected=function(t){var e=new A(m);return e._captureStackTrace(),e._rejectCallback(t,!0),e},A.setScheduler=function(t){if("function"!=typeof t)throw new h("expecting a function but got "+c.classString(t));return f.setScheduler(t)},A.prototype._then=function(t,e,n,r,i){var o=void 0!==i,a=o?i:new A(m),l=this._target(),u=l._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var d=s();if(0!=(50397184&u)){var p,h,v=l._settlePromiseCtx;0!=(33554432&u)?(h=l._rejectionHandler0,p=t):0!=(16777216&u)?(h=l._fulfillmentHandler0,p=e,l._unsetRejectionIsUnhandled()):(v=l._settlePromiseLateCancellationObserver,h=new g("late cancellation observer"),l._attachExtraTrace(h),p=e),f.invoke(v,l,{handler:null===d?p:"function"==typeof p&&c.domainBind(d,p),promise:a,receiver:r,value:h})}else l._addCallbacks(t,e,a,r,d);return a},A.prototype._length=function(){return 65535&this._bitField},A.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},A.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},A.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},A.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},A.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},A.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},A.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},A.prototype._isFinal=function(){return(4194304&this._bitField)>0},A.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},A.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},A.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},A.prototype._setAsyncGuaranteed=function(){f.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},A.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==l)return void 0===e&&this._isBound()?this._boundValue():e},A.prototype._promiseAt=function(t){return this[4*t-4+2]},A.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},A.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},A.prototype._boundValue=function(){},A.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=l),this._addCallbacks(e,n,r,i,null)},A.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=l),this._addCallbacks(n,r,i,o,null)},A.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:c.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:c.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:c.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:c.domainBind(i,e))}return this._setLength(o+1),o},A.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},A.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(r(),!1);var n=b(t,this);if(!(n instanceof A))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;s<a;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var l=new g("late cancellation observer");i._attachExtraTrace(l),this._reject(l)}}else this._reject(r())}},A.prototype._rejectCallback=function(t,e,n){var r=c.ensureErrorObject(t),i=r===t;if(!i&&!n&&S.warnings()){var o="a promise was rejected with a non-error: "+c.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},A.prototype._resolveFromExecutor=function(t){if(t!==m){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},A.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),e===v?n&&"number"==typeof n.length?o=k(t).apply(this._boundValue(),n):(o=M).e=new h("cannot .spread() a non-array: "+c.classString(n)):o=k(t).call(e,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===y?r._reject(n):o===M?r._rejectCallback(o.e,!1):(S.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},A.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},A.prototype._followee=function(){return this._rejectionHandler0},A.prototype._setFollowee=function(t){this._rejectionHandler0=t},A.prototype._settlePromise=function(t,e,n,r){var o=t instanceof A,s=this._bitField,l=0!=(134217728&s);0!=(65536&s)?(o&&t._invokeInternalOnCancel(),n instanceof C&&n.isFinallyHandler()?(n.cancelPromise=t,k(e).call(n,r)===M&&t._reject(M.e)):e===i?t._fulfill(i.call(n)):n instanceof a?n._promiseCancelled(t):o||t instanceof w?t._cancel():n.cancel()):"function"==typeof e?o?(l&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof a?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):o&&(l&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(r):t._reject(r))},A.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof A?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof A&&n._reject(i)},A.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},A.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},A.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},A.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():f.settlePromises(this),this._dereferenceTrace())}},A.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return f.fatalError(t,c.isNode);(65535&e)>0?f.settlePromises(this):this._ensurePossibleRejectionHandled()}},A.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},A.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},A.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},A.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},A.defer=A.pending=function(){S.deprecated("Promise.defer","new Promise");var t=new A(m);return{promise:t,resolve:I,reject:O}},c.notEnumerableProp(A,"_makeSelfResolutionError",r),t("./method")(A,m,b,o,S),t("./bind")(A,m,b,S),t("./cancel")(A,w,o,S),t("./direct_resolve")(A),t("./synchronous_inspection")(A),t("./join")(A,w,b,m,f,s),A.Promise=A,A.version="3.5.2",t("./map.js")(A,w,o,b,m,S),t("./call_get.js")(A),t("./using.js")(A,o,b,x,m,S),t("./timers.js")(A,m,S),t("./generators.js")(A,o,m,b,a,S),t("./nodeify.js")(A),t("./promisify.js")(A,m),t("./props.js")(A,w,b,o),t("./race.js")(A,m,b,o),t("./reduce.js")(A,w,o,b,m,S),t("./settle.js")(A,w,S),t("./some.js")(A,w,o),t("./filter.js")(A,m),t("./each.js")(A,m),t("./any.js")(A),c.toFastProperties(A),c.toFastProperties(A.prototype),P({a:1}),P({b:2}),P({c:3}),P(1),P(function(){}),P(void 0),P(!1),P(new A(m)),S.setBounds(d.firstLineError,c.lastLineError),A}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util");function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=r(this._values,this._promise);if(s instanceof e){var l=(s=s._target())._bitField;if(this._values=s,0==(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0==(33554432&l))return 0!=(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=i("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(c,!1)}},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var l=r(t[s],i);l instanceof e?(l=l._target(),a=l._bitField):a=null,o?null!==a&&l.suppressUnhandledRejections():null!==a?0==(50397184&a)?(l._proxy(this,s),this._values[s]=l):o=0!=(33554432&a)?this._promiseFulfilled(l._value(),s):0!=(16777216&a)?this._promiseRejected(l._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(l,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},i=t("./util"),o=t("./nodeback"),a=i.withAppended,s=i.maybeWrapAsError,l=i.canEvaluate,c=t("./errors").TypeError,u={__isPromisified__:!0},d=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),f=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!d.test(t)}function h(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function g(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,u);return!!r&&h(r)}function m(t,e,n,r){for(var o=i.inheritedDataKeys(t),a=[],s=0;s<o.length;++s){var l=o[s],u=t[l],d=r===f||f(l,u,t);"function"!=typeof u||h(u)||g(t,l,e)||!r(l,u,t,d)||a.push(l,u)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(a,e,n),a}var v=function(t){return t.replace(/([$])/,"\\$")},y=l?void 0:function(t,l,c,u,d,f){var p=function(){return this}(),h=t;function g(){var i=l;l===r&&(i=this);var c=new e(n);c._captureStackTrace();var u="string"==typeof h&&this!==p?this[h]:t,d=o(c,f);try{u.apply(i,a(arguments,d))}catch(t){c._rejectCallback(s(t),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof h&&(t=u),i.notEnumerableProp(g,"__isPromisified__",!0),g};function b(t,e,n,o,a){for(var s=new RegExp(v(e)+"$"),l=m(t,e,s,n),c=0,u=l.length;c<u;c+=2){var d=l[c],f=l[c+1],p=d+e;if(o===y)t[p]=y(d,r,d,f,e,a);else{var h=o(f,function(){return y(d,r,d,f,e,a)});i.notEnumerableProp(h,"__isPromisified__",!0),t[p]=h}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new c("expecting a function but got "+i.classString(t));if(h(t))return t;var n=void 0===(e=Object(e)).context?r:e.context,o=!!e.multiArgs,a=function(t,e,n){return y(t,e,void 0,t,null,n)}(t,n,o);return i.copyDescriptors(t,a,p),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=f);var a=e.promisifier;if("function"!=typeof a&&(a=y),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=i.inheritedDataKeys(t),l=0;l<s.length;++l){var u=t[s[l]];"constructor"!==s[l]&&i.isClass(u)&&(b(u.prototype,r,o,a,n),b(u,r,o,a,n))}return b(t,r,o,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o,a=t("./util"),s=a.isObject,l=t("./es5");"function"==typeof Map&&(o=Map);var c=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function u(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=c(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var a=0;a<i;++a){var s=r[a];e[a]=t[s],e[a+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function d(t){var n,o=r(t);return s(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new u(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(u,n),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=function(t){for(var e=new o,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],a=t[r];e.set(i,a)}return e}(this._values);else{r={};for(var i=this.length(),a=0,s=this.length();a<s;++a)r[this._values[a+i]]=this._values[a]}return this._resolve(r),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return d(this)},e.props=function(t){return d(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,r=this._length,i=n+r&e-1;!function(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}(this,0,this,e,i)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=function(t){return t.then(function(e){return s(e,t)})};function s(t,s){var l=r(t);if(l instanceof e)return a(l);if(null===(t=o.asArray(t)))return i("expecting an array or an iterable object but got "+o.classString(t));var c=new e(n);void 0!==s&&c._propagateFrom(s,3);for(var u=c._fulfill,d=c._reject,f=0,p=t.length;f<p;++f){var h=t[f];(void 0!==h||f in t)&&e.cast(h)._then(u,d,void 0,c,null)}return c}e.race=function(t){return s(t,void 0)},e.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=e._getDomain,l=t("./util"),c=l.tryCatch;function u(t,n,r,i){this.constructor$(t);var a=s();this._fn=null===a?n:l.domainBind(a,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function d(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function f(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+l.classString(e));var o=new u(t,e,n,i);return o.promise()}function p(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(t){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var s=i._popContext();return a.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}l.inherits(u,n),u.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},u.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},u.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},u.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(p,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(d,d,void 0,n,this)},e.prototype.reduce=function(t,e){return f(this,t,e,null)},e.reduce=function(t,e,n,r){return f(t,e,n,r)}}},{"./util":36}],29:[function(t,i,o){"use strict";var a,s=t("./util"),l=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,u=e.nextTick;a=s.isRecentNode?function(t){c.call(n,t)}:function(t){u.call(e,t)}}else if("function"==typeof l&&"function"==typeof l.resolve){var d=l.resolve();a=function(t){d.then(t)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});return i.observe(r,e),function(i){var o=new MutationObserver(function(){o.disconnect(),i()});o.observe(t,e),n||(n=!0,r.classList.toggle("foo"))}}();i.exports=a},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=e.PromiseInspection,o=t("./util");function a(t){this.constructor$(t)}o.inherits(a,n),a.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},a.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new a(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=t("./errors").RangeError,a=t("./errors").AggregateError,s=i.isArray,l={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return u(t,e)},e.prototype.some=function(t){return u(this,t)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),i=r.errorObj,o=r.isObject,a={}.hasOwnProperty;return function(t,s){if(o(t)){if(t instanceof e)return t;var l=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(t);if(l===i){s&&s._pushContext();var c=e.reject(l.e);return s&&s._popContext(),c}if("function"==typeof l){if(function(t){try{return a.call(t,"_promise0")}catch(t){return!1}}(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return function(t,o,a){var s=new e(n),l=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var c=!0,u=r.tryCatch(o).call(t,function(t){s&&(s._resolveCallback(t),s=null)},function(t){s&&(s._rejectCallback(t,c,!0),s=null)});return c=!1,s&&u===i&&(s._rejectCallback(u.e,!0,!0),s=null),l}(t,l,s)}}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.TimeoutError;function a(t){this.handle=t}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,i){var o,l;return void 0!==i?(o=e.resolve(i)._then(s,null,null,t,void 0),r.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(n),l=setTimeout(function(){o._fulfill()},+t),r.cancellation()&&o._setOnCancel(new a(l)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(t){return clearTimeout(this.handle),t}function u(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return l(t,this)},e.prototype.timeout=function(t,e){var n,s;t=+t;var l=new a(setTimeout(function(){n.isPending()&&function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,s)},t));return r.cancellation()?(s=this.then(),(n=s._then(c,u,void 0,l,void 0))._setOnCancel(l)):n=this._then(c,u,void 0,l,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util"),l=t("./errors").TypeError,c=t("./util").inherits,u=s.errorObj,d=s.tryCatch,f={};function p(t){setTimeout(function(){throw t},0)}function h(t,n){var i=0,a=t.length,s=new e(o);return function o(){if(i>=a)return s._fulfill();var l=function(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(l instanceof e&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),t.promise)}catch(t){return p(t)}if(l instanceof e)return l._then(o,p,null,null,null)}o()}(),s}function g(t,e,n){this._data=t,this._promise=e,this._context=n}function m(t,e,n){this.constructor$(t,e,n)}function v(t){return g.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function y(t){this.length=t,this.promise=null,this[t-1]=null}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():f},g.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==f?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},g.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(m,g),m.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},y.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+s.classString(o));var l=!0;2===t&&Array.isArray(arguments[0])?(i=arguments[0],t=i.length,l=!1):(i=arguments,t--);for(var c=new y(t),f=0;f<t;++f){var p=i[f];if(g.isDisposer(p)){var m=p;(p=p.promise())._setDisposable(m)}else{var b=r(p);b instanceof e&&(p=b._then(v,null,null,{resources:c,index:f},void 0))}c[f]=p}for(var w=new Array(c.length),f=0;f<w.length;++f)w[f]=e.resolve(c[f]).reflect();var _=e.all(w).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return u.e=n.error(),u;if(!n.isFulfilled())return void _.cancel();t[e]=n.value()}x._pushContext(),o=d(o);var r=l?o.apply(void 0,t):o(t),i=x._popContext();return a.checkForgottenReturns(r,i,"Promise.using",x),r}),x=_.lastly(function(){var t=new e.PromiseInspection(_);return h(c,t)});return c.promise=x,x._setOnCancel(c),x},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new m(t,this,i());throw new l}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";var o=t("./es5"),a="undefined"==typeof navigator,s={e:{}},l,c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function u(){try{var t=l;return l=null,t.apply(this,arguments)}catch(t){return s.e=t,s}}function d(t){return l=t,u}var f=function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function p(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function h(t){return"function"==typeof t||"object"==typeof t&&null!==t}function g(t){return p(t)?new Error(M(t)):t}function m(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function v(t,e,n){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function y(t,e,n){if(p(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,r),t}function b(t){throw t}var w=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var a;try{a=n(t)}catch(t){return r}for(var s=0;s<a.length;++s){var l=a[s];if(!i[l]){i[l]=!0;var c=Object.getOwnPropertyDescriptor(t,l);null!=c&&null==c.get&&null==c.set&&r.push(l)}}t=o.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),_=/this\s*\.\s*\S+\s*=/;function x(t){try{if("function"==typeof t){var e=o.names(t.prototype),n=o.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=_.test(t+"")&&o.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function S(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.foo}return r(),r(),t}var C=/^[a-z$_][a-z$_0-9]*$/i;function E(t){return C.test(t)}function T(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function M(t){try{return t+""}catch(t){return"[no string representation]"}}function k(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function A(t){try{y(t,"isOperational",!0)}catch(t){}}function I(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function O(t){return k(t)&&o.propertyIsWritable(t,"stack")}var P="stack"in new Error?function(t){return O(t)?t:new Error(M(t))}:function(t){if(O(t))return t;try{throw new Error(M(t))}catch(t){return t}};function L(t){return{}.toString.call(t)}function D(t,e,n){for(var r=o.names(t),i=0;i<r.length;++i){var a=r[i];if(n(a))try{o.defineProperty(e,a,o.getDescriptor(t,a))}catch(t){}}}var N=function(t){return o.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var R="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};N=function(t){return o.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?R(t):null}}var F=void 0!==e&&"[object process]"===L(e).toLowerCase(),B=void 0!==e&&void 0!==e.env;function j(t){return B?e.env[t]:void 0}function q(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function z(t,e){return t.bind(e)}var U={isClass:x,isIdentifier:E,inheritedDataKeys:w,getDataPropertyOrDefault:v,thrower:b,isArray:o.isArray,asArray:N,notEnumerableProp:y,isPrimitive:p,isObject:h,isError:k,canEvaluate:a,errorObj:s,tryCatch:d,inherits:f,withAppended:m,maybeWrapAsError:g,toFastProperties:S,filledRange:T,toString:M,canAttachTrace:O,ensureErrorObject:P,originatesFromRejection:I,markAsOriginatingFromRejection:A,classString:L,copyDescriptors:D,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:F,hasEnvVariables:B,env:j,global:c,getNativePromise:q,domainBind:z};U.isRecentNode=U.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),U.isNode&&U.toFastProperties(e);try{throw new Error}catch(t){U.lastLineError=t}r.exports=U},{"./es5":13}]},{},[4])(4)}(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(402),n(78),n(634).setImmediate)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return{restrict:"E",link:function(t,e){var n=t.scene;n.setContainer(e.get(0)),t.$watch(function(){return e.width()},n.throttledOnWindowResize),t.$watch(function(){return e.height()},n.throttledOnWindowResize)}}};e.ViewDirective=r,r.$inject=[]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(50),i=n(90),o=n(3665),a=function(){return{restrict:"E",template:o,link:function(t,e){var n=t.$on("$destroy",function(){n(),n=null,a&&a(),a=null,s&&s(),s=null,l&&l(),l=null}),o=t.scene;t.cameraPosition=o.getCameraPosition(),t.dot={lonLat:null,altitude:null,displayAltitude:null,unit:null},t.isSelectingCoord=!1,t.onMoveClick=function(){o.setCameraPositionAnimated(t.dot.lonLat,t.dot.altitude,function(){o.clearShownPosition()})},t.selectCoordClick=function(){t.isSelectingCoord?o.cancelGettingLonLatFromClick():(t.dot.lonLat=null,o.clearShownPosition(),o.getLonLatFromClick().then(f).catch(function(){}));t.isSelectingCoord=!t.isSelectingCoord};var a=t.$watchCollection("dot.lonLat",c),s=t.$watch("dot.displayAltitude",c);o.on("camera-moved",function(){t.cameraPosition=o.getCameraPosition(),t.$apply()}),o.clearShownPosition();t.units=["foot","meter"].map(function(t){return i.converter.getUnit(t)}),t.dot.unit=t.units[0];var l=t.$watch("dot.unit.id",function(e,n){e!==n&&(u(),d(t.dot.lonLat,t.dot.altitude))});function c(e,n){e!==n&&(u(),d(t.dot.lonLat,t.dot.altitude))}function u(){t.dot.altitude=null,r(t.dot.displayAltitude)&&(t.dot.altitude=i.converter.convert(t.dot.displayAltitude,t.dot.unit,"meter"))}function d(t,e){t&&r(t[0])&&r(t[1])&&o.showPosition(t,e)}function f(e){t.isSelectingCoord=!1,e&&(t.dot.lonLat=t.dot.lonLat||[],t.dot.lonLat[0]=e[0],t.dot.lonLat[1]=e[1],t.$apply())}}}};e.ControlsDirective=a,a.$inject=[]},function(t,e){t.exports='<div class="stealth-earth-controls">\n    <div class="stealth-earth-controls-camera-pos section">\n        <div class="label-value-table-horiz">\n            <div class="table-row">\n                <span class="label-column">\n                    Lat/Lon:\n                </span>\n                <span class="value-column">\n                    {{cameraPosition.lat | numberTrim:4}}&deg;\n                    {{cameraPosition.lon | numberTrim:4}}&deg;\n                </span>\n            </div>\n            <div class="table-row">\n                <span class="label-column">\n                    Altitude:\n                </span>\n                <span class="value-column">\n                    {{cameraPosition.altitude | convertUnit:\'meter\':dot.unit | numberTrim:0}}\n                    {{dot.unit.display}}\n                </span>\n            </div>\n        </div>\n    </div>\n\n    <div class="text-muted flex-row section">\n        <div>\n            <i class="fa fa-info-circle"></i>\n        </div>\n        <div class="buf-md-ml">\n            Hold Ctrl to look around, and Shift to orbit around a point.\n        </div>\n    </div>\n\n    <div class="section">\n        <div class="form-row">\n            <label>Move to coordinates:</label>\n            <div class="flex-row">\n                <input ng-model="dot.lonLat"\n                    placeholder="Enter lat, lon"\n                    ccri-geocoder-coordinate-input\n                >\n                <span>&nbsp;</span>\n                <a class="icon-button clickable click-padded"\n                    ng-class="{\'toggled-on\': isSelectingCoord}"\n                    uib-tooltip-html="(isSelectingCoord ? \'Cancel Selection\' : \'Select point\')"\n                    tooltip-class="nowrap" tooltip-popup-delay="600"\n                    tooltip-placement="top-right"\n                    tooltip-append-to-body="true"\n                    ng-click="selectCoordClick()"\n                ><i class="fa fa-lg fa-crosshairs"></i></a>\n            </div>\n        </div>\n        <div class="form-row">\n            <label>Altitude:</label>\n            <div class="flex-row">\n                <input type="number" ng-model="dot.displayAltitude"\n                    ccri-angular-utils-number\n                    placeholder="Altitude"\n                    style="flex: 60% 0 1"\n                >\n                <span>&nbsp;</span>\n                <ccri-angular-utils-unit-select unit-list="units"\n                    value="dot.unit" hide-tooltip="true"\n                    style="flex: 40% 0 1"\n                ></ccri-angular-utils-unit-select>\n            </div>\n        </div>\n        <div class="form-footer text-right">\n            <button ng-click="onMoveClick()">\n                <span>Go</span>\n                <i class="fa fa-caret-right"></i>\n            </button>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3667),i=function(){return{restrict:"E",template:r,link:function(t,e){t.onClick=function(){n.resetNorth()};var n=t.scene;n.on("camera-moved",i);var r=e.find(".stealth-earth-compass");function i(){var t=n.getCameraTilt();r.css("transform","rotate("+t+"rad)")}i()}}};e.RotateControlDirective=i,i.$inject=[]},function(t,e){t.exports='<div class="stealth-earth-rotate-control">\n    <div class="stealth-earth-rotate">\n        <button class="stealth-earth-rotate-reset" title="Reset rotation" ng-click="onClick()">\n            <span class="stealth-earth-compass" style="transform: rotate(0rad);">⬆</span>\n        </button>\n    </div>\n    <div class="rotateControlText bar-color2">N</div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(55),a=n(24),s=n(3669);n(3670),n(3681);var l=n(1060),c=n(3685),u=n(3686),d=n(3687),f=n(3688),p=n(3689),h=n(3690),g=n(3691);function m(t,e,n,r){n.on("get.failed",function(){o.alerter.errorMsg("Failed to get list of Saved Filters from server. Saved Filter Manager is unavailable.","Communication Error")}),n.on("post.succeeded",function(t){o.alerter.successMsg(t.queryType+" query saved!","Saved Queries")}),n.on("post.failed",function(){o.alerter.errorMsg("Failed to save query.","Saved Queries")}),n.on("delete.succeeded",function(){o.alerter.successMsg("Successfully deleted query.","Saved Queries")}),n.on("delete.failed",function(){o.alerter.errorMsg("Failed to delete query.","Saved Queries")}),n.on("updateSubscribers.succeeded",function(){o.alerter.successMsg("Email subscriber list saved.","Saved Queries")}),n.on("updateSubscribers.failed",function(){o.alerter.errorMsg("Failed to save email subscriber list.","Saved Queries")}),n.on("showOnStartup.succeeded",function(){o.alerter.successMsg("Successfully set query to show on startup.","Saved Queries")}),n.on("showOnStartup.failed",function(){o.alerter.errorMsg("Failed to set query to show on startup.","Saved Queries")}),n.on("disableShowOnStartup.succeeded",function(){o.alerter.successMsg("Successfully turned off Show on Startup.","Saved Queries")}),n.on("disableShowOnStartup.failed",function(){o.alerter.errorMsg("Failed to turn off Show on Startup.","Saved Queries")}),e.load().then(function(){a.DataSourceManager?a.DataSourceManager.loadDataSources().then(function(){r.runStartupQueries()}):t(function(){r.runStartupQueries()})})}r.module("stealth.savedqueries.zoomto").factory("closestZoom",["ol3Map",s.ClosestZoomFactory]),r.module("stealth.savedqueries",["ccri.angular-utils","ccri.list-view","stealth.config","stealth.core.geo.ol3.map","stealth.core.wizard","stealth.core.sidebar","stealth.core.startmenu","stealth.query-edit","stealth.savedqueries.zoomto","stealth.geo.timelapse","ui.bootstrap"]).constant("stealth.savedqueries.SQCONFIG",{baseUrl:null,userDn:null,enabled:!1}).config(["CONFIG","stealth.savedqueries.SQCONFIG","stealth.geo.timelapse.wizard.TimelapseWizardProvider",function(t,e,n){var r=i(t,"savedqueries.server.url");r&&(e.baseUrl=r,e.enabled=!0);var o=i(t,"userDn");o&&(e.userDn=o),n.setDefaultOption("isSaveable",!0)}]).factory("stealth.savedqueries.events",function(){return l.SavedQueryEvents}).factory("stealth.savedqueries.data",["$http","$q","stealth.savedqueries.events","stealth.savedqueries.SQCONFIG",function(t,e,n,r){return new c.DataService(t,e,n,r)}]).factory("stealth.savedqueries.queryTypes",["$q",function(t){return new d.QueryTypesService(t)}]).factory("stealth.savedqueries.menuOptions",["$uibModal","closestZoom","stealth.savedqueries.data","stealth.savedqueries.queryTypes","stealth.savedqueries.SQCONFIG","stealth.savedqueries.subscriptionWizard","ol3Map",function(t,e,n,r,i,o,a){return new g.MenuOptions(t,e,n,r,i,o,a)}]).factory("stealth.savedqueries.manager",["$log","$q","stealth.savedqueries.data","stealth.savedqueries.menuOptions","stealth.savedqueries.queryTypes",function(t,e,n,r,i){return new u.Manager(t,e,n,r,i)}]).directive("stealthSavedqueriesEmailSubscriptWiz",[function(){return{restrict:"E",template:f}}]).service("stealth.savedqueries.subscriptionWizard",p.EmailSubscription.WizardService).factory("stealth.savedqueries.highlightLayer",["stealth.savedqueries.data",function(t){return new h.HighlightLayer(t)}]).run(["stealth.savedqueries.data","stealth.savedqueries.highlightLayer","ol3Map",function(t,e,n){n.addLayerOverlay(e.layer)}]),m.$inject=["$timeout","stealth.savedqueries.data","stealth.savedqueries.events","stealth.savedqueries.manager"],e.default=r.module("stealth.savedqueries").run(m).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=n(6);function o(t,e){var n,o,s=i.extent.createEmpty(),l=i.extent.createEmpty();return t?(n=[-180,-1/0,0,1/0],o=360):(n=[0,-1/0,180,1/0],o=-360),r(e.getPolygons(),function(t){var e=t.getExtent();i.extent.intersects(n,e)?i.extent.extend(s,e):i.extent.extend(l,e)}),i.extent.extend(l,a(o,0,s))}function a(t,e,n){return[n[0]+t,n[1]+e,n[2]+t,n[3]+e]}function s(t,e){var n=i.extent.boundingExtent([i.extent.getCenter(t),i.extent.getCenter(e)]);return Math.sqrt(Math.pow(i.extent.getWidth(n),2)+Math.pow(i.extent.getHeight(n),2))}e.ClosestZoomFactory=function(t){return function(e){if(e instanceof i.geom.Polygon&&(e=new i.geom.MultiPolygon([e.getCoordinates()])),!(e instanceof i.geom.MultiPolygon))throw"unsupported geometry";for(var n,r=e.getExtent(),l=o(!0,e),c=o(!1,e),u=a(-360,0,l),d=a(360,0,c),f=t.getExtent(),p=[[r,i.extent.getWidth(r),s(f,r)],[l,i.extent.getWidth(l),s(f,l)],[c,i.extent.getWidth(c),s(f,c)],[u,i.extent.getWidth(u),s(f,u)],[d,i.extent.getWidth(d),s(f,d)]],h=p[0],g=1,m=p.length;g<m;g++)if(n=p[g],Math.abs(n[1]-h[1])<1e-5){if(n[2]<h[2]){h=n;continue}}else n[1]<h[1]&&(h=n);return h[0]}},e.getWrappedExtent=o,e.translateExtent=a,e.getPanOffset=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(3671),n(3673),n(3675),n(3677),n(3679)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(44),o=n(3672);r.module("stealth.savedqueries").directive("stealthSavedqueriesListItemContent",function(){return{restrict:"E",template:o,controller:["$scope","$element","$timeout",function(t,e,n){t.queryDetails={cqlParams:t.vm.sq.cqlParameters};var r=i(t.queryDetails.cqlParams);t.hideDetailedCql=1===r.length&&"additionalCql"===r[0];var o=e.find(".content-box.attributeFilter");n(function(){t.queryDetailsHasOverflow=o.height()<o.find(".queryDetails").height()})}]}})},function(t,e){t.exports='<div class="savedqueries-li">\n    <div class="small">{{vm.sq.classification}}</div>\n    <dl>\n        <dt>Owner</dt>\n        <dd>{{vm.sq.userId | propertyValue:[\'cn\',\'CN\']}}</dd>\n        <dt>Type</dt>\n        <dd>{{vm.sq.type | lodash: \'capitalize\'}}</dd>\n        <dt>Source</dt>\n        <dd>{{vm.sq.source}}</dd>\n        <span ng-class="{\'ng-hide\': vm.sq.type !== \'time-lapse\'}">\n            <dt>Start</dt>\n            <dd><st-datetime date="::vm.sq.dates.start"></st-datetime></dd>\n            <dt>End</dt>\n            <dd><st-datetime date="::vm.sq.dates.end"></st-datetime></dd>\n        </span>\n    </dl>\n\n    <div>\n        Attribute Filter:\n        <ccri-angular-utils-clipboard-copy\n                data-clipboard-text="{{vm.sq.attributeFilter}}" class="pull-right clickable"\n                uib-tooltip="{{hideDetailedCql ? \'copy to clipboard\' : \'copy in CQL format to clipboard\'}}"\n                tooltip-class="nowrap"\n                tooltip-placement="top-right" tooltip-animation="true"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n            <i class="fa fa-clipboard"></i>\n        </ccri-angular-utils-clipboard-copy>\n    </div>\n    <div class="content-box attributeFilter"\n            ng-init="vm.showFullAttributes=false"\n            ng-style="{height: (vm.showFullAttributes) ? \'auto\' : \'38px\'}"\n            style="min-height: 38px"\n            ng-class="{\'hide-ellipsis\': !hideDetailedCql && (vm.showFullAttributes || !queryDetailsHasOverflow)}"\n            ng-click="vm.showFullAttributes = !vm.showFullAttributes">\n        <span ng-class="{\'ng-hide\': !hideDetailedCql}">\n            {{vm.sq.attributeFilter}}\n        </span>\n        <st-query-details-display\n            ng-class="{\'ng-hide\': hideDetailedCql}"\n            query-details="queryDetails">\n        </st-query-details-display>\n    </div>\n\n    <div class="box-label">\n        Area Coordinates:\n        <ccri-angular-utils-clipboard-copy\n                data-clipboard-text="{{vm.sq.bounds}}" class="pull-right clickable"\n                uib-tooltip="copy to clipboard" tooltip-class="nowrap"\n                tooltip-placement="top-right" tooltip-animation="true"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n            <i class="fa fa-clipboard"></i>\n        </ccri-angular-utils-clipboard-copy>\n    </div>\n    <div class="content-box"\n            ng-init="vm.showFullBounds=false"\n            ng-style="{height: (vm.showFullBounds) ? \'auto\' : \'51px\'}"\n            style="min-height: 51px"\n            ng-click="vm.showFullBounds = !vm.showFullBounds">\n        {{vm.sq.bounds}}\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3674);r.module("stealth.savedqueries").directive("stealthSavedqueriesListItemContentCollapsed",function(){return{restrict:"E",template:i}})},function(t,e){t.exports="<div class=\"savedqueries-li\">\n    <div class=\"small\">{{vm.sq.classification}}</div>\n    <dl>\n        <dt>Owner</dt>\n        <dd>{{vm.sq.userId | propertyValue:['cn','CN']}}</dd>\n    </dl>\n</div>\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(3676);function a(t,e,n,r){if(!i(t,"vm.sq"))throw"Scope requires vm.sq to be set.";t.vm.ssLoading=!1;var o=n.getTypeDef(t.vm.sq.type);t.vm.iconClass=o?o.icon:null,t.toggleShowOnStartup=function(n){if(t.vm.ssLoading)return;var r;n.stopImmediatePropagation(),r=!0===t.vm.sq.showOnStartup?e.unsetShowOnStartup(t.vm.sq):e.setShowOnStartup(t.vm.sq);t.vm.ssLoading=!0,r.finally(function(){t.vm.ssLoading=!1})},t.changePrivacy=function(n){n.stopImmediatePropagation(),t.userOwnsFilter()&&(t.vm.sq.isPublic=!t.vm.sq.isPublic,e.update(t.vm.sq))},t.userOwnsFilter=function(){return r.userDn===t.vm.sq.userId}}a.$inject=["$scope","stealth.savedqueries.data","stealth.savedqueries.queryTypes","stealth.savedqueries.SQCONFIG"],e.ListItemTitleCtrl=a,r.module("stealth.savedqueries").directive("stealthSavedqueriesListItemTitle",function(){return{restrict:"E",template:o,controller:a}})},function(t,e){t.exports='<span class="savedqueries-li-title">\n    <span class="ellipsis savedqueries-li-title-text"\n        uib-tooltip="{{vm.sq.title}}"\n        tooltip-class="wrap"\n        tooltip-enable="false"\n        ccri-angular-utils-tooltip-overflow="watch">\n        {{vm.sq.title}}\n    </span>\n    <span class="savedqueries-li-title-icon">\n        <i ng-class="::vm.iconClass"\n           uib-tooltip="{{::vm.sq.type | lodash: \'capitalize\'}}" tooltip-class="nowrap"\n           tooltip-placement="bottom" tooltip-animation="true"\n           tooltip-popup-delay="600" tooltip-trigger="mouseenter"></i>\n    </span>\n    <span class="savedqueries-li-title-flag"\n          ng-style="{\'cursor\': userOwnsFilter() ? \'pointer\' : \'not-allowed\'}"\n          ng-click="changePrivacy($event)">\n         <i class="fa fa-lg"\n            ng-class="vm.sq.isPublic ? \'fa-unlock\' : \'fa-lock\'"\n            uib-tooltip="{{userOwnsFilter() ? \'Toggle Privacy\' : \'You do not own this filter\'}}"\n            tooltip-class="nowrap"\n            tooltip-placement="bottom" tooltip-animation="true"\n            tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n         ></i>\n     </span>\n    <span class="savedqueries-li-title-flag" ng-click="toggleShowOnStartup($event)">\n        <i class="fa fa-lg ccri-icon ccri-icon-map-pin"\n                ng-class="{\'ng-hide\': vm.ssLoading, \'active\': vm.sq.showOnStartup}"\n                uib-tooltip="Show on Startup" tooltip-class="nowrap"\n                tooltip-placement="bottom" tooltip-animation="true"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n        ></i>\n    </span>\n    <span class="savedqueries-li-title-flag">\n        <i class="fa fa-lg fa-circle-o-notch fa-spin"\n                ng-class="{\'ng-hide\': !(vm.ssLoading)}"\n        ></i>\n    </span>\n</span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(999),o=n(3678);function a(t,e,n,r){function o(t){return!!t&&(!e.vm.filterUser||e.vm.filterUser===t.userId)}e.vm={userDn:r.userDn,filterUser:r.userDn},e.changeFilterUser=function(t){e.vm.filterUser=t,n.arrayStore.update()},e.sortFilters=function(t,e){n.arrayStore.sortBy(["showOnStartup",t[0]],["desc",e[0]])},e.sortFields=[{label:"Title",prop:"title"},{label:"Public",prop:"isPublic"},{label:"Classification",prop:"classification"},{label:"Owner",prop:"userId"},{label:"Type",prop:"type"},{label:"Source",prop:"source"}],e.defaultSortField=i(e.sortFields),e.defaultSortOrder=["asc"],n.arrayStore.addFilter(o),t.on("$destroy",function(){n.arrayStore.removeFilter(o)})}a.$inject=["$element","$scope","stealth.savedqueries.data","stealth.savedqueries.SQCONFIG"],e.SidebarPanelToolbarController=a,r.module("stealth.savedqueries").directive("stealthSavedqueriesSidebarPanelToolbar",function(){return{restrict:"E",template:o,controller:a}})},function(t,e){t.exports='<div class="savedqueries-toolbar">\n    <span class="clickable mineAll" ng-click="changeFilterUser(vm.userDn)">\n        <i class="fa" ng-class="(vm.filterUser === vm.userDn) ? \'fa-dot-circle-o\' : \'fa-circle-o\'"></i>\n        Mine\n    </span>\n    <span class="clickable mineAll" ng-click="changeFilterUser(null)" style="padding-left:8px;">\n        <i class="fa" ng-class="(!vm.filterUser) ? \'fa-dot-circle-o\' : \'fa-circle-o\'"></i>\n        All\n    </span>\n    <ccri-list-view-components-sort class="pull-right" fields="sortFields" sort="sortFilters"\n        sort-fields="defaultSortField" sort-order="defaultSortOrder"></ccri-list-view-components-sort>\n    <hr>\n</div>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(4),o=n(304),a=n(42),s=n(39),l=n(3680);function c(t,e,n,r,l,c,u,d){e.on("$destroy",function(){t.$destroy()});var f=r.arrayStore;t.arrayStore=f,t.buttonMenuResolver=function(){return i(u.getCreationTypes(),function(t){return{name:o(t),onClick:function(){!function(t){u.edit({type:t,userId:d.userDn})}(t)}}})},t.decorateCard=function(t){var e=t.scope;e.vm={sq:e.record},t.titleWidget=new s.WidgetDef({tag:"stealth-savedqueries-list-item-title",scope:e}),t.collapsedWidget=new s.WidgetDef({tag:"stealth-savedqueries-list-item-content-collapsed",scope:e}),t.contentWidget=new s.WidgetDef({tag:"stealth-savedqueries-list-item-content",scope:e})},t.menuResolver=function(t){var e=[];return f.getById(t).then(function(t){e.push.apply(e,c.getForSavedQuery(t))}),e},t.filterResolver=function(t){return t=t.toLowerCase(),function(e){if(!e)return!1;if(!t)return!0;var n=!1;return a(p,function(r){-1!==e[r].toLowerCase().indexOf(t)&&(n=!0)}),n}},t.toolbarWidget=new n({tag:"stealth-savedqueries-sidebar-panel-toolbar"}),t.data=r,t.onMouseEnter=function(t){l.highlight(t)},t.onMouseLeave=function(){l.unhighlight()},t.manualRefresh=function(){r.load()};var p=["attributeFilter","bounds","classification","source","title","type","userId"]}c.$inject=["$scope","$element","ccri.angular-utils.WidgetDef","stealth.savedqueries.data","stealth.savedqueries.highlightLayer","stealth.savedqueries.menuOptions","stealth.savedqueries.queryTypes","stealth.savedqueries.SQCONFIG"],e.sidebarPanelDirectiveCtrl=c,r.module("stealth.savedqueries").directive("stealthSavedqueriesSidebarPanel",function(){return{restrict:"E",scope:{},template:l,controller:c}}).run(["$rootScope","ccri.angular-utils.WidgetDef","sidebarManager","startMenuManager",function(t,e,n,r){var i=n.addButton("Filter Manager","ccri-icon ccri-icon-filter-report",350,new e({tag:"stealth-savedqueries-sidebar-panel",scope:t.$new()}),null,!0);r.addButton("Filter Manager","ccri-icon ccri-icon-filter-report",function(){n.toggleButton(i,!0)})}])},function(t,e){t.exports='<div class="savedqueries-sidepanel">\n    <ccri-list-view-element\n            button-menu-icon="fa-plus-circle"\n            button-menu-tooltip="Create New Filter"\n            button-menu-resolver="buttonMenuResolver"\n            datastore="arrayStore"\n            decorate-card="decorateCard"\n            expand-options="true"\n            menu-resolver="menuResolver"\n            filter-resolver="filterResolver"\n            search-placeholder="Search by filter name, owner or type"\n            toolbar-widget="toolbarWidget"\n            on-mouse-enter="onMouseEnter"\n            on-mouse-leave="onMouseLeave"\n            items-loading="data.loadingStatus.loading"\n            manual-refresh="manualRefresh"\n            class="anchorAll"\n    ></ccri-list-view-element>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3682),o=n(3683),a=n(3684),s=function(){return function(){this.$get=["stealth.geo.timelapse.manager.Manager","stealth.geo.timelapse.wizard.WizardUtils",function(t,e){return new i.AddToMapService(t,e)}]}}();e.AddToMapServiceProvider=s;var l=function(){return function(){this.$get=["stealth.geo.wizard.AreaStep","stealth.geo.wizard.OptionsStep","stealth.geo.wizard.SourceTimeStep","stealth.wizard.WizardRunner","stealth.geo.timelapse.wizard.WizardUtils",function(t,e,n,r,i){return new o.EditSavedQueryWizard(t,e,n,r,i)}]}}();e.EditSavedQueryWizardProvider=l;var c=function(){return function(){this.$get=["stealth.geo.wizard.SourceTimeStep","stealth.wizard.WizardRunner","stealth.geo.timelapse.manager.Manager","stealth.geo.timelapse.wizard.WizardUtils",function(t,e,n,r){return new a.RunAsTimelapseWizard(t,e,n,r)}]}}();e.RunAsTimelapseWizardProvider=c,e.default=r.module("stealth.savedqueries").provider("stealth.savedqueries.timelapse.AddToMapService",s).provider("stealth.savedqueries.timelapse.EditSavedQueryWizard",l).provider("stealth.savedqueries.timelapse.RunAsTimelapseWizard",c).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(55),i=n(74),o=n(72),a=n(339),s=n(47),l=n(24),c=function(){function t(t,e){this.wizardUtils=e,this.TLManager=t}return t.prototype.submitSavedQuery=function(t){var e=this,n=l.DataSourceManager.getDataSourcesById(t.source).first();n?this.convertSavedQueryToDataViewRecord(n,t.dates,t.bounds,t.cqlParameters).then(function(n){return e.TLManager.buildCanvasLayerState(n,t.title)}):r.alerter.errorMsg("Data source not available")},t.prototype.convertSavedQueryToDataViewRecord=function(t,e,n,r){var l=s.KeywordHelper.getFieldByName(t,"geom"),c=s.KeywordHelper.getFieldByName(t,"dtg"),u=s.KeywordHelper.getFieldByName(t,"trkId");return s.KeywordHelper.getFeatureProperties(t).then(function(d){var f,p={field:c,dtg:e.start,endDtg:e.end,dtgFieldIsString:d[c]&&"string"===d[c].localType},h={field:l,features:n,negate:!1},g=a.CqlParamsHelper.convertCqlParamsToClauses(r,d),m=r.additionalCql?new i.RawClauseRecord({cql:r.additionalCql}):void 0,v=new s.GetFeatureDataFilterRecord({timeClause:new i.PointTimeClauseRecord(p),geomClause:new i.IntersectsClauseRecord(h),simpleClauses:g,additionalCql:m}),y=s.KeywordHelper.getDefaultStoreType(t);if(y===s.StoreTypes.Arrow){var b=s.KeywordHelper.getArrowFieldProperties(t).suggestedFields;f=s.StoreHelper.buildArrowFormatOptions(t,c,b)}else f=s.StoreHelper.buildBinFormatOptions(c,l,u);var w=new s.StoreRecord({type:y,id:o.uuid.generate(),geomField:l,dtgField:c,idField:u,formatOptions:f}),_=new s.SourceRecord({id:t.id,type:s.SourceType.SERVER});return new s.DataViewRecord({source:_,store:w,dataFilter:v})}).catch(function(t){return Promise.reject(t)})},t}();e.AddToMapService=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(21),o=n(15),a=n(24),s=function(){function t(t,e,n,r,i){this.areaStep=t,this.optionsStep=e,this.sourceTimeStep=n,this.WizardRunner=r,this.wizardUtils=i}return t.prototype.launchWizard=function(t){var e=this,n=r(t,"dates.start")&&0!==i.utc(t.dates.start).get("year")?i.utc(t.dates.start):i().subtract(1,"hours").utc(),s=r(t,"dates.end")&&9999!==i.utc(t.dates.end).get("year")?i.utc(t.dates.end):i().utc(),l={classification:t.classification,cql:t.attributeFilter,cqlParams:t.cqlParameters,dataSourceDescription:null,filter:t.filter,generatedFeatures:t.bounds,startDtg:n,endDtg:s,selectedSource:t.source?a.DataSourceManager.getDataSourceByLayerName(t.source.split(";")[1]):null,shouldBeSaved:!0,shouldBeShared:t.isPublic,storeName:t.title},c=o.config.get("savedqueries.classifications",o.config.get("classification.options",["UNCLASSIFIED"])),u=o.config.get("ogc.cqlMaxLength",1/0);this.WizardRunner.run({steps:[this.sourceTimeStep({summaryHeatmap:null,keywordPath:["timelapse","historical"],storageKeyPrefix:null,originalDataSource:l.selectedSource,queryName:l.storeName,filter:l.filter,editing:!0}),this.areaStep({buildCql:function(t){return e.wizardUtils.buildDataFilter(t).buildCql()},cqlMaxLength:u}),this.optionsStep({getFeatureTypeProperties:function(t){return t.dataSourceDescription.properties},buildCql:function(t){return e.wizardUtils.buildDataFilter(t).buildCql()},cqlMaxLength:u,getStoreName:function(t){return t.selectedSource.title+" Query"},saveQueryOptions:{editMode:!0,isSaveable:!0,savingIsNotOptional:!1,sharingIsNotOptional:!1,classifications:c,defaultClassification:l.classification||c[0]}})],displaySettings:{wizardTitle:"Time-lapse Query",wizardClass:"wizard-dark AreaDefinitionWizard",mainIconClass:"fa-clock-o",finishIconClass:"fa-check text-success"}},l).then(function(n){n.shouldBeSaved&&e.wizardUtils.saveQuery(n,{savedQueryId:t.id,showOnStartup:t.showOnStartup},!0,e.wizardUtils.buildDataFilter(n).buildCql())})},t}();e.EditSavedQueryWizard=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(21),o=n(72),a=n(74),s=n(339),l=n(47),c=n(24),u=function(){function t(t,e,n,r){this.sourceTimeStep=t,this.WizardRunner=e,this.TLManager=n,this.wizardUtils=r}return t.prototype.launchWizard=function(t){var e=this,n=t.source?c.DataSourceManager.getDataSourceByLayerName(t.source.split(";")[1]):null,o=r(t,"dates.start")&&0!==i.utc(t.dates.start).get("year")?i.utc(t.dates.start):i().subtract(1,"hours").utc(),a=r(t,"dates.end")&&9999!==i.utc(t.dates.end).get("year")?i.utc(t.dates.end):i().utc();this.WizardRunner.run({steps:[this.sourceTimeStep({summaryHeatmap:null,keywordPath:["timelapse","historical"],storageKeyPrefix:null,originalDataSource:n,queryName:t.title,filter:t.attributeFilter,editing:!1})],displaySettings:{wizardTitle:"Time-lapse Query",wizardClass:"wizard-dark AreaDefinitionWizard",mainIconClass:"fa-clock-o",finishIconClass:"fa-check text-success"}},{selectedSource:n,storeName:t.title,cql:t.filter,startDtg:o,endDtg:a}).then(function(n){e.convertSelectionsToDataViewRecord(n,t).then(function(n){e.TLManager.buildCanvasLayerState(n,t.title)})})},t.prototype.convertSelectionsToDataViewRecord=function(t,e){var n=t.useArrow?l.StoreTypes.Arrow:l.StoreTypes.Binary,r=this.wizardUtils.buildFormatOptions(t),i=new l.StoreRecord({type:n,id:o.uuid.generate(),geomField:t.geomField,dtgField:t.dtgField,idField:t.idField,formatOptions:r}),a=new l.SourceRecord({id:t.selectedSource.id,type:l.SourceType.SERVER});return this.buildDataFilter(t,e).then(function(t){return new l.DataViewRecord({source:a,store:i,dataFilter:t})})},t.prototype.buildDataFilter=function(t,e){var n;n=t.isLineQuery?new a.LineStringTimeClauseRecord({lineDtgField:t.dtgField,endDtg:t.endDtg.toISOString(),endDtgField:t.endDtgField,startDtg:t.startDtg.toISOString(),startDtgField:t.startDtgField}):new a.PointTimeClauseRecord({field:t.dtgField,dtg:t.startDtg.toISOString(),endDtg:t.endDtg.toISOString(),dtgFieldIsString:r(t.dataSourceDescription.properties[t.dtgField],"isString")});var i=new a.IntersectsClauseRecord({field:t.geomField,features:e.bounds}),o=e.cqlParameters.additionalCql?new a.RawClauseRecord({cql:e.cqlParameters.additionalCql}):void 0,c=s.CqlParamsHelper.convertCqlParamsToClauses(e.cqlParameters,t.dataSourceDescription.properties);return Promise.resolve(new l.GetFeatureDataFilterRecord({timeClause:n,geomClause:i,simpleClauses:c,additionalCql:o}))},t}();e.RunAsTimelapseWizard=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(46),i=n(17),o=n(4),a=n(164),s=n(42),l=n(1215),c=n(44),u=n(29),d=n(109),f=n(84),p=function(){return function(t,e,n,r,i,o,a,s,l,c,u,d,f,p,h){this.id=t,this.attributeFilter=e,this.bounds=n,this.classification=r,this.cqlParameters=i,this.dates=o,this.emailSubscribers=a,this.enableEmails=s,this.filter=l,this.isPublic=c,this.showOnStartup=u,this.source=d,this.title=f,this.type=p,this.userId=h}}();e.SavedQueryModel=p;var h=function(){function t(t,e,n,r){var i=this;this.$http=t,this.$q=e,this.events=n,this.SQCONFIG=r,this.arrayStore=new f.List.ArrayStore([],"id"),this.loadingStatus={loading:null},n.on("add.query",function(t){i.add(t)}),n.on("update.query",function(t){i.update(t)})}return t.prototype.fromServerObj=function(t){return new p(t.id,t.attributeFilter,r(t.bounds)&&"POLYGON EMPTY"===t.bounds.trim().toUpperCase()?"POLYGON((-180 -90,-180 90,180 90,180 -90,-180 -90))":t.bounds,t.classification,t.cqlParameters?JSON.parse(t.cqlParameters):{additionalCql:t.attributeFilter},{end:t.dates.end,start:t.dates.start},t.emailSubscribers,t.enableEmails,t.cqlFilter,t.public,t.showOnStartup,t.source,t.title,t.typeLabel,t.userId)},t.prototype.toServerObj=function(t){return{classification:t.classification,cqlParameters:JSON.stringify(t.cqlParameters),filter:t.filter,public:t.isPublic,source:t.source,showOnStartup:t.showOnStartup,title:t.title,type:t.type}},t.prototype.load=function(){var t=this,e=this.$http.get(this.SQCONFIG.baseUrl+"/").then(function(e){var n;if(t.loadingStatus.loading=null,!i(e.data))return t.$q.reject("Bad server response. Expects a JSON array.");var r=o(e.data,function(e){return t.fromServerObj(e)});(n=t.arrayStore).updateAndPrune.apply(n,r)});return this.loadingStatus.loading=e,e.catch(function(){t.loadingStatus.loading=null,t.events.emit("get.failed")}),e},t.prototype.add=function(t){var e=this,n=this.toServerObj(t),r=this.$http.post(this.SQCONFIG.baseUrl+"/",$.param(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(n){return e.events.emit("post.succeeded",{queryType:t.type}),e.getOne(n.data.id).then(function(t){e.arrayStore.add(t)})});return r.catch(function(){e.events.emit("post.failed")}),r},t.prototype.update=function(t){var e,n=this,r=this.toServerObj(t),i=this.$http.post(this.SQCONFIG.baseUrl+"/update/"+encodeURIComponent(t.id),$.param(r),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){e=t.data.id});return t.showOnStartup&&(i=i.then(function(){return n.setShowOnStartup(a(t,{id:e}),!1)})),(i=this.$q.when(i.then(function(){return n.events.emit("post.succeeded",{queryType:t.type}),n.getOne(e).then(function(t){return n.arrayStore.getById(t.id).then(function(e){s(l(c(e),c(t)),function(n){n in t?e[n]=t[n]:delete e[n]}),n.arrayStore.update()})})}))).catch(function(){n.events.emit("post.failed")}),this.loadingStatus.loading=i,i.finally(function(){n.loadingStatus.loading=null}),i},t.prototype.getOne=function(t){var e=this;return this.$http.get(this.SQCONFIG.baseUrl+"/"+t).then(function(t){return e.fromServerObj(t.data)})},t.prototype.deleteOne=function(t){var e=this,n=this.SQCONFIG.baseUrl+"/"+encodeURIComponent(t.id),r=this.$http.delete(n).then(function(){e.arrayStore.delete(t),e.events.emit("delete.succeeded")});return r.catch(function(){e.events.emit("delete.failed")}),r},t.prototype.setShowOnStartup=function(t,e){var n=this;void 0===e&&(e=!0);var r=this.SQCONFIG.baseUrl+"/show-on-startup/"+encodeURIComponent(t.id),i=this.$http.put(r,{}).then(function(){t.showOnStartup=!0,n.arrayStore.update(t),e&&n.events.emit("showOnStartup.succeeded")});return i.catch(function(){n.events.emit("showOnStartup.failed")}),i},t.prototype.unsetShowOnStartup=function(t){var e=this,n=this.SQCONFIG.baseUrl+"/hide-on-startup/"+encodeURIComponent(t.id),r=this.$http.put(n,{}).then(function(){t.showOnStartup=!1,e.arrayStore.update(t),e.events.emit("disableShowOnStartup.succeeded")});return r.catch(function(){e.events.emit("disableShowOnStartup.failed")}),r},t.prototype.updateSubscribers=function(t){var e=this,n=this.SQCONFIG.baseUrl+"/update/"+encodeURIComponent(t.id),r=this.$http.post(n,$.param({emailSubscribers:t.emailSubscribers.join(","),enableEmails:t.enableEmails}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){e.arrayStore.update(t),e.events.emit("updateSubscribers.succeeded")});return r.catch(function(){e.events.emit("updateSubscribers.failed")}),r},t.prototype.getShowOnStartupQueries=function(){return this.$q.when(this.arrayStore.read().then(function(t){var e=t.toArray();return u(e,function(t){return t.showOnStartup})}))},t.prototype.copyQuery=function(t){return new p(null,t.attributeFilter,t.bounds,t.classification,d(t.cqlParameters),d(t.dates),[],!1,t.filter,!1,!1,t.source,t.title,t.type,this.SQCONFIG.userDn)},t}();e.DataService=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(42),i=n(22),o=n(4),a=function(){function t(t,e,n,r,i){this.$log=t,this.$q=e,this.savedQueryData=n,this.menuOptionsService=r,this.savedQueryTypes=i,t.debug("savedQueryManager instantiated")}return t.prototype.registerType=function(t){var e=this;this.savedQueryTypes.addType(t),this.menuOptionsService.addDefaultMenuOptions(t.type),r(t.menuOptions,function(n,r){n?e.menuOptionsService.addMenuOption(t.type,r,n):e.menuOptionsService.removeMenuOption(t.type,r)})},t.prototype.registerMenuOption=function(t,e,n){var r=this,o=t instanceof Array?t:[t];i(o,function(t){r.menuOptionsService.addMenuOption(t,e,n)})},t.prototype.runStartupQueries=function(){var t=this;return this.savedQueryData.getShowOnStartupQueries().then(function(e){var n=o(e,function(e){return t.savedQueryTypes.run(e)});return t.$q.all(n)})},t}();e.Manager=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(29),o=n(44),a=function(){function t(t){this.queryTypeDefs={},r=t}return t.prototype.addType=function(t){this.queryTypeDefs[t.type]=new s(t)},t.prototype.getTypeDef=function(t){return this.queryTypeDefs[t]},t.prototype.getCreationTypes=function(){var t=this;return i(o(this.queryTypeDefs),function(e){return!!t.queryTypeDefs[e].editor})},t.prototype.run=function(t){var e=this.queryTypeDefs[t.type];return e&&e.runner?r.when(e.runner.call(null,t)):r.when()},t.prototype.edit=function(t){var e=this.queryTypeDefs[t.type];return e&&e.editor?r.when(e.editor.call(null,t)):r.when()},t}();e.QueryTypesService=a;var s=function(){return function(t){this.type=t.type,this.icon=t.icon,this.runner=t.runner,this.editor=t.editor,this.contentDirective=t.contentDirective,this.contentCollapsedDirective=t.contentCollapsedDirective}}();e.QueryTypeDef=s},function(t,e){t.exports='<div class="subscription-wizard" ng-form="wizardForm">\n    <div class="bottom-margin2 limit-width">\n        <p>\n            DIRECTIONS: Use the input box to add email addresses that will receive alerts from this filter.\n        </p>\n        <p>\n            NOTE: Classification of alerts will be based on the clearance level of the filter owner.\n        </p>\n    </div>\n    <p class="limit-width">\n        <span class="text-gray-dull">FILTER:&nbsp;</span>\n        <span class="text-gray-bright">{{ savedQuery.title }}</span>\n    </p>\n\n    \x3c!-- Checkbox to enable --\x3e\n    <p>\n        <label class="clickable" ng-class="{enabled: enableEmails}">\n            <ccri-angular-utils-checkbox ng-model="enableEmails"></ccri-angular-utils-checkbox>&nbsp;\n            Enable alerts from this filter\n        </label>\n    </p>\n\n    \x3c!-- Email input --\x3e\n    <p class="flex-row text-input">\n        <span style="flex: 0 1 250px">\n            <input class="form-control input-xs"\n                type="email" ng-model="newAddr" placeholder="Enter New Email Address"\n                ng-keypress="addOnEnter($event)">\n        </span>\n        <span class="add-new-icon clickable" ng-click="addAddr()" style="flex: 0 0 25px">\n            <i class="fa fa-fw fa-plus-circle"\n                uib-tooltip="Add Address to List" tooltip-class="nowrap"\n                tooltip-placement="top-right" tooltip-animation="true"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n            </i>\n        </span>\n    </p>\n\n    \x3c!-- Invalid email warning --\x3e\n    <p class="text-danger shift-up" ng-class="{\'ng-hide\': !newAddrError}">\n        <i class="fa fa-warning"></i>&nbsp; Invalid email address\n    </p>\n\n    \x3c!-- Subscriber list --\x3e\n    <div>\n        <span class="text-gray-dull">SUBSCRIBER LIST:&nbsp;</span>\n        <i class="text-gray-bright" ng-class="{\'ng-hide\': emailSubscribers.length}">None</i>\n        <ul class="list-unstyled email-list limit-width">\n            <li ng-repeat="addr in emailSubscribers" class="flex-row">\n                <span class="email-address" style="flex: 0 1 auto"\n                      ng-class="aboutToDelete[$index]? \'text-gray-dull\':\'text-gray-bright\'">\n                    {{ addr }}\n                </span>\n                <i class="fa fa-sm fa-close text-danger" style="flex: 0 0 auto"\n                       ng-click="rmAddr(addr)"\n                       ng-mouseenter="aboutToDelete[$index] = true"\n                       ng-mouseleave="aboutToDelete[$index] = false">\n                </i>\n            </li>\n        </ul>\n    </div>\n\n    \x3c!-- Subscriber length warning --\x3e\n    <p class="text-danger shift-up" ng-class="{\'ng-hide\': !(enableEmails && wizardForm.hasEmails.$invalid)}">\n        <i class="fa fa-warning"></i>&nbsp; Please add at least one subscriber\n    </p>\n\n    \x3c!-- validation --\x3e\n    <input type="hidden" name="hasEmails" ng-model="validEmailList" ng-model-options="{getterSetter:true}" required>\n\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(133),i=n(334),o=n(18),a=n(271),s=n(2);!function(t){var e,n,l,c,u,d,f=function(){function t(t,r,i,o,a,s,f,p,h){t,e=r,n=i,l=o,c=a,u=s,f,d=p,h}return t.prototype.launchWizard=function(t){var f=e.$new();f.savedQuery=t,f.emailSubscribers=r(f.savedQuery.emailSubscribers),f.emailSubscribers||(f.emailSubscribers=[]),f.enableEmails=f.savedQuery.enableEmails,f.$watchCollection("emailSubscribers",function(t){t&&0!==t.length||(f.enableEmails=!1)}),f.rmAddr=function(t){i(f.emailSubscribers,t)},f.addAddr=function(){f.newAddr?(o(f.emailSubscribers)&&(f.enableEmails=!0),f.newAddrError=!1,f.emailSubscribers.push(f.newAddr.toLowerCase()),f.emailSubscribers=a(f.emailSubscribers),f.newAddr=""):f.newAddrError=!0},f.addOnEnter=function(t){13===t.keyCode&&f.addAddr()},f.validEmailList=function(){if(!arguments.length)return!f.enableEmails||(!!s(f,"emailSubscribers.length")||null)};var p=new u("Email Alerts Manager","ccri-icon ccri-icon-filter-report","fa-check text-success",[new c("Manage Email Alerts",new l({tag:"stealth-savedqueries-email-subscript-wiz",scope:f}),null,!0,null,function(t){t&&(f.savedQuery.emailSubscribers=f.emailSubscribers,f.savedQuery.enableEmails=f.enableEmails,d.updateSubscribers(f.savedQuery)),f.$destroy()},!1)],f,"wizard-dark");n.launchWizard(p)},t.$inject=["$http","$rootScope","wizardManager","ccri.angular-utils.WidgetDef","stealth.core.wizard.Step","stealth.core.wizard.Wizard","stealth.savedqueries.events","stealth.savedqueries.data","stealth.savedqueries.SQCONFIG"],t}();t.WizardService=f}(e.EmailSubscription||(e.EmailSubscription={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=function(){function t(t){this.savedQueryData=t,this.layerSource=new r.source.Vector,this.layer=new r.layer.Vector({source:this.layerSource,style:[new r.style.Style({stroke:new r.style.Stroke({color:"rgb(255,255,255)",width:4})}),new r.style.Style({stroke:new r.style.Stroke({color:"rgb(255,82,64)",width:2})})]}),this.wktParser=new r.format.WKT}return t.prototype.highlight=function(t){var e=this;this.cancelHighlight=!1,this.savedQueryData.arrayStore.getById(t).then(function(t){e.cancelHighlight||e.layerSource.addFeature(new r.Feature({geometry:e.wktParser.readGeometry(t.bounds)}))})},t.prototype.unhighlight=function(){this.layerSource.clear(!0),this.cancelHighlight=!0},t}();e.HighlightLayer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=n(133),o=n(164),a=n(29),s=n(4),l=n(134),c=n(6),u=n(3692),d=function(){function t(t,e,n,r,i,o,a){var s=this;this.$uibModal=t,this.closestZoom=e,this.savedQueryData=n,this.savedQueryTypes=r,this.SQCONFIG=i,this.subscriptionWizard=o,this.ol3Map=a,this.defaultOptions={zoomTo:{order:100,text:"Zoom To",onClick:function(t){s.zoomTo(t)}},run:{order:200,text:"Add to Map",onClick:function(t){s.getRunner(t.type).call(null,t),s.zoomTo(t)},determineVisibility:function(t){return!!s.getRunner(t.type)}},manageEmailAlerts:{order:600,text:"Manage Email Alerts",onClick:function(t){s.subscriptionWizard.launchWizard(t)},determineVisibility:function(t){return s.ownedByUser(t)}},edit:{order:700,text:"Edit",onClick:function(t){s.getEditor(t.type).call(null,t)},determineVisibility:function(t){return s.ownedByUser(t)&&s.getEditor(t.type)}},copy:{order:800,text:"Copy",onClick:function(t){var e=s.getEditor(t.type),n=s.savedQueryData.copyQuery(t);e.call(null,n)},determineVisibility:function(t){return!!s.getEditor(t.type)}},delete:{order:900,text:"Delete",onClick:function(t){s.$uibModal.open({size:"sm",template:u,controller:["$scope",function(e){e.title=t.title,e.delete=function(){s.savedQueryData.deleteOne(t)}}],backdrop:"static",backdropClass:"wizardMask"})},determineVisibility:function(t){return s.ownedByUser(t)}}},this.addMenuOption=this.overrideMenuOption,this.wktParser=new c.format.WKT,this.optionsForType={}}return t.prototype.getRunner=function(t){var e=this.savedQueryTypes.getTypeDef(t);if(e&&e.runner)return e.runner},t.prototype.getEditor=function(t){var e=this.savedQueryTypes.getTypeDef(t);if(e&&e.editor)return e.editor},t.prototype.addDefaultMenuOptions=function(t){var e=this;t in this.optionsForType||(this.optionsForType[t]={},r(this.defaultOptions,function(n,r){e.optionsForType[t][r]=i(n)}))},t.prototype.overrideMenuOption=function(t,e,n){if(t in this.optionsForType){var r=this.optionsForType[t];e in r?o(r[e],i(n)):r[e]=i(n)}},t.prototype.removeMenuOption=function(t,e){t in this.optionsForType&&delete this.optionsForType[t][e]},t.prototype.zoomTo=function(t){var e=this.wktParser.readGeometry(t.bounds);this.ol3Map.fit(this.closestZoom(e))},t.prototype.getForSavedQuery=function(t){var e=this.optionsForType[t.type];e||(e=this.defaultOptions);var n=a(e,function(e){return!e.determineVisibility||e.determineVisibility(t)});return s(l(n,"order"),function(e){return{name:e.text,onClick:e.onClick.bind(null,t)}})},t.prototype.ownedByUser=function(t){return t.userId===this.SQCONFIG.userDn},t}();e.MenuOptions=d},function(t,e){t.exports='<div class="delete-confirmation">\n    <div style="margin:10px;text-align:center;">Are you sure you want to delete "{{title | characters:40:true}}"?</div>\n    <div style="text-align:right;">\n        <span class="btn btn-xs hover-text" ng-click="$close()">\n            <i class="fa fa-close text-danger"></i>\n            <b>Cancel</b>\n        </span>\n        <span class="btn btn-xs hover-text" ng-click="$close(); delete()">\n            <b>Delete</b>\n            <i class="fa fa-check text-success"></i>\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6);n(367);var o=function(){return function(t,e,n,r,o,a){var s=this;this.timeout=200,this.trigger=function(t,e){if(void 0!==e){var n=e.getQuery().layerData.currentLayer.KeywordConfig;if(void 0!==n&&n.hover.timelapse.attribute){if(!n.hover.timelapse.attribute.geometryAttribute)return console.debug("Attribute rendering can't run. Please ensure you have added the following keywords:"),void console.debug("stealth.hover.timelapse.attribute.geometryAttribute={name of field you want drawn}\n                                 --- You currently have:",n);var r=n.hover.timelapse.attribute.shapeAttribute,o=(n.hover.timelapse.attribute.delay,t[""+r]);if(void 0!==o){var a=(new i.format.WKT).readFeature(o);s.geomSource.clear(),s.geomSource.addFeature(a),s.mousePosition.on("mousemove.throttled",s.undoAttributeAction)}}}},this.undoAttributeAction=function(){s.geomSource.clear(),s.mousePosition.off("mousemove.throttled",s.undoAttributeAction)},this.$rootScope=t,this.tcManager=e,this.mousePosition=n,this.ol3Map=r,this.toastr=o,this.tlLayerManager=a;var l=new i.style.Style({fill:new i.style.Fill({color:"#0000AA11"}),stroke:new i.style.Stroke({color:"green",width:2})});this.geomSource=new i.source.Vector({});var c=new i.layer.Vector({source:this.geomSource,style:l});this.ol3Map.addLayerOverlay(c)}}();e.AttributeAction=o,r.module("stealth.hover",["ccri.angular-utils"]).factory("stealth.hover.actions.Attribute",["$rootScope","ccri.time-controls.manager","mousePosition","ol3Map","toastr","tlLayerManager",function(t,e,n,r,i,a){return new o(t,e,n,r,i,a)}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(682),i=n(6),o=n(0),a=function(){return function(t,e,n,o){var a=this;this.timeout=100,this.isStoreDimmed=!1,this.highlightMatchingRecords=function(t,e,n){a.highlightSource.clear();var r=t.dataset(),o=1e3*a.tlLayerManager.pausedTimeWindow.start_s,s=1e3*a.tlLayerManager.pausedTimeWindow.end_s,l=arrow_geo.col(e).eq(arrow_geo.lit(n)),c=r.vectorNames[r.vectorNames.length-2],u=r.vectorNames[r.vectorNames.length-1],d=arrow_geo.col(c),f=arrow_geo.col(u);r.bind(d),r.bind(f),r.scan(Math.floor(o/1e3),Math.ceil(s/1e3)).filter(t.predicates(null,l)).evaluate(function(t,e){var n=e[f.colidx].getItem(t,0),r=e[f.colidx].getItem(t,1),o=1e3*e[d.colidx].get(t),s=new i.Feature({geometry:new i.geom.Point([r,n]),lat:n,lon:r,dtg:o});console.debug("Adding ",s," to the highlight layer"),a.highlightSource.addFeature(s)})},this.trigger=function(t,e){var n=t[0];if(n&&void 0!==e&&"arrow"===e.type){var r=e.getQuery().layerData.currentLayer.KeywordConfig;if(r.hover.timelapse.highlight&&r.hover.timelapse.highlight.trkIdField){var i=r.hover.timelapse.highlight.trkIdField,o=n[i],s=e.getOpacity();a.highlightMatchingRecords(e,i,o),a.isStoreDimmed||(e.setOpacity(.5*s),a.isStoreDimmed=!0,a.mousePosition.on("mousemove.throttled",function(){return a.undoHighlightAction(e)}))}else console.debug("Not properly configured for highlight:",r)}},this.undoHighlightAction=function(t){r.ctrlPressed||(t.setOpacity(100),a.isStoreDimmed=!1,a.highlightSource.clear(),a.mousePosition.off("mousemove.throttled",function(){return a.undoHighlightAction(t)}))},this.$rootScope=t,this.mousePosition=e,this.ol3Map=n,this.tlLayerManager=o,console.debug("Highlight entity hover action loaded");var s=new i.style.Style({image:new i.style.Circle({radius:3,fill:new i.style.Fill({color:"#42f4dfff"}),stroke:new i.style.Stroke({color:"#42f4dfff",width:1})})});this.highlightSource=new i.source.Vector({});var l=new i.layer.Vector({source:this.highlightSource,style:s});n.addLayerOverlay(l)}}();function s(t,e,n,r){return new a(t,e,n,r)}e.HighlightEntityAction=a,e.highlightEntity=s,o.module("stealth.hover",["ccri.angular-utils"]).factory("stealth.hover.actions.HighlightEntity",["$rootScope","mousePosition","ol3Map","tlLayerManager",s])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(682),i=n(0);n(367);var o=n(42),a=n(22),s=n(64),l=n(23),c=n(4),u=function(){return function(t,e,n,i,u,d){var f=this;return this._running=!1,this._minHoverDuration=100,this._actions=[],this._liveActions=[],this._nonCtrlActions=[],this.addAction=function(t){f._actions.push(t)},this.getActions=function(){return f._actions},this.addLiveAction=function(t){f._liveActions.push(t)},this.getLiveActions=function(){return f._liveActions},this.addNonCtrlAction=function(t){f._nonCtrlActions.push(t)},this.getNonCtrlActions=function(){return f._nonCtrlActions},this.fireLiveActions=function(t){if(void 0!==t){var e=l(c(t,function(t){return l(t,"widgetDef")}),"widgetDef")||l(t,"widgetDef");if(void 0===e)return;var n=e.widgetDef.scope.result?e.widgetDef.scope.result:e.widgetDef.scope.response,i=n.dataSource;i.KeywordConfig.hover&&i.KeywordConfig.hover.live&&a(f._liveActions,function(t){r.timeouts.push(setTimeout(function(){(new Date).getUTCMilliseconds()-f._hoverStart>=t.timeout&&t.trigger(n,i)},t.timeout))})}},this.fireActions=function(){var t=f.mousePosition.coordinates,e=f.ol3Map.getResolution();if(f._running){var n=f.tlLayerManager.getHistoricalLayer().getStores(),i=1e3*f.tlLayerManager.pausedTimeWindow.start_s,l=1e3*f.tlLayerManager.pausedTimeWindow.end_s,c=r.ctrlPressed?f._nonCtrlActions.concat(f._actions):f._nonCtrlActions.slice();o(n,function(n){if(n&&n.dataset&&n.dataset()){var o=n.getQuery().layerData.currentLayer.KeywordConfig;if(o.hover&&o.hover.timelapse){var u=n;n.searchPointAndTimeForRecords(t,e,i,l).then(function(t){t&&t.length>0&&a(c,function(e){var n=s(f._nonCtrlActions,e)?r.nonCtrlTimeouts:r.timeouts,i=s(f._nonCtrlActions,e)?f._nonCtrlHoverStart:f._hoverStart;n.push(setTimeout(function(){(new Date).getUTCMilliseconds()-i>=e.timeout&&e.trigger(t,u)},e.timeout))})},n)}}})}},this.start=function(){f._running=!0},this.stop=function(){f._running=!1},this.$rootScope=t,this.tcManager=e,this.mousePosition=n,this.ol3Map=i,this.tlLayerManager=u,this.searchManager=d,window.onmousemove=function(t){f._nonCtrlHoverStart=(new Date).getUTCMilliseconds(),t||(t=window.event),t.ctrlKey?(r.setCtrlPressedToTrue(),f._hoverStart=(new Date).getUTCMilliseconds()):r.clearAllTimeouts()},n.on("mousemove.throttled",function(){if(n.isOverMap){var e=n.coordinates,o=i.getResolution();void 0!==u.pausedTimeWindow&&f.fireActions(),r.ctrlPressed&&f._liveActions.length>0&&r.timeouts.push(setTimeout(function(){var i=(new Date).getUTCMilliseconds()-f._hoverStart;r.ctrlPressed&&n.isOverMap&&i>=f._minHoverDuration&&d.search(e,o,f.fireLiveActions,t,function(t){return"LiveLayer"===t.type})},f._minHoverDuration))}}),this}}();e.HoverActionsManager=u,i.module("stealth.hover",["ccri.angular-utils"]).factory("stealth.hover.actions.Manager",["$rootScope","ccri.time-controls.manager","mousePosition","ol3Map","tlLayerManager","stealth.core.interaction.mapclick.searchManager",u])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6);n(367);var o=function(){return function(t,e,n,o,a,s){var l=this;this.timeout=100,this.trigger=function(t,e){if(void 0!==e){var n=e.getQuery().layerData.currentLayer.KeywordConfig;if(void 0!==n&&n.hover.timelapse.popup){if(!n.hover.timelapse.popup.template)return console.debug("PopupAction can't run. Please ensure you have added the following keywords:"),void console.debug("stealth.hover.timelapse.popup.template='html defining content of popup use {} around field names'\n                                 --- You currently have:",n);var r=t[0];if(r){var o=n.hover.timelapse.popup.template;Object.keys(r).forEach(function(t){r[t]||(r[t]=""),r[t]&&void 0!==r[t].low&&(r[t]=function(t){return(t.high<<32)+t.low}(r[t])),o=o.replace("{"+t+"}",r[t])}),l.content.innerHTML=o,l.circleOverlay=new i.Overlay({element:l.circleElement,position:[r.lon,r.lat],stopEvent:!1}),l.ol3Map.addOverlay(l.circleOverlay),l.overlay.setPosition(l.mousePosition.coordinates),l.mousePosition.on("mousemove.throttled",l.undoPopupAction)}}}else console.debug("PopupAction:trigger => Store is undefined.",e)},this.undoPopupAction=function(){l.overlay.setPosition(void 0),l.mousePosition.off("mousemove.throttled",l.undoPopupAction),l.ol3Map.removeOverlay(l.circleOverlay)},this.$rootScope=t,this.tcManager=e,this.mousePosition=n,this.ol3Map=o,this.toastr=a,this.tlLayerManager=s,this.container=document.createElement("div"),this.circleElement=r.element('\n        <div\n            class="fa fa-fw fa-circle-o fa-lg"\n            style="color: white;position: absolute; top: -6px; right: -12px;text-shadow: rgba(0, 0, 0, 0.3) 0 2px 4px;">\n        </div>')[0],this.container.id="popup",this.container.style.cssText="\n            position: absolute;\n            background-color: rgba(40, 49, 52, 0.37);\n            color: rgba(246, 248, 248, 1);\n            -webkit-filter: drop-shadow(0 1px 4px rgba(0,0,0,0.2));\n            filter: drop-shadow(0 1px 4px rgba(0,0,0,0.2));\n            padding: 5px 10px;\n            border-radius: 10px;\n            white-space: nowrap;\n            box-shadow: rgba(0, 0, 0, 0.3) 0px 2px 4px;",this.content=document.createElement("div"),this.content.id="popup-content",this.content.style.cssText="color: rgba(246, 248, 248, 1);",this.container.appendChild(this.content),document.body.appendChild(this.container),this.overlay=new i.Overlay({element:this.container,offset:[2,2],stopEvent:!1}),this.ol3Map.getMap().addOverlay(this.overlay)}}();function a(t,e,n,r,i,a){return new o(t,e,n,r,i,a)}e.PopupAction=o,e.popup=a,r.module("stealth.hover",["ccri.angular-utils"]).factory("stealth.hover.actions.Popup",["$rootScope","ccri.time-controls.manager","mousePosition","ol3Map","toastr","tlLayerManager",a])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(21),o=n(6),a=n(550),s=n(3698),l=n(24);n(367);var c=n(2),u=n(42),d=n(29),f=function(){return function(t,e,n,f,p,h){var g=this;this.historyFillColor=o.color.asArray("#0000AA"),this.historyStrokeColor=o.color.asArray("#33ffff"),this.historyStrokeWidth=1,this.timeout=0,this.setToastrOptions=function(t){a.options.target=".primaryDisplay",a.options.closeButton=!0,a.options.timeOut=t,a.options.hideDuration=50,a.options.preventDuplicates=!0,a.options.positionClass="toast-bottom-right"},this.trigger=function(t,e){if(void 0!==e.KeywordConfig&&e.KeywordConfig.hover&&e.KeywordConfig.hover.live&&e.KeywordConfig.hover.live.quickhistory){if(!e.KeywordConfig.hover.live.quickhistory.historyLayer||!e.KeywordConfig.hover.live.quickhistory.trkIdField)return console.debug("QuickHistory can't run. Please ensure you have added the following keywords:"),void console.debug("stealth.hover.live.quickhistory\n                                *  .historyLayer (required)\n                                *  .trkIdField  (required)\n                                *  .geomField (optional: defaults to geom)\n                                *  .dtgField  (optional: defaults to dtg)\n                                *  .daysBack  (optional: defaults to 7)\n                                *  .maxSpeed (optional: defaults to 800 m/s)\n                                *  .cacheTimeoutMs     (optional: defaults to 60000 60)\n                                *  .strokeColor     (optional: defaults to #33ffff88)\n                                *  .strokeWidth     (optional: defaults to 1)\n                                *  .fillColor     (optional: defaults to #0000AA11)\n                                *  .maxFeatures     (optional: defaults to 10000)\n                                *  .outputFormat     (optional: defaults to 'application/json')\n                                * --- You currently have:",e.KeywordConfig);var n=e.KeywordConfig.hover.live.quickhistory,f=n.historyLayer,p=n.trkIdField,h=void 0!==n.dtgField?n.dtgField:"dtg",m=void 0!==n.geomField?n.geomField:"geom",v=void 0!==n.daysBack?n.daysBack:7,y=void 0!==n.maxSpeed?n.maxSpeed:800,b=void 0!==n.cacheTimeoutMs?n.cacheTimeoutMs:6e4,w=void 0!==n.strokeColor?o.color.asArray(n.strokeColor):g.historyStrokeColor,_=void 0!==n.strokeWidth?n.strokeWidth:g.historyStrokeWidth,x=void 0!==n.fillColor?o.color.asArray(n.fillColor):g.historyFillColor,S=void 0!==n.maxFeatures?n.maxFeatures:1e4,C=void 0!==n.outputFormat?n.outputFormat:"application/json",E=t.records[0][""+p],T=i(t.records[0][""+h]),M=T.clone().subtract(v,"days"),k=g.cqlHelper.buildDtgFilter(h,M,T,!0,null),A={cql_filter:p+"='"+E+"' AND "+k,sortBy:h+" D",propertyName:h+","+m,count:S,maxFeatures:S,outputFormat:C};if(!document.queryRunning&&document.currentLiveHoverId!==E){document.currentLiveHoverId=E,document.historySource=g.historySource,g.historySource.clear();var I=r.element('\n                <div style="position: relative;top: -18px;left: -17px;">\n                    <svg width="35px" height="35px" xmlns="http://www.w3.org/2000/svg"\n                    viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-eclipse" style="background: none;">\n                        <path stroke="none" d="M10 50A40 40 0 0 0 90 50A40 45 0 0 1 10 50" fill="#337ab7" transform="rotate(156 50 52.5)">\n                            <animateTransform attributeName="transform" type="rotate" calcMode="linear"\n                            values="0 50 52.5;360 50 52.5" keyTimes="0;1" dur="1s" begin="0s"\n                            repeatCount="indefinite">\n                            </animateTransform>\n                        </path>\n                    </svg>\n                </div>')[0],O=new o.Overlay({element:I,position:t.metadata[0].source.geometry.coordinates});if(g.ol3Map.addOverlay(O),document.lineCache[E])g.ol3Map.removeOverlay(O),g.historySource.addFeatures(document.lineCache[E]);else{document.queryRunning=!0;var P=setTimeout(function(){document.queryRunning=!1,g.setToastrOptions(1e3),a.warning("History query timed out but may still return"),g.ol3Map.removeOverlay(O)},1e4),L="application/json"===C?"text":"arraybuffer",D=l.DataSourceManager.getPrimaryOgcConfig();s.WfsManager.getFeature(D.url+c(D,"wfsEndpoint","/wfs"),f,A,L).then(function(t){var e={defaultDataProjection:o.proj.get("EPSG:4326"),featureProjection:o.proj.get("EPSG:4326"),geometryName:m},n="application/json"===C?new o.format.GeoJSON(e):new o.format.Arrow(e),r=t.data?n.readFeatures(t.data):n.readFeatures(t);if(!r)return g.setToastrOptions(1500),a.warning("There was an error loading history data"),void g.ol3Map.removeOverlay(O);clearTimeout(P),document.queryRunning=!1;var s=null,l=[];u(r,function(t,e,n){var r=t,o=0;null!=s&&(o=function(t,e){return g.ol3Geodetics.distanceVincenty([t.getGeometry().getCoordinates(),e.getGeometry().getCoordinates()])/i(e.get(""+h)).diff(t.get(""+h),"seconds",!1)}(s,r)),(null===s||o<y)&&(s=r,l.push(r.getGeometry().getCoordinates()))});var c=[];l.length>0?(c=g.makeMeridianSafeLine(l),g.setToastrOptions(-1),g.toast=a.info("Hit escape to clear overlays")):(g.setToastrOptions(1e3),a.warning("No history available"),g.ol3Map.removeOverlay(O)),document.lineCache[E]=d(c.map(function(t){if(t&&t.length){var e=new o.Feature({geometry:new o.geom.LineString(t)});return e.setStyle(new o.style.Style({stroke:new o.style.Stroke({color:w,width:_}),fill:new o.style.Fill({color:x})})),e}}),function(t){return void 0!==t}),setTimeout(function(){delete document.lineCache[E]},b),document.currentLiveHoverId===E&&(g.ol3Map.removeOverlay(O),g.historySource.addFeatures(document.lineCache[E]))})}}}else console.debug("Quickhistory: Keywords are no good.")},this.makeMeridianSafeLine=function(t){var e=[[]],n=0,r=t[0];return e[n].push(r),u(t,function(t){(r[0]>0&&t[0]<0||r[0]<0&&t[0]>0)&&(n+=1,e.push([])),e[n].push(t),r=t}),e};var m=this;this.$rootScope=t,this.mousePosition=e,this.ol3Map=n,this.ol3Geodetics=f,this.tlLayerManager=p,this.cqlHelper=h,this.historySource=new o.source.Vector({});var v=new o.layer.Vector({source:this.historySource});n.addLayerOverlay(v),document.queryRunning=!1,document.currentLiveHoverId="",document.lineCache={},console.debug("QuickHistory hover action loaded"),window.addEventListener("keydown",function(t){var e=!1;void 0!==t.key?"Escape"===t.key&&(m.historySource.clear(),a.clear(m.toast),e=!0):void 0!==t.keyIdentifier?"U+001B"===t.keyIdentifier&&(m.historySource.clear(),e=!0):void 0!==t.keyCode&&27===t.keyCode&&(m.historySource.clear(),e=!0),e&&t.preventDefault()})}}();e.QuickHistoryAction=f,r.module("stealth.hover",["ccri.angular-utils"]).factory("stealth.hover.actions.QuickHistory",["$rootScope","mousePosition","ol3Map","ol3Geodetics","tlLayerManager","cqlHelper",function(t,e,n,r,i,o){return new f(t,e,n,r,i,o)}])},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(550),a=function(){return function(t,e,n,r,a,s,l,c){var u=this;this.ellipseFillColor="#42f4df11",this.ellipseStrokeColor="#42f4dfff",this.ellipseStrokeWidth=1,this.timeout=0,this.rad2deg=180/Math.PI,this.deg2rad=Math.PI/180,this.getEllipse=function(t,e,n,r,o,a){for(var s=[],l=1;l<360;l+=360/a){var c=n*Math.cos(u.deg2rad*l),d=r*Math.sin(u.deg2rad*l),f=c*Math.cos(o)-d*Math.sin(o),p=c*Math.sin(o)+d*Math.cos(o),h=i.proj.transform([e,t],"EPSG:4326","EPSG:3857"),g=i.proj.transform([h[0]+p,h[1]+f],"EPSG:3857","EPSG:4326");s.push([g[0],g[1]])}return s.push(s[0]),s},this.generateEllipseForFeature=function(t,e,n,r,o,a,s,l){void 0===a&&(a="#42f4dfff"),void 0===s&&(s="#42f4df11"),void 0===l&&(l=1);var c=new i.geom.Polygon([u.getEllipse(t[1],t[0],e,n,r,64)]),d=new i.Feature({geometry:c,id:o});return d.setId(o),d.setStyle(new i.style.Style({stroke:new i.style.Stroke({color:a,width:l}),fill:new i.style.Fill({color:s})})),d},this.trigger=function(t,e){t=t.metadata?[t.metadata[0].source]:t;var n=e.KeywordConfig?e.KeywordConfig:e.getQuery().layerData.currentLayer.KeywordConfig;if(!(void 0!==n&&n.hover&&n.hover.timelapse&&n.hover.timelapse.ellipse||n.hover.timelapse.ellipse.minor&&n.hover.timelapse.ellipse.major&&n.hover.timelapse.ellipse.orientation))return console.debug("Ellipse Action can't run. Please ensure you have added the following required keywords:"),void console.debug("stealth.hover.timelapse.ellipse\n                                    *  .minor (required)\n                                    *  .major  (required)\n                                    *  .orientation (required)\n                                    *  .delay (optional)\n\t\t\t\t    *  .geomField (optional: defaults to 'geom')\n\t\t\t\t    *  .longitude (optional: defaults to 'lon')\n\t\t\t\t    *  .latitude  (optional: defaults to 'lat')\n                                    *  .dtgField (optional: defaults to 'dtg')\n                                    *  .strokeColor (optional)\n                                    *  .strokeWidth (optional)\n                                    *  .fillColor (optional)\n                                    *  .unitMultiplier (optional: defaults to 1 which assumes all units are meters)\n                                    * --- You currently have:",n);var r=t[0];if(r){var i=r[(n=n.hover.timelapse.ellipse).latitude?n.latitude:"lat"],a=r[n.longitude?n.longitude:"lon"],s=n.unitMultiplier?n.unitMultiplier:1,l=r.geometry?r.geometry.coordinates:[a,i];if(void 0===l[0]||void 0===l[1])return void console.debug("No suitable geometry found");var c=r.properties?r.properties:r,d=c[n.minor]*s,f=c[n.major]*s,p=c[n.orientation];if(d<=0||f<=0)return void console.debug("Bad Major or Minor");o.options.target=".primaryDisplay",o.options.closeButton=!0,o.options.timeOut=-1,o.options.hideDuration=50,o.options.preventDuplicates=!0,o.options.positionClass="toast-bottom-right",u.toast=o.info("Hit escape to clear overlays"),void 0!==n.geomField&&n.geomField;var h=void 0!==n.dtgField?n.dtgField:"dtg",g=void 0!==n.strokeColor?n.strokeColor:u.ellipseStrokeColor,m=void 0!==n.strokeWidth?n.strokeWidth:u.ellipseStrokeWidth,v=void 0!==n.fillColor?n.fillColor:u.ellipseFillColor,y=Number.parseInt(c[h].toString()+Math.floor(l[0]).toString()+Math.floor(l[1]).toString()),b=u.generateEllipseForFeature(l,f,d,u.deg2rad*p,y,g,v,m);u.ellipseSource.getFeatureById(y)||u.ellipseSource.addFeature(b)}};var d=this;this.$rootScope=t,this.mousePosition=e,this.ol3Map=n,this.ol3Geodetics=r,this.tlLayerManager=a,this.CONFIG=s,this.wfs=l,this.cqlHelper=c,this.ellipseSource=new i.source.Vector({}),this.ellipseStyle=new i.style.Style({stroke:new i.style.Stroke({color:this.ellipseStrokeColor,width:this.ellipseStrokeWidth}),fill:new i.style.Fill({color:this.ellipseFillColor})});var f=new i.layer.Vector({source:this.ellipseSource,style:this.ellipseStyle});n.addLayerOverlay(f),console.debug("Ellipse hover action loaded"),window.addEventListener("keydown",function(t){var e=!1;void 0!==t.key?"Escape"===t.key&&(d.ellipseSource.clear(),o.clear(d.toast),e=!0):void 0!==t.keyIdentifier?"U+001B"===t.keyIdentifier&&(d.ellipseSource.clear(),e=!0):void 0!==t.keyCode&&27===t.keyCode&&(d.ellipseSource.clear(),e=!0),e&&t.preventDefault()})}}();function s(t,e,n,r,i,o,s,l){return new a(t,e,n,r,i,o,s,l)}e.EllipseAction=a,e.ellipse=s,r.module("stealth.hover",["ccri.angular-utils"]).factory("stealth.hover.actions.Ellipse",["$rootScope","mousePosition","ol3Map","ol3Geodetics","tlLayerManager","CONFIG","wfs","cqlHelper",s])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(1219));var r=n(0),i=n(21),o=n(6),a=n(18),s=n(3741),l=n(225),c=n(17),u=n(14),d=n(122),f=n(29),p=n(23),h=n(322),g=n(22),m=n(90),v=n(558),y=n(852),b=n(457),w=n(3742),_=n(1219),x=n(3743),S=n(3747),C=n(3748),E=n(3749);r.module("stealth.route-search",[b.module.name,"stealth.timelapse.edit","stealth.timelapse.wizard","stealth.wizard"]).namespace(),r.module("stealth.route-search").service("RouteSearchWizard",w.RouteSearchWizard).service("TubeSelectCapability",_.TubeSelectCapability).service("RouteSearchHelper",x.RouteSearchHelper).directive("createRouteStep",[function(){return{restrict:"E",template:S,scope:!1,controller:["$scope","$rootScope",function(t,e){var n=t.$on("$destroy",function(){r(),i(),o(),n(),n=r=i=o=null});a(t.routes)&&(t.routes=[new v.Route]),t.routeStyleOps={nodeStrokeColor:"#FFF"};var r=e.$on("stealth.wizard.drawend",function(e,n){t.routes[0].updatePath(n.feature),y.labelFeaturePoints(n.feature,t.routes[0].getDirection(),t.routeStyleOps)}),i=e.$on("stealth.wizard.drawtools.eraseAll",function(){t.routes[0].updatePath([[0,0],[0,0]])}),o=e.$on("stealth.wizard.drawing.geometryChange",function(e,n){var r=n.geometry.getCoordinates(),i=r[r.length-1],o=r[r.length-2];i&&o&&i[0]===o[0]&&i[1]===o[1]&&n.drawing.getActive()&&(r=s(r)),l(t.routes[0].getCoordinatesList(),r)||d(function(){t.$apply(function(){t.routes[0].updatePath(r),a(n.feature)||y.labelFeaturePoints(n.feature,t.routes[0].getDirection(),t.routeStyleOps)})})})}]}}]).directive("adjustCoordinatesStep",[function(){return{restrict:"E",template:C,scope:!1,controller:["$scope","stealth.core.measureService",function(t,e){p(t.route);var n=t.query.params.startDtg,r=t.query.params.endDtg,s=n.clone(),l=r.clone(),d=s.subtract(s.local().utcOffset(),"m").toDate();function p(n){var r=n.getPoints(),o=e.getDistance(n.getCoordinatesList(),"kilometer"),a=function(t,e){if(t&&e)return i.duration(e.diff(t))}(r[0].getProperties().dtg,h(r).getProperties().dtg);o&&a&&(t.additionalInfo=null,t.additionalInfo={Distance:o.toFixed(2)+" km",Duration:a.asHours().toFixed(2)+" hrs","Avg. Speed":function(t,e){if(e)return(t/Math.abs(e.asHours())).toFixed(2)}(o,a)+" kph"})}t.datetimeOptions={minDate:d,maxDate:l.subtract(l.local().utcOffset(),"m").toDate(),defaultDate:d},t.datetimeLimitsMessage="Must be between "+n.toString()+" and "+r.toString(),t.datetimePlaceholder="YYYY-MM-DD HH:MM",t.getDirections=function(){return v.TraversalDirections},t.currentlyDrawing=function(){return t.drawingModel.drawingInteraction&&t.drawingModel.drawingInteraction.drawing.getActive()&&t.drawingModel.drawingInteraction.geoFeature},t.redraw=function(){var e=t.route.getCoordinatesList(!0);a(t.drawingModel.drawingInteraction.geoFeature)?(t.drawingModel.drawingInteraction.geoFeature=new o.Feature({geometry:new o.geom.MultiPoint(e)}),t.drawingModel.geoFeature=t.drawingModel.drawingInteraction.geoFeature,t.drawingModel.drawingInteraction.overlay.addFeature(t.drawingModel.drawingInteraction.geoFeature),t.drawingModel.drawingInteraction.setActive(!1)):t.drawingModel.drawingInteraction.geoFeature.getGeometry().setCoordinates(e),0===e.length?(t.drawingModel.drawingInteraction.erase(),t.drawingModel.drawingInteraction.init()):(y.labelFeaturePoints(t.drawingModel.drawingInteraction.geoFeature,t.route.getDirection(),t.routeStyleOps),t.drawingModel.drawingInteraction.redraw())},t.removePoint=function(e){t.route.removePoint(e,!0),t.redraw()},t.addPoint=function(){t.route.addPoint([0,0],!0),t.redraw()},t.updatePoint=function(e){t.drawingModel.drawingInteraction.drawing.getActive()&&(t.drawingModel.drawingInteraction.drawing.setActive(!1),a(t.drawingModel.drawingInteraction.geoFeature)||t.drawingModel.drawingInteraction.setActive(!1)),c(e.getCoordinates())&&!f(e.getCoordinates(),u).length&&(t.redraw(),t.calculateDetails(t.route))},t.setDirection=function(e){t.route.setDirection(e),y.labelFeaturePoints(t.drawingModel.drawingInteraction.geoFeature,t.route.getDirection(),t.routeStyleOps)},t.getPointLabel=function(e){return y.getPointLabelForIndex(e,t.route.getDirection(),t.route.getPoints().length)},t.calculateDetails=p}]}}]).directive("finalOptionsStep",[function(){return{restrict:"E",template:E,scope:"=",controller:["$scope","stealth.core.measureService",function(t,e){function n(e){return function(n){return t.query.params[e]=n,n}}t.bufferUnitList=e.getScaleLineUnitsList(),t.query.params.bufferSizeUnit?t.query.params.bufferSizeUnit=p(t.bufferUnitList,{id:t.query.params.bufferSizeUnit.id}):t.query.params.bufferSizeUnit=e.getCurrentScaleLineUnit(),t.speedUnitList=m.converter.getUnits("speed"),t.bufferSelectFn=n("bufferSizeUnit"),t.speedSelectFn=n("maxSpeedUnit"),g(t.routes,function(t){var e=[];g(t.coords,function(t){for(;t[0]<-180;)t[0]+=360;for(;t[0]>180;)t[0]-=360;e.push(t)}),t.updatePath(e)})}]}}]).run(["startMenuManager","coreCapabilitiesExtender","stealth.route-search.TubeSelectCapability","stealth.route-search.RouteSearchHelper","stealth.route-search.RouteSearchWizard","stealth.timelapse.edit.manager",function(t,e,n,r,i,o){t.addButton("Route Proximity Query","ccri-icon ccri-icon-route",function(){i.launch()},"timeenabled",150),e.addCapabilitiesExtender(n.addCapability),o.registerEditor({type:"Route:",additionalOverrides:function(t){return{isDetailedRouteSearch:t.params.isDetailedRouteSearch,routes:t.params.routes,bufferSize:t.params.bufferSize,bufferSizeUnit:t.params.bufferSizeUnit,headingThreshold:t.params.headingThreshold,heading:t.params.heading}},launchWizard:i.launch,launchQuery:r.launchRouteSearchQuery})}])},function(t,e,n){t.exports=n(3727)},function(t,e){t.exports=function(t){return t&&t.length?t[0]:void 0}},,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3738);e.TubeSelectRequestBuilder=r.TubeSelectRequestBuilder;var i=n(332);e.TUBE_SELECT_REQUEST_TYPE="WPSTubeSelect",i.RequestBuilderManager.registerBuilder(e.TUBE_SELECT_REQUEST_TYPE,r.TubeSelectRequestBuilder)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(285),i=n(54),o=n(57),a=n(323),s=n(24),l=n(135),c=n(303),u=n(47),d=function(){function t(){}return t.build=function(t){var e=l.StoreConfigs[t.store.type],n=s.DataSourceManager.getDataSourcesById(t.source.id).first();if(n){var r,i=t.dataFilter.pool;if(t.dataFilter.route instanceof c.QueryFeaturesDataFilterRecord){var u=t.dataFilter.route;r=a.XmlBuilder.reference(a.QueryFeatures.compile({dataLayer:u.dataLayer,dataLayerFilter:u.additionalCql.buildCql(),properties:u.properties,workspace:u.workspace,namespace:u.namespace}))}else r=a.XmlBuilder.complexData(t.dataFilter.route);var d={routesXml:r,featuresXml:a.XmlBuilder.reference(a.QueryFeatures.compile({dataLayer:i.dataLayer,dataLayerFilter:i.additionalCql.buildCql(),properties:i.properties,workspace:i.workspace,namespace:i.namespace})),bufferSize:t.dataFilter.bufferSize,maxSpeed:t.dataFilter.maxSpeed,maxTime:t.dataFilter.maxTime,maxBins:t.dataFilter.maxBins,gapFill:t.dataFilter.gapFill,mimeType:e.outputFormat},f=e.getWpsXml(t.store,a.TubeSelect.compile(d));return a.WpsManager.buildRequest(n.wpsUrl,f,{responseType:e.responseType})}o.log.error("Unable to build request. Failed to find data source: "+t.source.id)},t.submit=function(t){return i.http.request(t).then(a.WpsManager.validateResponse)},t.buildAndSubmit=function(e){return t.submit(t.build(e))},t.getExportFormats=function(){return r(l.StoreConfigs,[u.StoreTypes.Binary,u.StoreTypes.Arrow,u.StoreTypes.JSON])},t}();e.TubeSelectRequestBuilder=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3740);e.QueryFeaturesRequestBuilder=r.QueryFeaturesRequestBuilder;var i=n(332);e.QUERY_FEATURES_REQUEST_TYPE="WPSQueryFeatures",i.RequestBuilderManager.registerBuilder(e.QUERY_FEATURES_REQUEST_TYPE,r.QueryFeaturesRequestBuilder)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(285),i=n(54),o=n(57),a=n(323),s=n(24),l=n(135),c=function(){function t(){}return t.build=function(t){var e=s.DataSourceManager.getDataSourcesById(t.source.id).first();if(e){var n={dataLayer:t.dataFilter.dataLayer,dataLayerFilter:t.dataFilter.additionalCql.buildCql(),properties:t.dataFilter.properties,workspace:t.dataFilter.workspace,namespace:t.dataFilter.namespace},r=l.StoreConfigs[t.store.type],i=r.getWpsXml(t.store,a.QueryFeatures.compile(n));return a.WpsManager.buildRequest(e.wpsUrl,i,{responseType:r.responseType})}o.log.error("Unable to build request. Failed to find data source: "+t.source.id)},t.submit=function(t){return i.http.request(t).then(a.WpsManager.validateResponse)},t.buildAndSubmit=function(e){return t.submit(t.build(e))},t.getExportFormats=function(){return r(l.StoreConfigs,[l.StoreTypes.Binary,l.StoreTypes.Arrow,l.StoreTypes.JSON])},t}();e.QueryFeaturesRequestBuilder=c},function(t,e,n){var r=n(211),i=n(60);t.exports=function(t,e,n){var o=null==t?0:t.length;return o?(e=n||void 0===e?1:i(e),r(t,0,(e=o-e)<0?0:e)):[]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(683),o=n(22),a=n(34),s=n(50),l=n(18),c=n(14),u=n(2),d=n(53),f=n(30),p=n(29),h=function(){function t(t,e,n,h){var g=this;this.RouteSearchHelper=t,this.queryService=e,this.commonWizardSteps=n,this.wizardHelper=h,this.onSetOptionsNext=function(t){var e=t.query,n=g.RouteSearchHelper.convertRoutesToFeatures(t.routes,u(e,"geom.name",""),e.params.isDetailedRouteSearch);return e.params.generatedFeatures=n,e.params.routes=t.routes,g.RouteSearchHelper.launchRouteSearchQuery(e)},this.getCreateRouteStep=function(t,e,n){return g.wizardHelper.createStep(t,{tag:"stealth-route-search-create-route-step",scope:e,attrs:'routes="routes"'},null,!1,null,n)},this.getFinalOptionsStep=function(t,e,n){return g.wizardHelper.createStep(t,{tag:"stealth-route-search-final-options-step",scope:e},null,!0,null,n)},this.createTeardownObject=function(t,e,n){return{onNext:function(){a(t)&&t(e),l(n)||g.commonWizardSteps.teardownPreviousSteps(n)},onClose:function(){l(n)||g.commonWizardSteps.teardownPreviousSteps(n)}}},this.launch=function(t){t=f({queryType:"Route:"},t);var e=g.wizardHelper.getNewScope();e.query=g.queryService.createTimelapseQuery(t),e.query.isSaveable=!1,e.query.shouldBeSaved=!1,e.selectLayerStepProps=f({heading:{label:"Heading",labelFn:i.strategies.propertyAccessor(),filterFn:i.strategies.featurePropertiesFilter(["int","number"])}},g.wizardHelper.getDefaultLayerStepProps());var n=g.wizardHelper.lineQueryLayerFilter(!1);e.query.layerData.filterFn=n,e.dataSourceFilterFn=n;var a=g.commonWizardSteps.getSelectLayerStep("Select Data Source and Time Range",e,g.createTeardownObject());e.query.params.isDetailedRouteSearch=!!t.isDetailedRouteSearch,e.drawingModel={drawingInteraction:null,geoFeature:null},d(e.query.params,"routes")&&(e.routes=u(e.query.params,"routes"),e.drawingModel.exsistingFeature=new r.Feature(new r.geom.MultiPoint(e.routes[0].getCoordinatesList())));var l=g.getCreateRouteStep("Select Route",e,g.createTeardownObject(g.onCreateRouteNext,e));l.setCssClass("wizardSide"),l.setCustomValidationFn(function(){var t=0;return o(e.routes,function(n){(n.isValid()||t++,e.query.params.isDetailedRouteSearch)&&(p(n.getPoints(),function(t){return c(t.getProperties().dtg)}).length&&t++)}),0===t});var h=[a,l],m=g.createTeardownObject(g.onSetOptionsNext,e,h),v=g.getFinalOptionsStep("Set Options",e,m);v.setCustomValidationFn(function(){return s(e.query.params.bufferSize)&&(e.query.params.isDetailedRouteSearch||s(e.query.params.headingThreshold))}),h.push(v);var y=g.wizardHelper.createWizard("Route Proximity Query","ccri-icon ccri-icon-route","fa-check text-success",h,e,"wizard-dark");g.wizardHelper.launchWizard(y)}}return t.prototype.onCreateRouteNext=function(t){o(t.routes,function(t){t.recalculateLineFromPoints()})},t.$inject=["stealth.route-search.RouteSearchHelper","stealth.timelapse.wizard.queryService","stealth.wizard.commonWizardSteps","stealth.wizard.wizardHelper"],t}();e.RouteSearchWizard=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(683),i=n(55),o=n(57),a=n(90),s=n(6),l=n(22),c=n(29),u=n(2),d=n(30),f=n(558),p=n(24),h=n(929),g=n(577),m=n(930),v=n(333),y=n(928),b=n(303),w=n(3744),_=n(1222),x=n(169),S=n(74),C=n(1223),E=n(16),T=n(169),M=n(430),k=function(){function t(e,n,i){var o=this;this.queryService=e,this.TLWizardEvents=n,this.TLManager=i,this.convertRoutesToFeatures=function(t,e,n){var r=[];return l(t,function(t){t.getDirection()===f.TraversalDirections.REVERSE&&t.reverse(),n?l(t.getPoints(),function(t){var n=new s.geom.Point(t.getCoordinates());r.push(new s.Feature({geometry:n,geometry_name:e,dtg:t.getProperties().dtg.toISOString()}))}):r.push(new s.Feature({geometry:t.getLine(),geometry_name:e}))}),r},this.launchRouteSearchQuery=function(e){var n=t.convertOldQueryObjToDVR(e);o.TLWizardEvents.emit("complete",n);var i=E.StateManager.getInstance(),a=r.uuid.generate(),s=new T.CanvasLayerRecord({id:a,name:e.params.storeName,dataView:n,defaultClickInteractionType:C.ROUTE_SEARCH_TL_INTERACTION,editable:!1,displayStatus:new x.DisplayStatusRecord({isLoading:!0,colorByField:n.store.idField})});return i.dispatch({type:M.TypeKeys.ADD_CANVAS_LAYER_STATE,canvasLayerState:s}),a}}return t.convertOldQueryObjToDVR=function(e){var n=v.StoreTypes.Binary,a=new y.GeomesaBinaryFormatOptionsRecord({dtg:e.params.dtgField.name,geom:e.params.geomField.name,trackId:e.params.idField.name}),s=new m.StoreRecord({type:n,id:r.uuid.generate(),geomField:e.params.geomField.name,dtgField:e.params.dtgField.name,idField:e.params.idField.name,formatOptions:a}),l=e.layerData.currentLayer.Name,c=p.DataSourceManager.getDataSourceByLayerName(l);if(!c)return i.alerter.errorMsg("Error building query. Failed to find datasource: "+l),void o.log.error("Failed to find source with name "+l);var u,f=new g.SourceRecord({id:c.id,type:g.SourceType.SERVER});return u=e.params.isDetailedRouteSearch?new _.TubeSelectDataFilterRecord(d(t.getCommonDataFilterPartial(e),t.getTubeSelectDataFilterPartial(e))):new w.RouteSearchDataFilterRecord(d(t.getCommonDataFilterPartial(e),t.getRouteSearchDataFilterPartial(e))),new h.DataViewRecord({source:f,store:s,dataFilter:u})},t.getCommonDataFilterPartial=function(t){var e=t.params.bufferSize;return"meter"!==t.params.bufferSizeUnit.id&&(e=a.converter.convert(e,t.params.bufferSizeUnit,"meter")),{route:new s.format.GeoJSON({}).writeFeatures(t.params.generatedFeatures),pool:new b.QueryFeaturesDataFilterRecord({dataLayer:t.layerData.currentLayer.Name,properties:{},workspace:t.featureTypeData.targetPrefix,namespace:t.featureTypeData.targetNamespace,additionalCql:new S.RawClauseRecord({cql:t.params.layerCql||t.buildCql()})}),bufferSize:e,routeGeomField:u(t.params,"routeGeomField.name",null),poolGeomField:u(t.params,"geomField.name",null)}},t.getTubeSelectDataFilterPartial=function(t){return{maxSpeed:t.params.maxSpeed,maxTime:t.params.maxTime,maxBins:t.params.maxBins||1e3,gapFill:t.params.gapFill||"line"}},t.getRouteSearchDataFilterPartial=function(t){return{headingThreshold:t.params.headingThreshold,headingField:u(t.params,"heading.name"),bidirectional:c(t.params.routes,function(t){return t.getDirection()===f.TraversalDirections.BIDIRECTIONAL}).length>0}},t.$inject=["stealth.timelapse.wizard.queryService","stealth.geo.timelapse.wizard.events","stealth.geo.timelapse.manager.Manager"],t}();e.RouteSearchHelper=k},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(16),a=n(3745),s=n(303),l=function(t){function e(e){return e?t.call(this,e)||this:t.call(this)||this}return r(e,t),e.prototype.with=function(t){return this.merge(t)},e}(i.Record({route:void 0,pool:new s.QueryFeaturesDataFilterRecord({}),bufferSize:void 0,headingThreshold:void 0,headingField:void 0,routeGeomField:void 0,poolGeomField:void 0,bidirectional:!1,additionalCql:void 0,requestType:a.ROUTE_SEARCH_REQUEST_TYPE},"RouteSearchDataFilterRecord"));e.RouteSearchDataFilterRecord=l,o.StateManager.getInstance().addRecord(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3746);e.RouteSearchRequestBuilder=r.RouteSearchRequestBuilder;var i=n(332);e.ROUTE_SEARCH_REQUEST_TYPE="WPSRouteSearch",i.RequestBuilderManager.registerBuilder(e.ROUTE_SEARCH_REQUEST_TYPE,r.RouteSearchRequestBuilder)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(285),i=n(54),o=n(57),a=n(323),s=n(24),l=n(135),c=n(303),u=n(47),d=function(){function t(){}return t.build=function(t){var e=s.DataSourceManager.getDataSourcesById(t.source.id).first();if(e){var n;if(t.dataFilter.route instanceof c.QueryFeaturesDataFilterRecord){var r=t.dataFilter.route;n=a.XmlBuilder.reference(a.QueryFeatures.compile({dataLayer:r.dataLayer,dataLayerFilter:r.additionalCql.buildCql(),properties:r.properties,workspace:r.workspace,namespace:r.namespace}))}else n=a.XmlBuilder.complexData(t.dataFilter.route);var i=t.dataFilter.pool,u=l.StoreConfigs[t.store.type],d={routesXml:n,featuresXml:a.XmlBuilder.reference(a.QueryFeatures.compile({dataLayer:i.dataLayer,dataLayerFilter:i.additionalCql.buildCql(),properties:i.properties,workspace:i.workspace,namespace:i.namespace})),bufferSize:t.dataFilter.bufferSize,headingField:t.dataFilter.headingField,headingThreshold:t.dataFilter.headingThreshold,routeGeomField:t.dataFilter.routeGeomField,poolGeomField:t.dataFilter.poolGeomField,bidirectional:t.dataFilter.bidirectional,mimeType:u.outputFormat},f=u.getWpsXml(t.store,a.RouteSearch.compile(d));return a.WpsManager.buildRequest(e.wpsUrl,f,{responseType:u.responseType})}o.log.error("Unable to build request. Failed to find data source: "+t.source.id)},t.submit=function(t){return i.http.request(t).then(a.WpsManager.validateResponse)},t.buildAndSubmit=function(e){return t.submit(t.build(e))},t.getExportFormats=function(){return r(l.StoreConfigs,[u.StoreTypes.Binary,u.StoreTypes.Arrow,u.StoreTypes.JSON])},t}();e.RouteSearchRequestBuilder=d},function(t,e){t.exports='<stealth-wizard-draw-line-step></stealth-wizard-draw-line-step>\n<div ng-repeat="route in routes" style="margin-top:7px">\n    <stealth-route-search-adjust-coordinates-step></stealth-route-search-adjust-coordinates-step>\n</div>\n'},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="horizontally-buffered edit-form-container">\n        <div class="AdjustCoordinates">\n            <stealth-wizard-direction-select label="Route Coordinates" ng-show="!query.params.isDetailedRouteSearch" class="pull-left" get-directions="getDirections" current-direction="route.direction" set-direction="setDirection"></stealth-wizard-direction-select>\n            <label class="pull-left" ng-show="query.params.isDetailedRouteSearch">Route Coordinates</label>\n            <span class="pull-right"\n                  uib-tooltip="Add Coordinate" tooltip-class="nowrap"\n                  tooltip-placement="bottom-right" tooltip-animation="true" tooltip-popup-delay="600"\n                  tooltip-trigger="mouseenter" tooltip-enable="!currentlyDrawing()">\n                <i class="fa fa-plus-circle" style="font-size: 16px; line-height: 20px;" ng-class="{\'callToAction clickable\': !currentlyDrawing()}" ng-click="currentlyDrawing() || addPoint()"></i>\n            </span>\n            <span class="clickable pull-right" style="margin: 0px 20px 0px -7px;"\n                  uib-tooltip="Toggle Detailed Search" tooltip-class="nowrap" tooltip-trigger="mouseenter"\n                  tooltip-placement="bottom-right" tooltip-animation="true" tooltip-popup-delay="600"> \n                  <i class="fa fa-clock-o detailed-search-clock" ng-class="{\'toggle-on\': query.params.isDetailedRouteSearch}" ng-click="query.params.isDetailedRouteSearch = !query.params.isDetailedRouteSearch"></i>\n            </span>\n            <div class="clearfix"></div>\n            <div class="PointInfo" ng-repeat="(index, point) in route.getPoints()">\n                 <div class="full-width">\n                     <span class="pull-left PointIndex"\n                           ng-class="{\'Start\': index === route.getDirection().getStartIndex(route.getPoints().length)}">{{getPointLabel(index)}}</span>\n                     <span class="PointForm">\n                         <input ccri-geocoder-coordinate-input ng-model="point.coordinates"\n                                required="true"\n                                ng-change="updatePoint(point)"\n                                ng-readonly="currentlyDrawing()"/>\n                         <input ccri-angular-utils-datetimepicker\n                                ccri-angular-utils-datetimepicker-options="datetimeOptions"\n                                ccri-angular-utils-utc-moment-format="YYYY-MM-DD HH:mm"\n                                placeholder="{{datetimePlaceholder}}"\n                                required="query.params.isDetailedRouteSearch"\n                                ng-show="query.params.isDetailedRouteSearch"\n                                ng-model="point.properties.dtg"\n                                ng-change="calculateDetails(route)"\n                                uib-tooltip="{{datetimeLimitsMessage}}"\n                                tooltip-class="get-in-front-of-calendar"\n                                tooltip-append-to-body="true"\n                                tooltip-placement="right"/>\n                     </span>\n                     <i class="fa fa-close text-muted pull-right" \n                        ng-class="{\'clickable hover-red\': !currentlyDrawing()}" \n                        ng-click="currentlyDrawing() || removePoint(index)"\n                        style="margin-right:2px;">\n                    </i>\n                </div>\n            </div>\n        </div>\n    </div>\n</ng-form>\n<div class="clearfix"></div>\n<div ng-show="query.params.isDetailedRouteSearch && route.isValid()" class="vertically-buffered">\n    <st-simple-table object="additionalInfo"></st-simple-table>\n</div>\n'},function(t,e){t.exports='<stealth-wizard-query-options-step query="query" dot="dot" label-position="left">\n    \x3c!--Common route search params --\x3e\n    <ccri-angular-utils-formfield-with-units label="Buffer Size"\n                                             type="number"\n                                             additional-attrs="[[\'min\', \'1\'],[\'step\',\'any\']]"\n                                             input-value="query.params.bufferSize"\n                                             required-condition="true"\n                                             unit-list="bufferUnitList"\n                                             unit-value="query.params.bufferSizeUnit"\n                                             label-position="left"></ccri-angular-utils-formfield-with-units>\n    \x3c!--Basic route search params --\x3e\n    <ccri-angular-utils-formfield ng-if="!query.params.isDetailedRouteSearch"\n                                  label="Heading Threshold"\n                                  value="query.params.headingThreshold"\n                                  name="headingThreshold"\n                                  type="number"\n                                  additional-attrs="[[\'min\', \'1\'],[\'step\',\'any\']]"\n                                  required-condition="true"\n                                  label-position="left"></ccri-angular-utils-formfield>\n</stealth-wizard-query-options-step>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3751),i=n(0),o=n(3752),a=n(3753),s=n(2),l=n(4),c=n(29),u=n(24),d=n(47),f=n(23),p=n(64),h=n(42);e.default=i.module("stealth.live",["stealth.wizard","stealth.geo.wizard"]).directive("stLiveWizSourceAndRadiusStep",["stealth.core.measureService","$filter",function(t,e){return{restrict:"E",template:a,link:function(n){n.unitsOpts=t.getScaleLineUnitsList(),n.radius={unit:t.getCurrentScaleLineUnit().id},n.labelUnit=function(t){return t.display},n.selectUnit=function(t){return t.id},n.isComplete=function(){return n.radius.length&&n.radius.unit&&!!n.query.layerData.currentLayer},n.options={},n.attributeLabel=e("attributeLabel"),n.showGeomSelector=function(){return!!n.featureTypePropertyNames&&n.featureTypePropertyNames.filter(n.propGeomFilter).length>1},n.getDataSources=function(){var t=u.DataSourceManager.getDataSourcesByKeyword(["timelapse","live"]).toArray(),e=[],r=[];return h(t,function(t){r.push(function(t){return d.KeywordHelper.getFeatureProperties(t).then(function(t){var e=c(t,n.geomFilter);return e})}(t).then(function(n){n.length>0&&e.push(t)}))}),Promise.all(r).then(function(){return e})},n.geomFilter=function(t){return"Point"===t.localType},n.propGeomFilter=function(t){return"Point"===s(f(n.featureTypeProperties,{name:t}),"localType")},n.onSourceChange=function(t,e){n.$applyAsync(function(){n.selectedSource=t,n.query.layerData.currentLayer=u.DataSourceManager.buildLegacyLayer(t),n.dataSourceDescription=e,n.updateSourceProps()})},n.labelFn=function(t){return n.attributeLabel(t)},n.updateSourceProps=function(){n.featureTypeProperties=n.dataSourceDescription.properties,n.featureTypePropertyNames=l(n.featureTypeProperties,"name"),n.fieldSelections={},n.fieldSelections.geomField=p(n.featureTypePropertyNames,n.dataSourceDescription.defaultFieldNames.geomField)?n.dataSourceDescription.defaultFieldNames.geomField:c(n.featureTypePropertyNames,n.propGeomFilter)[0],n.initialized=!0}}}}]).service("stealth.live.moving-AOI.wizard",o.MovingAOIWizard).service("stealth.live.CapaButtonAOI",r.CapaButtonAOI).run(["coreCapabilitiesExtender","stealth.live.CapaButtonAOI",function(t,e){t.addCapabilitiesExtender(e.addCapability)}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(320),i=function(){function t(t){var e=this;this.movingAOIWizard=t,this.generateOnClick=function(t,n){return function(t,r,i,o){var a=o.dataSource;e.movingAOIWizard.launchWizard(r,a,n)}},this.addCapability=function(t){var n=new r.Capability("movingAOI",["geomField"],"Create AOI Alerts","ccri-icon ccri-icon-moving-AOI",null);return r.CapabilitiesHelper.addCapability(t,n,e.generateOnClick)}}return t.$inject=["stealth.live.moving-AOI.wizard"],t}();e.CapaButtonAOI=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(4),o=n(16),a=n(55),s=n(15),l=n(57),c=n(74),u=n(192),d=n(90),f=n(72),p=n(24),h=n(47),g=n(339),m=function(){function t(t,e,n,r,i){this.liveLayerManager=t,this.wizardHelper=e,this.$rootScope=n,this.Wizard=r,this.Query=i,this.layerManager=u.LayerManager.getInstance(),this.stateManager=o.StateManager.getInstance()}return t.prototype.launchWizard=function(t,e,n){var i,o=this,a=this.$rootScope.$new(),l=new this.Query;l.isSaveable=!1,a.query=l,a.originalDataSource=e,a.dot={finalCql:null,cqlMaxlength:r(s.config,"geoserver.cqlMaxLength",1/0)};var c=[this.wizardHelper.createStep("Select data and radius",{tag:"st-live-wiz-source-and-radius-step",scope:a},null,!1,function(){var t=r(a,"query.layerData.currentLayer",null);i=a.$watch("query.layerData.currentLayer",function(e){e&&e!==t&&(t=e,l.getFeatureTypeDescription())})},function(t){i(),i=null},!1),this.wizardHelper.createStep("Set Options",{tag:"st-tl-wiz-options",scope:a},null,!0,null,null,!1)],u=new this.Wizard("Moving AOI Query","ccri-icon ccri-icon-moving-AOI","fa-check text-success",c,a,"wizard-dark",function(e){e&&o.finishWizard(a,t,n)});this.wizardHelper.launchWizard(u)},t.prototype.finishWizard=function(t,e,n){var r=this;e.id||(l.log.error("Feature id not found"),a.alerter.errorMsg("Error building moving AOI query"));var i=t.query,o=p.DataSourceManager.getDataSourcesById(t.originalDataSource.id).first();this.buildCql(i.params,t.radius,e.id,n.geomField,o,t.fieldSelections.geomField).then(function(e){if(i.runOnCompletion){var n=i.params.storeName,o=t.selectedSource.keywordConfig.getIn(["timelapse","live"]).keySeq().first(),a=r.liveLayerManager.buildView(o,f.uuid.generate(),t.selectedSource,n,{cql:{value:e}});r.liveLayerManager.updateViewDisplayStatus(o,a.id,{isExpanded:!0}),r.liveLayerManager.toggleView(o,a.id);var s=r.liveLayerManager.getView(o,a.id);r.showHalos(s.mapLayerId)}i.shouldBeSaved&&i.isSaveable}).catch(function(t){l.log.error("Error building moving AOI query:",t),a.alerter.errorMsg("Error building moving AOI query")})},t.prototype.buildCql=function(t,e,n,r,o,a){var s="DWITHIN("+a+", querySingle('"+o.name+"','"+r+"', 'IN (''"+n+"'')'), "+d.converter.convert(e.length,e.unit,"meter")+", meters)";return t.cql&&(s=c.CqlBuilder.combine(c.CqlOperator.AND,s,t.cql)),h.KeywordHelper.getFeatureProperties(o).then(function(e){if(t.cqlParams){var n=g.CqlParamsHelper.convertCqlParamsToClauses(t.cqlParams,e),r=i(n,function(t){return t.buildCql()});s=c.CqlBuilder.combine.apply(c.CqlBuilder,[c.CqlOperator.AND,s].concat(r))}return s})},t.prototype.showHalos=function(t){var e=this.layerManager.getLayer(t);this.stateManager.dispatch({type:u.MapLayerActions.TypeKeys.SET_STYLE,id:t,style:e.styleMap.set("showHalo",!0)})},t.$inject=["stealth.live.manager.Manager","stealth.wizard.wizardHelper","$rootScope","stealth.core.wizard.Wizard","stealth.timelapse.wizard.live.Query"],t}();e.MovingAOIWizard=m},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="AreaDefinitionWizard">\n        <st-wiz-section>\n            <div class="buf-lg-pt">\n                <div class="buf-lg-pb">\n                    <st-geo-data-source-selector\n                        get-data-sources="getDataSources"\n                        on-change="onSourceChange">\n                    </st-geo-data-source-selector>\n                    <div>\n                        <div class="flex-row flex-align-items-center buf-xs-mt data-props-geometry-field"\n                            ng-if="showGeomSelector()">\n                            <span class="field-descriptor text-right buf-lg-mr">Geometry:</span>\n                            <span class="field-input">\n                                <ccri-angular-utils-select\n                                    ng-model="fieldSelections.geomField"\n                                    ng-change="updateSelections(fieldSelections)"\n                                    from-list="featureTypePropertyNames"\n                                    label-fn="labelFn"\n                                    filter-fn="propGeomFilter"\n                                    placeholder="Select geom field"\n                                    empty-message="None available"\n                                ></ccri-angular-utils-select>\n                            </span>\n                            <span class="field-unit">&nbsp;</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </st-wiz-section>\n        <st-wiz-section>\n            <div class="flex-row flex-align-items-center buf-md-pt">\n                <span class="field-descriptor text-right buf-lg-mr">Radius:</span>\n                <input ccri-angular-utils-number="{commas: true,\n                                    decimalPlaces: 4,\n                                    upDown: true,\n                                    upDownMin: 0}"\n                       name="radius" type="number" ng-change="updateRadius(radius.length)" class="flex-1 buf-xs-mr"\n                       ng-model="radius.length" required>\n                <div style="width:100px">\n                    <ccri-angular-utils-select ng-model="radius.unit"\n                                            from-list="unitsOpts"\n                                            label-fn="labelUnit"\n                                            select-fn="selectUnit"\n                                            placeholder="Select units"\n                                            empty-message="None available"\n                                            hide-tooltip="true"\n                    ></ccri-angular-utils-select>\n                </div>\n            </div>\n        </st-wiz-section>\n    </div>\n\n    \x3c!-- hidden input to disable the Next button if radius hasn\'t been input --\x3e\n    <input type="hidden" name="isComplete" ng-model="isComplete" ng-model-options="{getterSetter:true}" required>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3755),i=n(0);e.default=i.module("stealth.live").service("stealth.live.capabilities.showLiveService",r.ShowLiveCapability).run(["coreCapabilitiesExtender","stealth.live.capabilities.showLiveService",function(t,e){t.addCapabilitiesExtender(e.addCapability)}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(349),i=n(2),o=n(18),a=n(55),s=n(57),l=n(72),c=n(320),u=n(24),d=function(){function t(t,e){var n=this;this.$interpolate=t,this.liveLayerManager=e,this.generateOnClick=function(t,e){return function(t,c,d,f){u.DataSourceManager.loadDataSources().then(function(){var t=u.DataSourceManager.getDataSourceByLayerName(e.layerName);if(!t)return a.alerter.errorMsg("Error building query."),void s.log.error("Please check capability.live configuration. Failed to find datasource with name "+e.layerName);var d=o(e.cqlTemplate)?e.trkIdField+"='"+c[e.trkIdField]+"'":n.$interpolate(e.cqlTemplate)(r({__featureId:i(f,["source","id"])},c)),p=t.keywordConfig.getIn(["timelapse","live"],[]).keySeq().toArray()[0];if(p){var h=e.labelField||"label",g=t.title;o(c[h])||(g+=" ("+c[h]+")");var m=n.liveLayerManager.buildView(p,l.uuid.generate(),t,g,{cql:{value:d}});n.liveLayerManager.updateViewDisplayStatus(p,m.id,{isExpanded:!0}),n.liveLayerManager.toggleView(p,m.id)}else a.alerter.errorMsg("No workspace configured",e.layerName),s.log.error("No workspace configured for "+e.layerName+". Make sure a timelapse.live keyword is set.")})}},this.addCapability=function(t){var e=new c.Capability("live",["layerName"],"Show Live","fa-bolt",null,["cqlTemplate","trkIdField"]);return c.CapabilitiesHelper.addCapability(t,e,n.generateOnClick)}}return t.$inject=["$interpolate","stealth.live.manager.Manager"],t}();e.ShowLiveCapability=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3757);e.default=r.module("stealth.geo.timelapse").service("stealth.geo.timelapse.capabilities.showTimelapseService",i.ShowTimelapseCapability).run(["coreCapabilitiesExtender","stealth.geo.timelapse.capabilities.showTimelapseService",function(t,e){t.addCapabilitiesExtender(e.addCapability)}]).name},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(349),i=n(2),o=n(18),a=n(55),s=n(57),l=n(72),c=n(320),u=n(331),d=n(24),f=n(575),p=n(270),h=n(194),g=n(135),m=n(410),v=n(47),y=function(){function t(t,e){var n=this;this.$interpolate=t,this.TLManager=e,this.addCapability=function(t){var e=new c.Capability("timelapse",["layerName"],"Show Time-lapse","fa-history",null,["cqlTemplate","trkIdField"]);return c.CapabilitiesHelper.addCapability(t,e,n.generateOnClick)},this.generateOnClick=function(t,e){return function(t,l,c,u){var f=d.DataSourceManager.getDataSourceByLayerName(e.layerName);if(!f)return a.alerter.errorMsg("Error building query. Please check capability.timelapse configuration."),void s.log.error("Please check capability.timelapse configuration. Failed to find datasource with name "+e.layerName);var p=f.keywordConfig.getIn(["timelapse","historical","field"]);if(!p)return a.alerter.errorMsg("Error building query. Please check timelapse.historical keyword configuration."),void s.log.error("Failed to find timelapse.historical keywords on "+e.layerName);var h=e.labelField||"label",g=f.title;o(l[h])||(g+=" ("+l[h]+")");var m=o(e.cqlTemplate)?(p.trkId||e.trkIdField)+"='"+l[e.trkIdField]+"'":n.$interpolate(e.cqlTemplate)(r({__featureId:i(u,["source","id"])},l)),v=e.extraArrowFields?e.extraArrowFields.split(","):[],y=n.buildDataViewRecord(f,m,p,v);n.TLManager.buildCanvasLayerState(y,g)}}}return t.prototype.buildFormatOptions=function(t,e,n,r,i,o){switch(t){case g.StoreTypes.Arrow:return m.StoreHelper.buildArrowFormatOptions(i,e,o);case g.StoreTypes.Binary:var a=i.keywordConfig.getIn(["timelapse","historical","field","label"]);return m.StoreHelper.buildBinFormatOptions(e,n,r,a);case g.StoreTypes.JSON:return null;default:return}},t.prototype.buildDataViewRecord=function(t,e,n,r){var i=new f.GetFeatureDataFilterRecord({additionalCql:new u.RawClauseRecord({cql:e})}),o=n.get("geom"),a=n.get("dtg"),s=n.get("trkId"),c=p.KeywordHelper.getDefaultStoreType(t),d=(p.KeywordHelper.getArrowFieldProperties(t).suggestedFields||[]).concat(r),g=new h.StoreRecord({type:c,id:l.uuid.generate(),geomField:o,dtgField:a,idField:s,formatOptions:this.buildFormatOptions(c,a,o,s,t,d)}),m=new v.SourceRecord({id:t.id,type:v.SourceType.SERVER});return new h.DataViewRecord({source:m,store:g,dataFilter:i})},t.$inject=["$interpolate","stealth.geo.timelapse.manager.Manager"],t}();e.ShowTimelapseCapability=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(2),o=n(626),a=n(3759),s=n(451),l=n(0),c=n(26),u=n(90),d=n(1206),f=n(3760);l.module("stealth.mediator.earth-timelapse",["stealth.earth","stealth.timelapse"]).run(["$rootScope","ccri.time-controls.manager","colors","getIdHashFunc","stealth.display.registry","stealth.timelapse.geo.ol3.layers.ColorModes","tlLayerManager","CONFIG",function(t,e,n,l,p,h,g,m){var v=u.converter.getUnit("meters"),y=Math.min(128,n.getNumColors()),b={},w={},_=r(i(m,"earth-timelapse.fields",[]),function(t){return s({trkIdName:t.trkIdName,altName:t.altName,altUnit:u.converter.getUnit(t.altUnit)},function(t){return!t})}),x=function(t,e){var r={};p.listActive().forEach(function(i){if("earth"===i.type){var s=i.widget.scope.scene,p=s.earthRadiusMeters;r[p]||(r[p]=new c.Group,r[p].renderOrder=1e3,g.getHistoricalLayer().getStores().forEach(function(i){if("arrow"===i.type&&!i.getViewState().isError&&i.getViewState().isDataReady()){if(void 0===w[i.getUid()]&&(w[i.getUid()]=f.findStoreInfo(i,_)),null===w[i.getUid()])return;!function(t,e,r,i,s){var f=e.dataset(),p=w[e.getUid()],g=p.altUnit&&!!f.ds.vectorsByName[p.altName],m={},b={},_={},x={};e.each(function(t,e,n,r,i,o){var a=f.ds.vectorsByName[p.trkIdName].indices.get(o),l=g?u.converter.convert(f.ds.vectorsByName[p.altName].get(o),p.altUnit,v):null;isFinite(l)||(l=x[a]||0);var c=Geo.threeDCoordinate(t,e,d.EarthScene.scaleAltitude(l),s);m[a]||(m[a]=[]),m[a].push(c.x,c.y,c.z),b[a]=t,_[a]=e,x[a]=l},r,i);var S=l(e.getViewState(),e.getFilters().id),C=e.getFillColorHexString();o(m,function(r,i){e.getViewState().colorMode===h.COLOR_BY_ID&&(C=n.getColor(S(i%y*e.getColorByMultiplier())));var o=new c.LineBasicMaterial({color:C,linewidth:4}),s=new c.BufferGeometry;s.addAttribute("position",new c.Float32BufferAttribute(r,3));var l=new c.Line(s,o);if(l.renderOrder=1e3,t.add(l),g){var u=new c.LineBasicMaterial({color:C,linewidth:1}),d=new c.BufferGeometry,f=Geo.threeDCoordinate(b[i],_[i],0);d.addAttribute("position",new c.Float32BufferAttribute(a(r,3).concat(f.x,f.y,f.z),3));var p=new c.Line(d,u);p.renderOrder=1e3,t.add(p)}})}(r[p],i,t,e,p)}})),b[p]&&s.remove(b[p]),s.add(r[p]),s.render()}}),b=r},S=function(t,e,n,r){x(t,e),r()};p.addListener("display.active",function(t){if("earth"===t.type){var n=0;if(p.listActive().forEach(function(t){"earth"===t.type&&n++}),t.active){var r=e.getCurrentWindowStats();x(r.windowStart_s,r.windowEnd_s),1===n&&e.registerListener(S)}else t.active||0!==n||e.unregisterListener(S)}}),t.$on("stealth.timelapse.redrawCurrent",function(t,e,n){x(e,n)})}])},function(t,e,n){var r=n(211),i=n(60);t.exports=function(t,e,n){var o=null==t?0:t.length;return o?(e=n||void 0===e?1:i(e),r(t,(e=o-e)<0?0:e,o)):[]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(451),i=n(23),o=n(30),a=n(2),s=n(29),l=n(90);function c(t,e){return!!e&&(e.trkIdName&&t.ds.vectorsByName[e.trkIdName])}function u(t,e){return t?o({},{altDataExists:e},t):null}e.validateStoreInfoSuggestion=c,e.storeInfoSuggestionToInfo=u,e.findStoreInfo=function(t,e){var n,o=t.dataset();if(t.getQuery instanceof Function&&t.getQuery()){var d=t.getQuery().layerData.currentLayer.KeywordConfig,f="timelapse.historical."+t.getQuery().layerData.currentLayer.stealthWorkspace;n=r({trkIdName:a(d,f+".field.trkId"),altName:a(d,f+".field.altitude"),altUnit:l.converter.getUnit(a(d,f+".altitudeUnits"))},function(t){return!t})}var p=s(e,n),h=i(p,function(t){return c(o,t)&&t.altName&&o.ds.vectorsByName[t.altName]})||i(p,function(t){return c(o,t)})||(c(o,n)?n:null);return u(h,h&&h.altUnit&&h.altName&&!!o.ds.vectorsByName[h.altName])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(3762),n(3766),n(3782),r.module("stealth.dcm").namespace(),e.default=r.module("stealth.dcm",["stealth.dcm.alime","stealth.dcm.geo","stealth.dcm.geo.query","stealth.dcm.wizard"])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(3763),n(3765)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(18),a=n(14),s=n(85),l=n(3764);r.module("stealth.dcm.alime").controller("stealth.dcm.alime.alimePopupController",["$scope","$http","$q","stealth.dcm.alime.alimeConstant","stealth.dcm.alime.endpointService","stealth.dcm.alime.enrichService",function(t,e,n,r,l,c){var u,d=t.response.dcmLayer,f=d.Name,p=i(d,"styleDirectiveScope.viewState.selectedBand"),h=i(p,"bandNum"),g=i(p,"thresholdFilter"),m=i(g,"value"),v=i(g,"scale");function y(t){return a(t)?n.when(b(t)):c.getEnrichedEntities([t]).then(function(e){return o(e)?b(t):e[0]})}function b(t){return{id:t,description:"No description available."}}m&&v&&(u=m*v),t.bandLabel=i(p,"label","Model Score"),t.descriptionLoading=!1,t.explanationLoading=!1,t.featureId=i(t.response.metadata[0].source,"id"),t.fillColor=i(d,"styleDirectiveScope.viewState.fillColor","#6495ED"),t.updateDescription=function(e){a(e)||(t.descriptionLoading=!0,y(e).then(function(e){t.info=e,t.descriptionLoading=!1}))},t.featureId&&f&&u&&h&&(t.explanationLoading=!0,t.descriptionLoading=!0,function(t,n,i,o){var a=l.getUrl(r.endpoint.explanation,{gemId:t,predictionLayerId:n,threshold:i,bandNum:o});return e.get(a).then(function(t){return t.data},function(){return"No explanation available"})}(t.featureId,f,u,h).then(function(e){var n=i(e,"rules",{}),r=s(n,function(t,e,n){return(t[e]||(t[e]=[])).push(n),t},{}),o=i(e,"numCovered",0);t.finished=i(e,"finished",!1)&&o>1,t.contains=i(r,"true",[]),t.absent=i(r,"false",[]),t.predictedProbability=e.predictedProbability,t.explanationLoading=!1}).then(function(){var e;return o(t.contains)?o(t.absent)||(e=t.absent[0]):e=t.contains[0],y(e)}).then(function(e){t.info=e,t.descriptionLoading=!1}))}]).directive("stealth.dcm.alime.alimePopup",function(){return{restrict:"E",scope:{response:"=",record:"=",index:"="},controller:"stealth.dcm.alime.alimePopupController",template:l}})},function(t,e){t.exports='<div class="alimeExplanationPopup">\n    <div class="vertically-buffered flex-row">\n        <span class="alimeExplanationLabel">{{bandLabel}}:&nbsp;</span>\n        <span ng-show="predictedProbability" ng-switch on="bandLabel">\n            <span ng-switch-when="Rank">\n                {{predictedProbability.toLocaleString()}}\n            </span>\n            <span ng-switch-when="Percentile">\n                {{predictedProbability.toFixed(2)}}%\n            </span>\n            <span ng-switch-default>\n                {{predictedProbability.toFixed(3)}}\n            </span>\n        </span>\n    </div>\n    \x3c!-- Status --\x3e\n    <div class="alimeExplanationStatus">\n        <span ng-if="explanationLoading">\n            Loading...\n            <i class="fa fa-circle-o-notch fa-spin"></i>\n        </span>\n        <span class="alimeExplanationWarning"\n              ng-if="!explanationLoading && ((!contains.length && !absent.length) || !finished)">\n            No explanation available\n        </span>\n    </div>\n    \x3c!-- Rules --\x3e\n    <div class="vertically-buffered flex-row">\n        <table class="alimeExplanationTable">\n            <tr>\n                <th class="alimeExplanationLabel">Contains</th>\n            </tr>\n            <tr ng-if="finished" ng-repeat="rule in contains">\n                <td class="alimeBox"\n                    ng-click="updateDescription(rule)"\n                    ng-class="{active: rule === info.id}"\n                    ng-style="{\'border-color\': fillColor}">\n                    {{rule}}\n                </td>\n            </tr>\n        </table>\n        <table class="alimeExplanationTable">\n            <tr>\n                <th class="alimeExplanationLabel">Absent</th>\n            </tr>\n            <tr ng-if="finished" ng-repeat="rule in absent">\n                <td class="alimeBox"\n                    ng-click="updateDescription(rule)"\n                    ng-class="{active: rule === info.id}"\n                    ng-style="{\'border-color\': fillColor}">\n                    {{rule}}\n                </td>\n            </tr>\n        </table>\n    </div>\n    \x3c!-- Description box --\x3e\n    <div class="alimeBox alimeDescription"\n         ng-if="!explanationLoading && (contains.length || absent.length) && finished"\n         ng-style="{\'border-color\': fillColor}">\n        <span ng-if="descriptionLoading">\n            <i class="fa fa-circle-o-notch fa-spin"></i>\n        </span>\n        <span ng-if="!descriptionLoading && info.id">\n            <p class="alimeExplanationLabel">{{info.id}}</p>\n            <p>{{info.description}}</p>\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(96),o=n(2),a=n(53);r.module("stealth.dcm.alime",[]).constant("stealth.dcm.alime.alimeConstant",{baseUrl:"/crusher",endpoint:{explanation:{key:"dcm.alime.explainationUrl",url:"/alime/{{encodeURIComponent(gemId)}}/{{encodeURIComponent(predictionLayerId)}}/{{threshold}}/{{bandNum}}"},enrich:{key:"crusher.enrich.enrichEntitiesUrl",url:"/enrich/"}},enrichmentType:"application/vnd.description"}).service("stealth.dcm.alime.endpointService",["$interpolate","CONFIG","stealth.dcm.alime.alimeConstant",function(t,e,n){var r=o(e,"dcm.alime.baseUrl",o(n,"baseUrl","")),s={encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,pathEncode:function(t){return t.replace(/\//g,"%2F").replace(/\?/g,"%3F").replace(/\#/,"%23")},replaceAll:function(t,e,n){return t.replace(new RegExp(e,"g"),n)}};this.getUrl=function(n,l){var c=o(e,n.key,n.url);return c=a(c,"explicitUrl")?c.explicitUrl:r+c,l?t(c)(i(l,s)):c}}]).service("stealth.dcm.alime.enrichService",["$http","$q","CONFIG","stealth.dcm.alime.alimeConstant","stealth.dcm.alime.endpointService","toastr",function(t,e,n,r,i,a){this.getEnrichedEntities=function(s,l){l||(l=o(n,"dcm.alime.enrichmentType",r.enrichmentType));var c=i.getUrl(r.endpoint.enrich);return t.post(c,{ids:s},{headers:{Accept:l}}).then(function(t){return t.data},function(){var t="Failed to enrich entities.";return a.error(t,"Communication Error"),e.reject(t)})}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(3767),n(3778),n(3779),n(3781)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(21),o=n(684),a=n(109),s=n(22),l=n(23),c=n(2),u=n(328),d=n(53),f=n(50),p=n(4),h=n(334),g=n(3777);r.module("stealth.dcm.geo",["stealth.dcm.geo.ol3.layers","stealth.dcm.wizard","stealth.core.utils","ccri.angular-utils"]).run(["$log","$rootScope","CONFIG","ol3Map","owsLayers","categoryManager","dcmQueryService","dcmWizard","dcmWizardFunctions","explainableWizard","threatSurfaceWizard","stealth.core.geo.ol3.manager.Category","ccri.angular-utils.WidgetDef","stealth.dcm.geo.ol3.layers.DcmLayer","toastr",function(t,e,n,g,m,v,y,b,w,_,x,S,C,E,T){t.debug("stealth.dcm.geo: run called");var M=e.$new();e.$on("dcm.generate.prediction",function(t,e){d(e,"prediction")&&M.runDcmQuery(e.prediction,"Custom")});var k=[{label:"Score",bandNum:1,thresholdFilter:{scale:.01,min:0,max:100,step:1,value:95},thresholdDisplay:{min:"0.0",max:"1.0"}},{label:"Rank",bandNum:3,thresholdFilter:{scale:1,min:1,max:1e4,step:1,value:9500},thresholdDisplay:{min:"10,000",max:"1"}},{label:"Percentile",bandNum:4,thresholdFilter:{scale:1,min:0,max:100,step:1,value:95},thresholdDisplay:{min:"0%",max:"100%"}}];function A(t){var e=t.toLowerCase();return c(n.dcm[e],"bands",k)}M.categories={Custom:{title:"Custom Predictions",bands:A("Custom"),visible:!0,layers:[],wizard:b},Explainable:{title:"Explainable Predictions",bands:A("Explainable"),visible:!0,layers:[],wizard:_}},M.categoryVisible=!0,M.toggleCategoryVisibility=function(t){var e=!M.categories[t].visible;M.categories[t].visible=e,s(M.categories[t].layers,function(t){t.styleDirectiveScope.layerState.visible=e})},M.removeLayer=function(t){s(Object.keys(M.categories),function(e){h(M.categories[e].layers,t)}),g.removeLayerById(t.mapLayerId)},M.zoomToLayer=function(t){g.fit(t.EX_GeographicBoundingBox)},M.launchDcmWizard=function(t){M.categories[t].wizard.launch()},M.launchThreatSurfaceWizard=function(t){M.isWizardInProgress=!0,x.launch(t)},M.initWmsLayer=function(t,e){var s={LAYERS:t.Name,cql_filter:null};t.wmsUrl=c(n,"geoserver.defaultUrl","")+"/wms";var l=r.fromJson(t.Abstract),d={bands:function(t,e){var n=r.copy(M.categories[t].bands);return p(n,function(t){return"Rank"===c(t,"label","")&&f(e)&&(t.thresholdFilter.max=e,t.thresholdDisplay.min=t.thresholdFilter.max.toLocaleString(),t.thresholdFilter.value=Math.floor(.95*t.thresholdFilter.max)),t})}(e,c(l,"numPredictedCells",1e4)),id:o.uuid.generate(),isTiled:!1,layerThisBelongsTo:t,name:t.Name,opacity:1,queryable:!0,removeStyleDir:M.removeLayer,requestParams:s,zIndexHint:10},h=new E(d),m=u(l.predictiveRasters.concat(l.predictiveVectors),"type");return h.metadata={description:l.description,date:i.utc(l.date).format("llll"),events:l.event,Attractors:p(m.Attractor,"name").join(", "),Repellers:p(m.Repeller,"name").join(", ")},h.EX_GeographicBoundingBox=a(t.EX_GeographicBoundingBox),h.Name=r.copy(t.Name),h.OriginalTitle=r.copy(t.Title),h.Title=r.copy(t.Title),h.mapLayerId=h.id,h.menuOptions=[{label:'<i class="fa fa-fw fa-search-plus"></i> Zoom To',onClick:function(){M.zoomToLayer(h)}},{label:'<i class="fa fa-fw fa-remove"></i> Remove',onClick:function(){M.removeLayer(h)}}],h.viewState={isLoading:!1,showMetadata:!1},g.addLayer(h),h},M.addThreatSurface=function(t,e){var n=M.categories[t].layers;if(l(n,function(t){return t.Name===e.Name}))return T.error("Spatial Prediction already added to map."),!1;var r=M.initWmsLayer(a(e),t);return n.push(r),!0},M.editTitle=function(t){t.viewState.isLoading||0===t.Title.length&&(t.Title=r.copy(t.OriginalTitle))},M.runDcmQuery=function(n,r){var i=n.name,o={Name:n.workspace.name+":"+i,Title:i,viewState:{isLoading:!0}},s=M.categories[r].layers;return s.push(o),M.tempLayer=o,y.doDcmQuery({geometry:n.geometry,predictiveFeatures:n.predictiveFeatures,predictiveCoverages:n.predictiveCoverages,events:n.events,width:n.width,height:n.height,sampleRatio:n.sampleRatio,CRS:n.CRS,featureSelection:n.featureSelection,outputType:n.outputType,workspace:n.workspace,srsHandling:n.srsHandling,keywords:n.keywords,sldTemplate:n.sldTemplate,title:i,description:n.description,bounds:n.bounds}).then(function(n){return m.getLayers(["dcm","prediction"],!0).then(function(i){t.debug("owsLayers.getLayers()");var o=l(i,function(t){return t.Name===n}),c=M.initWmsLayer(a(o),r),u=s.filter(function(t){return c.Name===t.Name}),d=s.indexOf(u[0]);s.splice(d,d+1),s.push(c),e.$emit("updateRouteAnalysisLayers")}),n},function(t){var e=s.indexOf(M.tempLayer);s.splice(e,e+1),T.error(t)})},M.generatePolygonPredictions=function(t){var e=!1,n=!1,r={timeOut:0,extendedTimeOut:0,tapToDismiss:!1,toastClass:"waitingToast",iconClass:"waitingToastIcon",onShown:function(){n=!0,e&&T.clear(i)}},i=T.info("Generating prediction explainability.","",r);y.doPredictionToPolygons(t).then(function(){e=!0,n&&T.clear(i)},function(){n&&T.clear(i)})},w.setCategoryScope(M);var I=new C({tag:"st-dcm-geo-category",scope:M,isolateScope:!0}),O=new S(2,"Spatial Predictions","fa-line-chart",I,null,!0);v.addCategory(1,O),I=O=null}]).directive("stDcmGeoCategory",function(){return{template:g}})},,,,,,,,,,function(t,e){t.exports='<div ng-repeat="category in categories | lodash:\'keys\' | orderBy track by category" class="categoryGrouping">\n    <div class="categoryCell">\n        <st-toggle-map-layer visible="categories[category].visible"\n                             toggle="toggleCategoryVisibility(category)"\n        ></st-toggle-map-layer>\n    </div>\n    <div class="categoryCell">\n        <b>{{::categories[category].title}}</b>\n    </div>\n    <div class="categoryCell">\n        <span class="btn btn-default fa-stack toggleButton"\n              ng-click="launchDcmWizard(category)"\n              uib-tooltip="New spatial prediction" tooltip-class="nowrap"\n              tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n              tooltip-trigger="mouseenter" tooltip-append-to-body="true">\n            <i class="fa fa-fw fa-plus fa-stack-1x text-primary"></i>\n        </span>\n        <span class="btn btn-default fa-stack toggleButton"\n              ng-click="launchThreatSurfaceWizard(category)"\n              uib-tooltip="Load spatial prediction" tooltip-class="nowrap"\n              tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n              tooltip-trigger="mouseenter" tooltip-append-to-body="true">\n            <i class="fa fa-fw fa-folder-open fa-stack-1x text-primary"></i>\n        </span>\n    </div>\n    <div class="categoryGrouping">\n        <div ng-repeat="layer in categories[category].layers track by layer.id"\n             class="dcmCategoryLayer flex-row menu-triggerContainer buf-xs-mb">\n            <div class="clickable" ng-click="layer.viewState.showMetadata = !layer.viewState.showMetadata">\n                 <i class="fa fa-fw" ng-class="layer.viewState.showMetadata ? \'fa-caret-down\' : \'fa-caret-right\'"></i>\n             </div>\n            <span ng-if="layer.viewState.isLoading">\n                <i class="fa fa-fw fa-spin fa-circle-o-notch"></i>\n            </span>\n            <st-toggle-map-layer ng-if="!layer.viewState.isLoading"\n                                 visible="layer.styleDirectiveScope.layerState.visible"\n                                 toggle="layer.styleDirectiveScope.toggleVisibility()"\n            ></st-toggle-map-layer>\n            <div class="flex-1">\n                <div class="flex-row">\n                    <div class="flex-1 ellipsis"\n                         style="padding-left:4px;"\n                         ccri-angular-utils-tooltip-overflow\n                         uib-tooltip="{{::layer.Title}}" tooltip-class="wrap"\n                         tooltip-placement="top-left" tooltip-animation="true" tooltip-popup-delay="900"\n                         tooltip-trigger="mouseenter" tooltip-append-to-body="true"\n                         tooltip-enable="false">\n                        {{::layer.Title}}\n                    </div>\n                    <div class="categoryCell buf-sm-ml buf-xs-mr" ng-if="!layer.viewState.isLoading">\n                        <span class="fa fa-square clickable colorpickerSquare"\n                              ng-style="{color: layer.styleDirectiveScope.viewState.fillColor}"\n                              colorpicker colorpicker-position="bottom"\n                              ng-model="layer.styleDirectiveScope.viewState.fillColor"\n                              ng-change="layer.styleDirectiveScope.updateRequestParams()"\n                              uib-tooltip="Change color" tooltip-class="nowrap"\n                              tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n                              tooltip-trigger="mouseenter" tooltip-append-to-body="true"\n                        ></span>\n                    </div>\n                </div>\n                <div style="padding:4px 0;"\n                     class="queryDetails"\n                     ng-class="{\'ng-hide\': !layer.viewState.showMetadata}">\n                    <div class="query-properties">\n                        <div class="property-group" ng-if="layer.metadata.description">\n                            <span class="property-label">Description</span>\n                            <span class="property-value">{{layer.metadata.description}}</span>\n                        </div>\n                        <div class="property-group" ng-if="layer.metadata.date">\n                            <span class="property-label">Created</span>\n                            <span class="property-value">{{layer.metadata.date}}</span>\n                        </div>\n                        <div class="property-group" ng-if="layer.metadata.events">\n                            <span class="property-label">Events</span>\n                            <span class="property-value">{{layer.metadata.events}}</span>\n                        </div>\n                        <div class="property-group" ng-if="layer.metadata.Attractors">\n                            <span class="property-label">Attractors</span>\n                            <span class="property-value">{{layer.metadata.Attractors}}</span>\n                        </div>\n                        <div class="property-group" ng-if="layer.metadata.Repellers">\n                            <span class="property-label">Repellers</span>\n                            <span class="property-value">{{layer.metadata.Repellers}}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <ccri-angular-utils-menu-trigger ng-if="!layer.viewState.isLoading"\n                                             menu-options="layer.menuOptions"\n                                             class="buf-md-ml buf-sm-mr">\n                <i class="fa fa-ellipsis-v fa-lg"></i>\n            </ccri-angular-utils-menu-trigger>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(684),o=n(23),a=n(2),s=n(53),l=n(18),c=n(4);r.module("stealth.dcm.geo.ol3.layers").factory("stealth.dcm.geo.ol3.layers.DcmLayer",["$q","CONFIG","colors","owsLayers","stealth.core.geo.ol3.layers.WmsLayer",function(t,e,n,r,u){var d=function(d){var f=d||{},p=this,h=f.bands||[],g=f.layerThisBelongsTo,m=f.removeStyleDir,v={LAYERS:f.name,cql_filter:null},y=a(e,"geoserver.defaultUrl","")+"/wfs",b=a(e,"geoserver.defaultUrl","")+"/wms";u.apply(p,[f]),p.styleDirective="stealth.dcm.geo.ol3.layers.dcm-style",p.styleDirectiveScope.styleVars.iconClass="fa fa-fw fa-lg fa-line-chart",p.styleDirectiveScope.derivedLayer=p,p.styleDirectiveScope.viewState={bands:h,fillColor:n.getColor(),trainingLabelColor:"#ff0000",showTrainingLabels:!1},l(p.styleDirectiveScope.viewState.bands)||(p.styleDirectiveScope.viewState.selectedBand=p.styleDirectiveScope.viewState.bands[0]),p.styleDirectiveScope.removeLayer=function(){m&&m(p)},p.styleDirectiveScope.toggleTrainingLabels=function(){p.styleDirectiveScope.viewState.showTrainingLabels=!p.styleDirectiveScope.viewState.showTrainingLabels,p.styleDirectiveScope.updateRequestParams()},p.styleDirectiveScope.updateRequestParams=function(){v.ENV=function(t){var e=t.selectedBand,n=c(t.bands,function(t){return t.label===e.label?t.label+":true":t.label+":false"}),r="threshold:"+e.thresholdFilter.value*e.thresholdFilter.scale,i="maxThreshold:"+e.thresholdFilter.max*e.thresholdFilter.scale;return(n=n.concat([r,i,"fillColor:"+t.fillColor,"trainingLabelColor:"+t.trainingLabelColor,"showTrainingLabels:"+t.showTrainingLabels])).join(";")}(p.styleDirectiveScope.viewState),p.updateRequestParams(v)},p.styleDirectiveScope.updateRequestParams(),p.searchPoint=function(e,n){if(s(g.KeywordConfig,"click.search.altLayer")){var l=a(g.KeywordConfig,"click.search.altLayer");return r.getLayers().then(function(r){var a=o(r,{Name:l});if(a){var c={KeywordConfig:{click:{search:{customPopup:{directive:"stealth.dcm.alime.alime-popup"},strategy:"nearest-fixed-1"}}},wfsUrl:y,wmsUrl:b},d=new u({id:i.uuid.generate(),name:"Explanation for "+p.name,requestParams:{LAYERS:a.Name},queryable:a.queryable,opacity:0,zIndexHint:-20,istiled:s(a.KeywordConfig,"capability.tiled"),useProxyForWfs:a.useProxyForWfs,layerThisBelongsTo:c});return t.when(d.searchPoint(e,n).then(function(t){var e=g;return e.styleDirectiveScope=p.styleDirectiveScope,t.dcmLayer=e,t},function(t){return t}))}return t.when(p.getEmptySearchPointResult())})}return t.when(p.getEmptySearchPointResult())}};return d.prototype=Object.create(u.prototype),d}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(3780);r.module("stealth.dcm.geo.ol3.layers").directive("stealth.dcm.geo.ol3.layers.dcmStyle",function(){return{restrict:"E",template:o,link:function(t){t.labelFn=function(t){return i(t,"label",t)}}}})},function(t,e){t.exports='<div class="dcmStyle" style="padding:4px;">\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.visibilityName\'"></ui-include>\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.opacitySlider\'"></ui-include>\n    <div class="layerStyleRow flex-row">\n        <ccri-angular-utils-select\n            class="flex-1"\n            ng-model="viewState.selectedBand"\n            ng-change="updateRequestParams()"\n            label-fn="labelFn"\n            from-list="viewState.bands"\n        ></ccri-angular-utils-select>\n        <div class="flex-1" style="margin:3px 2px 0px 10px;">\n            <span ng-switch on="viewState.selectedBand.label">\n                <span ng-switch-when="Rank">\n                    &lt;= {{(viewState.selectedBand.thresholdFilter.max - viewState.selectedBand.thresholdFilter.value) * viewState.selectedBand.thresholdFilter.scale}}\n                </span>\n                <span ng-switch-when="Percentile">\n                    &gt;= {{(viewState.selectedBand.thresholdFilter.value * viewState.selectedBand.thresholdFilter.scale)}}%\n                </span>\n                <span ng-switch-default>\n                    &gt;= {{(viewState.selectedBand.thresholdFilter.value * viewState.selectedBand.thresholdFilter.scale).toFixed(2)}}\n                </span>\n            </span>\n        </div>\n        <div class="categoryCell horizontally-buffered" style="margin-top:2px;">\n            <span class="fa fa-lg fa-square clickable colorpickerSquare"\n                  ng-style="{color: viewState.fillColor}"\n                  colorpicker colorpicker-position="bottom"\n                  ng-model="viewState.fillColor"\n                  ng-change="updateRequestParams()"\n                  uib-tooltip="Change color" tooltip-class="nowrap"\n                  tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n                  tooltip-trigger="mouseenter"\n            ></span>\n        </div>\n        <div class="rangeSliderEndLabel"></div>\n    </div>\n    <div class="layerStyleRow opacitySlider flex-row flex-align-items-center">\n        <div class="rangeSliderStartLabel" style="text-align:right;">{{viewState.selectedBand.thresholdDisplay.min}}</div>\n        <div class="flex-1 horizontally-buffered">\n            <div id="dcmSlider"\n                 ui-slider\n                 ng-model="viewState.selectedBand.thresholdFilter.value"\n                 ccri-angular-utils-change="updateRequestParams()"\n                 ccri-angular-utils-change-delay="30"\n                 min="{{viewState.selectedBand.thresholdFilter.min}}"\n                 max="{{viewState.selectedBand.thresholdFilter.max}}"\n                 value="{{viewState.selectedBand.thresholdFilter.value}}"\n                 step="{{viewState.selectedBand.thresholdFilter.step}}"\n            ></div>\n        </div>\n        <div class="rangeSliderEndLabel">{{viewState.selectedBand.thresholdDisplay.max}}</div>\n    </div>\n    <div class="layerStyleRow opacitySlider flex-row flex-align-items-center">\n        <div class="clickable flex-1" ng-click="toggleTrainingLabels()">\n            <i class="fa fa-lg fa-fw"\n               ng-class="viewState.showTrainingLabels ? \'fa-check-square-o\' : \'fa-square-o\'"\n            ></i>\n            Show targets\n        </div>\n        <div class="categoryCell horizontally-buffered">\n            <span class="fa fa-lg fa-square clickable colorpickerSquare"\n                  ng-style="{color: viewState.trainingLabelColor}"\n                  colorpicker colorpicker-position="bottom"\n                  ng-model="viewState.trainingLabelColor"\n                  ng-change="updateRequestParams()"\n                  uib-tooltip="Change color" tooltip-class="nowrap"\n                  tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n                  tooltip-trigger="mouseenter"\n            ></span>\n        </div>\n        <div class="rangeSliderEndLabel"></div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(0).module("stealth.dcm.geo.query").service("dcmQueryService",["wps","CONFIG","wfs","cqlHelper",function(t,e,n,r){var i=this;this.cqlToFilterXml=function(t){var e="";return t&&(e+=n.cqlToFilterXml(t)),e},this.doDcmQuery=function(n){var o=[n.bounds.minLon,n.bounds.minLat,n.bounds.maxLon,n.bounds.maxLat],a=r.combine(r.operator.AND,n.events.cql_filter,r.buildBboxFilter(n.events.defaultGeomFieldName,o)),s={predictiveFeaturesWpsInput:i.getFeaturesWpsInput(n.predictiveFeatures,"predictiveVectors"),predictiveCoveragesWpsInput:i.getPredictiveCoveragesWpsInput(n.predictiveCoverages),eventsWpsInput:i.getFeatureWpsInput(n.events,a,"events"),width:n.width,height:n.height,sampleRatio:n.sampleRatio,CRS:n.CRS,featureSelection:n.featureSelection,outputType:n.outputType.output,workspace:n.workspace.name,store:n.title,name:n.title,srsHandling:n.srsHandling,keywords:n.keywords,sldTemplate:n.sldTemplate,description:n.description,aoWpsInput:i.getAoWpsInput(n.geometry),classifierType:e.dcm.classifierType};return t.buildAndSubmit("spatialPrediction",s,{httpConfig:{responseType:"text"}})},this.doPredictionToPolygons=function(e){var n={predictionCoverageWpsInput:i.getPredictionCoverageWpsInput(e.predictionName,"prediction",e.bounds,"image/tiff"),workspace:e.workspace,store:e.store,polygonLayerWpsInput:i.getFeaturesWpsInput([e.polygonLayer],"polygonLayer")};return t.buildAndSubmit("predictionToPolygons",n,{httpConfig:{responseType:"text"}})},this.getStoreName=function(t,e,n){var r="";return t&&t.forEach(function(t){r+=t.Title}),e&&e.forEach(function(t){r=r+"-"+t.Title}),n&&n.Title&&(r=r+"-"+n.Title),r+"-DCM"},this.getFeaturesWpsInput=function(t,e){var n="";return t&&t.forEach(function(t){n+=i.getFeatureWpsInput(t,t.cql_filter,e)},i),n},this.getFeatureWpsInput=function(t,e,n){return t.isImportCacheLayer?i.getInputCacheFeaturesWpsInput(t,n):i.getGSFeaturesWpsInput(t,e,n)},this.getGSFeaturesWpsInput=function(t,e,n){return"<wps:Input><ows:Identifier>"+n+'</ows:Identifier><wps:Reference mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST"><wps:Body><wfs:GetFeature service="WFS" version="1.0.0" outputFormat="GML2" xmlns:'+t.workspace.name+'="'+t.workspace.namespace+'"><wfs:Query typeName="'+t.Name+'">'+i.cqlToFilterXml(e)+"</wfs:Query></wfs:GetFeature></wps:Body></wps:Reference></wps:Input>"},this.getInputCacheFeaturesWpsInput=function(t,e){return"<wps:Input><ows:Identifier>"+e+'</ows:Identifier><wps:Data><wps:ComplexData mimeType="application/json"><![CDATA['+t.geoJSON+"]]></wps:ComplexData></wps:Data></wps:Input>"},this.getPredictiveCoveragesWpsInput=function(t){var e="";return t&&t.forEach(function(t){e+='<wps:Input><ows:Identifier>predictiveRasters</ows:Identifier><wps:Reference mimeType="image/tiff" xlink:href="http://geoserver/wcs" method="POST"><wps:Body><wcs:GetCoverage service="WCS" version="1.1.1"><ows:Identifier>'+t.Name+'</ows:Identifier><wcs:DomainSubset><gml:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326"><ows:LowerCorner>'+t.EX_GeographicBoundingBox[0]+" "+t.EX_GeographicBoundingBox[1]+"</ows:LowerCorner><ows:UpperCorner>"+t.EX_GeographicBoundingBox[2]+" "+t.EX_GeographicBoundingBox[3]+'</ows:UpperCorner></gml:BoundingBox></wcs:DomainSubset><wcs:Output format="image/tiff"/></wcs:GetCoverage></wps:Body></wps:Reference></wps:Input>'},i),e},this.getAoWpsInput=function(t){var e="";return t&&t.length>0&&(e+='<wps:Input><ows:Identifier>ao</ows:Identifier><wps:Data><wps:ComplexData mimeType="application/wkt"><![CDATA['+t+"]]></wps:ComplexData></wps:Data></wps:Input>"),e},this.getPredictionCoverageWpsInput=function(t,e,n,r){return t?"<wps:Input><ows:Identifier>"+e+'</ows:Identifier><wps:Reference mimeType="'+r+'" xlink:href="http://geoserver/wcs" method="POST"><wps:Body><wcs:GetCoverage service="WCS" version="1.1.1"><ows:Identifier>'+t+'</ows:Identifier><wcs:DomainSubset><gml:BoundingBox crs="http://www.opengis.net/gml/srs/epsg.xml#4326"><ows:LowerCorner>'+n.minLon+" "+n.minLat+"</ows:LowerCorner><ows:UpperCorner>"+n.maxLon+" "+n.maxLat+'</ows:UpperCorner></gml:BoundingBox></wcs:DomainSubset><wcs:Output format="'+r+'"/></wcs:GetCoverage></wps:Body></wps:Reference></wps:Input>':""}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(3783),n(3784),n(3788),n(3789)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(14);r.module("stealth.dcm.wizard",["ccri.angular-utils","stealth.core.startmenu","stealth.wizard"]).run(["$rootScope","startMenuManager","dcmWizard",function(t,e,n){e.addButton("Custom Prediction","fa-line-chart",n.launch),t.$on("dcm.wizard.custom.launch",function(t,e){n.launch(e.prediction)})}]).service("dcmWizard",["$rootScope","boundsHelper","cqlHelper","ccri.angular-utils.WidgetDef","dcmWizardFunctions","ol3Map","stealth.core.geo.ol3.layers.MapLayer","stealth.core.wizard.Step","stealth.core.wizard.Wizard","stealth.dcm.wizard.DcmWizardScope","stealth.wizard.wizardManager","toastr","wps",function(t,e,n,r,a,s,l,c,u,d,f,p,h){var g=new i.interaction.DragBox,m=new i.layer.Vector({source:a.getBoxSource({minLon:-180,maxLon:180,minLat:-90,maxLat:90}),style:new i.style.Style({stroke:new i.style.Stroke({color:[204,0,153,1]}),fill:new i.style.Fill({color:[255,255,255,.35]})})}),v=new l("DCMWizardBox","Box",m);this.launch=function(l){var y=new d(t.$new(),l,"custom"),b=[];y.existingLayerNames=null,a.getExistingLayerNames().then(function(t){y.existingLayerNames=t}),a.getVectorLayers().then(function(t){y.vectorLayers=y.vectorLayers.concat(t)}),a.getRasterLayers().then(function(t){y.rasterLayers=y.rasterLayers.concat(t)}),a.getEventLayers().then(function(t){y.eventLayers=y.eventLayers.concat(t),y.workspaces=a.getWorkspaces(y.eventLayers),o(y.prediction.workspace)&&(y.prediction.workspace=a.getDefaultWorkspace(y.workspaces))});var w=a.getImportCacheLayers();y.vectorLayers=y.vectorLayers.concat(w),y.eventLayers=y.eventLayers.concat(w),y.prediction.events&&!y.eventLayers.includes(y.prediction.events)&&y.eventLayers.unshift(y.prediction.events),b.push(new c("Choose predictive features",new r({tag:"st-dcm-wiz-predictive-features",scope:y}),null,!0,null,function(t){if(void 0===t)return x()})),b.push(new c("Choose predictive coverages",new r({tag:"st-dcm-wiz-predictive-coverages",scope:y}),null,!0,null,function(t){if(void 0===t)return x()})),b.push(new c("Choose events to predict",new r({tag:"st-dcm-wiz-events",scope:y}),null,!0,null,function(t){if(void 0===t)return x()})),b.push(new c("Define spatial extent",new r({tag:"st-dcm-wiz-spatial-bounds",scope:y}),null,!1,function(){m.setSource(a.getBoxSource(y.prediction.bounds)),s.addLayer(v),y.$watchCollection("prediction.bounds",function(t){m.setSource(a.getBoxSource(t))}),y.eventBtnActive=!1,y.mapExtentBtnActive=!1,y.drawBtnActive=!1,y.boundWiz||(y.boundWiz={drawing:!1,setEventBounds:function(){y.eventBtnActive=!0,y.mapExtentBtnActive=y.drawBtnActive=!1;var t=y.prediction.events,r={layerName:t.Name,workspace:t.workspace.name,namespace:t.workspace.namespace};h.buildAndSubmit("bounds",r,{httpConfig:{responseType:"text"}}).then(function(t){var r=e.boundsFromXMLString(t);y.prediction.bounds={minLon:r[0],minLat:r[1],maxLon:r[2],maxLat:r[3]},y.prediction.geometry=n.bboxToPolygon(r),m.setSource(a.getBoxSource(y.prediction.bounds))},function(t){p.error("Could not get events bounds. More details: "+t)})},setMapExtent:function(){y.eventBtnActive=y.drawBtnActive=!1,y.mapExtentBtnActive=!0,y.prediction.bounds=a.parseBounds(s.getExtent()),y.prediction.geometry=n.bboxToPolygon(a.boundsToArray(y.prediction.bounds)),m.setSource(a.getBoxSource(y.prediction.bounds))},drawExtent:function(){y.eventBtnActive=y.mapExtentBtnActive=!1,y.boundWiz.drawing=y.drawBtnActive=!0,f.hideFooter(),s.addInteraction(g)}}),y.dragBoxListenerKey=g.on("boxend",function(){y.$apply(function(){y.prediction.bounds=a.parseBounds(g.getGeometry().getExtent()),y.prediction.geometry=n.bboxToPolygon(a.boundsToArray(y.prediction.bounds)),m.setSource(a.getBoxSource(y.prediction.bounds)),s.removeInteraction(g),y.boundWiz.drawing=!1,f.showFooter()})})},function(t){return o(y.dragBoxListenerKey)||(i.Observable.unByKey(y.dragBoxListenerKey),delete y.dragBoxListenerKey),s.removeLayer(v),s.removeInteraction(g),y.boundWiz.drawing=!1,f.showFooter(),!0===t?a.getResolutionRecommendation(y.prediction):void 0===t?x():void 0})),b.push(new c("Output options",new r({tag:"st-dcm-wiz-output-options",scope:y}),null,!0,null,function(t){return!0===t?(a.getCategoryScope(function(t){t.runDcmQuery(y.prediction,"Custom")}),x()):void 0===t?x():void 0}));var _=new u("Spatial Prediction","fa-line-chart","fa-check text-success",b,y,"dcmWizardForm wizard-dark");function x(){y.$destroy()}f.launchWizard(_)}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(29),a=n(23),s=n(2),l=n(18),c=n(14),u=n(4),d=n(134),f=n(3785),p=n(3786),h=n(3787);r.module("stealth.dcm.wizard",["ccri.angular-utils","ccri.area-definition","stealth.core.startmenu","stealth.wizard"]).run(["$rootScope","startMenuManager","explainableWizard",function(t,e,n){e.addButton("Explainable Prediction","fa-line-chart",n.launch),t.$on("dcm.wizard.explainable.launch",function(t,e){n.launch(e.prediction)})}]).service("explainableWizard",["$rootScope","CONFIG","ccri.angular-utils.WidgetDef","ccri.area-definition.FeatureCreator","dcmWizardFunctions","stealth.core.wizard.Step","stealth.core.wizard.Wizard","stealth.dcm.wizard.DcmWizardScope","stealth.wizard.wizardManager","toastr",function(t,e,n,r,a,u,d,f,p,h){this.launch=function(g){var m=new f(t.$new(),g,"explainable"),v=[];m.existingLayerNames=null,a.getExistingLayerNames().then(function(t){m.existingLayerNames=t}),a.getGridLayers().then(function(t){m.gridLayers=t}),a.getRasterLayers().then(function(t){m.rasterLayers=m.rasterLayers.concat(t)}),a.getEventLayers().then(function(t){m.eventLayers=m.eventLayers.concat(t),m.workspaces=a.getWorkspaces(m.eventLayers),c(m.prediction.workspace)&&(m.prediction.workspace=a.getDefaultWorkspace(m.workspaces))});var y=a.getImportCacheLayers();m.eventLayers=m.eventLayers.concat(y),m.prediction.events&&!m.eventLayers.includes(m.prediction.events)&&m.eventLayers.unshift(m.prediction.events);var b=[],w=new r({supportedTools:["bufferFeature"],disableMultiple:!1}),_=m.$new();function x(){w.finish().then(C)}function S(t){var e=o(t,function(t){var e=t.getGeometry();return e instanceof i.geom.Polygon||e instanceof i.geom.MultiPolygon});l(e)?(m.prediction.aoi=b=[],m.prediction.geometry=void 0):(b=e[0],m.prediction.geometry=(new i.format.WKT).writeFeature(b),m.prediction.bounds=a.parseBounds(b.getGeometry().getExtent()),m.prediction.aoi=b,m.prediction.aoi.layerId=s(_,"toolParams.selectedLayer.geoserverId",m.prediction.aoi.layerId))}function C(){m.$destroy()}w.startTool("bufferFeature").then(function(t){_.tool=t}),_.featureCreator=w,w.on("featureschanged",function(){w.getFeatures().then(S)}),v.push(new u("Choose an area of interest",new n({tag:"st-explainable-wiz-ao",scope:_}),null,!1,null,function(t){void 0===t&&x()})),v.push(new u("Choose predictive coverages",new n({tag:"st-explainable-wiz-grid-features",scope:m}),null,!0,null,function(t){void 0===t&&x()})),v.push(new u("Choose events to predict",new n({tag:"st-dcm-wiz-events",scope:m}),null,!0,null,function(t){void 0===t&&x()})),v.push(new u("Output options",new n({tag:"st-explainable-wiz-options",scope:m}),null,!0,null,function(t){!0===t?(a.getCategoryScope(function(t){a.getGemLayer(m.prediction.aoi).then(function(n){c(n)?h.error("Unable to generate explainability."):(m.prediction.keywords+=", "+e.app.context+".click.search.altLayer="+n.Name,t.runDcmQuery(m.prediction,"Explainable").then(function(){t.generatePolygonPredictions({predictionName:m.prediction.name,bounds:m.prediction.bounds,workspace:m.prediction.workspace.name,store:m.prediction.name,polygonLayer:n})}))})}),x()):void 0===t&&x()}));var E=new d("Explainable Prediction","fa-line-chart","fa-check text-success",v,m,"dcmWizardForm wizard-dark");p.launchWizard(E)}}]).directive("stExplainableWizAo",["$q","ccri.area-definition.bufferFeatureStore","owsLayers",function(t,e,n){return{restrict:"E",template:f,link:function(r){var i=r.$on("$destroy",function(){i(),i=null,o.un("propertieschanged",v),o.un("layer_load_start",w),o.un("layer_load_end",_),f=c=null,o=r.tool=null,r.toolParams=r.coordinates=r.layers=r.units=null,r=null}),o=r.tool;r.toolParams={selectedLayer:null,distance:null,selectedUnit:null},r.coordinates=null,r.layers=[],r.layerLoading=!1,o.on("propertieschanged",v),o.on("layer_load_start",w),o.on("layer_load_end",_),r.labelLayer=function(t){return t.name},r.chooseLayer=m;var c=[],f=n.getLayers(["aoi","catalog"]).then(function(t){c=t});h(),f.then(function(){h()});var p=null;function h(){var t=u(c,g);r.layers=d(t,"name"),r.toolParams.selectedLayer?b(r.toolParams.selectedLayer).then(function(t){r.toolParams.selectedLayer=t}):l(r.layers)||(r.toolParams.selectedLayer=r.layers[0]),m()}function g(t){return{name:t.Title,geoserverId:t.Name,KeywordConfig:t.KeywordConfig,features:null}}function m(){y(o.updateProperties({layer:r.toolParams.selectedLayer}))}function v(){y(o.getProperties())}function y(t){r.toolParams.distance=t.distance,r.toolParams.selectedUnit=t.unit,t.layer?(b(t.layer).then(function(t){r.toolParams.selectedLayer=t,r.toolParams.selectedLayer||m()}),p=s(t.layer,"KeywordConfig.capability.buffer.field.name","name")):p=null,t.selectedFeatureProps?r.selectedFeatureName=t.selectedFeatureProps[p]||"unknown":r.selectedFeatureName=null,r.coordinates=o.getCoordinates()}function b(e){return t(function(t){t(f.then(function(){return a(r.layers,"geoserverId",e.geoserverId)}))})}function w(){r.layerLoading=!0}function _(){r.layerLoading=!1}v(),e.layer&&(r.toolParams.selectedLayer=e.layer,m())}}}]).directive("stExplainableWizGridFeatures",function(){return{restrict:"E",template:p}}).directive("stExplainableWizOptions",function(){return{restrict:"E",template:h}})},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="vertically-buffered flex-row flex-align-items-center">\n        <span class="flex-1">\n            Select an area of interest on the map.\n        </span>\n        <span ng-style="{\'visibility\': layerLoading ? \'visible\' : \'hidden\'}">\n            <i class="fa fa-spinner fa-spin fa-lg fa-fw"></i>\n        </span>\n        <st-dcm-wiz-refresh-btn\n            refresh-function="refreshGridLayers()"/>\n        </st-dcm-wiz-refresh-btn>\n    </div>\n    <input type="text" ng-model="prediction.geometry" required style="display:none;">\n    <div class="vertically-buffered flex-row flex-align-items-center" ng-if="prediction.geometry">\n        <span class="field-descriptor">Grid size:</span>\n        <ccri-angular-utils-select\n            class="field-input"\n            ng-model="gridLayerSelected"\n            from-list="gridLayers"\n            label-fn="gridLabelFn"\n            filter-fn="gridFilterFn"\n            placeholder="Select grid size"\n            empty-message="None available"\n            select-disabled="!gridLayers"\n            ccri-angular-utils-change="gridLayerChanged(gridLayerSelected)"\n            required\n        ></ccri-angular-utils-select>\n    </div>\n</ng-form>\n'},function(t,e){t.exports='<div class="vertically-buffered">\n    <span>Choose a set of coverages for the prediction inputs.</span>\n    <st-dcm-wiz-refresh-btn\n        refresh-function="refreshRasterLayers()"/>\n    </st-dcm-wiz-refresh-btn>\n</div>\n<div class="vertically-buffered">\n    <st-dcm-wiz-layer-select\n        deduplicate="true"\n        init-inputs="true"\n        input-layers="prediction.predictiveCoverages"\n        layer-display-attr="Title"\n        layers="filteredRasterLayers"\n        show-layer-features="false"\n    ></st-dcm-wiz-layer-select>\n</div>\n'},function(t,e){t.exports='<ng-form name="wizardForm" class="dcmOptions">\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Prediction Name:</span>\n        <input class="field-input"\n               name="predictionName"\n               type="text"\n               ng-model="prediction.name"\n               required\n               unique-prediction-layer\n               prohibited-names="existingLayerNames"\n               placeholder="Enter name"\n        >\n    </div>\n    <div ng-if="wizardForm.predictionName.$error.uniqueName" class="layerUniquenessError">\n        That layer name is already taken. Please try again.\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Prediction Description:</span>\n        <input class="field-input"\n               type="text"\n               ng-model="prediction.description"\n               placeholder="Enter description"\n        >\n    </div>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(21),o=n(109),a=n(22),s=n(14);r.module("stealth.dcm.wizard",["ccri.angular-utils","stealth.wizard"]).service("threatSurfaceWizard",["$rootScope","ccri.angular-utils.WidgetDef","dcmWizardFunctions","owsLayers","stealth.core.wizard.Step","stealth.core.wizard.Wizard","stealth.wizard.wizardManager",function(t,e,n,l,c,u,d){this.launch=function(f){var p=t.$new(),h=[],g=["dcm","prediction"];"Explainable"===f?g.push("explainable"):g.push("custom"),p.addThreatSurface=function(t){n.getCategoryScope(function(e){var n=e.addThreatSurface(f,t);n&&d.closeWizard(!0)})},p.categoryName=f,p.getThreatSurfaces=function(t){p.threatSurfaces=[],s(t)&&(t=!1);return l.getLayers(g,t).then(function(t){a(t,function(t){var e=o(t);try{e.metadata=r.fromJson(e.Abstract),e.metadata.date=i.utc(e.metadata.date).format("llll")}catch(t){e.metadata={}}p.threatSurfaces.push(e)})})},p.getThreatSurfaces(!1),h.push(new c("Choose Spatial Prediction",new e({tag:"st-dcm-wiz-threat-surfaces",scope:p}),null,!1,null,function(){p.$destroy()}));var m=new u("Add Spatial Prediction","fa-bar-chart","fa-check text-success",h,p,"dcmImportForm wizard-dark");d.launchWizard(m)}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(684),a=n(109),s=n(629),l=n(22),c=n(29),u=n(23),d=n(150),f=n(2),p=n(34),h=n(14),g=n(4),m=n(334),v=n(134),y=n(3790),b=n(3791),w=n(3792),_=n(3793),x=n(3794),S=n(3795),C=n(3796),E=n(3797);r.module("stealth.dcm.wizard",["ccri.angular-utils","stealth.wizard"]).service("dcmWizardFunctions",["$filter","$log","$q","CONFIG","ImportCache","owsLayers","user","wfs","wps",function(t,e,n,l,p,m,y,b,w){var _,x=this,S=n.defer(),C=["dcm","events"],E=["aoi","gems"],T=["aoi","grids"],M=["dcm","raster"],k=["dcm","vector"];this.initPrediction=function(t,e){var n=e.toLowerCase();return(t=s({},f(l.dcm[n],"prediction",{}),t)).keywords.push("routeanalysis.data.Spatial Predictions"),t.keywords.push("dcm.prediction."+n),t.keywords=g(t.keywords,function(t){return l.app.context+"."+t}).join(", "),t},this.setCategoryScope=function(t){_=t,S.resolve()},this.getCategoryScope=function(t){S.promise.then(function(){t(_)})},this.getFeatureTypeDescription=function(t){b.getFeatureTypeDescription(l.geoserver.defaultUrl,t.Name).then(function(e){r.isString(e)&&-1!==e.indexOf("Exception")?t.featureTypeDescription="unavailable":t.featureTypeDescription=e}),b.getDefaultGeometryFieldName(l.geoserver.defaultUrl,t.Name,!0).then(function(e){r.isString(e)&&-1!==e.indexOf("Exception")?t.defaultGeomFieldName="Unavailable":t.defaultGeomFieldName=e})},this.parseBounds=function(e){var n=t("number"),r=g(e,function(t){return parseFloat(n(t,4))});return{minLon:r[0]<-180?-180:r[0],minLat:r[1]<-90?-90:r[1],maxLon:r[2]>180?180:r[2],maxLat:r[3]>90?90:r[3]}},this.boundsToArray=function(t){return[t.minLon,t.minLat,t.maxLon,t.maxLat]},this.getBoxSource=function(t){return new i.source.Vector({features:[new i.Feature({geometry:new i.geom.Polygon([[[t.minLon,t.minLat],[t.maxLon,t.minLat],[t.maxLon,t.maxLat],[t.minLon,t.maxLat],[t.minLon,t.minLat]]])})],wrapX:!1})},this.getLayerWorkspace=function(t){var e=t.Name.substring(0,t.Name.indexOf(":"));return{name:e,namespace:f(l,"dcm.namespacePrefix","")+e}},this.getExistingLayerNames=function(t){return h(t)&&(t=!1),m.getLayers(["dcm","prediction"],t).then(function(t){return g(t,function(t){return t.Title})})},this.getGemLayer=function(t,n){h(n)&&(n=!1);var r=f(t,"layerId","")+":"+t.get("aoiId");return m.getLayers(E,n).then(function(t){e.debug("owsLayers.getLayers()");var n=g(t,function(t){var e=a(t);return e.derivedLayers=[],e.cql_filter=null,e.workspace=x.getLayerWorkspace(e),e});return u(n,function(t){return f(t,"KeywordConfig.aoi.container")===r})})},this.getGridLayers=function(t){return h(t)&&(t=!1),m.getLayers(T,t).then(function(t){return e.debug("owsLayers.getLayers()"),n.all(g(t,function(t){var e=t.Title,n=x.getLayerWorkspace(t).name;return b.getFeature(l.geoserver.defaultUrl,t.Name).then(function(t){var r=f(t,"data.features",[]);return g(r,function(t){return t.workspace=n,t.layer=e,t})})})).then(function(t){return d(t)})})},this.getVectorLayers=function(t){return h(t)&&(t=!1),m.getLayers(k,t).then(function(t){return e.debug("owsLayers.getLayers()"),g(t,function(t){var e=a(t);return e.derivedLayers=[],e.cql_filter=null,e.showAttributes=!1,e.workspace=x.getLayerWorkspace(e),x.getFeatureTypeDescription(e),e})})},this.getRasterLayers=function(t){return h(t)&&(t=!1),m.getLayers(M,t).then(function(t){return e.debug("owsLayers.getLayers()"),g(t,function(t){var e=a(t);return e.derivedLayers=[],e.cql_filter=null,e.workspace=x.getLayerWorkspace(e),e.ticked=!0,e})})},this.getEventLayers=function(t){return h(t)&&(t=!1),m.getLayers(C,t).then(function(t){e.debug("owsLayers.getLayers()");var n=g(t,function(t){var e=a(t);return e.derivedLayers=[],e.cql_filter=null,e.workspace=x.getLayerWorkspace(e),e.queryable?(x.getFeatureTypeDescription(e),e):void 0});return c(n,function(t){return!h(t)})})},this.getImportCacheLayers=function(){var t=new i.format.GeoJSON;return g(p.getLayers(),function(e){var n=t.writeFeaturesObject(e.getSource().getFeatures(),{dataProjection:"EPSG:4326"}),r=t.readProjection(e);return n.crs={type:"name",properties:{name:r.getCode()}},{Name:e.name,Title:e.name,derivedLayers:[],cql_filter:null,showAttributes:!1,featureTypeDescription:"unavailable",isImportCacheLayer:!0,geoJSON:JSON.stringify(n)}})},this.getWorkspaces=function(t){var e=g(c(t,function(t){return!t.serverUrl||t.serverUrl===l.geoserver.defaultUrl}),function(t){return t.workspace});return y.getCn()&&"Anonymous"!==y.getCn()&&e.push(y.getStrippedCn()),v(o.array.uniq(e),"name")},this.getDefaultWorkspace=function(t){if(y.getCn()&&"Anonymous"!==y.getCn()){var e=u(t,function(t){return t.name===y.getStrippedCn()});return e?t[t.indexOf(e)]:t[t.length-1]}return t[0]||void 0},this.getResolutionRecommendation=function(t){var e={crs:t.CRS,minX:t.bounds.minLon,minY:t.bounds.minLat,maxX:t.bounds.maxLon,maxY:t.bounds.maxLat};return w.buildAndSubmit("resolutionRecommendation",e,{httpConfig:{responseType:"text"}}).then(function(e){var n=e.split(",");t.width=n[0].trim(),t.height=n[1].trim()})}}]).factory("stealth.dcm.wizard.DcmWizardScope",["CONFIG","dcmWizardFunctions","toastr",function(t,e,n){return function(i,o,a){i.allLayerNames=[],i.eventLayers=[],i.filteredRasterLayers=[],i.gridLayers=[],i.rasterLayers=[],i.vectorLayers=[],i.vectorLayersSelected=[],i.workspaces=[],i.labelFn=function(t){return t?t.name:t},i.eventsLabelFn=function(t){return t.Title},i.gridLabelFn=function(t){var e=f(t.properties,"nominalSizeMeters");return e?e+" meters":t.id},i.gridFilterFn=function(t){if(i.prediction.aoi){var e=i.prediction.aoi.get("aoiId"),n=f(t.properties,"aoiId");if(e&&n&&e!==n)return!1}return!0},i.gridLayerChanged=function(t){var e,n=f(t,"workspace"),r=f(t,"layer"),o=f(t,"properties.gridId"),a=n+":"+r+":"+o;i.gridLayerSelected=t,i.prediction.width=f(t,"properties.numCols",300),i.prediction.height=f(t,"properties.numRows",300),i.filteredRasterLayers=c(i.rasterLayers,function(t){return!((e=f(t.KeywordConfig.dcm.raster,"grid"))&&n&&r&&o&&e!==a)})},i.outputTypes=[{name:"tiff",output:"image/tiff"},{name:"arcgrid",output:"application/arcgrid"}],i.srsHandlingOptions=[{name:"None",projectionPolicy:"NONE"},{name:"Force Declared",projectionPolicy:"FORCE_DECLARED"},{name:"Reproject to Declared",projectionPolicy:"REPROJECT_TO_DECLARED"}],i.addToPredictiveFeatures=function(t){i.prediction.predictiveFeatures=i.prediction.predictiveFeatures.concat(r.copy(t)),i.prediction.predictiveFeatures.sort(function(t,e){return t.Name>e.Name?1:t.Name<e.Name?-1:0})},i.removeFromPredictiveFeatures=function(t){i.prediction.predictiveFeatures.splice(t,1),i.vectorLayers.sort(function(t,e){return t.Name>e.Name?1:t.Name<e.Name?-1:0})},i.checkDuplicateName=function(t){u(i.allLayerNames,function(e){return e===t})&&n.error("A layer with the name '"+t+"' already exists. Please choose another name.")},i.refreshVectorLayers=function(){return e.getVectorLayers(!0).then(function(t){i.vectorLayers=t})},i.refreshGridLayers=function(){return e.getGridLayers(!0).then(function(t){i.gridLayers=t})},i.refreshRasterLayers=function(){return e.getRasterLayers(!0).then(function(t){i.rasterLayers=t,"explainable"===a.toLowerCase()&&i.gridLayerChanged(i.gridLayerSelected)})},i.refreshEventLayers=function(){return e.getEventLayers(!0).then(function(t){i.eventLayers=e.getImportCacheLayers(),i.eventLayers=i.eventLayers.concat(t),i.workspaces=e.getWorkspaces(i.eventLayers),i.prediction.workspace=e.getDefaultWorkspace(i.workspaces)})},i.prediction={predictiveFeatures:[],predictiveCoverages:[],events:void 0,geometry:null,width:300,height:300,sampleRatio:10,CRS:"EPSG:4326",featureSelection:!0,outputType:i.outputTypes[0],workspace:e.getDefaultWorkspace([]),srsHandling:i.srsHandlingOptions[0],sldTemplate:"threat_palette_multi_band",keywords:[],bounds:{minLon:-180,minLat:-90,maxLon:180,maxLat:90},name:""};var l=a.toLowerCase(),d=f(t.dcm[l],"prediction",{});return i.prediction=s(o||{},d,i.prediction),i.prediction.keywords=i.prediction.keywords.concat(["routeanalysis.data.Spatial Predictions","dcm.prediction."+l]),i.prediction.keywords=g(i.prediction.keywords,function(e){return t.app.context+"."+e}).join(", "),i}}]).directive("stDcmWizPredictiveFeatures",function(){return{restrict:"E",template:x}}).directive("stDcmWizThreatSurfaces",function(){return{restrict:"E",template:E}}).directive("stDcmWizPredictiveCoverages",function(){return{restrict:"E",template:_}}).directive("stDcmWizEvents",function(){return{restrict:"E",template:y}}).directive("stDcmWizSpatialBounds",function(){return{restrict:"E",template:C}}).directive("stDcmWizOutputOptions",function(){return{restrict:"E",template:w}}).directive("stDcmWizRefreshBtn",["$q",function(t){return{restrict:"E",scope:{refreshFunction:"&"},template:S,link:function(e){function n(){e.loading=!1}e.loading=!1,e.refresh=function(){p(e.refreshFunction)&&(e.loading=!0,t.when(e.refreshFunction(),n,n))}}}}]).directive("uniquePredictionLayer",function(){return{restrict:"AE",require:"ngModel",scope:{prohibitedNames:"="},link:function(t,e,n,r){r.$validators.uniqueName=function(e){return!u(t.prohibitedNames,function(t){return t===e})}}}}).directive("stDcmWizLayerSelect",function(){return{restrict:"E",scope:{deduplicate:"=",initInputs:"=",inputLayers:"=",layerDisplayAttr:"@",layers:"=",showLayerFeatures:"="},template:b,link:function(t){t.addToInputs=function(e){t.deduplicate?l(e,function(e){var n=u(t.inputLayers,function(t){return t.Name===e.Name});h(n)&&t.inputLayers.push(r.copy(e))}):t.inputLayers=t.inputLayers.concat(r.copy(e));t.layerDisplayAttr&&(t.inputLayers=v(t.inputLayers,t.layerDisplayAttr))},t.removeFromInputs=function(e){m(t.inputLayers,e)},t.layerDisplayAttr&&(t.layers=v(t.layers,t.layerDisplayAttr)),t.initInputs&&(t.inputLayers=r.copy(t.layers))}}})},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="vertically-buffered">\n        <span>Choose a set of events for the prediction inputs.</span>\n        <st-dcm-wiz-refresh-btn\n            refresh-function="refreshEventLayers()"/>\n        </st-dcm-wiz-refresh-btn>\n    </div>\n    <div class="flex-row flex-align-items-center vertically-buffered">\n        <span class="field-descriptor">Events:</span>\n        <span class="flex-1">\n            <ccri-angular-utils-select\n                ng-model="prediction.events"\n                from-list="eventLayers"\n                label-fn="eventsLabelFn"\n                placeholder="Select events layer"\n                empty-message="None available"\n                select-disabled="!eventLayers"\n                required\n            ></ccri-angular-utils-select>\n        </span>\n    </div>\n    <div ng-if="prediction.events" class="flex-row vertically-buffered">\n        <span class="field-descriptor">Properties:</span>\n        <span class="flex-1">\n            <div ng-switch="prediction.events.featureTypeDescription">\n                <div ng-switch-when="unavailable" class="alert alert-warning">\n                    <i class="fa fa-warning"></i> There is no feature type description for this layer.\n                </div>\n                <div ng-switch-default>\n                    <section ng-repeat="featureType in prediction.events.featureTypeDescription.featureTypes">\n                        <div class="section-boxed-bottom" style="padding:4px;border-radius:4px;">\n                            <table class="table-condensed">\n                                <tr ng-repeat="property in featureType.properties">\n                                    <td>{{property.name}}</td>\n                                    <td><code>{{property.localType}}</code></td>\n                                </tr>\n                            </table>\n                        </div>\n                    </section>\n                </div>\n            </div>\n        </span>\n    </div>\n    <div ng-if="prediction.events && prediction.events.featureTypeDescription !== \'unavailable\'"\n         class="flex-row flex-align-items-center vertically-buffered">\n        <span class="field-descriptor">CQL Filter:</span>\n        <span class="flex-1">\n            <ccri-angular-utils-typeahead\n                ng-model="prediction.events.cql_filter"\n                memory-num="5"\n                localstorage-prefix="{{prediction.events.Title}}.cql"\n                localstorage-prefix-watch\n                placeholder="CQL filter"\n                typeahead-editable="true"\n            ></ccri-angular-utils-typeahead>\n        </span>\n    </div>\n</ng-form>\n'},function(t,e){t.exports='<div class="flex-row" style="min-height:200px;">\n    <select multiple\n            class="form-control"\n            style="flex-basis:30%;"\n            ng-model="layersSelected"\n            ng-options="layer[layerDisplayAttr] for layer in layers">\n    </select>\n    <div class="btn-group-vertical" role="group">\n        <button class="btn btn-default"\n                ng-disabled="layersSelected.length == 0"\n                ng-click="addToInputs(layersSelected)"\n                uib-tooltip="Add selected features" tooltip-class="nowrap"\n                tooltip-placement="top-left" tooltip-animation="false" tooltip-popup-delay="500"\n                tooltip-trigger="mouseenter">\n            <i class="fa fa-angle-double-right"></i>\n        </button>\n    </div>\n    <div class="flex-1" style="min-width:300px;">\n        <div ng-repeat="inputLayer in inputLayers"\n             style="margin-bottom:5px;">\n            <div class="flex-row btn-group btn-group-sm" role="group" aria-label="...">\n                <div class="btn btn-default closebtn text-danger-hover"\n                     ng-click="removeFromInputs(inputLayer)"\n                     ng-style="{\'background-color\': showLayerFeatures && inputLayers[$index].showAttributes ? \'black\' : \'#222222\'}">\n                    <i class="fa fa-close"></i>\n                </div>\n                <button class="flex-1 btn layerNameButton"\n                        ng-click="inputLayers[$index].showAttributes = !inputLayers[$index].showAttributes"\n                        ng-style="{\'background-color\': showLayerFeatures && inputLayers[$index].showAttributes ? \'black\' : \'#222222\', \'cursor\': showLayerFeatures ? \'pointer\' : \'default\'}">\n                    {{::inputLayer[layerDisplayAttr] | characters:50:true}}\n                    <span ng-if="showLayerFeatures" class="pull-right">\n                        <i class="fa fa-fw fa-caret-right"\n                           ng-class="inputLayers[$index].showAttributes ? \'fa-caret-down\' : \'fa-caret-right\'"\n                        ></i>\n                    </span>\n                </button>\n            </div>\n            <div ng-if="showLayerFeatures">\n                <div ng-switch="inputLayer.featureTypeDescription"\n                     ng-show="inputLayers[$index].showAttributes">\n                    <div ng-switch-when="unavailable" class="alert alert-warning">\n                        <i class="fa fa-warning"></i> There is no feature type description for this layer.\n                    </div>\n                    <div ng-switch-default>\n                        <section ng-class="{\'ng-hide\': inputLayer.featureTypeDescription === \'unavailable\'}"\n                                 ng-repeat="featureType in inputLayer.featureTypeDescription.featureTypes">\n                            <div class="section-boxed-bottom">\n                                <table class="table-condensed">\n                                    <tr ng-repeat="property in featureType.properties">\n                                        <td>{{::property.name}}</td>\n                                        <td><code>{{::property.localType}}</code></td>\n                                    </tr>\n                                </table>\n                            </div>\n                        </section>\n                        <ccri-angular-utils-typeahead\n                            ng-model="inputLayers[$index].cql_filter"\n                            memory-num="5"\n                            localstorage-prefix="{{::inputLayers[$index][layerDisplayAttr]}}.cql"\n                            placeholder="CQL filter"\n                            typeahead-editable="true"\n                        ></ccri-angular-utils-typeahead>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div ng-if="inputLayers.length === 0"\n             style="padding:10px 0;">\n             No predictive features selected.\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<ng-form name="wizardForm" class="dcmOptions">\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Width:</span>\n        <input class="field-input" type="text" ng-model="prediction.width" required>\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Height:</span>\n        <input class="field-input" type="text" ng-model="prediction.height" required>\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Sample Ratio:</span>\n        <input class="field-input" type="text" ng-model="prediction.sampleRatio" required>\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Coordinate Reference System:</span>\n        <input class="field-input" type="text" ng-model="prediction.CRS" required>\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Output Type:</span>\n        <ccri-angular-utils-select\n            class="field-input"\n            from-list="outputTypes"\n            ng-model="prediction.outputType"\n            label-fn="labelFn"\n            required\n        ></ccri-angular-utils-select>\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Workspace to import into:</span>\n        <ccri-angular-utils-select\n            class="field-input"\n            from-list="workspaces"\n            ng-model="prediction.workspace"\n            label-fn="labelFn"\n            required\n        ></ccri-angular-utils-select>\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">SRS Handling:</span>\n        <ccri-angular-utils-select\n            class="field-input"\n            from-list="srsHandlingOptions"\n            ng-model="prediction.srsHandling"\n            label-fn="labelFn"\n            required\n        ></ccri-angular-utils-select>\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Prediction Name:</span>\n        <input class="field-input"\n               name="predictionName"\n               type="text"\n               ng-model="prediction.name"\n               required\n               unique-prediction-layer\n               prohibited-names="existingLayerNames"\n               placeholder="Enter name"\n        >\n    </div>\n    <div ng-if="wizardForm.predictionName.$error.uniqueName" class="layerUniquenessError">\n        That layer name is already taken. Please try again.\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Prediction Description:</span>\n        <input class="field-input"\n               type="text"\n               ng-model="prediction.description"\n               placeholder="Enter description"\n        >\n    </div>\n    <div class="flex-row flex-justify-content-flex-end flex-align-items-center buf-sm-mt">\n        <span class="field-descriptor">Feature Selection:</span>\n        <span class="field-input">\n            <span class="icon-btn"\n                  ng-click="prediction.featureSelection = !prediction.featureSelection">\n                <i class="fa fa-check-square-o"\n                   ng-class="prediction.featureSelection ? \'fa-check-square-o\' : \'fa-square-o\'"\n                ></i>\n            </span>\n        </span>\n    </div>\n</ng-form>\n'},function(t,e){t.exports='<div class="vertically-buffered">\n    <span>Choose a set of coverages for the prediction inputs.</span>\n    <st-dcm-wiz-refresh-btn\n        refresh-function="refreshRasterLayers()"/>\n    </st-dcm-wiz-refresh-btn>\n</div>\n<div class="vertically-buffered">\n    <st-dcm-wiz-layer-select\n        deduplicate="true"\n        init-inputs="true"\n        input-layers="prediction.predictiveCoverages"\n        layer-display-attr="Title"\n        layers="rasterLayers"\n        show-layer-features="false"\n    ></st-dcm-wiz-layer-select>\n</div>\n'},function(t,e){t.exports='<div class="vertically-buffered">\n    <span>Choose a set of predictive features for the prediction inputs.</span>\n    <st-dcm-wiz-refresh-btn\n        refresh-function="refreshVectorLayers()"/>\n    </st-dcm-wiz-refresh-btn>\n</div>\n<div class="vertically-buffered" style="min-height:200px;">\n    <st-dcm-wiz-layer-select\n        deduplicate="false"\n        input-layers="prediction.predictiveFeatures"\n        layer-display-attr="Title"\n        layers="vectorLayers"\n        show-layer-features="true"\n    ></st-dcm-wiz-layer-select>\n</div>\n'},function(t,e){t.exports='<span class="pull-right control-btn clickable"\n      ng-click="refresh()"\n      uib-tooltip="Refresh options" tooltip-class="nowrap"\n      tooltip-placement="top-right" tooltip-animation="false"\n      tooltip-popup-delay="500" tooltip-trigger="mouseenter"\n      style="padding: 0 2px;margin-left:10px;">\n        <i class="fa fa-refresh" ng-class="{\'fa-spin\': loading}"></i>\n</span>\n'},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="vertically-buffered">\n        Enter spatial bounds.\n    </div>\n    <div ng-hide="boundWiz.drawing">\n        <div class="vertically-buffered extent-form">\n            <div style="text-align:center;">\n                N\n                <input type="number" ccri-area-definition-decimal-input="" ng-model="prediction.bounds.maxLat" required>\n            </div>\n            <div class="flex-row flex-justify-content-space-between" style="padding:2px 8px;">\n                <div>\n                    W\n                    <input type="number" ccri-area-definition-decimal-input="" ng-model="prediction.bounds.minLon" required>\n                </div>\n                <div>\n                    E\n                    <input type="number" ccri-area-definition-decimal-input="" ng-model="prediction.bounds.maxLon" required>\n                </div>\n            </div>\n            <div style="text-align:center;">\n                S\n                <input type="number" ccri-area-definition-decimal-input="" ng-model="prediction.bounds.minLat" required>\n            </div>\n        </div>\n        <div class="vertically-buffered flex-row">\n            <div class="btn btn-sm text-btn"\n                 ng-click="boundWiz.setEventBounds()"\n                 ng-class="{\'active\': eventBtnActive}">\n                Use Event Bounds\n            </div>\n            <div class="btn btn-sm text-btn"\n                 ng-click="boundWiz.setMapExtent()"\n                 ng-class="{\'active\': mapExtentBtnActive}">\n                Use Map Extent\n            </div>\n            <div class="btn btn-sm text-btn"\n                 ng-click="boundWiz.drawExtent()"\n                 ng-class="{\'active\': drawBtnActive}">\n                Draw Bounds\n            </div>\n        </div>\n    </div>\n    <div ng-hide="!boundWiz.drawing">\n        Click and drag on the map to draw bounding box.\n    </div>\n</ng-form>\n'},function(t,e){t.exports='<div class="vertically-buffered">\n    <span>Select Spatial Prediction to add to the map.</span>\n    <st-dcm-wiz-refresh-btn\n        refresh-function="getThreatSurfaces(true)"/>\n    </st-dcm-wiz-refresh-btn>\n</div>\n<table class="importTable">\n    <tr>\n        <th>Prediction Name</th>\n        <th>Description</th>\n        <th>Created</th>\n        <th>Add to Map</th>\n    </tr>\n    <tr ng-repeat="threatSurface in threatSurfaces">\n        <td class="ellipsis"\n            ccri-angular-utils-tooltip-overflow\n            uib-tooltip="{{::threatSurface.Title}}" tooltip-class="wrap"\n            tooltip-placement="top-left" tooltip-animation="true" tooltip-popup-delay="500"\n            tooltip-trigger="mouseenter" tooltip-append-to-body="true"\n            tooltip-enable="false">\n            {{::threatSurface.Title}}\n        </td>\n        <td class="ellipsis"\n            ccri-angular-utils-tooltip-overflow\n            uib-tooltip="{{::threatSurface.metadata.description}}" tooltip-class="wrap"\n            tooltip-placement="top-left" tooltip-animation="true" tooltip-popup-delay="500"\n            tooltip-trigger="mouseenter" tooltip-append-to-body="true"\n            tooltip-enable="false">\n            {{::threatSurface.metadata.description}}\n        </td>\n        <td>{{::threatSurface.metadata.date}}</td>\n        <td style="text-align:center;">\n            <div class="icon-btn action-btn" ng-click="addThreatSurface(threatSurface)">\n                <i class="fa fa-plus"></i>\n            </div>\n        </td>\n    </tr>\n</table>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3799),o=n(3804),a=n(3805),s=n(3808),l=n(3846),c=n(3849),u=n(3852),d=n(686);r.module("stealth.dragonfish",["ccri.angular-utils","ccri.list-view","stealth.core.geo.analysis.category","stealth.core.geo.ol3.layers","stealth.core.geo.ol3.manager","stealth.core.geo.ol3.overlays","stealth.core.sidebar",i.stealthDragonfishDisplay,o.stealthDragonfishEnrich,a.stealthDragonfishGeoOL3Layers,s.stealthDragonfishGroups,l.stealthDragonfishLepton,c.stealthDragonfishResults,u.stealthDragonfishSimilarity,d.stealthDragonfishUtils])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3800),o=n(1226);e.DisplayService=o.DisplayService;var a=n(3801);e.DisplayServiceManager=a.DisplayServiceManager;var s=n(3802);e.stealthDragonfishDisplay="stealth.dragonfish.display",r.module(e.stealthDragonfishDisplay,[]).service("stealth.dragonfish.display.DisplayServiceManager",a.DisplayServiceManager).directive("stDfDisplayIframe",s.DisplayDirective).run(i.$run)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(22),i=function(t,e){e.initListener(),r(e.displayServices,function(e){t.addCapabilitiesExtender(e.addCapability)})};e.$run=i,i.$inject=["coreCapabilitiesExtender","stealth.dragonfish.display.DisplayServiceManager"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(349),i=n(23),o=n(14),a=n(4),s=n(15),l=n(1226),c=function(){function t(t){var e=this;this.displayRegistry=t,this.initListener=function(){e.displayRegistry.addListener("display.active",function(t){var n=i(e.displayServices,["displayId",t.id]);o(n)||(e.id=t.id,e.url=n.url)})};var n=s.config.get("display.configs",[]);this.displayServices=[],this.displays=s.config.get("dragonfish.displays"),a(this.displays,function(t){if(i(n,{id:t.id})){var o=i(n,{id:t.id}),a=r(t,o);e.displayServices.push(new l.DisplayService(e.displayRegistry,a))}})}return t.$inject=["stealth.display.registry"],t}();e.DisplayServiceManager=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3803);function i(t){return{restrict:"E",template:r,link:function(e,n){e.id=t.id,n.find("iframe").attr("src",t.url)}}}i.$inject=["stealth.dragonfish.display.DisplayServiceManager"],e.DisplayDirective=i},function(t,e){t.exports='<iframe\n    style="height:100%;width:100%;border:none;background-color:#0c0c0c;"\n    id="stealth-dragonfish-display-iframe-{{::id}}"\n></iframe>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(54);e.stealthDragonfishEnrich="stealth.dragonfish.enrich",r.module(e.stealthDragonfishEnrich).constant("stealth.dragonfish.enrich.Constant",{enrichmentType:"application/vnd.aggregate",endpoint:{enrich:{key:"crusher.enrich.enrichEntitiesUrl",url:"/enrich/"}}}).service("stealth.dragonfish.enrich.enrichService",["$http","CONFIG","stealth.dragonfish.enrich.Constant","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.errorHandling",function(t,e,n,r,o){this.getEnrichedEntities=function(e,a){a||(a=n.enrichmentType);var s=i.getUrl(n.endpoint.enrich,r.baseUrl);return t.post(s,{ids:e},{headers:{Accept:a}}).then(function(t){return t.data},o.error("Failed to enrich entities."))}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(338),o=n(2),a=n(6),s=n(3806),l=n(3807);e.stealthDragonfishGeoOL3Layers="stealth.dragonfish.geo.ol3.layers",r.module(e.stealthDragonfishGeoOL3Layers).constant("stealth.dragonfish.geo.ol3.layers.EntityConstant",{chipStyle:{stroke:{color:"#E1DA55",width:2}},lowScoreChipStyle:{stroke:{color:"#DAA07A",width:2}},pinStyle:{text:{text:"",font:"normal 26px CcriIcon",textBaseline:"bottom",fill:{color:"#E1DA55"},stroke:{color:"black",width:1}}},originPinStyle:{text:{text:"",font:"normal 26px CcriIcon",textBaseline:"bottom",fill:{color:"#84B3DD"},stroke:{color:"black",width:1}}},groupChipStyle:function(){var t=new a.style.Style;return function(e,n){var r="urn:ccri:innessDeleted"===e.get("innessStatus");if(n.showDeleted!==r)return t;var i=e.get("color");return new a.style.Style({stroke:new a.style.Stroke({color:i,width:2})})}},groupPinStyle:function(){var t=new a.style.Style;return function(e,n){var r="urn:ccri:innessDeleted"===e.get("innessStatus");return n.showDeleted!==r?t:new a.style.Style({text:new a.style.Text({text:"",font:"normal 26px CcriIcon",textBaseline:"bottom",fill:new a.style.Fill({color:e.get("color")}),stroke:new a.style.Stroke({color:"black",width:1})})})}},resolutionThresholds:{min:1e-4,max:4e-5},styleByThreshold:!1,showPins:!0}).service("stealth.dragonfish.geo.ol3.layers.styler",["stealth.dragonfish.geo.ol3.layers.configEntityStyle",function(t){var e=this,n=t.chipStyle,r=t.lowScoreChipStyle,o=t.pinStyle,s=t.originPinStyle,l=new a.style.Style,c=function(e,i){return t.styleByThreshold?e>=i+Math.abs(1-i)/2?n:r:n};this.getColorByScore=function(t,e){var n;t<e?n={display:"none"}:n={color:t>=e+Math.abs(1-e)/2?"#ff0000":"#ffa07a"};return n},this.curryableStyleFunction=function(e,n,r){var i=n.get(e.filterField),a=e.filterFieldCutoff;return n.get("id")===e.originId?[s]:i<a?[l]:r>t.resolutionThresholdsMin&&t.showPins?[o]:r>t.resolutionThresholdsMax&&t.showPins?[o,c(i,a)]:[c(i,a)]},this.curriedStyleFunction=function(t){return i(e.curryableStyleFunction)(t)},this.groupCurryableStyleFunction=function(e,n,r){return r>t.resolutionThresholdsMin?[t.groupPinStyle()(n,e)]:r>t.resolutionThresholdsMax?[t.groupPinStyle()(n,e),t.groupChipStyle()(n,e)]:[t.groupChipStyle()(n,e)]},this.groupCurriedStyleFunction=function(t){return i(e.groupCurryableStyleFunction)(t)}}]).directive("stDfEntityLayerStyleView",["$log",function(t){return t.debug("stealth.dragonfish.geo.ol3.layers.stDfEntityLayerStyleView: directive defined"),{template:s}}]).directive("stDfGroupLayerStyleView",["$log",function(t){return t.debug("stealth.dragonfish.geo.ol3.layers.stDfGroupLayerStyleViewdirective defined"),{template:l}}]).service("stealth.dragonfish.geo.ol3.layers.configEntityStyle",["CONFIG","ol3Styles","stealth.dragonfish.geo.ol3.layers.EntityConstant",function(t,e,n){var r=o(t,"dragonfish.chipStyle",n.chipStyle),i=o(t,"dragonfish.lowScoreChipStyle",n.lowScoreChipStyle),a=o(t,"dragonfish.pinStyle",n.pinStyle),s=o(t,"dragonfish.originPinStyle",n.originPinStyle);this.chipStyle=e.styleFromConfig(r),this.lowScoreChipStyle=e.styleFromConfig(i),this.pinStyle=e.styleFromConfig(a),this.originPinStyle=e.styleFromConfig(s),this.groupChipStyle=n.groupChipStyle,this.groupPinStyle=n.groupPinStyle,this.resolutionThresholdsMax=o(t,"dragonfish.resolutionThresholds.max",n.resolutionThresholds.max),this.resolutionThresholdsMin=o(t,"dragonfish.resolutionThresholds.min",n.resolutionThresholds.min),this.styleByThreshold=o(t,"dragonfish.styleByThreshold",n.styleByThreshold),this.showPins=o(t,"dragonfish.showPins",n.showPins)}])},function(t,e){t.exports='<div class="df-entity-style-tab">\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.visibilityName\'"></ui-include>\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.opacitySlider\'"></ui-include>\n    <div class="opacitySlider flex-row flex-align-items-center layerStyleRow">\n        <div class="rangeSliderStartLabel">Min Score</div>\n        <div class="flex-1 horizontally-buffered">\n            <div ui-slider\n                 ng-model="getViewState().filterFieldCutoff"\n                 min="{{::sliderConfig.min}}"\n                 max="{{::sliderConfig.max}}"\n                 step="{{::sliderConfig.step}}"\n                 ccri-angular-utils-change="updateMap()"\n                 ccri-angular-utils-change-delay="30"\n                 use-decimals\n            ></div>\n        </div>\n        <div class="rangeSliderEndLabel">{{getViewState().filterFieldCutoff.toFixed(2)}}</div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="df-style-tab">\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.visibilityName\'"></ui-include>\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.opacitySlider\'"></ui-include>\n    <div class="colorRow layerStyleRow flex-row flex-align-items-center">\n        <span ng-repeat="(label, color) in colors">\n            <span class="fa fa-lg fa-square clickable colorpickerSquare"\n                  ng-style="{color: color}"\n                  colorpicker colorpicker-position="bottom"\n                  ng-model="color"\n                  ng-change="changePinColors(color, label)"\n                  uib-tooltip="Change pin color" tooltip-class="nowrap"\n                  tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n                  tooltip-trigger="mouseenter" tooltip-append-to-body="true">\n            </span>\n            <span class="df-colorpicker-label">{{label | lodash:\'capitalize\'}}</span>\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(18),o=n(164),a=n(30),s=n(85),l=n(14),c=n(15),u=n(54),d=n(685),f=n(3812),p=n(3824),h=n(3832),g=n(3837);e.stealthDragonfishGroups="stealth.dragonfish.groups",r.module(e.stealthDragonfishGroups,[f.stealthDragonfishEntity,d.stealthDragonfishGroupsCapture,p.stealthDragonfishGroupsEntities,h.stealthDragonfishGroupsWizard]).constant("stealth.dragonfish.groups.Constant",{icon:"fa-th",title:"Groups Manager",panel:{idField:"id",width:275},sort:{options:[{label:"Name",prop:"name"},{label:"Date",prop:"date"},{label:"Owner",prop:"owner"}],fields:["name"],orders:["asc"]},endpoint:{addGroup:{key:"dragonfish.groups.addGroupUrl",url:"/groups/"},copyGroup:{key:"dragonfish.groups.copyGroupUrl",url:"/groups/copy/{{encodeURIComponent(groupId)}}"},deleteGroup:{key:"dragonfish.groups.deleteGroupUrl",url:"/groups/{{encodeURIComponent(groupId)}}"},editGroup:{key:"dragonfish.groups.updateGroupUrl",url:"/groups/{{encodeURIComponent(groupId)}}"},getClassifications:{key:"dragonfish.classifications.listClassificationsUrl",url:"/classifications/"},getGroups:{key:"dragonfish.groups.listGroupsUrl",url:"/groups/"}}}).run(["$rootScope","stealth.dragonfish.groups.panelManager",function(t,e){e.initPanel(t.$new()),!0===c.config.get("map.startupGroupsManagerOpen")&&e.activatePanel()}]).service("stealth.dragonfish.groups.groupsManager",["$http","stealth.dragonfish.groups.Constant","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.errorHandling",function(t,e,n,r){this.getGroups=function(){var o=u.getUrl(e.endpoint.getGroups,n.baseUrl);return t.get(o).then(function(t){return i(t.data)?[]:t.data},r.error("Failed to get list of groups from server."))},this.addGroup=function(i){var o={name:i.name,classification:i.classification},a=u.getUrl(e.endpoint.addGroup,n.baseUrl);return t.post(a,o).then(function(t){return t.data},r.error("Failed to add a group."))},this.copyGroup=function(i){var a=u.getUrl(e.endpoint.copyGroup,o(n.baseUrl,{groupId:i.id}));return t.get(a).then(function(t){return t.data},r.error("Failed to copy group."))},this.updateGroup=function(i,s){var l=a({name:i.name,classification:i.classification},s||{}),c=u.getUrl(e.endpoint.editGroup,o(n.baseUrl,{groupId:i.id}));return t.put(c,l).then(function(t){return t.data},r.error("Failed to update group"))},this.deleteGroup=function(i){var a=u.getUrl(e.endpoint.deleteGroup,o(n.baseUrl,{groupId:i.id}));return t.delete(a).then(function(t){return t},r.error("Failed to delete the group"))}}]).service("stealth.dragonfish.groups.classifications",["$http","stealth.dragonfish.groups.Constant","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.errorHandling",function(t,e,n,r){var i=this;this.classifications={},this.getLabel=function(t){return(i.classifications[t]||c.config.get("dragonfish.classifications.missingClassificationLabel","Unclassified")).toUpperCase()},function(){var o=u.getUrl(e.endpoint.getClassifications,n.baseUrl);t.get(o).then(function(t){i.classifications=s(t.data,function(t,e){return t[e.id]=e.label,t},{})},r.error("Failed to get list of classifications from server."))}()}]).service("stealth.dragonfish.groups.panelManager",["$rootScope","sidebarManager","ccri.angular-utils.WidgetDef","stealth.dragonfish.groups.Constant",g.stealthDragonfishGroupsPanel,"stealth.dragonfish.groups.entities.panelManager",function(t,e,n,r,i,o){var a,s,u=c.config.get("dragonfish.groups.groupPanel.width",r.panel.width);function d(t){a&&(a.updateGroup(t),o.updateGroup(t))}this.activatePanel=function(){a&&!l(s)&&e.toggleButton(s,!0)},this.addGroup=function(t){if(a)return a.addGroup(t)},this.initPanel=function(t){a=new i(t),s=e.addButton(r.title,r.icon,u,new n({tag:"st-df-groups-list",scope:t}),void 0,!0)},this.refreshEntities=function(t){if(a)return o.refreshEntities(t)},this.removeGroup=function(t){if(a)return o.removeGroup(t),a.removeGroup(t)},this.showEntities=function(t,n){var r=e.getButtons()[s].panel.pinned;e.pinButton(s),o.addPanel(t,n),r||e.unpinButton(s);t.showEntities=!0,d(t)},this.updateGroup=d,t.$on("dragonfish.group.closed",function(t,e){a&&(e.showEntities=!1,e.mouseover=!1,d(e))})}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(4),a=n(84),s=n(3810);e.stealthDragonfishGroupsCaptureResultsPanel="stealth.dragonfish.groups.capture.ResultsPanel",r.module("stealth.dragonfish.groups.capture",[]).factory(e.stealthDragonfishGroupsCaptureResultsPanel,["CONFIG","ccri.angular-utils.WidgetDef","stealth.dragonfish.enrich.enrichService","stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.groups.entities.panelManager","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.entity","stealth.dragonfish.utils.sidebarService",function(t,e,n,r,s,l,c,u){return function(n,l){var c=this,d=u.createScope();function f(t){return o(t,function(t){var e=t.getProperties();return e.sourceFeature=t,e.thumbnail=u.composeThumbnailUrl(t),e})}this.datastore=new a.List.ArrayStore([],"id"),this.decorateCard=function(n){n.scope.titleAttr=i(t,"dragonfish.search.entityCard.titleAttr","name"),n.scope.collapsedLabels=i(t,"dragonfish.search.entityCard.collapsedLabels",["time"]),n.scope.openedLabels=i(t,"dragonfish.search.entityCard.openedLabels",["description"]),n.scope.unhighlight=d.unhighlight,n.titleWidget=new e({tag:"st-df-entity-title",scope:n.scope}),n.collapsedWidget=null,n.contentWidget=new e({tag:"st-df-entity-content",scope:n.scope})},this.destroy=function(){d.$destroy()},this.menuResolver=function(t){var e=[];return c.datastore.getById(t).then(function(t){e.push({name:"Zoom To Entity",onClick:function(){u.zoomTo(t.sourceFeature)}},{name:"Add to Group",onClick:function(t){r.addEntitiesToGroup(l,[{id:t}]).then(function(t){s.addEntities(l,t)})}})}),e},this.toolbarWidget=null,this.buttonOptions=[],this.onMouseEnter=function(t){c.datastore.getById(t).then(function(t){d.highlight(t.sourceFeature)})},this.onMouseLeave=function(t){c.datastore.getById(t).then(function(t){d.unhighlight(t.sourceFeature)})},c.datastore.updateAndPrune.apply(c.datastore,f(n)),r.enrichGroupEntities(n).then(function(t){c.datastore.updateAndPrune.apply(c.datastore,f(t))})}}]).directive("stDfResultList",[function(){return{restrict:"E",template:s,scope:{searchResultList:"="}}}])},function(t,e){t.exports='<ccri-list-view-element\n    datastore="searchResultList.datastore"\n    decorate-card="searchResultList.decorateCard"\n    menu-resolver="searchResultList.menuResolver"\n    toolbar-widget="searchResultList.toolbarWidget"\n    button-options="searchResultList.buttonOptions"\n    filter-resolver="searchResultList.filterResolver"\n    on-mouse-enter="searchResultList.onMouseEnter"\n    on-mouse-leave="searchResultList.onMouseLeave"\n    expand-options="true"\n></ccri-list-view-element>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(2),a=n(4),s=n(6),l=n(39);e.stealthDragonfishGroupsCaptureEntityCaptureService="stealth.dragonfish.groups.capture.EntityCaptureService",r.module("stealth.dragonfish.groups.capture",["stealth.search"]).service(e.stealthDragonfishGroupsCaptureEntityCaptureService,["$rootScope","ol3Map","sidebarManager","toastr","stealth.core.geo.controls.mapMode.modeManager","stealth.core.interaction.mapclick.searchManager","stealth.dragonfish.groups.capture.ResultsPanel","stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.groups.entities.panelManager",function(t,e,n,c,u,d,f,p,h){var g,m,v,y=r.element('<div class="fa fa-fw fa-spinner fa-spin fa-lg mapSearchSpinner"></div>')[0],b=this;function w(r){var u=new s.Overlay({element:y,position:r.coordinate});e.addOverlay(u),b.toggleMode();var g=t.$new();g.unformattedResponse=!0,d.search(r.coordinate,e.getResolution(),function(t){var r=function(t){return i(t).filter(function(t){return o(t,"capabilities.addToGroup.idAttribute",!1)}).map(function(t){return p.createDFEntities(a(t.records,function(e){return{id:e[t.capabilities.addToGroup.idAttribute]}}))}).flatten().value()}(t);r.length?(g.searchResultList=new f(r,v),function(t){h.pinGroup(v,!0),n.toggleButton(n.addButton('Add To "'+v.name+'"',"fa-map-marker",350,new l.WidgetDef({tag:"st-df-result-list",scope:t,attrs:'search-result-list="searchResultList"',isolateScope:!0}),void 0,!1,function(){v=null,t.searchResultList.destroy(),t.$destroy()}),!0),h.pinGroup(v)}(g)):(g.$destroy(),c.error("No entities were found"));e.removeOverlay(u)},g)}this.active=!1,this.toggleMode=function(t){b.active=!b.active,b.active?(v=t,m=u.getMode(),u.activate(u.noMode.name),g=e.on("singleclick",w)):(e.unByKey(g),g=null,u.deactivate(u.noMode.name),u.activate(m.name),m=null)}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3813),o=n(3814),a=n(3815),s=n(3816);!function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(3818));var l=n(3822);e.stealthDragonfishEntity="stealth.dragonfish.entity",r.module(e.stealthDragonfishEntity,["ccri.angular-utils","ccri.popup.components","stealth.core.elements"]).controller(s.customPopupControllerName,s.CustomPopupController).directive("stDfCustomPopup",s.directive).directive("stDfEntityTitle",[function(){return{restrict:"E",template:i,link:function(t,e){t.unhighlight&&e.on("$destroy",function(){t.unhighlight(t.record.sourceFeature)})}}}]).directive("stDfEntityContent",[function(){return{restrict:"E",template:o}}]).directive("stDfEntityAttributes",[function(){return{restrict:"E",template:a}}]).directive("stDfEntityThumbs",l.ThumbsDirective)},function(t,e){t.exports='<div class="df-entity-title flex-row"\n    uib-tooltip-html="tooltipHoverTpl" tooltip-class="df-tooltip-thumbnail"\n    tooltip-append-to-body="true" tooltip-placement="auto right"\n    tooltip-animate="false" tooltip-popup-delay="300" tooltip-trigger="mouseenter"\n    >\n    <st-df-entity-thumbnail></st-df-entity-thumbnail>\n    <div class="flex-1 flex-column flex-justify-content-flex-start buf-sm-ml">\n        <div class="flex-row flex-align-items-center">\n            <i class="fa fa-lg ccri-icon ccri-icon-map-pin pin-size buf-xs-mr"\n                ng-style="{\'color\': record.color}"\n            ></i>\n            <div class="ellipsis flex-1" ng-if="::titleAttr"\n                uib-tooltip="{{record[titleAttr]}}"\n                tooltip-class="nowrap tooltip-order df-tooltip" tooltip-append-to-body="true"\n                tooltip-placement="auto right" tooltip-animate="false"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                tooltip-enable="false" ccri-angular-utils-tooltip-overflow="watch">\n                {{record[titleAttr]}}\n            </div>\n            <st-df-entity-thumbs\n                ng-if="record.mouseover && requestorCanEdit"\n                group="group"\n                pre-down-click="preThumbClick"\n                pre-up-click="preThumbClick"\n                post-down-click="postThumbClick"\n                post-up-click="postThumbClick"\n                record="record"\n            ></st-df-entity-thumbs>\n        </div>\n        <div class="ellipsis df-entity-attrs"\n            ng-repeat="attr in ::collapsedLabels"\n            ng-if="record[attr]"\n            uib-tooltip="{{record[attr]}}"\n            tooltip-class="nowrap tooltip-order df-tooltip" tooltip-append-to-body="true"\n            tooltip-placement="auto right" tooltip-animate="false"\n            tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n            tooltip-enable="false" ccri-angular-utils-tooltip-overflow="watch">\n            <st-df-entity-attributes></st-df-entity-attributes>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="buf-sm-mb">\n    <div ng-repeat="attr in ::openedLabels">\n        <st-df-entity-attributes></st-df-entity-attributes>\n    </div>\n</div>\n'},function(t,e){t.exports='<span ng-switch on="attr">\n    <span ng-switch-when="labels" ng-if="::record.innessStatus !==  suggestedStatus">\n        <span class="df-attribute-title">Labels:</span>\n        <ccri-angular-utils-tag-list\n            class="df-entity-label df-attribute-val"\n            items="record.labels"\n            typeahead-options="::suggestedLabels"\n            typeahead-editable="::labelsTypeaheadEditable"\n            on-item-blur="onLabelChange"\n        ></ccri-angular-utils-tag-list>\n    </span>\n    <span ng-switch-when="time">\n        <span ng-if="::record.time.type == \'instant\'">\n            <span class="df-attribute-title">Time:</span>\n            <st-datetime class="df-attribute-val" date="::record.time.instant"></st-datetime>\n        </span>\n        <span ng-if="::record.time.type == \'interval\'">\n            <div>\n                <span class="df-attribute-title">Start Time:</span>\n                <st-datetime class="df-attribute-val" date="::record.time.start"></st-datetime>\n            </div>\n            <div>\n                <span class="df-attribute-title">End Time:</span>\n                <st-datetime class="df-attribute-val" date="::record.time.end"></st-datetime>\n            </div>\n        </span>\n    </span>\n    <span ng-switch-when="nominators">\n        <span ng-if="::record.nominators">\n            <span class="df-attribute-title">Nominators:</span>\n            <div ng-repeat="nominator in record.nominators" class="flex-row">\n                <div class="ellipsis df-nominator-label df-attribute-val"\n                    uib-tooltip="{{::nominator.nominator}}"\n                    tooltip-class="nowrap tooltip-order df-tooltip" tooltip-append-to-body="true"\n                    tooltip-placement="top-left" tooltip-animate="false"\n                    tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n                    tooltip-enable="false" ccri-angular-utils-tooltip-overflow="watch">\n                    <a class="df-explain-nominator" ng-click="explain(nominator.nominator)">\n                        {{::formatNominator(nominator)}}\n                    </a>\n                </div>\n                <uib-progressbar class="df-nominator-bar flex-1" max="1" value="nominator.score">\n                    {{::nominator.score.toFixed(4)}}\n                </uib-progressbar>\n            </div>\n        </span>\n    </span>\n    <span ng-switch-when="score">\n        <span ng-if="::record.score">\n            <span class="df-attribute-title">Score: </span>\n            <span class="df-attribute-val">{{::record.score.toFixed(4)}}</span>\n        </span>\n    </span>\n    <span ng-switch-default ng-if="record[attr]">\n        <span class="df-attribute-title">{{::attr}}: </span>\n        <span class="df-attribute-val">{{::record[attr]}}</span>\n    </span>\n</span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(109),o=n(494),a=n(2),s=n(17),l=n(34),c=n(14),u=n(4),d=n(151),f=n(3817);e.customPopupControllerName="stealth.dragonfish.entity.customPopup.Controller";var p=function(){function t(t,e,n,f,p,h){var g=this;this.scope=t,this.$filter=e,this.entityManager=n,this.panelManager=f,this.DF=p,this.sidebarService=h,this.postThumbClick=function(t){var e={id:g.scope.record.mapLayerId};g.panelManager.refreshEntities(e),t.mapLayerId=g.scope.record.mapLayerId,g.scope.result.metadata[g.scope.paging.currentPage-1]=g.formatRecord(t),g.setRecord()},this.mapAttrs=function(t){return t.split(",").map(function(t){return t.trim()})},this.formatRecord=function(t){var e=i(t.mapLayerId);if(!c(t.source))if("Feature"===t.source.type){var n=i(t.source.properties);(t=new r.Feature(t.source.geometry)).setProperties(n)}else t.source instanceof r.Feature&&(t=t.source);return l(t.getProperties)?(t.set("mapLayerId",e),t.getProperties()):t},this.setRecord=function(){g.scope.record=g.scope.result.metadata[g.scope.paging.currentPage-1];var t=g.scope.record[g.customPopupConfig.geomAttr];t&&(g.scope.latlon=r.extent.getCenter(g.wktParser.readGeometry(t).getExtent()).reverse()),g.scope.imageSrc=g.sidebarService.composeThumbnailUrl(new r.Feature(g.scope.record),g.customPopupConfig.imageAttr);var e=Object.keys(d(g.scope.record,g.omitKeys));g.scope.additionalAttrs=o(e,g.scope.subAttrs.concat(g.scope.superAttrs).concat([g.customPopupConfig.imageAttr,g.customPopupConfig.geomAttr]))},this.checkSuggestedPage=function(){g.scope.paging.suggestedPage>0&&g.scope.paging.suggestedPage<=g.scope.paging.numberOfPages()&&(g.scope.paging.currentPage=g.scope.paging.suggestedPage,g.setRecord())},this.numberOfPages=function(){var t=0;return s(g.scope.result.records)&&(t=Math.ceil(g.scope.result.records.length/g.scope.paging.pageSize)),t},this.previousPage=function(){g.scope.paging.currentPage=g.scope.paging.currentPage<2?g.scope.paging.numberOfPages():g.scope.paging.currentPage-1,g.scope.paging.suggestedPage=g.scope.paging.currentPage,g.setRecord()},this.nextPage=function(){g.scope.paging.currentPage=g.scope.paging.currentPage>=g.scope.paging.numberOfPages()?1:g.scope.paging.currentPage+1,g.scope.paging.suggestedPage=g.scope.paging.currentPage,g.setRecord()},this.getRecordIndex=function(t){return(g.scope.paging.currentPage-1)*g.scope.paging.pageSize+t},this.wktParser=new r.format.WKT;var m=a(this.scope.result.dataSource,"KeywordConfig",{});this.omitKeys=Object.keys(a(m,"field.hide",{}));var v=a(m.dragonfish,"customPopup",{});this.customPopupConfig={geomAttr:a(v,"geomAttr","geom"),imageAttr:a(v,"imageAttr","id"),subAttrs:a(v,"subAttrs","description,kind,title"),superAttrs:a(v,"superAttrs","id"),coordinateFormats:a(v,"coordinateFormats","latlon,dmsc,mgrs"),groupLayerSubstr:a(v,"groupLayerSubstr","urn:ccri:group")},this.scope.capabilities=this.scope.result.capabilities,this.scope.postThumbClick=this.postThumbClick,this.scope.showAdditionalAttrs=!1,this.scope.superAttrs=this.mapAttrs(this.customPopupConfig.superAttrs),this.scope.subAttrs=this.mapAttrs(this.customPopupConfig.subAttrs),this.scope.coordinateFormats=this.mapAttrs(this.customPopupConfig.coordinateFormats),this.scope.groupLayerSubstr=this.customPopupConfig.groupLayerSubstr,this.scope.paging={checkSuggestedPage:this.checkSuggestedPage,currentPage:1,getRecordIndex:this.getRecordIndex,nextPage:this.nextPage,numberOfPages:this.numberOfPages,pageSize:1,previousPage:this.previousPage,suggestedPage:1},this.scope.result.metadata=u(this.scope.result.metadata,this.formatRecord),this.setRecord()}return t.$inject=["$scope","$filter","stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.groups.entities.panelManager","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.sidebarService"],t}();e.CustomPopupController=p,e.directive=function(){return{restrict:"E",scope:{result:"="},controller:e.customPopupControllerName,template:f}}},function(t,e){t.exports='<div class="df-custom-popup">\n    \x3c!-- Header --\x3e\n    <div class="flex-row flex-align-items-center" style="padding:0 10px;">\n        <st-pager class="flex-1" records="result.records" paging="paging" style="color: #e4e4e4;"></st-pager>\n        <div class="flex-row">\n            <st-df-entity-thumbs\n                ng-if="record.mapLayerId && record.id && record.mapLayerId.includes(groupLayerSubstr)"\n                class="buf-md-mr"\n                group="{id: record.mapLayerId}"\n                post-down-click="postThumbClick"\n                post-up-click="postThumbClick"\n                record="record"\n            ></st-df-entity-thumbs>\n            <div ng-repeat="capa in capabilities"\n                 class="icon-btn control-btn buf-md-mr"\n                 uib-tooltip="{{capa.toolTipText}}" tooltip-class="nowrap"\n                 tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="500"\n                 tooltip-trigger="mouseenter"\n                 ng-if="capa.onClick"\n                 ng-click="capa.onClick(name, record, capa, metadata)">\n                <i class="fa fa-fw" ng-class="capa.iconClass"></i>\n            </div>\n        </div>\n    </div>\n    \x3c!-- Body --\x3e\n    <div>\n        <div class="flex-row">\n            <div class="df-custom-popup-thumbnail">\n                <img ng-src="{{imageSrc}}"/>\n            </div>\n            <div class="df-custom-popup-table flex-1 buf-sm-pb" style="margin-bottom:0;">\n                <div ng-repeat="attr in superAttrs">\n                    <div class="flex-row flex-align-items-center buf-sm-mt buf-sm-mr buf-sm-ml" ng-if="record[attr]">\n                        <div class="df-custom-popup-label">{{attr}}: </div>\n                        <div class="flex-1 flex-row flex-align-items-center">\n                            <div class="flex-1">{{record[attr]}}</div>\n                            <ccri-angular-utils-clipboard-copy\n                                class="icon-btn control-btn"\n                                data-clipboard-text="{{record[attr]}}"\n                                ccri-angular-utils-clipboard-feedback>\n                                <i class="fa fa-clipboard"></i>\n                            </ccri-angular-utils-clipboard-copy>\n                        </div>\n                    </div>\n                </div>\n                <geo-utils-coordinates\n                    ng-if="latlon"\n                    class="df-custom-popup-coordinates"\n                    latlon="latlon"\n                    enable-formats="coordinateFormats"\n                ></geo-utils-coordinates>\n            </div>\n        </div>\n        <div class="df-custom-popup-table">\n            <div ng-repeat="attr in subAttrs">\n                <div class="flex-row" ng-if="record[attr]">\n                    <div class="df-custom-popup-label">{{attr}}: </div>\n                    <div class="flex-1">{{record[attr]}}</div>\n                </div>\n            </div>\n        </div>\n        <div ng-if="additionalAttrs.length">\n            <div class="df-custom-popup-dropdown" ng-click="showAdditionalAttrs = !showAdditionalAttrs">\n                <span>Additional Metadata</span>\n                <span class="pull-right">\n                    <i class="fa" ng-class="{\'fa-chevron-down\': showAdditionalAttrs, \'fa-chevron-right\': !showAdditionalAttrs}"></i>\n                </span>\n            </div>\n            <div ng-show="showAdditionalAttrs">\n                <div class="pagedTable df-custom-popup-table" style="margin:0;background-color:transparent;">\n                    <div ng-repeat="attr in additionalAttrs" ng-class-odd="\'rowAlt\'">\n                        <div class="flex-row">\n                            <div class="df-custom-popup-label">{{attr}}: </div>\n                            <div class="flex-1">{{record[attr]}}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3819),o=n(3820),a=n(2),s=n(1227);e.stDfEntityThumbnail="stDfEntityThumbnail",r.module("stealth.dragonfish.entity").directive(e.stDfEntityThumbnail,["$interpolate","$timeout","CONFIG",s.stealthDragonfishEntityThumbnailPopupManager,function(t,e,n,s){return{restrict:"E",scope:!1,template:i,link:function(i){i.thumbnailScaling=a(n,"dragonfish.thumbnailPopout.scaling","1"),i.imgLoading=!0,i.img=new Image,i.img.src=i.record.thumbnail,i.img.onload=function(){i.imgLoading=!1,i.imgLoadingFailed=!1;var n=i.img.height*i.thumbnailScaling,r=i.img.width*i.thumbnailScaling;i.thumbStyle={height:n,width:r},i.tooltipHoverTpl=t(o)(i),e(function(){},0)},i.img.onerror=function(){i.record.thumbnail=i.img.src="assets/no_image_128x128.png",i.imgLoadingFailed=!0},i.showTooltip=function(t){if(t.stopPropagation(),!i.imgLoading&&!i.imgLoadingFailed){var e=r.element(".df-tooltip-thumbnail"),n=e.offset(),o=r.element(".primaryDisplay > ccri-popup-container").offset();if(!e[0])return;n=[n.left-o.left+17,n.top-o.top];var a=[i.thumbStyle.width,i.thumbStyle.height];e.remove(),s.displayPopup(i.record.id,i.img.src,n,a)}}}}}])},function(t,e){t.exports='<div class="df-entity-thumbnail" ng-click="showTooltip($event)">\n    <img class="df-thumbnail-img" ng-src="{{img.src}}">\n    <div ng-if="imgLoading"\n        class="df-thumbnail-overlay flex-column flex-justify-content-center flex-align-items-center"\n    >\n        <i class="fa fa-fw fa-circle-o-notch fa-spin"></i>\n    </div>\n    <div ng-if="!imgLoading && !imgLoadingFailed" style="visibility: hidden;"\n        class="df-thumbnail-overlay flex-column flex-justify-content-center flex-align-items-center"\n    >\n        <i class="fa fa-search-plus"></i>\n    </div>\n</div>\n'},function(t,e){t.exports='<img src="{{img.src}}" width="{{thumbStyle.width}}px" height="{{thumbStyle.height}}px">\n'},function(t,e){t.exports='<div class="popupTabContentContainer popupFillSpace">\n    <img class="df-tooltip-thumbnail-popup" src="{{imgSrc}}">\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),i=n(190),o=n(3823);function a(t,e){return{restrict:"E",template:o,scope:{group:"=",postDownClick:"&",postUpClick:"&",preDownClick:"&",preUpClick:"&",record:"="},link:function(n){function o(t){return a(t,n.suggested)}function a(e,i){return t.addEntityToGroup(n.group,e.id,i).then(function(t){return new Promise(function(e,n){r(t)?n("No entities returned"):e(t[0])})})}n.group=n.group||{},n.postDownClick=n.postDownClick()||i,n.postUpClick=n.postUpClick()||i,n.preDownClick=n.preDownClick()||i,n.preUpClick=n.preUpClick()||i,n.record=n.record||{},n.downColor="#dd8487",n.neutralColor="#6d6d6d",n.upColor="#6ACD90",n.saved=e.entity.status.saved,n.deleted=e.entity.status.deleted,n.restored=e.entity.status.restored,n.suggested=e.entity.status.suggested,n.onThumbDown=function(t){n.preDownClick(t),t.innessStatus===n.deleted?o(t).then(function(t){n.postDownClick(t)}):function(t){return a(t,n.deleted)}(t).then(function(t){n.postDownClick(t)})},n.onThumbUp=function(t){n.preUpClick(t),t.innessStatus===n.restored||t.innessStatus===n.saved?o(t).then(function(t){n.postUpClick(t)}):function(t){return a(t,n.restored)}(t).then(function(t){n.postUpClick(t)})}}}}a.$inject=["stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.utils.Constant"],e.ThumbsDirective=a},function(t,e){t.exports='<span class="df-entity-thumbs flex-row">\n    <i class="fa fa-thumbs-down"\n       ng-style="{\'color\': record.innessStatus === deleted ? downColor : neutralColor}"\n       ng-click="$event.stopPropagation(); onThumbDown(record);"\n       uib-tooltip="{{record.innessStatus === deleted ? \'Undo Reject\' : \'Reject Entity\'}}"\n       tooltip-class="nowrap tooltip-order" tooltip-placement="top"\n       tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n       tooltip-animate="false" tooltip-popup-delay="600"\n    ></i>\n    <i class="fa fa-flip-horizontal fa-thumbs-up buf-md-ml"\n       ng-style="{\'color\': record.innessStatus === saved || record.innessStatus === restored ? upColor : neutralColor}"\n       ng-click="$event.stopPropagation(); onThumbUp(record);"\n       uib-tooltip="{{record.innessStatus === saved || record.innessStatus === restored ? \'Undo Accept\' : \'Accept Entity\'}}"\n       tooltip-class="nowrap tooltip-order" tooltip-placement="top"\n       tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n       tooltip-animate="false" tooltip-popup-delay="600"\n    ></i>\n</span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(21),o=n(6),a=n(109),s=n(96),l=n(629),c=n(22),u=n(164),d=n(1082),f=n(50),p=n(14),h=n(23),g=n(2),m=n(4),v=n(30),y=n(190),b=n(151),w=n(124),_=n(54),x=n(3825),S=n(3826);e.stealthDragonfishGroupsEntities="stealth.dragonfish.groups.entities",r.module(e.stealthDragonfishGroupsEntities,[]).constant("stealth.dragonfish.groups.entities.Constant",{icon:"fa-th-list",panel:{idField:"id",width:325},sort:{fields:["name"],orders:["desc"],dropKeys:["color","geom","geometry","innessStatusFilter","labels","nominatorDisplayState","sourceFeature","thumbnail"]},csvEntityDropKeys:["color","geom","subgroup","desc","start_time","end_time","time","innessStatusFilter","nominatorDisplayState"],csvGroupDropKeys:["group_showEntities","group_mouseover","group_isOwned","group_requestorCanEdit","geometry"],endpoint:{addEntity:{key:"dragonfish.groups.addEntityUrl",url:"/groups/{{encodeURIComponent(groupId)}}/entities"},addEntities:{key:"dragonfish.groups.addEntitiesUrl",url:"/groups/{{encodeURIComponent(groupId)}}/entities"},deleteEntities:{key:"dragonfish.groups.deleteEntityUrl",url:"/groups/{{encodeURIComponent(groupId)}}/entities/{{encodeURIComponents(entityIds).join()}}"},editEntityLabels:{key:"dragonfish.groups.setEntityLabelsUrl",url:"/groups/{{encodeURIComponent(groupId)}}/entities/{{encodeURIComponent(entityId)}}/labels"},getGroupEntities:{key:"dragonfish.groups.groupInfoUrl",url:"/groups/{{encodeURIComponent(groupId)}}/entities"},restoreEntity:{key:"dragonfish.groups.restoreEntityUrl",url:"/groups/{{encodeURIComponent(groupId)}}/entities"},suggestEntities:{key:"crusher.suggest.suggestEntityUrl",url:"/suggest/members/{{encodeURIComponent(groupId)}}"}},nominatorDisplayState:{notVisible:"notVisible",visibleOnMouseEnter:"visibleOnMouseEnter",visible:"visible"},prediction:{predictiveFeatures:[],predictiveCoverages:[],sampleRatio:10,CRS:"EPSG:4326",featureSelection:!0,sldTemplate:"threat_palette_multi_band",keywords:[],bounds:{minLon:-180,minLat:-90,maxLon:180,maxLat:90},reissueGetLayers:!0}}).run(["coreCapabilitiesExtender","stealth.dragonfish.groups.Constant","stealth.dragonfish.groups.groupsManager","stealth.dragonfish.groups.wizard.entityWizard",function(t,e,n,r){t.addCapabilitiesExtender(function(t,n){return p(t.addToGroup)||(t.addToGroup=s(t.addToGroup,{toolTipText:"Add to group",iconClass:e.icon}),t.addToGroup.onClick=function(t,e,n,i){var o=g(i,"source.properties",e);r.launchWizard([o[n.idAttribute]])}),t})}]).service("stealth.dragonfish.groups.entities.entityManager",["$http","stealth.dragonfish.enrich.enrichService","stealth.dragonfish.groups.entities.Constant","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.errorHandling","stealth.dragonfish.utils.entity","stealth.dragonfish.utils.entityService",function(t,e,n,r,i,o,a){var s=this;this.getGroupEntities=function(e){var o=_.getUrl(n.endpoint.getGroupEntities,u(r.baseUrl,{groupId:e}));return t.get(o).then(function(t){return s.createDFEntities(t.data)},i.error("Failed to get data for group from server."))},this.enrichGroupEntities=function(t){var n=m(t,function(t){return t.getProperties()}),r=m(n,"id");return e.getEnrichedEntities(r).then(function(t){return t=m(t,function(t){return b(t,"innessStatus")}),t=d(t,"id"),n=d(n,"id"),l(t,n),s.createDFEntities(t)})},this.createDFEntities=function(t){return m(t,function(t){return o(t)})},this.addEntityToGroup=function(t,e,n){return s.addEntitiesToGroup(t,[{id:e}],n)},this.addEntitiesToGroup=function(o,a,l){l||(l=r.entity.status.saved);var d={entities:m(a,function(t){return{entityId:t.id,status:l}})},f=_.getUrl(n.endpoint.addEntities,u(r.baseUrl,{groupId:o.id}));return t.post(f,d).then(function(t){return e.getEnrichedEntities(m(t.data,"id")).then(function(t){return c(t,function(t){t.innessStatus=l}),s.createDFEntities(t)})},i.error("Failed to add entity to group."))},this.deleteGroupEntities=function(e,o){var a=u(r.baseUrl,{groupId:e.id,entityIds:o,encodeURIComponents:function(t){return m(t,encodeURIComponent)}}),s=_.getUrl(n.endpoint.deleteEntities,a);return t.delete(s).then(function(t){return t},i.errorWithResponse("Failed to delete some entities"))},this.restoreGroupEntity=function(e,o){var a={entities:[{entityId:o,status:r.entity.status.restored}]},s=_.getUrl(n.endpoint.restoreEntity,u(r.baseUrl,{groupId:e.id}));return t.put(s,a).then(function(t){return t},i.error("Failed to restore entity"))},this.setEntityLabels=function(e,o){var s=u(r.baseUrl,{groupId:e.id,entityId:a.id(o)}),l=_.getUrl(n.endpoint.editEntityLabels,s);return t.put(l,{labels:a.labels(o)}).then(function(t){return t},i.error("Failed to save entity group labels"))}}]).service("stealth.dragonfish.groups.entities.suggestService",["$http","toastr","CONFIG","stealth.dragonfish.enrich.Constant","stealth.dragonfish.groups.entities.Constant","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.errorHandling","stealth.dragonfish.utils.entity","stealth.dragonfish.utils.entityService",function(t,e,n,r,i,o,a,l,c){this.suggest=function(c,d){var f=_.getUrl(i.endpoint.suggestEntities,u(o.baseUrl,{groupId:c.id})),h=g(n,"crusher.enrich.enrichmentType",r.enrichmentType);return t.get(f,{headers:{Accept:h}}).then(function(t){var n=[];return t.data.suggestions.length?(n=m(t.data.suggestions,function(t){var e={id:t.id};p(t.enriched)||(e=t.enriched);var n=t.metadata;return p(n)||(e=s(e,n)),l(v(e,{innessStatus:o.entity.status.suggested}))})).length||e.error("No new suggestions"):e.error("No entity suggestions found"),n},a.error("Failed to retrieve suggestions."))}}]).service("stealth.dragonfish.groups.entities.panelManager",["ol3Map",x.stealthDragonfishEntityCategory,"stealth.dragonfish.groups.Constant",S.stealthDragonfishGroupsEntitiesPanel,"stealth.dragonfish.utils.sidebarService",function(t,e,n,r,i){var o={},a=new e(n.title,n.icon);function s(t,e){var n=o[t.id];return n||(n=new r(i.createScope(),t,a),o[t.id]=n),n.openSidebar(e),n}this.addPanel=s,this.addEntities=function(t,e){o[t.id]&&o[t.id].addEntities(e);s(t,y)},this.pinGroup=function(t,e){o[t.id]&&o[t.id].pinSidebar(e)},this.removeGroup=function(t){o[t]&&(o[t].removeSidebar(),delete o[t])},this.refreshEntities=function(t){o[t.id]&&o[t.id].refresh()},this.updateGroup=function(t){o[t.id]&&o[t.id].updateGroup(t)},this.updateGroups=function(t){c(Object.keys(o),function(e){var n=h(t,function(t){return e===t.id});p(n)||o[e].updateGroup(n)})}}]).service("stealth.dragonfish.groups.entities.predictionService",["$log","$q","$rootScope","CONFIG","cqlHelper","owsLayers","stealth.dragonfish.groups.entities.Constant","stealth.dragonfish.utils.entityService","wps",function(t,e,n,r,s,u,d,p,h){var y=g(r,"dragonfish.groups.prediction"),b=new o.format.GeoJSON;function _(t,e){var n={};l(n,y,v({},d.prediction)),n.name="Prediction "+t.name+"_"+i().valueOf();var r=b.writeFeaturesObject(e.map(function(t){return new o.Feature({geometry:t.getGeometry(),id:p.id(t)})}),{featureProjection:"EPSG:4326"});return r.crs={type:"name",properties:{name:"EPSG:4326"}},n.events={Name:"Group - "+t.name,Title:"Group - "+t.name,derivedLayers:[],cql_filter:null,showAttributes:!1,featureTypeDescription:"unavailable",isImportCacheLayer:!0,geoJSON:JSON.stringify(r)},n.geometry=s.bboxToPolygon([n.bounds.minLon,n.bounds.minLat,n.bounds.maxLon,n.bounds.maxLat]),n}function x(t){var e=t.Name.substring(0,t.Name.indexOf(":"));return{name:e,namespace:g(r,"dcm.namespacePrefix","")+e}}function S(t,e){var n=!1;return w(e,function(e){return n=new RegExp(e).test(t.Name)}),n}this.launchWizard=function(t,e,r){var i=_(e,r);n.$emit("dcm.wizard."+t+".launch",{prediction:i})},this.generatePrediction=function(t,i){var o,s,l,d=_(t,i),p=g(y,"layerConfs",[]);d.keywords=d.keywords.concat(["dcm.prediction","routeanalysis.data.Spatial Predictions"]),d.keywords=m(d.keywords,function(t){return r.app.context+"."+t}).join(", "),d.outputType={name:"tiff",output:"image/tiff"},d.srsHandling={name:"NONE",projectionPolicy:"NONE"},(o=u.getLayers(["dcm","vector"],d.reissueGetLayers)).then(function(t){c(t,function(t){var e=a(t);e.workspace=x(e),p[e.workspace.name]&&S(e,p[e.workspace.name])&&(e.derivedLayers=[],e.cql_filter=null,e.showAttributes=!1,d.predictiveFeatures.push(e))})}),(s=u.getLayers(["dcm","raster"],d.reissueGetLayers)).then(function(t){c(t,function(t){var e=a(t);e.workspace=x(e),p[e.workspace.name]&&S(e,p[e.workspace.name])&&(e.derivedLayers=[],e.cql_filter=null,d.predictiveCoverages.push(e))})}),l=!f(d.width)||d.width<=0||!f(d.height)||d.height<=0?function(t){var e={crs:t.CRS,minX:t.bounds.minLon,minY:t.bounds.minLat,maxX:t.bounds.maxLon,maxY:t.bounds.maxLat};return h.buildAndSubmit("resolutionRecommendation",e,{httpConfig:{responseType:"text"}}).then(function(e){var n=e.split(",");t.width=n[0].trim(),t.height=n[1].trim()})}(d):e.when(!0),e.all([l,o,s]).then(function(){n.$emit("dcm.generate.prediction",{prediction:d})})}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(23),o=n(42),a=n(2);e.stealthDragonfishEntityCategory="stealth.dragonfish.entity.Category",r.module("stealth.dragonfish.entity").factory(e.stealthDragonfishEntityCategory,["categoryManager","sidebarManager","stealth.core.geo.analysis.category.AnalysisCategory",function(t,e,n){return function(r,s){var l;function c(){o(l.getLayers(),function(t){u(t)}),l=null}function u(t){t.ol3Layer&&t.onDestroy&&t.onDestroy(),t.sidebarButtonId&&e.removeButton(t.sidebarButtonId)}function d(){l&&o(l.getLayers(),function(t){if(t.sidebarButtonId){var n=i(e.getButtons(),{id:t.sidebarButtonId});t.ol3Layer.setVisible(a(n,"panel.open",!1))}else t.ol3Layer.setVisible(!1)})}this.addLayer=function(e){l||(l=t.addCategory(2,new n(r,s,c,u)));i(l.getLayers(),{id:e.id})||l.addLayer(e);d()},this.removeLayer=function(t){if(l){var e=i(l.getLayers(),{id:t.id});e&&l.removeLayer(e)}},this.updateLayerVisibility=d}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(304),a=n(196),s=n(494),l=n(22),c=n(409),u=n(29),d=n(150),f=n(42),p=n(2),h=n(917),g=n(18),m=n(46),v=n(14),y=n(108),b=n(4),w=n(30),_=n(151),x=n(124),S=n(39),C=n(15),E=n(84),T=n(95),M=n(3827),k=n(3829),A=n(1227),I=n(685);!function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(685));var O=n(3830),P=n(3831);e.stealthDragonfishGroupsEntitiesPanel="stealth.dragonfish.groups.entities.Panel",r.module("stealth.dragonfish.groups.entities",[I.stealthDragonfishGroupsCapture]).factory(e.stealthDragonfishGroupsEntitiesPanel,["$rootScope","ol3Map","sidebarManager","stealth.core.geo.ol3.layers.MapLayer","stealth.core.geo.ol3.layers.FeatureLayer","stealth.dragonfish.geo.ol3.layers.styler","stealth.dragonfish.groups.Constant","stealth.dragonfish.groups.entities.Constant","stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.groups.entities.predictionService","stealth.dragonfish.groups.entities.suggestService","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.entity","stealth.dragonfish.utils.entityService","stealth.dragonfish.utils.sidebarService",function(t,e,n,c,f,p,m,x,M,k,A,I,O,P,L){return function(D,N,R){var F,B=a(Z,200),j=[],q=e.getView(),z=C.config.get("dragonfish.groups.entityPanel.width",x.panel.width),U={click:{search:{fixed:{pixelBuffer:25}}},field:{hide:{innessStatusFilter:"",color:""}}};this.addEntities=Y,this.openSidebar=function(t){((function(){var t=!1;F||(F=n.addButton(it(),x.icon,z,new S.WidgetDef({tag:"st-df-entities-list",scope:D,isolateScope:!0}),void 0,!1,K),t=!0);return n.toggleButton(F,!0),t})()||t)&&rt()},this.pinSidebar=function(t){t?n.pinButton(F):n.unpinButton(F)},this.removeSidebar=at,this.updateGroup=ft,this.refresh=D.refresh=rt,D.addExtentFilter=function(){D.filterByExtent&&ot();D.filterByExtent=!0,q.on(["change:center","change:resolution","change:rotation"],B),Z()},D.arrayStore=new E.List.ArrayStore([],x.panel.idField),D.entity=r.copy(I.entity),D.exportList=function(){var t=C.config.get("dragonfish.groups.csvEntityDropKeys",x.csvEntityDropKeys),e=D.group.name.replace(/ /g,"_");L.csvExport(j,e,t)},D.filterByExtent=!1,D.launchCustomWizard=function(){k.launchWizard("custom",D.group,j)},D.launchExplainableWizard=function(){k.launchWizard("explainable",D.group,j)},D.formatEntity=tt,D.generatePrediction=function(){k.generatePrediction(D.group,j)},D.group=N,D.isLoading=!1,D.layer={viewState:{showDeleted:!1}},D.onPanelOpen=function(){R.updateLayerVisibility(),D.filterByExtent&&D.addExtentFilter();D.arrayStore.addFilter(ct)},D.onPanelClose=function(){D.nominatorsLayer&&!g(D.nominatorsLayer.getOl3Layer().getSource().getFeatures())&&dt();t.$emit("dragonfish.group.closed",D.group)},D.panelTitle=D.group.name+" List",D.removeExtentFilter=ot,D.suggestMore=function(){D.isLoading=!0,A.suggest(D.group,j).then(function(t){!function(t){l(t,function(t){var e=t.get("nominators"),n=t.getGeometry();if(!g(e)&&!g(n)){var r=ut(n);Promise.all(b(e,function(e){return D.arrayStore.getById(e.nominator).then(function(e){var n=ut(e.sourceFeature.getGeometry());return new i.Feature({name:t.get("id"),geometry:new i.geom.LineString([r,n]),style:new i.style.Style({stroke:{color:[132,179,221,.9],width:1}})})})})).then(function(e){return t.set("nominatorFeatures",e)})}})}(t),function(){if(g(D.nominatorsLayer)){var t=new i.layer.Vector({source:new i.source.Vector({features:[]})}),n=new c(T.uuid.generate(),"Suggestion Nominations for "+D.group.name,t,!1);e.addLayer(n),D.nominatorsLayer=n}}(),Y(t),D.suggestions=t,D.isLoading=!1},function(){D.suggestions=null,D.isLoading=!1})},D.toggleAllNominators=dt,D.toggleTrash=function(){if(!g(D.nominatorsLayer)){var t=D.nominatorsLayer.getOl3Layer().getSource();g(t.getFeatures())||dt()}D.layer.viewState.showDeleted=!D.layer.viewState.showDeleted,D.layer.viewState.filterFieldCutoff=1==D.layer.viewState.filterFieldCutoff?{}:1,D.layer.updateMap(),D.arrayStore.update()},D.updateGroup=ft,D.zoomToLayer=function(){var t=D.layer.getSource();t&&t.getFeatures&&!g(t.getFeatures())&&e.fit(D.layer.getExtent())},D.titleAttr=C.config.get("dragonfish.groups.entityCard.titleAttr","name"),D.collapsedLabels=C.config.get("dragonfish.groups.entityCard.collapsedLabels",["time"]),D.openedLabels=C.config.get("dragonfish.groups.entityCard.openedLabels",["labels","description"]),D.suggestedLabels=C.config.get("dragonfish.groups.entityCard.suggestedLabels",[]),D.labelsTypeaheadEditable=C.config.get("dragonfish.groups.entityCard.labelsTypeaheadEditable",!0);var V=D.collapsedLabels.concat(D.openedLabels).concat(D.titleAttr),H=C.config.get("dragonfish.groups.panelSort.dropKeys",x.sort.dropKeys),W=C.config.get("dragonfish.groups.panelSort.fields",x.sort.fields),G=C.config.get("dragonfish.groups.panelSort.orders",x.sort.orders);function Y(t){st(),nt(t),D.arrayStore.add.apply(D.arrayStore,et(t)),j.push.apply(j,t),D.layer.ol3Layer.getSource().addFeatures(t),D.layer.ol3Layer.changed(),D.layer.updateMap(),lt()}function K(){D.nominatorsLayer&&(e.removeLayer(D.nominatorsLayer),D.nominatorsLayer=null),F=null,D.arrayStore.clearFilters(),D.filterByExtent=!1,R.removeLayer(D.layer),D.layer={viewState:{showDeleted:!1}}}function X(t){M.enrichGroupEntities(t).then(function(t){j=t,st(),D.arrayStore.updateAndPrune.apply(D.arrayStore,et(j)),F&&(D.layer.id?(D.layer.ol3Layer.getSource().clear(),D.layer.ol3Layer.getSource().addFeatures(j)):(nt(j),D.layer=new f({id:D.group.id,name:"Entities in "+D.group.name,features:j,iconClass:m.icon,styleFnViewState:p.groupCurriedStyleFunction,styleDirective:"st-df-group-layer-style-view",onStyleDirectiveRemoved:at,viewState:{colorById:!0,showDeleted:!1,filterField:"innessStatusFilter",filterFieldCutoff:1},layerThisBelongsTo:{KeywordConfig:w(C.config.get("dragonfish.groups.layerKeywords",{}),U)}}),D.layer.styleDirectiveScope.colors={saved:D.entity.colors[D.entity.status.saved],deleted:D.entity.colors[D.entity.status.deleted],suggested:D.entity.colors[D.entity.status.suggested],restored:D.entity.colors[D.entity.status.restored]},D.layer.styleDirectiveScope.changePinColors=function(t,e){D.layer.styleDirectiveScope.colors[e]=D.entity.colors[D.entity.status[e]]=t,nt(j),D.arrayStore.updateAndPrune.apply(D.arrayStore,et(j))},D.layer.sidebarButtonId=F,R.addLayer(D.layer))),lt(),D.isLoading=!1},function(){D.isLoading=!1})}function Q(t){var n=t.sourceFeature.getGeometry();return n&&i.extent.intersects(e.getExtent(),n.getExtent())}function Z(){D.arrayStore.removeFilter(Q),D.filterByExtent&&D.arrayStore.addFilter(Q)}function J(t){return b(t,function(t){var e={label:"innessStatus"!==t?o(t):"Status"};return e.prop="time"!=t?t:function(t){return P.startMoment(t.sourceFeature)},e})}function tt(t){var e=t.getProperties();return e.checked=!1,e.color=D.entity.colors[e.innessStatus],e.sourceFeature=t,e.thumbnail=L.composeThumbnailUrl(t),e.nominatorDisplayState=x.nominatorDisplayState.notVisible,e}function et(t){return b(t,tt)}function nt(t){l(t,function(t){var e=t.get("innessStatus");v(e)||t.set("color",D.entity.colors[e])})}function rt(){D.isLoading||(v(D.suggestions)||(D.suggestions.length=0),D.isLoading=!0,M.getGroupEntities(D.group.id).then(function(t){j&&j.length||(st(),D.arrayStore.updateAndPrune.apply(D.arrayStore,et(t))),X(t)},function(){D.isLoading=!1}))}function it(){var t="";return D.group.requestorCanEdit||(t="(Read Only) "),t+D.group.name+" List"}function ot(){D.filterByExtent=!1,q.un(["change:center","change:resolution","change:rotation"],B),Z()}function at(t){n.removeButton(F)}function st(){r.element($(".df-tooltip")).remove()}function lt(){var t=V.concat("innessStatus"),e=new Set;l(et(j),function(t){l(y(t),function(t){e.add(t)})});var n=h(Array.from(e),t);n=s(n,H),D.sortOptions=J(n)}function ct(t){return D.layer.viewState.showDeleted?t.innessStatus===I.entity.status.deleted:t.innessStatus!==I.entity.status.deleted}function ut(t){switch(t.getType()){case"MultiPolygon":return t.getInteriorPoints().getFirstCoordinate();case"Polygon":return t.getInteriorPoint().getCoordinates();case"Point":return t.getCoordinates();default:return i.extent.getCenter(t.getExtent())}}function dt(){if(!g(D.nominatorsLayer)){var t=D.nominatorsLayer.getOl3Layer().getSource();g(t.getFeatures())?D.arrayStore.read().then(function(e){t.addFeatures(d(u(b(e.toArray(),function(t){return t.sourceFeature.get("nominatorFeatures")})))),l(e.toArray(),function(t){return t.nominatorDisplayState=x.nominatorDisplayState.visible,t}),D.arrayStore.update()}):(t.clear(),D.arrayStore.read().then(function(t){l(t.toArray(),function(t){return t.nominatorDisplayState=x.nominatorDisplayState.notVisible,t}),D.arrayStore.update()}))}}function ft(t){D.group=t,D.refresh(),v(F)||n.setPanelTitle(F,it())}!function(){var t=y(_(O({id:"",innessStatus:""}).getProperties(),H));D.sortOptions=J(t),D.sortFields=J(W),D.sortOrders=G}()}}]).directive("stDfEntitiesList",["$interpolate","ol3Map","stealth.core.geo.ol3.layers.MapLayer","stealth.dragonfish.display.DisplayServiceManager",M.stealthDragonfishEntityCoordinatePopupManager,k.stealthDragonfishEntityInfoPopupManager,A.stealthDragonfishEntityThumbnailPopupManager,I.stealthDragonfishGroupsCaptureEntityCaptureService,"stealth.dragonfish.groups.entities.Constant","stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.groups.wizard.entityWizard","stealth.dragonfish.lepton.leptonPopupManager","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.sidebarService","stealth.imagery.omar.results.category.ImageryCategoryManager","stealth.imagery.omar.results.ImageFunctions","stealth.imagery.omar.wizard.Query",function(t,e,n,o,a,s,u,d,h,v,y,b,w,_,E,T,M){return{restrict:"E",template:O,controller:["$scope",function(e){e.allSelected=!1,e.buttonOptions=[{name:"Reject Entities",icon:"fa-thumbs-down",onClick:function(){O().then(function(t){var e=c(t,{innessStatus:w.entity.status.deleted});e?F(t,w.entity.status.suggested,!1):F(t,w.entity.status.deleted,!0)})},disabled:function(){return e.isLoading},hidden:function(){return!e.allSelected||!e.group.requestorCanEdit}},{name:"Accept Entities",icon:"fa-flip-horizontal fa-thumbs-up",onClick:function(){O().then(function(t){var e=c(t,{innessStatus:w.entity.status.restored});F(t,e?w.entity.status.suggested:w.entity.status.restored,!1)})},disabled:function(){return e.isLoading},hidden:function(){return!e.allSelected||!e.group.requestorCanEdit}},{name:"Toggle Trash View",icon:"fa-trash-o",onClick:e.toggleTrash,active:function(){return p(e,"layer.viewState.showDeleted",!1)},disabled:function(){return e.isLoading}}],e.decorateCard=function(t){t.scope.collapsedLabels=e.collapsedLabels,t.scope.formatNominator=n,t.scope.labelsTypeaheadEditable=e.labelsTypeaheadEditable,t.scope.preThumbClick=N,t.scope.postThumbClick=R,t.scope.openedLabels=e.openedLabels,t.scope.requestorCanEdit=e.group.requestorCanEdit,t.scope.suggestedLabels=e.suggestedLabels,t.scope.suggestedStatus=w.entity.status.suggested,t.scope.titleAttr=e.titleAttr,t.scope.onLabelChange=function(n){var r=t.scope.record;r.sourceFeature.set("labels",r.labels),v.setEntityLabels(e.group,r.sourceFeature)},t.scope.explain=function(e){b.displayPopup(e,t.scope.record.id)},t.titleWidget=new S.WidgetDef({tag:"st-df-entity-title",scope:t.scope}),t.collapsedWidget=null,t.contentWidget=new S.WidgetDef({tag:"st-df-entity-content",scope:t.scope})},e.filterResolver=function(t){return function(e){return x(e,function(e){return m(e)&&!g(e)&&-1!==e.toLowerCase().indexOf(t.toLowerCase())})}},e.menuResolver=function(t){var n=[];return e.arrayStore.getById(t).then(function(r){n.push.apply(n,[{name:'<i class="fa fa-fw fa-puzzle-piece"></i> More Like This',onClick:function(){_.searchSimilar(r.sourceFeature),e.unhighlight(r.sourceFeature)}},{name:'<i class="fa fa-fw fa-search-plus"></i> Zoom To Entity',onClick:function(){_.zoomTo(r.sourceFeature)}},{name:'<i class="fa fa-fw fa-window-maximize"></i> Open popup',onClick:function(){s.displayPopup(r,e.layer,P())}},{name:'<i class="fa fa-fw fa-globe"></i> View Coordinates',onClick:function(){a.displayPopup(r,P())}},{name:'<i class="fa fa-fw fa-plus-circle"></i> Add Entity To Group',onClick:function(){y.launchWizard([t])}}]),f(o.displayServices,function(t){n.push({name:t.displayOptionText,onClick:function(){t.displayRecord(r)}})}),g(r.nominators)||n.push({name:r.nominatorDisplayState===h.nominatorDisplayState.visible?'<i class="fa fa-eye-slash" aria-hidden="true"></i> Hide Nominators':'<i class="fa fa-eye" aria-hidden="true"></i> Show Nominators',onClick:function(){!function(t){t.nominatorDisplayState!==h.nominatorDisplayState.visible?L(t,"nominatorDisplayState",h.nominatorDisplayState.visible):L(t,"nominatorDisplayState",h.nominatorDisplayState.notVisible),D(t)}(r)}}),l(I,function(t){if(!g(r[t])){var e=new M(C.config.get("imagery.omar")),o=(E.getCategory(),new T(e.params.server));if(g(r.image)){var a=new i.Feature;a.set(e.params.server.idField,r[t]),r.image=a}var s=r.image,l=o.imageId(s),c=E.getImageLayer(l);return n.push({name:'<i class="fa fa-fw fa-image"></i> '+(c?"Remove Image From Map":"Add Image To Map"),onClick:function(){o.toggleImage(s)}}),!1}})}),n},e.onMouseEnter=function(t){e.arrayStore.getById(t).then(function(t){var n=t.sourceFeature;e.highlight(n),t.mouseover=!0,t.nominatorDisplayState===h.nominatorDisplayState.notVisible&&(L(t,"nominatorDisplayState",h.nominatorDisplayState.visibleOnMouseEnter),D(t))})},e.onMouseLeave=function(t){e.arrayStore.getById(t).then(function(t){e.unhighlight(t.sourceFeature),t.mouseover=!1,t.nominatorDisplayState===h.nominatorDisplayState.visibleOnMouseEnter&&(L(t,"nominatorDisplayState",h.nominatorDisplayState.notVisible),D(t))})},e.toolbarWidget=new S.WidgetDef({tag:"st-df-entity-list-toolbar",scope:e});var n=t(C.config.get("dragonfish.groups.entityCard.formatNominator","{{nominator}}")),k=C.config.get("dragonfish.groups.prediction"),A=p(k,"menuOptions",["auto"]),I=C.config.get("dragonfish.groups.imageAttrs",[]);function O(){return e.arrayStore.read().then(function(t){for(var e=[],n=0;n<t.size;++n){var r=t.get(n);r.checked&&e.push(r)}return e},function(){return[]})}function P(){var t=r.element(".listViewMenu").offset(),e=r.element(".primaryDisplay > ccri-popup-container").offset();return[t.left-e.left,t.top-e.top]}function L(t,n,r){t[n]=r,t.sourceFeature.set(n,r),"innessStatus"===n&&L(t,"color",e.entity.colors[r])}function D(t){var n=t.sourceFeature.get("nominatorFeatures");if(!g(n)&&!g(e.nominatorsLayer)){var r=e.nominatorsLayer.getOl3Layer().getSource();t.nominatorDisplayState===h.nominatorDisplayState.notVisible?l(n,function(t){r.removeFeature(t)}):r.addFeatures(n)}}function N(t){e.isLoading=!0,e.updatingRecord=t}function R(t){e.updatingRecord&&(L(e.updatingRecord,"innessStatus",t.get("innessStatus")),s.closePopup(e.updatingRecord.id),u.closePopup(e.updatingRecord.id),e.updatingRecord.innessStatus===w.entity.status.deleted&&(e.unhighlight(e.updatingRecord.sourceFeature),B(e.updatingRecord),e.arrayStore.update())),e.isLoading=!1}function F(t,n,r){e.isLoading=!0,v.addEntitiesToGroup(e.group,t,n).then(function(){r?(l(t,function(t){L(t,"innessStatus",n),e.unhighlight(t.sourceFeature),B(t)}),e.arrayStore.update()):l(t,function(t){L(t,"innessStatus",n)}),e.isLoading=!1},function(){e.isLoading=!1})}function B(t){t.nominatorDisplayState!==h.nominatorDisplayState.notVisible&&(L(t,"nominatorDisplayState",h.nominatorDisplayState.notVisible),D(t))}e.onPanelOpen(),e.$on("$destroy",function(){e.onPanelClose(),d.active&&d.toggleMode()}),e.buttonMenuResolver=function(){var t=[{name:'<i class="fa fa-fw fa-search-plus"></i> Zoom To',onClick:e.zoomToLayer,disabled:function(){return e.isLoading}},{name:'<i class="fa fa-fw fa-save"></i> Export Entities',onClick:e.exportList,disabled:function(){return e.isLoading}},{name:'<i class="fa fa-fw fa-lightbulb-o"></i> Suggest More',onClick:e.suggestMore,disabled:function(){return!e.group.requestorCanEdit||e.isLoading||d.active}},{name:'<i class="fa fa-fw fa-plus-circle"></i> Capture Entity',onClick:function(){d.toggleMode(e.group)},active:function(){return d.active},disabled:function(){return!e.group.requestorCanEdit||e.isLoading}}];g(e.nominatorsLayer)||g(e.suggestions)||t.push({name:g(e.nominatorsLayer.getOl3Layer().getSource().getFeatures())?'<i class="fa fa-eye" aria-hidden="true"></i> Show All Nominators':'<i class="fa fa-eye-slash" aria-hidden="true"></i> Hide All Nominators',onClick:e.toggleAllNominators,disabled:function(){return e.isLoading}});k&&(A.includes("custom")&&t.splice(4,0,{name:'<i class="fa fa-fw fa-line-chart"></i> Create Custom Prediction',onClick:e.launchCustomWizard,disabled:function(){return e.isLoading}}),A.includes("explainable")&&t.splice(4,0,{name:'<i class="fa fa-fw fa-line-chart"></i> Create Explainable Prediction',onClick:e.launchExplainableWizard,disabled:function(){return e.isLoading}}),A.includes("auto")&&t.splice(4,0,{name:'<i class="fa fa-fw fa-line-chart"></i> Generate Predictive Surface',onClick:e.generatePrediction,disabled:function(){return e.isLoading}}));return t}}]}}]).directive("stDfEntityListToolbar",[function(){return{restrict:"E",scope:!1,template:P,controller:["$scope",function(t){t.toggleExtentFilter=function(){t.filterByExtent?t.removeExtentFilter():t.addExtentFilter()}}]}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(209),a=n(39),s=n(113);e.stealthDragonfishEntityCoordinatePopupManager="stealth.dragonfish.entity.coordinatePopupManager";var l=n(3828);r.module("stealth.dragonfish.entity",["ccri.popup"]).service(e.stealthDragonfishEntityCoordinatePopupManager,["$filter","$rootScope","ccri.popup.manager",function(t,e,n){var l={};this.displayPopup=function(c,u){if(!c.geometry)return;if(l[c.id])n.focusPopup(l[c.id]);else{var d=e.$new(),f=i.extent.getCenter(c.geometry.getExtent()),p=t("coordToDMSH")(f),h=t("numberTrim")(f[1],6)+", "+t("numberTrim")(f[0],6),g=p[0]+", "+p[1],m=o.forward(f);d.formats=[{label:"Lat/Lon",value:h},{label:"DMS",value:g},{label:"MGRS",value:m}],d.onClipboard=function(){d.tooltiptext="Copied"},d.resetTooltip=function(){d.tooltiptext="Copy to clipboard"};var v=r.element(".primaryDisplay > ccri-popup-container"),y=v.data("ccri.popup.containerId"),b=s.Popup.Positioning.TopLeft;u||((u=n.getViewportDim(y))[1]=0,b=s.Popup.Positioning.TopRight),l[c.id]=n.displayPopup(y,"Coordinates - "+c.id,"DF_ENTITY","fa-globe",new a.WidgetDef({tag:"st-df-entity-coordinate-popup",scope:d,isolateScope:!0}),{contentMinWidth:250,contentWidth:250,offsets:u,onClose:function(){d.$destroy(),delete l[c.id]},positioning:b})}}}]).directive("stDfEntityCoordinatePopup",[function(){return{restrict:"E",template:l,scope:!1}}])},function(t,e){t.exports='<div class="popupTabContentContainer popupFillSpace">\n    <div class="flex-row flex-align-items-center buf-sm-mt buf-sm-mr buf-sm-ml" ng-repeat="format in formats">\n        <div class="df-attribute-title df-entity-coord-label">{{::format.label}}: </div>\n        <div class="flex-1 df-attribute-val">{{::format.value}}</div>\n        <ccri-angular-utils-clipboard-copy class="control-btn icon-btn" data-clipboard-text="{{::format.value}}">\n        <i class="fa fa-clipboard" uib-tooltip="{{tooltiptext}}" \n                tooltip-class="nowrap" tooltip-placement="right" \n                tooltip-animation="false" tooltip-popup-delay="500" \n                tooltip-trigger="mouseenter" ng-click="onClipboard()"\n                ng-mouseleave="resetTooltip()" ng-init="resetTooltip()"></i>\n        </ccri-angular-utils-clipboard-copy>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(151),o=n(30),a=n(2),s=n(39),l=n(113);e.stealthDragonfishEntityInfoPopupManager="stealth.dragonfish.entity.infoPopupManager",r.module("stealth.dragonfish.entity",["ccri.popup","ccri.popup.components"]).service(e.stealthDragonfishEntityInfoPopupManager,["$rootScope","ccri.popup.manager","stealth.core.popup.components.fieldFormat",function(t,e,n){this.entityPopups={},this.displayPopup=function(c,u,d){if(!c)return;if(this.entityPopups[c.id])e.focusPopup(this.entityPopups[c.id]);else{var f,p=u.layerThisBelongsTo,h=r.element(".primaryDisplay > ccri-popup-container"),g=h.data("ccri.popup.containerId"),m=t.$new(),v=[i(c.sourceFeature.getProperties(),"geometry")],y=l.Popup.Positioning.TopLeft;d||((d=e.getViewportDim(g))[1]=0,y=l.Popup.Positioning.TopRight);var b=o({name:c.id?c.id:"",records:v,metadata:[{source:c.sourceFeature}],capabilities:u.getCapabilities(),dataSource:p},n.formatFromKeywords(v,p?p.KeywordConfig:{}),p?{popupOptionsOverrides:a(p.KeywordConfig,"click.search.customPopup")}:{});m.results=[u.buildSearchPointWidgetsForResponse(b,m)],f=new s.WidgetDef({tag:"ccri-popup-components-tab-container",scope:m,attrs:'results="results" active-tab-idx="activeTabIdx" popup-id="popupId"'}),this.entityPopups[c.id]=e.displayPopup(g,"Entity Details"+(c.id?" - "+c.id:""),"DF_ENTITY","fa-th",f,{offsets:d,onClose:function(){delete this.entityPopups[c.id],m.$destroy(),m=null}.bind(this),positioning:y})}},this.closePopup=function(t){e.closePopup(this.entityPopups[t])}}])},function(t,e){t.exports='<ccri-list-view-element\n        all-selected="allSelected"\n        button-menu-resolver="buttonMenuResolver"\n        button-options="buttonOptions"\n        checkbox-field="checked"\n        class="df-entities-list anchorAll"\n        search-text="searchText"\n        current-filter="currentFilter"\n        datastore="arrayStore"\n        decorate-card="decorateCard"\n        expand-options="true"\n        filter-resolver="filterResolver"\n        items-loading="isLoading"\n        manual-refresh="refresh"\n        manual-refresh-redecorate="true"\n        menu-resolver="menuResolver"\n        on-mouse-enter="onMouseEnter"\n        on-mouse-leave="onMouseLeave"\n        toolbar-widget="toolbarWidget"\n></ccri-list-view-element>\n'},function(t,e){t.exports='<div class="df-sidebar-toolbar">\n    <div class="flex-row flex-justify-content-space-between flex-align-items-center" ng-if="!entityCapture.isDrawing">\n        <span class="clickable" ng-click="toggleExtentFilter()">\n            <i class="fa fa-fw" ng-class="filterByExtent ? \'fa-check-square-o\' : \'fa-square-o\'"></i>\n            Only list items in map extent\n        </span>\n        <ccri-list-view-components-sort\n            fields="sortOptions"\n            datastore="arrayStore"\n            sort-fields="sortFields"\n            sort-order="sortOrders"\n            fields-tracked="2"\n            clearable="true"\n        ></ccri-list-view-components-sort>\n    </div>\n    <hr>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3833);e.stealthDragonfishGroupsWizardGroupWizard=i.stealthDragonfishGroupsWizardGroupWizard;var o=n(3835);e.stealthDragonfishGroupsWizardEntityWizard=o.stealthDragonfishGroupsWizardEntityWizard,e.stealthDragonfishGroupsWizard="stealth.dragonfish.groups.wizard",r.module(e.stealthDragonfishGroupsWizard,[])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(133),o=n(44),a=n(3834);e.stealthDragonfishGroupsWizardGroupWizard="stealth.dragonfish.groups.wizard.groupWizard",r.module("stealth.dragonfish.groups.wizard",[]).service(e.stealthDragonfishGroupsWizardGroupWizard,["$rootScope","wizardManager","ccri.angular-utils.WidgetDef","stealth.core.wizard.Wizard","stealth.core.wizard.Step","stealth.dragonfish.groups.Constant","stealth.dragonfish.groups.classifications","stealth.dragonfish.groups.groupsManager","stealth.dragonfish.groups.panelManager",function(t,e,n,r,a,s,l,c,u){var d=this;function f(t,e){u.addGroup(t),e&&e(t)}this.launchWizard=function(t){e.launchWizard(d.getWizard(t))},this.getWizard=function(e,d){var p=t.$new(),h=(e.id?"Edit":"Create")+" Group";return p.group=i(e),p.classifications=o(l.classifications),p.classLabelFn=l.getLabel,new r(h,s.icon,"fa-check text-success",[new a(h,new n({tag:"st-df-group-edit-wiz",scope:p}),null,!0,null,function(t){t&&(p.group.classification=p.group.classification||null,p.group.id?p.group.isCopy?function(t,e){c.copyGroup(t).then(function(n){var r=i(n);n.name=t.name,n.classification=t.classification,c.updateGroup(n).then(function(t){f(t,e)},function(){f(r,e)})})}(p.group,d):function(t){c.updateGroup(t).then(function(){u.updateGroup(t)})}(p.group):function(t,e){c.addGroup(t).then(function(t){f(t,e)})}(p.group,d))})],p,"wizard-dark")}}]).directive("stDfGroupEditWiz",[function(){return{restrict:"E",replace:!0,template:a}}])},function(t,e){t.exports='<ng-form name="wizardForm" class="df-wizard">\n    <div class="flex-row flex-align-items-center buf-lg-mt buf-xl-mb">\n        <span class="field-descriptor text-right">Name:</span>\n        <input class="field-input" type="text" placeholder="Group Name" ng-model="group.name" />\n    </div>\n    <div class="flex-row flex-align-items-center buf-md-mb" ng-if="classifications.length">\n        <span class="field-descriptor text-right">Classification:</span>\n        <ccri-angular-utils-select\n            class="field-input"\n            ng-model="group.classification"\n            from-list="classifications"\n            label-fn="classLabelFn"\n            placeholder="Unclassified">\n        </ccri-angular-utils-select>\n    </div>\n    <input type="text" ng-model="group.name" class="hidden" required />\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(133),o=n(4),a=n(21),s=n(3836);e.stealthDragonfishGroupsWizardEntityWizard="stealth.dragonfish.groups.wizard.entityWizard",r.module("stealth.dragonfish.groups.wizard",["stealth.core.wizard","ccri.angular-utils"]).service(e.stealthDragonfishGroupsWizardEntityWizard,["$rootScope","wizardManager","ccri.angular-utils.WidgetDef","stealth.core.wizard.Wizard","stealth.core.wizard.Step","stealth.dragonfish.enrich.enrichService","stealth.dragonfish.groups.Constant","stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.groups.entities.panelManager","stealth.dragonfish.groups.groupsManager","stealth.dragonfish.groups.panelManager","stealth.dragonfish.groups.wizard.groupWizard","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.entity","stealth.dragonfish.utils.entityService",function(t,e,n,r,s,l,c,u,d,f,p,h,g,m,v){this.launchWizard=function(l){var p=t.$new();p.groups=[],p.groupLabelFn=function(t){if(!t.requestorCanEdit)return'<i class="fa fa-fw buf-sm-mr fa-clone"></i>'+t.name;return t.name},p.selectGroup=function(t){t.isCopy=!t.requestorCanEdit},f.getGroups().then(function(t){t.push({id:null,name:'<i class="fa fa-fw buf-sm-mr fa-plus"></i>New Group',requestorCanEdit:!0}),p.groups=t});var g=new r("Add Entity To Group",c.icon,"fa-check text-success",[new s("Add Entity To Group",new n({tag:"st-df-entity-wiz",scope:p}),null,!0,function(t){this.truncateSteps(t)},function(t){if(t)if(p.selectedGroup.id&&!p.selectedGroup.isCopy)m(p.selectedGroup);else{var e=i(p.selectedGroup);e.id?e.name="Copy of "+e.name:e.name="New Group ("+a().format("YYYY-MM-DD HH:mm:ss")+")",g.appendWizard(h.getWizard(e,m))}})],p,"wizard-dark");function m(t){var e=o(l,function(t){return{id:t}});u.addEntitiesToGroup(t,e).then(function(e){d.addEntities(t,e)})}e.launchWizard(g)}}]).directive("stDfEntityWiz",function(){return{restrict:"E",template:s}})},function(t,e){t.exports='<ng-form name="wizardForm" class="df-wizard">\n    <div class="flex-row flex-align-items-center buf-lg-mt">\n        <span class="field-descriptor text-right">Group:</span>\n        <ccri-angular-utils-select\n            ng-model="selectedGroup"\n            class="field-input"\n            from-list="groups"\n            label-fn="groupLabelFn"\n            placeholder="Select a Group"\n            ng-change="selectGroup(selectedGroup)"\n        ></ccri-angular-utils-select>\n    </div>\n    <div class="flex-row flex-align-items-center buf-sm-mt"\n        ng-if="selectedGroup.id"\n        ng-disabled="!selectedGroup.requestorCanEdit">\n        <span class="field-descriptor"></span>\n        <span class="field-input">\n            <ccri-angular-utils-checkbox\n                ng-model="selectedGroup.isCopy"\n                ng-disabled="!selectedGroup.requestorCanEdit"\n                class="clickable"\n            ></ccri-angular-utils-checkbox>\n            Copy\n        </span>\n    </div>\n    <input type="hidden" ng-model="selectedGroup" required>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(21),o=n(349),a=n(133),s=n(29),l=n(150),c=n(224),u=n(18),d=n(46),f=n(124),p=n(39),h=n(55),g=n(15),m=n(84),v=n(686),y=n(3838),b=n(3839),w=n(3840),_=n(3841),x=n(3842),S=n(3843),C=n(3844),E=n(3845);e.stealthDragonfishGroupsPanel="stealth.dragonfish.groups.Panel",r.module("stealth.dragonfish.groups",[]).factory(e.stealthDragonfishGroupsPanel,["stealth.dragonfish.groups.entities.panelManager","stealth.dragonfish.groups.Constant","stealth.dragonfish.groups.groupsManager",function(t,e,n){var r=g.config.get("dragonfish.groups.groupPanelSort.fields",e.sort.fields),i=e.sort.options.concat(g.config.get("dragonfish.groups.groupPanelSort.addKeys",[])),o=g.config.get("dragonfish.groups.groupPanelSort.orders",e.sort.orders);return function(a){var l=function(t){return t.requestorIsOwner};function u(t){t.classification=t.classification||"",t.date=v.getMoment(t.date),t.owner=t.owner||"None",t.showEntities=t.showEntities||!1}function d(){function e(){a.arrayStore.updateAndPrune.apply(a.arrayStore,[]),a.isLoading=!1}a.isLoading=!0,n.getGroups().then(function(t){return a.arrayStore.read().then(function(e){for(var n=s(e.toArray(),{showEntities:!0}),r=0;r<t.length;r++)f(n,{id:t[r].id})&&(t[r].showEntities=!0),u(t[r]);return t},e)},e).then(function(e){a.arrayStore.updateAndPrune.apply(a.arrayStore,e),t.updateGroups(e),a.isLoading=!1},e)}this.addGroup=function(t){return u(t),a.arrayStore.add.apply(a.arrayStore,[t]),t},this.removeGroup=function(t){a.arrayStore.getById(t).then(function(t){a.arrayStore.delete.apply(a.arrayStore,[t])})},this.updateGroup=function(t){u(t),a.arrayStore.update.apply(a.arrayStore,[t])},a.addUserFilter=function(){a.arrayStore.addFilter(l),a.userFilter=!0},a.arrayStore=new m.List.ArrayStore([],e.panel.idField),a.clearUserFilter=function(){a.arrayStore.removeFilter(l),a.userFilter=!1},a.isLoading=!1,a.refresh=d,a.sortFields=s(i,function(t){return-1!=c(r,t.prop)}),a.sortOptions=i,a.sortOrders=o,a.userFilter=!1,d()}}]).directive("stDfGroupsList",["$timeout","$uibModal","stealth.dragonfish.groups.classifications","stealth.dragonfish.groups.groupsManager","stealth.dragonfish.groups.entities.Constant","stealth.dragonfish.groups.entities.entityManager","stealth.dragonfish.groups.panelManager","stealth.dragonfish.groups.wizard.groupWizard","stealth.dragonfish.utils.sidebarService",function(t,e,n,r,s,c,m,v,b){return{restrict:"E",template:S,controller:["$scope",function(w){w.decorateCard=function(t){t.scope.getClassLabel=n.getLabel,t.scope.extraStyles={"border-left":"2px solid","border-left-color":t.scope.record.requestorCanEdit?E:t.scope.record.owner===_?S:C,background:t.scope.record.showEntities?"#222":"undefined"},t.titleWidget=new p.WidgetDef({tag:"st-df-groups-list-title",scope:t.scope}),t.collapsedWidget=new p.WidgetDef({tag:"st-df-groups-list-collapsed",scope:t.scope}),t.contentWidget=new p.WidgetDef({tag:"st-df-groups-list-content",scope:t.scope})},w.filterResolver=function(t){return function(e){return f(e,function(e){return d(e)&&!u(e)&&-1!==e.toLowerCase().indexOf(t.toLowerCase())})}},w.menuResolver=function(t){var n=[];return w.arrayStore.getById(t).then(function(t){t.requestorCanEdit?(n.push({name:'<i class="fa fa-fw fa-edit"></i> Edit',onClick:function(){v.launchWizard(t)}}),n.push({name:'<i class="fa fa-fw fa-trash"></i> Delete',onClick:function(){e.open({size:"sm",scope:w,template:x,controller:["$scope",function(e){e.group=t,e.deleteGroup=function(){w.isLoading=!0,r.deleteGroup(t).then(function(t){m.removeGroup(t.data.id),w.isLoading=!1},function(){w.isLoading=!1})}}],backdrop:"static"})}})):n.push({name:'<i class="fa fa-fw fa-user"></i> Checkout',onClick:function(){e.open({size:"sm",scope:w,template:y,controller:["$scope",function(e){e.group=t,e.checkoutGroup=function(){w.isLoading=!0;var e={owner:g.config.get("userDn","None")};r.updateGroup(t,e).then(function(e){e=o(t,e),m.updateGroup(e),w.isLoading=!1},function(){w.isLoading=!1})}}],backdrop:"static"})}}),n.push({name:'<i class="fa fa-fw fa-copy"></i> Copy',onClick:function(){var e=a(t);e.name="Copy of "+e.name,e.isCopy=!0,v.launchWizard(e)}})}),n},w.onMouseEnter=function(e){w.arrayStore.getById(e).then(function(e){t(function(){e.mouseover=!0})})},w.onMouseLeave=function(e){w.arrayStore.getById(e).then(function(e){t(function(){e.mouseover=!1})})},w.toolbarWidget=new p.WidgetDef({tag:"st-df-groups-list-toolbar",scope:w}),w.exportGroups=function(){var t=h.alerter.infoMsg("Exporting Groups CSV...",void 0,{timeOut:0,extendedTimeOut:0,closeButton:!1,toastClass:"waitingToast",iconClass:"waitingToastIcon"});function e(){h.alerter.clearMsg(t),w.isLoading=!1,h.alerter.errorMsg("Exporting Groups CSV failed")}w.isLoading=!0,w.arrayStore.read().then(function(n){return new Promise(function(r,i){var o=(n=n.toArray()).map(function(t){return c.getGroupEntities(t.id)});Promise.all(o).then(function(e,n,r){for(var i=Object.getOwnPropertyNames(n[0]),o=0;o<n.length;o++)for(var a=0;a<r[o].length;a++)for(var s=0;s<i.length;s++)r[o][a].set("group_"+i[s],n[o][i[s]]);b.csvExport(l(r),"Dragonspell_Groups_"+(new Date).toISOString(),k),h.alerter.clearMsg(t),w.isLoading=!1}.bind(this,r,n),e)})},e)},w.buttonMenuResolver=function(){return[{name:'<i class="fa fa-fw fa-save"></i> Export Visible Groups',onClick:function(){w.exportGroups()},disabled:function(){return w.isLoading}},{name:'<i class="fa fa-fw fa-plus-circle"></i> Add Group',onClick:function(){var t="New Group ("+i().format("YYYY-MM-DD HH:mm:ss")+")";v.launchWizard({name:t})},disabled:function(){return w.isLoading}}]};var _=g.config.get("dragonfish.groups.style.neutralUser","Unassigned"),S=g.config.get("dragonfish.groups.style.neutralColor","#888"),C=g.config.get("dragonfish.groups.style.nonOwnerColor","#ddd"),E=g.config.get("dragonfish.groups.style.ownerColor","cornflowerblue"),T=g.config.get("dragonfish.groups.csvEntityDropKeys",s.csvEntityDropKeys),M=g.config.get("dragonfish.groups.csvGroupDropKeys",s.csvGroupDropKeys),k=T.concat(M)}]}}]).directive("stDfGroupsListToolbar",[function(){return{restrict:"E",scope:!1,template:C}}]).directive("stDfGroupsListTitle",["stealth.dragonfish.groups.groupsManager","stealth.dragonfish.groups.panelManager",function(t,e){return{restrict:"E",template:E,controller:["$scope",function(n){n.copiedToClipboard=function(){h.alerter.successMsg("Copied to clipboard!")},n.showClipboard=!1,n.showEntities=e.showEntities,n.togglePrivacy=function(e){if(e.requestorIsOwner&&!e.isLoading){e.isLoading=!0;var n={isPrivate:!e.isPrivate};t.updateGroup(e,n).then(function(t){e.isPrivate=!e.isPrivate,e.isLoading=!1},function(){e.isLoading=!1})}}}]}}]).directive("stDfGroupsListClassificationDisplay",[function(){return{restrict:"E",template:b}}]).directive("stDfGroupsListCollapsed",[function(){return{restrict:"E",template:w}}]).directive("stDfGroupsListContent",[function(){return{restrict:"E",template:_}}])},function(t,e){t.exports='<div class="delete-confirmation">\n    <div class="buf-lg-ma">\n        <div>\n            <span>Group is currently owned by: </span>\n            <span class="df-entity-title">{{::group.owner}}</span>\n        </div>\n        <div class="buf-sm-mt">\n            <span>Are you sure you want to checkout: </span>\n            <span class="df-entity-title-no-break">{{::group.name}}</span>\n            <span>?</span>\n        </div>\n    </div>\n    <div style="text-align:right;">\n        <span class="btn btn-xs action-btn" ng-click="$close()">\n            <i class="fa fa-close text-danger"></i><b> No</b>\n        </span>\n        <span class="btn btn-xs action-btn" ng-click="$close(); checkoutGroup()">\n            <b>Yes </b><i class="fa fa-check text-success"></i>\n        </span>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="small">\n    <span>{{getClassLabel(record.classification)}}</span>\n    <span class="pull-right" ng-if="record.status !== undefined">{{(record.status * 100.0).toFixed(0)}}% Complete</span>\n</div>\n'},function(t,e){t.exports='<div class="buf-sm-mb">\n    <st-df-groups-list-classification-display></st-df-groups-list-classification-display>\n</div>\n'},function(t,e){t.exports='<div class="buf-sm-mb">\n    <st-df-groups-list-classification-display></st-df-groups-list-classification-display>\n    <div ng-if="record.date">\n        <span class="df-attribute-title">Date: </span>\n        <st-datetime class="df-attribute-val" date="record.date"></st-datetime>\n    </div>\n    <div class="ellipsis"\n         uib-tooltip="{{record.owner}}"\n         tooltip-class="nowrap tooltip-order df-tooltip" tooltip-append-to-body="true"\n         tooltip-placement="auto right" tooltip-animate="false"\n         tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n         tooltip-enable="false" ccri-angular-utils-tooltip-overflow="watch">\n        <span class="df-attribute-title">Owner: </span>\n        <span class="df-attribute-val">{{record.owner}}</span>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="delete-confirmation">\n    <div class="buf-lg-ma">\n        <div class="buf-sm-mt">\n            <span>Are you sure you want to delete: </span>\n            <span class="df-entity-title-no-break">{{::group.name}}</span>\n            <span>?</span>\n        </div>\n    </div>\n    <div style="text-align:right;">\n        <span class="btn btn-xs action-btn" ng-click="$close()">\n            <i class="fa fa-close text-danger"></i><b> Cancel</b>\n        </span>\n        <span class="btn btn-xs action-btn" ng-click="$close(); deleteGroup()">\n            <b>Delete </b><i class="fa fa-check text-success"></i>\n        </span>\n    </div>\n</div>\n'},function(t,e){t.exports='<ccri-list-view-element\n    button-menu-resolver="buttonMenuResolver"\n    class="anchorAll df-groups-panel"\n    current-filter="currentFilter"\n    datastore="arrayStore"\n    decorate-card="decorateCard"\n    expand-options="true"\n    filter-resolver="filterResolver"\n    items-loading="isLoading"\n    manual-refresh="refresh"\n    manual-refresh-redecorate="true"\n    menu-resolver="menuResolver"\n    on-mouse-enter="onMouseEnter"\n    on-mouse-leave="onMouseLeave"\n    toolbar-widget="toolbarWidget"\n    search-text="searchText"\n></ccri-list-view-element>\n'},function(t,e){t.exports='<div class="df-sidebar-toolbar df-groups-toolbar">\n    <div class="flex-row flex-align-items-center flex-justify-content-space-between">\n        <span>\n            <span class="clickable" ng-click="addUserFilter()">\n                <i class="fa" ng-class="(userFilter) ? \'fa-dot-circle-o\' : \'fa-circle-o\'"></i>\n                Mine\n            </span>\n            <span class="clickable" ng-click="clearUserFilter()" style="padding-left:8px;">\n                <i class="fa" ng-class="(!userFilter) ? \'fa-dot-circle-o\': \'fa-circle-o\'"></i>\n                All\n            </span>\n        </span>\n        <span>\n            <ccri-list-view-components-sort\n                fields="sortOptions"\n                datastore="arrayStore"\n                sort-fields="sortFields"\n                sort-order="sortOrders"\n                fields-tracked="2"\n                clearable="true"\n            ></ccri-list-view-components-sort>\n        </span>\n    </div>\n    <hr>\n</div>\n'},function(t,e){t.exports='<div class="df-groups-title flex-row flex-align-items-center">\n    <div class="df-group-title flex-1 flex-row flex-align-items-center buf-sm-mr">\n        <ccri-angular-utils-clipboard-copy\n            class="flex-1 ellipsis flex-row flex-align-items-center"\n            ng-click="$event.stopPropagation(); copiedToClipboard()"\n            ng-mouseover="showClipboard = true"\n            ng-mouseleave="showClipboard = false"\n            data-clipboard-text="{{record.name}}">\n            <div class="flex-1 ellipsis"\n                 uib-tooltip="{{record.name}}" tooltip-class="nowrap tooltip-order df-tooltip"\n                 tooltip-append-to-body="true" tooltip-placement="top-left"\n                 tooltip-animate="false" tooltip-popup-delay="500" tooltip-trigger="mouseenter"\n                 tooltip-enable="false" ccri-angular-utils-tooltip-overflow="watch">\n                {{record.name}}\n            </div>\n            <i class="df-group-action fa fa-clipboard buf-sm-mr"\n               ng-show="showClipboard"\n               uib-tooltip="Copy to clipboard" tooltip-class="nowrap tooltip-order df-tooltip"\n               tooltip-append-to-body="true" tooltip-placement="top"\n               tooltip-animate="false" tooltip-popup-delay="500" tooltip-trigger="mouseenter"\n            ></i>\n        </ccri-angular-utils-clipboard-copy>\n    </div>\n    <div class="flex-row flex-align-items-center">\n        <i class="df-group-action fa fa-lg"\n           ng-class="record.isPrivate ? \'fa-lock\' : \'fa-unlock\'"\n           ng-style="{\'cursor\': record.requestorIsOwner ? \'pointer\' : \'not-allowed\'}"\n           ng-click="$event.stopPropagation(); togglePrivacy(record)"\n           uib-tooltip="Toggle Privacy" tooltip-class="nowrap tooltip-order"\n           tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n           tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="500"\n        ></i>\n        <i class="df-group-action fa fa-lg fa-angle-double-right buf-sm-ml"\n           ng-style="{\'visibility\': (record.mouseover || record.showEntities) ? \'visible\' : \'hidden\', \'color\': (record.showEntities) ? \'#e4e4e4\' : \'#6d6d6d\'}"\n           ng-click="$event.stopPropagation(); showEntities(record)"\n           uib-tooltip="Show Entities" tooltip-class="nowrap tooltip-order"\n           tooltip-append-to-body="true" tooltip-trigger="mouseenter"\n           tooltip-placement="top" tooltip-animation="false" tooltip-popup-delay="500"\n        ></i>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(54),a=n(39),s=n(3847),l=n(3848),c=n(686);e.stealthDragonfishLepton="stealth.dragonfish.lepton",r.module(e.stealthDragonfishLepton,["ccri.popup",c.stealthDragonfishUtils]).constant("stealth.dragonfish.lepton.Constant",{endpoint:{lepton:{key:"crusher.lepton.leptonEntitiesUrl",url:"/lepton/findPaths"}},defaultQueryParams:{numNbrs:10,numPairs:4,numHops:3,maxToTakeOfEach:5}}).service("stealth.dragonfish.lepton.leptonService",["$http","CONFIG","stealth.dragonfish.lepton.Constant","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.errorHandling",function(t,e,n,r,a){var s=i(e,"crusher.lepton.numNbrs",n.defaultQueryParams.numNbrs),l=i(e,"crusher.lepton.numPairs",n.defaultQueryParams.numPairs),c=i(e,"crusher.lepton.numHops",n.defaultQueryParams.numHops),u=i(e,"crusher.lepton.maxToTakeOfEach",n.defaultQueryParams.maxToTakeOfEach);this.findPaths=function(e,i){var d=o.getUrl(n.endpoint.lepton,r.baseUrl),f={params:{v1:e,v2:i,numNbrs:s,numPairs:l,numHops:c,maxToTakeOfEach:u}};return t.get(d,f).then(function(t){return t.data},a.error("Failed to explain entities."))}}]).service("stealth.dragonfish.lepton.leptonPopupManager",["$rootScope","ccri.popup.manager",function(t,e){this.displayPopup=function(n,i){var o=t.$new(),s=r.element(".primaryDisplay > ccri-popup-container").data("ccri.popup.containerId");o.v1=n,o.v2=i,e.displayPopup(s,"Similarity Explanation for "+i,"DF_EXPLANATION","fa-puzzle-piece",new a.WidgetDef({tag:"st-df-lepton-popup",scope:o}),{resizable:!0,offsets:[400,100],contentMinWidth:495,contentMinHeight:210,ignoreTitleBarWidth:!0,onClose:function(){o.$destroy()}})}}]).directive("stDfLeptonPopup",[function(){return{restrict:"E",template:l,controller:s.stealthDragonfishLeptopLeptonPopupCtrl}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(14),o=n(22),a=n(18),s=n(53),l=n(2),c=n(1080);e.stealthDragonfishLeptopLeptonPopupCtrl="stealth.dragonfish.lepton.leptonPopupCtrl",r.module("stealth.dragonfish.lepton").controller(e.stealthDragonfishLeptopLeptonPopupCtrl,["$scope","stealth.dragonfish.enrich.enrichService","stealth.dragonfish.lepton.leptonService",function(t,e,n){var r=["onePaths","trueNPaths","twoPaths","hybridThreePaths"];function u(t,e,n,r){return{uri:r?decodeURIComponent(l(e,n,"")):l(e,n,""),type:t}}function d(t,e){return u("vertex",t,e,!1)}function f(t,e){return u("edge",t,e,!0)}function p(t){return e.getEnrichedEntities([t],"application/vnd.description").then(function(e){return a(e)?{id:t,description:"No description available."}:e[0]})}t.bestPath=null,t.currentIndex=0,t.explanationFailed=!1,t.explanationLoading=!1,t.sortedPaths=[],t.updateDescription=function(e){s(e,"uri")&&p(e.uri).then(function(e){t.info=e})},i(t.v1)||i(t.v2)||(t.explanationLoading=!0,n.findPaths(t.v1,t.v2).then(function(e){return o(r,function(n){o(e[n],function(e){t.sortedPaths.push(function(t){var e=t.edges;return c(e.slice(1),function(t,e){var n=t[t.length-1].uri;t.push(f(e,"label")),n===e.root.uri?t.push(d(e,"leaf.uri")):t.push(d(e,"root.uri"))},[d(e[0],"root.uri"),f(e[0],"label"),d(e[0],"leaf.uri")])}(e))})}),t.explanationLoading=!1,t.sortedPaths[t.currentIndex]},function(){t.explanationLoading=!1,t.explanationFailed=!0}).then(function(e){if(t.bestPath=e,!a(e)&&s(e[0],"uri"))return p(e[0].uri)}).then(function(e){t.info=e})),t.hasNext=function(){return t.currentIndex<t.sortedPaths.length-1},t.hasPrevious=function(){return t.currentIndex>0},t.nextPath=function(){t.hasNext()&&(t.currentIndex=t.currentIndex+1,t.bestPath=t.sortedPaths[t.currentIndex])},t.prevPath=function(){t.hasPrevious()&&(t.currentIndex=t.currentIndex-1,t.bestPath=t.sortedPaths[t.currentIndex])}}])},function(t,e){t.exports='<div class="df-lepton-explanation popupTabContentContainer popupFillSpace">\n    <div ng-if="!explanationLoading && !explanationFailed">\n        Path {{ currentIndex + 1 }} of {{ sortedPaths.length }}\n        <i class="btn fa fa-chevron-left control-btn icon-btn"\n           ng-class="{\'disabled\': !hasPrevious()}"\n           ng-click="prevPath()"\n        ></i>\n        <i class="btn fa fa-chevron-right control-btn icon-btn"\n           ng-class="{\'disabled\': !hasNext()}"\n           ng-click="nextPath()"\n        ></i>\n    </div>\n    <div class="df-lepton-explanation-container text-center">\n        <div ng-repeat="item in bestPath track by $index"\n             class="flex-row flex-align-items-center">\n            <span ng-if="item.type === \'vertex\'"\n                  class="df-lepton-node"\n                  ng-class="{active: item.uri === info.id}"\n                  ng-click="updateDescription(item)">\n                <span>{{ item.uri }}</span>\n            </span>\n            <span ng-if="item.type === \'edge\'"\n                  class="df-lepton-connection-line"\n                  uib-tooltip="{{item.uri}}" tooltip-class="df-tooltip"\n                  tooltip-append-to-body="true" tooltip-trigger="mouseenter">\n                <hr>\n            </span>\n        </div>\n    </div>\n    <div class="text-center">\n        <span ng-if="explanationLoading" class="df-explanation-message">\n            Loading...\n            <i class="fa fa-circle-o-notch fa-spin"></i>\n        </span>\n        <span ng-if="explanationFailed" class="df-explanation-message df-explanation-error-message">\n            No explanation available.\n        </span>\n    </div>\n    <div class="vertically-buffered df-lepton-box"\n         ng-if="!explanationLoading && !explanationFailed && info.id">\n        <p><strong>{{info.id}}</strong></p>\n        <p>{{info.description}}</p>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(96),a=n(134),s=n(29),l=n(4),c=n(84),u=n(39),d=n(95),f=n(3850),p=n(3851);e.stealthDragonfishResults="stealth.dragonfish.results",r.module(e.stealthDragonfishResults,[]).service("stealth.dragonfish.results.resultsService",["$rootScope","ol3Map","CONFIG","sidebarManager","stealth.core.geo.ol3.layers.FeatureLayer","stealth.dragonfish.entity.Category","stealth.dragonfish.geo.ol3.layers.styler","stealth.dragonfish.geo.ol3.layers.EntityConstant","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.entityService","stealth.dragonfish.utils.sidebarService",function(t,e,n,r,f,p,h,g,m,v,y){this.display=function(t,b){var w=y.createScope(t),_=new p(w.request.getTitle(),m.icon),x=r.toggleButton(r.addButton(w.request.getTitle(),m.icon,350,new u.WidgetDef({tag:"st-df-results-sidebar",scope:w,isolateScope:!0}),void 0,!1,S),!0);function S(){x=null,w.layer&&_.removeLayer(w.layer),w.arrayStore.close(),w.$destroy()}w.arrayStore=new c.List.ArrayStore([],"id"),w.sliderConfig=i(n,"dragonfish.results.slider",m.resultSlider),w.sliderConfig=o(w.sliderConfig,m.resultSlider),w.space=m.space,w.updateMap=function(){w.layer&&(w.layer.updateMap(),w.arrayStore.clearFilters(),w.arrayStore.addFilter(function(t){return function(e){return e.score>=t}}(w.layer.viewState.filterFieldCutoff)))},b.then(function(n){w.results=a(n,v.score).reverse();var r=s(w.results,v.geometry);x&&r.length&&function(n){w.layer=new f({id:d.uuid.generate(),name:w.request.getTitle(),features:n,iconClass:m.icon,styleDirective:"st-df-entity-layer-style-view",styleFnViewState:h.curriedStyleFunction,onStyleDirectiveRemoved:S,viewState:{originId:t.entityId,filterField:"score",filterFieldCutoff:w.sliderConfig.value||w.sliderConfig.min,colorById:!0}}),w.layer.styleDirectiveScope.sliderConfig=w.sliderConfig,w.layer.sidebarButtonId=x,_.addLayer(w.layer),e.fit(w.layer.getExtent())}(r),w.arrayStore.updateAndPrune.apply(w.arrayStore,function(e){return l(e,function(e){var n=e.getProperties();return n.sourceFeature=e,n.thumbnail=y.composeThumbnailUrl(e),n.color=t.entityId===n.id?g.originPinStyle.text.fill.getColor():g.pinStyle.text.fill.getColor(),n})}(w.results)),w.arrayStore.sortBy(["score"],["desc"]),w.queryRunning=!1},function(){w.queryRunning=!1,w.results=[]})}}]).directive("stDfResultsSidebar",["CONFIG","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.sidebarService","stealth.dragonfish.lepton.leptonPopupManager",function(t,e,n,r){return{restrict:"E",template:f,controller:["$scope",function(e){e.menuResolver=function(t){var i=[];return e.arrayStore.getById(t).then(function(t){i.push({name:"More Like This",onClick:function(){n.searchSimilar(t.sourceFeature,e.request),e.unhighlight(t.sourceFeature)}}),i.push({name:"Zoom To Entity",onClick:function(){n.zoomTo(t.sourceFeature)}}),i.push({name:"Explain",onClick:function(t){var n=e.request.entityId,i=t;r.displayPopup(n,i)}})}),i},e.decorateCard=function(e){e.scope.titleAttr=i(t,"dragonfish.results.entityCard.titleAttr","name"),e.scope.collapsedLabels=i(t,"dragonfish.results.entityCard.collapsedLabels",["score"]),e.scope.openedLabels=i(t,"dragonfish.results.entityCard.openedLabels",["time","description"]),e.titleWidget=new u.WidgetDef({tag:"st-df-entity-title",scope:e.scope}),e.collapsedWidget=null,e.contentWidget=new u.WidgetDef({tag:"st-df-entity-content",scope:e.scope})},e.toolbarWidget=new u.WidgetDef({tag:"st-df-results-toolbar",scope:e}),e.onMouseEnter=function(t){e.arrayStore.getById(t).then(function(t){e.highlight(t.sourceFeature)})},e.onMouseLeave=function(t){e.arrayStore.getById(t).then(function(t){e.unhighlight(t.sourceFeature)})}}]}}]).directive("stDfResultsToolbar",[function(){return{restrict:"E",scope:!1,template:p}}])},function(t,e){t.exports='<ccri-list-view-element datastore="arrayStore"\n                        decorate-card="decorateCard"\n                        menu-resolver="menuResolver"\n                        filter-resolver="filterResolver"\n                        toolbar-widget="toolbarWidget"\n                        on-mouse-enter="onMouseEnter"\n                        on-mouse-leave="onMouseLeave"\n                        expand-options="true"\n                        is-loading="queryRunning"\n                        class="anchorAll"/>\n'},function(t,e){t.exports='<div class="df-sidebar-toolbar">\n    <uib-progressbar ng-if="queryRunning" value="100" type="primary"\n        class="progress-striped active buf-md-mb">\n        Evaluating\n    </uib-progressbar>\n\n    <div ng-if="!queryRunning && !results.length" class="buf-md-mv">\n        <i class="fa fa-fw fa-lg fa-exclamation-triangle df-warning"></i>\n        Query returned no results\n    </div>\n\n     <div ng-class="{\'ng-hide\': !results.length}" class="ccriRangeInput">\n        <div>\n            <span class="df-attribute-title">Score Threshold: </span>\n            <span class="df-attribute-val">{{layer.viewState.filterFieldCutoff.toFixed(2)}}</span>\n        </div>\n        <div class="opacitySlider layerStyleRow">\n            <div ui-slider\n                 class="buf-md-mv"\n                 ng-model="layer.viewState.filterFieldCutoff"\n                 min="{{::sliderConfig.min}}"\n                 max="{{::sliderConfig.max}}"\n                 step="{{::sliderConfig.step}}"\n                 ccri-angular-utils-change="updateMap()"\n                 ccri-angular-utils-change-delay="30"\n                 use-decimals\n            ></div>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3853);e.stealthDragonfishSimilarity="stealth.dragonfish.similarity",r.module(e.stealthDragonfishSimilarity,[i.stealthDragonfishSimilarityRunner]).constant("stealth.dragonfish.similarity.Constant",{endpoint:{knn:{key:"knn.url",url:"/knn-endpoint/knn/{{encodeURIComponent(entityId)}}?k={{k}}"},enrich:{key:"crusher.enrich.enrichEntitiesUrl",url:"/enrich/{{encodeURIComponents(entityIds).join()}}"}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(164),o=n(22),a=n(4),s=n(30),l=n(2),c=n(54);e.stealthDragonfishSimilarityRunner="stealth.dragonfish.similarity.runner",r.module(e.stealthDragonfishSimilarityRunner).service("stealth.dragonfish.similarity.runner.service",["$http","CONFIG","stealth.dragonfish.enrich.enrichService","stealth.dragonfish.similarity.Constant","stealth.dragonfish.utils.Constant","stealth.dragonfish.utils.entity","stealth.dragonfish.utils.errorHandling",function(t,e,n,r,u,d,f){this.run=function(p){var h=c.getUrl(r.endpoint.knn,i(u.baseUrl,{entityId:p.entityId,k:l(e,"knn.k",30)}));return t.get(h).then(function(t){var r={};o(t.data,function(t){r[t.id]=t.score});var i=a(t.data,"id");return n.getEnrichedEntities(i).then(function(t){var n=l(e,"knn.geomField");return a(t,function(t){return n&&(t.geom=l(t,n)),d(s(t,{name:t.desc||t.id,score:l(r,t.id,0)}))})},function(){return a(t.data,function(t){return d(t)})})},f.error("Failed to run similarity search."))}}]).run(["$rootScope","stealth.dragonfish.results.resultsService","stealth.dragonfish.similarity.runner.service","stealth.knn.Constant",function(t,e,n,r){t.$on(r.applyEvent,function(t,r){var i=n.run(r).then(function(t){return t},function(){return[]});e.display(r,i)})}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3855),o=n(1228),a=n(3856);e.knnApplyEvent="knn:simsearch:apply",r.module("stealth.knn",[]).constant("stealth.knn.Constant",{applyEvent:e.knnApplyEvent}).factory("stealth.knn.QueryParams",o.QueryParams).service("stealth.knn.QueryParamsService",a.QueryParamsService).run(i.$run)},function(t,e,n){"use strict";var r=this;Object.defineProperty(e,"__esModule",{value:!0});var i=n(96),o=n(2),a=n(14),s=function(t,e,n,s){e.addCapabilitiesExtender(function(e,l){if(!a(e.knn)){var c=o(r,"isFilterable",!1),u=c?r.filterMultiple:null;e.knn=i(e.knn,{toolTipText:"More like this",iconClass:"fa-bars"}),e.knn.onClick=function(r,i,a,l){var d=o(e,"knn.recordURLField","S"),f=o(e,"knn.recordExtentField","O"),p=o(l,"source.properties",i),h=o(p,d,!1),g=o(p,f);if(h){var m={get:function(t){if("id"===t)return h;if("name"===t)return h;if("extent"===t)return g;throw new Error("Cannot get "+t+" from stealth.knn 'result' pseudo-ol.Feature")}},v=s.runnerParams(m,c,u,d);t.$emit(n.applyEvent,v)}}}return e})};e.$run=s,s.$inject=["$rootScope","coreCapabilitiesExtender","stealth.knn.Constant","stealth.knn.QueryParamsService"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1228),i=function(){function t(){}return t.prototype.runnerParams=function(t,e,n,i){var o="Similarity Results",a=t.name||t.get("name");return a&&(o+=" for "+a),new r.QueryParams(o,t.id||t.get("id"),e,n,i)},t}();e.QueryParamsService=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3858),o=n(3871),a=n(96),s=n(23),l=n(2),c=n(53),u=n(14),d=n(6);r.module("stealth.imagery.omar",["stealth.core.startmenu",i.stealthImageryOmarResults,o.stealthImageryOmarWizard]).constant("stealth.imagery.omar.OMAR",{defaultTitle:"Image Search",defaultIcon:"fa-image",titleConfigKey:"imagery.omar.title",iconConfigKey:"imagery.omar.icon",searchEvent:"imagery:search",panelWidth:375,sort:{fields:[{label:"Name",prop:"name"}],orders:["asc"]}}).run(["$rootScope","categoryManager","CONFIG","coreCapabilitiesExtender","ol3Map","startMenuManager","stealth.imagery.omar.OMAR","stealth.imagery.omar.results.ImageFunctions","stealth.imagery.omar.wizard","stealth.imagery.geo.ol3.layers.TileConstant","toastr",function(t,e,n,r,i,o,f,p,h,g,m){if(t.$on(g.removeEvent,function(t,n){i.removeLayerById(n.layerId),n.categoryId&&e.removeCategory(n.categoryId)}),c(n,"imagery.omar")){var v=l(n,f.titleConfigKey,f.defaultTitle),y=l(n,f.iconConfigKey,f.defaultIcon);o.addButton(v,y,h.launchWizard);var b=l(n,"imagery.omar.servers",[]);r.addCapabilitiesExtender(function(t,e){return u(t.omar)||(t.omar=a(t.omar,{toolTipText:"Toggle Map Image",iconClass:"fa-map-o"}),t.omar.onClick=function(e,n,r,i){var o,a=l(t,"omar.imageSrcField"),c=l(t,"omar.imageNameField",a),f=l(t,"omar.serverName");if(u(f)||(o=s(b,function(t){return f===t.name})),!u(o)){var h=new p(o),g=l(o,"idField","id"),m=l(o,"nameField","name"),v=l(i,"source.properties",n),y=l(v,a),w=l(v,c,y);if(!u(y)){var _=new d.Feature;_.set(g,y),_.set(m,w),h.toggleImage(_)}}}),t})}else m.error("This plugin will not be available.","OMAR plugin mis-configured",{timeOut:0,extendedTimeOut:0})}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(62),o=n(6),a=n(22),s=n(2),l=n(18),c=n(46),u=n(14),d=n(4),f=n(151),p=n(124),h=n(84),g=n(95),m=n(39),v=n(3859),y=n(3860),b=n(3861),w=n(3862),_=n(3863),x=n(3864),S=n(3865),C=n(3867),E=n(3869),T=n(3870);e.stealthImageryOmarResults="stealth.imagery.omar.results",r.module(e.stealthImageryOmarResults,["ccri.angular-utils","ccri.list-view","stealth.core.geo.ol3.utils",S.stealthImageryOmarResultsCategory]).run(["$rootScope","stealth.imagery.omar.OMAR","stealth.imagery.omar.results.Panel","stealth.imagery.omar.results.PanelScopeInitializer",function(t,e,n,r){t.$on(e.searchEvent,function(e,i){new n(new r(t.$new(),i))})}]).factory("stealth.imagery.omar.results.PanelScopeInitializer",["toastr",C.stealthImageryOmarResultsImageFunctions,"stealth.imagery.omar.results.category.ImageryCategoryManager",E.stealthImageryOmarResultsImagerySelection,function(t,e,n,r){return function(t,i){return t.arrayStore=new h.List.ArrayStore([],"id"),t.category=n.getCategory(),t.getImageLayer=n.getImageLayer,t.layerColor="#3399CC",t.query=i,t.select=new r,t.imageFunctions=new e(t.query.params.server),t.toggleImage=t.imageFunctions.toggleImage,u(i.layerToRemove)||t.category.removeLayer(i.layerToRemove),t}}]).factory("stealth.imagery.omar.results.Panel",["toastr","CONFIG","sidebarManager","stealth.core.geo.ol3.format.GeoJson","stealth.core.geo.ol3.layers.FeatureLayer","stealth.core.geo.ol3.utils.geomHelper","stealth.imagery.omar.OMAR","stealth.imagery.omar.wizard",function(t,e,n,r,i,l,c,p){return function(h){var v=n.toggleButton(n.addButton(h.query.params.storeName,"fa-image",c.panelWidth,new m.WidgetDef({tag:"st-im-omar-select-list",scope:h,isolateScope:!0}),void 0,!1,y),!0);function y(){n.removeButton(v,!1),u(h.select.coverageLayer)||(h.select.coverageLayer.sidebarButtonId=null,h.category.removeLayer(h.select.coverageLayer)),h.$destroy()}h.restart=function(){var t=this.query;y(),p.launchWizard(t)},h.sort=c.sort,h.query.findImagery().then(function(t){var n=function(t){var e=("GML"===h.query.params.server.parser?new o.format.GML2:new r).readFeatures(t);return h.query.params.server.requiresFlip&&a(e,function(t){l.flipXY(t.getGeometry())}),e}(t.data),u=d(n,h.imageFunctions.getImageRecord);h.arrayStore.updateAndPrune.apply(h.arrayStore,u),h.select.coverageLayer=function(t){var n=new i({id:g.uuid.generate(),features:t,name:h.query.params.storeName,iconClass:s(e,c.iconConfigKey,c.defaultIcon),styleFn:h.select.overlayStyle("rgba(255,255,255,0.1)",h.layerColor),styleDirective:"st-im-omar-layer-style",onStyleDirectiveRemoved:h.category.removeLayer,featureFilterFunc:function(t){return f(t.getProperties(),h.query.params.server.dropKeys)}});return n.styleDirectiveScope.layerColor=h.layerColor,n.styleDirectiveScope.changeLayerColor=function(t){n.styleDirectiveScope.layerColor=h.layerColor=t,n.styleDirectiveScope.getViewState().fillColor=t,n.getOl3Layer().setStyle(h.select.overlayStyle("rgba(255,255,255,0.1)",t))},n.getCapabilities=function(){return{addImageToMap:{toolTipText:"Toggle Map Image",iconClass:"fa-map-o",onClick:function(t,e,n,r){h.toggleImage(r)}}}},n.categoryType="Searches",n.query=h.query,n.queryDetails={cqlParams:{additionalCql:n.query.params.cql},geometry:n.query.params.features,source:n.query.params.server.name,timeBounds:{start:n.query.params.startDtg.toISOString(),end:n.query.params.endDtg.toISOString()}},n.sidebarButtonId=v,h.category.addLayer(n)}(n),h.sort.options=h.imageFunctions.getSortOptions()},function(){t.error("Error: image search failed")})}}]).directive("stImOmarSelectList",["$rootScope",function(t){return{restrict:"E",template:_,controller:["$scope",function(t){t.buttonOptions=[{name:"Zoom To All",icon:"fa-search-plus",onClick:t.select.zoomToCoverage,disabled:function(){return 0===t.arrayStore.getTotalCount()}}],t.decorateCard=function(e){e.scope.record.tooltip="<img src='"+e.scope.record.url+"' class='imagery-tooltip-img'>",e.scope.dtgField=t.query.params.server.dtgField,e.titleWidget=new m.WidgetDef({tag:"st-im-omar-list-title",scope:e.scope}),e.collapsedWidget=new m.WidgetDef({tag:"st-im-omar-list-collapsed",scope:e.scope}),e.contentWidget=new m.WidgetDef({tag:"st-im-omar-list-content",scope:e.scope})},t.filterResolver=function(t){var e=t.toLowerCase();return function(t){return-1!==t.name.toLowerCase().indexOf(e)||p(t.properties,function(t){return c(t)&&!l(t)&&-1!==t.toLowerCase().indexOf(e)})}},t.toolbarWidget=new m.WidgetDef({tag:"st-im-omar-list-toolbar",scope:t}),t.menuResolver=function(e){var n=[];return t.arrayStore.getById(e).then(function(e){n.push({name:"Zoom To",onClick:function(){t.select.zoomToImage(e.sourceFeature)}});var r=e.sourceFeature,i=t.imageFunctions.imageId(r),o=t.getImageLayer(i);n.push({name:o?"Remove From Map":"Add To Map",onClick:function(){t.toggleImage(r)}}),o&&n.push({name:o.styleDirectiveScope.layerState.visible?"Hide Image":"Show Image",onClick:function(){o.styleDirectiveScope.toggleVisibility()}})}),n},t.onMouseEnter=function(e){t.arrayStore.getById(e).then(function(e){t.select.imageMouseenter(e.sourceFeature)})},t.onMouseLeave=function(e){t.arrayStore.getById(e).then(function(e){t.select.imageMouseleave(e.sourceFeature)})}}]}}]).directive("stImOmarListTitle",[function(){return{restrict:"E",template:x}}]).directive("stImOmarListCollapsed",[function(){return{restrict:"E",template:v,controller:["$scope",T.stealthImageryOmarResultsPopupManager,function(t,e){t.preventParentClick=function(t){t.stopPropagation()},t.showTooltip=function(n){n.stopPropagation(),r.element(i(".imagery-tooltip-thumbnail")).remove(),e.displayPopup(t.record)}}]}}]).directive("stImOmarListContent",[function(){return{restrict:"E",template:y}}]).directive("stImOmarListToolbar",[function(){return{restrict:"E",scope:!1,template:w}}]).directive("stImOmarLayerStyle",[function(){return{restrict:"E",template:b}}])},function(t,e){t.exports='<div class="imagery-results-collapsed">\n    <div class="imagery-thumbnail" ng-style="{\'background-image\':\'url({{::record.url}})\'}"\n        ng-click="showTooltip($event)"\n        uib-tooltip-html="::record.tooltip" tooltip-class="imagery-tooltip-thumbnail"\n        tooltip-append-to-body="true" tooltip-placement="auto right"\n        tooltip-animate="false" tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n        <div class="imagery-thumbnail-overlay"><i class="fa fa-search-plus"></i></div>\n    </div>\n    <div class="imagery-text">\n        <div ng-repeat="(key, val) in ::record.properties">\n            <span ng-if="key===dtgField">\n                {{::key}}: <st-datetime class="imagery-text-attr" date="::val"></st-datetime>\n            </span>\n            <span ng-if="key!==dtgField">\n                {{::key}}: <span class="imagery-text-attr">{{::val}}</span>\n            </span>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="imagery-results-content">\n    <div class="imagery-thumbnail" ng-style="{\'background-image\':\'url({{::record.url}})\'}"\n        uib-tooltip-html="::record.tooltip" tooltip-class="imagery-tooltip-thumbnail"\n        tooltip-append-to-body="true" tooltip-placement="auto right"\n        tooltip-animate="false" tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n        <div class="imagery-thumbnail-overlay"><i class="fa fa-search-plus"></i></div>\n    </div>\n    <div class="imagery-text">\n        <div ng-repeat="(key, val) in ::record.properties">\n            {{::key}}: <span class="imagery-text-attr">{{::val}}</span>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="im-style-tab">\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.visibilityName\'"></ui-include>\n    <ui-include src="\'core/geo/ol3/layers/layer-fragments.tpl.html\'" fragment="\'.opacitySlider\'"></ui-include>\n    <div class="layerStyleRow flex-row flex-align-items-center">\n        <div class="rangeSliderStartLabel">Color</div>\n        <span class="horizontally-buffered">\n            <span class="fa fa-lg fa-square clickable colorpickerSquare"\n                  ng-style="{color: layerColor}"\n                  colorpicker colorpicker-position="bottom"\n                  ng-model="layerColor"\n                  ng-change="changeLayerColor(layerColor)"\n                  uib-tooltip="Change color" tooltip-class="nowrap"\n                  tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"\n                  tooltip-trigger="mouseenter" tooltip-append-to-body="true">\n            </span>\n        </span>\n        <div class="rangeSliderEndLabel">&nbsp;</div>\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="imagery-results-toolbar">\n    <uib-progressbar class="progress-striped active" value="100" ng-if="query.running">\n        Searching...\n    </uib-progressbar>\n    <div ng-if="!query.running">\n        <span ng-if="::arrayStore.getTotalCount()"\n            class="flex-row flex-justify-content-space-between">\n            <span>\n                <ccri-angular-utils-checkbox\n                    ng-model="select.coverageLayer.styleDirectiveScope.layerState.visible"\n                ></ccri-angular-utils-checkbox>\n                <span class="clickable show-footprints-txt" ng-click="select.toggleCoverage()">\n                    Show footprints\n                </span>\n            </span>\n            <ccri-list-view-components-sort\n                datastore="arrayStore"\n                fields="sort.options"\n                sort-fields="sort.fields"\n                sort-order="sort.orders"\n            ></ccri-list-view-components-sort>\n        </span>\n        <span ng-if="::!arrayStore.getTotalCount()">\n            No Imagery Found\n            <button class="btn btn-primary btn-xs search-again-btn" ng-click="restart()">Search Again</button>\n        </span>\n    </div>\n    <hr>\n</div>\n'},function(t,e){t.exports='<ccri-list-view-element datastore="arrayStore"\n                        decorate-card="decorateCard"\n                        menu-resolver="menuResolver"\n                        toolbar-widget="toolbarWidget"\n                        filter-resolver="filterResolver"\n                        on-mouse-enter="onMouseEnter"\n                        on-mouse-leave="onMouseLeave"\n                        button-options="buttonOptions"\n                        expand-options="true"\n                        class="anchorAll"/>\n'},function(t,e){t.exports='<div class="imagery-results-title imagery-text-truncated"\n    uib-tooltip="{{::record.name}}"\n    tooltip-class="nowrap tooltip-order imagery-tooltip"\n    tooltip-append-to-body="true" tooltip-placement="right" tooltip-animate="false"\n    tooltip-popup-delay="600" tooltip-trigger="mouseenter"\n    tooltip-enable="false" ccri-angular-utils-tooltip-overflow>\n    {{::record.name}}\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(22),a=n(23),s=n(2),l=n(34),c=n(14),u=n(30),d=n(1059),f=n(39),p=n(3866);e.stealthImageryOmarResultsCategory="stealth.imagery.omar.results.category",r.module(e.stealthImageryOmarResultsCategory,["stealth.core.geo.analysis.category","stealth.query-edit"]).factory("stealth.imagery.omar.results.category.Category",["$rootScope","$timeout","ol3Map","sidebarManager","stealth.core.geo.ol3.manager.Category","stealth.core.geo.ol3.overlays.Vector","stealth.imagery.omar.wizard",function(t,e,n,a,p,h,g){var m=function(e,m){var v=t.$new();v.categories={Images:{title:"Added Images",visible:!0,layers:[]},Searches:{title:"Search Results",visible:!0,layers:[]}},this.addLayer=function(t){return t.viewState=u(s(t,"viewState",{}),{toggledOn:!0}),t.categoryType&&v.categories[t.categoryType].layers.push(t),n.addLayer(t),t.menuOptions=[{label:'<i class="fa fa-fw fa-remove"></i> Remove',onClick:function(){v.removeLayer(t)}}],"Searches"===t.categoryType&&t.menuOptions.unshift({label:'<i class="fa fa-fw fa-edit"></i> Edit',onClick:function(){t.query.layerToRemove=t,g.launchWizard(t.query)}}),t},this.removeLayer=function(t){if(t.sidebarButtonId){var e=r.copy(t.sidebarButtonId);t.sidebarButtonId=null,a.removeButton(e)}else t.categoryType&&(v.categories[t.categoryType].layers=d(v.categories[t.categoryType].layers,t)),n.removeLayer(t),t.ol3Layer&&t.onDestroy&&t.onDestroy()},this.getCategoryLayers=function(t){return v.categories[t].layers},v.launchOmarWizard=function(){g.launchWizard()},v.onLayerNameChange=function(t){t.sidebarButtonId&&a.setPanelTitle(t.sidebarButtonId,t.name);var e=t.getOl3Layer();e&&e.set("name",t.name),c(t.query)||c(t.query.params)||(t.query.params.storeName=t.name)},v.toggleCategoryVisibility=function(t){v.categories[t].visible=!v.categories[t].visible,o(v.categories[t].layers,function(t){t.styleDirectiveScope.toggleVisibility()})},v.removeLayer=this.removeLayer;var y=[new i.style.Style({stroke:new i.style.Stroke({color:"rgb(255,255,255)",width:4})}),new i.style.Style({stroke:new i.style.Stroke({color:"rgb(255,82,64)",width:2})})];v.highlightLayer=new h({styleBuilder:function(){return y}}),v.highlightLayer.addToMap(),p.apply(this,[0,e,"fa-image",new f.WidgetDef({tag:"st-im-omar-category",scope:v}),null,!0,!0,function(){o(v.categories,function(t){o(t.layers,function(t){v.removeLayer(t)})}),v.highlightLayer.removeFromMap(),v.highlightLayer=y=null,v.$destroy(),l(m)&&m()}])};return m.prototype=Object.create(p.prototype),m}]).service("stealth.imagery.omar.results.category.ImageryCategoryManager",["$log","categoryManager","stealth.imagery.omar.results.category.Category",function(t,e,n){var r,i=this;this.getCategory=function(){return r||(r=e.addCategory(2,new n("Imagery",function(){r=null}))),r},this.addImageLayer=function(t){var e=i.getCategory(),n=i.getImageLayer(t.getName());return n||(n=e.addLayer(t)),n.getOl3Layer().setVisible(!0),n},this.removeImageLayer=function(e){r?r.removeLayer(e):t.warn("Image Category should exist")},this.getImageLayer=function(t){return r?a(r.getCategoryLayers("Images"),function(e){return l(e.getImageId)&&e.getImageId()===t}):null}}]).directive("stImOmarCategory",[function(){return{restrict:"E",template:p}}]).run(["stealth.imagery.omar.results.category.ImageryCategoryManager",function(t){t.getCategory()}])},function(t,e){t.exports='<div ng-repeat="category in categories | lodash:\'keys\' | orderBy track by category" class="categoryGrouping im-explore-tab">\n    <div class="categoryCell">\n        <st-toggle-map-layer visible="categories[category].visible"\n                             toggle="toggleCategoryVisibility(category)"\n        ></st-toggle-map-layer>\n    </div>\n    <div class="categoryCell">\n        <b>{{::categories[category].title}}</b>\n    </div>\n    <div ng-if="category == \'Searches\'" class="categoryCell">\n        <div class="btn btn-default fa-stack toggleButton"\n             ng-click="launchOmarWizard()"\n             uib-tooltip="Add layer"\n             tooltip-class="nowrap"\n             tooltip-placement="right"\n             tooltip-animation="false"\n             tooltip-popup-delay="500"\n             tooltip-trigger="mouseenter">\n            <i class="fa fa-fw fa-plus fa-stack-1x text-primary"></i>\n        </div>\n    </div>\n    <div class="categoryGrouping">\n        <div ng-repeat="layer in categories[category].layers track by layer.id"\n             class="flex-row buf-sm-mt menu-triggerContainer"\n             ng-class="{\'categoryIndent\': !layer.queryDetails}">\n            <div class="clickable"\n                 ng-class="{\'ng-hide\': !layer.queryDetails}"\n                 ng-click="layer.viewState.isExpanded = !layer.viewState.isExpanded">\n                 <i class="fa fa-fw"\n                    ng-class="layer.viewState.isExpanded ? \'fa-caret-down\' : \'fa-caret-right\'"\n                 ></i>\n             </div>\n            <st-toggle-map-layer visible="layer.styleDirectiveScope.layerState.visible"\n                                 toggle="layer.styleDirectiveScope.toggleVisibility()"\n            ></st-toggle-map-layer>\n            <div ng-switch="category" class="flex-1">\n                <div ng-switch-when="Searches">\n                    <div class="flex-row">\n                        <input type="text"\n                               class="flex-1 form-control input-xs"\n                               ng-model="layer.name"\n                               ccri-angular-utils-change="onLayerNameChange(layer)"\n                        >\n                        <div class="categoryCell buf-sm-ml">\n                            <i class="im-layer-icon fa fa-square-o"\n                               aria-hidden="true"\n                               ng-style="{\'color\': layer.styleDirectiveScope.layerColor}"\n                            ></i>\n                        </div>\n                    </div>\n                    <div ng-class="{\'ng-hide\': !layer.viewState.isExpanded}"\n                         class="im-layer-query-details">\n                        <st-query-details-display ng-if="layer.queryDetails"\n                                                  highlight-layer="highlightLayer"\n                                                  query-details="layer.queryDetails"\n                        ></st-query-details-display>\n                    </div>\n                </div>\n                <div ng-switch-default class="flex-row">\n                    <div class="im-image-title ellipsis flex-1"\n                         ccri-angular-utils-tooltip-overflow\n                         uib-tooltip="{{::layer.name}}"\n                         tooltip-enable="false"\n                         tooltip-class="nowrap tooltip-order imagery-tooltip"\n                         tooltip-placement="bottom-left"\n                         tooltip-animation="true"\n                         tooltip-popup-delay="900"\n\t\t\t tooltip-append-to-body="true">\n                        {{::layer.name}}\n                    </div>\n                    <div class="categoryCell buf-sm-ml">\n                        <i class="im-layer-icon fa fa-camera"\n                           aria-hidden="true"\n                        ></i>\n                    </div>\n                </div>\n            </div>\n            <ccri-angular-utils-menu-trigger menu-options="layer.menuOptions"\n                                             class="buf-md-ml buf-sm-mr">\n                <i class="fa fa-ellipsis-v fa-lg"></i>\n            </ccri-angular-utils-menu-trigger>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(304),a=n(494),s=n(4),l=n(85),c=n(1215),u=n(95),d=n(3868);e.stealthImageryOmarResultsImageFunctions="stealth.imagery.omar.results.ImageFunctions",r.module("stealth.imagery.omar.results",[d.stealthImageryGeoOL3Layer]).factory(e.stealthImageryOmarResultsImageFunctions,["$interpolate","stealth.core.geo.ol3.layers.WmsLayer","stealth.imagery.geo.ol3.layers.TileLayer","stealth.imagery.omar.results.category.ImageryCategoryManager",function(t,e,n,r){return function(d){var f=this,p=new i.format.WKT,h=d.idField,g=d.nameField||h,m=d.dropKeys||[],v=[],y=[{label:"Id",prop:"id"},{label:"Name",prop:"name"}];function b(t){return new n({imageId:f.imageId(t),removeStyleDir:x,queryable:!0,searchLayers:d.searchLayers,servletPath:d.servletPath})}function w(t){var n=new e({id:u.uuid.generate(),name:f.imageName(t),requestParams:{LAYERS:[f.imageId(t)]},layerThisBelongsTo:{wfsUrl:d.wfsUrl,wmsUrl:d.wmsUrl},queryable:!1,zIndexHint:-5,isTiled:!1});return n.getImageId=function(){return f.imageId(t)},n}function _(t,e){return e===t.getGeometryName()?p.writeFeature(t):t.get(e)}function x(t){r.removeImageLayer(t)}this.getImageRecord=function(t){return{id:f.imageId(t),name:f.imageName(t),url:f.imageUrl(t),properties:f.imageProperties(t),sourceFeature:t}},this.imageId=function(e){return d.idExtractor?t(d.idExtractor)({im:e,encodeURIComponent:encodeURIComponent}):_(e,h)},this.imageName=function(e){return d.nameExtractor?t(d.nameExtractor)({im:e,encodeURIComponent:encodeURIComponent}):_(e,g)},this.imageProperties=function(t){var e=function(t){return a(t.getKeys(),m)}(t);return v=c(v,e),l(e,function(e,n){return e[n]=_(t,n),e},{})},this.imageUrl=function(e){return t(d.imgUrl)({im:e,encodeURIComponent:encodeURIComponent})},this.getLayer=function(t){var e=("xyz"===d.serverType?b:w)(t);return t.layerId=e.id,e},this.toggleImage=function(t){var e=f.imageId(t),n=r.getImageLayer(e);if(n)r.removeImageLayer(n);else{var i=f.getLayer(t);i.categoryType="Images",r.addImageLayer(i)}},this.getSortOptions=function(){return y.concat(s(v,function(t){return{label:o(t),prop:"properties."+t}}))}}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(95),o=n(54),a=n(6),s=n(990),l=n(23),c=n(53),u=n(4),d=n(324);e.stealthImageryGeoOL3Layer="stealth.imagery.geo.ol3.layers",r.module(e.stealthImageryGeoOL3Layer).constant("stealth.imagery.geo.ol3.layers.TileConstant",{title:"Imagery",icon:"fa-camera",endpoint:{servletPath:{key:"dragonfish.tiles.servletPathTemplate",url:"/map/"}},projection:a.proj.get("EPSG:4326"),queryable:!1,zIndexHint:-15,toggledOn:!0,tileSize:256,wrapX:!0,maxZoom:20,minZoom:0,getUrlParams:{baseUrl:"dragonfish.baseUrl"},removeEvent:"stealth.imagery.layer.remove"}).factory("stealth.imagery.geo.ol3.layers.TileLayer",["$interpolate","$q","$rootScope","owsLayers","stealth.core.geo.ol3.layers.MapLayer","stealth.core.geo.ol3.layers.WmsLayer","stealth.imagery.geo.ol3.layers.TileConstant",function(t,e,n,r,f,p,h){var g=function(g){var m=g||{},v=this,y=m.queryable||h.queryable,b=m.zIndexHint||h.zIndexHint,w=m.imageId,_=m.extent,x=m.categoryId,S=m.removeStyleDir,C={toggledOn:m.toggledOn||h.toggledOn},E=m.searchLayers||[],T=m.tileSize||h.tileSize,M=m.maxZoom||h.maxZoom,k=m.minZoom||h.minZoom,A=m.wrapX||h.wrapX,I=m.servletPath||o.getUrl(h.endpoint.servletPath,{baseUrl:"dragonfish.baseUrl"});I+=(s(I,"/")?"":"/")+w+"/";var O=new a.source.XYZ({projection:h.projection,tileSize:T,wrapX:A,minZoom:k,maxZoom:M,tileUrlFunction:function(t){var e=(t[0]-1).toString(),n=t[1].toString(),r=(-t[2]-1).toString();return I+e+"/"+n+"/"+r}}),P=new a.layer.Tile({source:O});f.apply(v,[i.uuid.generate(),w,P,y,b]),v.styleDirectiveScope.styleVars.iconClass="fa fa-fw fa-lg "+h.icon,d(v,"viewState",C),v.styleDirectiveScope.getViewState=function(){return v.viewState},v.styleDirectiveScope.removeLayer=function(){n.$emit("imagery.layer.entity.remove",{layerId:v.id,categoryId:x}),S&&S(v)},v.getImageId=function(){return w},v.getOl3Layer=function(){return P},v.getExtent=function(){if(_)return _},v.searchPoint=function(n,o){return u(E,function(a){return r.getLayers("capability.addToGroup").then(function(r){var s=l(r,{Name:a.name});if(s){var u=new p({id:i.uuid.generate(),name:v.name+" - "+s.Title,requestParams:{LAYERS:s.Name},queryable:s.queryable,opacity:0,zIndexHint:-20,wmsUrl:s.serverUrl,istiled:c(s.KeywordConfig,"capability.tiled"),wfsUrl:s.wfsUrl,useProxyForWfs:s.useProxyForWfs,layerThisBelongsTo:s}),d=w;return a.imageIdFormatter&&(d=t(a.imageIdFormatter)({id:w})),u.applyCql(a.imageIdField+"='"+d+"'"),u.searchPoint(n,o)}return e.when(v.getEmptySearchPointResult())})})}};return g.prototype=Object.create(f.prototype),g}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(6),o=n(338);e.stealthImageryOmarResultsImagerySelection="stealth.imagery.omar.results.ImagerySelection",r.module("stealth.imagery.omar.results",["stealth.core.geo.ol3.layers"]).factory(e.stealthImageryOmarResultsImagerySelection,["ol3Map","stealth.core.geo.ol3.overlays.Vector","stealth.imagery.omar.results.category.ImageryCategoryManager",function(t,e,n){return function(){var n=this,r=null,a=function(){var t=new e({colors:["#CC0033"],styleBuilder:o(s)("rgba(255,30,30,0.1)")});return t.addToMap(),t}();function s(t,e){return new i.style.Style({fill:new i.style.Fill({color:t}),stroke:new i.style.Stroke({color:e,width:1.5})})}this.imageMouseenter=function(t){r&&r!==t&&a.removeFeature(r),a.addFeature(t),r=t},this.imageMouseleave=function(t){r===t&&(a.removeFeature(t),r=null)},this.overlayStyle=s,this.toggleCoverage=function(){n.coverageLayer.styleDirectiveScope.toggleVisibility()},this.zoomToCoverage=function(){t.fit(n.coverageLayer.ol3Layer.getSource().getExtent())},this.zoomToImage=function(e){t.fit(e.getGeometry())}}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(39),o=n(113);e.stealthImageryOmarResultsPopupManager="stealth.imagery.omar.results.popupManager",r.module("stealth.imagery.omar.results",["ccri.popup"]).service(e.stealthImageryOmarResultsPopupManager,["$rootScope","ccri.popup.manager",function(t,e){var n={};this.displayPopup=function(a){var s=a.url;if(!s)return;if(n[s])!function(t){e.focusPopup(n[t])}(s);else{var l=t.$new();l.imgSrc=s;var c=r.element(".primaryDisplay > ccri-popup-container"),u=c.data("ccri.popup.containerId"),d=e.getViewportDim(u);d[1]=0,n[s]=e.displayPopup(u,"","DF_ENTITY","fa-picture-o",new i.WidgetDef({tag:"st-im-omar-thumbnail-popup",scope:l,isolateScope:!0}),{resizable:!1,positioning:o.Popup.Positioning.TopRight,offsets:[d[0],d[1]],onClose:function(){l.$destroy(),delete n[s]}})}}}]).directive("stImOmarThumbnailPopup",[function(){return{restrict:"E",template:"<img src={{imgSrc}}>",scope:!1}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(29),o=n(2),a=n(14),s=n(6),l=n(39),c=n(3872),u=n(3873),d=n(3874);e.stealthImageryOmarWizard="stealth.imagery.omar.wizard",r.module(e.stealthImageryOmarWizard,["ccri.angular-utils","ccri.area-definition","stealth.core.utils","stealth.core.wizard","stealth.timelapse.wizard",d.stealthImageryOmarWizardQuery]).service("stealth.imagery.omar.wizard",["$q","$rootScope","$timeout","CONFIG","wizardManager","ccri.area-definition.FeatureCreator","stealth.core.wizard.Wizard","stealth.core.wizard.Step","stealth.imagery.omar.wizard.Query",function(t,e,n,r,c,u,d,f,p){this.launchWizard=function(h){var g=e.$new();g.OMAR=r.imagery.omar,a(h)&&(h=new p(g.OMAR)),g.query=h,g.dot={appContext:o(r,"app.context")},g.serverLabelFn=function(t){return t.name},g.fieldLabelFn=function(t){return t.name};var m=new u({supportedTools:["coordRect","polygon","radiusCircle","bufferFeature","mapView","wholeEarth"],disableMultiple:!1}),v=g.$new();v.query=h,v.featureCreator=m,v.hasShapes=function(){if(!arguments.length)return!!m.hasFeatures()||null};var y=g.$new();function b(){return m.finish().then(x)}function w(){m.getFeatures().then(_)}function _(t){var e=i(t,function(t){var e=t.getGeometry();return e instanceof s.geom.Polygon||e instanceof s.geom.MultiPolygon});h.params.features=e}function x(){m.un("featureschanged",w),g.$destroy()}y.featureCreator=m,m.on("featureschanged",w),n(function(){o(h,"params.features")&&m.addFeatures(h.params.features)},500),c.launchWizard(new d("Imagery Search","fa-image","fa-check text-success",[new f("Select data source and time range",new l.WidgetDef({tag:"st-im-omar-wiz-source",scope:g}),null,!0,function(){h.getFeatureTypeDescription()},function(t){if(!t)return b()}),new f("Define search area",new l.WidgetDef({tag:"st-tl-wiz-area-step",scope:v}),new l.WidgetDef({tag:"st-wiz-draw-toolbar",scope:y}),!1,null,function(e){return!0===e?m.finishActiveTool().then(function(){return m.getFeatures()}).then(function(e){if(!e.length)return t.reject();_(e)}):!1!==e?b():void 0}),new f("Choose options",new l.WidgetDef({tag:"st-im-omar-wiz-opts",scope:g}),null,!0,null,function(t){return!0===t?(e.$emit("imagery:search",g.query),b()):void 0===t?b():void 0})],g,"wizard-dark ImageryWizard"))}}]).directive("stImOmarWizSource",function(){return{restrict:"E",template:u}}).directive("stImOmarWizOpts",function(){return{restrict:"E",template:c}})},function(t,e){t.exports='<ng-form name="wizardForm" class="im-wiz-opts">\n    <div class="im-wiz-field">\n        <span class="im-wiz-field-label">Additional filter:</span>\n        <input class="im-wiz-field-input" placeholder="CQL filter" ng-model="query.params.cql">\n    </div>\n\n    <div ng-switch="query.featureTypeData">\n        <div ng-switch-when="unavailable">\n            <i class="fa fa-warning"></i> There is no feature type description for this layer.\n        </div>\n        <div ng-switch-default>\n            <div ng-repeat="featureType in query.featureTypeData.featureTypes" class="im-wiz-metadata">\n                <div class="im-wiz-metadata-header">\n                    Properties for <strong>{{query.params.server.name}}</strong>\n                </div>\n                <div class="im-wiz-metadata-table">\n                    <div ng-repeat="property in featureType.properties" class="im-wiz-table-row">\n                        <span>{{property.name}}</span>\n                        <span><code>{{property.localType}}</code></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="im-wiz-field">\n        <span class="im-wiz-field-label">Query Name:</span>\n        <input class="im-wiz-field-input" ng-model="query.params.storeName">\n    </div>\n</ng-form>\n'},function(t,e){t.exports='<ng-form name="wizardForm">\n    <div class="im-wiz-section">\n        <div class="im-wiz-field">\n            <span class="im-wiz-field-label">Data Source:</span>\n            <ccri-angular-utils-select\n                ng-model="query.params.server"\n                ng-change="query.getFeatureTypeDescription()"\n                from-list="::OMAR.servers"\n                label-fn="serverLabelFn"\n                class="im-wiz-field-input">\n            </ccri-angular-utils-select>\n        </div>\n    </div>\n    <div class="im-wiz-section">\n        <ng-form name="wizardForm">\n            <st-wiz-timerange></st-wiz-timerange>\n        </ng-form>\n    </div>\n\n    <input type="hidden" ng-model="query.params.server" required>\n</ng-form>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(21),o=n(2),a=n(53),s=n(18),l=n(46),c=n(14);e.stealthImageryOmarWizardQuery="stealth.imagery.omar.wizard.query",r.module("stealth.imagery.omar.wizard.query",["stealth.core.utils"]).factory("stealth.imagery.omar.wizard.Query",["wfs","cqlHelper",function(t,e){var n=1;return function(r){var u=this,d=i().utc();this.layerData={},this.timeData={minTime:null,maxTime:null,defaultStartDtg:d.clone().subtract(1,"hours"),defaultEndDtg:d,maxTimeRangeMillis:Number.POSITIVE_INFINITY},this.params={server:s(r.servers)?null:r.servers[0],storeName:"Imagery Search "+n++,features:[],cql:""},this.getFeatureTypeDescription=function(){u.featureTypeData=null,t.getFeatureTypeDescription(u.params.server.wfsUrl,u.params.server.typeName).then(function(t){t.error?u.featureTypeData="unavailable":u.featureTypeData=t});var e=o(u.params.server,"extraKeywords",null);s(e)||(e.defaultStartDtg&&(u.timeData.defaultStartDtg=i(e.defaultStartDtg)),e.defaultEndDtg&&(u.timeData.defaultEndDtg=i(e.defaultEndDtg)),u.timeData.minTime=e.minTime||null,u.timeData.maxTime=e.maxTime||null)},this.results=[],this.running=!1,this.buildCql=function(t){var n=[];return t.geomField={name:t.server.geomField},n.push(e.buildFeatureFilter(t.features,t.geomField.name)),n.push(u.buildCqlTimerange(t)),s(t.cql.trim())||n.push(t.cql),e.combine(e.operator.AND,n)},this.buildCqlTimerange=function(t){var n=null;if(l(t.server.dtgFieldFormat)){var r=!0;a(t.server,"dtgFieldFormatUTC")&&(r=t.server.dtgFieldFormatUTC),n=r?function(e){return i(e).utc().format(t.server.dtgFieldFormat)}:function(e){return i(e).format(t.server.dtgFieldFormat)}}return e.buildDtgFilter(t.server.dtgField,t.startDtg,t.endDtg,!!t.server.dtgFieldIsString,n)},this.findImagery=function(){u.step=2,u.running=!0,u.results=[];var e={outputFormat:c(u.params.server.format)?null:u.params.server.format};e[u.params.server.wfsFilterParamName?u.params.server.wfsFilterParamName:"cql_filter"]=u.buildCql(u.params);var n=t.getFeature(u.params.server.wfsUrl,u.params.server.typeName,e);return n.finally(function(){u.running=!1}),n}}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3876),o=n(3877),a=n(3878),s=n(3879),l=n(3880);e.default=r.module("stealth.pointilist",["ccri.popup"]).service("stealth.pointilist.capabilityService",i.CapabilityService).service("stealth.pointilist.errorHandlingService",o.ErrorHandlingService).service("stealth.pointilist.popupManager",a.PopupManager).service("stealth.pointilist.spacesManager",s.SpacesManager).controller(l.popupControllerName,l.PopupController).directive("stPlSpacesPopup",l.factory).run(["stealth.pointilist.capabilityService",function(t){t.addPointilistCapability()}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(96),i=n(2),o=n(14),a=function(){function t(t,e){this.coreCapabilitiesExtender=t,this.popupManager=e}return t.prototype.addPointilistCapability=function(){var t=this;this.coreCapabilitiesExtender.addCapabilitiesExtender(function(e,n){return o(e.pointilist)||(e.pointilist=r(e.pointilist,{toolTipText:"View spaces",iconClass:"fa-bar-chart"}),e.pointilist.onClick=function(n,r,o,a){var s=i(e,"pointilist.idAttribute","S"),l=i(e,"pointilist.nameAttribute","S"),c=i(a,"source.properties",r),u=i(c,s,""),d=i(c,l,"");t.popupManager.displayPopup(u,d)}),e})},t.$inject=["coreCapabilitiesExtender","stealth.pointilist.popupManager"],t}();e.CapabilityService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.toastr=t}return t.prototype.error=function(t,e){var n=this;return function(){return n.toastr.error(t,e),Promise.reject(new Error(t))}},t.$inject=["toastr"],t}();e.ErrorHandlingService=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(39),o=function(){function t(t,e){this.$rootScope=t,this.popupManager=e,this.popupContainer=r.element(".primaryDisplay > ccri-popup-container")}return t.prototype.displayPopup=function(t,e){var n=this,r=this.$rootScope.$new();r.data=Array(),r.entityId=t,e=e||t,r.spaces=Array(),r.sortFields=[{label:"Name",prop:"name"}],r.sortOrders=["asc"],r.yScale="linear",r.yScaleChoices=["linear","log"];var o=new i.WidgetDef({tag:"st-pl-spaces-popup",scope:r});this.popupId=this.popupManager.displayPopup(this.popupContainer.data("ccri.popup.containerId"),"Spaces for '"+e+"'","pointilist","fa-bar-chart",o,{contentMinHeight:400,contentMinWidth:500,contentHeight:400,contentWidth:500,limitStartSize:!1,offsets:[450,20],onClose:function(){r.viz=void 0,n.popupManager.closePopup(r.popupId),r.$destroy()},resizable:!0}),r.popupId=this.popupId},t.$inject=["$rootScope","ccri.popup.manager"],t}();e.PopupManager=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(54),i=n(18),o=n(134),a=function(){function t(t){this.errorHandlingService=t,this.getSpacesDefaultConfig={key:"pointilist.spaces.getSpacesUrl",url:"/spaces/"},this.getEntityVectorDefaultConfig={key:"pointilist.spaces.getEntityVector",url:"/spaces/{{encodeURIComponent(spaceId)}}/{{encodeURIComponent(entityId)}}"}}return t.prototype.getSpaces=function(){var t=r.getUrl(this.getSpacesDefaultConfig,{baseUrl:"pointilist.baseUrl"});return r.http.get(t).then(function(t){return i(t.data)?[]:o(t.data,"name")},this.errorHandlingService.error("Failed to get list of spaces."))},t.prototype.getEntityVector=function(t,e){var n=r.getUrl(this.getEntityVectorDefaultConfig,{spaceId:t,entityId:e,baseUrl:"pointilist.baseUrl"});return r.http.get(n).then(function(t){return i(t.data)?[]:t.data},this.errorHandlingService.error("Failed to get entity data."))},t.$inject=["stealth.pointilist.errorHandlingService"],t}();e.SpacesManager=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(514),i=n(109),o=n(22),a=n(18),s=n(14),l=n(4),c=n(134),u=n(3881),d=n(3883);e.popupControllerName="stealth.pointilist.popupController";var f=function(){function t(t,e,n){var d=this;this.scope=t,this.$filter=e,this.spacesManager=n,this.changedSpace=function(){s(d.scope.selectedSpace)||(d.scope.fieldList=[{label:d.scope.selectedSpace.xAxisName,prop:"name"},{label:d.scope.selectedSpace.yAxisName,prop:"y"},{label:"Absolute Value",prop:"abs"}],d.getSpaceData().then(function(){d.scope.sortBars(l(d.scope.sortFields,"prop"),d.scope.sortOrders)}))},this.moveColumn=function(t,e,n){var r=e.splice(t,1)[0],i=d.tryIntConversion(r.name);n.splice(u(l(n,"name"),i),0,r),d.scope.sortBars(l(d.scope.sortFields,"prop"),d.scope.sortOrders)},this.rebin=function(){if(!s(d.scope.viz)){d.vizData=i(d.scope.data),"log"===d.scope.yScale?(o(d.vizData,function(t){t.y>0&&(t.y=r.log10(t.y))}),d.scope.viz.updateYAxis({},{label:{text:"log("+(d.scope.selectedSpace.yAxisName||"y")+")"}})):d.scope.viz.updateYAxis({},{label:{text:d.scope.selectedSpace.yAxisName||"y"}}),d.scope.viz.data(d.vizData);var t=d.vizData[d.vizData.length-1];t&&d.scope.viz.updateAxis({dataKey:"x"},{max:t[d.dataKey]+1})}},this.getSpaceData=function(){return d.spacesManager.getEntityVector(d.scope.selectedSpace.id,d.scope.entityId).then(function(t){d.scope.removedColumns=Array();var e=l(t,function(t,e){var n=d.scope.selectedSpace.coordinateNames[e];return s(n)&&(n=String(e+1)),{id:e,x:e-.5,y:t,abs:Math.abs(t),name:n}}),n=c(e,function(t){return d.tryIntConversion(t.name)});return d.scope.allData=n,d.scope.data=n,n})},this.sortBars=function(t,e){if(d.scope.data=i(d.scope.allData),!a(t)&&!a(e)){var n=t[0];d.scope.data=c(d.scope.data,function(t){var e=t[n];return"name"===n&&(e=d.tryIntConversion(e)),e}),"desc"===e[0]&&d.scope.data.reverse(),d.scope.data=l(d.scope.data,function(t,e){return t.id=e,t.x=e-.5,t}),d.scope.rebin()}},this.tryIntConversion=function(t){var e=parseInt(t,10);return isNaN(e)?t:e};var f=this;this.vizData=[],this.dataKey="x",this.scope.changedSpace=this.changedSpace,this.scope.labelFn=this.labelFn,this.scope.moveColumn=this.moveColumn,this.scope.rebin=this.rebin,this.scope.sortBars=this.sortBars,this.spacesManager.getSpaces().then(function(t){f.scope.spaces=t,f.scope.spaces.length>0&&(f.scope.selectedSpace=f.scope.spaces[0],f.scope.fieldList=[{label:f.scope.selectedSpace.xAxisName,prop:"name"},{label:f.scope.selectedSpace.yAxisName,prop:"y"},{label:"Absolute Value",prop:"abs"}],f.getSpaceData().then(function(){f.buildChart()}))})}return t.prototype.buildChart=function(){var t=this,e="#spacesChart"+this.scope.popupId;this.scope.viz=sonic.viz(e,[],{animation:{delay:0,duration:500}}).addYAxis({label:{text:"values",dx:3}}).addXAxis({type:"linear",ticks:{formatFn:function(t){return""},minHorizSpacing:5,snapTo:"integer",textAnchor:"end"},pinTo:{scale:"y",value:0},pad:{min:.1,max:.1}}).addBars({type:"stacked",fill:"#0a9ddb",stroke:"#0a9ddb",animation:{delay:0,duration:0},barPosition:"left",minBarWidth:1,maxBarWidth:1e3,barWidth:{amount:1},barGroupPadding:0,strokeWidth:0,tooltip:{renderFn:function(e){var n=e[0].point,r=t.$filter("numberTrim")(n.y,4);return"<b>name: </b>"+n.name+"<br><b>value: </b>"+r}},zoom:!0,multiSelect:!1}).addCrosshair(),this.scope.sortBars(l(this.scope.sortFields,"prop"),this.scope.sortOrders)},t.prototype.labelFn=function(t){return t.name},t.$inject=["$scope","$filter","stealth.pointilist.spacesManager"],t}();e.PopupController=f,e.factory=function(){return{restrict:"E",replace:!0,template:d,controller:e.popupControllerName}}},function(t,e,n){var r=n(3882);t.exports=function(t,e){return r(t,e)}},function(t,e,n){var r=n(932),i=n(104),o=n(156),a=2147483647;t.exports=function(t,e,n){var s=0,l=null==t?s:t.length;if("number"==typeof e&&e==e&&l<=a){for(;s<l;){var c=s+l>>>1,u=t[c];null!==u&&!o(u)&&(n?u<=e:u<e)?s=c+1:l=c}return l}return r(t,e,i,n)}},function(t,e){t.exports='<div class="pl-popup popupFillSpace">\n    <div class="buf-sm-mv labeled-wide-field">\n        <span class="field-label">Representation:</span>\n        <span class="field flex-row">\n            <ccri-angular-utils-select\n              ng-model="selectedSpace"\n              ng-change="changedSpace()"\n              from-list="spaces"\n              label-fn="labelFn"\n              placeholder="Select a space"\n              empty-message="None available"\n              select-disabled="!spaces"\n            ></ccri-angular-utils-select>\n            <span class="pull-right" style="padding-left:6px;flex-basis:64px;">\n                <span class="btn btn-default fa-stack toggleButton"\n                      ng-click="rebin()"\n                      uib-tooltip="Reset view" tooltip-class="nowrap"\n                      tooltip-placement="bottom-right" tooltip-animation="false" tooltip-popup-delay="500"\n                      tooltip-trigger="mouseenter">\n                    <i class="fa fa-fw fa-reply fa-stack-1x"></i>\n                </span>\n                <span class="btn btn-default fa-stack toggleButton"\n                      ng-click="toggleOptions = !toggleOptions"\n                      uib-tooltip="Options" tooltip-class="nowrap"\n                      tooltip-placement="bottom-right" tooltip-animation="false" tooltip-popup-delay="500"\n                      tooltip-trigger="mouseenter">\n                    <i class="fa fa-fw fa-cog fa-stack-1x"></i>\n                </span>\n            </span>\n        </span>\n    </div>\n    <div class="buf-sm-mv labeled-wide-field">\n        <span class="field-label">y-scale:</span>\n        <span class="field">\n            <ccri-angular-utils-select\n                style="width:60px;"\n                ng-model="yScale"\n                from-list="yScaleChoices"\n                ng-change="rebin()"\n            ></ccri-angular-utils-select>\n            <ccri-list-view-components-sort\n                class="pull-right"\n                style="padding-right:8px;"\n                fields="fieldList"\n                sort="sortBars"\n                sort-fields="sortFields"\n                sort-order="sortOrders"\n            ></ccri-list-view-components-sort>\n        </span>\n    </div>\n    <div class="buf-sm-mv labeled-wide-field" ng-if="toggleOptions">\n        <span class="field-label" style="align-self:flex-start;">{{data.length || ""}} Columns:</span>\n        <span class="field flex-col" style="overflow:auto;height:100px;">\n            <div class="field flex-row">\n                <div class="multi-select-label">Included</div>\n                <div class="multi-select-label">Excluded</div>\n            </div>\n            <div class="field flex-row">\n                <select multiple class="form-control" style="margin-right:10px;">\n                    <option ng-repeat="datum in allData"\n                            ng-click="moveColumn($index, allData, removedColumns)"\n                            label="{{::datum.name}}"\n                            value="{{::datum.name}}"\n                            class="ellipsis"\n                            uib-tooltip="{{::datum.name}}"\n                            tooltip-append-to-body="true"\n                            tooltip-class="wrap"\n                            tooltip-animation="false"\n                            tooltip-popup-delay="500"\n                            tooltip-placement="right"\n                            tooltip-enable="false"\n                            ccri-angular-utils-tooltip-overflow\n                    >\n                        {{::col}}\n                    </option>\n                </select>\n                <select multiple class="form-control">\n                    <option ng-repeat="datum in removedColumns"\n                            ng-click="moveColumn($index, removedColumns, allData)"\n                            label="{{::datum.name}}"\n                            value="{{::datum.name}}"\n                            class="ellipsis"\n                            uib-tooltip="{{::datum.name}}"\n                            tooltip-append-to-body="true"\n                            tooltip-class="wrap"\n                            tooltip-animation="false"\n                            tooltip-popup-delay="500"\n                            tooltip-placement="right"\n                            tooltip-enable="false"\n                            ccri-angular-utils-tooltip-overflow\n                    >\n                        {{::col}}\n                    </option>\n                </select>\n            </div>\n        </span>\n    </div>\n    <div class="buf-sm-mv text-center" style="height:85%;">\n        <div class="x-axis-label">{{selectedSpace.xAxisName || "x"}}</div>\n        <div id="spacesChart{{popupId}}"\n             class="spaceChartViz"\n             ng-mousedown="$event.stopPropagation()"\n        ></div>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3885);n(3886);var o=n(3904),a=n(3905),s=n(3906),l=n(3907);r.module("stealth.tfi",["ccri.angular-utils","ccri.list-view","stealth.core.geo.ol3.map","stealth.core.popup.capabilities","stealth.core.sidebar","stealth.core.startmenu","stealth.core.wizard","stealth.timelapse.geo.ol3.layers","stealth.tfi.filter","ui.bootstrap"]).service("stealth.tfi.dispatcher",i.Dispatcher).directive("stealthTfiToolbar",[function(){return{restrict:"E",scope:{},template:a,controller:l.toolbarCtrl}}]).directive("stealthTfiSidebarPanel",[function(){return{restrict:"E",scope:{},template:o,controller:s.sidebarPanelCtrl}}]).run(["stealth.tfi.dispatcher",function(t){t.init()}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(304),i=n(14),o=n(2),a=n(247),s=function(){function t(t,e,n,r,i,o,a,s,l,c,u){this.$rootScope=t,this.WidgetDefClass=e,this.coreCapabilitiesExtender=n,this.sidebarManager=r,this.startMenuManager=i,this.tfiCqlWizard=o,this.tfiForceSendWizard=a,this.tfiForceService=s,this.filterService=l,this.envHolder=c,this.wizardManager=u}return t.prototype.init=function(){var t=this,e=this.sidebarManager.addButton("Track Filter List","fa-shield",275,new this.WidgetDefClass({tag:"stealth-tfi-sidebar-panel",scope:this.$rootScope.$new()}),null,!0);this.sidebarManager.toggleButton(e,!0),this.startMenuManager.addButton("Track Filter List","fa-shield",function(){t.sidebarManager.toggleButton(e,!0)},"x.tfi","00"),this.startMenuManager.addButton("Create New "+r(a.DisplayLabel.CQL.toString())+" Filter",a.IconClass.CQL,function(){t.launchNewCqlFilterWiz()},"x.tfi","20"),this.coreCapabilitiesExtender.addCapabilitiesExtender(function(e){if(!i(e.tfiForce)){var n=o(e,"tfiForce.field.id","thresherId"),r=o(e,"tfiForce.field.label","label"),s=o(e,"tfiForce.field.subLabel","subLabel");e.tfiForceSend={toolTipText:a.DisplayLabel.SEND,iconClass:a.IconClass.SEND+" tfi-list-button-primary",onClick:function(e,i,o){t.launchNewForceSendFilterWiz(i[n],i[r],i[s])},checkValidity:function(e){return!t.tfiForceService.isActiveOnCurrentForceStopList(e[n])}},e.tfiForceStop={toolTipText:a.DisplayLabel.STOP,iconClass:a.IconClass.STOP+" tfi-list-button-primary",onClick:function(e,i,o){t.tfiForceService.saveStop(i[n],i[r],i[s])},checkValidity:function(e){return!t.tfiForceService.isActiveOnCurrentForceStopList(e[n])}}}return e})},t.prototype.launchNewForceSendFilterWiz=function(t,e,n){this.wizardManager.launchWizard(this.tfiForceSendWizard.getWizard(t,e,n))},t.prototype.launchNewCqlFilterWiz=function(){this.wizardManager.launchWizard(this.tfiCqlWizard.getWizard())},t.prototype.updateTheaterNetworkEnvVar=function(t){this.envHolder.env.theaterNetwork=t.theater+"-"+t.network},t.prototype.emitLiveLayerRefreshEvent=function(){this.$rootScope.$emit("stealth.timelapse.geo.ol3.layers.LiveWmsLayer.refresh")},t.$inject=["$rootScope","ccri.angular-utils.WidgetDef","coreCapabilitiesExtender","sidebarManager","startMenuManager","stealth.tfi.filter.cql.wizard","stealth.tfi.filter.force.send.wizard","stealth.tfi.filter.force.service","stealth.tfi.filter.service","stealth.timelapse.geo.ol3.layers.liveStyleEnvHolder","wizardManager"],t}();e.Dispatcher=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(3887),n(3893);var i=n(3900),o=n(3901),a=n(3902),s=n(3903);r.module("stealth.tfi.filter",["ccri.angular-utils","stealth.tfi.filter.cql","stealth.tfi.filter.force"]).service("stealth.tfi.filter.service",o.FilterService).directive("stealthTfiFilterTitle",[function(){return{restrict:"E",scope:{record:"="},template:s,controller:a.titleCtrl}}]).directive("stealthTfiFilterCollapsed",[function(){return{restrict:"E",scope:{record:"="},template:i}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3888),o=n(3889),a=n(3890),s=n(3891),l=n(3892);r.module("stealth.tfi.filter.cql",["ccri.angular-utils"]).service("stealth.tfi.filter.cql.service",s.CqlService).service("stealth.tfi.filter.cql.wizard",l.CqlWizard).directive("stealthTfiFilterCqlContent",[function(){return{restrict:"E",scope:{record:"="},template:o,controller:i.contentCtrl}}]).directive("stealthTfiFilterCqlOptions",[function(){return{restrict:"E",template:a}}])},function(t,e,n){"use strict";function r(t){}Object.defineProperty(e,"__esModule",{value:!0}),r.$inject=["$scope"],e.contentCtrl=r},function(t,e){t.exports='<div class="savedqueries-li">\n    <div ng-if="::record.contents.linkIdentity">\n        L16 Identity: {{::record.contents.linkIdentity}}\n    </div>\n\n    <div>\n        Last Modified: {{record.modified | momentFormat:\'YYYY-MM-DD HH:mm[Z]\' | labelVal:\'\':\'Invalid date\'}}\n    </div>\n\n    <div class="small" style="margin-bottom:6px;">\n        <div>Created: {{::record.created | momentFormat:\'YYYY-MM-DD HH:mm[Z]\' | labelVal:\'\':\'Invalid date\'}}</div>\n        <div>Owner: {{::record.user | propertyValue:[\'cn\',\'CN\']}}</div>\n        <div>{{record.classification}}</div>\n    </div>\n\n    <div class="box-label">\n        Attribute Filter:\n        <ccri-angular-utils-clipboard-copy\n                data-clipboard-text="{{record.contents.attributeFilter}}" class="pull-right clickable"\n                uib-tooltip="copy to clipboard" tooltip-class="nowrap"\n                tooltip-placement="top-right" tooltip-animation="true"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n            <i class="fa fa-clipboard"></i>\n        </ccri-angular-utils-clipboard-copy>\n    </div>\n    <div class="content-box"\n            ng-init="showFullAttributes=false"\n            ng-style="{height: (showFullAttributes) ? \'auto\' : \'38px\'}"\n            style="min-height: 38px"\n            ng-click="showFullAttributes = !showFullAttributes">\n        {{record.contents.attributeFilter}}\n    </div>\n\n    <div class="box-label">\n        Area Coordinates:\n        <ccri-angular-utils-clipboard-copy\n                data-clipboard-text="{{record.contents.bounds}}" class="pull-right clickable"\n                uib-tooltip="copy to clipboard" tooltip-class="nowrap"\n                tooltip-placement="top-right" tooltip-animation="true"\n                tooltip-popup-delay="600" tooltip-trigger="mouseenter">\n            <i class="fa fa-clipboard"></i>\n        </ccri-angular-utils-clipboard-copy>\n    </div>\n    <div class="content-box"\n            ng-init="showFullBounds=false"\n            ng-style="{height: (showFullBounds) ? \'auto\' : \'51px\'}"\n            style="min-height: 51px"\n            ng-click="showFullBounds = !showFullBounds">\n        {{record.contents.bounds}}\n    </div>\n</div>\n'},function(t,e){t.exports="<stealth-tfi-filter-force-send-identity></stealth-tfi-filter-force-send-identity>\n<st-tl-wiz-options></st-tl-wiz-options>\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(55),i=n(265),o=n(247),a=function(){function t(t,e,n){this.$q=t,this.cqlHelper=e,this.filterService=n,this.userObjectService=i.UserObjectService.getInstance()}return t.prototype.saveFromLiveQuery=function(t){var e=this;return this.$q.when(this.userObjectService.save({type:o.ServerLabel.CQL.toString(),contents:{theater:this.filterService.theaterNetworkPair.theater,network:this.filterService.theaterNetworkPair.network,linkIdentity:t.linkIdentity,active:!0,title:t.params.storeName,cqlFilter:t.buildCql(),bounds:this.cqlHelper.buildFeature(t.params.generatedFeatures),attributeFilter:t.params.cql,filterCriteria:null},shared:!0,editable:!0,classification:t.classification})).then(function(t){return r.alerter.successMsg(o.DisplayLabel.CQL+" filter saved"),e.filterService.poll(),t.data.id},function(t){r.alerter.errorMsg(o.DisplayLabel.CQL+" filter save failed")})},t.$inject=["$q","cqlHelper","stealth.tfi.filter.service"],t}();e.CqlService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(29),o=n(6),a=function(){function t(t,e,n,r,i,o,a,s,l,c){this.$q=t,this.$rootScope=e,this.$timeout=n,this.WidgetDefClass=r,this.FeatureCreator=i,this.Step=o,this.Wizard=a,this.cqlFilterService=s,this.LiveQuery=l,this.CONFIG=c}return t.prototype.getWizard=function(){var t=this,e=this.$rootScope.$new(),n=new this.LiveQuery;n.isSaveable=!0,n.shouldBeSaved=!0,n.savingIsNotOptional=!0,n.shouldBeShared=!0,n.sharingIsNotOptional=!0,n.classifications=r(this.CONFIG,"tfi.classifications",r(this.CONFIG,"classification.options",["UNCLASSIFIED"])),n.classification=n.classifications[0],e.query=n,e.dot={finalCql:null,cqlMaxlength:r(this.CONFIG,"geoserver.cqlMaxLength",1/0)};var a=new this.FeatureCreator({supportedTools:["coordRect","polygon","radiusCircle","bufferFeature","mapView","wholeEarth"],disableMultiple:!1}),s=e.$new();s.query=n,s.cqlStats=e.dot,s.featureCreator=a,s.hasShapes=function(){if(!arguments.length)return!!a.hasFeatures()||null};var l=e.$new();return l.featureCreator=a,a.on("featureschanged",u),s.toolWasOpened=!1,a.on("toolstarted",c),new this.Wizard("Basic Track Filter","fa-filter","fa-check text-success",[new this.Step("Select area",new this.WidgetDefClass({tag:"st-tl-wiz-area-step",scope:s}),new this.WidgetDefClass({tag:"st-wiz-draw-toolbar",scope:l}),!1,null,function(e){if(!0===e)return a.finishActiveTool().then(function(){return a.getFeatures()}).then(function(e){if(!e.length||!n.layerData.layers.length)return t.$q.reject();d(e)})}),new this.Step("Set options",new this.WidgetDefClass({tag:"stealth-tfi-filter-cql-options",scope:e}),null,!0,null,function(e){return!0===e?t.cqlFilterService.saveFromLiveQuery(n):t.$q.resolve()})],e,"wizard-dark AreaDefinitionWizard",function(){a?a.finish().then(f):f()});function c(){s.toolWasOpened=!0}function u(){a.getFeatures().then(d).then(function(){e.dot.finalCql=n.buildCql(),"include"===e.dot.finalCql.toLowerCase()&&(e.dot.finalCql="")})}function d(t){var e=i(t,function(t){var e=t.getGeometry();return e instanceof o.geom.Polygon||e instanceof o.geom.MultiPolygon});n.params.generatedFeatures=e}function f(){n=null,a.un("featureschanged",u),a.un("toolstarted",c),a=null,e.$destroy(),e=null,s.$destroy(),s.query=s.cqlStats=s.featureCreator=s.hasShapes=null,s=null,l.$destroy(),l.featureCreator=null,l=null}},t.$inject=["$q","$rootScope","$timeout","ccri.angular-utils.WidgetDef","ccri.area-definition.FeatureCreator","stealth.core.wizard.Step","stealth.core.wizard.Wizard","stealth.tfi.filter.cql.service","stealth.timelapse.wizard.live.Query","CONFIG"],t}();e.CqlWizard=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(3894);var i=n(3898),o=n(3899);r.module("stealth.tfi.filter.force",["ccri.angular-utils","stealth.tfi.filter.force.send"]).service("stealth.tfi.filter.force.service",o.ForceService).directive("stealthTfiFilterForceContent",[function(){return{restrict:"E",scope:{record:"="},template:i}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(3895),o=n(3896),a=n(3897);r.module("stealth.tfi.filter.force.send",["stealth.core.wizard"]).service("stealth.tfi.filter.force.send.wizard",a.ForceWizard).directive("stealthTfiFilterForceSendIdentity",[function(){return{restrict:"E",template:o,controller:i.identityCtrl}}])},function(t,e,n){"use strict";function r(t){t.query.linkIdentity="SUSPECT"}Object.defineProperty(e,"__esModule",{value:!0}),r.$inject=["$scope"],e.identityCtrl=r},function(t,e){t.exports="<div class=\"flex-row flex-align-items-center buf-lg-mv\">\n    <div class=\"nowrap buf-lg-mr\">L16 Identity:</div>\n    <ccri-angular-utils-select\n        style=\"min-width:150px;\"\n        class=\"flex-1 buf-xs-ml\"\n        ng-model=\"query.linkIdentity\"\n        from-list=\"::['FRIEND', 'ASSUMED FRIEND', 'PENDING', 'NEUTRAL', 'SUSPECT', 'UNKNOWN']\"\n    ></ccri-angular-utils-select>\n</div>\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,i){this.$rootScope=t,this.WidgetDefClass=e,this.Step=n,this.Wizard=r,this.tfiForceService=i}return t.prototype.getWizard=function(t,e,n){var r=this,i=this.$rootScope.$new();return i.query={},new this.Wizard("Force Send Track Filter","fa-filter","fa-check text-success",[new this.Step("Set identity",new this.WidgetDefClass({tag:"stealth-tfi-filter-force-send-identity",scope:i}),null,!0,null,function(o){!0===o&&r.tfiForceService.saveSend(i.query.linkIdentity,t,e,n)})],i,"wizard-dark",function(){i.$destroy(),i=null})},t.$inject=["$rootScope","ccri.angular-utils.WidgetDef","stealth.core.wizard.Step","stealth.core.wizard.Wizard","stealth.tfi.filter.force.service"],t}();e.ForceWizard=r},function(t,e){t.exports="<div>\n    <div ng-if=\"::record.contents.linkIdentity\">\n        L16 Identity: {{::record.contents.linkIdentity}}\n    </div>\n\n    <div>\n        Last Modified: {{record.modified | momentFormat:'YYYY-MM-DD HH:mm[Z]' | labelVal:'':'Invalid date'}}\n    </div>\n\n    <div class=\"small\" style=\"margin-bottom:6px;\">\n        <div>Created: {{::record.created | momentFormat:'YYYY-MM-DD HH:mm[Z]' | labelVal:'':'Invalid date'}}</div>\n        <div>Owner: {{::record.user | propertyValue:['cn','CN']}}</div>\n        <div>{{record.classification}}</div>\n    </div>\n</div>\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),i=n(2),o=n(452),a=n(124),s=n(21),l=n(55),c=n(265),u=n(247),d=function(){function t(t,e,n){this.$q=t,this.filterService=e,this.CONFIG=n,this.userObjectService=c.UserObjectService.getInstance()}return t.prototype.save=function(t,e,n,a,c){var d=this;return this.$q.when(this.userObjectService.save({type:t.toString(),contents:r({theater:this.filterService.theaterNetworkPair.theater,network:this.filterService.theaterNetworkPair.network,active:!0,trkId:e,label:n,subLabel:a},c),shared:!0,editable:!0,expires:s.utc().add(i(this.CONFIG,"tfi.force.expirationHours",24),"hours").format("YYYY-MM-DD[T]HH:mm:ss[Z]"),classification:"UNCLASSIFIED//FOUO"})).then(function(e){return l.alerter.successMsg(u.DisplayLabel[o(u.ServerLabel,function(e){return e===t})]+" saved"),d.filterService.poll(),e.data.id},function(e){l.alerter.errorMsg(u.DisplayLabel[o(u.ServerLabel,function(e){return e===t})]+" save failed")})},t.prototype.saveSend=function(t,e,n,r){return this.save(u.ServerLabel.SEND,e,n,r,{linkIdentity:t})},t.prototype.saveStop=function(t,e,n){return this.save(u.ServerLabel.STOP,t,e,n)},t.prototype.isActiveOnCurrentForceList=function(t,e){return a(this.filterService.currentList,function(n){return n.type===e&&n.contents.active&&n.contents.trkId===t})},t.prototype.isActiveOnCurrentForceSentList=function(t){return this.isActiveOnCurrentForceList(t,u.ServerLabel.SEND)},t.prototype.isActiveOnCurrentForceStopList=function(t){return this.isActiveOnCurrentForceList(t,u.ServerLabel.STOP)},t.$inject=["$q","stealth.tfi.filter.service","CONFIG"],t}();e.ForceService=d},function(t,e){t.exports="<div ng-if=\"::record.contents.linkIdentity\">\n    L16 Identity: {{::record.contents.linkIdentity}}\n</div>\n\n<div>\n    Last Modified: {{record.modified | momentFormat:'YYYY-MM-DD HH:mm[Z]' | labelVal:'':'Invalid date'}}\n</div>\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(338),i=n(4),o=n(159),a=n(85),s=n(29),l=n(681),c=n(6),u=n(84),d=n(265),f=n(247),p=function(){function t(t,e,n,i){var o=this;this.$timeout=t,this.$q=e,this.ol3Map=n,this.FeatureLayer=i,this.mapLayer=new this.FeatureLayer({name:"Active Filters",queryable:!1,iconClass:"fa-shield",viewState:{size:1,fillColor:"rgb(255,200,0)"},styleFnViewState:function(t){return r(function(t,e,n){return[new c.style.Style({stroke:new c.style.Stroke({color:"rgb(255,255,255)",width:t.size+.5})}),new c.style.Style({stroke:new c.style.Stroke({color:t.fillColor,width:t.size})})]})(t)}}),this.userObjectService=d.UserObjectService.getInstance(),this.innerList=[],this.innerListFilterPredicates=[],this.currentList=[],this.store=new u.List.ArrayStore([],"id"),this.store.sortBy(["created"],["desc"]);var a=new c.format.WKT,s=function(){o.store.read().then(function(t){o.mapLayer.getSource().clear();var e=[];t.forEach(function(t){if(t.contents.active&&t.type===f.ServerLabel.CQL){var n=a.readGeometry(t.contents.bounds);e.push(new c.Feature({geometry:n}))}}),o.mapLayer.getSource().addFeatures(e)})};s(),this.store.addChangeListener(s),this.mapLayer.styleDirectiveScope.removeLayer=null,this.ol3Map.addLayer(this.mapLayer),this.poll()}return t.prototype.poll=function(){var t=this;this.$timeout.cancel(this.nextPoll),this.nextPoll=null,this.$q.all(i(o(f.ServerLabel),function(e){return t.$q.when(t.userObjectService.list(e))})).then(function(t){return _(t).pluck("data").flatten().value()}).then(function(e){var n;(n=t.innerList).splice.apply(n,[0,t.innerList.length].concat(e)),t.updateStore(),t.nextPoll=t.$timeout(function(){t.poll()},15e3)},function(e){t.nextPoll=t.$timeout(function(){t.poll()},3e5)})},t.prototype.updateStore=function(){var t;this.currentList=a(this.innerListFilterPredicates,function(t,e){return s(t,e)},this.innerList),(t=this.store).updateAndPrune.apply(t,this.currentList)},t.prototype.addInnerListFilter=function(t,e){this.innerListFilterPredicates.push(t),e||this.updateStore()},t.prototype.removeInnerListFilter=function(t,e){l(this.innerListFilterPredicates,function(e){return e===t}),e||this.updateStore()},t.prototype.clearInnerListFilters=function(t){this.innerListFilterPredicates.length=0,t||this.updateStore()},t.prototype.addStoreFilter=function(t){this.store.addFilter(t)},t.prototype.removeStoreFilter=function(t){this.store.removeFilter(t)},t.prototype.clearStoreFilters=function(){this.store.clearFilters()},t.prototype.toggleActiveState=function(t){var e=this;return t.contents.active=!t.contents.active,this.$q.when(this.userObjectService.update(t)).then(function(){e.poll()},function(){t.contents.active=!t.contents.active})},t.prototype.delete=function(t){var e=this;return this.$q.when(this.userObjectService.delete(t)).then(function(){e.poll()})},t.prototype.getMapLayerVisibility=function(){return this.mapLayer.getOl3Layer().getVisible()},t.prototype.toggleMapLayerVisibility=function(t){var e="boolean"==typeof t?t:!this.mapLayer.getOl3Layer().getVisible();this.mapLayer.getOl3Layer().setVisible(e)},t.$inject=["$timeout","$q","ol3Map","stealth.core.geo.ol3.layers.FeatureLayer"],t}();e.FilterService=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(538),i=n(247);function o(t,e){r(i.ServerLabel,function(e,n){e===t.record.type&&(t.displayLabel=i.DisplayLabel[n],t.iconClass=i.IconClass[n])}),t.toggleActiveState=function(n){n.stopImmediatePropagation(),e.toggleActiveState(t.record)}}o.$inject=["$scope","stealth.tfi.filter.service"],e.titleCtrl=o},function(t,e){t.exports='<div class="flex-row flex-align-items-center">\n    <div class="ellipsis"\n         ng-class="{\'tfi-list-filter-title-inactive\': !record.contents.active}"\n         ccri-angular-utils-tooltip-overflow\n         uib-tooltip="{{record.contents.title}}"\n         tooltip-enable="false"\n         tooltip-class="wrap"\n         tooltip-placement="bottom-left"\n         tooltip-popup-delay="900"\n    >{{record.contents.title ||\n        (record.contents.subLabel ?\n            (record.contents.label + \' / \' + record.contents.subLabel) :\n            (record.contents.label)\n        )}}\n    </div>\n    <div class="tfi-list-filter-type nowrap"\n         ng-class="{\'tfi-list-filter-type-active\': record.contents.active}"\n         uib-tooltip="{{record.contents.active ? \'Deactivate\' : \'Activate\'}}"\n         tooltip-popup-delay="900"\n         ng-click="toggleActiveState($event)">\n        <i class="fa fa-lg" ng-class="::iconClass"></i>\n        {{::displayLabel}}\n    </div>\n</div>\n'},function(t,e){t.exports='<div>\n    <ccri-list-view-element\n        button-options="buttonOptions"\n        datastore="store"\n        decorate-card="decorateCard"\n        expand-options="true"\n        manual-refresh="manualRefresh"\n        menu-resolver="menuResolver"\n        on-mouse-enter="onMouseEnter"\n        on-mouse-leave="onMouseLeave"\n        toolbar-widget="toolbarWidget"\n        class="anchorAll"\n    ></ccri-list-view-element>\n</div>\n'},function(t,e){t.exports='<div class="tfi-list-toolbar">\n    <div>\n        <ccri-angular-utils-select\n            ng-model="theaterNetworkPair"\n            from-list="theaterNetworkPairs"\n            placeholder="Theater -- Network"\n            label-fn="displayTheaterNetworkPair"\n            hide-tooltip="true"\n            ng-change="theaterNetworkOnChange(theaterNetworkPair)"\n        ></ccri-angular-utils-select>\n    </div>\n    <div class="buf-sm-mt buf-md-mb">\n        <span ng-repeat="v in views" class="buf-md-mr clickable"\n              ng-click="setView(v)">\n            <i class="fa fa-fw"\n               ng-class="{\'fa-dot-circle-o\': v===view, \'fa-circle-o\': v!==view}"\n            ></i>{{::v}}\n        </span>\n    </div>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(452),i=n(6),o=n(39),a=n(247);function s(t,e,n,s,l,c,u){e.on("$destroy",function(){t.$destroy()}),t.buttonOptions=[{name:"Create new "+a.DisplayLabel.CQL.toString().toLowerCase()+" filter",icon:"fa-plus-circle tfi-list-button-primary",onClick:function(){c.launchNewCqlFilterWiz()}},{name:"Highlight active filters",icon:"fa-map-o buf-xs-mh",active:function(){return u.getMapLayerVisibility()},onClick:function(){u.toggleMapLayerVisibility()}}],t.store=u.store,t.decorateCard=function(t){a.ServerLabel.CQL;switch(t.scope.record.type){case a.ServerLabel.CQL:t.contentWidget=new s({tag:"stealth-tfi-filter-cql-content",attrs:'record="record"',scope:t.scope});break;case a.ServerLabel.SEND:case a.ServerLabel.STOP:t.contentWidget=new s({tag:"stealth-tfi-filter-force-content",attrs:'record="record"',scope:t.scope});break;default:throw new Error("Invalid track filter type:"+t.scope.record.type)}t.titleWidget=new s({tag:"stealth-tfi-filter-title",attrs:'record="record"',scope:t.scope}),t.collapsedWidget=new s({tag:"stealth-tfi-filter-collapsed",attrs:'record="record"',scope:t.scope})},t.manualRefresh=function(){u.poll()},t.menuResolver=function(e){var i=[];return t.store.getById(e).then(function(t){t.type===a.ServerLabel.CQL&&i.push({name:"Zoom To",onClick:function(){var e=h.readGeometry(t.contents.bounds);l.fit(e)}}),i.push({name:t.contents.active?"Deactivate":"Activate",onClick:function(){u.toggleActiveState(t)}}),i.push({name:"Delete",onClick:function(){n.open({size:"sm",template:o.modalTemplates.confirmDelete,controller:["$scope",function(e){e.title=a.DisplayLabel[r(a.ServerLabel,function(e){return e===t.type})]+": "+(t.contents.title||t.contents.label+" / "+t.contents.subLabel),e.delete=function(){u.delete(t)}}],backdrop:"static",backdropClass:"wizardMask"})}})}),i},t.onMouseEnter=function(e){d=!1,t.store.getById(e).then(function(t){if(t.type===a.ServerLabel.CQL){if(d)return;var e=h.readGeometry(t.contents.bounds);f.addFeature(new i.Feature({geometry:e}))}})},t.onMouseLeave=function(t){f.clear(!0),d=!0},t.toolbarWidget=new s({tag:"stealth-tfi-toolbar"});var d=!1,f=new i.source.Vector,p=new i.layer.Vector({source:f,style:[new i.style.Style({stroke:new i.style.Stroke({color:"rgb(255,255,255)",width:4})}),new i.style.Style({stroke:new i.style.Stroke({color:"rgb(255,82,64)",width:2})})]}),h=new i.format.WKT;l.addLayerOverlay(p)}s.$inject=["$scope","$element","$uibModal","ccri.angular-utils.WidgetDef","ol3Map","stealth.tfi.dispatcher","stealth.tfi.filter.service"],e.sidebarPanelCtrl=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(134),o=n(4),a=n(159),s=n(452),l=n(2),c=n(23),u=n(247);function d(t,e,n,d,f){t.theaterNetworkPairs=_(f.userRoles).map(function(t){return _.get(f,"tfi.roles."+t)}).flatten().compact().sortByOrder(["theater","network"]).value(),t.views=["All"].concat(i(o(a(u.DisplayLabel),function(t){return t.toString()}))),t.setView=function(e){if(t.view=e,d.clearStoreFilters(),e!==t.views[0]){var n=u.ServerLabel[s(u.DisplayLabel,function(t){return e===t})];d.addStoreFilter(function(t){return t.type===n})}},t.setView(t.views[0]),t.displayTheaterNetworkPair=function(t){return t.theater+" -- "+t.network},t.theaterNetworkOnChange=function(t){t&&(e.localStorage.setItem(l(f,"app.context","tfi")+".theater-network",r.toJson({theater:t.theater,network:t.network})),n.updateTheaterNetworkEnvVar(t),n.emitLiveLayerRefreshEvent()),d.theaterNetworkPair=t,d.clearInnerListFilters(!0),d.addInnerListFilter(function(e){return t&&e.contents.theater===t.theater&&e.contents.network===t.network})},t.theaterNetworkPair=c(t.theaterNetworkPairs,d.theaterNetworkPair||r.fromJson(e.localStorage.getItem(l(f,"app.context","tfi")+".theater-network"))||t.theaterNetworkPairs[0]),t.theaterNetworkOnChange(t.theaterNetworkPair)}d.$inject=["$scope","$window","stealth.tfi.dispatcher","stealth.tfi.filter.service","CONFIG"],e.toolbarCtrl=d},function(t,e,n){"use strict";n.r(e);var r=n(3);function i(t){return"function"==typeof t}var o=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function s(t){setTimeout(function(){throw t})}var l={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},c=Array.isArray||function(t){return t&&"number"==typeof t.length};function u(t){return null!=t&&"object"==typeof t}var d,f={e:{}};function p(){try{return d.apply(this,arguments)}catch(t){return f.e=t,f}}function h(t){return d=t,p}var g=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return r.__extends(e,t),e}(Error),m=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,o=this._unsubscribe,a=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,l=r?r.length:0;n;)n.remove(this),n=++s<l&&r[s]||null;if(i(o))h(o).call(this)===f&&(e=!0,t=t||(f.e instanceof g?v(f.e.errors):[f.e]));if(c(a))for(s=-1,l=a.length;++s<l;){var d=a[s];if(u(d))if(h(d.unsubscribe).call(d)===f){e=!0,t=t||[];var p=f.e;p instanceof g?t=t.concat(v(p.errors)):t.push(p)}}if(e)throw new g(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function v(t){return t.reduce(function(t,e){return t.concat(e instanceof g?e.errors:e)},[])}var y="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",b=function(t){function e(e,n,r){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=l;break;case 1:if(!e){i.destination=l;break}if("object"==typeof e){if(function(t){return t instanceof b||"syncErrorThrowable"in t&&t[y]}(e)){var o=e[y]();i.syncErrorThrowable=o.syncErrorThrowable,i.destination=o,o.add(i)}else i.syncErrorThrowable=!0,i.destination=new w(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new w(i,e,n,r)}return i}return r.__extends(e,t),e.prototype[y]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(m),w=function(t){function e(e,n,r,o){var a,s=t.call(this)||this;s._parentSubscriber=e;var c=s;return i(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==l&&(i((c=Object.create(n)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=a,s._error=r,s._complete=o,s}return r.__extends(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw t;s(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(s(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(b);var _="function"==typeof Symbol&&Symbol.observable||"@@observable";function x(){}function S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return C(t)}function C(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:x}var E=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof b)return t;if(t[y])return t[y]()}return t||e||n?new b(t,e,n):new b(l)}(t,e,n);if(r?r.call(i,this.source):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=T(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[_]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:C(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=T(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function T(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var M=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return r.__extends(e,t),e}(Error),k=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.__extends(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(m),A=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.__extends(e,t),e}(b),I=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.__extends(e,t),e.prototype[y]=function(){return new A(this)},e.prototype.lift=function(t){var e=new O(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new M;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new M;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new M;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new M;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new M;return this.hasError?(t.error(this.thrownError),m.EMPTY):this.isStopped?(t.complete(),m.EMPTY):(this.observers.push(t),new k(this,t))},e.prototype.asObservable=function(){var t=new E;return t.source=this,t},e.create=function(t,e){return new O(t,e)},e}(E),O=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.__extends(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):m.EMPTY},e}(I);var P=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new L(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),L=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.__extends(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(b),D=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.__extends(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new m).add(this.source.subscribe(new R(this.getSubject(),this))),t.closed?(this._connection=null,t=m.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return function(t){return t.lift(new P(t))}(this)},e}(E),N=D.prototype,R=(N._subscribe,N._isComplete,N.getSubject,N.connect,N.refCount,function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.__extends(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(A));var F=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r.__extends(e,t),e.prototype._subscribe=function(t){var e=new m,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new B(n)),e.add(r.subscribe(t)),e},e}(E),B=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r.__extends(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(m),j=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.__extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new M;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(I),q=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.__extends(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return r.__extends(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(m)),z=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.__extends(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(q),U=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}(),$=function(t){function e(n,r){void 0===r&&(r=U.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.__extends(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(U),V=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e}($))(z),H=new E(function(t){return t.complete()});function W(t){return t?function(t){return new E(function(e){return t.schedule(function(){return e.complete()})})}(t):H}function G(t){return t&&"function"==typeof t.schedule}var Y=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}};function K(t,e){return new E(e?function(n){var r=new m,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:Y(t))}function X(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(G(n)?t.pop():n=void 0,t.length){case 0:return W(n);case 1:return n?K(t,n):function(t){var e=new E(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}(t[0]);default:return K(t,n)}}function Q(t,e){return new E(e?function(n){return e.schedule(Z,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function Z(t){var e=t.error;t.subscriber.error(e)}var J=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return X(this.value);case"E":return Q(this.error);case"C":return W()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var tt=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r.__extends(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new et(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(J.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(J.createError(t))},e.prototype._complete=function(){this.scheduleMessage(J.createComplete())},e}(b),et=function(){return function(t,e){this.notification=t,this.destination=e}}(),nt=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.__extends(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new rt(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new M;if(this.isStopped||this.hasError?e=m.EMPTY:(this.observers.push(t),e=new k(this,t)),i&&t.add(t=new tt(t,i)),n)for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(a=0;a<o&&!t.closed;a++)t.next(r[a].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||V).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(I),rt=function(){return function(t,e){this.time=t,this.value=e}}(),it=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.__extends(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),m.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),m.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(I),ot=1,at={};var st=function(t){var e=ot++;return at[e]=t,Promise.resolve().then(function(){return function(t){var e=at[t];e&&e()}(e)}),e},lt=function(t){delete at[t]},ct=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.__extends(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=st(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(lt(n),e.scheduled=void 0)},e}(q),ut=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}($))(ct),dt=new $(q),ft=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.__extends(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(q),pt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}($))(ft),ht=function(t){function e(e,n){void 0===e&&(e=gt),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r.__extends(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}($),gt=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return r.__extends(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(q);function mt(t){return t}function vt(t){return!!t&&(t instanceof E||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var yt=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return r.__extends(e,t),e}(Error),bt=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return r.__extends(e,t),e}(Error),wt=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,e.prototype),n}return r.__extends(e,t),e}(Error);function _t(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new xt(t,e))}}var xt=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new St(t,this.project,this.thisArg))},t}(),St=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.__extends(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(b);function Ct(t,e,n){if(e){if(!G(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ct(t,n).apply(void 0,r).pipe(_t(function(t){return c(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i,o=this,a={context:o,subject:i,callbackFunc:t,scheduler:n};return new E(function(r){if(n){var s={args:e,subscriber:r,params:a};return n.schedule(Et,0,s)}if(!i){i=new it;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){i.error(t)}}return i.subscribe(r)})}}function Et(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,a=i.context,s=i.scheduler,l=i.subject;if(!l){l=i.subject=new it;try{o.apply(a,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(s.schedule(Tt,0,{value:r,subject:l}))}]))}catch(t){l.error(t)}}this.add(l.subscribe(r))}function Tt(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function Mt(t,e,n){if(e){if(!G(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Mt(t,n).apply(void 0,r).pipe(_t(function(t){return c(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new E(function(r){var o=i.context,a=i.subject;if(n)return n.schedule(kt,0,{params:i,subscriber:r,context:o});if(!a){a=i.subject=new it;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?a.error(n):(a.next(t.length<=1?t[0]:t),a.complete())}]))}catch(t){a.error(t)}}return a.subscribe(r)})}}function kt(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,a=n.args,s=n.scheduler,l=n.subject;if(!l){l=n.subject=new it;try{o.apply(i,a.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(s.schedule(It,0,{err:r,subject:l}));else{var i=t.length<=1?t[0]:t;e.add(s.schedule(At,0,{value:i,subject:l}))}}]))}catch(t){this.add(s.schedule(It,0,{err:t,subject:l}))}}this.add(l.subscribe(r))}function At(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function It(t){var e=t.err;t.subject.error(e)}var Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(b),Pt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.__extends(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(b),Lt=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,s),e}};var Dt=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Nt=function(t){return function(e){for(var n=t[Dt]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},Rt=function(t){return function(e){var n=t[_]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Ft=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Bt(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var jt=function(t){if(t instanceof E)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[_])return Rt(t);if(Ft(t))return Y(t);if(Bt(t))return Lt(t);if(t&&"function"==typeof t[Dt])return Nt(t);var e=u(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function qt(t,e,n,r){var i=new Pt(t,n,r);return jt(e)(i)}var zt={};function Ut(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return G(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&c(t[0])&&(t=t[0]),K(t,r).lift(new $t(n))}var $t=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Vt(t,this.resultSelector))},t}(),Vt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.__extends(e,t),e.prototype._next=function(t){this.values.push(zt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(qt(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=o[n],s=this.toRespond?a===zt?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Ot);function Ht(t,e){if(!e)return t instanceof E?t:new E(jt(t));if(null!=t){if(function(t){return t&&"function"==typeof t[_]}(t))return function(t,e){return new E(e?function(n){var r=new m;return r.add(e.schedule(function(){var i=t[_]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:Rt(t))}(t,e);if(Bt(t))return function(t,e){return new E(e?function(n){var r=new m;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:Lt(t))}(t,e);if(Ft(t))return K(t,e);if(function(t){return t&&"function"==typeof t[Dt]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new E(e?function(n){var r,i=new m;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[Dt](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:Nt(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var Wt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Gt(t,this.project,this.concurrent))},t}(),Gt=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.__extends(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(qt(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Ot);function Yt(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return Ht(e(t,r)).pipe(_t(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new Wt(e,r))})}(mt,t)}function Kt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&G(t[1])?Ht(t[0]):Yt(1)(X.apply(void 0,t))}function Xt(t){return new E(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Ht(n):W()).subscribe(e)})}function Qt(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),0===e.length?H:t?Qt(e).pipe(_t(function(e){return t.apply(void 0,e)})):new E(function(t){return new Zt(t,e)})}var Zt=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var a=qt(r,n[o],null,o);a&&r.add(a)}return r}return r.__extends(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()},e}(Ot);Object.prototype.toString;function Jt(t,e,n,r){return i(n)&&(r=n,n=void 0),r?Jt(t,e,n).pipe(_t(function(t){return c(t)?r.apply(void 0,t):r(t)})):new E(function(r){!function t(e,n,r,i,o){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(n,r,o),a=function(){return s.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var l=e;e.on(n,r),a=function(){return l.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(n,r),a=function(){return c.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var u=0,d=e.length;u<d;u++)t(e[u],n,r,i,o)}i.add(a)}(t,e,function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)},r,n)})}function te(t,e,n){return n?te(t,e).pipe(_t(function(t){return c(t)?n.apply(void 0,t):n(t)})):new E(function(n){var r,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(o)}catch(t){return void n.error(t)}if(i(e))return function(){return e(o,r)}})}function ee(t,e,n,r,i){var o,a;if(1==arguments.length){var s=t;a=s.initialState,e=s.condition,n=s.iterate,o=s.resultSelector||mt,i=s.scheduler}else void 0===r||G(r)?(a=t,o=mt,i=r):(a=t,o=r);return new E(function(t){var r=a;if(i)return i.schedule(ne,0,{subscriber:t,iterate:n,condition:e,resultSelector:o,state:r});for(;;){if(e){var s=void 0;try{s=e(r)}catch(e){return void t.error(e)}if(!s){t.complete();break}}var l=void 0;try{l=o(r)}catch(e){return void t.error(e)}if(t.next(l),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}function ne(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function re(t,e,n){return void 0===e&&(e=H),void 0===n&&(n=H),Xt(function(){return t()?e:n})}function ie(t){return!c(t)&&t-parseFloat(t)+1>=0}function oe(t,e){return void 0===t&&(t=0),void 0===e&&(e=dt),(!ie(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=dt),new E(function(n){return n.add(e.schedule(ae,t,{subscriber:n,counter:0,period:t})),n})}function ae(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}function se(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return G(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof E?t[0]:Yt(n)(K(t,r))}var le=new E(x);function ce(){return le}function ue(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return H;var n=t[0],r=t.slice(1);return 1===t.length&&c(n)?ue.apply(void 0,n):new E(function(t){var e=function(){return t.add(ue.apply(void 0,r).subscribe(t))};return Ht(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}function de(t,e){return new E(e?function(n){var r=Object.keys(t),i=new m;return i.add(e.schedule(fe,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function fe(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,o[a]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function pe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!c(t[0]))return t[0];t=t[0]}return K(t,void 0).lift(new he)}var he=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new ge(t))},t}(),ge=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.__extends(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=qt(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)},e}(Ot);function me(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new E(function(r){var i=0,o=t;if(n)return n.schedule(ve,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function ve(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}function ye(t,e,n){void 0===t&&(t=0);var r=-1;return ie(e)?r=Number(e)<1?1:Number(e):G(e)&&(n=e),G(n)||(n=dt),new E(function(e){var i=ie(t)?t:+t-n.now();return n.schedule(be,i,{index:0,period:r,subscriber:e})})}function be(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function we(t,e){return new E(function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?Ht(i):H).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}function _e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),K(t,void 0).lift(new xe(n))}var xe=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Se(t,this.resultSelector))},t}(),Se=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return r.__extends(e,t),e.prototype._next=function(t){var e=this.iterators;c(t)?e.push(new Ee(t)):"function"==typeof t[Dt]?e.push(new Ce(t[Dt]())):e.push(new Te(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(a=t[r]).hasValue&&!a.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var a,s=(a=t[r]).next();if(a.hasCompleted()&&(i=!0),s.done)return void n.complete();o.push(s.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(b),Ce=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),Ee=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Dt]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Te=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.__extends(e,t),e.prototype[Dt]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return qt(this,this.observable,this,e)},e}(Ot);n.d(e,"Observable",function(){return E}),n.d(e,"ConnectableObservable",function(){return D}),n.d(e,"GroupedObservable",function(){return F}),n.d(e,"observable",function(){return _}),n.d(e,"Subject",function(){return I}),n.d(e,"BehaviorSubject",function(){return j}),n.d(e,"ReplaySubject",function(){return nt}),n.d(e,"AsyncSubject",function(){return it}),n.d(e,"asapScheduler",function(){return ut}),n.d(e,"asyncScheduler",function(){return dt}),n.d(e,"queueScheduler",function(){return V}),n.d(e,"animationFrameScheduler",function(){return pt}),n.d(e,"VirtualTimeScheduler",function(){return ht}),n.d(e,"VirtualAction",function(){return gt}),n.d(e,"Scheduler",function(){return U}),n.d(e,"Subscription",function(){return m}),n.d(e,"Subscriber",function(){return b}),n.d(e,"Notification",function(){return J}),n.d(e,"pipe",function(){return S}),n.d(e,"noop",function(){return x}),n.d(e,"identity",function(){return mt}),n.d(e,"isObservable",function(){return vt}),n.d(e,"ArgumentOutOfRangeError",function(){return yt}),n.d(e,"EmptyError",function(){return bt}),n.d(e,"ObjectUnsubscribedError",function(){return M}),n.d(e,"UnsubscriptionError",function(){return g}),n.d(e,"TimeoutError",function(){return wt}),n.d(e,"bindCallback",function(){return Ct}),n.d(e,"bindNodeCallback",function(){return Mt}),n.d(e,"combineLatest",function(){return Ut}),n.d(e,"concat",function(){return Kt}),n.d(e,"defer",function(){return Xt}),n.d(e,"empty",function(){return W}),n.d(e,"forkJoin",function(){return Qt}),n.d(e,"from",function(){return Ht}),n.d(e,"fromEvent",function(){return Jt}),n.d(e,"fromEventPattern",function(){return te}),n.d(e,"generate",function(){return ee}),n.d(e,"iif",function(){return re}),n.d(e,"interval",function(){return oe}),n.d(e,"merge",function(){return se}),n.d(e,"never",function(){return ce}),n.d(e,"of",function(){return X}),n.d(e,"onErrorResumeNext",function(){return ue}),n.d(e,"pairs",function(){return de}),n.d(e,"race",function(){return pe}),n.d(e,"range",function(){return me}),n.d(e,"throwError",function(){return Q}),n.d(e,"timer",function(){return ye}),n.d(e,"using",function(){return we}),n.d(e,"zip",function(){return _e}),n.d(e,"EMPTY",function(){return H}),n.d(e,"NEVER",function(){return le}),n.d(e,"config",function(){return a})},function(t,e,n){"use strict";n.r(e);var r=1,i=2,o=4,a=5,s=484813681109536e-20,l=Math.PI/2,c=.16666666666666666,u=.04722222222222222,d=.022156084656084655,f=1e-10,p=.017453292519943295,h=57.29577951308232,g=Math.PI/4,m=2*Math.PI,v=3.14159265359,y={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},b={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},w=/[\s_\-\/\(\)]/g;function _(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(w,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(w,"")===i)return t[n]}var x=function(t){var e,n,r,i={},o=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*p},lat_1:function(t){i.lat1=t*p},lat_2:function(t){i.lat2=t*p},lat_ts:function(t){i.lat_ts=t*p},lon_0:function(t){i.long0=t*p},lon_1:function(t){i.long1=t*p},lon_2:function(t){i.long2=t*p},alpha:function(t){i.alpha=parseFloat(t)*p},lonc:function(t){i.longc=t*p},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=_(b,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*p},pm:function(t){var e=_(y,t);i.from_greenwich=(e||parseFloat(t))*p},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(i.axis=t)}};for(e in o)n=o[e],e in a?"function"==typeof(r=a[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},S=function(t){return new I(t).output()},C=1,E=/\s/,T=/[A-Za-z]/,M=/[A-Za-z84]/,k=/[,\]]/,A=/[\d\.E\-\+]/;function I(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=C}function O(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(t,e){return P(e,t),t},r);e&&(t[e]=i)}function P(t,e){if(Array.isArray(t)){var n,r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void P(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r)switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&P(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&P(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void O(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return P(t,e[r]);return O(e,r,t)}else e[r]=t;else e[r]=!0}else e[t]=!0}I.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;E.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case C:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},I.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(k.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},I.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=C)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=C,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},I.prototype.number=function(t){if(!A.test(t)){if(k.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},I.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},I.prototype.keyword=function(t){if(M.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=C)}if(!k.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},I.prototype.neutral=function(t){if(T.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(A.test(t))return this.word=t,void(this.state=3);if(!k.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},I.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var L=.017453292519943295;function D(t){return t*L}var N=function(t){var e=S(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return P(e,i),function(t){"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;function n(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(e=t),e&&(e.DATUM?t.datumCode=e.DATUM.name.toLowerCase():t.datumCode=e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),e.DATUM&&e.DATUM.TOWGS84&&(t.datum_params=e.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",D],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",D],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",D],["lat0","latitude_of_origin",D],["lat0","standard_parallel_1",D],["lat1","standard_parallel_1",D],["lat2","standard_parallel_2",D],["azimuth","Azimuth"],["alpha","azimuth",D],["srsCode","name"]].forEach(function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=D(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function R(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?R[t]=x(arguments[1]):R[t]=N(arguments[1]):R[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?R.apply(e,t):R(t)});if("string"==typeof t){if(t in R)return R[t]}else"EPSG"in t?R["EPSG:"+t.EPSG]=t:"ESRI"in t?R["ESRI:"+t.ESRI]=t:"IAU2000"in t?R["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(R);var F=R;var B=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var j=["3857","900913","3785","102113"];var q=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in F}(t))return F[t];if(function(t){return B.some(function(e){return t.indexOf(e)>-1})}(t)){var e=N(t);if(function(t){var e=_(t,"authority");if(e){var n=_(e,"epsg");return n&&j.indexOf(n)>-1}}(e))return F["EPSG:3857"];var n=function(t){var e=_(t,"extension");if(e)return _(e,"proj4")}(e);return n?x(n):e}return function(t){return"+"===t[0]}(t)?x(t):void 0},z=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},U=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},$=function(t){return t<0?-1:1},V=function(t){return Math.abs(t)<=v?t:t-$(t)*m},H=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(l-e))/r},W=function(t,e){for(var n,r,i=.5*t,o=l-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=l-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999};function G(t){return t}var Y=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=U(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*h>90&&i*h<-90&&r*h>180&&r*h<-180)return null;if(Math.abs(Math.abs(i)-l)<=f)return null;if(this.sphere)e=this.x0+this.a*this.k0*V(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(g+.5*i));else{var o=Math.sin(i),a=H(this.e,i,o);e=this.x0+this.a*this.k0*V(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=l-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=W(this.e,o)))return null}return e=V(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:G,inverse:G,names:["longlat","identity"]}],K={},X=[];function Q(t,e){var n=X.length;return t.names?(X[n]=t,t.names.forEach(function(t){K[t.toLowerCase()]=n}),this):(console.log(e),!0)}var Z={start:function(){Y.forEach(Q)},add:Q,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==K[e]&&X[K[e]]?X[K[e]]:void 0}},J={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},tt=J.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};J.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var et={};et.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},et.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},et.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},et.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},et.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},et.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},et.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},et.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},et.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},et.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},et.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},et.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},et.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},et.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},et.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},et.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},et.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var nt=function(t,e,n,l,c,u){var d={};return d.datum_type=void 0===t||"none"===t?a:o,e&&(d.datum_params=e.map(parseFloat),0===d.datum_params[0]&&0===d.datum_params[1]&&0===d.datum_params[2]||(d.datum_type=r),d.datum_params.length>3&&(0===d.datum_params[3]&&0===d.datum_params[4]&&0===d.datum_params[5]&&0===d.datum_params[6]||(d.datum_type=i,d.datum_params[3]*=s,d.datum_params[4]*=s,d.datum_params[5]*=s,d.datum_params[6]=d.datum_params[6]/1e6+1))),d.a=n,d.b=l,d.es=c,d.ep2=u,d};function rt(t,e){if(!(this instanceof rt))return new rt(t);e=e||function(t){if(t)throw t};var n=q(t);if("object"==typeof n){var r=rt.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=_(et,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o=function(t,e,n,r,i){if(!t){var o=_(J,r);o||(o=tt),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<f)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),a=function(t,e,n,r){var i=t*t,o=e*e,a=(i-o)/i,s=0;return r?(i=(t*=1-a*(c+a*(u+a*d)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(o.a,o.b,o.rf,n.R_A),s=n.datum||nt(n.datumCode,n.datum_params,o.a,o.b,a.es,a.ep2);z(this,n),z(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=s,this.init(),e(null,this)}else e(t)}else e(t)}rt.projections=Z,rt.projections.start();var it=rt;function ot(t){return t===r||t===i}var at=function(t,e,n){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===r?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==i||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)?n:t.datum_type===a||e.datum_type===a?n:t.es!==e.es||t.a!==e.a||ot(t.datum_type)||ot(e.datum_type)?(n=function(t,e,n){var r,i,o,a,s=t.x,c=t.y,u=t.z?t.z:0;if(c<-l&&c>-1.001*l)c=-l;else if(c>l&&c<1.001*l)c=l;else{if(c<-l)return{x:-1/0,y:-1/0,z:t.z};if(c>l)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(c),a=Math.cos(c),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+u)*a*Math.cos(s),y:(r+u)*a*Math.sin(s),z:(r*(1-e)+u)*i}}(n,t.es,t.a),ot(t.datum_type)&&(n=function(t,e,n){if(e===r)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===i){var o=n[0],a=n[1],s=n[2],l=n[3],c=n[4],u=n[5],d=n[6];return{x:d*(t.x-u*t.y+c*t.z)+o,y:d*(u*t.x+t.y-l*t.z)+a,z:d*(-c*t.x+l*t.y+t.z)+s}}}(n,t.datum_type,t.datum_params)),ot(e.datum_type)&&(n=function(t,e,n){if(e===r)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===i){var o=n[0],a=n[1],s=n[2],l=n[3],c=n[4],u=n[5],d=n[6],f=(t.x-o)/d,p=(t.y-a)/d,h=(t.z-s)/d;return{x:f+u*p-c*h,y:-u*f+p+l*h,z:c*f-l*p+h}}}(n,e.datum_type,e.datum_params)),function(t,e,n,r){var i,o,a,s,l,c,u,d,f,p,h,g,m,v,y,b=t.x,w=t.y,_=t.z?t.z:0;if(i=Math.sqrt(b*b+w*w),o=Math.sqrt(b*b+w*w+_*_),i/n<1e-12){if(v=0,o/n<1e-12)return y=-r,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,b);a=_/o,d=(s=i/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*l,m=0;do{m++,c=e*(u=n/Math.sqrt(1-e*f*f))/(u+(y=i*d+_*f-u*(1-e*f*f))),g=(h=a*(l=1/Math.sqrt(1-c*(2-c)*s*s)))*d-(p=s*(1-c)*l)*f,d=p,f=h}while(g*g>1e-24&&m<30);return{x:v,y:Math.atan(h/Math.abs(p)),z:y}}(n,e.es,e.a,e.b)):n},st=function(t,e,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,c={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i="x"):1===o?(r=s,i="y"):(r=l,i="z"),t.axis[o]){case"e":c[i]=r;break;case"w":c[i]=-r;break;case"n":c[i]=r;break;case"s":c[i]=-r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c},lt=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},ct=function(t){ut(t.x),ut(t.y)};function ut(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function dt(t,e,n){var o;return Array.isArray(n)&&(n=lt(n)),ct(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===r||t.datum.datum_type===i)&&"WGS84"!==e.datumCode||(e.datum.datum_type===r||e.datum.datum_type===i)&&"WGS84"!==t.datumCode}(t,e)&&(n=dt(t,o=new it("WGS84"),n),t=o),"enu"!==t.axis&&(n=st(t,!1,n)),"longlat"===t.projName?n={x:n.x*p,y:n.y*p}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=at(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y}),"longlat"===e.projName?n={x:n.x*h,y:n.y*h}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter})),"enu"!==e.axis?st(e,!0,n):n}var ft=it("WGS84");function pt(t,e,n){var r,i,o;return Array.isArray(n)?(r=dt(t,e,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):(i=dt(t,e,n),2===(o=Object.keys(n)).length?i:(o.forEach(function(t){"x"!==t&&"y"!==t&&(i[t]=n[t])}),i))}function ht(t){return t instanceof it?t:t.oProj?t.oProj:it(t)}var gt=function(t,e,n){t=ht(t);var r,i=!1;return void 0===e?(e=t,t=ft,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=ft,i=!0),e=ht(e),n?pt(t,e,n):(r={forward:function(n){return pt(t,e,n)},inverse:function(n){return pt(e,t,n)}},i&&(r.oProj=e),r)},mt=n(209);function vt(t,e,n){if(!(this instanceof vt))return new vt(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}vt.fromMGRS=function(t){return new vt(Object(mt.toPoint)(t))},vt.prototype.toMGRS=function(t){return Object(mt.forward)([this.x,this.y],t)};var yt=vt,bt=n(828),wt=.01068115234375,_t=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*wt))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*wt)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},xt=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},St=function(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(xt(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<f)return i}return i};var Ct={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=_t(this.es),this.ml0=xt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=V(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var c=l*a,u=Math.pow(c,2),d=this.ep2*Math.pow(l,2),p=Math.pow(d,2),h=Math.abs(l)>f?Math.tan(o):0,g=Math.pow(h,2),m=Math.pow(g,2);e=1-this.es*Math.pow(s,2),c/=Math.sqrt(e);var v=xt(o,s,l,this.en);n=this.a*(this.k0*c*(1+u/6*(1-g+d+u/20*(5-18*g+m+14*d-58*g*d+u/42*(61+179*m-m*g-479*g)))))+this.x0,r=this.a*(this.k0*(v-this.ml0+s*a*c/2*(1+u/12*(5-g+9*d+4*p+u/30*(61+m-58*g+270*d-330*g*d+u/56*(1385+543*m-m*g-3111*g))))))+this.y0}else{var y=l*Math.sin(a);if(Math.abs(Math.abs(y)-1)<f)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>f)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=St(e,this.es,this.en),Math.abs(n)<l){var s=Math.sin(n),c=Math.cos(n),u=Math.abs(c)>f?Math.tan(n):0,d=this.ep2*Math.pow(c,2),p=Math.pow(d,2),h=Math.pow(u,2),g=Math.pow(h,2);e=1-this.es*Math.pow(s,2);var m=o*Math.sqrt(e)/this.k0,v=Math.pow(m,2);r=n-(e*=u)*v/(1-this.es)*.5*(1-v/12*(5+3*h-9*d*h+d-4*p-v/30*(61+90*h-252*d*h+45*g+46*d-v/56*(1385+3633*h+4095*g+1574*g*h)))),i=V(this.long0+m*(1-v/6*(1+2*h+d-v/20*(5+28*h+24*g+8*d*h+6*d-v/42*(61+662*h+1320*g+720*g*h))))/c)}else r=l*$(a),i=0;else{var y=Math.exp(o/this.k0),b=.5*(y-1/y),w=this.lat0+a/this.k0,_=Math.cos(w);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(b,2))),r=Math.asin(e),a<0&&(r=-r),i=0===b&&0===_?0:V(Math.atan2(b,_)+this.long0)}return t.x=i,t.y=r,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Et=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Tt=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},Mt=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(Tt(1,e)+1))),t<0?-e:e},kt=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)},At=function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n},It=function(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=Et(n),l=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(n),c=2*a*l,u=-2*o*s,d=t.length-1,f=t[d],p=0,h=0,g=0;--d>=0;)r=h,i=p,f=c*(h=f)-r-u*(p=g)+t[d],g=u*h-i+c*p;return[(c=o*l)*f-(u=a*s)*g,c*g+u*f]};var Ot={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=kt(this.cbg,this.lat0);this.Zb=-this.Qn*(r+At(this.gtu,2*r))},forward:function(t){var e=V(t.x-this.long0),n=t.y;n=kt(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,Tt(r,i*a)),e=Mt(Math.tan(e));var s,l,c=It(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=It(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(Et(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r);i=Math.atan2(a*c,Tt(l,c*s)),r=Math.atan2(l,c*s),e=V(r+this.long0),n=kt(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},Pt=function(t,e){if(void 0===t){if((t=Math.floor(30*(V(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t};var Lt={init:function(){var t=Pt(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*p,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ot.init.apply(this),this.forward=Ot.forward,this.inverse=Ot.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Dt=function(t,e){return Math.pow((1-t)/(1+t),e)},Nt=20;var Rt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+g)/(Math.pow(Math.tan(.5*this.lat0+g),this.C)*Dt(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+g),this.C)*Dt(this.e*Math.sin(n),this.ratexp))-l,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+g)/this.K,1/this.C),i=Nt;i>0&&(n=2*Math.atan(r*Dt(this.e*Math.sin(t.y),-.5*this.e))-l,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var Ft={init:function(){Rt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=V(t.x-this.long0),Rt.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Rt.inverse.apply(this,[t]),t.x=V(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Bt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=f&&(this.k0=.5*(1+$(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=f&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=f&&(this.k0=.5*this.cons*U(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/H(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=U(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-l,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,c=t.y,u=Math.sin(c),d=Math.cos(c),p=V(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=f&&Math.abs(c+this.lat0)<=f?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*d*Math.cos(p)),t.x=this.a*e*d*Math.sin(p)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*d*Math.cos(p))+this.y0,t):(n=2*Math.atan(this.ssfn_(c,u,this.e))-l,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=f?(o=H(this.e,c*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<f?(e=2*this.a*this.k0/(1+i*Math.cos(p)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(p))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(p))+this.y0),t.x=e*i*Math.sin(p)+this.x0,t))},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=f?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<f?this.lat0>0?V(this.long0+Math.atan2(t.x,-1*t.y)):V(this.long0+Math.atan2(t.x,t.y)):V(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=f){if(a<=f)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*W(this.e,r),e=this.con*V(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=f?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=V(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*W(this.e,Math.tan(.5*(l+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(l+t))*Math.pow((1-e)/(1+e),.5*n)}};var jt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,c=o,u=-1e3,d=0;Math.abs(c-u)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=c,t},names:["somerc"]};var qt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=H(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=H(this.e,this.lat1,Math.sin(this.lat1)),l=H(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var c=Math.pow(s,this.bl),u=Math.pow(l,this.bl);i=.5*((r=this.el/c)-1/r);var d=(this.el*this.el-u*c)/(this.el*this.el+u*c),f=(u-c)/(u+c),p=V(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(d*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=V(this.long0);var h=V(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*h)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=V(i-this.long0);if(Math.abs(Math.abs(o)-l)<=f)r=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(g+r*this.gamma0*.5)),e=-1*r*l*this.al/this.bl;else{var s=H(this.e,o,Math.sin(o)),c=this.el/Math.pow(s,this.bl),u=.5*(c-1/c),d=.5*(c+1/c),p=Math.sin(this.bl*a),h=(u*Math.sin(this.gamma0)-p*Math.cos(this.gamma0))/d;n=Math.abs(Math.abs(h)-1)<=f?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-h)/(1+h))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=f?this.al*this.bl*a:this.al*Math.atan2(u*Math.cos(this.gamma0)+p*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*e/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,c=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<f?(t.x=this.long0,t.y=l):Math.abs(s+1)<f?(t.x=this.long0,t.y=-1*l):(t.y=W(this.e,c),t.x=V(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var zt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<f)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=U(this.e,e,n),i=H(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=U(this.e,o,a),l=H(this.e,this.lat2,o),c=H(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>f?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=f&&(n=$(n)*(l-2*f));var r,i,o=Math.abs(Math.abs(n)-l);if(o>f)r=H(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*V(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var c=0;if(0!==e&&(c=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=W(this.e,r)))return null}else i=-l;return o=V(c/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var Ut={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y,u=V(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,c+=1}while(0===s&&c<15);return c>=15?null:t},names:["Krovak","krovak"]},$t=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},Vt=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Ht=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Wt=function(t){return.05859375*t*t*(1+.75*t)},Gt=function(t){return t*t*t*(35/3072)},Yt=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},Kt=function(t){return Math.abs(t)<l?t:t-$(t)*Math.PI},Xt=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var Qt={init:function(){this.sphere||(this.e0=Vt(this.es),this.e1=Ht(this.es),this.e2=Wt(this.es),this.e3=Gt(this.es),this.ml0=this.a*$t(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=V(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=Yt(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,d=this.es*a*a/(1-this.es);e=s*c*(1-u*l*(1/6-(8-l+8*d)*u/120)),n=this.a*$t(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*u*(.5+(5-l+6*d)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=Xt(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-l)<=f)return t.x=this.long0,t.y=l,i<0&&(t.y*=-1),t;var c=Yt(this.a,this.e,Math.sin(s)),u=c*c*c/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(s),2),p=r*this.a/c,h=p*p;e=s-c*Math.tan(s)/u*p*p*(.5-(1+3*d)*p*p/24),n=p*(1-h*(d/3+(1+3*d)*d*h/15))/Math.cos(s)}return t.x=V(n+this.long0),t.y=Kt(e),t},names:["Cassini","Cassini_Soldner","cass"]},Zt=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e};var Jt=.3333333333333333,te=.17222222222222222,ee=.10257936507936508,ne=.06388888888888888,re=.0664021164021164,ie=.016415012942191543;var oe={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-l)<f?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<f?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Zt(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*Jt,e=t*t,n[0]+=e*te,n[1]=e*ne,e*=t,n[0]+=e*ee,n[1]+=e*re,n[2]=e*ie,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Zt(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,c,u,d,p=t.x,h=t.y;if(p=V(p-this.long0),this.sphere){if(o=Math.sin(h),d=Math.cos(h),r=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+d*r:1+this.sinph0*o+this.cosph0*d*r)<=f)return null;e=(n=Math.sqrt(2/n))*d*Math.sin(p),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*d*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(h+this.phi0)<f)return null;n=g-.5*h,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=r}}else{switch(s=0,c=0,u=0,r=Math.cos(p),i=Math.sin(p),o=Math.sin(h),a=Zt(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,c=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*c*r;break;case this.EQUIT:u=1+c*r;break;case this.N_POLE:u=l+h,a=this.qp-a;break;case this.S_POLE:u=h-l,a=this.qp+a}if(Math.abs(u)<f)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*c*r):(u=Math.sqrt(2/(1+c*r)))*s*this.ymf,e=this.xmf*u*c*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?u:-u)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,c=t.x/this.a,u=t.y/this.a;if(this.sphere){var d,p=0,h=0;if((n=.5*(d=Math.sqrt(c*c+u*u)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=f?0:Math.asin(u*h/d),c*=h,u=p*d;break;case this.OBLIQ:n=Math.abs(d)<=f?this.phi0:Math.asin(p*this.sinph0+u*h*this.cosph0/d),c*=h*this.cosph0,u=(p-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:u=-u,n=l-n;break;case this.S_POLE:n-=l}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,u):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,u*=this.dd,(a=Math.sqrt(c*c+u*u))<f)return t.x=0,t.y=this.phi0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),c*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+u*i*this.cosb1/a,o=this.qp*s,u=a*this.cosb1*r-u*this.sinb1*i):(s=u*i/a,o=this.qp*s,u=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(o=c*c+u*u))return t.x=0,t.y=this.phi0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(c,u),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(s),this.apa)}return t.x=V(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},ae=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var se={init:function(){Math.abs(this.lat1+this.lat2)<f||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=U(this.e3,this.sin_po,this.cos_po),this.qs1=Zt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=U(this.e3,this.sin_po,this.cos_po),this.qs2=Zt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Zt(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>f?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Zt(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*V(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=V(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a,s=ae(.5*e);if(t<f)return s;for(var l=t*t,c=1;c<=25;c++)if(n=Math.sin(s),r=Math.cos(s),s+=a=.5*(o=1-(i=t*n)*i)*o/r*(e/(1-l)-n/o+.5/t*Math.log((1-i)/(1+i))),Math.abs(a)<=1e-7)return s;return null}};var le={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y;return r=V(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=f?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=ae(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=V(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},ce=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*l:l;for(var r,i,o,a,s=Math.asin(.5*e),c=0;c<30;c++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN};var ue={init:function(){this.sphere||(this.k0=U(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=V(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Zt(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=V(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=ce(this.e,2*t.y*this.k0/this.a),e=V(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var de={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=V(e-this.long0),i=Kt(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=V(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Kt(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},fe=20;var pe={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Vt(this.es),this.e1=Ht(this.es),this.e2=Wt(this.es),this.e3=Gt(this.es),this.ml0=this.a*$t(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=V(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=f?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(Kt(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=f)e=this.a*a,n=-1*this.ml0;else{var s=Yt(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*$t(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=f)e=V(r/this.a+this.long0),n=0;else{var u;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=fe;o;--o)if(l+=c=-1*(a*(l*(u=Math.tan(l))+1)-l-.5*(l*l+s)*u)/((l-a)/u-1),Math.abs(c)<=f){n=l;break}e=V(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=f)n=0,e=V(this.long0+r/this.a);else{var d,p,h,g,m;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=fe;o;--o)if(m=this.e*Math.sin(l),d=Math.sqrt(1-m*m)*Math.tan(l),p=this.a*$t(this.e0,this.e1,this.e2,this.e3,l),h=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(a*(d*(g=p/this.a)+1)-g-.5*d*(g*g+s))/(this.es*Math.sin(2*l)*(g*g+s-2*a*g)/(4*d)+(a-g)*(d*h-2/Math.sin(2*l))-h),Math.abs(c)<=f){n=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=V(this.long0+Math.asin(r*d/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var he={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/s*1e-5,a=i,l=1,c=0;for(e=1;e<=10;e++)l*=o,c+=this.A[e]*l;var u,d=c,f=a,p=1,h=0,g=0,m=0;for(e=1;e<=6;e++)u=h*d+p*f,p=p*d-h*f,h=u,g=g+this.B_re[e]*p-this.B_im[e]*h,m=m+this.B_im[e]*p+this.B_re[e]*h;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,l=o/this.a,c=1,u=0,d=0,f=0;for(e=1;e<=6;e++)n=u*a+c*l,c=c*a-u*l,u=n,d=d+this.C_re[e]*c-this.C_im[e]*u,f=f+this.C_im[e]*c+this.C_re[e]*u;for(var p=0;p<this.iterations;p++){var h,g=d,m=f,v=a,y=l;for(e=2;e<=6;e++)h=m*d+g*f,g=g*d-m*f,m=h,v+=(e-1)*(this.B_re[e]*g-this.B_im[e]*m),y+=(e-1)*(this.B_im[e]*g+this.B_re[e]*m);g=1,m=0;var b=this.B_re[1],w=this.B_im[1];for(e=2;e<=6;e++)h=m*d+g*f,g=g*d-m*f,m=h,b+=e*(this.B_re[e]*g-this.B_im[e]*m),w+=e*(this.B_im[e]*g+this.B_re[e]*m);var _=b*b+w*w;d=(v*b+y*w)/_,f=(y*b-v*w)/_}var x=d,S=f,C=1,E=0;for(e=1;e<=9;e++)C*=x,E+=this.D[e]*C;var T=this.lat0+E*s*1e5,M=this.long0+S;return t.x=M,t.y=T,t},names:["New_Zealand_Map_Grid","nzmg"]};var ge={init:function(){},forward:function(t){var e=t.x,n=t.y,r=V(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=V(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},me=20;var ve={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=_t(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=V(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=me;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<f)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*xt(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=ae((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=ae(Math.sin(e)/this.n)),r=V(r+this.long0),e=Kt(e)):(e=St(t.y/this.a,this.es,this.en),(i=Math.abs(e))<l?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=V(n)):i-f<l&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var ye={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=V(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<f)break}i/=2,Math.PI/2-Math.abs(n)<f&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=V(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var be={init:function(){Math.abs(this.lat1+this.lat2)<f||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Vt(this.es),this.e1=Ht(this.es),this.e2=Wt(this.es),this.e3=Gt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=U(this.e,this.sinphi,this.cosphi),this.ml1=$t(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<f?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=U(this.e,this.sinphi,this.cosphi),this.ml2=$t(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=$t(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=$t(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*V(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=V(this.long0+o/this.ns),r=Kt(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=Xt(a,this.e0,this.e1,this.e2,this.e3),i=V(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]};var we={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=V(r-this.long0);Math.abs(i)<=f&&(e=this.x0+this.R*o,n=this.y0);var a=ae(2*Math.abs(i/Math.PI));(Math.abs(o)<=f||Math.abs(Math.abs(i)-l)<=f)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),c=s*s,u=Math.sin(a),d=Math.cos(a),p=d/(u+d-1),h=p*p,g=p*(2/u-1),m=g*g,v=Math.PI*this.R*(s*(p-m)+Math.sqrt(c*(p-m)*(p-m)-(m+c)*(h-m)))/(m+c);o<0&&(v=-v),e=this.x0+v;var y=c+p;return v=Math.PI*this.R*(g*y-s*Math.sqrt((m+c)*(c+1)-y*y))/(m+c),n=i>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,l,c,u,d,p;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,o=(r=t.x/d)*r+(i=t.y/d)*i,d=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(c=(a-s*s/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,n=t.y>=0?(-u*Math.cos(p+Math.PI/3)-s/3/l)*Math.PI:-(-u*Math.cos(p+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<f?this.long0:V(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var _e={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,c,u,d,p,h,g,m,v,y,b,w,_,x,S,C,E=t.x,T=t.y,M=Math.sin(t.y),k=Math.cos(t.y),A=V(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=f?(t.x=this.x0+this.a*(l-T)*Math.sin(A),t.y=this.y0-this.a*(l-T)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=f?(t.x=this.x0+this.a*(l+T)*Math.sin(A),t.y=this.y0+this.a*(l+T)*Math.cos(A),t):(w=this.sin_p12*M+this.cos_p12*k*Math.cos(A),b=(y=Math.acos(w))/Math.sin(y),t.x=this.x0+this.a*b*k*Math.sin(A),t.y=this.y0+this.a*b*(this.cos_p12*M-this.sin_p12*k*Math.cos(A)),t):(e=Vt(this.es),n=Ht(this.es),r=Wt(this.es),i=Gt(this.es),Math.abs(this.sin_p12-1)<=f?(o=this.a*$t(e,n,r,i,l),a=this.a*$t(e,n,r,i,T),t.x=this.x0+(o-a)*Math.sin(A),t.y=this.y0-(o-a)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=f?(o=this.a*$t(e,n,r,i,l),a=this.a*$t(e,n,r,i,T),t.x=this.x0+(o+a)*Math.sin(A),t.y=this.y0+(o+a)*Math.cos(A),t):(s=M/k,c=Yt(this.a,this.e,this.sin_p12),u=Yt(this.a,this.e,M),d=Math.atan((1-this.es)*s+this.es*c*this.sin_p12/(u*k)),_=0===(p=Math.atan2(Math.sin(A),this.cos_p12*Math.tan(d)-this.sin_p12*Math.cos(A)))?Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.abs(Math.abs(p)-Math.PI)<=f?-Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.asin(Math.sin(A)*Math.cos(d)/Math.sin(p)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),y=c*_*(1-(x=_*_)*(v=(g=this.e*this.cos_p12*Math.cos(p)/Math.sqrt(1-this.es))*g)*(1-v)/6+(S=x*_)/8*(m=h*g)*(1-2*v)+(C=S*_)/120*(v*(4-7*v)-3*h*h*(1-7*v))-C*_/48*m),t.x=this.x0+y*Math.sin(p),t.y=this.y0+y*Math.cos(p),t))},inverse:function(t){var e,n,r,i,o,a,s,c,u,d,p,h,g,m,v,y,b,w,_,x,S,C;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*l*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=f?a=this.lat0:(a=ae(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-l,o=Math.abs(s)<=f?this.lat0>=0?V(this.long0+Math.atan2(t.x,-t.y)):V(this.long0-Math.atan2(-t.x,t.y)):V(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return c=Vt(this.es),u=Ht(this.es),d=Wt(this.es),p=Gt(this.es),Math.abs(this.sin_p12-1)<=f?(h=this.a*$t(c,u,d,p,l),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Xt((h-e)/this.a,c,u,d,p),o=V(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=f?(h=this.a*$t(c,u,d,p,l),e=Math.sqrt(t.x*t.x+t.y*t.y),a=Xt((e-h)/this.a,c,u,d,p),o=V(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),v=Math.atan2(t.x,t.y),g=Yt(this.a,this.e,this.sin_p12),y=Math.cos(v),w=-(b=this.e*this.cos_p12*y)*b/(1-this.es),_=3*this.es*(1-w)*this.sin_p12*this.cos_p12*y/(1-this.es),C=1-w*(S=(x=e/g)-w*(1+w)*Math.pow(x,3)/6-_*(1+3*w)*Math.pow(x,4)/24)*S/2-x*S*S*S/6,m=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*y),o=V(this.long0+Math.asin(Math.sin(v)*Math.sin(S)/Math.cos(m))),a=Math.atan((1-this.es*C*this.sin_p12/Math.sin(m))*Math.tan(m)/(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var xe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y;return r=V(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=f)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=ae(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=f?(s=this.lat0,t.x=a,t.y=s,t):(s=ae(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-l,Math.abs(o)<=f?(a=this.lat0>=0?V(this.long0+Math.atan2(t.x,-t.y)):V(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=V(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]},Se={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ce={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Ee(t,e,n,r){var i;return t<f?(r.value=Ce.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=g?r.value=Ce.AREA_0:i>g&&i<=l+g?(r.value=Ce.AREA_1,i-=l):i>l+g||i<=-(l+g)?(r.value=Ce.AREA_2,i=i>=0?i-v:i+v):(r.value=Ce.AREA_3,i+=l)),i}function Te(t,e){var n=t+e;return n<-v?n+=m:n>+v&&(n-=m),n}var Me={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=l-g/2?this.face=Se.TOP:this.lat0<=-(l-g/2)?this.face=Se.BOTTOM:Math.abs(this.long0)<=g?this.face=Se.FRONT:Math.abs(this.long0)<=l+g?this.face=this.long0>0?Se.RIGHT:Se.LEFT:this.face=Se.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,a,s={x:0,y:0},c={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===Se.TOP)i=l-e,n>=g&&n<=l+g?(c.value=Ce.AREA_0,r=n-l):n>l+g||n<=-(l+g)?(c.value=Ce.AREA_1,r=n>0?n-v:n+v):n>-(l+g)&&n<=-g?(c.value=Ce.AREA_2,r=n+l):(c.value=Ce.AREA_3,r=n);else if(this.face===Se.BOTTOM)i=l+e,n>=g&&n<=l+g?(c.value=Ce.AREA_0,r=-n+l):n<g&&n>=-g?(c.value=Ce.AREA_1,r=-n):n<-g&&n>=-(l+g)?(c.value=Ce.AREA_2,r=-n-l):(c.value=Ce.AREA_3,r=n>0?-n+v:-n-v);else{var u,d,f,p,h,m;this.face===Se.RIGHT?n=Te(n,+l):this.face===Se.BACK?n=Te(n,+v):this.face===Se.LEFT&&(n=Te(n,-l)),p=Math.sin(e),h=Math.cos(e),m=Math.sin(n),u=h*Math.cos(n),d=h*m,f=p,this.face===Se.FRONT?r=Ee(i=Math.acos(u),f,d,c):this.face===Se.RIGHT?r=Ee(i=Math.acos(d),f,-u,c):this.face===Se.BACK?r=Ee(i=Math.acos(-u),f,-d,c):this.face===Se.LEFT?r=Ee(i=Math.acos(-d),f,u,c):(i=r=0,c.value=Ce.AREA_0)}return a=Math.atan(12/v*(r+Math.acos(Math.sin(r)*Math.cos(g))-l)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),c.value===Ce.AREA_1?a+=l:c.value===Ce.AREA_2?a+=v:c.value===Ce.AREA_3&&(a+=1.5*v),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,o,a,s,c,u,d,f,p,h={lam:0,phi:0},g={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?g.value=Ce.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(g.value=Ce.AREA_1,e-=l):t.x<0&&-t.x>=Math.abs(t.y)?(g.value=Ce.AREA_2,e=e<0?e+v:e-v):(g.value=Ce.AREA_3,e+=l),u=v/12*Math.tan(e),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Se.TOP)c=Math.acos(s),h.phi=l-c,g.value===Ce.AREA_0?h.lam=a+l:g.value===Ce.AREA_1?h.lam=a<0?a+v:a-v:g.value===Ce.AREA_2?h.lam=a-l:h.lam=a;else if(this.face===Se.BOTTOM)c=Math.acos(s),h.phi=c-l,g.value===Ce.AREA_0?h.lam=-a+l:g.value===Ce.AREA_1?h.lam=-a:g.value===Ce.AREA_2?h.lam=-a-l:h.lam=a<0?-a-v:-a+v;else{var m,y,b;u=(m=s)*m,y=(u+=(b=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*b)>=1?0:Math.sqrt(1-u),g.value===Ce.AREA_1?(u=y,y=-b,b=u):g.value===Ce.AREA_2?(y=-y,b=-b):g.value===Ce.AREA_3&&(u=y,y=b,b=-u),this.face===Se.RIGHT?(u=m,m=-y,y=u):this.face===Se.BACK?(m=-m,y=-y):this.face===Se.LEFT&&(u=m,m=y,y=-u),h.phi=Math.acos(-b)-l,h.lam=Math.atan2(y,m),this.face===Se.RIGHT?h.lam=Te(h.lam,-l):this.face===Se.BACK?h.lam=Te(h.lam,-v):this.face===Se.LEFT&&(h.lam=Te(h.lam,+l))}return 0!==this.es&&(d=h.phi<0?1:0,f=Math.tan(h.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),h.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),d&&(h.phi=-h.phi)),h.lam+=this.long0,t.x=h.lam,t.y=h.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},ke=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ae=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ie=.8487,Oe=1.3523,Pe=h/5,Le=1/Pe,De=18,Ne=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Re=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var Fe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=V(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*Pe);r<0?r=0:r>=De&&(r=De-1),n=h*(n-Le*r);var i={x:Ne(ke[r],n)*e,y:Ne(Ae[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Ie+this.x0,i.y=i.y*this.a*Oe+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Ie),y:Math.abs(t.y-this.y0)/(this.a*Oe)};if(e.y>=1)e.x/=ke[De][0],e.y=t.y<0?-l:l;else{var n=Math.floor(e.y*De);for(n<0?n=0:n>=De&&(n=De-1);;)if(Ae[n][0]>e.y)--n;else{if(!(Ae[n+1][0]<=e.y))break;++n}var r=Ae[n],i=5*(e.y-r[0])/(Ae[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}(function(t){return(Ne(r,t)-e.y)/Re(r,t)},i,f,100),e.x/=Ne(ke[n],i),e.y=(5*n+i)*p,t.y<0&&(e.y=-e.y)}return e.x=V(e.x+this.long0),e},names:["Robinson","robin"]};gt.defaultDatum="WGS84",gt.Proj=it,gt.WGS84=new gt.Proj("WGS84"),gt.Point=yt,gt.toPoint=lt,gt.defs=F,gt.transform=dt,gt.mgrs=mt.default,gt.version=bt.a,function(t){t.Proj.projections.add(Ct),t.Proj.projections.add(Ot),t.Proj.projections.add(Lt),t.Proj.projections.add(Ft),t.Proj.projections.add(Bt),t.Proj.projections.add(jt),t.Proj.projections.add(qt),t.Proj.projections.add(zt),t.Proj.projections.add(Ut),t.Proj.projections.add(Qt),t.Proj.projections.add(oe),t.Proj.projections.add(se),t.Proj.projections.add(le),t.Proj.projections.add(ue),t.Proj.projections.add(de),t.Proj.projections.add(pe),t.Proj.projections.add(he),t.Proj.projections.add(ge),t.Proj.projections.add(ve),t.Proj.projections.add(ye),t.Proj.projections.add(be),t.Proj.projections.add(we),t.Proj.projections.add(_e),t.Proj.projections.add(xe),t.Proj.projections.add(Me),t.Proj.projections.add(Fe)}(gt);e.default=gt},function(t,e,n){"use strict";n.r(e);var r=Math.PI,i=2*r,o=i-1e-6;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function s(){return new a}a.prototype=s.prototype={constructor:a,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var a=this._x1,s=this._y1,l=n-t,c=i-e,u=a-t,d=s-e,f=u*u+d*d;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(d*l-c*u)>1e-6&&o){var p=n-a,h=i-s,g=l*l+c*c,m=p*p+h*h,v=Math.sqrt(g),y=Math.sqrt(f),b=o*Math.tan((r-Math.acos((g+f-m)/(2*v*y)))/2),w=b/y,_=b/v;Math.abs(w-1)>1e-6&&(this._+="L"+(t+w*u)+","+(e+w*d)),this._+="A"+o+","+o+",0,0,"+ +(d*p>u*h)+","+(this._x1=t+_*l)+","+(this._y1=e+_*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,a,s,l){t=+t,e=+e;var c=(n=+n)*Math.cos(a),u=n*Math.sin(a),d=t+c,f=e+u,p=1^l,h=l?a-s:s-a;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+d+","+f:(Math.abs(this._x1-d)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+d+","+f),n&&(h<0&&(h=h%i+i),h>o?this._+="A"+n+","+n+",0,1,"+p+","+(t-c)+","+(e-u)+"A"+n+","+n+",0,1,"+p+","+(this._x1=d)+","+(this._y1=f):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=r)+","+p+","+(this._x1=t+n*Math.cos(s))+","+(this._y1=e+n*Math.sin(s))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var l=s,c=function(t){return function(){return t}},u=Math.abs,d=Math.atan2,f=Math.cos,p=Math.max,h=Math.min,g=Math.sin,m=Math.sqrt,v=1e-12,y=Math.PI,b=y/2,w=2*y;function _(t){return t>=1?b:t<=-1?-b:Math.asin(t)}function x(t){return t.innerRadius}function S(t){return t.outerRadius}function C(t){return t.startAngle}function E(t){return t.endAngle}function T(t){return t&&t.padAngle}function M(t,e,n,r,i,o,a){var s=t-n,l=e-r,c=(a?o:-o)/m(s*s+l*l),u=c*l,d=-c*s,f=t+u,h=e+d,g=n+u,v=r+d,y=(f+g)/2,b=(h+v)/2,w=g-f,_=v-h,x=w*w+_*_,S=i-o,C=f*v-g*h,E=(_<0?-1:1)*m(p(0,S*S*x-C*C)),T=(C*_-w*E)/x,M=(-C*w-_*E)/x,k=(C*_+w*E)/x,A=(-C*w+_*E)/x,I=T-y,O=M-b,P=k-y,L=A-b;return I*I+O*O>P*P+L*L&&(T=k,M=A),{cx:T,cy:M,x01:-u,y01:-d,x11:T*(i/S-1),y11:M*(i/S-1)}}var k=function(){var t=x,e=S,n=c(0),r=null,i=C,o=E,a=T,s=null;function p(){var c,p,x=+t.apply(this,arguments),S=+e.apply(this,arguments),C=i.apply(this,arguments)-b,E=o.apply(this,arguments)-b,T=u(E-C),k=E>C;if(s||(s=c=l()),S<x&&(p=S,S=x,x=p),S>v)if(T>w-v)s.moveTo(S*f(C),S*g(C)),s.arc(0,0,S,C,E,!k),x>v&&(s.moveTo(x*f(E),x*g(E)),s.arc(0,0,x,E,C,k));else{var A,I,O=C,P=E,L=C,D=E,N=T,R=T,F=a.apply(this,arguments)/2,B=F>v&&(r?+r.apply(this,arguments):m(x*x+S*S)),j=h(u(S-x)/2,+n.apply(this,arguments)),q=j,z=j;if(B>v){var U=_(B/x*g(F)),$=_(B/S*g(F));(N-=2*U)>v?(L+=U*=k?1:-1,D-=U):(N=0,L=D=(C+E)/2),(R-=2*$)>v?(O+=$*=k?1:-1,P-=$):(R=0,O=P=(C+E)/2)}var V=S*f(O),H=S*g(O),W=x*f(D),G=x*g(D);if(j>v){var Y=S*f(P),K=S*g(P),X=x*f(L),Q=x*g(L);if(T<y){var Z=N>v?function(t,e,n,r,i,o,a,s){var l=n-t,c=r-e,u=a-i,d=s-o,f=(u*(e-o)-d*(t-i))/(d*l-u*c);return[t+f*l,e+f*c]}(V,H,X,Q,Y,K,W,G):[W,G],J=V-Z[0],tt=H-Z[1],et=Y-Z[0],nt=K-Z[1],rt=1/g(function(t){return t>1?0:t<-1?y:Math.acos(t)}((J*et+tt*nt)/(m(J*J+tt*tt)*m(et*et+nt*nt)))/2),it=m(Z[0]*Z[0]+Z[1]*Z[1]);q=h(j,(x-it)/(rt-1)),z=h(j,(S-it)/(rt+1))}}R>v?z>v?(A=M(X,Q,V,H,S,z,k),I=M(Y,K,W,G,S,z,k),s.moveTo(A.cx+A.x01,A.cy+A.y01),z<j?s.arc(A.cx,A.cy,z,d(A.y01,A.x01),d(I.y01,I.x01),!k):(s.arc(A.cx,A.cy,z,d(A.y01,A.x01),d(A.y11,A.x11),!k),s.arc(0,0,S,d(A.cy+A.y11,A.cx+A.x11),d(I.cy+I.y11,I.cx+I.x11),!k),s.arc(I.cx,I.cy,z,d(I.y11,I.x11),d(I.y01,I.x01),!k))):(s.moveTo(V,H),s.arc(0,0,S,O,P,!k)):s.moveTo(V,H),x>v&&N>v?q>v?(A=M(W,G,Y,K,x,-q,k),I=M(V,H,X,Q,x,-q,k),s.lineTo(A.cx+A.x01,A.cy+A.y01),q<j?s.arc(A.cx,A.cy,q,d(A.y01,A.x01),d(I.y01,I.x01),!k):(s.arc(A.cx,A.cy,q,d(A.y01,A.x01),d(A.y11,A.x11),!k),s.arc(0,0,x,d(A.cy+A.y11,A.cx+A.x11),d(I.cy+I.y11,I.cx+I.x11),k),s.arc(I.cx,I.cy,q,d(I.y11,I.x11),d(I.y01,I.x01),!k))):s.arc(0,0,x,D,L,k):s.lineTo(W,G)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return p.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-y/2;return[f(r)*n,g(r)*n]},p.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:c(+e),p):t},p.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:c(+t),p):e},p.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:c(+t),p):n},p.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:c(+t),p):r},p.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:c(+t),p):i},p.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:c(+t),p):o},p.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:c(+t),p):a},p.context=function(t){return arguments.length?(s=null==t?null:t,p):s},p};function A(t){this._context=t}A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var I=function(t){return new A(t)};function O(t){return t[0]}function P(t){return t[1]}var L=function(){var t=O,e=P,n=c(!0),r=null,i=I,o=null;function a(a){var s,c,u,d=a.length,f=!1;for(null==r&&(o=i(u=l())),s=0;s<=d;++s)!(s<d&&n(c=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(c,s,a),+e(c,s,a));if(u)return o=null,u+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:c(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:c(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:c(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a},D=function(){var t=O,e=null,n=c(0),r=P,i=c(!0),o=null,a=I,s=null;function u(c){var u,d,f,p,h,g=c.length,m=!1,v=new Array(g),y=new Array(g);for(null==o&&(s=a(h=l())),u=0;u<=g;++u){if(!(u<g&&i(p=c[u],u,c))===m)if(m=!m)d=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=u-1;f>=d;--f)s.point(v[f],y[f]);s.lineEnd(),s.areaEnd()}m&&(v[u]=+t(p,u,c),y[u]=+n(p,u,c),s.point(e?+e(p,u,c):v[u],r?+r(p,u,c):y[u]))}if(h)return s=null,h+""||null}function d(){return L().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:c(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:c(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:c(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:c(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:c(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:c(+t),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(n)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:c(!!t),u):i},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u},N=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},R=function(t){return t},F=function(){var t=R,e=N,n=null,r=c(0),i=c(w),o=c(0);function a(a){var s,l,c,u,d,f=a.length,p=0,h=new Array(f),g=new Array(f),m=+r.apply(this,arguments),v=Math.min(w,Math.max(-w,i.apply(this,arguments)-m)),y=Math.min(Math.abs(v)/f,o.apply(this,arguments)),b=y*(v<0?-1:1);for(s=0;s<f;++s)(d=g[h[s]=s]=+t(a[s],s,a))>0&&(p+=d);for(null!=e?h.sort(function(t,n){return e(g[t],g[n])}):null!=n&&h.sort(function(t,e){return n(a[t],a[e])}),s=0,c=p?(v-f*b)/p:0;s<f;++s,m=u)l=h[s],u=m+((d=g[l])>0?d*c:0)+b,g[l]={data:a[l],index:s,value:d,startAngle:m,endAngle:u,padAngle:y};return g}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:c(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:c(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:c(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:c(+t),a):o},a},B=q(I);function j(t){this._curve=t}function q(t){function e(e){return new j(t(e))}return e._curve=t,e}function z(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(q(t)):e()._curve},t}j.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var U=function(){return z(L().curve(B))},$=function(){var t=D().curve(B),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return z(n())},delete t.lineX0,t.lineEndAngle=function(){return z(r())},delete t.lineX1,t.lineInnerRadius=function(){return z(i())},delete t.lineY0,t.lineOuterRadius=function(){return z(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(q(t)):e()._curve},t},V=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},H=Array.prototype.slice;function W(t){return t.source}function G(t){return t.target}function Y(t){var e=W,n=G,r=O,i=P,o=null;function a(){var a,s=H.call(arguments),c=e.apply(this,s),u=n.apply(this,s);if(o||(o=a=l()),t(o,+r.apply(this,(s[0]=c,s)),+i.apply(this,s),+r.apply(this,(s[0]=u,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:c(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:c(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function K(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function X(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function Q(t,e,n,r,i){var o=V(e,n),a=V(e,n=(n+i)/2),s=V(r,n),l=V(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],l[0],l[1])}function Z(){return Y(K)}function J(){return Y(X)}function tt(){var t=Y(Q);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var et={draw:function(t,e){var n=Math.sqrt(e/y);t.moveTo(n,0),t.arc(0,0,n,0,w)}},nt={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},rt=Math.sqrt(1/3),it=2*rt,ot={draw:function(t,e){var n=Math.sqrt(e/it),r=n*rt;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},at=Math.sin(y/10)/Math.sin(7*y/10),st=Math.sin(w/10)*at,lt=-Math.cos(w/10)*at,ct={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=st*n,i=lt*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=w*o/5,s=Math.cos(a),l=Math.sin(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},ut={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},dt=Math.sqrt(3),ft={draw:function(t,e){var n=-Math.sqrt(e/(3*dt));t.moveTo(0,2*n),t.lineTo(-dt*n,-n),t.lineTo(dt*n,-n),t.closePath()}},pt=Math.sqrt(3)/2,ht=1/Math.sqrt(12),gt=3*(ht/2+1),mt={draw:function(t,e){var n=Math.sqrt(e/gt),r=n/2,i=n*ht,o=r,a=n*ht+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(-.5*r-pt*i,pt*r+-.5*i),t.lineTo(-.5*o-pt*a,pt*o+-.5*a),t.lineTo(-.5*s-pt*l,pt*s+-.5*l),t.lineTo(-.5*r+pt*i,-.5*i-pt*r),t.lineTo(-.5*o+pt*a,-.5*a-pt*o),t.lineTo(-.5*s+pt*l,-.5*l-pt*s),t.closePath()}},vt=[et,nt,ot,ut,ct,ft,mt],yt=function(){var t=c(et),e=c(64),n=null;function r(){var r;if(n||(n=r=l()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:c(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:c(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r},bt=function(){};function wt(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function _t(t){this._context=t}_t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var xt=function(t){return new _t(t)};function St(t){this._context=t}St.prototype={areaStart:bt,areaEnd:bt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:wt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Ct=function(t){return new St(t)};function Et(t){this._context=t}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Tt=function(t){return new Et(t)};function Mt(t,e){this._basis=new _t(t),this._beta=e}Mt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*a),this._beta*e[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var kt=function t(e){function n(t){return 1===e?new _t(t):new Mt(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function At(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function It(t,e){this._context=t,this._k=(1-e)/6}It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:At(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:At(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ot=function t(e){function n(t){return new It(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Pt(t,e){this._context=t,this._k=(1-e)/6}Pt.prototype={areaStart:bt,areaEnd:bt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:At(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Lt=function t(e){function n(t){return new Pt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Dt(t,e){this._context=t,this._k=(1-e)/6}Dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:At(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Nt=function t(e){function n(t){return new Dt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Rt(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>v){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>v){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Ft(t,e){this._context=t,this._alpha=e}Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Rt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bt=function t(e){function n(t){return e?new Ft(t,e):new It(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function jt(t,e){this._context=t,this._alpha=e}jt.prototype={areaStart:bt,areaEnd:bt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Rt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var qt=function t(e){function n(t){return e?new jt(t,e):new Pt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function zt(t,e){this._context=t,this._alpha=e}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Rt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ut=function t(e){function n(t){return e?new zt(t,e):new Dt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function $t(t){this._context=t}$t.prototype={areaStart:bt,areaEnd:bt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Vt=function(t){return new $t(t)};function Ht(t){return t<0?-1:1}function Wt(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Ht(o)+Ht(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Gt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Yt(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Kt(t){this._context=t}function Xt(t){this._context=new Qt(t)}function Qt(t){this._context=t}function Zt(t){return new Kt(t)}function Jt(t){return new Xt(t)}function te(t){this._context=t}function ee(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}Kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yt(this,this._t0,Gt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Yt(this,Gt(this,n=Wt(this,t,e)),n);break;default:Yt(this,this._t0,n=Wt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Xt.prototype=Object.create(Kt.prototype)).point=function(t,e){Kt.prototype.point.call(this,e,t)},Qt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=ee(t),i=ee(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ne=function(t){return new te(t)};function re(t,e){this._context=t,this._t=e}re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var ie=function(t){return new re(t,.5)};function oe(t){return new re(t,0)}function ae(t){return new re(t,1)}var se=function(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},le=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function ce(t,e){return t[e]}var ue=function(){var t=c([]),e=le,n=se,r=ce;function i(i){var o,a,s=t.apply(this,arguments),l=i.length,c=s.length,u=new Array(c);for(o=0;o<c;++o){for(var d,f=s[o],p=u[o]=new Array(l),h=0;h<l;++h)p[h]=d=[0,+r(i[h],f,h,i)],d.data=i[h];p.key=f}for(o=0,a=e(u);o<c;++o)u[a[o]].index=o;return n(u,a),u}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:c(H.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:c(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?le:"function"==typeof t?t:c(H.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?se:t,i):n},i},de=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}se(t,e)}},fe=function(t,e){if((s=t.length)>1)for(var n,r,i,o,a,s,l=0,c=t[e[0]].length;l<c;++l)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][l])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},pe=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}se(t,e)}},he=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,c=0;s<i;++s){for(var u=t[e[s]],d=u[a][1]||0,f=(d-(u[a-1][1]||0))/2,p=0;p<s;++p){var h=t[e[p]];f+=(h[a][1]||0)-(h[a-1][1]||0)}l+=d,c+=f*d}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,se(t,e)}},ge=function(t){var e=t.map(me);return le(t).sort(function(t,n){return e[t]-e[n]})};function me(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var ve=function(t){return ge(t).reverse()},ye=function(t){var e,n,r=t.length,i=t.map(me),o=le(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,l=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],l.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(l)},be=function(t){return le(t).reverse()};n.d(e,"arc",function(){return k}),n.d(e,"area",function(){return D}),n.d(e,"line",function(){return L}),n.d(e,"pie",function(){return F}),n.d(e,"areaRadial",function(){return $}),n.d(e,"radialArea",function(){return $}),n.d(e,"lineRadial",function(){return U}),n.d(e,"radialLine",function(){return U}),n.d(e,"pointRadial",function(){return V}),n.d(e,"linkHorizontal",function(){return Z}),n.d(e,"linkVertical",function(){return J}),n.d(e,"linkRadial",function(){return tt}),n.d(e,"symbol",function(){return yt}),n.d(e,"symbols",function(){return vt}),n.d(e,"symbolCircle",function(){return et}),n.d(e,"symbolCross",function(){return nt}),n.d(e,"symbolDiamond",function(){return ot}),n.d(e,"symbolSquare",function(){return ut}),n.d(e,"symbolStar",function(){return ct}),n.d(e,"symbolTriangle",function(){return ft}),n.d(e,"symbolWye",function(){return mt}),n.d(e,"curveBasisClosed",function(){return Ct}),n.d(e,"curveBasisOpen",function(){return Tt}),n.d(e,"curveBasis",function(){return xt}),n.d(e,"curveBundle",function(){return kt}),n.d(e,"curveCardinalClosed",function(){return Lt}),n.d(e,"curveCardinalOpen",function(){return Nt}),n.d(e,"curveCardinal",function(){return Ot}),n.d(e,"curveCatmullRomClosed",function(){return qt}),n.d(e,"curveCatmullRomOpen",function(){return Ut}),n.d(e,"curveCatmullRom",function(){return Bt}),n.d(e,"curveLinearClosed",function(){return Vt}),n.d(e,"curveLinear",function(){return I}),n.d(e,"curveMonotoneX",function(){return Zt}),n.d(e,"curveMonotoneY",function(){return Jt}),n.d(e,"curveNatural",function(){return ne}),n.d(e,"curveStep",function(){return ie}),n.d(e,"curveStepAfter",function(){return ae}),n.d(e,"curveStepBefore",function(){return oe}),n.d(e,"stack",function(){return ue}),n.d(e,"stackOffsetExpand",function(){return de}),n.d(e,"stackOffsetDiverging",function(){return fe}),n.d(e,"stackOffsetNone",function(){return se}),n.d(e,"stackOffsetSilhouette",function(){return pe}),n.d(e,"stackOffsetWiggle",function(){return he}),n.d(e,"stackOrderAscending",function(){return ge}),n.d(e,"stackOrderDescending",function(){return ve}),n.d(e,"stackOrderInsideOut",function(){return ye}),n.d(e,"stackOrderNone",function(){return le}),n.d(e,"stackOrderReverse",function(){return be})},function(t,e,n){"use strict";n.r(e);var r=n(89),i=n(688),o={INIT:"@@redux/INIT"};function a(t,e,n){var s;if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(a)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var l=t,c=e,u=[],d=u,f=!1;function p(){d===u&&(d=u.slice())}function h(){return c}function g(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return p(),d.push(t),function(){if(e){e=!1,p();var n=d.indexOf(t);d.splice(n,1)}}}function m(t){if(!Object(r.a)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,c=l(c,t)}finally{f=!1}for(var e=u=d,n=0;n<e.length;n++){(0,e[n])()}return t}return m({type:o.INIT}),(s={dispatch:m,subscribe:g,getState:h,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");l=t,m({type:o.INIT})}})[i.a]=function(){var t,e=g;return(t={subscribe:function(t){if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(h())}return n(),{unsubscribe:e(n)}}})[i.a]=function(){return this},t},s}function s(t,e){var n=e&&e.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];0,"function"==typeof t[i]&&(n[i]=t[i])}var a=Object.keys(n);var l=void 0;try{!function(t){Object.keys(t).forEach(function(e){var n=t[e];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(t){l=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(l)throw l;for(var r=!1,i={},o=0;o<a.length;o++){var c=a[o],u=n[c],d=t[c],f=u(d,e);if(void 0===f){var p=s(c,e);throw new Error(p)}i[c]=f,r=r||f!==d}return r?i:t}}function c(t,e){return function(){return e(t.apply(void 0,arguments))}}function u(t,e){if("function"==typeof t)return c(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];"function"==typeof a&&(r[o]=c(a,e))}return r}function d(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}var f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function p(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,i){var o,a=t(n,r,i),s=a.dispatch,l={getState:a.getState,dispatch:function(t){return s(t)}};return o=e.map(function(t){return t(l)}),s=d.apply(void 0,o)(a.dispatch),f({},a,{dispatch:s})}}}n.d(e,"createStore",function(){return a}),n.d(e,"combineReducers",function(){return l}),n.d(e,"bindActionCreators",function(){return u}),n.d(e,"applyMiddleware",function(){return p}),n.d(e,"compose",function(){return d})},function(t,e,n){"use strict";n.r(e);function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==e)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(e(i=t[o],o,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}r.prototype=i.prototype={constructor:r,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var o=i,a=function(){var t,e,n,r=[],i=[];function a(n,i,s,l){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var c,u,d,f=-1,p=n.length,h=r[i++],g=o(),m=s();++f<p;)(d=g.get(c=h(u=n[f])+""))?d.push(u):g.set(c,[u]);return g.each(function(t,e){l(m,e,a(t,i,s,l))}),m}return n={object:function(t){return a(t,0,s,l)},map:function(t){return a(t,0,c,u)},entries:function(t){return function t(n,o){if(++o>r.length)return n;var a,s=i[o-1];return null!=e&&o>=r.length?a=n.entries():(a=[],n.each(function(e,n){a.push({key:n,values:t(e,o)})})),null!=s?a.sort(function(t,e){return s(t.key,e.key)}):a}(a(t,0,c,u),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function s(){return{}}function l(t,e,n){t[e]=n}function c(){return o()}function u(t,e,n){t.set(e,n)}function d(){}var f=o.prototype;function p(t,e){var n=new d;if(t instanceof d)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}d.prototype=p.prototype={constructor:d,has:f.has,add:function(t){return this["$"+(t+="")]=t,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};var h=p,g=function(t){var e=[];for(var n in t)e.push(n);return e},m=function(t){var e=[];for(var n in t)e.push(t[n]);return e},v=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e};n.d(e,"nest",function(){return a}),n.d(e,"set",function(){return h}),n.d(e,"map",function(){return o}),n.d(e,"keys",function(){return g}),n.d(e,"values",function(){return m}),n.d(e,"entries",function(){return v})}])});