/*!
Geocoder-OL3
Copyright 2018 CCRi.
*/
angular.module("ccri.geocoderOL3",[]).namespace();var geocoderOL3;!function(a){var b;!function(a){a[a.GEOJSON=0]="GEOJSON",a[a.WKT=1]="WKT",a[a.GEOCODE_XYZ_JSON=2]="GEOCODE_XYZ_JSON"}(b=a.GeometryFormat||(a.GeometryFormat={}));var c=function(){function a(a,b,c,d,e,f,g){this.$interpolate=a,this.$http=b,this.urlTemplate=c,this.formatDescription=d,this.resultsSelectionPath=e,this.geometrySelectionPath=f,this.geometryStringFormat=g}return a.prototype.resolve=function(a){var c=this.$interpolate(this.urlTemplate)({searchTerm:a}),d=this.resultsSelectionPath,e=this.geometrySelectionPath,f=this.geometryStringFormat;return this.$http.get(c).then(function(a){var c=_.get(a.data,d,a.data),g=_.pluck(c,e),h=[],i=new ol.format.GeoJSON;switch(f){case b.GEOCODE_XYZ_JSON:if(!c.error){var j=parseFloat(c.longt);if(j>=-180&&j<=180){var k=parseFloat(c.latt);k>=-90&&k<=90&&(h=[new ol.geom.Point([j,k])])}}break;case b.WKT:var l=new ol.format.WKT;h=_.map(g,function(a){return l.readGeometry(a)});break;default:h=_.map(g,function(a){return i.readGeometry(a)})}var m=h;h.length>1&&(m=[new ol.geom.GeometryCollection(h)]);var n=_.map(m,function(a){return i.writeGeometry(a)});return n},function(a){return[]})},a.prototype.getAcceptedFormatDescriptions=function(){return _.flatten([this.formatDescription])},a}();a.URLResolver=c}(geocoderOL3||(geocoderOL3={}));